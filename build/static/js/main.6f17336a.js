/*! For license information please see main.6f17336a.js.LICENSE.txt */
!function(){var e={5345:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<a(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var l=2*(i+1)-1,g=e[l],s=l+1,c=e[s];if(0>a(g,n))s<r&&0>a(c,g)?(e[i]=c,e[s]=n,i=s):(e[i]=g,e[l]=n,i=l);else{if(!(s<r&&0>a(c,n)))break e;e[i]=c,e[s]=n,i=s}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,g=l.now();t.unstable_now=function(){return l.now()-g}}var s=[],c=[],u=1,I=null,d=3,C=!1,h=!1,A=!1,p="function"===typeof setTimeout?setTimeout:null,m="function"===typeof clearTimeout?clearTimeout:null,f="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=i(c);null!==t;){if(null===t.callback)r(c);else{if(!(t.startTime<=e))break;r(c),t.sortIndex=t.expirationTime,n(s,t)}t=i(c)}}function b(e){if(A=!1,v(e),!h)if(null!==i(s))h=!0,k(y);else{var t=i(c);null!==t&&X(b,t.startTime-e)}}function y(e,n){h=!1,A&&(A=!1,m(w),w=-1),C=!0;var a=d;try{for(v(n),I=i(s);null!==I&&(!(I.expirationTime>n)||e&&!W());){var o=I.callback;if("function"===typeof o){I.callback=null,d=I.priorityLevel;var l=o(I.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?I.callback=l:I===i(s)&&r(s),v(n)}else r(s);I=i(s)}if(null!==I)var g=!0;else{var u=i(c);null!==u&&X(b,u.startTime-n),g=!1}return g}finally{I=null,d=a,C=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var G,B=!1,Z=null,w=-1,x=5,S=-1;function W(){return!(t.unstable_now()-S<x)}function V(){if(null!==Z){var e=t.unstable_now();S=e;var n=!0;try{n=Z(!0,e)}finally{n?G():(B=!1,Z=null)}}else B=!1}if("function"===typeof f)G=function(){f(V)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,q=R.port2;R.port1.onmessage=V,G=function(){q.postMessage(null)}}else G=function(){p(V,0)};function k(e){Z=e,B||(B=!0,G())}function X(e,n){w=p((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){h||C||(h=!0,k(y))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return i(s)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,r,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===i(s)&&e===i(c)&&(A?(m(w),w=-1):A=!0,X(b,a-o))):(e.sortIndex=l,n(s,e),h||C||(h=!0,k(y))),e},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},4545:function(e,t,n){"use strict";e.exports=n(5345)},7823:function(e){"use strict";e.exports=function(e,t){if(null===e||"undefined"===typeof e)throw new TypeError("expected first argument to be an object.");if("undefined"===typeof t||"undefined"===typeof Symbol)return e;if("function"!==typeof Object.getOwnPropertySymbols)return e;for(var n=Object.prototype.propertyIsEnumerable,i=Object(e),r=arguments.length,a=0;++a<r;)for(var o=Object(arguments[a]),l=Object.getOwnPropertySymbols(o),g=0;g<l.length;g++){var s=l[g];n.call(o,s)&&(i[s]=o[s])}return i}},9998:function(e,t){"use strict";t.Z=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),i=e.name||"",r=(e.type||"").toLowerCase(),a=r.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?i.toLowerCase().endsWith(t):t.endsWith("/*")?a===t.replace(/\/.*$/,""):r===t}))}return!0}},7494:function(e){function t(e,t,n){var i,r,a,o,l;function g(){var s=Date.now()-o;s<t&&s>=0?i=setTimeout(g,t-s):(i=null,n||(l=e.apply(a,r),a=r=null))}null==t&&(t=100);var s=function(){a=this,r=arguments,o=Date.now();var s=n&&!i;return i||(i=setTimeout(g,t)),s&&(l=e.apply(a,r),a=r=null),l};return s.clear=function(){i&&(clearTimeout(i),i=null)},s.flush=function(){i&&(l=e.apply(a,r),a=r=null,clearTimeout(i),i=null)},s}t.debounce=t,e.exports=t},2618:function(e,t,n){var i;!function(){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),a={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen};void 0===(i=function(){return a}.call(t,n,t,e))||(e.exports=i)}()},5456:function(e,t,n){"use strict";var i=n(9583);function r(e,t){for(var n in t)a(t,n)&&(e[n]=t[n])}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e){i(e)||(e={});for(var t=arguments.length,n=1;n<t;n++){var a=arguments[n];i(a)&&r(e,a)}return e}},9583:function(e){"use strict";e.exports=function(e){return"undefined"!==typeof e&&null!==e&&("object"===typeof e||"function"===typeof e)}},8845:function(e){"use strict";e.exports=function(e,t,n){for(var i in e)if(!1===t.call(n,e[i],i,e))break}},9944:function(e){function t(e){return e?Array.isArray(e)?e.join("."):e:""}e.exports=function(e,n,i,r,a){if(null===(o=e)||"object"!==typeof o&&"function"!==typeof o||!n)return e;var o;if(n=t(n),i&&(n+="."+t(i)),r&&(n+="."+t(r)),a&&(n+="."+t(a)),n in e)return e[n];for(var l=n.split("."),g=l.length,s=-1;e&&++s<g;){for(var c=l[s];"\\"===c[c.length-1];)c=c.slice(0,-1)+"."+l[++s];e=e[c]}return e}},2410:function(e){e.exports={"<<=":!0,">>=":!0,"++":!0,"--":!0,"+=":!0,"-=":!0,"*=":!0,"/=":!0,"%=":!0,"&=":!0,"^=":!0,"|=":!0,"=":!0}},9989:function(e){e.exports={precision:!0,highp:!0,mediump:!0,lowp:!0,attribute:!0,const:!0,uniform:!0,varying:!0,break:!0,continue:!0,do:!0,for:!0,while:!0,if:!0,else:!0,in:!0,out:!0,inout:!0,true:!0,false:!0,return:!0}},4989:function(e,t,n){var i=n(2410),r=n(9989);e.exports=function(e){for(var t=0,n=0;n<e.length;n++){var a=(g=e[n]).type;g.assignment=!1,g.declaration=!1,"ident"!==a&&"builtin"!==a||(t=n+1,s(1),"operator"===e[t].type&&i[e[t].data]&&(g.assignment=!0))}for(n=0;n<e.length;n++){var o=e[n],l=(a=o.type,o.data);if(o.declaration=!1,"keyword"===a){if(r[l])continue}else if("ident"!==a)continue;if(t=n+1,c(),"ident"===e[t].type)if(e[t++].declaration=!0,c(),"("!==e[t].data){for(;e[t]&&";"!==e[t].data;)","===e[t].data?(t++,s(1),(e[t].declaration="ident"===e[t].type)&&t++):(s(1),u(),s(1),t++);n=t}else{for(t++,s(1);e[t]&&")"!==e[t].data&&("keyword"===e[t].type||"ident"===e[t].type);)t++,s(1),"ident"===e[t].type&&(e[t++].declaration=!0,s(1),c(),s(1),","===e[t].data&&(t++,s(1)));n=t}}for(n=0;n<e.length;n++){var g;if("keyword"===(g=e[n]).type&&("struct"===g.data&&(t=n+1,s(1),"ident"===e[t].type&&(t++,s(1),"{"===e[t++].data)))){for(s(1);"ident"===e[t].type||"keyword"===e[t].type;){do{t++,s(1),e[t].structMember=!0,e[t].declaration=!1,t++,c()}while(","===e[t].data);";"===e[t].data&&t++,s()}if(t++,s(1),"ident"===e[t].type)for(e[t].declaration=!0,s(1);","===e[++t].data;)s(1),t++,s(1),"ident"===e[t].type&&(e[t].declaration=!0),s(1)}}return e;function s(n){for(;e[t]&&"whitespace"===e[t].type;)t++}function c(){for(;e[t]&&("integer"===e[t].type||"["===e[t].data||"]"===e[t].data||"whitespace"===e[t].type);)t++}function u(){if(e[t]&&"("===e[t].data){var n=0;do{if(";"===e[t].data)break;"("===e[t].data&&n++,")"===e[t].data&&n--}while(n&&e[++t])}}}},8847:function(e){e.exports=function(e){for(var t=!1,n=0,i=0;i<e.length;i++)switch(t=t||"keyword"===e[i].type&&"for"===e[i].data,e[i].data){case"(":e[i].depth=t?n++:n;break;case"{":e[i].depth=t?n:n++,t=!1;break;case"}":e[i].depth=--n;break;default:e[i].depth=n}for(i=0;i<e.length;i++){var r=e[i],a=i+1;if(("ident"===r.type||"keyword"===r.type)&&(o(),"ident"===e[a].type&&(o(),a++,"("===e[a].data))){for(;e[a]&&";"!==e[a].data&&"{"!==e[a].data;)e[a++].depth++;e[a]&&"{"===e[a].data&&e[a].depth++}}return e;function o(){for(;e[a]&&("whitespace"===e[a].type||"["===e[a].data||"]"===e[a].data||"integer"===e[a].data);)a++}}},1188:function(e,t,n){e.exports=function(e,t){n(8847)(e),n(1793)(e),n(2128)(e),n(4989)(e);for(var i=function(e){for(var t={},n=0;n<e.length;n++){var i=e[n];i.declaration&&(t[i.scope]=t[i.scope]||{},t[i.scope][i.data]=i)}return t}(e),r=t||function(){var e=0;return function(t){return t+"_"+(e++).toString(36)}}(),a={},o=0;o<e.length;o++){var l=e[o],g=l.stack,s=l.data;if(l.descoped=!1,"ident"===l.type&&!l.property&&!l.structMember){for(var c=!1,u=g.length-1;u>=0;u--){var I=i[g[u]];if(I&&I[s]){if(c=!0,u)break;l.descoped=l.data,l.data=a[s]=a[s]||r(s,l)||l.data}}c||(l.descoped=l.data,l.data=a[s]=a[s]||r(s,l)||l.data)}}return e}},3496:function(e){function t(e){return function(t){return"operator"===t.type&&(!e||t.data===e)}}function n(e){return"whitespace"!==e.type}e.exports=function(e){var i,r,a,o=null,l=null,g=0,s=0,c=0,u=0,I=0,d=[];for(i=0;i<e.length;i++)if("{"===(a=e[i]).data){if(g&&g++)continue;if((r=h(i,t(")"),t()))<0)continue;if(u=r,(r=h(r,t("("),t(")")))<0)continue;if(I=r,(r=h(r,n))<0)continue;if("ident"!==e[r].type)continue;if(l=e[r].data,(r=h(r,n))<0)continue;g=1,s=i,o=e[r].data,c=r;var C=h(r,n);switch(e[C]&&e[C].data){case"lowp":case"highp":case"mediump":c=C}}else if(g&&"}"===a.data){if(--g)continue;d.push({name:l,type:o,body:[s+1,i],args:[I,u+1],outer:[c,i+1]})}for(i=0;i<e.length;i++)if(";"===(a=e[i]).data){if((r=h(i,t(")"),t()))<0)continue;if(u=r,(r=h(r,t("("),t(")")))<0)continue;if(I=r,(r=h(r,n))<0)continue;if("ident"!==e[r].type)continue;if(l=e[r].data,(r=h(r,n))<0)continue;if("operator"===e[r].type)continue;if("return"===e[r].data)continue;o=e[r].data,d.push({name:l,type:o,body:!1,args:[I,u+1],outer:[r,i+1]})}return d.sort((function(e,t){return e.outer[0]-t.outer[0]}));function h(t,n,i){for(var r=t-1;r>=0;r--){if(n(e[r]))return r;if(i&&i(e[r]))return-1}return-1}}},2128:function(e){e.exports=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.property=!1,"ident"===n.type){for(var i=t;e[--i]&&"whitespace"===e[i].type;);e[i]&&"operator"===e[i].type&&"."===e[i].data&&(n.property=!0)}}return e}},1793:function(e){e.exports=function(e){var t=[0],n=t[0],i=0;if(!e||!e.length)return e;if(!("depth"in e[0]))throw new Error("glsl-token-scope: No scope depth defined on tokens! Use glsl-token-depth on these tokens first");for(var r=0;r<e.length;r++){var a=e[r],o=a.depth;o>i?t.push(++n):o<i&&t.splice(-1,1),a.scope=t[t.length-1],a.stack=t.slice(),i=a.depth}return e}},7215:function(e){e.exports=function(e){for(var t=[],n=0;n<e.length;n++)"eof"!==e[n].type&&t.push(e[n].data);return t.join("")}},5001:function(e,t,n){e.exports=function(e){var t,n,u,I=0,d=0,C=g,h=[],A=[],p=1,m=0,f=0,v=!1,b=!1,y="",G=a,B=i;"300 es"===(e=e||{}).version&&(G=l,B=o);var Z={},w={};for(I=0;I<G.length;I++)Z[G[I]]=!0;for(I=0;I<B.length;I++)w[B[I]]=!0;return function(e){return A=[],null!==e?function(e){I=0,e.toString&&(e=e.toString());var n;y+=e.replace(/\r\n/g,"\n"),u=y.length;for(;t=y[I],I<u;){switch(n=I,C){case 0:I=q();break;case 1:I=R();break;case 2:I=V();break;case 3:I=k();break;case 4:I=N();break;case 11:I=Y();break;case 5:I=K();break;case s:I=H();break;case 9:I=W();break;case g:I=S()}if(n!==I)if("\n"===y[n])m=0,++p;else++m}return d+=I,y=y.slice(I),A}(e):function(e){h.length&&x(h.join(""));return C=10,x("(eof)"),A}()};function x(e){e.length&&A.push({type:c[C],data:e,position:f,line:p,column:m})}function S(){return h=h.length?[]:h,"/"===n&&"*"===t?(f=d+I-1,C=0,n=t,I+1):"/"===n&&"/"===t?(f=d+I-1,C=1,n=t,I+1):"#"===t?(C=2,f=d+I,I):/\s/.test(t)?(C=9,f=d+I,I):(v=/\d/.test(t),b=/[^\w_]/.test(t),f=d+I,C=v?4:b?3:s,I)}function W(){return/[^\s]/g.test(t)?(x(h.join("")),C=g,I):(h.push(t),n=t,I+1)}function V(){return"\r"!==t&&"\n"!==t||"\\"===n?(h.push(t),n=t,I+1):(x(h.join("")),C=g,I)}function R(){return V()}function q(){return"/"===t&&"*"===n?(h.push(t),x(h.join("")),C=g,I+1):(h.push(t),n=t,I+1)}function k(){if("."===n&&/\d/.test(t))return C=5,I;if("/"===n&&"*"===t)return C=0,I;if("/"===n&&"/"===t)return C=1,I;if("."===t&&h.length){for(;X(h););return C=5,I}if(";"===t||")"===t||"("===t){if(h.length)for(;X(h););return x(t),C=g,I+1}var e=2===h.length&&"="!==t;if(/[\w_\d\s]/.test(t)||e){for(;X(h););return C=g,I}return h.push(t),n=t,I+1}function X(e){for(var t,n,i=0;;){if(t=r.indexOf(e.slice(0,e.length+i).join("")),n=r[t],-1===t){if(i--+e.length>0)continue;n=e.slice(0,1).join("")}return x(n),f+=n.length,(h=h.slice(n.length)).length}}function Y(){return/[^a-fA-F0-9]/.test(t)?(x(h.join("")),C=g,I):(h.push(t),n=t,I+1)}function N(){return"."===t||/[eE]/.test(t)?(h.push(t),C=5,n=t,I+1):"x"===t&&1===h.length&&"0"===h[0]?(C=11,h.push(t),n=t,I+1):/[^\d]/.test(t)?(x(h.join("")),C=g,I):(h.push(t),n=t,I+1)}function K(){return"f"===t&&(h.push(t),n=t,I+=1),/[eE]/.test(t)?(h.push(t),n=t,I+1):("-"!==t&&"+"!==t||!/[eE]/.test(n))&&/[^\d]/.test(t)?(x(h.join("")),C=g,I):(h.push(t),n=t,I+1)}function H(){if(/[^\d\w_]/.test(t)){var e=h.join("");return C=w[e]?8:Z[e]?7:6,x(h.join("")),C=g,I}return h.push(t),n=t,I+1}};var i=n(3826),r=n(4788),a=n(7261),o=n(1990),l=n(4742),g=999,s=9999,c=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},4742:function(e,t,n){var i=n(7261);i=i.slice().filter((function(e){return!/^(gl\_|texture)/.test(e)})),e.exports=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},7261:function(e){e.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},1990:function(e,t,n){var i=n(3826);e.exports=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},3826:function(e){e.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},4788:function(e){e.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},1886:function(e,t,n){var i=n(5001);e.exports=function(e,t){var n=i(t),r=[];return r=(r=r.concat(n(e))).concat(n(null))}},9105:function(e,t,n){"use strict";var i=n(4807);e.exports=function(e){return i(e)||"function"===typeof e||Array.isArray(e)}},4807:function(e,t,n){"use strict";var i=n(8863);function r(e){return!0===i(e)&&"[object Object]"===Object.prototype.toString.call(e)}e.exports=function(e){var t,n;return!1!==r(e)&&("function"===typeof(t=e.constructor)&&(!1!==r(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf")))}},8863:function(e){"use strict";e.exports=function(e){return null!=e&&"object"===typeof e&&!1===Array.isArray(e)}},8089:function(e,t,n){"use strict";var i=n(9105),r=n(7046),a=n(9944),o=n(7809);e.exports=function(e,t,n){if(!i(e))throw new TypeError("expected an object");if("string"!==typeof t||null==n)return r.apply(null,arguments);if("string"===typeof n)return o(e,t,n),e;var l=a(e,t);return i(n)&&i(l)&&(n=r({},l,n)),o(e,t,n),e}},7046:function(e,t,n){"use strict";var i=n(9105),r=n(8845);function a(e,t){for(var n=arguments.length,i=0;++i<n;){var a=arguments[i];l(a)&&r(a,o,e)}return e}function o(e,t){if(function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}(t)){var n=this[t];l(e)&&l(n)?a(n,e):this[t]=e}}function l(e){return i(e)&&!Array.isArray(e)}e.exports=a},4101:function(e){e.exports=function e(t,n,i){function r(o,l){if(!n[o]){if(!t[o]){if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}l=n[o]={exports:{}},t[o][0].call(l.exports,(function(e){return r(t[o][1][e]||e)}),l,l.exports,e,t,n,i)}return n[o].exports}for(var a=void 0,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,t,n){(function(i,r,a,o,l,g,s,c,u){"use strict";var I=e("crypto");function d(e,t){var n;return void 0===(n="passthrough"!==(t=A(e,t)).algorithm?I.createHash(t.algorithm):new f).write&&(n.write=n.update,n.end=n.update),m(t,n).dispatch(e),n.update||n.end(""),n.digest?n.digest("buffer"===t.encoding?void 0:t.encoding):(e=n.read(),"buffer"!==t.encoding?e.toString(t.encoding):e)}(n=t.exports=d).sha1=function(e){return d(e)},n.keys=function(e){return d(e,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},n.MD5=function(e){return d(e,{algorithm:"md5",encoding:"hex"})},n.keysMD5=function(e){return d(e,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var C=I.getHashes?I.getHashes().slice():["sha1","md5"],h=(C.push("passthrough"),["buffer","hex","binary","base64"]);function A(e,t){var n={};if(n.algorithm=(t=t||{}).algorithm||"sha1",n.encoding=t.encoding||"hex",n.excludeValues=!!t.excludeValues,n.algorithm=n.algorithm.toLowerCase(),n.encoding=n.encoding.toLowerCase(),n.ignoreUnknown=!0===t.ignoreUnknown,n.respectType=!1!==t.respectType,n.respectFunctionNames=!1!==t.respectFunctionNames,n.respectFunctionProperties=!1!==t.respectFunctionProperties,n.unorderedArrays=!0===t.unorderedArrays,n.unorderedSets=!1!==t.unorderedSets,n.unorderedObjects=!1!==t.unorderedObjects,n.replacer=t.replacer||void 0,n.excludeKeys=t.excludeKeys||void 0,void 0===e)throw new Error("Object argument required.");for(var i=0;i<C.length;++i)C[i].toLowerCase()===n.algorithm.toLowerCase()&&(n.algorithm=C[i]);if(-1===C.indexOf(n.algorithm))throw new Error('Algorithm "'+n.algorithm+'"  not supported. supported values: '+C.join(", "));if(-1===h.indexOf(n.encoding)&&"passthrough"!==n.algorithm)throw new Error('Encoding "'+n.encoding+'"  not supported. supported values: '+h.join(", "));return n}function p(e){if("function"==typeof e)return null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))}function m(e,t,n){function i(e){return t.update?t.update(e,"utf8"):t.write(e,"utf8")}return n=n||[],{dispatch:function(t){return this["_"+(null===(t=e.replacer?e.replacer(t):t)?"null":typeof t)](t)},_object:function(t){var r,o=Object.prototype.toString.call(t),l=/\[object (.*)\]/i.exec(o);if(l=(l=l?l[1]:"unknown:["+o+"]").toLowerCase(),0<=(o=n.indexOf(t)))return this.dispatch("[CIRCULAR:"+o+"]");if(n.push(t),void 0!==a&&a.isBuffer&&a.isBuffer(t))return i("buffer:"),i(t);if("object"===l||"function"===l||"asyncfunction"===l)return o=Object.keys(t),e.unorderedObjects&&(o=o.sort()),!1===e.respectType||p(t)||o.splice(0,0,"prototype","__proto__","constructor"),e.excludeKeys&&(o=o.filter((function(t){return!e.excludeKeys(t)}))),i("object:"+o.length+":"),r=this,o.forEach((function(n){r.dispatch(n),i(":"),e.excludeValues||r.dispatch(t[n]),i(",")}));if(!this["_"+l]){if(e.ignoreUnknown)return i("["+l+"]");throw new Error('Unknown object type "'+l+'"')}this["_"+l](t)},_array:function(t,r){r=void 0!==r?r:!1!==e.unorderedArrays;var a=this;if(i("array:"+t.length+":"),!r||t.length<=1)return t.forEach((function(e){return a.dispatch(e)}));var o=[];return r=t.map((function(t){var i=new f,r=n.slice();return m(e,i,r).dispatch(t),o=o.concat(r.slice(n.length)),i.read().toString()})),n=n.concat(o),r.sort(),this._array(r,!1)},_date:function(e){return i("date:"+e.toJSON())},_symbol:function(e){return i("symbol:"+e.toString())},_error:function(e){return i("error:"+e.toString())},_boolean:function(e){return i("bool:"+e.toString())},_string:function(e){i("string:"+e.length+":"),i(e.toString())},_function:function(t){i("fn:"),p(t)?this.dispatch("[native]"):this.dispatch(t.toString()),!1!==e.respectFunctionNames&&this.dispatch("function-name:"+String(t.name)),e.respectFunctionProperties&&this._object(t)},_number:function(e){return i("number:"+e.toString())},_xml:function(e){return i("xml:"+e.toString())},_null:function(){return i("Null")},_undefined:function(){return i("Undefined")},_regexp:function(e){return i("regex:"+e.toString())},_uint8array:function(e){return i("uint8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint8clampedarray:function(e){return i("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(e))},_int8array:function(e){return i("int8array:"),this.dispatch(Array.prototype.slice.call(e))},_uint16array:function(e){return i("uint16array:"),this.dispatch(Array.prototype.slice.call(e))},_int16array:function(e){return i("int16array:"),this.dispatch(Array.prototype.slice.call(e))},_uint32array:function(e){return i("uint32array:"),this.dispatch(Array.prototype.slice.call(e))},_int32array:function(e){return i("int32array:"),this.dispatch(Array.prototype.slice.call(e))},_float32array:function(e){return i("float32array:"),this.dispatch(Array.prototype.slice.call(e))},_float64array:function(e){return i("float64array:"),this.dispatch(Array.prototype.slice.call(e))},_arraybuffer:function(e){return i("arraybuffer:"),this.dispatch(new Uint8Array(e))},_url:function(e){return i("url:"+e.toString())},_map:function(t){return i("map:"),t=Array.from(t),this._array(t,!1!==e.unorderedSets)},_set:function(t){return i("set:"),t=Array.from(t),this._array(t,!1!==e.unorderedSets)},_file:function(e){return i("file:"),this.dispatch([e.name,e.size,e.type,e.lastModfied])},_blob:function(){if(e.ignoreUnknown)return i("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return i("domwindow")},_bigint:function(e){return i("bigint:"+e.toString())},_process:function(){return i("process")},_timer:function(){return i("timer")},_pipe:function(){return i("pipe")},_tcp:function(){return i("tcp")},_udp:function(){return i("udp")},_tty:function(){return i("tty")},_statwatcher:function(){return i("statwatcher")},_securecontext:function(){return i("securecontext")},_connection:function(){return i("connection")},_zlib:function(){return i("zlib")},_context:function(){return i("context")},_nodescript:function(){return i("nodescript")},_httpparser:function(){return i("httpparser")},_dataview:function(){return i("dataview")},_signal:function(){return i("signal")},_fsevent:function(){return i("fsevent")},_tlswrap:function(){return i("tlswrap")}}}function f(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}n.writeToStream=function(e,t,n){return void 0===n&&(n=t,t={}),m(t=A(e,t),n).dispatch(e)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(e,t,n){(function(e,t,i,r,a,o,l,g,s){!function(e){"use strict";var t="undefined"!=typeof Uint8Array?Uint8Array:Array,n="+".charCodeAt(0),i="/".charCodeAt(0),r="0".charCodeAt(0),a="a".charCodeAt(0),o="A".charCodeAt(0),l="-".charCodeAt(0),g="_".charCodeAt(0);function s(e){return(e=e.charCodeAt(0))===n||e===l?62:e===i||e===g?63:e<r?-1:e<r+10?e-r+26+26:e<o+26?e-o:e<a+26?e-a+26:void 0}e.toByteArray=function(e){var n,i;if(0<e.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.length,a=(r="="===e.charAt(r-2)?2:"="===e.charAt(r-1)?1:0,new t(3*e.length/4-r)),o=0<r?e.length-4:e.length,l=0;function g(e){a[l++]=e}for(n=0;n<o;n+=4,0)g((16711680&(i=s(e.charAt(n))<<18|s(e.charAt(n+1))<<12|s(e.charAt(n+2))<<6|s(e.charAt(n+3))))>>16),g((65280&i)>>8),g(255&i);return 2==r?g(255&(i=s(e.charAt(n))<<2|s(e.charAt(n+1))>>4)):1==r&&(g((i=s(e.charAt(n))<<10|s(e.charAt(n+1))<<4|s(e.charAt(n+2))>>2)>>8&255),g(255&i)),a},e.fromByteArray=function(e){var t,n,i,r,a=e.length%3,o="";function l(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}for(t=0,i=e.length-a;t<i;t+=3)o+=l((r=n=(e[t]<<16)+(e[t+1]<<8)+e[t+2])>>18&63)+l(r>>12&63)+l(r>>6&63)+l(63&r);switch(a){case 1:o=(o+=l((n=e[e.length-1])>>2))+l(n<<4&63)+"==";break;case 2:o=(o=(o+=l((n=(e[e.length-2]<<8)+e[e.length-1])>>10))+l(n>>4&63))+l(n<<2&63)+"="}return o}}(void 0===n?this.base64js={}:n)}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(e,t,n){(function(t,i,r,a,o,l,g,s,c){var u=e("base64-js"),I=e("ieee754");function r(e,t,n){if(!(this instanceof r))return new r(e,t,n);var i,a,o,l,g=typeof e;if("base64"===t&&"string"==g)for(e=(l=e).trim?l.trim():l.replace(/^\s+|\s+$/g,"");e.length%4!=0;)e+="=";if("number"==g)i=V(e);else if("string"==g)i=r.byteLength(e,t);else{if("object"!=g)throw new Error("First argument needs to be a number, array or string.");i=V(e.length)}if(r._useTypedArrays?a=r._augment(new Uint8Array(i)):((a=this).length=i,a._isBuffer=!0),r._useTypedArrays&&"number"==typeof e.byteLength)a._set(e);else if(R(l=e)||r.isBuffer(l)||l&&"object"==typeof l&&"number"==typeof l.length)for(o=0;o<i;o++)r.isBuffer(e)?a[o]=e.readUInt8(o):a[o]=e[o];else if("string"==g)a.write(e,0,t);else if("number"==g&&!r._useTypedArrays&&!n)for(o=0;o<i;o++)a[o]=0;return a}function d(e,t,n,i){return r._charsWritten=Y(function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function C(e,t,n,i){return r._charsWritten=Y(function(e){for(var t,n,i=[],r=0;r<e.length;r++)t=(n=e.charCodeAt(r))>>8,n%=256,i.push(n),i.push(t);return i}(t),e,n,i)}function h(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;r++)i+=String.fromCharCode(e[r]);return i}function A(e,t,n,i){var r;if(i||(M("boolean"==typeof n,"missing or invalid endian"),M(null!=t,"missing offset"),M(t+1<e.length,"Trying to read beyond buffer length")),!((i=e.length)<=t))return n?(r=e[t],t+1<i&&(r|=e[t+1]<<8)):(r=e[t]<<8,t+1<i&&(r|=e[t+1])),r}function p(e,t,n,i){var r;if(i||(M("boolean"==typeof n,"missing or invalid endian"),M(null!=t,"missing offset"),M(t+3<e.length,"Trying to read beyond buffer length")),!((i=e.length)<=t))return n?(t+2<i&&(r=e[t+2]<<16),t+1<i&&(r|=e[t+1]<<8),r|=e[t],t+3<i&&(r+=e[t+3]<<24>>>0)):(t+1<i&&(r=e[t+1]<<16),t+2<i&&(r|=e[t+2]<<8),t+3<i&&(r|=e[t+3]),r+=e[t]<<24>>>0),r}function m(e,t,n,i){if(i||(M("boolean"==typeof n,"missing or invalid endian"),M(null!=t,"missing offset"),M(t+1<e.length,"Trying to read beyond buffer length")),!(e.length<=t))return 32768&(i=A(e,t,n,!0))?-1*(65535-i+1):i}function f(e,t,n,i){if(i||(M("boolean"==typeof n,"missing or invalid endian"),M(null!=t,"missing offset"),M(t+3<e.length,"Trying to read beyond buffer length")),!(e.length<=t))return 2147483648&(i=p(e,t,n,!0))?-1*(4294967295-i+1):i}function v(e,t,n,i){return i||(M("boolean"==typeof n,"missing or invalid endian"),M(t+3<e.length,"Trying to read beyond buffer length")),I.read(e,t,n,23,4)}function b(e,t,n,i){return i||(M("boolean"==typeof n,"missing or invalid endian"),M(t+7<e.length,"Trying to read beyond buffer length")),I.read(e,t,n,52,8)}function y(e,t,n,i,r){if(r||(M(null!=t,"missing value"),M("boolean"==typeof i,"missing or invalid endian"),M(null!=n,"missing offset"),M(n+1<e.length,"trying to write beyond buffer length"),K(t,65535)),!((r=e.length)<=n))for(var a=0,o=Math.min(r-n,2);a<o;a++)e[n+a]=(t&255<<8*(i?a:1-a))>>>8*(i?a:1-a)}function G(e,t,n,i,r){if(r||(M(null!=t,"missing value"),M("boolean"==typeof i,"missing or invalid endian"),M(null!=n,"missing offset"),M(n+3<e.length,"trying to write beyond buffer length"),K(t,4294967295)),!((r=e.length)<=n))for(var a=0,o=Math.min(r-n,4);a<o;a++)e[n+a]=t>>>8*(i?a:3-a)&255}function B(e,t,n,i,r){r||(M(null!=t,"missing value"),M("boolean"==typeof i,"missing or invalid endian"),M(null!=n,"missing offset"),M(n+1<e.length,"Trying to write beyond buffer length"),H(t,32767,-32768)),e.length<=n||y(e,0<=t?t:65535+t+1,n,i,r)}function Z(e,t,n,i,r){r||(M(null!=t,"missing value"),M("boolean"==typeof i,"missing or invalid endian"),M(null!=n,"missing offset"),M(n+3<e.length,"Trying to write beyond buffer length"),H(t,2147483647,-2147483648)),e.length<=n||G(e,0<=t?t:4294967295+t+1,n,i,r)}function w(e,t,n,i,r){r||(M(null!=t,"missing value"),M("boolean"==typeof i,"missing or invalid endian"),M(null!=n,"missing offset"),M(n+3<e.length,"Trying to write beyond buffer length"),z(t,34028234663852886e22,-34028234663852886e22)),e.length<=n||I.write(e,t,n,i,23,4)}function x(e,t,n,i,r){r||(M(null!=t,"missing value"),M("boolean"==typeof i,"missing or invalid endian"),M(null!=n,"missing offset"),M(n+7<e.length,"Trying to write beyond buffer length"),z(t,17976931348623157e292,-17976931348623157e292)),e.length<=n||I.write(e,t,n,i,52,8)}n.Buffer=r,n.SlowBuffer=r,n.INSPECT_MAX_BYTES=50,r.poolSize=8192,r._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(e){return!1}}(),r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.isBuffer=function(e){return!(null==e||!e._isBuffer)},r.byteLength=function(e,t){var n;switch(e+="",t||"utf8"){case"hex":n=e.length/2;break;case"utf8":case"utf-8":n=k(e).length;break;case"ascii":case"binary":case"raw":n=e.length;break;case"base64":n=X(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;default:throw new Error("Unknown encoding")}return n},r.concat=function(e,t){if(M(R(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new r(0);if(1===e.length)return e[0];if("number"!=typeof t)for(a=t=0;a<e.length;a++)t+=e[a].length;for(var n=new r(t),i=0,a=0;a<e.length;a++){var o=e[a];o.copy(n,i),i+=o.length}return n},r.prototype.write=function(e,t,n,i){isFinite(t)?isFinite(n)||(i=n,n=void 0):(s=i,i=t,t=n,n=s),t=Number(t)||0;var a,o,l,g,s=this.length-t;switch((!n||s<(n=Number(n)))&&(n=s),i=String(i||"utf8").toLowerCase()){case"hex":a=function(e,t,n,i){n=Number(n)||0;var a=e.length-n;(!i||a<(i=Number(i)))&&(i=a),M((a=t.length)%2==0,"Invalid hex string"),a/2<i&&(i=a/2);for(var o=0;o<i;o++){var l=parseInt(t.substr(2*o,2),16);M(!isNaN(l),"Invalid hex string"),e[n+o]=l}return r._charsWritten=2*o,o}(this,e,t,n);break;case"utf8":case"utf-8":o=this,l=t,g=n,a=r._charsWritten=Y(k(e),o,l,g);break;case"ascii":case"binary":a=d(this,e,t,n);break;case"base64":o=this,l=t,g=n,a=r._charsWritten=Y(X(e),o,l,g);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":a=C(this,e,t,n);break;default:throw new Error("Unknown encoding")}return a},r.prototype.toString=function(e,t,n){var i,r,a,o,l=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,(n=void 0!==n?Number(n):l.length)===t)return"";switch(e){case"hex":i=function(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||i<n)&&(n=i);for(var r="",a=t;a<n;a++)r+=q(e[a]);return r}(l,t,n);break;case"utf8":case"utf-8":i=function(e,t,n){var i="",r="";n=Math.min(e.length,n);for(var a=t;a<n;a++)e[a]<=127?(i+=N(r)+String.fromCharCode(e[a]),r=""):r+="%"+e[a].toString(16);return i+N(r)}(l,t,n);break;case"ascii":case"binary":i=h(l,t,n);break;case"base64":r=l,o=n,i=0===(a=t)&&o===r.length?u.fromByteArray(r):u.fromByteArray(r.slice(a,o));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=function(e,t,n){for(var i=e.slice(t,n),r="",a=0;a<i.length;a+=2)r+=String.fromCharCode(i[a]+256*i[a+1]);return r}(l,t,n);break;default:throw new Error("Unknown encoding")}return i},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.copy=function(e,t,n,i){if(t=t||0,(i=i||0===i?i:this.length)!==(n=n||0)&&0!==e.length&&0!==this.length){M(n<=i,"sourceEnd < sourceStart"),M(0<=t&&t<e.length,"targetStart out of bounds"),M(0<=n&&n<this.length,"sourceStart out of bounds"),M(0<=i&&i<=this.length,"sourceEnd out of bounds"),i>this.length&&(i=this.length);var a=(i=e.length-t<i-n?e.length-t+n:i)-n;if(a<100||!r._useTypedArrays)for(var o=0;o<a;o++)e[o+t]=this[o+n];else e._set(this.subarray(n,n+a),t)}},r.prototype.slice=function(e,t){var n=this.length;if(e=W(e,n,0),t=W(t,n,n),r._useTypedArrays)return r._augment(this.subarray(e,t));for(var i=t-e,a=new r(i,void 0,!0),o=0;o<i;o++)a[o]=this[o+e];return a},r.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},r.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},r.prototype.readUInt8=function(e,t){if(t||(M(null!=e,"missing offset"),M(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return this[e]},r.prototype.readUInt16LE=function(e,t){return A(this,e,!0,t)},r.prototype.readUInt16BE=function(e,t){return A(this,e,!1,t)},r.prototype.readUInt32LE=function(e,t){return p(this,e,!0,t)},r.prototype.readUInt32BE=function(e,t){return p(this,e,!1,t)},r.prototype.readInt8=function(e,t){if(t||(M(null!=e,"missing offset"),M(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length))return 128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){return m(this,e,!0,t)},r.prototype.readInt16BE=function(e,t){return m(this,e,!1,t)},r.prototype.readInt32LE=function(e,t){return f(this,e,!0,t)},r.prototype.readInt32BE=function(e,t){return f(this,e,!1,t)},r.prototype.readFloatLE=function(e,t){return v(this,e,!0,t)},r.prototype.readFloatBE=function(e,t){return v(this,e,!1,t)},r.prototype.readDoubleLE=function(e,t){return b(this,e,!0,t)},r.prototype.readDoubleBE=function(e,t){return b(this,e,!1,t)},r.prototype.writeUInt8=function(e,t,n){n||(M(null!=e,"missing value"),M(null!=t,"missing offset"),M(t<this.length,"trying to write beyond buffer length"),K(e,255)),t>=this.length||(this[t]=e)},r.prototype.writeUInt16LE=function(e,t,n){y(this,e,t,!0,n)},r.prototype.writeUInt16BE=function(e,t,n){y(this,e,t,!1,n)},r.prototype.writeUInt32LE=function(e,t,n){G(this,e,t,!0,n)},r.prototype.writeUInt32BE=function(e,t,n){G(this,e,t,!1,n)},r.prototype.writeInt8=function(e,t,n){n||(M(null!=e,"missing value"),M(null!=t,"missing offset"),M(t<this.length,"Trying to write beyond buffer length"),H(e,127,-128)),t>=this.length||(0<=e?this.writeUInt8(e,t,n):this.writeUInt8(255+e+1,t,n))},r.prototype.writeInt16LE=function(e,t,n){B(this,e,t,!0,n)},r.prototype.writeInt16BE=function(e,t,n){B(this,e,t,!1,n)},r.prototype.writeInt32LE=function(e,t,n){Z(this,e,t,!0,n)},r.prototype.writeInt32BE=function(e,t,n){Z(this,e,t,!1,n)},r.prototype.writeFloatLE=function(e,t,n){w(this,e,t,!0,n)},r.prototype.writeFloatBE=function(e,t,n){w(this,e,t,!1,n)},r.prototype.writeDoubleLE=function(e,t,n){x(this,e,t,!0,n)},r.prototype.writeDoubleBE=function(e,t,n){x(this,e,t,!1,n)},r.prototype.fill=function(e,t,n){if(t=t||0,n=n||this.length,M("number"==typeof(e="string"==typeof(e=e||0)?e.charCodeAt(0):e)&&!isNaN(e),"value is not a number"),M(t<=n,"end < start"),n!==t&&0!==this.length){M(0<=t&&t<this.length,"start out of bounds"),M(0<=n&&n<=this.length,"end out of bounds");for(var i=t;i<n;i++)this[i]=e}},r.prototype.inspect=function(){for(var e=[],t=this.length,i=0;i<t;i++)if(e[i]=q(this[i]),i===n.INSPECT_MAX_BYTES){e[i+1]="...";break}return"<Buffer "+e.join(" ")+">"},r.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new Error("Buffer.toArrayBuffer not supported in this browser");if(r._useTypedArrays)return new r(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;t<n;t+=1)e[t]=this[t];return e.buffer};var S=r.prototype;function W(e,t,n){return"number"!=typeof e?n:t<=(e=~~e)?t:0<=e||0<=(e+=t)?e:0}function V(e){return(e=~~Math.ceil(+e))<0?0:e}function R(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function q(e){return e<16?"0"+e.toString(16):e.toString(16)}function k(e){for(var t=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<=127)t.push(e.charCodeAt(n));else for(var r=n,a=(55296<=i&&i<=57343&&n++,encodeURIComponent(e.slice(r,n+1)).substr(1).split("%")),o=0;o<a.length;o++)t.push(parseInt(a[o],16))}return t}function X(e){return u.toByteArray(e)}function Y(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);r++)t[r+n]=e[r];return r}function N(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}function K(e,t){M("number"==typeof e,"cannot write a non-number as a number"),M(0<=e,"specified a negative value for writing an unsigned value"),M(e<=t,"value is larger than maximum value for type"),M(Math.floor(e)===e,"value has a fractional component")}function H(e,t,n){M("number"==typeof e,"cannot write a non-number as a number"),M(e<=t,"value larger than maximum allowed value"),M(n<=e,"value smaller than minimum allowed value"),M(Math.floor(e)===e,"value has a fractional component")}function z(e,t,n){M("number"==typeof e,"cannot write a non-number as a number"),M(e<=t,"value larger than maximum allowed value"),M(n<=e,"value smaller than minimum allowed value")}function M(e,t){if(!e)throw new Error(t||"Failed assertion")}r._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=S.get,e.set=S.set,e.write=S.write,e.toString=S.toString,e.toLocaleString=S.toString,e.toJSON=S.toJSON,e.copy=S.copy,e.slice=S.slice,e.readUInt8=S.readUInt8,e.readUInt16LE=S.readUInt16LE,e.readUInt16BE=S.readUInt16BE,e.readUInt32LE=S.readUInt32LE,e.readUInt32BE=S.readUInt32BE,e.readInt8=S.readInt8,e.readInt16LE=S.readInt16LE,e.readInt16BE=S.readInt16BE,e.readInt32LE=S.readInt32LE,e.readInt32BE=S.readInt32BE,e.readFloatLE=S.readFloatLE,e.readFloatBE=S.readFloatBE,e.readDoubleLE=S.readDoubleLE,e.readDoubleBE=S.readDoubleBE,e.writeUInt8=S.writeUInt8,e.writeUInt16LE=S.writeUInt16LE,e.writeUInt16BE=S.writeUInt16BE,e.writeUInt32LE=S.writeUInt32LE,e.writeUInt32BE=S.writeUInt32BE,e.writeInt8=S.writeInt8,e.writeInt16LE=S.writeInt16LE,e.writeInt16BE=S.writeInt16BE,e.writeInt32LE=S.writeInt32LE,e.writeInt32BE=S.writeInt32BE,e.writeFloatLE=S.writeFloatLE,e.writeFloatBE=S.writeFloatBE,e.writeDoubleLE=S.writeDoubleLE,e.writeDoubleBE=S.writeDoubleBE,e.fill=S.fill,e.inspect=S.inspect,e.toArrayBuffer=S.toArrayBuffer,e}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(e,t,n){(function(n,i,r,a,o,l,g,s,c){r=e("buffer").Buffer;var u=4,I=new r(u);I.fill(0),t.exports={hash:function(e,t,n,i){for(var a=t(function(e,t){e.length%u!=0&&(n=e.length+(u-e.length%u),e=r.concat([e,I],n));for(var n,i=[],a=t?e.readInt32BE:e.readInt32LE,o=0;o<e.length;o+=u)i.push(a.call(e,o));return i}(e=r.isBuffer(e)?e:new r(e),i),8*e.length),o=(t=i,new r(n)),l=t?o.writeInt32BE:o.writeInt32LE,g=0;g<a.length;g++)l.call(o,a[g],4*g,!0);return o}}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(e,t,n){(function(t,i,r,a,o,l,g,s,c){r=e("buffer").Buffer;var u=e("./sha"),I=e("./sha256"),d=e("./rng"),C={sha1:u,sha256:I,md5:e("./md5")},h=64,A=new r(h);function p(e,t){var n=C[e=e||"sha1"],i=[];return n||m("algorithm:",e,"is not yet supported"),{update:function(e){return r.isBuffer(e)||(e=new r(e)),i.push(e),e.length,this},digest:function(e){var a=r.concat(i);return a=t?function(e,t,n){r.isBuffer(t)||(t=new r(t)),r.isBuffer(n)||(n=new r(n)),t.length>h?t=e(t):t.length<h&&(t=r.concat([t,A],h));for(var i=new r(h),a=new r(h),o=0;o<h;o++)i[o]=54^t[o],a[o]=92^t[o];return n=e(r.concat([i,n])),e(r.concat([a,n]))}(n,t,a):n(a),i=null,e?a.toString(e):a}}}function m(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}A.fill(0),n.createHash=function(e){return p(e)},n.createHmac=p,n.randomBytes=function(e,t){if(!t||!t.call)return new r(d(e));try{t.call(this,void 0,new r(d(e)))}catch(e){t(e)}};var f,v=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],b=function(e){n[e]=function(){m("sorry,",e,"is not implemented yet")}};for(f in v)b(v[f],f)}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(e,t,n){(function(n,i,r,a,o,l,g,s,c){var u=e("./helpers");function I(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,i=-271733879,r=-1732584194,a=271733878,o=0;o<e.length;o+=16){var l=n,g=i,s=r,c=a;n=C(n,i,r,a,e[o+0],7,-680876936),a=C(a,n,i,r,e[o+1],12,-389564586),r=C(r,a,n,i,e[o+2],17,606105819),i=C(i,r,a,n,e[o+3],22,-1044525330),n=C(n,i,r,a,e[o+4],7,-176418897),a=C(a,n,i,r,e[o+5],12,1200080426),r=C(r,a,n,i,e[o+6],17,-1473231341),i=C(i,r,a,n,e[o+7],22,-45705983),n=C(n,i,r,a,e[o+8],7,1770035416),a=C(a,n,i,r,e[o+9],12,-1958414417),r=C(r,a,n,i,e[o+10],17,-42063),i=C(i,r,a,n,e[o+11],22,-1990404162),n=C(n,i,r,a,e[o+12],7,1804603682),a=C(a,n,i,r,e[o+13],12,-40341101),r=C(r,a,n,i,e[o+14],17,-1502002290),n=h(n,i=C(i,r,a,n,e[o+15],22,1236535329),r,a,e[o+1],5,-165796510),a=h(a,n,i,r,e[o+6],9,-1069501632),r=h(r,a,n,i,e[o+11],14,643717713),i=h(i,r,a,n,e[o+0],20,-373897302),n=h(n,i,r,a,e[o+5],5,-701558691),a=h(a,n,i,r,e[o+10],9,38016083),r=h(r,a,n,i,e[o+15],14,-660478335),i=h(i,r,a,n,e[o+4],20,-405537848),n=h(n,i,r,a,e[o+9],5,568446438),a=h(a,n,i,r,e[o+14],9,-1019803690),r=h(r,a,n,i,e[o+3],14,-187363961),i=h(i,r,a,n,e[o+8],20,1163531501),n=h(n,i,r,a,e[o+13],5,-1444681467),a=h(a,n,i,r,e[o+2],9,-51403784),r=h(r,a,n,i,e[o+7],14,1735328473),n=A(n,i=h(i,r,a,n,e[o+12],20,-1926607734),r,a,e[o+5],4,-378558),a=A(a,n,i,r,e[o+8],11,-2022574463),r=A(r,a,n,i,e[o+11],16,1839030562),i=A(i,r,a,n,e[o+14],23,-35309556),n=A(n,i,r,a,e[o+1],4,-1530992060),a=A(a,n,i,r,e[o+4],11,1272893353),r=A(r,a,n,i,e[o+7],16,-155497632),i=A(i,r,a,n,e[o+10],23,-1094730640),n=A(n,i,r,a,e[o+13],4,681279174),a=A(a,n,i,r,e[o+0],11,-358537222),r=A(r,a,n,i,e[o+3],16,-722521979),i=A(i,r,a,n,e[o+6],23,76029189),n=A(n,i,r,a,e[o+9],4,-640364487),a=A(a,n,i,r,e[o+12],11,-421815835),r=A(r,a,n,i,e[o+15],16,530742520),n=p(n,i=A(i,r,a,n,e[o+2],23,-995338651),r,a,e[o+0],6,-198630844),a=p(a,n,i,r,e[o+7],10,1126891415),r=p(r,a,n,i,e[o+14],15,-1416354905),i=p(i,r,a,n,e[o+5],21,-57434055),n=p(n,i,r,a,e[o+12],6,1700485571),a=p(a,n,i,r,e[o+3],10,-1894986606),r=p(r,a,n,i,e[o+10],15,-1051523),i=p(i,r,a,n,e[o+1],21,-2054922799),n=p(n,i,r,a,e[o+8],6,1873313359),a=p(a,n,i,r,e[o+15],10,-30611744),r=p(r,a,n,i,e[o+6],15,-1560198380),i=p(i,r,a,n,e[o+13],21,1309151649),n=p(n,i,r,a,e[o+4],6,-145523070),a=p(a,n,i,r,e[o+11],10,-1120210379),r=p(r,a,n,i,e[o+2],15,718787259),i=p(i,r,a,n,e[o+9],21,-343485551),n=m(n,l),i=m(i,g),r=m(r,s),a=m(a,c)}return Array(n,i,r,a)}function d(e,t,n,i,r,a){return m((t=m(m(t,e),m(i,a)))<<r|t>>>32-r,n)}function C(e,t,n,i,r,a,o){return d(t&n|~t&i,e,t,r,a,o)}function h(e,t,n,i,r,a,o){return d(t&i|n&~i,e,t,r,a,o)}function A(e,t,n,i,r,a,o){return d(t^n^i,e,t,r,a,o)}function p(e,t,n,i,r,a,o){return d(n^(t|~i),e,t,r,a,o)}function m(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}t.exports=function(e){return u.hash(e,I,16)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(e,t,n){(function(e,n,i,r,a,o,l,g,s){var c;t.exports=c||function(e){for(var t,n=new Array(e),i=0;i<e;i++)0==(3&i)&&(t=4294967296*Math.random()),n[i]=t>>>((3&i)<<3)&255;return n}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(e,t,n){(function(n,i,r,a,o,l,g,s,c){var u=e("./helpers");function I(e,t){e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var n,i,r,a=Array(80),o=1732584193,l=-271733879,g=-1732584194,s=271733878,c=-1009589776,u=0;u<e.length;u+=16){for(var I=o,h=l,A=g,p=s,m=c,f=0;f<80;f++){a[f]=f<16?e[u+f]:C(a[f-3]^a[f-8]^a[f-14]^a[f-16],1);var v=d(d(C(o,5),(v=l,i=g,r=s,(n=f)<20?v&i|~v&r:!(n<40)&&n<60?v&i|v&r|i&r:v^i^r)),d(d(c,a[f]),(n=f)<20?1518500249:n<40?1859775393:n<60?-1894007588:-899497514));c=s,s=g,g=C(l,30),l=o,o=v}o=d(o,I),l=d(l,h),g=d(g,A),s=d(s,p),c=d(c,m)}return Array(o,l,g,s,c)}function d(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function C(e,t){return e<<t|e>>>32-t}t.exports=function(e){return u.hash(e,I,20,!0)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(e,t,n){(function(n,i,r,a,o,l,g,s,c){function u(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function I(e,t){var n,i=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),r=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),a=new Array(64);e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var o,l,g=0;g<e.length;g+=16){for(var s=r[0],c=r[1],I=r[2],d=r[3],A=r[4],p=r[5],m=r[6],f=r[7],v=0;v<64;v++)a[v]=v<16?e[v+g]:u(u(u((l=a[v-2],C(l,17)^C(l,19)^h(l,10)),a[v-7]),(l=a[v-15],C(l,7)^C(l,18)^h(l,3))),a[v-16]),n=u(u(u(u(f,C(l=A,6)^C(l,11)^C(l,25)),A&p^~A&m),i[v]),a[v]),o=u(C(o=s,2)^C(o,13)^C(o,22),s&c^s&I^c&I),f=m,m=p,p=A,A=u(d,n),d=I,I=c,c=s,s=u(n,o);r[0]=u(s,r[0]),r[1]=u(c,r[1]),r[2]=u(I,r[2]),r[3]=u(d,r[3]),r[4]=u(A,r[4]),r[5]=u(p,r[5]),r[6]=u(m,r[6]),r[7]=u(f,r[7])}return r}var d=e("./helpers"),C=function(e,t){return e>>>t|e<<32-t},h=function(e,t){return e>>>t};t.exports=function(e){return d.hash(e,I,32,!0)}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(e,t,n){(function(e,t,i,r,a,o,l,g,s){n.read=function(e,t,n,i,r){var a,o,l=8*r-i-1,g=(1<<l)-1,s=g>>1,c=-7,u=n?r-1:0,I=n?-1:1;for(r=e[t+u],u+=I,a=r&(1<<-c)-1,r>>=-c,c+=l;0<c;a=256*a+e[t+u],u+=I,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=i;0<c;o=256*o+e[t+u],u+=I,c-=8);if(0===a)a=1-s;else{if(a===g)return o?NaN:1/0*(r?-1:1);o+=Math.pow(2,i),a-=s}return(r?-1:1)*o*Math.pow(2,a-i)},n.write=function(e,t,n,i,r,a){var o,l,g=8*a-r-1,s=(1<<g)-1,c=s>>1,u=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,I=i?0:a-1,d=i?1:-1;for(a=t<0||0===t&&1/t<0?1:0,t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,o=s):(o=Math.floor(Math.log(t)/Math.LN2),t*(i=Math.pow(2,-o))<1&&(o--,i*=2),2<=(t+=1<=o+c?u/i:u*Math.pow(2,1-c))*i&&(o++,i/=2),s<=o+c?(l=0,o=s):1<=o+c?(l=(t*i-1)*Math.pow(2,r),o+=c):(l=t*Math.pow(2,c-1)*Math.pow(2,r),o=0));8<=r;e[n+I]=255&l,I+=d,l/=256,r-=8);for(o=o<<r|l,g+=r;0<g;e[n+I]=255&o,I+=d,o/=256,g-=8);e[n+I-d]|=128*a}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(e,t,n){(function(e,n,i,r,a,o,l,g,s){var c,u,I;function d(){}(e=t.exports={}).nextTick=(u="undefined"!=typeof window&&window.setImmediate,I="undefined"!=typeof window&&window.postMessage&&window.addEventListener,u?function(e){return window.setImmediate(e)}:I?(c=[],window.addEventListener("message",(function(e){var t=e.source;t!==window&&null!==t||"process-tick"!==e.data||(e.stopPropagation(),0<c.length&&c.shift()())}),!0),function(e){c.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}),e.title="browser",e.browser=!0,e.env={},e.argv=[],e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")}}).call(this,e("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)},888:function(e,t,n){"use strict";var i=n(9047);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,a,o){if(o!==i){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var i=n(2791),r=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,l={};function g(e,t){s(e,t),s(e+"Capture",t)}function s(e,t){for(l[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,I=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},C={};function h(e,t,n,i,r,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){A[e]=new h(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];A[t]=new h(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){A[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){A[e]=new h(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){A[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){A[e]=new h(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){A[e]=new h(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){A[e]=new h(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){A[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)}));var p=/[\-:]([a-z])/g;function m(e){return e[1].toUpperCase()}function f(e,t,n,i){var r=A.hasOwnProperty(t)?A[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!u.call(C,e)||!u.call(d,e)&&(I.test(e)?C[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(p,m);A[t]=new h(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(p,m);A[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(p,m);A[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){A[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)})),A.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){A[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)}));var v=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),y=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),Z=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),x=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),q=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var X=Symbol.iterator;function Y(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=X&&e[X]||e["@@iterator"])?e:null}var N,K=Object.assign;function H(e){if(void 0===N)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var z=!1;function M(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var i=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){i=s}e.call(t.prototype)}else{try{throw Error()}catch(s){i=s}e()}}catch(s){if(s&&i&&"string"===typeof s.stack){for(var r=s.stack.split("\n"),a=i.stack.split("\n"),o=r.length-1,l=a.length-1;1<=o&&0<=l&&r[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==a[l]){if(1!==o||1!==l)do{if(o--,0>--l||r[o]!==a[l]){var g="\n"+r[o].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}}while(1<=o&&0<=l);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?H(e):""}function F(e){switch(e.tag){case 5:return H(e.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return e=M(e.type,!1);case 11:return e=M(e.type.render,!1);case 1:return e=M(e.type,!0);default:return""}}function L(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case G:return"Fragment";case y:return"Portal";case Z:return"Profiler";case B:return"StrictMode";case W:return"Suspense";case V:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case w:return(e._context.displayName||"Context")+".Provider";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:L(e.type)||"Memo";case q:t=e._payload,e=e._init;try{return L(e(t))}catch(n){}}return null}function _(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L(t);case 8:return t===B?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function T(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function E(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=E(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function U(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=E(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function D(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function P(e,t){var n=t.checked;return K({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function O(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=T(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&f(e,"checked",t,!1)}function j(e,t){Q(e,t);var n=T(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,T(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&D(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+T(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return K({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:T(n)}}function ae(e,t){var n=T(t.value),i=T(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ge(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var se,ce=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((se=se||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=se.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function ue(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ie={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},de=["Webkit","ms","Moz","O"];function Ce(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||Ie.hasOwnProperty(e)&&Ie[e]?(""+t).trim():t+"px"}function he(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=Ce(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(Ie).forEach((function(e){de.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ie[t]=Ie[e]}))}));var Ae=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pe(e,t){if(t){if(Ae[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function me(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fe=null;function ve(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var be=null,ye=null,Ge=null;function Be(e){if(e=hr(e)){if("function"!==typeof be)throw Error(a(280));var t=e.stateNode;t&&(t=pr(t),be(e.stateNode,e.type,t))}}function Ze(e){ye?Ge?Ge.push(e):Ge=[e]:ye=e}function we(){if(ye){var e=ye,t=Ge;if(Ge=ye=null,Be(e),t)for(e=0;e<t.length;e++)Be(t[e])}}function xe(e,t){return e(t)}function Se(){}var We=!1;function Ve(e,t,n){if(We)return e(t,n);We=!0;try{return xe(e,t,n)}finally{We=!1,(null!==ye||null!==Ge)&&(Se(),we())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var i=pr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var qe=!1;if(c)try{var ke={};Object.defineProperty(ke,"passive",{get:function(){qe=!0}}),window.addEventListener("test",ke,ke),window.removeEventListener("test",ke,ke)}catch(tc){qe=!1}function Xe(e,t,n,i,r,a,o,l,g){var s=Array.prototype.slice.call(arguments,3);try{t.apply(n,s)}catch(c){this.onError(c)}}var Ye=!1,Ne=null,Ke=!1,He=null,ze={onError:function(e){Ye=!0,Ne=e}};function Me(e,t,n,i,r,a,o,l,g){Ye=!1,Ne=null,Xe.apply(ze,arguments)}function Fe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Le(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function _e(e){if(Fe(e)!==e)throw Error(a(188))}function Te(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Fe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return _e(r),e;if(o===i)return _e(r),t;o=o.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=o;else{for(var l=!1,g=r.child;g;){if(g===n){l=!0,n=r,i=o;break}if(g===i){l=!0,i=r,n=o;break}g=g.sibling}if(!l){for(g=o.child;g;){if(g===n){l=!0,n=o,i=r;break}if(g===i){l=!0,i=o,n=r;break}g=g.sibling}if(!l)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ee(e):null}function Ee(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ee(e);if(null!==t)return t;e=e.sibling}return null}var Je=r.unstable_scheduleCallback,Ue=r.unstable_cancelCallback,De=r.unstable_shouldYield,Pe=r.unstable_requestPaint,Oe=r.unstable_now,Qe=r.unstable_getCurrentPriorityLevel,je=r.unstable_ImmediatePriority,$e=r.unstable_UserBlockingPriority,et=r.unstable_NormalPriority,tt=r.unstable_LowPriority,nt=r.unstable_IdlePriority,it=null,rt=null;var at=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var gt=64,st=4194304;function ct(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ut(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var l=o&~r;0!==l?i=ct(l):0!==(a&=o)&&(i=ct(a))}else 0!==(o=n&~r)?i=ct(o):0!==a&&(i=ct(a));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(a=t&-t)||16===r&&0!==(4194240&a)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-at(t)),i|=e[n],t&=~r;return i}function It(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function dt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ct(){var e=gt;return 0===(4194240&(gt<<=1))&&(gt=64),e}function ht(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function At(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function pt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-at(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var mt=0;function ft(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var vt,bt,yt,Gt,Bt,Zt=!1,wt=[],xt=null,St=null,Wt=null,Vt=new Map,Rt=new Map,qt=[],kt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xt(e,t){switch(e){case"focusin":case"focusout":xt=null;break;case"dragenter":case"dragleave":St=null;break;case"mouseover":case"mouseout":Wt=null;break;case"pointerover":case"pointerout":Vt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Yt(e,t,n,i,r,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},null!==t&&(null!==(t=hr(t))&&bt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Nt(e){var t=Cr(e.target);if(null!==t){var n=Fe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Le(n)))return e.blockedOn=t,void Bt(e.priority,(function(){yt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Kt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Dt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=hr(n))&&bt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);fe=i,n.target.dispatchEvent(i),fe=null,t.shift()}return!0}function Ht(e,t,n){Kt(e)&&n.delete(t)}function zt(){Zt=!1,null!==xt&&Kt(xt)&&(xt=null),null!==St&&Kt(St)&&(St=null),null!==Wt&&Kt(Wt)&&(Wt=null),Vt.forEach(Ht),Rt.forEach(Ht)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,Zt||(Zt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,zt)))}function Ft(e){function t(t){return Mt(t,e)}if(0<wt.length){Mt(wt[0],e);for(var n=1;n<wt.length;n++){var i=wt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==xt&&Mt(xt,e),null!==St&&Mt(St,e),null!==Wt&&Mt(Wt,e),Vt.forEach(t),Rt.forEach(t),n=0;n<qt.length;n++)(i=qt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<qt.length&&null===(n=qt[0]).blockedOn;)Nt(n),null===n.blockedOn&&qt.shift()}var Lt=v.ReactCurrentBatchConfig,_t=!0;function Tt(e,t,n,i){var r=mt,a=Lt.transition;Lt.transition=null;try{mt=1,Jt(e,t,n,i)}finally{mt=r,Lt.transition=a}}function Et(e,t,n,i){var r=mt,a=Lt.transition;Lt.transition=null;try{mt=4,Jt(e,t,n,i)}finally{mt=r,Lt.transition=a}}function Jt(e,t,n,i){if(_t){var r=Dt(e,t,n,i);if(null===r)Mi(e,t,i,Ut,n),Xt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return xt=Yt(xt,e,t,n,i,r),!0;case"dragenter":return St=Yt(St,e,t,n,i,r),!0;case"mouseover":return Wt=Yt(Wt,e,t,n,i,r),!0;case"pointerover":var a=r.pointerId;return Vt.set(a,Yt(Vt.get(a)||null,e,t,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,Rt.set(a,Yt(Rt.get(a)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Xt(e,i),4&t&&-1<kt.indexOf(e)){for(;null!==r;){var a=hr(r);if(null!==a&&vt(a),null===(a=Dt(e,t,n,i))&&Mi(e,t,i,Ut,n),a===r)break;r=a}null!==r&&i.stopPropagation()}else Mi(e,t,i,null,n)}}var Ut=null;function Dt(e,t,n,i){if(Ut=null,null!==(e=Cr(e=ve(i))))if(null===(t=Fe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Le(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ut=e,null}function Pt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case je:return 1;case $e:return 4;case et:case tt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Ot=null,Qt=null,jt=null;function $t(){if(jt)return jt;var e,t,n=Qt,i=n.length,r="value"in Ot?Ot.value:Ot.textContent,a=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[a-t];t++);return jt=r.slice(e,1<t?1-t:void 0)}function en(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tn(){return!0}function nn(){return!1}function rn(e){function t(t,n,i,r,a){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?tn:nn,this.isPropagationStopped=nn,this}return K(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tn)},persist:function(){},isPersistent:tn}),t}var an,on,ln,gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sn=rn(gn),cn=K({},gn,{view:0,detail:0}),un=rn(cn),In=K({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),dn=rn(In),Cn=rn(K({},In,{dataTransfer:0})),hn=rn(K({},cn,{relatedTarget:0})),An=rn(K({},gn,{animationName:0,elapsedTime:0,pseudoElement:0})),pn=rn(K({},gn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),mn=rn(K({},gn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=bn[e])&&!!t[e]}function Gn(){return yn}var Bn=rn(K({},cn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=en(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?vn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gn,charCode:function(e){return"keypress"===e.type?en(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?en(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Zn=rn(K({},In,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),wn=rn(K({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gn})),xn=rn(K({},gn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Sn=rn(K({},In,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Wn=[9,13,27,32],Vn=c&&"CompositionEvent"in window,Rn=null;c&&"documentMode"in document&&(Rn=document.documentMode);var qn=c&&"TextEvent"in window&&!Rn,kn=c&&(!Vn||Rn&&8<Rn&&11>=Rn),Xn=String.fromCharCode(32),Yn=!1;function Nn(e,t){switch(e){case"keyup":return-1!==Wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Fn(e,t,n,i){Ze(i),0<(t=Li(t,"onChange")).length&&(n=new sn("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Ln=null,_n=null;function Tn(e){Xi(e,0)}function En(e){if(U(Ar(e)))return e}function Jn(e,t){if("change"===e)return t}var Un=!1;if(c){var Dn;if(c){var Pn="oninput"in document;if(!Pn){var On=document.createElement("div");On.setAttribute("oninput","return;"),Pn="function"===typeof On.oninput}Dn=Pn}else Dn=!1;Un=Dn&&(!document.documentMode||9<document.documentMode)}function Qn(){Ln&&(Ln.detachEvent("onpropertychange",jn),_n=Ln=null)}function jn(e){if("value"===e.propertyName&&En(_n)){var t=[];Fn(t,_n,e,ve(e)),Ve(Tn,t)}}function $n(e,t,n){"focusin"===e?(Qn(),_n=n,(Ln=t).attachEvent("onpropertychange",jn)):"focusout"===e&&Qn()}function ei(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return En(_n)}function ti(e,t){if("click"===e)return En(t)}function ni(e,t){if("input"===e||"change"===e)return En(t)}var ii="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ri(e,t){if(ii(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!u.call(t,r)||!ii(e[r],t[r]))return!1}return!0}function ai(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function oi(e,t){var n,i=ai(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ai(i)}}function li(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?li(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function gi(){for(var e=window,t=D();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=D((e=t.contentWindow).document)}return t}function si(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ci(e){var t=gi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&li(n.ownerDocument.documentElement,n)){if(null!==i&&si(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,a=Math.min(i.start,r);i=void 0===i.end?a:Math.min(i.end,r),!e.extend&&a>i&&(r=i,i=a,a=r),r=oi(n,a);var o=oi(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),a>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ui=c&&"documentMode"in document&&11>=document.documentMode,Ii=null,di=null,Ci=null,hi=!1;function Ai(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;hi||null==Ii||Ii!==D(i)||("selectionStart"in(i=Ii)&&si(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},Ci&&ri(Ci,i)||(Ci=i,0<(i=Li(di,"onSelect")).length&&(t=new sn("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Ii)))}function pi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var mi={animationend:pi("Animation","AnimationEnd"),animationiteration:pi("Animation","AnimationIteration"),animationstart:pi("Animation","AnimationStart"),transitionend:pi("Transition","TransitionEnd")},fi={},vi={};function bi(e){if(fi[e])return fi[e];if(!mi[e])return e;var t,n=mi[e];for(t in n)if(n.hasOwnProperty(t)&&t in vi)return fi[e]=n[t];return e}c&&(vi=document.createElement("div").style,"AnimationEvent"in window||(delete mi.animationend.animation,delete mi.animationiteration.animation,delete mi.animationstart.animation),"TransitionEvent"in window||delete mi.transitionend.transition);var yi=bi("animationend"),Gi=bi("animationiteration"),Bi=bi("animationstart"),Zi=bi("transitionend"),wi=new Map,xi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Si(e,t){wi.set(e,t),g(t,[e])}for(var Wi=0;Wi<xi.length;Wi++){var Vi=xi[Wi];Si(Vi.toLowerCase(),"on"+(Vi[0].toUpperCase()+Vi.slice(1)))}Si(yi,"onAnimationEnd"),Si(Gi,"onAnimationIteration"),Si(Bi,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(Zi,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ri));function ki(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,l,g,s){if(Me.apply(this,arguments),Ye){if(!Ye)throw Error(a(198));var c=Ne;Ye=!1,Ne=null,Ke||(Ke=!0,He=c)}}(i,t,void 0,e),e.currentTarget=null}function Xi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var o=i.length-1;0<=o;o--){var l=i[o],g=l.instance,s=l.currentTarget;if(l=l.listener,g!==a&&r.isPropagationStopped())break e;ki(r,l,s),a=g}else for(o=0;o<i.length;o++){if(g=(l=i[o]).instance,s=l.currentTarget,l=l.listener,g!==a&&r.isPropagationStopped())break e;ki(r,l,s),a=g}}}if(Ke)throw e=He,Ke=!1,He=null,e}function Yi(e,t){var n=t[ur];void 0===n&&(n=t[ur]=new Set);var i=e+"__bubble";n.has(i)||(zi(t,e,2,!1),n.add(i))}function Ni(e,t,n){var i=0;t&&(i|=4),zi(n,e,i,t)}var Ki="_reactListening"+Math.random().toString(36).slice(2);function Hi(e){if(!e[Ki]){e[Ki]=!0,o.forEach((function(t){"selectionchange"!==t&&(qi.has(t)||Ni(t,!1,e),Ni(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ki]||(t[Ki]=!0,Ni("selectionchange",!1,t))}}function zi(e,t,n,i){switch(Pt(t)){case 1:var r=Tt;break;case 4:r=Et;break;default:r=Jt}n=r.bind(null,t,n,e),r=void 0,!qe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Mi(e,t,n,i,r){var a=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var l=i.stateNode.containerInfo;if(l===r||8===l.nodeType&&l.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var g=o.tag;if((3===g||4===g)&&((g=o.stateNode.containerInfo)===r||8===g.nodeType&&g.parentNode===r))return;o=o.return}for(;null!==l;){if(null===(o=Cr(l)))return;if(5===(g=o.tag)||6===g){i=a=o;continue e}l=l.parentNode}}i=i.return}Ve((function(){var i=a,r=ve(n),o=[];e:{var l=wi.get(e);if(void 0!==l){var g=sn,s=e;switch(e){case"keypress":if(0===en(n))break e;case"keydown":case"keyup":g=Bn;break;case"focusin":s="focus",g=hn;break;case"focusout":s="blur",g=hn;break;case"beforeblur":case"afterblur":g=hn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Cn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=wn;break;case yi:case Gi:case Bi:g=An;break;case Zi:g=xn;break;case"scroll":g=un;break;case"wheel":g=Sn;break;case"copy":case"cut":case"paste":g=pn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Zn}var c=0!==(4&t),u=!c&&"scroll"===e,I=c?null!==l?l+"Capture":null:l;c=[];for(var d,C=i;null!==C;){var h=(d=C).stateNode;if(5===d.tag&&null!==h&&(d=h,null!==I&&(null!=(h=Re(C,I))&&c.push(Fi(C,h,d)))),u)break;C=C.return}0<c.length&&(l=new g(l,s,null,n,r),o.push({event:l,listeners:c}))}}if(0===(7&t)){if(g="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===fe||!(s=n.relatedTarget||n.fromElement)||!Cr(s)&&!s[cr])&&(g||l)&&(l=r.window===r?r:(l=r.ownerDocument)?l.defaultView||l.parentWindow:window,g?(g=i,null!==(s=(s=n.relatedTarget||n.toElement)?Cr(s):null)&&(s!==(u=Fe(s))||5!==s.tag&&6!==s.tag)&&(s=null)):(g=null,s=i),g!==s)){if(c=dn,h="onMouseLeave",I="onMouseEnter",C="mouse","pointerout"!==e&&"pointerover"!==e||(c=Zn,h="onPointerLeave",I="onPointerEnter",C="pointer"),u=null==g?l:Ar(g),d=null==s?l:Ar(s),(l=new c(h,C+"leave",g,n,r)).target=u,l.relatedTarget=d,h=null,Cr(r)===i&&((c=new c(I,C+"enter",s,n,r)).target=d,c.relatedTarget=u,h=c),u=h,g&&s)e:{for(I=s,C=0,d=c=g;d;d=_i(d))C++;for(d=0,h=I;h;h=_i(h))d++;for(;0<C-d;)c=_i(c),C--;for(;0<d-C;)I=_i(I),d--;for(;C--;){if(c===I||null!==I&&c===I.alternate)break e;c=_i(c),I=_i(I)}c=null}else c=null;null!==g&&Ti(o,l,g,c,!1),null!==s&&null!==u&&Ti(o,u,s,c,!0)}if("select"===(g=(l=i?Ar(i):window).nodeName&&l.nodeName.toLowerCase())||"input"===g&&"file"===l.type)var A=Jn;else if(Mn(l))if(Un)A=ni;else{A=ei;var p=$n}else(g=l.nodeName)&&"input"===g.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(A=ti);switch(A&&(A=A(e,i))?Fn(o,A,n,r):(p&&p(e,l,i),"focusout"===e&&(p=l._wrapperState)&&p.controlled&&"number"===l.type&&ee(l,"number",l.value)),p=i?Ar(i):window,e){case"focusin":(Mn(p)||"true"===p.contentEditable)&&(Ii=p,di=i,Ci=null);break;case"focusout":Ci=di=Ii=null;break;case"mousedown":hi=!0;break;case"contextmenu":case"mouseup":case"dragend":hi=!1,Ai(o,n,r);break;case"selectionchange":if(ui)break;case"keydown":case"keyup":Ai(o,n,r)}var m;if(Vn)e:{switch(e){case"compositionstart":var f="onCompositionStart";break e;case"compositionend":f="onCompositionEnd";break e;case"compositionupdate":f="onCompositionUpdate";break e}f=void 0}else Hn?Nn(e,n)&&(f="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(f="onCompositionStart");f&&(kn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==f?"onCompositionEnd"===f&&Hn&&(m=$t()):(Qt="value"in(Ot=r)?Ot.value:Ot.textContent,Hn=!0)),0<(p=Li(i,f)).length&&(f=new mn(f,e,null,n,r),o.push({event:f,listeners:p}),m?f.data=m:null!==(m=Kn(n))&&(f.data=m))),(m=qn?function(e,t){switch(e){case"compositionend":return Kn(t);case"keypress":return 32!==t.which?null:(Yn=!0,Xn);case"textInput":return(e=t.data)===Xn&&Yn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Vn&&Nn(e,t)?(e=$t(),jt=Qt=Ot=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Li(i,"onBeforeInput")).length&&(r=new mn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=m))}Xi(o,t)}))}function Fi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Li(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,a=r.stateNode;5===r.tag&&null!==a&&(r=a,null!=(a=Re(e,n))&&i.unshift(Fi(e,a,r)),null!=(a=Re(e,t))&&i.push(Fi(e,a,r))),e=e.return}return i}function _i(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ti(e,t,n,i,r){for(var a=t._reactName,o=[];null!==n&&n!==i;){var l=n,g=l.alternate,s=l.stateNode;if(null!==g&&g===i)break;5===l.tag&&null!==s&&(l=s,r?null!=(g=Re(n,a))&&o.unshift(Fi(n,g,l)):r||null!=(g=Re(n,a))&&o.push(Fi(n,g,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Ei=/\r\n?/g,Ji=/\u0000|\uFFFD/g;function Ui(e){return("string"===typeof e?e:""+e).replace(Ei,"\n").replace(Ji,"")}function Di(e,t,n){if(t=Ui(t),Ui(e)!==t&&n)throw Error(a(425))}function Pi(){}var Oi=null,Qi=null;function ji(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var $i="function"===typeof setTimeout?setTimeout:void 0,er="function"===typeof clearTimeout?clearTimeout:void 0,tr="function"===typeof Promise?Promise:void 0,nr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof tr?function(e){return tr.resolve(null).then(e).catch(ir)}:$i;function ir(e){setTimeout((function(){throw e}))}function rr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Ft(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Ft(t)}function ar(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function or(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var lr=Math.random().toString(36).slice(2),gr="__reactFiber$"+lr,sr="__reactProps$"+lr,cr="__reactContainer$"+lr,ur="__reactEvents$"+lr,Ir="__reactListeners$"+lr,dr="__reactHandles$"+lr;function Cr(e){var t=e[gr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[cr]||n[gr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=or(e);null!==e;){if(n=e[gr])return n;e=or(e)}return t}n=(e=n).parentNode}return null}function hr(e){return!(e=e[gr]||e[cr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Ar(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function pr(e){return e[sr]||null}var mr=[],fr=-1;function vr(e){return{current:e}}function br(e){0>fr||(e.current=mr[fr],mr[fr]=null,fr--)}function yr(e,t){fr++,mr[fr]=e.current,e.current=t}var Gr={},Br=vr(Gr),Zr=vr(!1),wr=Gr;function xr(e,t){var n=e.type.contextTypes;if(!n)return Gr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Sr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Wr(){br(Zr),br(Br)}function Vr(e,t,n){if(Br.current!==Gr)throw Error(a(168));yr(Br,t),yr(Zr,n)}function Rr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(a(108,_(e)||"Unknown",r));return K({},n,i)}function qr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Gr,wr=Br.current,yr(Br,e),yr(Zr,Zr.current),!0}function kr(e,t,n){var i=e.stateNode;if(!i)throw Error(a(169));n?(e=Rr(e,t,wr),i.__reactInternalMemoizedMergedChildContext=e,br(Zr),br(Br),yr(Br,e)):br(Zr),yr(Zr,n)}var Xr=null,Yr=!1,Nr=!1;function Kr(e){null===Xr?Xr=[e]:Xr.push(e)}function Hr(){if(!Nr&&null!==Xr){Nr=!0;var e=0,t=mt;try{var n=Xr;for(mt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Xr=null,Yr=!1}catch(r){throw null!==Xr&&(Xr=Xr.slice(e+1)),Je(je,Hr),r}finally{mt=t,Nr=!1}}return null}var zr=[],Mr=0,Fr=null,Lr=0,_r=[],Tr=0,Er=null,Jr=1,Ur="";function Dr(e,t){zr[Mr++]=Lr,zr[Mr++]=Fr,Fr=e,Lr=t}function Pr(e,t,n){_r[Tr++]=Jr,_r[Tr++]=Ur,_r[Tr++]=Er,Er=e;var i=Jr;e=Ur;var r=32-at(i)-1;i&=~(1<<r),n+=1;var a=32-at(t)+r;if(30<a){var o=r-r%5;a=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Jr=1<<32-at(t)+r|n<<r|i,Ur=a+e}else Jr=1<<a|n<<r|i,Ur=e}function Or(e){null!==e.return&&(Dr(e,1),Pr(e,1,0))}function Qr(e){for(;e===Fr;)Fr=zr[--Mr],zr[Mr]=null,Lr=zr[--Mr],zr[Mr]=null;for(;e===Er;)Er=_r[--Tr],_r[Tr]=null,Ur=_r[--Tr],_r[Tr]=null,Jr=_r[--Tr],_r[Tr]=null}var jr=null,$r=null,ea=!1,ta=null;function na(e,t){var n=xs(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ia(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,jr=e,$r=ar(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,jr=e,$r=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Er?{id:Jr,overflow:Ur}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=xs(18,null,null,0)).stateNode=t,n.return=e,e.child=n,jr=e,$r=null,!0);default:return!1}}function ra(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function aa(e){if(ea){var t=$r;if(t){var n=t;if(!ia(e,t)){if(ra(e))throw Error(a(418));t=ar(n.nextSibling);var i=jr;t&&ia(e,t)?na(i,n):(e.flags=-4097&e.flags|2,ea=!1,jr=e)}}else{if(ra(e))throw Error(a(418));e.flags=-4097&e.flags|2,ea=!1,jr=e}}}function oa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;jr=e}function la(e){if(e!==jr)return!1;if(!ea)return oa(e),ea=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ji(e.type,e.memoizedProps)),t&&(t=$r)){if(ra(e))throw ga(),Error(a(418));for(;t;)na(e,t),t=ar(t.nextSibling)}if(oa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){$r=ar(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}$r=null}}else $r=jr?ar(e.stateNode.nextSibling):null;return!0}function ga(){for(var e=$r;e;)e=ar(e.nextSibling)}function sa(){$r=jr=null,ea=!1}function ca(e){null===ta?ta=[e]:ta.push(e)}var ua=v.ReactCurrentBatchConfig;function Ia(e,t){if(e&&e.defaultProps){for(var n in t=K({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var da=vr(null),Ca=null,ha=null,Aa=null;function pa(){Aa=ha=Ca=null}function ma(e){var t=da.current;br(da),e._currentValue=t}function fa(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function va(e,t){Ca=e,Aa=ha=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Al=!0),e.firstContext=null)}function ba(e){var t=e._currentValue;if(Aa!==e)if(e={context:e,memoizedValue:t,next:null},null===ha){if(null===Ca)throw Error(a(308));ha=e,Ca.dependencies={lanes:0,firstContext:e}}else ha=ha.next=e;return t}var ya=null;function Ga(e){null===ya?ya=[e]:ya.push(e)}function Ba(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Ga(t)):(n.next=r.next,r.next=n),t.interleaved=n,Za(e,i)}function Za(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var wa=!1;function xa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Va(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Bg)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Za(e,n)}return null===(r=i.interleaved)?(t.next=t,Ga(i)):(t.next=r.next,r.next=t),i.interleaved=t,Za(e,n)}function Ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,pt(e,n)}}function qa(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?r=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?r=a=t:a=a.next=t}else r=a=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ka(e,t,n,i){var r=e.updateQueue;wa=!1;var a=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(null!==l){r.shared.pending=null;var g=l,s=g.next;g.next=null,null===o?a=s:o.next=s,o=g;var c=e.alternate;null!==c&&((l=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===l?c.firstBaseUpdate=s:l.next=s,c.lastBaseUpdate=g))}if(null!==a){var u=r.baseState;for(o=0,c=s=g=null,l=a;;){var I=l.lane,d=l.eventTime;if((i&I)===I){null!==c&&(c=c.next={eventTime:d,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var C=e,h=l;switch(I=t,d=n,h.tag){case 1:if("function"===typeof(C=h.payload)){u=C.call(d,u,I);break e}u=C;break e;case 3:C.flags=-65537&C.flags|128;case 0:if(null===(I="function"===typeof(C=h.payload)?C.call(d,u,I):C)||void 0===I)break e;u=K({},u,I);break e;case 2:wa=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(I=r.effects)?r.effects=[l]:I.push(l))}else d={eventTime:d,lane:I,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===c?(s=c=d,g=u):c=c.next=d,o|=I;if(null===(l=l.next)){if(null===(l=r.shared.pending))break;l=(I=l).next,I.next=null,r.lastBaseUpdate=I,r.shared.pending=null}}if(null===c&&(g=u),r.baseState=g,r.firstBaseUpdate=s,r.lastBaseUpdate=c,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===a&&(r.shared.lanes=0);qg|=o,e.lanes=o,e.memoizedState=u}}function Xa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var Ya=(new i.Component).refs;function Na(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:K({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ka={isMounted:function(e){return!!(e=e._reactInternals)&&Fe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Og(),r=Qg(e),a=Wa(i,r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Va(e,a,r))&&(jg(t,e,r,i),Ra(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Og(),r=Qg(e),a=Wa(i,r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Va(e,a,r))&&(jg(t,e,r,i),Ra(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Og(),i=Qg(e),r=Wa(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Va(e,r,i))&&(jg(t,e,i,n),Ra(t,e,i))}};function Ha(e,t,n,i,r,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ri(n,i)||!ri(r,a))}function za(e,t,n){var i=!1,r=Gr,a=t.contextType;return"object"===typeof a&&null!==a?a=ba(a):(r=Sr(t)?wr:Br.current,a=(i=null!==(i=t.contextTypes)&&void 0!==i)?xr(e,r):Gr),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ka,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ma(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Ka.enqueueReplaceState(t,t.state,null)}function Fa(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=Ya,xa(e);var a=t.contextType;"object"===typeof a&&null!==a?r.context=ba(a):(a=Sr(t)?wr:Br.current,r.context=xr(e,a)),r.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Na(e,t,a,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Ka.enqueueReplaceState(r,r.state,null),ka(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function La(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,e));var r=i,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===Ya&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function _a(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ta(e){return(0,e._init)(e._payload)}function Ea(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Ws(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function g(e,t,n,i){return null===t||6!==t.tag?((t=ks(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function s(e,t,n,i){var a=n.type;return a===G?u(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===q&&Ta(a)===t.type)?((i=r(t,n.props)).ref=La(e,t,n),i.return=e,i):((i=Vs(n.type,n.key,n.props,null,e.mode,i)).ref=La(e,t,n),i.return=e,i)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Xs(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function u(e,t,n,i,a){return null===t||7!==t.tag?((t=Rs(n,e.mode,i,a)).return=e,t):((t=r(t,n)).return=e,t)}function I(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=ks(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Vs(t.type,t.key,t.props,null,e.mode,n)).ref=La(e,null,t),n.return=e,n;case y:return(t=Xs(t,e.mode,n)).return=e,t;case q:return I(e,(0,t._init)(t._payload),n)}if(te(t)||Y(t))return(t=Rs(t,e.mode,n,null)).return=e,t;_a(e,t)}return null}function d(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:g(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===r?s(e,t,n,i):null;case y:return n.key===r?c(e,t,n,i):null;case q:return d(e,t,(r=n._init)(n._payload),i)}if(te(n)||Y(n))return null!==r?null:u(e,t,n,i,null);_a(e,n)}return null}function C(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return g(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case b:return s(t,e=e.get(null===i.key?n:i.key)||null,i,r);case y:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case q:return C(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||Y(i))return u(t,e=e.get(n)||null,i,r,null);_a(t,i)}return null}function h(r,a,l,g){for(var s=null,c=null,u=a,h=a=0,A=null;null!==u&&h<l.length;h++){u.index>h?(A=u,u=null):A=u.sibling;var p=d(r,u,l[h],g);if(null===p){null===u&&(u=A);break}e&&u&&null===p.alternate&&t(r,u),a=o(p,a,h),null===c?s=p:c.sibling=p,c=p,u=A}if(h===l.length)return n(r,u),ea&&Dr(r,h),s;if(null===u){for(;h<l.length;h++)null!==(u=I(r,l[h],g))&&(a=o(u,a,h),null===c?s=u:c.sibling=u,c=u);return ea&&Dr(r,h),s}for(u=i(r,u);h<l.length;h++)null!==(A=C(u,r,h,l[h],g))&&(e&&null!==A.alternate&&u.delete(null===A.key?h:A.key),a=o(A,a,h),null===c?s=A:c.sibling=A,c=A);return e&&u.forEach((function(e){return t(r,e)})),ea&&Dr(r,h),s}function A(r,l,g,s){var c=Y(g);if("function"!==typeof c)throw Error(a(150));if(null==(g=c.call(g)))throw Error(a(151));for(var u=c=null,h=l,A=l=0,p=null,m=g.next();null!==h&&!m.done;A++,m=g.next()){h.index>A?(p=h,h=null):p=h.sibling;var f=d(r,h,m.value,s);if(null===f){null===h&&(h=p);break}e&&h&&null===f.alternate&&t(r,h),l=o(f,l,A),null===u?c=f:u.sibling=f,u=f,h=p}if(m.done)return n(r,h),ea&&Dr(r,A),c;if(null===h){for(;!m.done;A++,m=g.next())null!==(m=I(r,m.value,s))&&(l=o(m,l,A),null===u?c=m:u.sibling=m,u=m);return ea&&Dr(r,A),c}for(h=i(r,h);!m.done;A++,m=g.next())null!==(m=C(h,r,A,m.value,s))&&(e&&null!==m.alternate&&h.delete(null===m.key?A:m.key),l=o(m,l,A),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach((function(e){return t(r,e)})),ea&&Dr(r,A),c}return function e(i,a,o,g){if("object"===typeof o&&null!==o&&o.type===G&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var s=o.key,c=a;null!==c;){if(c.key===s){if((s=o.type)===G){if(7===c.tag){n(i,c.sibling),(a=r(c,o.props.children)).return=i,i=a;break e}}else if(c.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===q&&Ta(s)===c.type){n(i,c.sibling),(a=r(c,o.props)).ref=La(i,c,o),a.return=i,i=a;break e}n(i,c);break}t(i,c),c=c.sibling}o.type===G?((a=Rs(o.props.children,i.mode,g,o.key)).return=i,i=a):((g=Vs(o.type,o.key,o.props,null,i.mode,g)).ref=La(i,a,o),g.return=i,i=g)}return l(i);case y:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(i,a.sibling),(a=r(a,o.children||[])).return=i,i=a;break e}n(i,a);break}t(i,a),a=a.sibling}(a=Xs(o,i.mode,g)).return=i,i=a}return l(i);case q:return e(i,a,(c=o._init)(o._payload),g)}if(te(o))return h(i,a,o,g);if(Y(o))return A(i,a,o,g);_a(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(i,a.sibling),(a=r(a,o)).return=i,i=a):(n(i,a),(a=ks(o,i.mode,g)).return=i,i=a),l(i)):n(i,a)}}var Ja=Ea(!0),Ua=Ea(!1),Da={},Pa=vr(Da),Oa=vr(Da),Qa=vr(Da);function ja(e){if(e===Da)throw Error(a(174));return e}function $a(e,t){switch(yr(Qa,t),yr(Oa,e),yr(Pa,Da),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ge(null,"");break;default:t=ge(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}br(Pa),yr(Pa,t)}function eo(){br(Pa),br(Oa),br(Qa)}function to(e){ja(Qa.current);var t=ja(Pa.current),n=ge(t,e.type);t!==n&&(yr(Oa,e),yr(Pa,n))}function no(e){Oa.current===e&&(br(Pa),br(Oa))}var io=vr(0);function ro(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var lo=v.ReactCurrentDispatcher,go=v.ReactCurrentBatchConfig,so=0,co=null,uo=null,Io=null,Co=!1,ho=!1,Ao=0,po=0;function mo(){throw Error(a(321))}function fo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ii(e[n],t[n]))return!1;return!0}function vo(e,t,n,i,r,o){if(so=o,co=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lo.current=null===e||null===e.memoizedState?il:rl,e=n(i,r),ho){o=0;do{if(ho=!1,Ao=0,25<=o)throw Error(a(301));o+=1,Io=uo=null,t.updateQueue=null,lo.current=al,e=n(i,r)}while(ho)}if(lo.current=nl,t=null!==uo&&null!==uo.next,so=0,Io=uo=co=null,Co=!1,t)throw Error(a(300));return e}function bo(){var e=0!==Ao;return Ao=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Io?co.memoizedState=Io=e:Io=Io.next=e,Io}function Go(){if(null===uo){var e=co.alternate;e=null!==e?e.memoizedState:null}else e=uo.next;var t=null===Io?co.memoizedState:Io.next;if(null!==t)Io=t,uo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(uo=e).memoizedState,baseState:uo.baseState,baseQueue:uo.baseQueue,queue:uo.queue,next:null},null===Io?co.memoizedState=Io=e:Io=Io.next=e}return Io}function Bo(e,t){return"function"===typeof t?t(e):t}function Zo(e){var t=Go(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=uo,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var l=r.next;r.next=o.next,o.next=l}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var g=l=null,s=null,c=o;do{var u=c.lane;if((so&u)===u)null!==s&&(s=s.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var I={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===s?(g=s=I,l=i):s=s.next=I,co.lanes|=u,qg|=u}c=c.next}while(null!==c&&c!==o);null===s?l=i:s.next=g,ii(i,t.memoizedState)||(Al=!0),t.memoizedState=i,t.baseState=l,t.baseQueue=s,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,co.lanes|=o,qg|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wo(e){var t=Go(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var l=r=r.next;do{o=e(o,l.action),l=l.next}while(l!==r);ii(o,t.memoizedState)||(Al=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function xo(){}function So(e,t){var n=co,i=Go(),r=t(),o=!ii(i.memoizedState,r);if(o&&(i.memoizedState=r,Al=!0),i=i.queue,Mo(Ro.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==Io&&1&Io.memoizedState.tag){if(n.flags|=2048,Yo(9,Vo.bind(null,n,i,r,t),void 0,null),null===Zg)throw Error(a(349));0!==(30&so)||Wo(n,t,r)}return r}function Wo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=co.updateQueue)?(t={lastEffect:null,stores:null},co.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Vo(e,t,n,i){t.value=n,t.getSnapshot=i,qo(t)&&ko(e)}function Ro(e,t,n){return n((function(){qo(t)&&ko(e)}))}function qo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ii(e,n)}catch(i){return!0}}function ko(e){var t=Za(e,1);null!==t&&jg(t,e,1,-1)}function Xo(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bo,lastRenderedState:e},t.queue=e,e=e.dispatch=jo.bind(null,co,e),[t.memoizedState,e]}function Yo(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=co.updateQueue)?(t={lastEffect:null,stores:null},co.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function No(){return Go().memoizedState}function Ko(e,t,n,i){var r=yo();co.flags|=e,r.memoizedState=Yo(1|t,n,void 0,void 0===i?null:i)}function Ho(e,t,n,i){var r=Go();i=void 0===i?null:i;var a=void 0;if(null!==uo){var o=uo.memoizedState;if(a=o.destroy,null!==i&&fo(i,o.deps))return void(r.memoizedState=Yo(t,n,a,i))}co.flags|=e,r.memoizedState=Yo(1|t,n,a,i)}function zo(e,t){return Ko(8390656,8,e,t)}function Mo(e,t){return Ho(2048,8,e,t)}function Fo(e,t){return Ho(4,2,e,t)}function Lo(e,t){return Ho(4,4,e,t)}function _o(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function To(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ho(4,4,_o.bind(null,t,e),n)}function Eo(){}function Jo(e,t){var n=Go();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&fo(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Uo(e,t){var n=Go();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&fo(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Do(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,Al=!0),e.memoizedState=n):(ii(n,t)||(n=Ct(),co.lanes|=n,qg|=n,e.baseState=!0),t)}function Po(e,t){var n=mt;mt=0!==n&&4>n?n:4,e(!0);var i=go.transition;go.transition={};try{e(!1),t()}finally{mt=n,go.transition=i}}function Oo(){return Go().memoizedState}function Qo(e,t,n){var i=Qg(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},$o(e))el(t,n);else if(null!==(n=Ba(e,t,n,i))){jg(n,e,i,Og()),tl(n,t,i)}}function jo(e,t,n){var i=Qg(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if($o(e))el(t,r);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,l=a(o,n);if(r.hasEagerState=!0,r.eagerState=l,ii(l,o)){var g=t.interleaved;return null===g?(r.next=r,Ga(t)):(r.next=g.next,g.next=r),void(t.interleaved=r)}}catch(s){}null!==(n=Ba(e,t,r,i))&&(jg(n,e,i,r=Og()),tl(n,t,i))}}function $o(e){var t=e.alternate;return e===co||null!==t&&t===co}function el(e,t){ho=Co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function tl(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,pt(e,n)}}var nl={readContext:ba,useCallback:mo,useContext:mo,useEffect:mo,useImperativeHandle:mo,useInsertionEffect:mo,useLayoutEffect:mo,useMemo:mo,useReducer:mo,useRef:mo,useState:mo,useDebugValue:mo,useDeferredValue:mo,useTransition:mo,useMutableSource:mo,useSyncExternalStore:mo,useId:mo,unstable_isNewReconciler:!1},il={readContext:ba,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:ba,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ko(4194308,4,_o.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ko(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ko(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=yo();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Qo.bind(null,co,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Xo,useDebugValue:Eo,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Xo(!1),t=e[0];return e=Po.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=co,r=yo();if(ea){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Zg)throw Error(a(349));0!==(30&so)||Wo(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,zo(Ro.bind(null,i,o,e),[e]),i.flags|=2048,Yo(9,Vo.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=Zg.identifierPrefix;if(ea){var n=Ur;t=":"+t+"R"+(n=(Jr&~(1<<32-at(Jr)-1)).toString(32)+n),0<(n=Ao++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rl={readContext:ba,useCallback:Jo,useContext:ba,useEffect:Mo,useImperativeHandle:To,useInsertionEffect:Fo,useLayoutEffect:Lo,useMemo:Uo,useReducer:Zo,useRef:No,useState:function(){return Zo(Bo)},useDebugValue:Eo,useDeferredValue:function(e){return Do(Go(),uo.memoizedState,e)},useTransition:function(){return[Zo(Bo)[0],Go().memoizedState]},useMutableSource:xo,useSyncExternalStore:So,useId:Oo,unstable_isNewReconciler:!1},al={readContext:ba,useCallback:Jo,useContext:ba,useEffect:Mo,useImperativeHandle:To,useInsertionEffect:Fo,useLayoutEffect:Lo,useMemo:Uo,useReducer:wo,useRef:No,useState:function(){return wo(Bo)},useDebugValue:Eo,useDeferredValue:function(e){var t=Go();return null===uo?t.memoizedState=e:Do(t,uo.memoizedState,e)},useTransition:function(){return[wo(Bo)[0],Go().memoizedState]},useMutableSource:xo,useSyncExternalStore:So,useId:Oo,unstable_isNewReconciler:!1};function ol(e,t){try{var n="",i=t;do{n+=F(i),i=i.return}while(i);var r=n}catch(a){r="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:r,digest:null}}function ll(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function gl(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var sl="function"===typeof WeakMap?WeakMap:Map;function cl(e,t,n){(n=Wa(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Mg||(Mg=!0,Fg=i),gl(0,t)},n}function ul(e,t,n){(n=Wa(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){gl(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){gl(0,t),"function"!==typeof i&&(null===Lg?Lg=new Set([this]):Lg.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Il(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new sl;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=bs.bind(null,e,t,n),t.then(e,e))}function dl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Cl(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Wa(-1,1)).tag=2,Va(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var hl=v.ReactCurrentOwner,Al=!1;function pl(e,t,n,i){t.child=null===e?Ua(t,null,n,i):Ja(t,e.child,n,i)}function ml(e,t,n,i,r){n=n.render;var a=t.ref;return va(t,r),i=vo(e,t,n,i,a,r),n=bo(),null===e||Al?(ea&&n&&Or(t),t.flags|=1,pl(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ml(e,t,r))}function fl(e,t,n,i,r){if(null===e){var a=n.type;return"function"!==typeof a||Ss(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Vs(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,vl(e,t,a,i,r))}if(a=e.child,0===(e.lanes&r)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ri)(o,i)&&e.ref===t.ref)return Ml(e,t,r)}return t.flags|=1,(e=Ws(a,i)).ref=t.ref,e.return=t,t.child=e}function vl(e,t,n,i,r){if(null!==e){var a=e.memoizedProps;if(ri(a,i)&&e.ref===t.ref){if(Al=!1,t.pendingProps=i=a,0===(e.lanes&r))return t.lanes=e.lanes,Ml(e,t,r);0!==(131072&e.flags)&&(Al=!0)}}return Gl(e,t,n,i,r)}function bl(e,t,n){var i=t.pendingProps,r=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},yr(Wg,Sg),Sg|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,yr(Wg,Sg),Sg|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==a?a.baseLanes:n,yr(Wg,Sg),Sg|=i}else null!==a?(i=a.baseLanes|n,t.memoizedState=null):i=n,yr(Wg,Sg),Sg|=i;return pl(e,t,r,n),t.child}function yl(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Gl(e,t,n,i,r){var a=Sr(n)?wr:Br.current;return a=xr(t,a),va(t,r),n=vo(e,t,n,i,a,r),i=bo(),null===e||Al?(ea&&i&&Or(t),t.flags|=1,pl(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ml(e,t,r))}function Bl(e,t,n,i,r){if(Sr(n)){var a=!0;qr(t)}else a=!1;if(va(t,r),null===t.stateNode)zl(e,t),za(t,n,i),Fa(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,l=t.memoizedProps;o.props=l;var g=o.context,s=n.contextType;"object"===typeof s&&null!==s?s=ba(s):s=xr(t,s=Sr(n)?wr:Br.current);var c=n.getDerivedStateFromProps,u="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(l!==i||g!==s)&&Ma(t,o,i,s),wa=!1;var I=t.memoizedState;o.state=I,ka(t,i,o,r),g=t.memoizedState,l!==i||I!==g||Zr.current||wa?("function"===typeof c&&(Na(t,n,c,i),g=t.memoizedState),(l=wa||Ha(t,n,l,i,I,g,s))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=g),o.props=i,o.state=g,o.context=s,i=l):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Sa(e,t),l=t.memoizedProps,s=t.type===t.elementType?l:Ia(t.type,l),o.props=s,u=t.pendingProps,I=o.context,"object"===typeof(g=n.contextType)&&null!==g?g=ba(g):g=xr(t,g=Sr(n)?wr:Br.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(l!==u||I!==g)&&Ma(t,o,i,g),wa=!1,I=t.memoizedState,o.state=I,ka(t,i,o,r);var C=t.memoizedState;l!==u||I!==C||Zr.current||wa?("function"===typeof d&&(Na(t,n,d,i),C=t.memoizedState),(s=wa||Ha(t,n,s,i,I,C,g)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,C,g),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,C,g)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||l===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||l===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=C),o.props=i,o.state=C,o.context=g,i=s):("function"!==typeof o.componentDidUpdate||l===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||l===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),i=!1)}return Zl(e,t,n,i,a,r)}function Zl(e,t,n,i,r,a){yl(e,t);var o=0!==(128&t.flags);if(!i&&!o)return r&&kr(t,n,!1),Ml(e,t,a);i=t.stateNode,hl.current=t;var l=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=Ja(t,e.child,null,a),t.child=Ja(t,null,l,a)):pl(e,t,l,a),t.memoizedState=i.state,r&&kr(t,n,!0),t.child}function wl(e){var t=e.stateNode;t.pendingContext?Vr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Vr(0,t.context,!1),$a(e,t.containerInfo)}function xl(e,t,n,i,r){return sa(),ca(r),t.flags|=256,pl(e,t,n,i),t.child}var Sl,Wl,Vl,Rl={dehydrated:null,treeContext:null,retryLane:0};function ql(e){return{baseLanes:e,cachePool:null,transitions:null}}function kl(e,t,n){var i,r=t.pendingProps,o=io.current,l=!1,g=0!==(128&t.flags);if((i=g)||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),yr(io,1&o),null===e)return aa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(g=r.children,e=r.fallback,l?(r=t.mode,l=t.child,g={mode:"hidden",children:g},0===(1&r)&&null!==l?(l.childLanes=0,l.pendingProps=g):l=qs(g,r,0,null),e=Rs(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=ql(n),t.memoizedState=Rl,e):Xl(t,g));if(null!==(o=e.memoizedState)&&null!==(i=o.dehydrated))return function(e,t,n,i,r,o,l){if(n)return 256&t.flags?(t.flags&=-257,Yl(e,t,l,i=ll(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=qs({mode:"visible",children:i.children},r,0,null),(o=Rs(o,r,l,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,0!==(1&t.mode)&&Ja(t,e.child,null,l),t.child.memoizedState=ql(l),t.memoizedState=Rl,o);if(0===(1&t.mode))return Yl(e,t,l,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var g=i.dgst;return i=g,Yl(e,t,l,i=ll(o=Error(a(419)),i,void 0))}if(g=0!==(l&e.childLanes),Al||g){if(null!==(i=Zg)){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|l))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Za(e,r),jg(i,e,r,-1))}return us(),Yl(e,t,l,i=ll(Error(a(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Gs.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,$r=ar(r.nextSibling),jr=t,ea=!0,ta=null,null!==e&&(_r[Tr++]=Jr,_r[Tr++]=Ur,_r[Tr++]=Er,Jr=e.id,Ur=e.overflow,Er=t),(t=Xl(t,i.children)).flags|=4096,t)}(e,t,g,r,i,o,n);if(l){l=r.fallback,g=t.mode,i=(o=e.child).sibling;var s={mode:"hidden",children:r.children};return 0===(1&g)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=s,t.deletions=null):(r=Ws(o,s)).subtreeFlags=14680064&o.subtreeFlags,null!==i?l=Ws(i,l):(l=Rs(l,g,n,null)).flags|=2,l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,g=null===(g=e.child.memoizedState)?ql(n):{baseLanes:g.baseLanes|n,cachePool:null,transitions:g.transitions},l.memoizedState=g,l.childLanes=e.childLanes&~n,t.memoizedState=Rl,r}return e=(l=e.child).sibling,r=Ws(l,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Xl(e,t){return(t=qs({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Yl(e,t,n,i){return null!==i&&ca(i),Ja(t,e.child,null,n),(e=Xl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Nl(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),fa(e.return,t,n)}function Kl(e,t,n,i,r){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function Hl(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(pl(e,t,i.children,n),0!==(2&(i=io.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Nl(e,n,t);else if(19===e.tag)Nl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(yr(io,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ro(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Kl(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ro(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Kl(t,!0,n,null,a);break;case"together":Kl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zl(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ml(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),qg|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ws(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ws(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Fl(e,t){if(!ea)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ll(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function _l(e,t,n){var i=t.pendingProps;switch(Qr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ll(t),null;case 1:case 17:return Sr(t.type)&&Wr(),Ll(t),null;case 3:return i=t.stateNode,eo(),br(Zr),br(Br),oo(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(la(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ta&&(ns(ta),ta=null))),Ll(t),null;case 5:no(t);var r=ja(Qa.current);if(n=t.type,null!==e&&null!=t.stateNode)Wl(e,t,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(a(166));return Ll(t),null}if(e=ja(Pa.current),la(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[gr]=t,i[sr]=o,e=0!==(1&t.mode),n){case"dialog":Yi("cancel",i),Yi("close",i);break;case"iframe":case"object":case"embed":Yi("load",i);break;case"video":case"audio":for(r=0;r<Ri.length;r++)Yi(Ri[r],i);break;case"source":Yi("error",i);break;case"img":case"image":case"link":Yi("error",i),Yi("load",i);break;case"details":Yi("toggle",i);break;case"input":O(i,o),Yi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Yi("invalid",i);break;case"textarea":re(i,o),Yi("invalid",i)}for(var g in pe(n,o),r=null,o)if(o.hasOwnProperty(g)){var s=o[g];"children"===g?"string"===typeof s?i.textContent!==s&&(!0!==o.suppressHydrationWarning&&Di(i.textContent,s,e),r=["children",s]):"number"===typeof s&&i.textContent!==""+s&&(!0!==o.suppressHydrationWarning&&Di(i.textContent,s,e),r=["children",""+s]):l.hasOwnProperty(g)&&null!=s&&"onScroll"===g&&Yi("scroll",i)}switch(n){case"input":J(i),$(i,o,!0);break;case"textarea":J(i),oe(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Pi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{g=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=g.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=g.createElement(n,{is:i.is}):(e=g.createElement(n),"select"===n&&(g=e,i.multiple?g.multiple=!0:i.size&&(g.size=i.size))):e=g.createElementNS(e,n),e[gr]=t,e[sr]=i,Sl(e,t),t.stateNode=e;e:{switch(g=me(n,i),n){case"dialog":Yi("cancel",e),Yi("close",e),r=i;break;case"iframe":case"object":case"embed":Yi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Ri.length;r++)Yi(Ri[r],e);r=i;break;case"source":Yi("error",e),r=i;break;case"img":case"image":case"link":Yi("error",e),Yi("load",e),r=i;break;case"details":Yi("toggle",e),r=i;break;case"input":O(e,i),r=P(e,i),Yi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=K({},i,{value:void 0}),Yi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Yi("invalid",e)}for(o in pe(n,r),s=r)if(s.hasOwnProperty(o)){var c=s[o];"style"===o?he(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&ce(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&ue(e,c):"number"===typeof c&&ue(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(l.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Yi("scroll",e):null!=c&&f(e,o,c,g))}switch(n){case"input":J(e),$(e,i,!1);break;case"textarea":J(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+T(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Pi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ll(t),null;case 6:if(e&&null!=t.stateNode)Vl(0,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(a(166));if(n=ja(Qa.current),ja(Pa.current),la(t)){if(i=t.stateNode,n=t.memoizedProps,i[gr]=t,(o=i.nodeValue!==n)&&null!==(e=jr))switch(e.tag){case 3:Di(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Di(i.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[gr]=t,t.stateNode=i}return Ll(t),null;case 13:if(br(io),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ea&&null!==$r&&0!==(1&t.mode)&&0===(128&t.flags))ga(),sa(),t.flags|=98560,o=!1;else if(o=la(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[gr]=t}else sa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ll(t),o=!1}else null!==ta&&(ns(ta),ta=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&io.current)?0===Vg&&(Vg=3):us())),null!==t.updateQueue&&(t.flags|=4),Ll(t),null);case 4:return eo(),null===e&&Hi(t.stateNode.containerInfo),Ll(t),null;case 10:return ma(t.type._context),Ll(t),null;case 19:if(br(io),null===(o=t.memoizedState))return Ll(t),null;if(i=0!==(128&t.flags),null===(g=o.rendering))if(i)Fl(o,!1);else{if(0!==Vg||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(g=ro(e))){for(t.flags|=128,Fl(o,!1),null!==(i=g.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(g=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=g.childLanes,o.lanes=g.lanes,o.child=g.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=g.memoizedProps,o.memoizedState=g.memoizedState,o.updateQueue=g.updateQueue,o.type=g.type,e=g.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return yr(io,1&io.current|2),t.child}e=e.sibling}null!==o.tail&&Oe()>Hg&&(t.flags|=128,i=!0,Fl(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ro(g))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Fl(o,!0),null===o.tail&&"hidden"===o.tailMode&&!g.alternate&&!ea)return Ll(t),null}else 2*Oe()-o.renderingStartTime>Hg&&1073741824!==n&&(t.flags|=128,i=!0,Fl(o,!1),t.lanes=4194304);o.isBackwards?(g.sibling=t.child,t.child=g):(null!==(n=o.last)?n.sibling=g:t.child=g,o.last=g)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Oe(),t.sibling=null,n=io.current,yr(io,i?1&n|2:1&n),t):(Ll(t),null);case 22:case 23:return ls(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Sg)&&(Ll(t),6&t.subtreeFlags&&(t.flags|=8192)):Ll(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Tl(e,t){switch(Qr(t),t.tag){case 1:return Sr(t.type)&&Wr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),br(Zr),br(Br),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(br(io),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));sa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return br(io),null;case 4:return eo(),null;case 10:return ma(t.type._context),null;case 22:case 23:return ls(),null;default:return null}}Sl=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Wl=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,ja(Pa.current);var a,o=null;switch(n){case"input":r=P(e,r),i=P(e,i),o=[];break;case"select":r=K({},r,{value:void 0}),i=K({},i,{value:void 0}),o=[];break;case"textarea":r=ie(e,r),i=ie(e,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Pi)}for(c in pe(n,i),n=null,r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&null!=r[c])if("style"===c){var g=r[c];for(a in g)g.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(l.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var s=i[c];if(g=null!=r?r[c]:void 0,i.hasOwnProperty(c)&&s!==g&&(null!=s||null!=g))if("style"===c)if(g){for(a in g)!g.hasOwnProperty(a)||s&&s.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in s)s.hasOwnProperty(a)&&g[a]!==s[a]&&(n||(n={}),n[a]=s[a])}else n||(o||(o=[]),o.push(c,n)),n=s;else"dangerouslySetInnerHTML"===c?(s=s?s.__html:void 0,g=g?g.__html:void 0,null!=s&&g!==s&&(o=o||[]).push(c,s)):"children"===c?"string"!==typeof s&&"number"!==typeof s||(o=o||[]).push(c,""+s):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(l.hasOwnProperty(c)?(null!=s&&"onScroll"===c&&Yi("scroll",e),o||g===s||(o=[])):(o=o||[]).push(c,s))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Vl=function(e,t,n,i){n!==i&&(t.flags|=4)};var El=!1,Jl=!1,Ul="function"===typeof WeakSet?WeakSet:Set,Dl=null;function Pl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){vs(e,t,i)}else n.current=null}function Ol(e,t,n){try{n()}catch(i){vs(e,t,i)}}var Ql=!1;function jl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,void 0!==a&&Ol(t,n,a)}r=r.next}while(r!==i)}}function $l(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function eg(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function tg(e){var t=e.alternate;null!==t&&(e.alternate=null,tg(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[gr],delete t[sr],delete t[ur],delete t[Ir],delete t[dr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ng(e){return 5===e.tag||3===e.tag||4===e.tag}function ig(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ng(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function rg(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Pi));else if(4!==i&&null!==(e=e.child))for(rg(e,t,n),e=e.sibling;null!==e;)rg(e,t,n),e=e.sibling}function ag(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(ag(e,t,n),e=e.sibling;null!==e;)ag(e,t,n),e=e.sibling}var og=null,lg=!1;function gg(e,t,n){for(n=n.child;null!==n;)sg(e,t,n),n=n.sibling}function sg(e,t,n){if(rt&&"function"===typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(it,n)}catch(l){}switch(n.tag){case 5:Jl||Pl(n,t);case 6:var i=og,r=lg;og=null,gg(e,t,n),lg=r,null!==(og=i)&&(lg?(e=og,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):og.removeChild(n.stateNode));break;case 18:null!==og&&(lg?(e=og,n=n.stateNode,8===e.nodeType?rr(e.parentNode,n):1===e.nodeType&&rr(e,n),Ft(e)):rr(og,n.stateNode));break;case 4:i=og,r=lg,og=n.stateNode.containerInfo,lg=!0,gg(e,t,n),og=i,lg=r;break;case 0:case 11:case 14:case 15:if(!Jl&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var a=r,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&Ol(n,t,o),r=r.next}while(r!==i)}gg(e,t,n);break;case 1:if(!Jl&&(Pl(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){vs(n,t,l)}gg(e,t,n);break;case 21:gg(e,t,n);break;case 22:1&n.mode?(Jl=(i=Jl)||null!==n.memoizedState,gg(e,t,n),Jl=i):gg(e,t,n);break;default:gg(e,t,n)}}function cg(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ul),t.forEach((function(t){var i=Bs.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function ug(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,l=t,g=l;e:for(;null!==g;){switch(g.tag){case 5:og=g.stateNode,lg=!1;break e;case 3:case 4:og=g.stateNode.containerInfo,lg=!0;break e}g=g.return}if(null===og)throw Error(a(160));sg(o,l,r),og=null,lg=!1;var s=r.alternate;null!==s&&(s.return=null),r.return=null}catch(c){vs(r,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)Ig(t,e),t=t.sibling}function Ig(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ug(t,e),dg(e),4&i){try{jl(3,e,e.return),$l(3,e)}catch(A){vs(e,e.return,A)}try{jl(5,e,e.return)}catch(A){vs(e,e.return,A)}}break;case 1:ug(t,e),dg(e),512&i&&null!==n&&Pl(n,n.return);break;case 5:if(ug(t,e),dg(e),512&i&&null!==n&&Pl(n,n.return),32&e.flags){var r=e.stateNode;try{ue(r,"")}catch(A){vs(e,e.return,A)}}if(4&i&&null!=(r=e.stateNode)){var o=e.memoizedProps,l=null!==n?n.memoizedProps:o,g=e.type,s=e.updateQueue;if(e.updateQueue=null,null!==s)try{"input"===g&&"radio"===o.type&&null!=o.name&&Q(r,o),me(g,l);var c=me(g,o);for(l=0;l<s.length;l+=2){var u=s[l],I=s[l+1];"style"===u?he(r,I):"dangerouslySetInnerHTML"===u?ce(r,I):"children"===u?ue(r,I):f(r,u,I,c)}switch(g){case"input":j(r,o);break;case"textarea":ae(r,o);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var C=o.value;null!=C?ne(r,!!o.multiple,C,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[sr]=o}catch(A){vs(e,e.return,A)}}break;case 6:if(ug(t,e),dg(e),4&i){if(null===e.stateNode)throw Error(a(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(A){vs(e,e.return,A)}}break;case 3:if(ug(t,e),dg(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ft(t.containerInfo)}catch(A){vs(e,e.return,A)}break;case 4:default:ug(t,e),dg(e);break;case 13:ug(t,e),dg(e),8192&(r=e.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(Kg=Oe())),4&i&&cg(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Jl=(c=Jl)||u,ug(t,e),Jl=c):ug(t,e),dg(e),8192&i){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&0!==(1&e.mode))for(Dl=e,u=e.child;null!==u;){for(I=Dl=u;null!==Dl;){switch(C=(d=Dl).child,d.tag){case 0:case 11:case 14:case 15:jl(4,d,d.return);break;case 1:Pl(d,d.return);var h=d.stateNode;if("function"===typeof h.componentWillUnmount){i=d,n=d.return;try{t=i,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(A){vs(i,n,A)}}break;case 5:Pl(d,d.return);break;case 22:if(null!==d.memoizedState){pg(I);continue}}null!==C?(C.return=d,Dl=C):pg(I)}u=u.sibling}e:for(u=null,I=e;;){if(5===I.tag){if(null===u){u=I;try{r=I.stateNode,c?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(g=I.stateNode,l=void 0!==(s=I.memoizedProps.style)&&null!==s&&s.hasOwnProperty("display")?s.display:null,g.style.display=Ce("display",l))}catch(A){vs(e,e.return,A)}}}else if(6===I.tag){if(null===u)try{I.stateNode.nodeValue=c?"":I.memoizedProps}catch(A){vs(e,e.return,A)}}else if((22!==I.tag&&23!==I.tag||null===I.memoizedState||I===e)&&null!==I.child){I.child.return=I,I=I.child;continue}if(I===e)break e;for(;null===I.sibling;){if(null===I.return||I.return===e)break e;u===I&&(u=null),I=I.return}u===I&&(u=null),I.sibling.return=I.return,I=I.sibling}}break;case 19:ug(t,e),dg(e),4&i&&cg(e);case 21:}}function dg(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ng(n)){var i=n;break e}n=n.return}throw Error(a(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(ue(r,""),i.flags&=-33),ag(e,ig(e),r);break;case 3:case 4:var o=i.stateNode.containerInfo;rg(e,ig(e),o);break;default:throw Error(a(161))}}catch(l){vs(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Cg(e,t,n){Dl=e,hg(e,t,n)}function hg(e,t,n){for(var i=0!==(1&e.mode);null!==Dl;){var r=Dl,a=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||El;if(!o){var l=r.alternate,g=null!==l&&null!==l.memoizedState||Jl;l=El;var s=Jl;if(El=o,(Jl=g)&&!s)for(Dl=r;null!==Dl;)g=(o=Dl).child,22===o.tag&&null!==o.memoizedState?mg(r):null!==g?(g.return=o,Dl=g):mg(r);for(;null!==a;)Dl=a,hg(a,t,n),a=a.sibling;Dl=r,El=l,Jl=s}Ag(e)}else 0!==(8772&r.subtreeFlags)&&null!==a?(a.return=r,Dl=a):Ag(e)}}function Ag(e){for(;null!==Dl;){var t=Dl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jl||$l(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Jl)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Ia(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Xa(t,o,i);break;case 3:var l=t.updateQueue;if(null!==l){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Xa(t,l,n)}break;case 5:var g=t.stateNode;if(null===n&&4&t.flags){n=g;var s=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break;case"img":s.src&&(n.src=s.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var I=u.dehydrated;null!==I&&Ft(I)}}}break;default:throw Error(a(163))}Jl||512&t.flags&&eg(t)}catch(d){vs(t,t.return,d)}}if(t===e){Dl=null;break}if(null!==(n=t.sibling)){n.return=t.return,Dl=n;break}Dl=t.return}}function pg(e){for(;null!==Dl;){var t=Dl;if(t===e){Dl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Dl=n;break}Dl=t.return}}function mg(e){for(;null!==Dl;){var t=Dl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$l(4,t)}catch(g){vs(t,n,g)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(g){vs(t,r,g)}}var a=t.return;try{eg(t)}catch(g){vs(t,a,g)}break;case 5:var o=t.return;try{eg(t)}catch(g){vs(t,o,g)}}}catch(g){vs(t,t.return,g)}if(t===e){Dl=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Dl=l;break}Dl=t.return}}var fg,vg=Math.ceil,bg=v.ReactCurrentDispatcher,yg=v.ReactCurrentOwner,Gg=v.ReactCurrentBatchConfig,Bg=0,Zg=null,wg=null,xg=0,Sg=0,Wg=vr(0),Vg=0,Rg=null,qg=0,kg=0,Xg=0,Yg=null,Ng=null,Kg=0,Hg=1/0,zg=null,Mg=!1,Fg=null,Lg=null,_g=!1,Tg=null,Eg=0,Jg=0,Ug=null,Dg=-1,Pg=0;function Og(){return 0!==(6&Bg)?Oe():-1!==Dg?Dg:Dg=Oe()}function Qg(e){return 0===(1&e.mode)?1:0!==(2&Bg)&&0!==xg?xg&-xg:null!==ua.transition?(0===Pg&&(Pg=Ct()),Pg):0!==(e=mt)?e:e=void 0===(e=window.event)?16:Pt(e.type)}function jg(e,t,n,i){if(50<Jg)throw Jg=0,Ug=null,Error(a(185));At(e,n,i),0!==(2&Bg)&&e===Zg||(e===Zg&&(0===(2&Bg)&&(kg|=n),4===Vg&&is(e,xg)),$g(e,i),1===n&&0===Bg&&0===(1&t.mode)&&(Hg=Oe()+500,Yr&&Hr()))}function $g(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-at(a),l=1<<o,g=r[o];-1===g?0!==(l&n)&&0===(l&i)||(r[o]=It(l,t)):g<=t&&(e.expiredLanes|=l),a&=~l}}(e,t);var i=ut(e,e===Zg?xg:0);if(0===i)null!==n&&Ue(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ue(n),1===t)0===e.tag?function(e){Yr=!0,Kr(e)}(rs.bind(null,e)):Kr(rs.bind(null,e)),nr((function(){0===(6&Bg)&&Hr()})),n=null;else{switch(ft(i)){case 1:n=je;break;case 4:n=$e;break;case 16:default:n=et;break;case 536870912:n=nt}n=Zs(n,es.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function es(e,t){if(Dg=-1,Pg=0,0!==(6&Bg))throw Error(a(327));var n=e.callbackNode;if(ms()&&e.callbackNode!==n)return null;var i=ut(e,e===Zg?xg:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=Is(e,i);else{t=i;var r=Bg;Bg|=2;var o=cs();for(Zg===e&&xg===t||(zg=null,Hg=Oe()+500,gs(e,t));;)try{Cs();break}catch(g){ss(e,g)}pa(),bg.current=o,Bg=r,null!==wg?t=0:(Zg=null,xg=0,t=Vg)}if(0!==t){if(2===t&&(0!==(r=dt(e))&&(i=r,t=ts(e,r))),1===t)throw n=Rg,gs(e,0),is(e,i),$g(e,Oe()),n;if(6===t)is(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!ii(a(),r))return!1}catch(l){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=Is(e,i))&&(0!==(o=dt(e))&&(i=o,t=ts(e,o))),1===t))throw n=Rg,gs(e,0),is(e,i),$g(e,Oe()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(a(345));case 2:case 5:ps(e,Ng,zg);break;case 3:if(is(e,i),(130023424&i)===i&&10<(t=Kg+500-Oe())){if(0!==ut(e,0))break;if(((r=e.suspendedLanes)&i)!==i){Og(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=$i(ps.bind(null,e,Ng,zg),t);break}ps(e,Ng,zg);break;case 4:if(is(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var l=31-at(i);o=1<<l,(l=t[l])>r&&(r=l),i&=~o}if(i=r,10<(i=(120>(i=Oe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*vg(i/1960))-i)){e.timeoutHandle=$i(ps.bind(null,e,Ng,zg),i);break}ps(e,Ng,zg);break;default:throw Error(a(329))}}}return $g(e,Oe()),e.callbackNode===n?es.bind(null,e):null}function ts(e,t){var n=Yg;return e.current.memoizedState.isDehydrated&&(gs(e,t).flags|=256),2!==(e=Is(e,t))&&(t=Ng,Ng=n,null!==t&&ns(t)),e}function ns(e){null===Ng?Ng=e:Ng.push.apply(Ng,e)}function is(e,t){for(t&=~Xg,t&=~kg,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),i=1<<n;e[n]=-1,t&=~i}}function rs(e){if(0!==(6&Bg))throw Error(a(327));ms();var t=ut(e,0);if(0===(1&t))return $g(e,Oe()),null;var n=Is(e,t);if(0!==e.tag&&2===n){var i=dt(e);0!==i&&(t=i,n=ts(e,i))}if(1===n)throw n=Rg,gs(e,0),is(e,t),$g(e,Oe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ps(e,Ng,zg),$g(e,Oe()),null}function as(e,t){var n=Bg;Bg|=1;try{return e(t)}finally{0===(Bg=n)&&(Hg=Oe()+500,Yr&&Hr())}}function os(e){null!==Tg&&0===Tg.tag&&0===(6&Bg)&&ms();var t=Bg;Bg|=1;var n=Gg.transition,i=mt;try{if(Gg.transition=null,mt=1,e)return e()}finally{mt=i,Gg.transition=n,0===(6&(Bg=t))&&Hr()}}function ls(){Sg=Wg.current,br(Wg)}function gs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,er(n)),null!==wg)for(n=wg.return;null!==n;){var i=n;switch(Qr(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Wr();break;case 3:eo(),br(Zr),br(Br),oo();break;case 5:no(i);break;case 4:eo();break;case 13:case 19:br(io);break;case 10:ma(i.type._context);break;case 22:case 23:ls()}n=n.return}if(Zg=e,wg=e=Ws(e.current,null),xg=Sg=t,Vg=0,Rg=null,Xg=kg=qg=0,Ng=Yg=null,null!==ya){for(t=0;t<ya.length;t++)if(null!==(i=(n=ya[t]).interleaved)){n.interleaved=null;var r=i.next,a=n.pending;if(null!==a){var o=a.next;a.next=r,i.next=o}n.pending=i}ya=null}return e}function ss(e,t){for(;;){var n=wg;try{if(pa(),lo.current=nl,Co){for(var i=co.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}Co=!1}if(so=0,Io=uo=co=null,ho=!1,Ao=0,yg.current=null,null===n||null===n.return){Vg=1,Rg=t,wg=null;break}e:{var o=e,l=n.return,g=n,s=t;if(t=xg,g.flags|=32768,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s,u=g,I=u.tag;if(0===(1&u.mode)&&(0===I||11===I||15===I)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var C=dl(l);if(null!==C){C.flags&=-257,Cl(C,l,g,0,t),1&C.mode&&Il(o,c,t),s=c;var h=(t=C).updateQueue;if(null===h){var A=new Set;A.add(s),t.updateQueue=A}else h.add(s);break e}if(0===(1&t)){Il(o,c,t),us();break e}s=Error(a(426))}else if(ea&&1&g.mode){var p=dl(l);if(null!==p){0===(65536&p.flags)&&(p.flags|=256),Cl(p,l,g,0,t),ca(ol(s,g));break e}}o=s=ol(s,g),4!==Vg&&(Vg=2),null===Yg?Yg=[o]:Yg.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,qa(o,cl(0,s,t));break e;case 1:g=s;var m=o.type,f=o.stateNode;if(0===(128&o.flags)&&("function"===typeof m.getDerivedStateFromError||null!==f&&"function"===typeof f.componentDidCatch&&(null===Lg||!Lg.has(f)))){o.flags|=65536,t&=-t,o.lanes|=t,qa(o,ul(o,g,t));break e}}o=o.return}while(null!==o)}As(n)}catch(v){t=v,wg===n&&null!==n&&(wg=n=n.return);continue}break}}function cs(){var e=bg.current;return bg.current=nl,null===e?nl:e}function us(){0!==Vg&&3!==Vg&&2!==Vg||(Vg=4),null===Zg||0===(268435455&qg)&&0===(268435455&kg)||is(Zg,xg)}function Is(e,t){var n=Bg;Bg|=2;var i=cs();for(Zg===e&&xg===t||(zg=null,gs(e,t));;)try{ds();break}catch(r){ss(e,r)}if(pa(),Bg=n,bg.current=i,null!==wg)throw Error(a(261));return Zg=null,xg=0,Vg}function ds(){for(;null!==wg;)hs(wg)}function Cs(){for(;null!==wg&&!De();)hs(wg)}function hs(e){var t=fg(e.alternate,e,Sg);e.memoizedProps=e.pendingProps,null===t?As(e):wg=t,yg.current=null}function As(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=_l(n,t,Sg)))return void(wg=n)}else{if(null!==(n=Tl(n,t)))return n.flags&=32767,void(wg=n);if(null===e)return Vg=6,void(wg=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(wg=t);wg=t=e}while(null!==t);0===Vg&&(Vg=5)}function ps(e,t,n){var i=mt,r=Gg.transition;try{Gg.transition=null,mt=1,function(e,t,n,i){do{ms()}while(null!==Tg);if(0!==(6&Bg))throw Error(a(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-at(n),a=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~a}}(e,o),e===Zg&&(wg=Zg=null,xg=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||_g||(_g=!0,Zs(et,(function(){return ms(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Gg.transition,Gg.transition=null;var l=mt;mt=1;var g=Bg;Bg|=4,yg.current=null,function(e,t){if(Oi=_t,si(e=gi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var l=0,g=-1,s=-1,c=0,u=0,I=e,d=null;t:for(;;){for(var C;I!==n||0!==r&&3!==I.nodeType||(g=l+r),I!==o||0!==i&&3!==I.nodeType||(s=l+i),3===I.nodeType&&(l+=I.nodeValue.length),null!==(C=I.firstChild);)d=I,I=C;for(;;){if(I===e)break t;if(d===n&&++c===r&&(g=l),d===o&&++u===i&&(s=l),null!==(C=I.nextSibling))break;d=(I=d).parentNode}I=C}n=-1===g||-1===s?null:{start:g,end:s}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qi={focusedElem:e,selectionRange:n},_t=!1,Dl=t;null!==Dl;)if(e=(t=Dl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Dl=e;else for(;null!==Dl;){t=Dl;try{var h=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==h){var A=h.memoizedProps,p=h.memoizedState,m=t.stateNode,f=m.getSnapshotBeforeUpdate(t.elementType===t.type?A:Ia(t.type,A),p);m.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(a(163))}}catch(b){vs(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Dl=e;break}Dl=t.return}h=Ql,Ql=!1}(e,n),Ig(n,e),ci(Qi),_t=!!Oi,Qi=Oi=null,e.current=n,Cg(n,e,r),Pe(),Bg=g,mt=l,Gg.transition=o}else e.current=n;if(_g&&(_g=!1,Tg=e,Eg=r),0===(o=e.pendingLanes)&&(Lg=null),function(e){if(rt&&"function"===typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),$g(e,Oe()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)i((r=t[n]).value,{componentStack:r.stack,digest:r.digest});if(Mg)throw Mg=!1,e=Fg,Fg=null,e;0!==(1&Eg)&&0!==e.tag&&ms(),0!==(1&(o=e.pendingLanes))?e===Ug?Jg++:(Jg=0,Ug=e):Jg=0,Hr()}(e,t,n,i)}finally{Gg.transition=r,mt=i}return null}function ms(){if(null!==Tg){var e=ft(Eg),t=Gg.transition,n=mt;try{if(Gg.transition=null,mt=16>e?16:e,null===Tg)var i=!1;else{if(e=Tg,Tg=null,Eg=0,0!==(6&Bg))throw Error(a(331));var r=Bg;for(Bg|=4,Dl=e.current;null!==Dl;){var o=Dl,l=o.child;if(0!==(16&Dl.flags)){var g=o.deletions;if(null!==g){for(var s=0;s<g.length;s++){var c=g[s];for(Dl=c;null!==Dl;){var u=Dl;switch(u.tag){case 0:case 11:case 15:jl(8,u,o)}var I=u.child;if(null!==I)I.return=u,Dl=I;else for(;null!==Dl;){var d=(u=Dl).sibling,C=u.return;if(tg(u),u===c){Dl=null;break}if(null!==d){d.return=C,Dl=d;break}Dl=C}}}var h=o.alternate;if(null!==h){var A=h.child;if(null!==A){h.child=null;do{var p=A.sibling;A.sibling=null,A=p}while(null!==A)}}Dl=o}}if(0!==(2064&o.subtreeFlags)&&null!==l)l.return=o,Dl=l;else e:for(;null!==Dl;){if(0!==(2048&(o=Dl).flags))switch(o.tag){case 0:case 11:case 15:jl(9,o,o.return)}var m=o.sibling;if(null!==m){m.return=o.return,Dl=m;break e}Dl=o.return}}var f=e.current;for(Dl=f;null!==Dl;){var v=(l=Dl).child;if(0!==(2064&l.subtreeFlags)&&null!==v)v.return=l,Dl=v;else e:for(l=f;null!==Dl;){if(0!==(2048&(g=Dl).flags))try{switch(g.tag){case 0:case 11:case 15:$l(9,g)}}catch(y){vs(g,g.return,y)}if(g===l){Dl=null;break e}var b=g.sibling;if(null!==b){b.return=g.return,Dl=b;break e}Dl=g.return}}if(Bg=r,Hr(),rt&&"function"===typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(it,e)}catch(y){}i=!0}return i}finally{mt=n,Gg.transition=t}}return!1}function fs(e,t,n){e=Va(e,t=cl(0,t=ol(n,t),1),1),t=Og(),null!==e&&(At(e,1,t),$g(e,t))}function vs(e,t,n){if(3===e.tag)fs(e,e,n);else for(;null!==t;){if(3===t.tag){fs(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Lg||!Lg.has(i))){t=Va(t,e=ul(t,e=ol(n,e),1),1),e=Og(),null!==t&&(At(t,1,e),$g(t,e));break}}t=t.return}}function bs(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=Og(),e.pingedLanes|=e.suspendedLanes&n,Zg===e&&(xg&n)===n&&(4===Vg||3===Vg&&(130023424&xg)===xg&&500>Oe()-Kg?gs(e,0):Xg|=n),$g(e,t)}function ys(e,t){0===t&&(0===(1&e.mode)?t=1:(t=st,0===(130023424&(st<<=1))&&(st=4194304)));var n=Og();null!==(e=Za(e,t))&&(At(e,t,n),$g(e,n))}function Gs(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ys(e,n)}function Bs(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(a(314))}null!==i&&i.delete(t),ys(e,n)}function Zs(e,t){return Je(e,t)}function ws(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xs(e,t,n,i){return new ws(e,t,n,i)}function Ss(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ws(e,t){var n=e.alternate;return null===n?((n=xs(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Vs(e,t,n,i,r,o){var l=2;if(i=e,"function"===typeof e)Ss(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case G:return Rs(n.children,r,o,t);case B:l=8,r|=8;break;case Z:return(e=xs(12,n,t,2|r)).elementType=Z,e.lanes=o,e;case W:return(e=xs(13,n,t,r)).elementType=W,e.lanes=o,e;case V:return(e=xs(19,n,t,r)).elementType=V,e.lanes=o,e;case k:return qs(n,r,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:l=10;break e;case x:l=9;break e;case S:l=11;break e;case R:l=14;break e;case q:l=16,i=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=xs(l,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Rs(e,t,n,i){return(e=xs(7,e,i,t)).lanes=n,e}function qs(e,t,n,i){return(e=xs(22,e,i,t)).elementType=k,e.lanes=n,e.stateNode={isHidden:!1},e}function ks(e,t,n){return(e=xs(6,e,null,t)).lanes=n,e}function Xs(e,t,n){return(t=xs(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ys(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ht(0),this.expirationTimes=ht(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ht(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Ns(e,t,n,i,r,a,o,l,g){return e=new Ys(e,t,n,l,g),1===t?(t=1,!0===a&&(t|=8)):t=0,a=xs(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xa(a),e}function Ks(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:y,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}function Hs(e){if(!e)return Gr;e:{if(Fe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Sr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Sr(n))return Rr(e,n,t)}return t}function zs(e,t,n,i,r,a,o,l,g){return(e=Ns(n,i,!0,e,0,a,0,l,g)).context=Hs(null),n=e.current,(a=Wa(i=Og(),r=Qg(n))).callback=void 0!==t&&null!==t?t:null,Va(n,a,r),e.current.lanes=r,At(e,r,i),$g(e,i),e}function Ms(e,t,n,i){var r=t.current,a=Og(),o=Qg(r);return n=Hs(n),null===t.context?t.context=n:t.pendingContext=n,(t=Wa(a,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Va(r,t,o))&&(jg(e,r,o,a),Ra(e,r,o)),o}function Fs(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ls(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function _s(e,t){Ls(e,t),(e=e.alternate)&&Ls(e,t)}fg=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Zr.current)Al=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Al=!1,function(e,t,n){switch(t.tag){case 3:wl(t),sa();break;case 5:to(t);break;case 1:Sr(t.type)&&qr(t);break;case 4:$a(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;yr(da,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(yr(io,1&io.current),t.flags|=128,null):0!==(n&t.child.childLanes)?kl(e,t,n):(yr(io,1&io.current),null!==(e=Ml(e,t,n))?e.sibling:null);yr(io,1&io.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Hl(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),yr(io,io.current),i)break;return null;case 22:case 23:return t.lanes=0,bl(e,t,n)}return Ml(e,t,n)}(e,t,n);Al=0!==(131072&e.flags)}else Al=!1,ea&&0!==(1048576&t.flags)&&Pr(t,Lr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;zl(e,t),e=t.pendingProps;var r=xr(t,Br.current);va(t,n),r=vo(null,t,i,e,r,n);var o=bo();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Sr(i)?(o=!0,qr(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,xa(t),r.updater=Ka,t.stateNode=r,r._reactInternals=t,Fa(t,i,e,n),t=Zl(null,t,i,!0,o,n)):(t.tag=0,ea&&o&&Or(t),pl(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(zl(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Ss(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===S)return 11;if(e===R)return 14}return 2}(i),e=Ia(i,e),r){case 0:t=Gl(null,t,i,e,n);break e;case 1:t=Bl(null,t,i,e,n);break e;case 11:t=ml(null,t,i,e,n);break e;case 14:t=fl(null,t,i,Ia(i.type,e),n);break e}throw Error(a(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Gl(e,t,i,r=t.elementType===i?r:Ia(i,r),n);case 1:return i=t.type,r=t.pendingProps,Bl(e,t,i,r=t.elementType===i?r:Ia(i,r),n);case 3:e:{if(wl(t),null===e)throw Error(a(387));i=t.pendingProps,r=(o=t.memoizedState).element,Sa(e,t),ka(t,i,null,n);var l=t.memoizedState;if(i=l.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=xl(e,t,i,n,r=ol(Error(a(423)),t));break e}if(i!==r){t=xl(e,t,i,n,r=ol(Error(a(424)),t));break e}for($r=ar(t.stateNode.containerInfo.firstChild),jr=t,ea=!0,ta=null,n=Ua(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(sa(),i===r){t=Ml(e,t,n);break e}pl(e,t,i,n)}t=t.child}return t;case 5:return to(t),null===e&&aa(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,l=r.children,ji(i,r)?l=null:null!==o&&ji(i,o)&&(t.flags|=32),yl(e,t),pl(e,t,l,n),t.child;case 6:return null===e&&aa(t),null;case 13:return kl(e,t,n);case 4:return $a(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Ja(t,null,i,n):pl(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,ml(e,t,i,r=t.elementType===i?r:Ia(i,r),n);case 7:return pl(e,t,t.pendingProps,n),t.child;case 8:case 12:return pl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,l=r.value,yr(da,i._currentValue),i._currentValue=l,null!==o)if(ii(o.value,l)){if(o.children===r.children&&!Zr.current){t=Ml(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var g=o.dependencies;if(null!==g){l=o.child;for(var s=g.firstContext;null!==s;){if(s.context===i){if(1===o.tag){(s=Wa(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?s.next=s:(s.next=u.next,u.next=s),c.pending=s}}o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),fa(o.return,n,t),g.lanes|=n;break}s=s.next}}else if(10===o.tag)l=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(l=o.return))throw Error(a(341));l.lanes|=n,null!==(g=l.alternate)&&(g.lanes|=n),fa(l,n,t),l=o.sibling}else l=o.child;if(null!==l)l.return=o;else for(l=o;null!==l;){if(l===t){l=null;break}if(null!==(o=l.sibling)){o.return=l.return,l=o;break}l=l.return}o=l}pl(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,va(t,n),i=i(r=ba(r)),t.flags|=1,pl(e,t,i,n),t.child;case 14:return r=Ia(i=t.type,t.pendingProps),fl(e,t,i,r=Ia(i.type,r),n);case 15:return vl(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Ia(i,r),zl(e,t),t.tag=1,Sr(i)?(e=!0,qr(t)):e=!1,va(t,n),za(t,i,r),Fa(t,i,r,n),Zl(null,t,i,!0,e,n);case 19:return Hl(e,t,n);case 22:return bl(e,t,n)}throw Error(a(156,t.tag))};var Ts="function"===typeof reportError?reportError:function(e){console.error(e)};function Es(e){this._internalRoot=e}function Js(e){this._internalRoot=e}function Us(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ds(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ps(){}function Os(e,t,n,i,r){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof r){var l=r;r=function(){var e=Fs(o);l.call(e)}}Ms(t,o,e,r)}else o=function(e,t,n,i,r){if(r){if("function"===typeof i){var a=i;i=function(){var e=Fs(o);a.call(e)}}var o=zs(t,i,e,0,null,!1,0,"",Ps);return e._reactRootContainer=o,e[cr]=o.current,Hi(8===e.nodeType?e.parentNode:e),os(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var l=i;i=function(){var e=Fs(g);l.call(e)}}var g=Ns(e,0,!1,null,0,!1,0,"",Ps);return e._reactRootContainer=g,e[cr]=g.current,Hi(8===e.nodeType?e.parentNode:e),os((function(){Ms(t,g,n,i)})),g}(n,t,e,r,i);return Fs(o)}Js.prototype.render=Es.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Ms(e,t,null,null)},Js.prototype.unmount=Es.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;os((function(){Ms(null,e,null,null)})),t[cr]=null}},Js.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<qt.length&&0!==t&&t<qt[n].priority;n++);qt.splice(n,0,e),0===n&&Nt(e)}},vt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ct(t.pendingLanes);0!==n&&(pt(t,1|n),$g(t,Oe()),0===(6&Bg)&&(Hg=Oe()+500,Hr()))}break;case 13:os((function(){var t=Za(e,1);if(null!==t){var n=Og();jg(t,e,1,n)}})),_s(e,1)}},bt=function(e){if(13===e.tag){var t=Za(e,134217728);if(null!==t)jg(t,e,134217728,Og());_s(e,134217728)}},yt=function(e){if(13===e.tag){var t=Qg(e),n=Za(e,t);if(null!==n)jg(n,e,t,Og());_s(e,t)}},Gt=function(){return mt},Bt=function(e,t){var n=mt;try{return mt=e,t()}finally{mt=n}},be=function(e,t,n){switch(t){case"input":if(j(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=pr(i);if(!r)throw Error(a(90));U(i),j(i,r)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},xe=as,Se=os;var Qs={usingClientEntryPoint:!1,Events:[hr,Ar,pr,Ze,we,as]},js={findFiberByHostInstance:Cr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},$s={bundleType:js.bundleType,version:js.version,rendererPackageName:js.rendererPackageName,rendererConfig:js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Te(e))?null:e.stateNode},findFiberByHostInstance:js.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{it=ec.inject($s),rt=ec}catch(tc){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qs,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Us(t))throw Error(a(200));return Ks(e,t,null,n)},t.createRoot=function(e,t){if(!Us(e))throw Error(a(299));var n=!1,i="",r=Ts;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Ns(e,1,!1,null,0,n,0,i,r),e[cr]=t.current,Hi(8===e.nodeType?e.parentNode:e),new Es(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Te(t))?null:e.stateNode},t.flushSync=function(e){return os(e)},t.hydrate=function(e,t,n){if(!Ds(t))throw Error(a(200));return Os(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Us(e))throw Error(a(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",l=Ts;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(l=n.onRecoverableError)),t=zs(t,null,e,1,null!=n?n:null,r,0,o,l),e[cr]=t.current,Hi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Js(t)},t.render=function(e,t,n){if(!Ds(t))throw Error(a(200));return Os(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ds(e))throw Error(a(40));return!!e._reactRootContainer&&(os((function(){Os(null,null,e,!1,(function(){e._reactRootContainer=null,e[cr]=null}))})),!0)},t.unstable_batchedUpdates=as,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Ds(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Os(e,t,n,!1,i)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var i=n(4164);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},3688:function(e,t,n){"use strict";function i(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function r(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function a(e,t){try{var n=this.props,i=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,i)}finally{this.props=n,this.state=i}}function o(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof e.getDerivedStateFromProps&&"function"!==typeof t.getSnapshotBeforeUpdate)return e;var n=null,o=null,l=null;if("function"===typeof t.componentWillMount?n="componentWillMount":"function"===typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof t.componentWillReceiveProps?o="componentWillReceiveProps":"function"===typeof t.UNSAFE_componentWillReceiveProps&&(o="UNSAFE_componentWillReceiveProps"),"function"===typeof t.componentWillUpdate?l="componentWillUpdate":"function"===typeof t.UNSAFE_componentWillUpdate&&(l="UNSAFE_componentWillUpdate"),null!==n||null!==o||null!==l){var g=e.displayName||e.name,s="function"===typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+g+" uses "+s+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==o?"\n  "+o:"")+(null!==l?"\n  "+l:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof e.getDerivedStateFromProps&&(t.componentWillMount=i,t.componentWillReceiveProps=r),"function"===typeof t.getSnapshotBeforeUpdate){if("function"!==typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=a;var c=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var i=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;c.call(this,e,t,i)}}return e}n.r(t),n.d(t,{polyfill:function(){return o}}),i.__suppressDeprecationWarning=!0,r.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0},2240:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyOpenClassName=t.portalClassName=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(2791),o=C(a),l=C(n(4164)),g=C(n(2007)),s=C(n(4334)),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(5858)),u=n(3663),I=C(u),d=n(3688);function C(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var p=t.portalClassName="ReactModalPortal",m=t.bodyOpenClassName="ReactModal__Body--open",f=u.canUseDOM&&void 0!==l.default.createPortal,v=function(e){return document.createElement(e)},b=function(){return f?l.default.createPortal:l.default.unstable_renderSubtreeIntoContainer};function y(e){return e()}var G=function(e){function t(){var e,n,r;h(this,t);for(var a=arguments.length,g=Array(a),c=0;c<a;c++)g[c]=arguments[c];return n=r=A(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(g))),r.removePortal=function(){!f&&l.default.unmountComponentAtNode(r.node);var e=y(r.props.parentSelector);e&&e.contains(r.node)?e.removeChild(r.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},r.portalRef=function(e){r.portal=e},r.renderPortal=function(e){var n=b()(r,o.default.createElement(s.default,i({defaultStyles:t.defaultStyles},e)),r.node);r.portalRef(n)},A(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidMount",value:function(){u.canUseDOM&&(f||(this.node=v("div")),this.node.className=this.props.portalClassName,y(this.props.parentSelector).appendChild(this.node),!f&&this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(e){return{prevParent:y(e.parentSelector),nextParent:y(this.props.parentSelector)}}},{key:"componentDidUpdate",value:function(e,t,n){if(u.canUseDOM){var i=this.props,r=i.isOpen,a=i.portalClassName;e.portalClassName!==a&&(this.node.className=a);var o=n.prevParent,l=n.nextParent;l!==o&&(o.removeChild(this.node),l.appendChild(this.node)),(e.isOpen||r)&&!f&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(u.canUseDOM&&this.node&&this.portal){var e=this.portal.state,t=Date.now(),n=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);n?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,n-t)):this.removePortal()}}},{key:"render",value:function(){return u.canUseDOM&&f?(!this.node&&f&&(this.node=v("div")),b()(o.default.createElement(s.default,i({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(e){c.setElement(e)}}]),t}(a.Component);G.propTypes={isOpen:g.default.bool.isRequired,style:g.default.shape({content:g.default.object,overlay:g.default.object}),portalClassName:g.default.string,bodyOpenClassName:g.default.string,htmlOpenClassName:g.default.string,className:g.default.oneOfType([g.default.string,g.default.shape({base:g.default.string.isRequired,afterOpen:g.default.string.isRequired,beforeClose:g.default.string.isRequired})]),overlayClassName:g.default.oneOfType([g.default.string,g.default.shape({base:g.default.string.isRequired,afterOpen:g.default.string.isRequired,beforeClose:g.default.string.isRequired})]),appElement:g.default.oneOfType([g.default.instanceOf(I.default),g.default.instanceOf(u.SafeHTMLCollection),g.default.instanceOf(u.SafeNodeList),g.default.arrayOf(g.default.instanceOf(I.default))]),onAfterOpen:g.default.func,onRequestClose:g.default.func,closeTimeoutMS:g.default.number,ariaHideApp:g.default.bool,shouldFocusAfterRender:g.default.bool,shouldCloseOnOverlayClick:g.default.bool,shouldReturnFocusAfterClose:g.default.bool,preventScroll:g.default.bool,parentSelector:g.default.func,aria:g.default.object,data:g.default.object,role:g.default.string,contentLabel:g.default.string,shouldCloseOnEsc:g.default.bool,overlayRef:g.default.func,contentRef:g.default.func,id:g.default.string,overlayElement:g.default.func,contentElement:g.default.func},G.defaultProps={isOpen:!1,portalClassName:p,bodyOpenClassName:m,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(e,t){return o.default.createElement("div",e,t)},contentElement:function(e,t){return o.default.createElement("div",e,t)}},G.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,d.polyfill)(G),t.default=G},4334:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(2791),l=A(n(2007)),g=h(n(8844)),s=A(n(870)),c=h(n(5858)),u=h(n(4942)),I=n(3663),d=A(I),C=A(n(8484));function h(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function A(e){return e&&e.__esModule?e:{default:e}}n(5670);var p={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},m=0,f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setOverlayRef=function(e){n.overlay=e,n.props.overlayRef&&n.props.overlayRef(e)},n.setContentRef=function(e){n.content=e,n.props.contentRef&&n.props.contentRef(e)},n.afterClose=function(){var e=n.props,t=e.appElement,i=e.ariaHideApp,r=e.htmlOpenClassName,a=e.bodyOpenClassName;a&&u.remove(document.body,a),r&&u.remove(document.getElementsByTagName("html")[0],r),i&&m>0&&0===(m-=1)&&c.show(t),n.props.shouldFocusAfterRender&&(n.props.shouldReturnFocusAfterClose?(g.returnFocus(n.props.preventScroll),g.teardownScopedFocus()):g.popWithoutFocus()),n.props.onAfterClose&&n.props.onAfterClose(),C.default.deregister(n)},n.open=function(){n.beforeOpen(),n.state.afterOpen&&n.state.beforeClose?(clearTimeout(n.closeTimer),n.setState({beforeClose:!1})):(n.props.shouldFocusAfterRender&&(g.setupScopedFocus(n.node),g.markForFocusLater()),n.setState({isOpen:!0},(function(){n.openAnimationFrame=requestAnimationFrame((function(){n.setState({afterOpen:!0}),n.props.isOpen&&n.props.onAfterOpen&&n.props.onAfterOpen({overlayEl:n.overlay,contentEl:n.content})}))})))},n.close=function(){n.props.closeTimeoutMS>0?n.closeWithTimeout():n.closeWithoutTimeout()},n.focusContent=function(){return n.content&&!n.contentHasFocus()&&n.content.focus({preventScroll:!0})},n.closeWithTimeout=function(){var e=Date.now()+n.props.closeTimeoutMS;n.setState({beforeClose:!0,closesAt:e},(function(){n.closeTimer=setTimeout(n.closeWithoutTimeout,n.state.closesAt-Date.now())}))},n.closeWithoutTimeout=function(){n.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},n.afterClose)},n.handleKeyDown=function(e){9===e.keyCode&&(0,s.default)(n.content,e),n.props.shouldCloseOnEsc&&27===e.keyCode&&(e.stopPropagation(),n.requestClose(e))},n.handleOverlayOnClick=function(e){null===n.shouldClose&&(n.shouldClose=!0),n.shouldClose&&n.props.shouldCloseOnOverlayClick&&(n.ownerHandlesClose()?n.requestClose(e):n.focusContent()),n.shouldClose=null},n.handleContentOnMouseUp=function(){n.shouldClose=!1},n.handleOverlayOnMouseDown=function(e){n.props.shouldCloseOnOverlayClick||e.target!=n.overlay||e.preventDefault()},n.handleContentOnClick=function(){n.shouldClose=!1},n.handleContentOnMouseDown=function(){n.shouldClose=!1},n.requestClose=function(e){return n.ownerHandlesClose()&&n.props.onRequestClose(e)},n.ownerHandlesClose=function(){return n.props.onRequestClose},n.shouldBeClosed=function(){return!n.state.isOpen&&!n.state.beforeClose},n.contentHasFocus=function(){return document.activeElement===n.content||n.content.contains(document.activeElement)},n.buildClassName=function(e,t){var i="object"===("undefined"===typeof t?"undefined":r(t))?t:{base:p[e],afterOpen:p[e]+"--after-open",beforeClose:p[e]+"--before-close"},a=i.base;return n.state.afterOpen&&(a=a+" "+i.afterOpen),n.state.beforeClose&&(a=a+" "+i.beforeClose),"string"===typeof t&&t?a+" "+t:a},n.attributesFromObject=function(e,t){return Object.keys(t).reduce((function(n,i){return n[e+"-"+i]=t[i],n}),{})},n.state={afterOpen:!1,beforeClose:!1},n.shouldClose=null,n.moveFromContentToOverlay=null,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(e,t){this.props.isOpen&&!e.isOpen?this.open():!this.props.isOpen&&e.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!t.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var e=this.props,t=e.appElement,n=e.ariaHideApp,i=e.htmlOpenClassName,r=e.bodyOpenClassName;r&&u.add(document.body,r),i&&u.add(document.getElementsByTagName("html")[0],i),n&&(m+=1,c.hide(t)),C.default.register(this)}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.className,r=e.overlayClassName,a=e.defaultStyles,o=e.children,l=n?{}:a.content,g=r?{}:a.overlay;if(this.shouldBeClosed())return null;var s={ref:this.setOverlayRef,className:this.buildClassName("overlay",r),style:i({},g,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},c=i({id:t,ref:this.setContentRef,style:i({},l,this.props.style.content),className:this.buildClassName("content",n),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",i({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),u=this.props.contentElement(c,o);return this.props.overlayElement(s,u)}}]),t}(o.Component);f.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},f.propTypes={isOpen:l.default.bool.isRequired,defaultStyles:l.default.shape({content:l.default.object,overlay:l.default.object}),style:l.default.shape({content:l.default.object,overlay:l.default.object}),className:l.default.oneOfType([l.default.string,l.default.object]),overlayClassName:l.default.oneOfType([l.default.string,l.default.object]),bodyOpenClassName:l.default.string,htmlOpenClassName:l.default.string,ariaHideApp:l.default.bool,appElement:l.default.oneOfType([l.default.instanceOf(d.default),l.default.instanceOf(I.SafeHTMLCollection),l.default.instanceOf(I.SafeNodeList),l.default.arrayOf(l.default.instanceOf(d.default))]),onAfterOpen:l.default.func,onAfterClose:l.default.func,onRequestClose:l.default.func,closeTimeoutMS:l.default.number,shouldFocusAfterRender:l.default.bool,shouldCloseOnOverlayClick:l.default.bool,shouldReturnFocusAfterClose:l.default.bool,preventScroll:l.default.bool,role:l.default.string,contentLabel:l.default.string,aria:l.default.object,data:l.default.object,children:l.default.node,shouldCloseOnEsc:l.default.bool,overlayRef:l.default.func,contentRef:l.default.func,id:l.default.string,overlayElement:l.default.func,contentElement:l.default.func,testId:l.default.string},t.default=f,e.exports=t.default},5858:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){l&&(l.removeAttribute?l.removeAttribute("aria-hidden"):null!=l.length?l.forEach((function(e){return e.removeAttribute("aria-hidden")})):document.querySelectorAll(l).forEach((function(e){return e.removeAttribute("aria-hidden")})));l=null},t.log=function(){0},t.assertNodeList=g,t.setElement=function(e){var t=e;if("string"===typeof t&&o.canUseDOM){var n=document.querySelectorAll(t);g(n,t),t=n}return l=t||l},t.validateElement=s,t.hide=function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=s(e)[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.setAttribute("aria-hidden","true")}}catch(o){n=!0,i=o}finally{try{!t&&a.return&&a.return()}finally{if(n)throw i}}},t.show=function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=s(e)[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.removeAttribute("aria-hidden")}}catch(o){n=!0,i=o}finally{try{!t&&a.return&&a.return()}finally{if(n)throw i}}},t.documentNotReadyOrSSRTesting=function(){l=null};var i,r=n(2391),a=(i=r)&&i.__esModule?i:{default:i},o=n(3663);var l=null;function g(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function s(e){var t=e||l;return t?Array.isArray(t)||t instanceof HTMLCollection||t instanceof NodeList?t:[t]:((0,a.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}},5670:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){for(var e=[o,l],t=0;t<e.length;t++){var n=e[t];n&&(n.parentNode&&n.parentNode.removeChild(n))}o=l=null,g=[]},t.log=function(){console.log("bodyTrap ----------"),console.log(g.length);for(var e=[o,l],t=0;t<e.length;t++){var n=e[t]||{};console.log(n.nodeName,n.className,n.id)}console.log("edn bodyTrap ----------")};var i,r=n(8484),a=(i=r)&&i.__esModule?i:{default:i};var o=void 0,l=void 0,g=[];function s(){0!==g.length&&g[g.length-1].focusContent()}a.default.subscribe((function(e,t){o||l||((o=document.createElement("div")).setAttribute("data-react-modal-body-trap",""),o.style.position="absolute",o.style.opacity="0",o.setAttribute("tabindex","0"),o.addEventListener("focus",s),(l=o.cloneNode()).addEventListener("focus",s)),(g=t).length>0?(document.body.firstChild!==o&&document.body.insertBefore(o,document.body.firstChild),document.body.lastChild!==l&&document.body.appendChild(l)):(o.parentElement&&o.parentElement.removeChild(o),l.parentElement&&l.parentElement.removeChild(l))}))},4942:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){var e=document.getElementsByTagName("html")[0];for(var t in n)r(e,n[t]);var a=document.body;for(var o in i)r(a,i[o]);n={},i={}},t.log=function(){0};var n={},i={};function r(e,t){e.classList.remove(t)}t.add=function(e,t){return r=e.classList,a="html"==e.nodeName.toLowerCase()?n:i,void t.split(" ").forEach((function(e){!function(e,t){e[t]||(e[t]=0),e[t]+=1}(a,e),r.add(e)}));var r,a},t.remove=function(e,t){return r=e.classList,a="html"==e.nodeName.toLowerCase()?n:i,void t.split(" ").forEach((function(e){!function(e,t){e[t]&&(e[t]-=1)}(a,e),0===a[e]&&r.remove(e)}));var r,a}},8844:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetState=function(){o=[]},t.log=function(){0},t.handleBlur=s,t.handleFocus=c,t.markForFocusLater=function(){o.push(document.activeElement)},t.returnFocus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=null;try{return void(0!==o.length&&(t=o.pop()).focus({preventScroll:e}))}catch(n){console.warn(["You tried to return focus to",t,"but it is not in the DOM anymore"].join(" "))}},t.popWithoutFocus=function(){o.length>0&&o.pop()},t.setupScopedFocus=function(e){l=e,window.addEventListener?(window.addEventListener("blur",s,!1),document.addEventListener("focus",c,!0)):(window.attachEvent("onBlur",s),document.attachEvent("onFocus",c))},t.teardownScopedFocus=function(){l=null,window.addEventListener?(window.removeEventListener("blur",s),document.removeEventListener("focus",c)):(window.detachEvent("onBlur",s),document.detachEvent("onFocus",c))};var i,r=n(9750),a=(i=r)&&i.__esModule?i:{default:i};var o=[],l=null,g=!1;function s(){g=!0}function c(){if(g){if(g=!1,!l)return;setTimeout((function(){l.contains(document.activeElement)||((0,a.default)(l)[0]||l).focus()}),0)}}},8484:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.log=function(){console.log("portalOpenInstances ----------"),console.log(i.openInstances.length),i.openInstances.forEach((function(e){return console.log(e)})),console.log("end portalOpenInstances ----------")},t.resetState=function(){i=new n};var n=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.register=function(e){-1===t.openInstances.indexOf(e)&&(t.openInstances.push(e),t.emit("register"))},this.deregister=function(e){var n=t.openInstances.indexOf(e);-1!==n&&(t.openInstances.splice(n,1),t.emit("deregister"))},this.subscribe=function(e){t.subscribers.push(e)},this.emit=function(e){t.subscribers.forEach((function(n){return n(e,t.openInstances.slice())}))},this.openInstances=[],this.subscribers=[]},i=new n;t.default=i},3663:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canUseDOM=t.SafeNodeList=t.SafeHTMLCollection=void 0;var i,r=n(2618);var a=((i=r)&&i.__esModule?i:{default:i}).default,o=a.canUseDOM?window.HTMLElement:{};t.SafeHTMLCollection=a.canUseDOM?window.HTMLCollection:{},t.SafeNodeList=a.canUseDOM?window.NodeList:{},t.canUseDOM=a.canUseDOM;t.default=o},870:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,a.default)(e);if(!n.length)return void t.preventDefault();var i=void 0,r=t.shiftKey,l=n[0],g=n[n.length-1],s=o();if(e===s){if(!r)return;i=g}g!==s||r||(i=l);l===s&&r&&(i=g);if(i)return t.preventDefault(),void i.focus();var c=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null==c||"Chrome"==c[1]||null!=/\biPod\b|\biPad\b/g.exec(navigator.userAgent))return;var u=n.indexOf(s);u>-1&&(u+=r?-1:1);if("undefined"===typeof(i=n[u]))return t.preventDefault(),void(i=r?g:l).focus();t.preventDefault(),i.focus()};var i,r=n(9750),a=(i=r)&&i.__esModule?i:{default:i};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return e.activeElement.shadowRoot?o(e.activeElement.shadowRoot):e.activeElement}e.exports=t.default},9750:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){var n=[].slice.call(t.querySelectorAll("*"),0).reduce((function(t,n){return t.concat(n.shadowRoot?e(n.shadowRoot):[n])}),[]);return n.filter(a)};var n=/input|select|textarea|button|object|iframe/;function i(e){var t=e.offsetWidth<=0&&e.offsetHeight<=0;if(t&&!e.innerHTML)return!0;try{var n=window.getComputedStyle(e);return t?"visible"!==n.getPropertyValue("overflow")||e.scrollWidth<=0&&e.scrollHeight<=0:"none"==n.getPropertyValue("display")}catch(i){return console.warn("Failed to inspect element style"),!1}}function r(e,t){var r=e.nodeName.toLowerCase();return(n.test(r)&&!e.disabled||"a"===r&&e.href||t)&&function(e){for(var t=e,n=e.getRootNode&&e.getRootNode();t&&t!==document.body;){if(n&&t===n&&(t=n.host.parentNode),i(t))return!1;t=t.parentNode}return!0}(e)}function a(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var n=isNaN(t);return(n||t>=0)&&r(e,!n)}e.exports=t.default},7948:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2240),a=(i=r)&&i.__esModule?i:{default:i};t.default=a.default,e.exports=t.default},4976:function(e,t){"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},1070:function(e,t,n){e.exports=function(e){var t={},i=n(2791),r=n(3100),a=Object.assign;function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,g=Symbol.for("react.element"),s=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),C=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),f=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var v=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var b=Symbol.iterator;function y(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=b&&e[b]||e["@@iterator"])?e:null}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case c:return"Fragment";case s:return"Portal";case I:return"Profiler";case u:return"StrictMode";case A:return"Suspense";case p:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case d:return(e._context.displayName||"Context")+".Provider";case h:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case m:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case f:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===u?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function Z(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function w(e){if(Z(e)!==e)throw Error(o(188))}function x(e){var t=e.alternate;if(!t){if(null===(t=Z(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return w(r),e;if(a===i)return w(r),t;a=a.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=a;else{for(var l=!1,g=r.child;g;){if(g===n){l=!0,n=r,i=a;break}if(g===i){l=!0,i=r,n=a;break}g=g.sibling}if(!l){for(g=a.child;g;){if(g===n){l=!0,n=a,i=r;break}if(g===i){l=!0,i=a,n=r;break}g=g.sibling}if(!l)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}function S(e){return null!==(e=x(e))?W(e):null}function W(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=W(e);if(null!==t)return t;e=e.sibling}return null}function V(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=V(e);if(null!==t)return t}e=e.sibling}return null}var R,q=Array.isArray,k=e.getPublicInstance,X=e.getRootHostContext,Y=e.getChildHostContext,N=e.prepareForCommit,K=e.resetAfterCommit,H=e.createInstance,z=e.appendInitialChild,M=e.finalizeInitialChildren,F=e.prepareUpdate,L=e.shouldSetTextContent,_=e.createTextInstance,T=e.scheduleTimeout,E=e.cancelTimeout,J=e.noTimeout,U=e.isPrimaryRenderer,D=e.supportsMutation,P=e.supportsPersistence,O=e.supportsHydration,Q=e.getInstanceFromNode,j=e.preparePortalMount,$=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,ie=e.supportsTestSelectors,re=e.findFiberRoot,ae=e.getBoundingRect,oe=e.getTextContent,le=e.isHiddenSubtree,ge=e.matchAccessibilityRole,se=e.setFocusIfFocusable,ce=e.setupIntersectionObserver,ue=e.appendChild,Ie=e.appendChildToContainer,de=e.commitTextUpdate,Ce=e.commitMount,he=e.commitUpdate,Ae=e.insertBefore,pe=e.insertInContainerBefore,me=e.removeChild,fe=e.removeChildFromContainer,ve=e.resetTextContent,be=e.hideInstance,ye=e.hideTextInstance,Ge=e.unhideInstance,Be=e.unhideTextInstance,Ze=e.clearContainer,we=e.cloneInstance,xe=e.createContainerChildSet,Se=e.appendChildToContainerChildSet,We=e.finalizeContainerChildren,Ve=e.replaceContainerChildren,Re=e.cloneHiddenInstance,qe=e.cloneHiddenTextInstance,ke=e.canHydrateInstance,Xe=e.canHydrateTextInstance,Ye=e.canHydrateSuspenseInstance,Ne=e.isSuspenseInstancePending,Ke=e.isSuspenseInstanceFallback,He=e.registerSuspenseInstanceRetry,ze=e.getNextHydratableSibling,Me=e.getFirstHydratableChild,Fe=e.getFirstHydratableChildWithinContainer,Le=e.getFirstHydratableChildWithinSuspenseInstance,_e=e.hydrateInstance,Te=e.hydrateTextInstance,Ee=e.hydrateSuspenseInstance,Je=e.getNextHydratableInstanceAfterSuspenseInstance,Ue=e.commitHydratedContainer,De=e.commitHydratedSuspenseInstance,Pe=e.clearSuspenseBoundary,Oe=e.clearSuspenseBoundaryFromContainer,Qe=e.shouldDeleteUnhydratedTailInstances,je=e.didNotMatchHydratedContainerTextInstance,$e=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var i=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){i=s}e.call(t.prototype)}else{try{throw Error()}catch(s){i=s}e()}}catch(s){if(s&&i&&"string"===typeof s.stack){for(var r=s.stack.split("\n"),a=i.stack.split("\n"),o=r.length-1,l=a.length-1;1<=o&&0<=l&&r[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==a[l]){if(1!==o||1!==l)do{if(o--,0>--l||r[o]!==a[l]){var g="\n"+r[o].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}}while(1<=o&&0<=l);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var it=Object.prototype.hasOwnProperty,rt=[],at=-1;function ot(e){return{current:e}}function lt(e){0>at||(e.current=rt[at],rt[at]=null,at--)}function gt(e,t){at++,rt[at]=e.current,e.current=t}var st={},ct=ot(st),ut=ot(!1),It=st;function dt(e,t){var n=e.type.contextTypes;if(!n)return st;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ct(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ht(){lt(ut),lt(ct)}function At(e,t,n){if(ct.current!==st)throw Error(o(168));gt(ct,t),gt(ut,n)}function pt(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(o(108,B(e)||"Unknown",r));return a({},n,i)}function mt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||st,It=ct.current,gt(ct,e),gt(ut,ut.current),!0}function ft(e,t,n){var i=e.stateNode;if(!i)throw Error(o(169));n?(e=pt(e,t,It),i.__reactInternalMemoizedMergedChildContext=e,lt(ut),lt(ct),gt(ct,e)):lt(ut),gt(ut,n)}var vt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(bt(e)/yt|0)|0},bt=Math.log,yt=Math.LN2;var Gt=64,Bt=4194304;function Zt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var l=o&~r;0!==l?i=Zt(l):0!==(a&=o)&&(i=Zt(a))}else 0!==(o=n&~r)?i=Zt(o):0!==a&&(i=Zt(a));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(a=t&-t)||16===r&&0!==(4194240&a)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-vt(t)),i|=e[n],t&=~r;return i}function xt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function St(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Wt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-vt(t)]=n}function Rt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-vt(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var qt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Xt=r.unstable_scheduleCallback,Yt=r.unstable_cancelCallback,Nt=r.unstable_shouldYield,Kt=r.unstable_requestPaint,Ht=r.unstable_now,zt=r.unstable_ImmediatePriority,Mt=r.unstable_UserBlockingPriority,Ft=r.unstable_NormalPriority,Lt=r.unstable_IdlePriority,_t=null,Tt=null;var Et="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Jt=null,Ut=!1,Dt=!1;function Pt(e){null===Jt?Jt=[e]:Jt.push(e)}function Ot(){if(!Dt&&null!==Jt){Dt=!0;var e=0,t=qt;try{var n=Jt;for(qt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Jt=null,Ut=!1}catch(r){throw null!==Jt&&(Jt=Jt.slice(e+1)),Xt(zt,Ot),r}finally{qt=t,Dt=!1}}return null}var Qt=l.ReactCurrentBatchConfig;function jt(e,t){if(Et(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!it.call(t,r)||!Et(e[r],t[r]))return!1}return!0}function $t(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return e=nt(e.type,!1);case 11:return e=nt(e.type.render,!1);case 1:return e=nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=ot(null),nn=null,rn=null,an=null;function on(){an=rn=nn=null}function ln(e,t,n){U?(gt(tn,t._currentValue),t._currentValue=n):(gt(tn,t._currentValue2),t._currentValue2=n)}function gn(e){var t=tn.current;lt(tn),U?e._currentValue=t:e._currentValue2=t}function sn(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function cn(e,t){nn=e,an=rn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Nr=!0),e.firstContext=null)}function un(e){var t=U?e._currentValue:e._currentValue2;if(an!==e)if(e={context:e,memoizedValue:t,next:null},null===rn){if(null===nn)throw Error(o(308));rn=e,nn.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var In=null,dn=!1;function Cn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function An(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==Da&&0!==(1&e.mode)&&0===(2&Ua)?(null===(e=n.interleaved)?(t.next=t,null===In?In=[n]:In.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function mn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Rt(e,n)}}function fn(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?r=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?r=a=t:a=a.next=t}else r=a=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function vn(e,t,n,i){var r=e.updateQueue;dn=!1;var o=r.firstBaseUpdate,l=r.lastBaseUpdate,g=r.shared.pending;if(null!==g){r.shared.pending=null;var s=g,c=s.next;s.next=null,null===l?o=c:l.next=c,l=s;var u=e.alternate;null!==u&&((g=(u=u.updateQueue).lastBaseUpdate)!==l&&(null===g?u.firstBaseUpdate=c:g.next=c,u.lastBaseUpdate=s))}if(null!==o){var I=r.baseState;for(l=0,u=c=s=null,g=o;;){var d=g.lane,C=g.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:C,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var h=e,A=g;switch(d=t,C=n,A.tag){case 1:if("function"===typeof(h=A.payload)){I=h.call(C,I,d);break e}I=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(d="function"===typeof(h=A.payload)?h.call(C,I,d):h)||void 0===d)break e;I=a({},I,d);break e;case 2:dn=!0}}null!==g.callback&&0!==g.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[g]:d.push(g))}else C={eventTime:C,lane:d,tag:g.tag,payload:g.payload,callback:g.callback,next:null},null===u?(c=u=C,s=I):u=u.next=C,l|=d;if(null===(g=g.next)){if(null===(g=r.shared.pending))break;g=(d=g).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(s=I),r.baseState=s,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{l|=r.lane,r=r.next}while(r!==t)}else null===o&&(r.shared.lanes=0);to|=l,e.lanes=l,e.memoizedState=I}}function bn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var yn=(new i.Component).refs;function Gn(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bn={isMounted:function(e){return!!(e=e._reactInternals)&&Z(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=bo(),r=yo(e),a=An(i,r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),pn(e,a),null!==(t=Go(e,r,i))&&mn(t,e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=bo(),r=yo(e),a=An(i,r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),pn(e,a),null!==(t=Go(e,r,i))&&mn(t,e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=bo(),i=yo(e),r=An(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),pn(e,r),null!==(t=Go(e,i,n))&&mn(t,e,i)}};function Zn(e,t,n,i,r,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!jt(n,i)||!jt(r,a))}function wn(e,t,n){var i=!1,r=st,a=t.contextType;return"object"===typeof a&&null!==a?a=un(a):(r=Ct(t)?It:ct.current,a=(i=null!==(i=t.contextTypes)&&void 0!==i)?dt(e,r):st),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bn,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function xn(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Bn.enqueueReplaceState(t,t.state,null)}function Sn(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=yn,Cn(e);var a=t.contextType;"object"===typeof a&&null!==a?r.context=un(a):(a=Ct(t)?It:ct.current,r.context=dt(e,a)),r.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Gn(e,t,a,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Bn.enqueueReplaceState(r,r.state,null),vn(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}var Wn=[],Vn=0,Rn=null,qn=0,kn=[],Xn=0,Yn=null,Nn=1,Kn="";function Hn(e,t){Wn[Vn++]=qn,Wn[Vn++]=Rn,Rn=e,qn=t}function zn(e,t,n){kn[Xn++]=Nn,kn[Xn++]=Kn,kn[Xn++]=Yn,Yn=e;var i=Nn;e=Kn;var r=32-vt(i)-1;i&=~(1<<r),n+=1;var a=32-vt(t)+r;if(30<a){var o=r-r%5;a=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Nn=1<<32-vt(t)+r|n<<r|i,Kn=a+e}else Nn=1<<a|n<<r|i,Kn=e}function Mn(e){null!==e.return&&(Hn(e,1),zn(e,1,0))}function Fn(e){for(;e===Rn;)Rn=Wn[--Vn],Wn[Vn]=null,qn=Wn[--Vn],Wn[Vn]=null;for(;e===Yn;)Yn=kn[--Xn],kn[Xn]=null,Kn=kn[--Xn],kn[Xn]=null,Nn=kn[--Xn],kn[Xn]=null}var Ln=null,_n=null,Tn=!1,En=!1,Jn=null;function Un(e,t){var n=jo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Dn(e,t){switch(e.tag){case 5:return null!==(t=ke(t,e.type,e.pendingProps))&&(e.stateNode=t,Ln=e,_n=Me(t),!0);case 6:return null!==(t=Xe(t,e.pendingProps))&&(e.stateNode=t,Ln=e,_n=null,!0);case 13:if(null!==(t=Ye(t))){var n=null!==Yn?{id:Nn,overflow:Kn}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=jo(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ln=e,_n=null,!0}return!1;default:return!1}}function Pn(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function On(e){if(Tn){var t=_n;if(t){var n=t;if(!Dn(e,t)){if(Pn(e))throw Error(o(418));t=ze(n);var i=Ln;t&&Dn(e,t)?Un(i,n):(e.flags=-4097&e.flags|2,Tn=!1,Ln=e)}}else{if(Pn(e))throw Error(o(418));e.flags=-4097&e.flags|2,Tn=!1,Ln=e}}}function Qn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ln=e}function jn(e){if(!O||e!==Ln)return!1;if(!Tn)return Qn(e),Tn=!0,!1;if(3!==e.tag&&(5!==e.tag||Qe(e.type)&&!L(e.type,e.memoizedProps))){var t=_n;if(t){if(Pn(e)){for(e=_n;e;)e=ze(e);throw Error(o(418))}for(;t;)Un(e,t),t=ze(t)}}if(Qn(e),13===e.tag){if(!O)throw Error(o(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));_n=Je(e)}else _n=Ln?ze(e.stateNode):null;return!0}function $n(){O&&(_n=Ln=null,En=Tn=!1)}function ei(e){null===Jn?Jn=[e]:Jn.push(e)}function ti(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,e));var r=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;t===yn&&(t=r.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function ni(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ii(e){return(0,e._init)(e._payload)}function ri(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=el(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,i){return null===t||6!==t.tag?((t=rl(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function I(e,t,n,i){var a=n.type;return a===c?C(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===f&&ii(a)===t.type)?((i=r(t,n.props)).ref=ti(e,t,n),i.return=e,i):((i=tl(n.type,n.key,n.props,null,e.mode,i)).ref=ti(e,t,n),i.return=e,i)}function d(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=al(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function C(e,t,n,i,a){return null===t||7!==t.tag?((t=nl(n,e.mode,i,a)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=rl(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case g:return(n=tl(t.type,t.key,t.props,null,e.mode,n)).ref=ti(e,null,t),n.return=e,n;case s:return(t=al(t,e.mode,n)).return=e,t;case f:return h(e,(0,t._init)(t._payload),n)}if(q(t)||y(t))return(t=nl(t,e.mode,n,null)).return=e,t;ni(e,t)}return null}function A(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:u(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case g:return n.key===r?I(e,t,n,i):null;case s:return n.key===r?d(e,t,n,i):null;case f:return A(e,t,(r=n._init)(n._payload),i)}if(q(n)||y(n))return null!==r?null:C(e,t,n,i,null);ni(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return u(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case g:return I(t,e=e.get(null===i.key?n:i.key)||null,i,r);case s:return d(t,e=e.get(null===i.key?n:i.key)||null,i,r);case f:return p(e,t,n,(0,i._init)(i._payload),r)}if(q(i)||y(i))return C(t,e=e.get(n)||null,i,r,null);ni(t,i)}return null}function m(r,o,l,g){for(var s=null,c=null,u=o,I=o=0,d=null;null!==u&&I<l.length;I++){u.index>I?(d=u,u=null):d=u.sibling;var C=A(r,u,l[I],g);if(null===C){null===u&&(u=d);break}e&&u&&null===C.alternate&&t(r,u),o=a(C,o,I),null===c?s=C:c.sibling=C,c=C,u=d}if(I===l.length)return n(r,u),Tn&&Hn(r,I),s;if(null===u){for(;I<l.length;I++)null!==(u=h(r,l[I],g))&&(o=a(u,o,I),null===c?s=u:c.sibling=u,c=u);return Tn&&Hn(r,I),s}for(u=i(r,u);I<l.length;I++)null!==(d=p(u,r,I,l[I],g))&&(e&&null!==d.alternate&&u.delete(null===d.key?I:d.key),o=a(d,o,I),null===c?s=d:c.sibling=d,c=d);return e&&u.forEach((function(e){return t(r,e)})),Tn&&Hn(r,I),s}function v(r,l,g,s){var c=y(g);if("function"!==typeof c)throw Error(o(150));if(null==(g=c.call(g)))throw Error(o(151));for(var u=c=null,I=l,d=l=0,C=null,m=g.next();null!==I&&!m.done;d++,m=g.next()){I.index>d?(C=I,I=null):C=I.sibling;var f=A(r,I,m.value,s);if(null===f){null===I&&(I=C);break}e&&I&&null===f.alternate&&t(r,I),l=a(f,l,d),null===u?c=f:u.sibling=f,u=f,I=C}if(m.done)return n(r,I),Tn&&Hn(r,d),c;if(null===I){for(;!m.done;d++,m=g.next())null!==(m=h(r,m.value,s))&&(l=a(m,l,d),null===u?c=m:u.sibling=m,u=m);return Tn&&Hn(r,d),c}for(I=i(r,I);!m.done;d++,m=g.next())null!==(m=p(I,r,d,m.value,s))&&(e&&null!==m.alternate&&I.delete(null===m.key?d:m.key),l=a(m,l,d),null===u?c=m:u.sibling=m,u=m);return e&&I.forEach((function(e){return t(r,e)})),Tn&&Hn(r,d),c}return function e(i,a,o,u){if("object"===typeof o&&null!==o&&o.type===c&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case g:e:{for(var I=o.key,d=a;null!==d;){if(d.key===I){if((I=o.type)===c){if(7===d.tag){n(i,d.sibling),(a=r(d,o.props.children)).return=i,i=a;break e}}else if(d.elementType===I||"object"===typeof I&&null!==I&&I.$$typeof===f&&ii(I)===d.type){n(i,d.sibling),(a=r(d,o.props)).ref=ti(i,d,o),a.return=i,i=a;break e}n(i,d);break}t(i,d),d=d.sibling}o.type===c?((a=nl(o.props.children,i.mode,u,o.key)).return=i,i=a):((u=tl(o.type,o.key,o.props,null,i.mode,u)).ref=ti(i,a,o),u.return=i,i=u)}return l(i);case s:e:{for(d=o.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(i,a.sibling),(a=r(a,o.children||[])).return=i,i=a;break e}n(i,a);break}t(i,a),a=a.sibling}(a=al(o,i.mode,u)).return=i,i=a}return l(i);case f:return e(i,a,(d=o._init)(o._payload),u)}if(q(o))return m(i,a,o,u);if(y(o))return v(i,a,o,u);ni(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(i,a.sibling),(a=r(a,o)).return=i,i=a):(n(i,a),(a=rl(o,i.mode,u)).return=i,i=a),l(i)):n(i,a)}}var ai=ri(!0),oi=ri(!1),li={},gi=ot(li),si=ot(li),ci=ot(li);function ui(e){if(e===li)throw Error(o(174));return e}function Ii(e,t){gt(ci,t),gt(si,e),gt(gi,li),e=X(t),lt(gi),gt(gi,e)}function di(){lt(gi),lt(si),lt(ci)}function Ci(e){var t=ui(ci.current),n=ui(gi.current);n!==(t=Y(n,e.type,t))&&(gt(si,e),gt(gi,t))}function hi(e){si.current===e&&(lt(gi),lt(si))}var Ai=ot(0);function pi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Ne(n)||Ke(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var mi=[];function fi(){for(var e=0;e<mi.length;e++){var t=mi[e];U?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}mi.length=0}var vi=l.ReactCurrentDispatcher,bi=l.ReactCurrentBatchConfig,yi=0,Gi=null,Bi=null,Zi=null,wi=!1,xi=!1,Si=0,Wi=0;function Vi(){throw Error(o(321))}function Ri(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Et(e[n],t[n]))return!1;return!0}function qi(e,t,n,i,r,a){if(yi=a,Gi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vi.current=null===e||null===e.memoizedState?Cr:hr,e=n(i,r),xi){a=0;do{if(xi=!1,Si=0,25<=a)throw Error(o(301));a+=1,Zi=Bi=null,t.updateQueue=null,vi.current=Ar,e=n(i,r)}while(xi)}if(vi.current=dr,t=null!==Bi&&null!==Bi.next,yi=0,Zi=Bi=Gi=null,wi=!1,t)throw Error(o(300));return e}function ki(){var e=0!==Si;return Si=0,e}function Xi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Zi?Gi.memoizedState=Zi=e:Zi=Zi.next=e,Zi}function Yi(){if(null===Bi){var e=Gi.alternate;e=null!==e?e.memoizedState:null}else e=Bi.next;var t=null===Zi?Gi.memoizedState:Zi.next;if(null!==t)Zi=t,Bi=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Bi=e).memoizedState,baseState:Bi.baseState,baseQueue:Bi.baseQueue,queue:Bi.queue,next:null},null===Zi?Gi.memoizedState=Zi=e:Zi=Zi.next=e}return Zi}function Ni(e,t){return"function"===typeof t?t(e):t}function Ki(e){var t=Yi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=Bi,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var l=r.next;r.next=a.next,a.next=l}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var g=l=null,s=null,c=a;do{var u=c.lane;if((yi&u)===u)null!==s&&(s=s.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:e(i,c.action);else{var I={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===s?(g=s=I,l=i):s=s.next=I,Gi.lanes|=u,to|=u}c=c.next}while(null!==c&&c!==a);null===s?l=i:s.next=g,Et(i,t.memoizedState)||(Nr=!0),t.memoizedState=i,t.baseState=l,t.baseQueue=s,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,Gi.lanes|=a,to|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Hi(e){var t=Yi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var l=r=r.next;do{a=e(a,l.action),l=l.next}while(l!==r);Et(a,t.memoizedState)||(Nr=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function zi(){}function Mi(e,t){var n=Gi,i=Yi(),r=t(),a=!Et(i.memoizedState,r);if(a&&(i.memoizedState=r,Nr=!0),i=i.queue,Qi(_i.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==Zi&&1&Zi.memoizedState.tag){if(n.flags|=2048,Ji(9,Li.bind(null,n,i,r,t),void 0,null),null===Da)throw Error(o(349));0!==(30&yi)||Fi(n,t,r)}return r}function Fi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Gi.updateQueue)?(t={lastEffect:null,stores:null},Gi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Li(e,t,n,i){t.value=n,t.getSnapshot=i,Ti(t)&&Go(e,1,-1)}function _i(e,t,n){return n((function(){Ti(t)&&Go(e,1,-1)}))}function Ti(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Et(e,n)}catch(i){return!0}}function Ei(e){var t=Xi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:e},t.queue=e,e=e.dispatch=gr.bind(null,Gi,e),[t.memoizedState,e]}function Ji(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=Gi.updateQueue)?(t={lastEffect:null,stores:null},Gi.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ui(){return Yi().memoizedState}function Di(e,t,n,i){var r=Xi();Gi.flags|=e,r.memoizedState=Ji(1|t,n,void 0,void 0===i?null:i)}function Pi(e,t,n,i){var r=Yi();i=void 0===i?null:i;var a=void 0;if(null!==Bi){var o=Bi.memoizedState;if(a=o.destroy,null!==i&&Ri(i,o.deps))return void(r.memoizedState=Ji(t,n,a,i))}Gi.flags|=e,r.memoizedState=Ji(1|t,n,a,i)}function Oi(e,t){return Di(8390656,8,e,t)}function Qi(e,t){return Pi(2048,8,e,t)}function ji(e,t){return Pi(4,2,e,t)}function $i(e,t){return Pi(4,4,e,t)}function er(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function tr(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Pi(4,4,er.bind(null,t,e),n)}function nr(){}function ir(e,t){var n=Yi();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Ri(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function rr(e,t){var n=Yi();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Ri(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function ar(e,t){var n=qt;qt=0!==n&&4>n?n:4,e(!0);var i=bi.transition;bi.transition={};try{e(!1),t()}finally{qt=n,bi.transition=i}}function or(){return Yi().memoizedState}function lr(e,t,n){var i=yo(e);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},sr(e)?cr(t,n):(ur(e,t,n),null!==(e=Go(e,i,n=bo()))&&Ir(e,t,i))}function gr(e,t,n){var i=yo(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(sr(e))cr(t,r);else{ur(e,t,r);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,l=a(o,n);if(r.hasEagerState=!0,r.eagerState=l,Et(l,o))return}catch(g){}null!==(e=Go(e,i,n=bo()))&&Ir(e,t,i)}}function sr(e){var t=e.alternate;return e===Gi||null!==t&&t===Gi}function cr(e,t){xi=wi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ur(e,t,n){null!==Da&&0!==(1&e.mode)&&0===(2&Ua)?(null===(e=t.interleaved)?(n.next=n,null===In?In=[t]:In.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function Ir(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Rt(e,n)}}var dr={readContext:un,useCallback:Vi,useContext:Vi,useEffect:Vi,useImperativeHandle:Vi,useInsertionEffect:Vi,useLayoutEffect:Vi,useMemo:Vi,useReducer:Vi,useRef:Vi,useState:Vi,useDebugValue:Vi,useDeferredValue:Vi,useTransition:Vi,useMutableSource:Vi,useSyncExternalStore:Vi,useId:Vi,unstable_isNewReconciler:!1},Cr={readContext:un,useCallback:function(e,t){return Xi().memoizedState=[e,void 0===t?null:t],e},useContext:un,useEffect:Oi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Di(4194308,4,er.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Di(4194308,4,e,t)},useInsertionEffect:function(e,t){return Di(4,2,e,t)},useMemo:function(e,t){var n=Xi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Xi();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=lr.bind(null,Gi,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Xi().memoizedState=e},useState:Ei,useDebugValue:nr,useDeferredValue:function(e){var t=Ei(e),n=t[0],i=t[1];return Oi((function(){var t=bi.transition;bi.transition={};try{i(e)}finally{bi.transition=t}}),[e]),n},useTransition:function(){var e=Ei(!1),t=e[0];return e=ar.bind(null,e[1]),Xi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Gi,r=Xi();if(Tn){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Da)throw Error(o(349));0!==(30&yi)||Fi(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,Oi(_i.bind(null,i,a,e),[e]),i.flags|=2048,Ji(9,Li.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=Xi(),t=Da.identifierPrefix;if(Tn){var n=Kn;t=":"+t+"R"+(n=(Nn&~(1<<32-vt(Nn)-1)).toString(32)+n),0<(n=Si++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Wi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hr={readContext:un,useCallback:ir,useContext:un,useEffect:Qi,useImperativeHandle:tr,useInsertionEffect:ji,useLayoutEffect:$i,useMemo:rr,useReducer:Ki,useRef:Ui,useState:function(){return Ki(Ni)},useDebugValue:nr,useDeferredValue:function(e){var t=Ki(Ni),n=t[0],i=t[1];return Qi((function(){var t=bi.transition;bi.transition={};try{i(e)}finally{bi.transition=t}}),[e]),n},useTransition:function(){return[Ki(Ni)[0],Yi().memoizedState]},useMutableSource:zi,useSyncExternalStore:Mi,useId:or,unstable_isNewReconciler:!1},Ar={readContext:un,useCallback:ir,useContext:un,useEffect:Qi,useImperativeHandle:tr,useInsertionEffect:ji,useLayoutEffect:$i,useMemo:rr,useReducer:Hi,useRef:Ui,useState:function(){return Hi(Ni)},useDebugValue:nr,useDeferredValue:function(e){var t=Hi(Ni),n=t[0],i=t[1];return Qi((function(){var t=bi.transition;bi.transition={};try{i(e)}finally{bi.transition=t}}),[e]),n},useTransition:function(){return[Hi(Ni)[0],Yi().memoizedState]},useMutableSource:zi,useSyncExternalStore:Mi,useId:or,unstable_isNewReconciler:!1};function pr(e,t){try{var n="",i=t;do{n+=$t(i),i=i.return}while(i);var r=n}catch(a){r="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:r}}function mr(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fr,vr,br,yr,Gr="function"===typeof WeakMap?WeakMap:Map;function Br(e,t,n){(n=An(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){co||(co=!0,uo=i),mr(0,t)},n}function Zr(e,t,n){(n=An(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){mr(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){mr(0,t),"function"!==typeof i&&(null===Io?Io=new Set([this]):Io.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function wr(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new Gr;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Jo.bind(null,e,t,n),t.then(e,e))}function xr(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Sr(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=An(-1,1)).tag=2,pn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}function Wr(e){e.flags|=4}function Vr(e,t){if(null!==e&&e.child===t.child)return!0;if(0!==(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!==(12854&e.flags)||0!==(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(D)fr=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)z(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},vr=function(){},br=function(e,t,n,i,r){if((e=e.memoizedProps)!==i){var a=t.stateNode,o=ui(gi.current);n=F(a,n,e,i,r,o),(t.updateQueue=n)&&Wr(t)}},yr=function(e,t,n,i){n!==i&&Wr(t)};else if(P){fr=function(e,t,n,i){for(var r=t.child;null!==r;){if(5===r.tag){var a=r.stateNode;n&&i&&(a=Re(a,r.type,r.memoizedProps,r)),z(e,a)}else if(6===r.tag)a=r.stateNode,n&&i&&(a=qe(a,r.memoizedProps,r)),z(e,a);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(a=r.child)&&(a.return=r),fr(e,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};var Rr=function e(t,n,i,r){for(var a=n.child;null!==a;){if(5===a.tag){var o=a.stateNode;i&&r&&(o=Re(o,a.type,a.memoizedProps,a)),Se(t,o)}else if(6===a.tag)o=a.stateNode,i&&r&&(o=qe(o,a.memoizedProps,a)),Se(t,o);else if(4!==a.tag)if(22===a.tag&&null!==a.memoizedState)null!==(o=a.child)&&(o.return=a),e(t,a,!0,!0);else if(null!==a.child){a.child.return=a,a=a.child;continue}if(a===n)break;for(;null===a.sibling;){if(null===a.return||a.return===n)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};vr=function(e,t){var n=t.stateNode;if(!Vr(e,t)){e=n.containerInfo;var i=xe(e);Rr(i,t,!1,!1),n.pendingChildren=i,Wr(t),We(e,i)}},br=function(e,t,n,i,r){var a=e.stateNode,o=e.memoizedProps;if((e=Vr(e,t))&&o===i)t.stateNode=a;else{var l=t.stateNode,g=ui(gi.current),s=null;o!==i&&(s=F(l,n,o,i,r,g)),e&&null===s?t.stateNode=a:(a=we(a,s,n,o,i,t,e,l),M(a,n,i,r,g)&&Wr(t),t.stateNode=a,e?Wr(t):fr(a,t,!1,!1))}},yr=function(e,t,n,i){n!==i?(e=ui(ci.current),n=ui(gi.current),t.stateNode=_(i,e,n,t),Wr(t)):t.stateNode=e.stateNode}}else vr=function(){},br=function(){},yr=function(){};function qr(e,t){if(!Tn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function kr(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Xr(e,t,n){var i=t.pendingProps;switch(Fn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kr(t),null;case 1:case 17:return Ct(t.type)&&ht(),kr(t),null;case 3:return i=t.stateNode,di(),lt(ut),lt(ct),fi(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(jn(t)?Wr(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Jn&&(So(Jn),Jn=null))),vr(e,t),kr(t),null;case 5:hi(t),n=ui(ci.current);var r=t.type;if(null!==e&&null!=t.stateNode)br(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(o(166));return kr(t),null}if(e=ui(gi.current),jn(t)){if(!O)throw Error(o(175));e=_e(t.stateNode,t.type,t.memoizedProps,n,e,t,!En),t.updateQueue=e,null!==e&&Wr(t)}else{var a=H(r,i,n,e,t);fr(a,t,!1,!1),t.stateNode=a,M(a,r,i,n,e)&&Wr(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return kr(t),null;case 6:if(e&&null!=t.stateNode)yr(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(o(166));if(e=ui(ci.current),n=ui(gi.current),jn(t)){if(!O)throw Error(o(176));if(e=t.stateNode,i=t.memoizedProps,(n=Te(e,i,t,!En))&&null!==(r=Ln))switch(a=0!==(1&r.mode),r.tag){case 3:je(r.stateNode.containerInfo,e,i,a);break;case 5:$e(r.type,r.memoizedProps,r.stateNode,e,i,a)}n&&Wr(t)}else t.stateNode=_(i,e,n,t)}return kr(t),null;case 13:if(lt(Ai),i=t.memoizedState,Tn&&null!==_n&&0!==(1&t.mode)&&0===(128&t.flags)){for(e=_n;e;)e=ze(e);return $n(),t.flags|=98560,t}if(null!==i&&null!==i.dehydrated){if(i=jn(t),null===e){if(!i)throw Error(o(318));if(!O)throw Error(o(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(o(317));Ee(e,t)}else $n(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return kr(t),null}return null!==Jn&&(So(Jn),Jn=null),0!==(128&t.flags)?(t.lanes=n,t):(i=null!==i,n=!1,null===e?jn(t):n=null!==e.memoizedState,i&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Ai.current)?0===$a&&($a=3):No())),null!==t.updateQueue&&(t.flags|=4),kr(t),null);case 4:return di(),vr(e,t),null===e&&j(t.stateNode.containerInfo),kr(t),null;case 10:return gn(t.type._context),kr(t),null;case 19:if(lt(Ai),null===(r=t.memoizedState))return kr(t),null;if(i=0!==(128&t.flags),null===(a=r.rendering))if(i)qr(r,!1);else{if(0!==$a||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=pi(e))){for(t.flags|=128,qr(r,!1),null!==(e=a.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,i=t.child;null!==i;)r=e,(n=i).flags&=14680066,null===(a=n.alternate)?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext}),i=i.sibling;return gt(Ai,1&Ai.current|2),t.child}e=e.sibling}null!==r.tail&&Ht()>lo&&(t.flags|=128,i=!0,qr(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=pi(a))){if(t.flags|=128,i=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),qr(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!Tn)return kr(t),null}else 2*Ht()-r.renderingStartTime>lo&&1073741824!==n&&(t.flags|=128,i=!0,qr(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=r.last)?e.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Ht(),t.sibling=null,e=Ai.current,gt(Ai,i?1&e|2:1&e),t):(kr(t),null);case 22:case 23:return qo(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Qa)&&(kr(t),D&&6&t.subtreeFlags&&(t.flags|=8192)):kr(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}var Yr=l.ReactCurrentOwner,Nr=!1;function Kr(e,t,n,i){t.child=null===e?oi(t,null,n,i):ai(t,e.child,n,i)}function Hr(e,t,n,i,r){n=n.render;var a=t.ref;return cn(t,r),i=qi(e,t,n,i,a,r),n=ki(),null===e||Nr?(Tn&&n&&Mn(t),t.flags|=1,Kr(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,ra(e,t,r))}function zr(e,t,n,i,r){if(null===e){var a=n.type;return"function"!==typeof a||$o(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=tl(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Mr(e,t,a,i,r))}if(a=e.child,0===(e.lanes&r)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:jt)(o,i)&&e.ref===t.ref)return ra(e,t,r)}return t.flags|=1,(e=el(a,i)).ref=t.ref,e.return=t,t.child=e}function Mr(e,t,n,i,r){if(null!==e&&jt(e.memoizedProps,i)&&e.ref===t.ref){if(Nr=!1,0===(e.lanes&r))return t.lanes=e.lanes,ra(e,t,r);0!==(131072&e.flags)&&(Nr=!0)}return _r(e,t,n,i,r)}function Fr(e,t,n){var i=t.pendingProps,r=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},gt(ja,Qa),Qa|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,gt(ja,Qa),Qa|=e,null;t.memoizedState={baseLanes:0,cachePool:null},i=null!==a?a.baseLanes:n,gt(ja,Qa),Qa|=i}else null!==a?(i=a.baseLanes|n,t.memoizedState=null):i=n,gt(ja,Qa),Qa|=i;return Kr(e,t,r,n),t.child}function Lr(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _r(e,t,n,i,r){var a=Ct(n)?It:ct.current;return a=dt(t,a),cn(t,r),n=qi(e,t,n,i,a,r),i=ki(),null===e||Nr?(Tn&&i&&Mn(t),t.flags|=1,Kr(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,ra(e,t,r))}function Tr(e,t,n,i,r){if(Ct(n)){var a=!0;mt(t)}else a=!1;if(cn(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),wn(t,n,i),Sn(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,l=t.memoizedProps;o.props=l;var g=o.context,s=n.contextType;"object"===typeof s&&null!==s?s=un(s):s=dt(t,s=Ct(n)?It:ct.current);var c=n.getDerivedStateFromProps,u="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(l!==i||g!==s)&&xn(t,o,i,s),dn=!1;var I=t.memoizedState;o.state=I,vn(t,i,o,r),g=t.memoizedState,l!==i||I!==g||ut.current||dn?("function"===typeof c&&(Gn(t,n,c,i),g=t.memoizedState),(l=dn||Zn(t,n,l,i,I,g,s))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=g),o.props=i,o.state=g,o.context=s,i=l):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,hn(e,t),l=t.memoizedProps,s=t.type===t.elementType?l:en(t.type,l),o.props=s,u=t.pendingProps,I=o.context,"object"===typeof(g=n.contextType)&&null!==g?g=un(g):g=dt(t,g=Ct(n)?It:ct.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(l!==u||I!==g)&&xn(t,o,i,g),dn=!1,I=t.memoizedState,o.state=I,vn(t,i,o,r);var C=t.memoizedState;l!==u||I!==C||ut.current||dn?("function"===typeof d&&(Gn(t,n,d,i),C=t.memoizedState),(s=dn||Zn(t,n,s,i,I,C,g)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,C,g),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,C,g)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||l===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||l===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=C),o.props=i,o.state=C,o.context=g,i=s):("function"!==typeof o.componentDidUpdate||l===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||l===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),i=!1)}return Er(e,t,n,i,a,r)}function Er(e,t,n,i,r,a){Lr(e,t);var o=0!==(128&t.flags);if(!i&&!o)return r&&ft(t,n,!1),ra(e,t,a);i=t.stateNode,Yr.current=t;var l=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=ai(t,e.child,null,a),t.child=ai(t,null,l,a)):Kr(e,t,l,a),t.memoizedState=i.state,r&&ft(t,n,!0),t.child}function Jr(e){var t=e.stateNode;t.pendingContext?At(0,t.pendingContext,t.pendingContext!==t.context):t.context&&At(0,t.context,!1),Ii(e,t.containerInfo)}function Ur(e,t,n,i,r){return $n(),ei(r),t.flags|=256,Kr(e,t,n,i),t.child}var Dr={dehydrated:null,treeContext:null,retryLane:0};function Pr(e){return{baseLanes:e,cachePool:null}}function Or(e,t,n){var i,r=t.pendingProps,a=Ai.current,l=!1,g=0!==(128&t.flags);if((i=g)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),gt(Ai,1&a),null===e)return On(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:Ke(e)?t.lanes=8:t.lanes=1073741824,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},0===(1&r)&&null!==l?(l.childLanes=0,l.pendingProps=a):l=il(a,r,0,null),e=nl(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Pr(n),t.memoizedState=Dr,e):Qr(t,a));if(null!==(a=e.memoizedState)){if(null!==(i=a.dehydrated)){if(g)return 256&t.flags?(t.flags&=-257,ea(e,t,n,Error(o(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(l=r.fallback,a=t.mode,r=il({mode:"visible",children:r.children},a,0,null),(l=nl(l,a,n,null)).flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,0!==(1&t.mode)&&ai(t,e.child,null,n),t.child.memoizedState=Pr(n),t.memoizedState=Dr,l);if(0===(1&t.mode))t=ea(e,t,n,null);else if(Ke(i))t=ea(e,t,n,Error(o(419)));else if(r=0!==(n&e.childLanes),Nr||r){if(null!==(r=Da)){switch(n&-n){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}0!==(r=0!==(l&(r.suspendedLanes|n))?0:l)&&r!==a.retryLane&&(a.retryLane=r,Go(e,r,-1))}No(),t=ea(e,t,n,Error(o(421)))}else Ne(i)?(t.flags|=128,t.child=e.child,t=Do.bind(null,e),He(i,t),t=null):(n=a.treeContext,O&&(_n=Le(i),Ln=t,Tn=!0,Jn=null,En=!1,null!==n&&(kn[Xn++]=Nn,kn[Xn++]=Kn,kn[Xn++]=Yn,Nn=n.id,Kn=n.overflow,Yn=t)),(t=Qr(t,t.pendingProps.children)).flags|=4096);return t}return l?(r=$r(e,t,r.children,r.fallback,n),l=t.child,a=e.child.memoizedState,l.memoizedState=null===a?Pr(n):{baseLanes:a.baseLanes|n,cachePool:null},l.childLanes=e.childLanes&~n,t.memoizedState=Dr,r):(n=jr(e,t,r.children,n),t.memoizedState=null,n)}return l?(r=$r(e,t,r.children,r.fallback,n),l=t.child,a=e.child.memoizedState,l.memoizedState=null===a?Pr(n):{baseLanes:a.baseLanes|n,cachePool:null},l.childLanes=e.childLanes&~n,t.memoizedState=Dr,r):(n=jr(e,t,r.children,n),t.memoizedState=null,n)}function Qr(e,t){return(t=il({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function jr(e,t,n,i){var r=e.child;return e=r.sibling,n=el(r,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n}function $r(e,t,n,i,r){var a=t.mode,o=(e=e.child).sibling,l={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=l,t.deletions=null):(n=el(e,l)).subtreeFlags=14680064&e.subtreeFlags,null!==o?i=el(o,i):(i=nl(i,a,r,null)).flags|=2,i.return=t,n.return=t,n.sibling=i,t.child=n,i}function ea(e,t,n,i){return null!==i&&ei(i),ai(t,e.child,null,n),(e=Qr(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ta(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),sn(e.return,t,n)}function na(e,t,n,i,r){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function ia(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(Kr(e,t,i.children,n),0!==(2&(i=Ai.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ta(e,n,t);else if(19===e.tag)ta(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(gt(Ai,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===pi(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),na(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===pi(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}na(t,!0,n,null,a);break;case"together":na(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ra(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),to|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=el(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=el(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function aa(e,t){switch(Fn(t),t.tag){case 1:return Ct(t.type)&&ht(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return di(),lt(ut),lt(ct),fi(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return hi(t),null;case 13:if(lt(Ai),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));$n()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return lt(Ai),null;case 4:return di(),null;case 10:return gn(t.type._context),null;case 22:case 23:return qo(),null;default:return null}}var oa=!1,la=!1,ga="function"===typeof WeakSet?WeakSet:Set,sa=null;function ca(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Eo(e,t,i)}else n.current=null}function ua(e,t,n){try{n()}catch(i){Eo(e,t,i)}}var Ia=!1;function da(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,void 0!==a&&ua(t,n,a)}r=r.next}while(r!==i)}}function Ca(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function ha(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=k(n);else e=n;"function"===typeof t?t(e):t.current=e}}function Aa(e,t,n){if(Tt&&"function"===typeof Tt.onCommitFiberUnmount)try{Tt.onCommitFiberUnmount(_t,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e=e.next;do{var r=i,a=r.destroy;r=r.tag,void 0!==a&&(0!==(2&r)||0!==(4&r))&&ua(t,n,a),i=i.next}while(i!==e)}break;case 1:if(ca(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Eo(t,n,o)}break;case 5:ca(t,n);break;case 4:D?Ba(e,t,n):P&&P&&(t=t.stateNode.containerInfo,n=xe(t),Ve(t,n))}}function pa(e,t,n){for(var i=t;;)if(Aa(e,i,n),null===i.child||D&&4===i.tag){if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else i.child.return=i,i=i.child}function ma(e){var t=e.alternate;null!==t&&(e.alternate=null,ma(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ee(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fa(e){return 5===e.tag||3===e.tag||4===e.tag}function va(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||fa(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ba(e){if(D){e:{for(var t=e.return;null!==t;){if(fa(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(ve(t),n.flags&=-33),Ga(e,n=va(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,ya(e,n=va(e),t);break;default:throw Error(o(161))}}}function ya(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?pe(n,e,t):Ie(n,e);else if(4!==i&&null!==(e=e.child))for(ya(e,t,n),e=e.sibling;null!==e;)ya(e,t,n),e=e.sibling}function Ga(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?Ae(n,e,t):ue(n,e);else if(4!==i&&null!==(e=e.child))for(Ga(e,t,n),e=e.sibling;null!==e;)Ga(e,t,n),e=e.sibling}function Ba(e,t,n){for(var i,r,a=t,l=!1;;){if(!l){l=a.return;e:for(;;){if(null===l)throw Error(o(160));switch(i=l.stateNode,l.tag){case 5:r=!1;break e;case 3:case 4:i=i.containerInfo,r=!0;break e}l=l.return}l=!0}if(5===a.tag||6===a.tag)pa(e,a,n),r?fe(i,a.stateNode):me(i,a.stateNode);else if(18===a.tag)r?Oe(i,a.stateNode):Pe(i,a.stateNode);else if(4===a.tag){if(null!==a.child){i=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(Aa(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(l=!1)}a.sibling.return=a.return,a=a.sibling}}function Za(e,t){if(D){switch(t.tag){case 0:case 11:case 14:case 15:return da(3,t,t.return),Ca(3,t),void da(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps;e=null!==e?e.memoizedProps:i;var r=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&he(n,a,r,e,i,t)}return;case 6:if(null===t.stateNode)throw Error(o(162));return n=t.memoizedProps,void de(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(O&&null!==e&&e.memoizedState.isDehydrated&&Ue(t.stateNode.containerInfo));case 13:case 19:return void wa(t)}throw Error(o(163))}switch(t.tag){case 0:case 11:case 14:case 15:return da(3,t,t.return),Ca(3,t),void da(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void wa(t);case 3:O&&null!==e&&e.memoizedState.isDehydrated&&Ue(t.stateNode.containerInfo)}e:if(P){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Ve(t.containerInfo,t.pendingChildren);break e}throw Error(o(163))}}function wa(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ga),t.forEach((function(t){var i=Po.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function xa(e,t,n){sa=e,Sa(e,t,n)}function Sa(e,t,n){for(var i=0!==(1&e.mode);null!==sa;){var r=sa,a=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||oa;if(!o){var l=r.alternate,g=null!==l&&null!==l.memoizedState||la;l=oa;var s=la;if(oa=o,(la=g)&&!s)for(sa=r;null!==sa;)g=(o=sa).child,22===o.tag&&null!==o.memoizedState?Ra(r):null!==g?(g.return=o,sa=g):Ra(r);for(;null!==a;)sa=a,Sa(a,t,n),a=a.sibling;sa=r,oa=l,la=s}Wa(e)}else 0!==(8772&r.subtreeFlags)&&null!==a?(a.return=r,sa=a):Wa(e)}}function Wa(e){for(;null!==sa;){var t=sa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:la||Ca(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!la)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&bn(t,a,i);break;case 3:var l=t.updateQueue;if(null!==l){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=k(t.child.stateNode);break;case 1:n=t.child.stateNode}bn(t,l,n)}break;case 5:var g=t.stateNode;null===n&&4&t.flags&&Ce(g,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(O&&null===t.memoizedState){var s=t.alternate;if(null!==s){var c=s.memoizedState;if(null!==c){var u=c.dehydrated;null!==u&&De(u)}}}break;default:throw Error(o(163))}la||512&t.flags&&ha(t)}catch(I){Eo(t,t.return,I)}}if(t===e){sa=null;break}if(null!==(n=t.sibling)){n.return=t.return,sa=n;break}sa=t.return}}function Va(e){for(;null!==sa;){var t=sa;if(t===e){sa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,sa=n;break}sa=t.return}}function Ra(e){for(;null!==sa;){var t=sa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ca(4,t)}catch(g){Eo(t,n,g)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(g){Eo(t,r,g)}}var a=t.return;try{ha(t)}catch(g){Eo(t,a,g)}break;case 5:var o=t.return;try{ha(t)}catch(g){Eo(t,o,g)}}}catch(g){Eo(t,t.return,g)}if(t===e){sa=null;break}var l=t.sibling;if(null!==l){l.return=t.return,sa=l;break}sa=t.return}}var qa=0,ka=1,Xa=2,Ya=3,Na=4;if("function"===typeof Symbol&&Symbol.for){var Ka=Symbol.for;qa=Ka("selector.component"),ka=Ka("selector.has_pseudo_class"),Xa=Ka("selector.role"),Ya=Ka("selector.test_id"),Na=Ka("selector.text")}function Ha(e){var t=Q(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(o(364));return t}if(null===(e=re(e)))throw Error(o(362));return e.stateNode.current}function za(e,t){switch(t.$$typeof){case qa:if(e.type===t.value)return!0;break;case ka:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var i=e[n++],r=e[n++],a=t[r];if(5!==i.tag||!le(i)){for(;null!=a&&za(i,a);)a=t[++r];if(r===t.length){t=!0;break e}for(i=i.child;null!==i;)e.push(i,r),i=i.sibling}}t=!1}return t;case Xa:if(5===e.tag&&ge(e.stateNode,t.value))return!0;break;case Na:if((5===e.tag||6===e.tag)&&(null!==(e=oe(e))&&0<=e.indexOf(t.value)))return!0;break;case Ya:if(5===e.tag&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Ma(e){switch(e.$$typeof){case qa:return"<"+(G(e.value)||"Unknown")+">";case ka:return":has("+(Ma(e)||"")+")";case Xa:return'[role="'+e.value+'"]';case Na:return'"'+e.value+'"';case Ya:return'[data-testname="'+e.value+'"]';default:throw Error(o(365))}}function Fa(e,t){var n=[];e=[e,0];for(var i=0;i<e.length;){var r=e[i++],a=e[i++],o=t[a];if(5!==r.tag||!le(r)){for(;null!=o&&za(r,o);)o=t[++a];if(a===t.length)n.push(r);else for(r=r.child;null!==r;)e.push(r,a),r=r.sibling}}return n}function La(e,t){if(!ie)throw Error(o(363));e=Fa(e=Ha(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var i=e[n++];if(5===i.tag)le(i)||t.push(i.stateNode);else for(i=i.child;null!==i;)e.push(i),i=i.sibling}return t}var _a=Math.ceil,Ta=l.ReactCurrentDispatcher,Ea=l.ReactCurrentOwner,Ja=l.ReactCurrentBatchConfig,Ua=0,Da=null,Pa=null,Oa=0,Qa=0,ja=ot(0),$a=0,eo=null,to=0,no=0,io=0,ro=null,ao=null,oo=0,lo=1/0;function go(){lo=Ht()+500}var so,co=!1,uo=null,Io=null,Co=!1,ho=null,Ao=0,po=0,mo=null,fo=-1,vo=0;function bo(){return 0!==(6&Ua)?Ht():-1!==fo?fo:fo=Ht()}function yo(e){return 0===(1&e.mode)?1:0!==(2&Ua)&&0!==Oa?Oa&-Oa:null!==Qt.transition?(0===vo&&(e=Gt,0===(4194240&(Gt<<=1))&&(Gt=64),vo=e),vo):0!==(e=qt)?e:$()}function Go(e,t,n){if(50<po)throw po=0,mo=null,Error(o(185));var i=Bo(e,t);return null===i?null:(Vt(i,t,n),0!==(2&Ua)&&i===Da||(i===Da&&(0===(2&Ua)&&(no|=t),4===$a&&Wo(i,Oa)),Zo(i,n),1===t&&0===Ua&&0===(1&e.mode)&&(go(),Ut&&Ot())),i)}function Bo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Zo(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-vt(a),l=1<<o,g=r[o];-1===g?0!==(l&n)&&0===(l&i)||(r[o]=xt(l,t)):g<=t&&(e.expiredLanes|=l),a&=~l}}(e,t);var i=wt(e,e===Da?Oa:0);if(0===i)null!==n&&Yt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Yt(n),1===t)0===e.tag?function(e){Ut=!0,Pt(e)}(Vo.bind(null,e)):Pt(Vo.bind(null,e)),te?ne((function(){0===Ua&&Ot()})):Xt(zt,Ot),n=null;else{switch(kt(i)){case 1:n=zt;break;case 4:n=Mt;break;case 16:default:n=Ft;break;case 536870912:n=Lt}n=Oo(n,wo.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function wo(e,t){if(fo=-1,vo=0,0!==(6&Ua))throw Error(o(327));var n=e.callbackNode;if(_o()&&e.callbackNode!==n)return null;var i=wt(e,e===Da?Oa:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=Ko(e,i);else{t=i;var r=Ua;Ua|=2;var a=Yo();for(Da===e&&Oa===t||(go(),ko(e,t));;)try{zo();break}catch(g){Xo(e,g)}on(),Ta.current=a,Ua=r,null!==Pa?t=0:(Da=null,Oa=0,t=$a)}if(0!==t){if(2===t&&(0!==(r=St(e))&&(i=r,t=xo(e,r))),1===t)throw n=eo,ko(e,0),Wo(e,i),Zo(e,Ht()),n;if(6===t)Wo(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!Et(a(),r))return!1}catch(l){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=Ko(e,i))&&(0!==(a=St(e))&&(i=a,t=xo(e,a))),1===t))throw n=eo,ko(e,0),Wo(e,i),Zo(e,Ht()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(o(345));case 2:case 5:Lo(e,ao);break;case 3:if(Wo(e,i),(130023424&i)===i&&10<(t=oo+500-Ht())){if(0!==wt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){bo(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=T(Lo.bind(null,e,ao),t);break}Lo(e,ao);break;case 4:if(Wo(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var l=31-vt(i);a=1<<l,(l=t[l])>r&&(r=l),i&=~a}if(i=r,10<(i=(120>(i=Ht()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*_a(i/1960))-i)){e.timeoutHandle=T(Lo.bind(null,e,ao),i);break}Lo(e,ao);break;default:throw Error(o(329))}}}return Zo(e,Ht()),e.callbackNode===n?wo.bind(null,e):null}function xo(e,t){var n=ro;return e.current.memoizedState.isDehydrated&&(ko(e,t).flags|=256),2!==(e=Ko(e,t))&&(t=ao,ao=n,null!==t&&So(t)),e}function So(e){null===ao?ao=e:ao.push.apply(ao,e)}function Wo(e,t){for(t&=~io,t&=~no,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vt(t),i=1<<n;e[n]=-1,t&=~i}}function Vo(e){if(0!==(6&Ua))throw Error(o(327));_o();var t=wt(e,0);if(0===(1&t))return Zo(e,Ht()),null;var n=Ko(e,t);if(0!==e.tag&&2===n){var i=St(e);0!==i&&(t=i,n=xo(e,i))}if(1===n)throw n=eo,ko(e,0),Wo(e,t),Zo(e,Ht()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Lo(e,ao),Zo(e,Ht()),null}function Ro(e){null!==ho&&0===ho.tag&&0===(6&Ua)&&_o();var t=Ua;Ua|=1;var n=Ja.transition,i=qt;try{if(Ja.transition=null,qt=1,e)return e()}finally{qt=i,Ja.transition=n,0===(6&(Ua=t))&&Ot()}}function qo(){Qa=ja.current,lt(ja)}function ko(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==J&&(e.timeoutHandle=J,E(n)),null!==Pa)for(n=Pa.return;null!==n;){var i=n;switch(Fn(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&ht();break;case 3:di(),lt(ut),lt(ct),fi();break;case 5:hi(i);break;case 4:di();break;case 13:case 19:lt(Ai);break;case 10:gn(i.type._context);break;case 22:case 23:qo()}n=n.return}if(Da=e,Pa=e=el(e.current,null),Oa=Qa=t,$a=0,eo=null,io=no=to=0,ao=ro=null,null!==In){for(t=0;t<In.length;t++)if(null!==(i=(n=In[t]).interleaved)){n.interleaved=null;var r=i.next,a=n.pending;if(null!==a){var o=a.next;a.next=r,i.next=o}n.pending=i}In=null}return e}function Xo(e,t){for(;;){var n=Pa;try{if(on(),vi.current=dr,wi){for(var i=Gi.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}wi=!1}if(yi=0,Zi=Bi=Gi=null,xi=!1,Si=0,Ea.current=null,null===n||null===n.return){$a=1,eo=t,Pa=null;break}e:{var a=e,l=n.return,g=n,s=t;if(t=Oa,g.flags|=32768,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s,u=g,I=u.tag;if(0===(1&u.mode)&&(0===I||11===I||15===I)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var C=xr(l);if(null!==C){C.flags&=-257,Sr(C,l,g,0,t),1&C.mode&&wr(a,c,t),s=c;var h=(t=C).updateQueue;if(null===h){var A=new Set;A.add(s),t.updateQueue=A}else h.add(s);break e}if(0===(1&t)){wr(a,c,t),No();break e}s=Error(o(426))}else if(Tn&&1&g.mode){var p=xr(l);if(null!==p){0===(65536&p.flags)&&(p.flags|=256),Sr(p,l,g,0,t),ei(s);break e}}a=s,4!==$a&&($a=2),null===ro?ro=[a]:ro.push(a),s=pr(s,g),g=l;do{switch(g.tag){case 3:g.flags|=65536,t&=-t,g.lanes|=t,fn(g,Br(0,s,t));break e;case 1:a=s;var m=g.type,f=g.stateNode;if(0===(128&g.flags)&&("function"===typeof m.getDerivedStateFromError||null!==f&&"function"===typeof f.componentDidCatch&&(null===Io||!Io.has(f)))){g.flags|=65536,t&=-t,g.lanes|=t,fn(g,Zr(g,a,t));break e}}g=g.return}while(null!==g)}Fo(n)}catch(v){t=v,Pa===n&&null!==n&&(Pa=n=n.return);continue}break}}function Yo(){var e=Ta.current;return Ta.current=dr,null===e?dr:e}function No(){0!==$a&&3!==$a&&2!==$a||($a=4),null===Da||0===(268435455&to)&&0===(268435455&no)||Wo(Da,Oa)}function Ko(e,t){var n=Ua;Ua|=2;var i=Yo();for(Da===e&&Oa===t||ko(e,t);;)try{Ho();break}catch(r){Xo(e,r)}if(on(),Ua=n,Ta.current=i,null!==Pa)throw Error(o(261));return Da=null,Oa=0,$a}function Ho(){for(;null!==Pa;)Mo(Pa)}function zo(){for(;null!==Pa&&!Nt();)Mo(Pa)}function Mo(e){var t=so(e.alternate,e,Qa);e.memoizedProps=e.pendingProps,null===t?Fo(e):Pa=t,Ea.current=null}function Fo(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xr(n,t,Qa)))return void(Pa=n)}else{if(null!==(n=aa(n,t)))return n.flags&=32767,void(Pa=n);if(null===e)return $a=6,void(Pa=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pa=t);Pa=t=e}while(null!==t);0===$a&&($a=5)}function Lo(e,t){var n=qt,i=Ja.transition;try{Ja.transition=null,qt=1,function(e,t,n){do{_o()}while(null!==ho);if(0!==(6&Ua))throw Error(o(327));var i=e.finishedWork,r=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=i.lanes|i.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-vt(n),a=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~a}}(e,a),e===Da&&(Pa=Da=null,Oa=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||Co||(Co=!0,Oo(Ft,(function(){return _o(),null}))),a=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||a){a=Ja.transition,Ja.transition=null;var l=qt;qt=1;var g=Ua;Ua|=4,Ea.current=null,function(e,t){for(N(e.containerInfo),sa=t;null!==sa;)if(t=(e=sa).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,sa=t;else for(;null!==sa;){e=sa;try{var n=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var i=n.memoizedProps,r=n.memoizedState,a=e.stateNode,l=a.getSnapshotBeforeUpdate(e.elementType===e.type?i:en(e.type,i),r);a.__reactInternalSnapshotBeforeUpdate=l}break;case 3:D&&Ze(e.stateNode.containerInfo);break;default:throw Error(o(163))}}catch(g){Eo(e,e.return,g)}if(null!==(t=e.sibling)){t.return=e.return,sa=t;break}sa=e.return}n=Ia,Ia=!1}(e,i),function(e,t){for(sa=t;null!==sa;){var n=(t=sa).deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=e;D?Ba(a,r,t):pa(a,r,t);var o=r.alternate;null!==o&&(o.return=null),r.return=null}catch(b){Eo(r,t,b)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,sa=n;else for(;null!==sa;){t=sa;try{var l=t.flags;if(32&l&&D&&ve(t.stateNode),512&l){var g=t.alternate;if(null!==g){var s=g.ref;null!==s&&("function"===typeof s?s(null):s.current=null)}}if(8192&l)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(oo=Ht())}break;case 22:var u=null!==t.memoizedState,I=t.alternate,d=null!==I&&null!==I.memoizedState;if(n=t,D)e:if(i=n,r=u,a=null,D)for(var C=i;;){if(5===C.tag){if(null===a){a=C;var h=C.stateNode;r?be(h):Ge(C.stateNode,C.memoizedProps)}}else if(6===C.tag){if(null===a){var A=C.stateNode;r?ye(A):Be(A,C.memoizedProps)}}else if((22!==C.tag&&23!==C.tag||null===C.memoizedState||C===i)&&null!==C.child){C.child.return=C,C=C.child;continue}if(C===i)break;for(;null===C.sibling;){if(null===C.return||C.return===i)break e;a===C&&(a=null),C=C.return}a===C&&(a=null),C.sibling.return=C.return,C=C.sibling}if(u&&!d&&0!==(1&n.mode)){sa=n;for(var p=n.child;null!==p;){for(n=sa=p;null!==sa;){var m=(i=sa).child;switch(i.tag){case 0:case 11:case 14:case 15:da(4,i,i.return);break;case 1:ca(i,i.return);var f=i.stateNode;if("function"===typeof f.componentWillUnmount){var v=i.return;try{f.props=i.memoizedProps,f.state=i.memoizedState,f.componentWillUnmount()}catch(b){Eo(i,v,b)}}break;case 5:ca(i,i.return);break;case 22:if(null!==i.memoizedState){Va(n);continue}}null!==m?(m.return=i,sa=m):Va(n)}p=p.sibling}}}switch(4102&l){case 2:ba(t),t.flags&=-3;break;case 6:ba(t),t.flags&=-3,Za(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Za(t.alternate,t);break;case 4:Za(t.alternate,t)}}catch(b){Eo(t,t.return,b)}if(null!==(n=t.sibling)){n.return=t.return,sa=n;break}sa=t.return}}}(e,i),K(e.containerInfo),e.current=i,xa(i,e,r),Kt(),Ua=g,qt=l,Ja.transition=a}else e.current=i;if(Co&&(Co=!1,ho=e,Ao=r),0===(a=e.pendingLanes)&&(Io=null),function(e){if(Tt&&"function"===typeof Tt.onCommitFiberRoot)try{Tt.onCommitFiberRoot(_t,e,void 0,128===(128&e.current.flags))}catch(t){}}(i.stateNode),Zo(e,Ht()),null!==t)for(n=e.onRecoverableError,i=0;i<t.length;i++)n(t[i]);if(co)throw co=!1,e=uo,uo=null,e;0!==(1&Ao)&&0!==e.tag&&_o(),0!==(1&(a=e.pendingLanes))?e===mo?po++:(po=0,mo=e):po=0,Ot()}(e,t,n)}finally{Ja.transition=i,qt=n}return null}function _o(){if(null!==ho){var e=kt(Ao),t=Ja.transition,n=qt;try{if(Ja.transition=null,qt=16>e?16:e,null===ho)var i=!1;else{if(e=ho,ho=null,Ao=0,0!==(6&Ua))throw Error(o(331));var r=Ua;for(Ua|=4,sa=e.current;null!==sa;){var a=sa,l=a.child;if(0!==(16&sa.flags)){var g=a.deletions;if(null!==g){for(var s=0;s<g.length;s++){var c=g[s];for(sa=c;null!==sa;){var u=sa;switch(u.tag){case 0:case 11:case 15:da(8,u,a)}var I=u.child;if(null!==I)I.return=u,sa=I;else for(;null!==sa;){var d=(u=sa).sibling,C=u.return;if(ma(u),u===c){sa=null;break}if(null!==d){d.return=C,sa=d;break}sa=C}}}var h=a.alternate;if(null!==h){var A=h.child;if(null!==A){h.child=null;do{var p=A.sibling;A.sibling=null,A=p}while(null!==A)}}sa=a}}if(0!==(2064&a.subtreeFlags)&&null!==l)l.return=a,sa=l;else e:for(;null!==sa;){if(0!==(2048&(a=sa).flags))switch(a.tag){case 0:case 11:case 15:da(9,a,a.return)}var m=a.sibling;if(null!==m){m.return=a.return,sa=m;break e}sa=a.return}}var f=e.current;for(sa=f;null!==sa;){var v=(l=sa).child;if(0!==(2064&l.subtreeFlags)&&null!==v)v.return=l,sa=v;else e:for(l=f;null!==sa;){if(0!==(2048&(g=sa).flags))try{switch(g.tag){case 0:case 11:case 15:Ca(9,g)}}catch(y){Eo(g,g.return,y)}if(g===l){sa=null;break e}var b=g.sibling;if(null!==b){b.return=g.return,sa=b;break e}sa=g.return}}if(Ua=r,Ot(),Tt&&"function"===typeof Tt.onPostCommitFiberRoot)try{Tt.onPostCommitFiberRoot(_t,e)}catch(y){}i=!0}return i}finally{qt=n,Ja.transition=t}}return!1}function To(e,t,n){pn(e,t=Br(0,t=pr(n,t),1)),t=bo(),null!==(e=Bo(e,1))&&(Vt(e,1,t),Zo(e,t))}function Eo(e,t,n){if(3===e.tag)To(e,e,n);else for(;null!==t;){if(3===t.tag){To(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Io||!Io.has(i))){pn(t,e=Zr(t,e=pr(n,e),1)),e=bo(),null!==(t=Bo(t,1))&&(Vt(t,1,e),Zo(t,e));break}}t=t.return}}function Jo(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=bo(),e.pingedLanes|=e.suspendedLanes&n,Da===e&&(Oa&n)===n&&(4===$a||3===$a&&(130023424&Oa)===Oa&&500>Ht()-oo?ko(e,0):io|=n),Zo(e,t)}function Uo(e,t){0===t&&(0===(1&e.mode)?t=1:(t=Bt,0===(130023424&(Bt<<=1))&&(Bt=4194304)));var n=bo();null!==(e=Bo(e,t))&&(Vt(e,t,n),Zo(e,n))}function Do(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Uo(e,n)}function Po(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(o(314))}null!==i&&i.delete(t),Uo(e,n)}function Oo(e,t){return Xt(e,t)}function Qo(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jo(e,t,n,i){return new Qo(e,t,n,i)}function $o(e){return!(!(e=e.prototype)||!e.isReactComponent)}function el(e,t){var n=e.alternate;return null===n?((n=jo(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function tl(e,t,n,i,r,a){var l=2;if(i=e,"function"===typeof e)$o(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case c:return nl(n.children,r,a,t);case u:l=8,r|=8;break;case I:return(e=jo(12,n,t,2|r)).elementType=I,e.lanes=a,e;case A:return(e=jo(13,n,t,r)).elementType=A,e.lanes=a,e;case p:return(e=jo(19,n,t,r)).elementType=p,e.lanes=a,e;case v:return il(n,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case d:l=10;break e;case C:l=9;break e;case h:l=11;break e;case m:l=14;break e;case f:l=16,i=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=jo(l,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function nl(e,t,n,i){return(e=jo(7,e,i,t)).lanes=n,e}function il(e,t,n,i){return(e=jo(22,e,i,t)).elementType=v,e.lanes=n,e.stateNode={},e}function rl(e,t,n){return(e=jo(6,e,null,t)).lanes=n,e}function al(e,t,n){return(t=jo(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ol(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=J,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wt(0),this.expirationTimes=Wt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wt(0),this.identifierPrefix=i,this.onRecoverableError=r,O&&(this.mutableSourceEagerHydrationData=null)}function ll(e,t,n,i,r,a,o,l,g){return e=new ol(e,t,n,l,g),1===t?(t=1,!0===a&&(t|=8)):t=0,a=jo(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null},Cn(a),e}function gl(e){if(!e)return st;e:{if(Z(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ct(n))return pt(e,n,t)}return t}function sl(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return null===(e=S(t))?null:e.stateNode}function cl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ul(e,t){cl(e,t),(e=e.alternate)&&cl(e,t)}function Il(e){return null===(e=S(e))?null:e.stateNode}function dl(){return null}return so=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ut.current)Nr=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Nr=!1,function(e,t,n){switch(t.tag){case 3:Jr(t),$n();break;case 5:Ci(t);break;case 1:Ct(t.type)&&mt(t);break;case 4:Ii(t,t.stateNode.containerInfo);break;case 10:ln(0,t.type._context,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(gt(Ai,1&Ai.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Or(e,t,n):(gt(Ai,1&Ai.current),null!==(e=ra(e,t,n))?e.sibling:null);gt(Ai,1&Ai.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return ia(e,t,n);t.flags|=128}var r=t.memoizedState;if(null!==r&&(r.rendering=null,r.tail=null,r.lastEffect=null),gt(Ai,Ai.current),i)break;return null;case 22:case 23:return t.lanes=0,Fr(e,t,n)}return ra(e,t,n)}(e,t,n);Nr=0!==(131072&e.flags)}else Nr=!1,Tn&&0!==(1048576&t.flags)&&zn(t,qn,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var r=dt(t,ct.current);cn(t,n),r=qi(null,t,i,e,r,n);var a=ki();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ct(i)?(a=!0,mt(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Cn(t),r.updater=Bn,t.stateNode=r,r._reactInternals=t,Sn(t,i,e,n),t=Er(null,t,i,!0,a,n)):(t.tag=0,Tn&&a&&Mn(t),Kr(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return $o(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===h)return 11;if(e===m)return 14}return 2}(i),e=en(i,e),r){case 0:t=_r(null,t,i,e,n);break e;case 1:t=Tr(null,t,i,e,n);break e;case 11:t=Hr(null,t,i,e,n);break e;case 14:t=zr(null,t,i,en(i.type,e),n);break e}throw Error(o(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,_r(e,t,i,r=t.elementType===i?r:en(i,r),n);case 1:return i=t.type,r=t.pendingProps,Tr(e,t,i,r=t.elementType===i?r:en(i,r),n);case 3:e:{if(Jr(t),null===e)throw Error(o(387));i=t.pendingProps,r=(a=t.memoizedState).element,hn(e,t),vn(t,i,null,n);var l=t.memoizedState;if(i=l.element,O&&a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:l.cache,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ur(e,t,i,n,r=Error(o(423)));break e}if(i!==r){t=Ur(e,t,i,n,r=Error(o(424)));break e}for(O&&(_n=Fe(t.stateNode.containerInfo),Ln=t,Tn=!0,Jn=null,En=!1),n=oi(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if($n(),i===r){t=ra(e,t,n);break e}Kr(e,t,i,n)}t=t.child}return t;case 5:return Ci(t),null===e&&On(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,l=r.children,L(i,r)?l=null:null!==a&&L(i,a)&&(t.flags|=32),Lr(e,t),Kr(e,t,l,n),t.child;case 6:return null===e&&On(t),null;case 13:return Or(e,t,n);case 4:return Ii(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ai(t,null,i,n):Kr(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,Hr(e,t,i,r=t.elementType===i?r:en(i,r),n);case 7:return Kr(e,t,t.pendingProps,n),t.child;case 8:case 12:return Kr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,a=t.memoizedProps,ln(0,i,l=r.value),null!==a)if(Et(a.value,l)){if(a.children===r.children&&!ut.current){t=ra(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var g=a.dependencies;if(null!==g){l=a.child;for(var s=g.firstContext;null!==s;){if(s.context===i){if(1===a.tag){(s=An(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?s.next=s:(s.next=u.next,u.next=s),c.pending=s}}a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),sn(a.return,n,t),g.lanes|=n;break}s=s.next}}else if(10===a.tag)l=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(l=a.return))throw Error(o(341));l.lanes|=n,null!==(g=l.alternate)&&(g.lanes|=n),sn(l,n,t),l=a.sibling}else l=a.child;if(null!==l)l.return=a;else for(l=a;null!==l;){if(l===t){l=null;break}if(null!==(a=l.sibling)){a.return=l.return,l=a;break}l=l.return}a=l}Kr(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,cn(t,n),i=i(r=un(r)),t.flags|=1,Kr(e,t,i,n),t.child;case 14:return r=en(i=t.type,t.pendingProps),zr(e,t,i,r=en(i.type,r),n);case 15:return Mr(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:en(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ct(i)?(e=!0,mt(t)):e=!1,cn(t,n),wn(t,i,r),Sn(t,i,r,n),Er(null,t,i,!0,e,n);case 19:return ia(e,t,n);case 22:return Fr(e,t,n)}throw Error(o(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(Go(e,134217728,bo()),ul(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=bo(),n=yo(e);Go(e,n,t),ul(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Zt(t.pendingLanes);0!==n&&(Rt(t,1|n),Zo(t,Ht()),0===(6&Ua)&&(go(),Ot()))}break;case 13:var i=bo();Ro((function(){return Go(e,1,i)})),ul(e,1)}},t.batchedUpdates=function(e,t){var n=Ua;Ua|=1;try{return e(t)}finally{0===(Ua=n)&&(go(),Ut&&Ot())}},t.createComponentSelector=function(e){return{$$typeof:qa,value:e}},t.createContainer=function(e,t,n,i,r,a,o){return ll(e,t,!1,null,0,i,0,a,o)},t.createHasPseudoClassSelector=function(e){return{$$typeof:ka,value:e}},t.createHydrationContainer=function(e,t,n,i,r,a,o,l,g){return(e=ll(n,i,!0,e,0,a,0,l,g)).context=gl(null),n=e.current,(a=An(i=bo(),r=yo(n))).callback=void 0!==t&&null!==t?t:null,pn(n,a),e.current.lanes=r,Vt(e,r,i),Zo(e,i),e},t.createPortal=function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:Xa,value:e}},t.createTestNameSelector=function(e){return{$$typeof:Ya,value:e}},t.createTextSelector=function(e){return{$$typeof:Na,value:e}},t.deferredUpdates=function(e){var t=qt,n=Ja.transition;try{return Ja.transition=null,qt=16,e()}finally{qt=t,Ja.transition=n}},t.discreteUpdates=function(e,t,n,i,r){var a=qt,o=Ja.transition;try{return Ja.transition=null,qt=1,e(t,n,i,r)}finally{qt=a,Ja.transition=o,0===Ua&&go()}},t.findAllNodes=La,t.findBoundingRects=function(e,t){if(!ie)throw Error(o(363));t=La(e,t),e=[];for(var n=0;n<t.length;n++)e.push(ae(t[n]));for(t=e.length-1;0<t;t--)for(var i=(n=e[t]).x,r=i+n.width,a=n.y,l=a+n.height,g=t-1;0<=g;g--)if(t!==g){var s=e[g],c=s.x,u=c+s.width,I=s.y,d=I+s.height;if(i>=c&&a>=I&&r<=u&&l<=d){e.splice(t,1);break}if(!(i!==c||n.width!==s.width||d<a||I>l)){I>a&&(s.height+=I-a,s.y=a),d<l&&(s.height=l-I),e.splice(t,1);break}if(!(a!==I||n.height!==s.height||u<i||c>r)){c>i&&(s.width+=c-i,s.x=i),u<r&&(s.width=r-c),e.splice(t,1);break}}return e},t.findHostInstance=sl,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=x(e))?V(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return sl(e)},t.flushControlled=function(e){var t=Ua;Ua|=1;var n=Ja.transition,i=qt;try{Ja.transition=null,qt=1,e()}finally{qt=i,Ja.transition=n,0===(Ua=t)&&(go(),Ot())}},t.flushPassiveEffects=_o,t.flushSync=Ro,t.focusWithin=function(e,t){if(!ie)throw Error(o(363));for(t=Fa(e=Ha(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!le(n)){if(5===n.tag&&se(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return qt},t.getFindAllNodesFailureDescription=function(e,t){if(!ie)throw Error(o(363));var n=0,i=[];e=[Ha(e),0];for(var r=0;r<e.length;){var a=e[r++],l=e[r++],g=t[l];if((5!==a.tag||!le(a))&&(za(a,g)&&(i.push(Ma(g)),++l>n&&(n=l)),l<t.length))for(a=a.child;null!==a;)e.push(a,l),a=a.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Ma(t[n]));return"findAllNodes was able to match part of the selector:\n  "+i.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?k(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:Il,findFiberByHostInstance:e.findFiberByHostInstance||dl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{_t=t.inject(e),Tt=t}catch(n){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,i){if(!ie)throw Error(o(363));e=La(e,t);var r=ce(e,n,i).disconnect;return{disconnect:function(){r()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=qt;try{return qt=e,t()}finally{qt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,i){var r=t.current,a=bo(),o=yo(r);return n=gl(n),null===t.context?t.context=n:t.pendingContext=n,(t=An(a,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),pn(r,t),null!==(e=Go(r,o,a))&&mn(e,r,o),o},t}},4585:function(e,t,n){"use strict";e.exports=n(4976)},258:function(e,t,n){"use strict";e.exports=n(1070)},5783:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<a(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var l=2*(i+1)-1,g=e[l],s=l+1,c=e[s];if(0>a(g,n))s<r&&0>a(c,g)?(e[i]=c,e[s]=n,i=s):(e[i]=g,e[l]=n,i=l);else{if(!(s<r&&0>a(c,n)))break e;e[i]=c,e[s]=n,i=s}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,g=l.now();t.unstable_now=function(){return l.now()-g}}var s=[],c=[],u=1,I=null,d=3,C=!1,h=!1,A=!1,p="function"===typeof setTimeout?setTimeout:null,m="function"===typeof clearTimeout?clearTimeout:null,f="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=i(c);null!==t;){if(null===t.callback)r(c);else{if(!(t.startTime<=e))break;r(c),t.sortIndex=t.expirationTime,n(s,t)}t=i(c)}}function b(e){if(A=!1,v(e),!h)if(null!==i(s))h=!0,k(y);else{var t=i(c);null!==t&&X(b,t.startTime-e)}}function y(e,n){h=!1,A&&(A=!1,m(w),w=-1),C=!0;var a=d;try{for(v(n),I=i(s);null!==I&&(!(I.expirationTime>n)||e&&!W());){var o=I.callback;if("function"===typeof o){I.callback=null,d=I.priorityLevel;var l=o(I.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?I.callback=l:I===i(s)&&r(s),v(n)}else r(s);I=i(s)}if(null!==I)var g=!0;else{var u=i(c);null!==u&&X(b,u.startTime-n),g=!1}return g}finally{I=null,d=a,C=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var G,B=!1,Z=null,w=-1,x=5,S=-1;function W(){return!(t.unstable_now()-S<x)}function V(){if(null!==Z){var e=t.unstable_now();S=e;var n=!0;try{n=Z(!0,e)}finally{n?G():(B=!1,Z=null)}}else B=!1}if("function"===typeof f)G=function(){f(V)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,q=R.port2;R.port1.onmessage=V,G=function(){q.postMessage(null)}}else G=function(){p(V,0)};function k(e){Z=e,B||(B=!0,G())}function X(e,n){w=p((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){h||C||(h=!0,k(y))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return i(s)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,r,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===i(s)&&e===i(c)&&(A?(m(w),w=-1):A=!0,X(b,a-o))):(e.sortIndex=l,n(s,e),h||C||(h=!0,k(y))),e},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},3100:function(e,t,n){"use strict";e.exports=n(5783)},6374:function(e,t,n){"use strict";var i=n(2791),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function s(e,t,n){var i,a={},s=null,c=null;for(i in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,i)&&!g.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===a[i]&&(a[i]=t[i]);return{$$typeof:r,type:e,key:s,ref:c,props:a,_owner:l.current}}t.Fragment=a,t.jsx=s,t.jsxs=s},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),g=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),d=Symbol.iterator;var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,A={};function p(e,t,n){this.props=e,this.context=t,this.refs=A,this.updater=n||C}function m(){}function f(e,t,n){this.props=e,this.context=t,this.refs=A,this.updater=n||C}p.prototype.isReactComponent={},p.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},p.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=p.prototype;var v=f.prototype=new m;v.constructor=f,h(v,p.prototype),v.isPureReactComponent=!0;var b=Array.isArray,y=Object.prototype.hasOwnProperty,G={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function Z(e,t,i){var r,a={},o=null,l=null;if(null!=t)for(r in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(o=""+t.key),t)y.call(t,r)&&!B.hasOwnProperty(r)&&(a[r]=t[r]);var g=arguments.length-2;if(1===g)a.children=i;else if(1<g){for(var s=Array(g),c=0;c<g;c++)s[c]=arguments[c+2];a.children=s}if(e&&e.defaultProps)for(r in g=e.defaultProps)void 0===a[r]&&(a[r]=g[r]);return{$$typeof:n,type:e,key:o,ref:l,props:a,_owner:G.current}}function w(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var x=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function W(e,t,r,a,o){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var g=!1;if(null===e)g=!0;else switch(l){case"string":case"number":g=!0;break;case"object":switch(e.$$typeof){case n:case i:g=!0}}if(g)return o=o(g=e),e=""===a?"."+S(g,0):a,b(o)?(r="",null!=e&&(r=e.replace(x,"$&/")+"/"),W(o,t,r,"",(function(e){return e}))):null!=o&&(w(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||g&&g.key===o.key?"":(""+o.key).replace(x,"$&/")+"/")+e)),t.push(o)),1;if(g=0,a=""===a?".":a+":",b(e))for(var s=0;s<e.length;s++){var c=a+S(l=e[s],s);g+=W(l,t,r,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),s=0;!(l=e.next()).done;)g+=W(l=l.value,t,r,c=a+S(l,s++),o);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return g}function V(e,t,n){if(null==e)return e;var i=[],r=0;return W(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var q={current:null},k={transition:null},X={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:k,ReactCurrentOwner:G};t.Children={map:V,forEach:function(e,t,n){V(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return V(e,(function(){t++})),t},toArray:function(e){return V(e,(function(e){return e}))||[]},only:function(e){if(!w(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=p,t.Fragment=r,t.Profiler=o,t.PureComponent=f,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=h({},e.props),a=e.key,o=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,l=G.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(s in t)y.call(t,s)&&!B.hasOwnProperty(s)&&(r[s]=void 0===t[s]&&void 0!==g?g[s]:t[s])}var s=arguments.length-2;if(1===s)r.children=i;else if(1<s){g=Array(s);for(var c=0;c<s;c++)g[c]=arguments[c+2];r.children=g}return{$$typeof:n,type:e.type,key:a,ref:o,props:r,_owner:l}},t.createContext=function(e){return(e={$$typeof:g,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=Z,t.createFactory=function(e){var t=Z.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=w,t.lazy=function(e){return{$$typeof:I,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.transition;k.transition={};try{e()}finally{k.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return q.current.useCallback(e,t)},t.useContext=function(e){return q.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return q.current.useDeferredValue(e)},t.useEffect=function(e,t){return q.current.useEffect(e,t)},t.useId=function(){return q.current.useId()},t.useImperativeHandle=function(e,t,n){return q.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return q.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return q.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return q.current.useMemo(e,t)},t.useReducer=function(e,t,n){return q.current.useReducer(e,t,n)},t.useRef=function(e){return q.current.useRef(e)},t.useState=function(e){return q.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return q.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return q.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<a(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var l=2*(i+1)-1,g=e[l],s=l+1,c=e[s];if(0>a(g,n))s<r&&0>a(c,g)?(e[i]=c,e[s]=n,i=s):(e[i]=g,e[l]=n,i=l);else{if(!(s<r&&0>a(c,n)))break e;e[i]=c,e[s]=n,i=s}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,g=l.now();t.unstable_now=function(){return l.now()-g}}var s=[],c=[],u=1,I=null,d=3,C=!1,h=!1,A=!1,p="function"===typeof setTimeout?setTimeout:null,m="function"===typeof clearTimeout?clearTimeout:null,f="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=i(c);null!==t;){if(null===t.callback)r(c);else{if(!(t.startTime<=e))break;r(c),t.sortIndex=t.expirationTime,n(s,t)}t=i(c)}}function b(e){if(A=!1,v(e),!h)if(null!==i(s))h=!0,k(y);else{var t=i(c);null!==t&&X(b,t.startTime-e)}}function y(e,n){h=!1,A&&(A=!1,m(w),w=-1),C=!0;var a=d;try{for(v(n),I=i(s);null!==I&&(!(I.expirationTime>n)||e&&!W());){var o=I.callback;if("function"===typeof o){I.callback=null,d=I.priorityLevel;var l=o(I.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?I.callback=l:I===i(s)&&r(s),v(n)}else r(s);I=i(s)}if(null!==I)var g=!0;else{var u=i(c);null!==u&&X(b,u.startTime-n),g=!1}return g}finally{I=null,d=a,C=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var G,B=!1,Z=null,w=-1,x=5,S=-1;function W(){return!(t.unstable_now()-S<x)}function V(){if(null!==Z){var e=t.unstable_now();S=e;var n=!0;try{n=Z(!0,e)}finally{n?G():(B=!1,Z=null)}}else B=!1}if("function"===typeof f)G=function(){f(V)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,q=R.port2;R.port1.onmessage=V,G=function(){q.postMessage(null)}}else G=function(){p(V,0)};function k(e){Z=e,B||(B=!0,G())}function X(e,n){w=p((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){h||C||(h=!0,k(y))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return i(s)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,r,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:a,expirationTime:l=a+l,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===i(s)&&e===i(c)&&(A?(m(w),w=-1):A=!0,X(b,a-o))):(e.sortIndex=l,n(s,e),h||C||(h=!0,k(y))),e},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},7809:function(e,t,n){"use strict";var i=n(8018),r=n(5456),a=n(4807),o=n(7240);function l(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}e.exports=function(e,t,n){if(!o(e))return e;if(Array.isArray(t)&&(t=[].concat.apply([],t).join(".")),"string"!==typeof t)return e;for(var g=i(t,{sep:".",brackets:!0}).filter(l),s=g.length,c=-1,u=e;++c<s;){var I=g[c];c===s-1?a(u[I])&&a(n)?u[I]=r({},u[I],n):u[I]=n:(o(u[I])||(u[I]={}),u=u[I])}return e}},7240:function(e){"use strict";e.exports=function(e){return"undefined"!==typeof e&&null!==e&&("object"===typeof e||"function"===typeof e)}},8018:function(e,t,n){"use strict";var i=n(9955);function r(e,t,n,i){var a=e.indexOf(t,n);return"\\"===e.charAt(a-1)?r(e,t,a+1):a}function a(e,t){return!0===t.keepDoubleQuotes&&'"'===e||(!0===t.keepSingleQuotes&&"'"===e||t.keepQuotes)}function o(e,t,n){return"function"===typeof e.keepEscaping?e.keepEscaping(t,n):!0===e.keepEscaping||"\\"===t[n+1]}e.exports=function(e,t,n){if("string"!==typeof e)throw new TypeError("expected a string");"function"===typeof t&&(n=t,t=null),"string"===typeof t&&(t={sep:t});var l,g=i({sep:"."},t),s=g.quotes||['"',"'","`"];!0===g.brackets?l={"<":">","(":")","[":"]","{":"}"}:g.brackets&&(l=g.brackets);var c,u=[],I=[],d=[""],C=g.sep,h=e.length,A=-1;function p(){if(l&&I.length)return l[I[I.length-1]]}for(;++A<h;){var m=e[A],f=e[A+1],v={val:m,idx:A,arr:d,str:e};if(u.push(v),"\\"!==m){if(l&&l[m]){I.push(m);var b=p(),y=A+1;if(-1!==e.indexOf(b,y+1))for(;I.length&&y<h;){var G=e[++y];if("\\"!==G)if(-1===s.indexOf(G)){if(b=p(),I.length&&-1===e.indexOf(b,y+1))break;l[G]?I.push(G):b===G&&I.pop()}else y=r(e,G,y+1);else G++}if(-1===(c=y)){d[d.length-1]+=m;continue}m=e.slice(A,c+1),v.val=m,v.idx=A=c}if(-1!==s.indexOf(m)){if(-1===(c=r(e,m,A+1))){d[d.length-1]+=m;continue}m=!0===a(m,g)?e.slice(A,c+1):e.slice(A+1,c),v.val=m,v.idx=A=c}"function"===typeof n&&(n(v,u),m=v.val,A=v.idx),v.val!==C||!1===v.split?d[d.length-1]+=v.val:d.push("")}else v.val=!0===o(g,e,A)?m+f:f,v.escaped=!0,"function"===typeof n&&n(v),d[d.length-1]+=v.val,A++}return d}},9955:function(e,t,n){"use strict";var i=n(9105),r=n(7823);function a(e,t){for(var n in t)s(t,n)&&(e[n]=t[n])}function o(e){return e&&"string"===typeof e}function l(e){var t={};for(var n in e)t[n]=e[n];return t}function g(e){return e&&"object"===typeof e||i(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=Object.assign||function(e){if(null===e||"undefined"===typeof e)throw new TypeError("Cannot convert undefined or null to object");g(e)||(e={});for(var t=1;t<arguments.length;t++){var n=arguments[t];o(n)&&(n=l(n)),g(n)&&(a(e,n),r(e,n))}return e}},2391:function(e){"use strict";var t=function(){};e.exports=t}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var l=2&r&&i;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((function(e){o[e]=function(){return i[e]}}));return o.default=function(){return i},n.d(a,o),a}}(),n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",n.nc=void 0,function(){"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:function(){return ut},AddEquation:function(){return Xe},AddOperation:function(){return ot},AdditiveAnimationBlendMode:function(){return Hn},AdditiveBlending:function(){return Ve},AlphaFormat:function(){return _t},AlwaysDepth:function(){return Qe},AlwaysStencilFunc:function(){return Ii},AmbientLight:function(){return rd},AmbientLightProbe:function(){return vd},AnimationClip:function(){return xI},AnimationLoader:function(){return KI},AnimationMixer:function(){return Qd},AnimationObjectGroup:function(){return Dd},AnimationUtils:function(){return CI},ArcCurve:function(){return Vc},ArrayCamera:function(){return ls},ArrowHelper:function(){return LC},Audio:function(){return qd},AudioAnalyser:function(){return Hd},AudioContext:function(){return pd},AudioListener:function(){return Rd},AudioLoader:function(){return md},AxesHelper:function(){return _C},BackSide:function(){return we},BasicDepthPacking:function(){return Tn},BasicShadowMap:function(){return be},Bone:function(){return Ps},BooleanKeyframeTrack:function(){return vI},Box2:function(){return sC},Box3:function(){return vr},Box3Helper:function(){return zC},BoxBufferGeometry:function(){return jC},BoxGeometry:function(){return bo},BoxHelper:function(){return HC},BufferAttribute:function(){return Na},BufferGeometry:function(){return eo},BufferGeometryLoader:function(){return ud},ByteType:function(){return kt},Cache:function(){return VI},Camera:function(){return wo},CameraHelper:function(){return kC},CanvasTexture:function(){return xc},CapsuleBufferGeometry:function(){return $C},CapsuleGeometry:function(){return Qc},CatmullRomCurve3:function(){return Nc},CineonToneMapping:function(){return ct},CircleBufferGeometry:function(){return eh},CircleGeometry:function(){return jc},ClampToEdgeWrapping:function(){return vt},Clock:function(){return Zd},Color:function(){return ir},ColorKeyframeTrack:function(){return bI},ColorManagement:function(){return Pi},CompressedTexture:function(){return wc},CompressedTextureLoader:function(){return HI},ConeBufferGeometry:function(){return th},ConeGeometry:function(){return eu},CubeCamera:function(){return Wo},CubeReflectionMapping:function(){return Ct},CubeRefractionMapping:function(){return ht},CubeTexture:function(){return Vo},CubeTextureLoader:function(){return MI},CubeUVReflectionMapping:function(){return mt},CubicBezierCurve:function(){return Mc},CubicBezierCurve3:function(){return Fc},CubicInterpolant:function(){return AI},CullFaceBack:function(){return me},CullFaceFront:function(){return fe},CullFaceFrontBack:function(){return ve},CullFaceNone:function(){return pe},Curve:function(){return Sc},CurvePath:function(){return Dc},CustomBlending:function(){return ke},CustomToneMapping:function(){return It},CylinderBufferGeometry:function(){return nh},CylinderGeometry:function(){return $c},Cylindrical:function(){return lC},Data3DTexture:function(){return dr},DataArrayTexture:function(){return ur},DataTexture:function(){return Os},DataTexture2DArray:function(){return OC},DataTexture3D:function(){return QC},DataTextureLoader:function(){return FI},DataUtils:function(){return UC},DecrementStencilOp:function(){return ti},DecrementWrapStencilOp:function(){return ii},DefaultLoadingManager:function(){return qI},DepthFormat:function(){return Dt},DepthStencilFormat:function(){return Pt},DepthTexture:function(){return us},DirectionalLight:function(){return id},DirectionalLightHelper:function(){return VC},DiscreteInterpolant:function(){return mI},DodecahedronBufferGeometry:function(){return ih},DodecahedronGeometry:function(){return nu},DoubleSide:function(){return xe},DstAlphaFactor:function(){return Ee},DstColorFactor:function(){return Ue},DynamicCopyUsage:function(){return vi},DynamicDrawUsage:function(){return Ci},DynamicReadUsage:function(){return pi},EdgesGeometry:function(){return lu},EllipseCurve:function(){return Wc},EqualDepth:function(){return et},EqualStencilFunc:function(){return li},EquirectangularReflectionMapping:function(){return At},EquirectangularRefractionMapping:function(){return pt},Euler:function(){return ra},EventDispatcher:function(){return Zi},ExtrudeBufferGeometry:function(){return rh},ExtrudeGeometry:function(){return Hu},FileLoader:function(){return NI},Float16BufferAttribute:function(){return Ta},Float32BufferAttribute:function(){return Ea},Float64BufferAttribute:function(){return Ja},FloatType:function(){return Ht},Fog:function(){return vs},FogExp2:function(){return fs},FramebufferTexture:function(){return Zc},FrontSide:function(){return Ze},Frustum:function(){return Ho},GLBufferAttribute:function(){return nC},GLSL1:function(){return yi},GLSL3:function(){return Gi},GreaterDepth:function(){return nt},GreaterEqualDepth:function(){return tt},GreaterEqualStencilFunc:function(){return ui},GreaterStencilFunc:function(){return si},GridHelper:function(){return ZC},Group:function(){return gs},HalfFloatType:function(){return zt},HemisphereLight:function(){return TI},HemisphereLightHelper:function(){return BC},HemisphereLightProbe:function(){return fd},IcosahedronBufferGeometry:function(){return ah},IcosahedronGeometry:function(){return Mu},ImageBitmapLoader:function(){return Ad},ImageLoader:function(){return zI},ImageUtils:function(){return rr},ImmediateRenderObject:function(){return DC},IncrementStencilOp:function(){return ei},IncrementWrapStencilOp:function(){return ni},InstancedBufferAttribute:function(){return ec},InstancedBufferGeometry:function(){return cd},InstancedInterleavedBuffer:function(){return tC},InstancedMesh:function(){return ac},Int16BufferAttribute:function(){return Ma},Int32BufferAttribute:function(){return La},Int8BufferAttribute:function(){return Ka},IntType:function(){return Nt},InterleavedBuffer:function(){return ys},InterleavedBufferAttribute:function(){return Bs},Interpolant:function(){return hI},InterpolateDiscrete:function(){return Rn},InterpolateLinear:function(){return qn},InterpolateSmooth:function(){return kn},InvertStencilOp:function(){return ri},KeepStencilOp:function(){return jn},KeyframeTrack:function(){return fI},LOD:function(){return Ls},LatheBufferGeometry:function(){return oh},LatheGeometry:function(){return Oc},Layers:function(){return aa},LessDepth:function(){return je},LessEqualDepth:function(){return $e},LessEqualStencilFunc:function(){return gi},LessStencilFunc:function(){return oi},Light:function(){return _I},LightProbe:function(){return ld},Line:function(){return Ic},Line3:function(){return IC},LineBasicMaterial:function(){return oc},LineCurve:function(){return Lc},LineCurve3:function(){return _c},LineDashedMaterial:function(){return lI},LineLoop:function(){return Ac},LineSegments:function(){return hc},LinearEncoding:function(){return Ln},LinearFilter:function(){return xt},LinearInterpolant:function(){return pI},LinearMipMapLinearFilter:function(){return Rt},LinearMipMapNearestFilter:function(){return Wt},LinearMipmapLinearFilter:function(){return Vt},LinearMipmapNearestFilter:function(){return St},LinearSRGBColorSpace:function(){return On},LinearToneMapping:function(){return gt},Loader:function(){return kI},LoaderUtils:function(){return sd},LoadingManager:function(){return RI},LoopOnce:function(){return Sn},LoopPingPong:function(){return Vn},LoopRepeat:function(){return Wn},LuminanceAlphaFormat:function(){return Ut},LuminanceFormat:function(){return Jt},MOUSE:function(){return he},Material:function(){return qa},MaterialLoader:function(){return gd},MathUtils:function(){return zi},Matrix3:function(){return Fi},Matrix4:function(){return Dr},MaxEquation:function(){return He},Mesh:function(){return fo},MeshBasicMaterial:function(){return ka},MeshDepthMaterial:function(){return ts},MeshDistanceMaterial:function(){return ns},MeshLambertMaterial:function(){return aI},MeshMatcapMaterial:function(){return oI},MeshNormalMaterial:function(){return rI},MeshPhongMaterial:function(){return nI},MeshPhysicalMaterial:function(){return tI},MeshStandardMaterial:function(){return eI},MeshToonMaterial:function(){return iI},MinEquation:function(){return Ke},MirroredRepeatWrapping:function(){return bt},MixOperation:function(){return at},MultiplyBlending:function(){return qe},MultiplyOperation:function(){return rt},NearestFilter:function(){return yt},NearestMipMapLinearFilter:function(){return wt},NearestMipMapNearestFilter:function(){return Bt},NearestMipmapLinearFilter:function(){return Zt},NearestMipmapNearestFilter:function(){return Gt},NeverDepth:function(){return Oe},NeverStencilFunc:function(){return ai},NoBlending:function(){return Se},NoColorSpace:function(){return Dn},NoToneMapping:function(){return lt},NormalAnimationBlendMode:function(){return Kn},NormalBlending:function(){return We},NotEqualDepth:function(){return it},NotEqualStencilFunc:function(){return ci},NumberKeyframeTrack:function(){return yI},Object3D:function(){return fa},ObjectLoader:function(){return Id},ObjectSpaceNormalMap:function(){return Un},OctahedronBufferGeometry:function(){return lh},OctahedronGeometry:function(){return Fu},OneFactor:function(){return Me},OneMinusDstAlphaFactor:function(){return Je},OneMinusDstColorFactor:function(){return De},OneMinusSrcAlphaFactor:function(){return Te},OneMinusSrcColorFactor:function(){return Le},OrthographicCamera:function(){return Qo},PCFShadowMap:function(){return ye},PCFSoftShadowMap:function(){return Ge},PMREMGenerator:function(){return ol},Path:function(){return Pc},PerspectiveCamera:function(){return xo},Plane:function(){return Yo},PlaneBufferGeometry:function(){return gh},PlaneGeometry:function(){return Fo},PlaneHelper:function(){return MC},PointLight:function(){return td},PointLightHelper:function(){return vC},Points:function(){return yc},PointsMaterial:function(){return pc},PolarGridHelper:function(){return wC},PolyhedronBufferGeometry:function(){return sh},PolyhedronGeometry:function(){return tu},PositionalAudio:function(){return Kd},PropertyBinding:function(){return Ud},PropertyMixer:function(){return zd},QuadraticBezierCurve:function(){return Tc},QuadraticBezierCurve3:function(){return Ec},Quaternion:function(){return Ar},QuaternionKeyframeTrack:function(){return BI},QuaternionLinearInterpolant:function(){return GI},REVISION:function(){return Ce},RGBADepthPacking:function(){return En},RGBAFormat:function(){return Et},RGBAIntegerFormat:function(){return en},RGBA_ASTC_10x10_Format:function(){return Bn},RGBA_ASTC_10x5_Format:function(){return bn},RGBA_ASTC_10x6_Format:function(){return yn},RGBA_ASTC_10x8_Format:function(){return Gn},RGBA_ASTC_12x10_Format:function(){return Zn},RGBA_ASTC_12x12_Format:function(){return wn},RGBA_ASTC_4x4_Format:function(){return dn},RGBA_ASTC_5x4_Format:function(){return Cn},RGBA_ASTC_5x5_Format:function(){return hn},RGBA_ASTC_6x5_Format:function(){return An},RGBA_ASTC_6x6_Format:function(){return pn},RGBA_ASTC_8x5_Format:function(){return mn},RGBA_ASTC_8x6_Format:function(){return fn},RGBA_ASTC_8x8_Format:function(){return vn},RGBA_BPTC_Format:function(){return xn},RGBA_ETC2_EAC_Format:function(){return In},RGBA_PVRTC_2BPPV1_Format:function(){return sn},RGBA_PVRTC_4BPPV1_Format:function(){return gn},RGBA_S3TC_DXT1_Format:function(){return nn},RGBA_S3TC_DXT3_Format:function(){return rn},RGBA_S3TC_DXT5_Format:function(){return an},RGBFormat:function(){return Tt},RGB_ETC1_Format:function(){return cn},RGB_ETC2_Format:function(){return un},RGB_PVRTC_2BPPV1_Format:function(){return ln},RGB_PVRTC_4BPPV1_Format:function(){return on},RGB_S3TC_DXT1_Format:function(){return tn},RGFormat:function(){return jt},RGIntegerFormat:function(){return $t},RawShaderMaterial:function(){return $u},Ray:function(){return Ur},Raycaster:function(){return iC},RectAreaLight:function(){return ad},RedFormat:function(){return Ot},RedIntegerFormat:function(){return Qt},ReinhardToneMapping:function(){return st},RepeatWrapping:function(){return ft},ReplaceStencilOp:function(){return $n},ReverseSubtractEquation:function(){return Ne},RingBufferGeometry:function(){return ch},RingGeometry:function(){return Lu},SRGBColorSpace:function(){return Pn},Scene:function(){return bs},ShaderChunk:function(){return Lo},ShaderLib:function(){return To},ShaderMaterial:function(){return Zo},ShadowMaterial:function(){return ju},Shape:function(){return gu},ShapeBufferGeometry:function(){return uh},ShapeGeometry:function(){return _u},ShapePath:function(){return TC},ShapeUtils:function(){return Yu},ShortType:function(){return Xt},Skeleton:function(){return $s},SkeletonHelper:function(){return mC},SkinnedMesh:function(){return Ds},Source:function(){return ar},Sphere:function(){return zr},SphereBufferGeometry:function(){return Ih},SphereGeometry:function(){return Tu},Spherical:function(){return oC},SphericalHarmonics3:function(){return od},SplineCurve:function(){return Jc},SpotLight:function(){return OI},SpotLightHelper:function(){return CC},Sprite:function(){return Hs},SpriteMaterial:function(){return Zs},SrcAlphaFactor:function(){return _e},SrcAlphaSaturateFactor:function(){return Pe},SrcColorFactor:function(){return Fe},StaticCopyUsage:function(){return fi},StaticDrawUsage:function(){return di},StaticReadUsage:function(){return Ai},StereoCamera:function(){return Bd},StreamCopyUsage:function(){return bi},StreamDrawUsage:function(){return hi},StreamReadUsage:function(){return mi},StringKeyframeTrack:function(){return ZI},SubtractEquation:function(){return Ye},SubtractiveBlending:function(){return Re},TOUCH:function(){return Ae},TangentSpaceNormalMap:function(){return Jn},TetrahedronBufferGeometry:function(){return dh},TetrahedronGeometry:function(){return Eu},Texture:function(){return gr},TextureLoader:function(){return LI},TorusBufferGeometry:function(){return Ch},TorusGeometry:function(){return Ju},TorusKnotBufferGeometry:function(){return hh},TorusKnotGeometry:function(){return Uu},Triangle:function(){return Va},TriangleFanDrawMode:function(){return Fn},TriangleStripDrawMode:function(){return Mn},TrianglesDrawMode:function(){return zn},TubeBufferGeometry:function(){return Ah},TubeGeometry:function(){return Du},UVMapping:function(){return dt},Uint16BufferAttribute:function(){return Fa},Uint32BufferAttribute:function(){return _a},Uint8BufferAttribute:function(){return Ha},Uint8ClampedBufferAttribute:function(){return za},Uniform:function(){return jd},UniformsGroup:function(){return eC},UniformsLib:function(){return _o},UniformsUtils:function(){return Bo},UnsignedByteType:function(){return qt},UnsignedInt248Type:function(){return Lt},UnsignedIntType:function(){return Kt},UnsignedShort4444Type:function(){return Mt},UnsignedShort5551Type:function(){return Ft},UnsignedShortType:function(){return Yt},VSMShadowMap:function(){return Be},Vector2:function(){return Mi},Vector3:function(){return pr},Vector4:function(){return sr},VectorKeyframeTrack:function(){return wI},VideoTexture:function(){return Bc},WebGL1Renderer:function(){return ps},WebGL3DRenderTarget:function(){return Cr},WebGLArrayRenderTarget:function(){return Ir},WebGLCubeRenderTarget:function(){return Ro},WebGLMultipleRenderTargets:function(){return hr},WebGLMultisampleRenderTarget:function(){return PC},WebGLRenderTarget:function(){return cr},WebGLRenderer:function(){return As},WebGLUtils:function(){return os},WireframeGeometry:function(){return Pu},WrapAroundEnding:function(){return Nn},ZeroCurvatureEnding:function(){return Xn},ZeroFactor:function(){return ze},ZeroSlopeEnding:function(){return Yn},ZeroStencilOp:function(){return Qn},_SRGBAFormat:function(){return Bi},sRGBEncoding:function(){return _n}});var t,i=n(2791),r=n.t(i,2),a=n(1250);function o(e){if(Array.isArray(e))return e}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function g(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(g){l=!0,r=g}finally{try{o||null==n.return||n.return()}finally{if(l)throw r}}return a}}(e,t)||g(e,t)||s()}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var I=function(e){return e};var d="beforeunload",C="popstate";function h(e){e.preventDefault(),e.returnValue=""}function A(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function p(){return Math.random().toString(36).substr(2,8)}function m(e){var t=e.pathname,n=void 0===t?"/":t,i=e.search,r=void 0===i?"":i,a=e.hash,o=void 0===a?"":a;return r&&"?"!==r&&(n+="?"===r.charAt(0)?r:"?"+r),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function f(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}var v=(0,i.createContext)(null);var b=(0,i.createContext)(null);var y=(0,i.createContext)({outlet:null,matches:[]});function G(e,t){if(!e)throw new Error(t)}function B(e,t,n){void 0===n&&(n="/");var i=R(("string"===typeof t?f(t):t).pathname||"/",n);if(null==i)return null;var r=Z(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(r);for(var a=null,o=0;null==a&&o<r.length;++o)a=W(r[o],i);return a}function Z(e,t,n,i){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i=""),e.forEach((function(e,r){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(i)||G(!1),a.relativePath=a.relativePath.slice(i.length));var o=q([i,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&G(!1),Z(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:S(o,e.index),routesMeta:l})})),t}var w=/^:\w+$/,x=function(e){return"*"===e};function S(e,t){var n=e.split("/"),i=n.length;return n.some(x)&&(i+=-2),t&&(i+=2),n.filter((function(e){return!x(e)})).reduce((function(e,t){return e+(w.test(t)?3:""===t?1:10)}),i)}function W(e,t){for(var n=e.routesMeta,i={},r="/",a=[],o=0;o<n.length;++o){var l=n[o],g=o===n.length-1,s="/"===r?t:t.slice(r.length)||"/",c=V({path:l.relativePath,caseSensitive:l.caseSensitive,end:g},s);if(!c)return null;Object.assign(i,c.params);var u=l.route;a.push({params:i,pathname:q([r,c.pathname]),pathnameBase:k(q([r,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(r=q([r,c.pathnameBase]))}return a}function V(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return i.push(t),"([^\\/]+)"}));e.endsWith("*")?(i.push("*"),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(r,t?void 0:"i"),i]}(e.path,e.caseSensitive,e.end),i=c(n,2),r=i[0],a=i[1],o=t.match(r);if(!o)return null;var l=o[0],g=l.replace(/(.)\/+$/,"$1"),s=o.slice(1),u=a.reduce((function(e,t,n){if("*"===t){var i=s[n]||"";g=l.slice(0,l.length-i.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(s[n]||""),e}),{});return{params:u,pathname:l,pathnameBase:g,pattern:e}}function R(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var q=function(e){return e.join("/").replace(/\/\/+/g,"/")},k=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")};function X(){return null!=(0,i.useContext)(b)}function Y(){return X()||G(!1),(0,i.useContext)(b).location}var N;function K(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,r,a){return(0,i.createElement)(y.Provider,{children:void 0!==r.route.element?r.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function H(e){G(!1)}function z(e){var n=e.basename,r=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,l=e.location,g=e.navigationType,s=void 0===g?t.Pop:g,c=e.navigator,u=e.static,I=void 0!==u&&u;X()&&G(!1);var d=k(r),C=(0,i.useMemo)((function(){return{basename:d,navigator:c,static:I}}),[d,c,I]);"string"===typeof l&&(l=f(l));var h=l,A=h.pathname,p=void 0===A?"/":A,m=h.search,y=void 0===m?"":m,B=h.hash,Z=void 0===B?"":B,w=h.state,x=void 0===w?null:w,S=h.key,W=void 0===S?"default":S,V=(0,i.useMemo)((function(){var e=R(p,d);return null==e?null:{pathname:e,search:y,hash:Z,state:x,key:W}}),[d,p,y,Z,x,W]);return null==V?null:(0,i.createElement)(v.Provider,{value:C},(0,i.createElement)(b.Provider,{children:o,value:{location:V,navigationType:s}}))}function M(e){var t=e.children,n=e.location;return function(e,t){X()||G(!1);var n,r=(0,i.useContext)(y).matches,a=r[r.length-1],o=a?a.params:{},l=(a&&a.pathname,a?a.pathnameBase:"/"),g=(a&&a.route,Y());if(t){var s,c="string"===typeof t?f(t):t;"/"===l||(null==(s=c.pathname)?void 0:s.startsWith(l))||G(!1),n=c}else n=g;var u=n.pathname||"/",I=B(e,{pathname:"/"===l?u:u.slice(l.length)||"/"});return K(I&&I.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:q([l,e.pathname]),pathnameBase:"/"===e.pathnameBase?l:q([l,e.pathnameBase])})})),r)}(F(t),n)}function F(e){var t=[];return i.Children.forEach(e,(function(e){if((0,i.isValidElement)(e))if(e.type!==i.Fragment){e.type!==H&&G(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=F(e.props.children)),t.push(n)}else t.push.apply(t,F(e.props.children))})),t}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=g(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function J(e,t){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},J(e,t)}function U(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function D(e,t,n){return D=U()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&J(r,n.prototype),r},D.apply(null,arguments)}function P(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function O(e){return function(e){if(Array.isArray(e))return l(e)}(e)||P(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e){return o(e)||P(e)||g(e)||s()}function j(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function te(e,t,n){return t&&ee(e.prototype,t),n&&ee(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ne(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}function ie(e){return ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ie(e)}function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e,t){if(t&&("object"===re(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ae(e)}function le(e){var t=U();return function(){var n,i=ie(e);if(t){var r=ie(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return oe(this,n)}}function ge(e){var t="function"===typeof Map?new Map:void 0;return ge=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return D(e,arguments,ie(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),J(i,e)},ge(e)}function se(e,t,n,i,r,a,o){try{var l=e[a](o),g=l.value}catch(s){return void n(s)}l.done?t(g):Promise.resolve(g).then(i,r)}function ce(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){se(a,i,r,o,l,"next",e)}function l(e){se(a,i,r,o,l,"throw",e)}o(void 0)}))}}function ue(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ie(e)););return e}function Ie(){return Ie="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=ue(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},Ie.apply(this,arguments)}function de(){de=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(w){l=function(e,t,n){return e[t]=n}}function g(e,t,n,i){var r=t&&t.prototype instanceof u?t:u,a=Object.create(r.prototype),o=new G(i||[]);return a._invoke=function(e,t,n){var i="suspendedStart";return function(r,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw a;return Z()}for(n.method=r,n.arg=a;;){var o=n.delegate;if(o){var l=v(o,n);if(l){if(l===c)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var g=s(e,t,n);if("normal"===g.type){if(i=n.done?"completed":"suspendedYield",g.arg===c)continue;return{value:g.arg,done:n.done}}"throw"===g.type&&(i="completed",n.method="throw",n.arg=g.arg)}}}(e,n,o),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(w){return{type:"throw",arg:w}}}e.wrap=g;var c={};function u(){}function I(){}function d(){}var C={};l(C,r,(function(){return this}));var h=Object.getPrototypeOf,A=h&&h(h(B([])));A&&A!==t&&n.call(A,r)&&(C=A);var p=d.prototype=u.prototype=Object.create(C);function m(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function f(e,t){function i(r,a,o,l){var g=s(e[r],e,a);if("throw"!==g.type){var c=g.arg,u=c.value;return u&&"object"==re(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){i("next",e,o,l)}),(function(e){i("throw",e,o,l)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,l)}))}l(g.arg)}var r;this._invoke=function(e,n){function a(){return new t((function(t,r){i(e,n,t,r)}))}return r=r?r.then(a,a):a()}}function v(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,v(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var i=s(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,c;var r=i.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function y(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function G(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function B(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:Z}}function Z(){return{value:void 0,done:!0}}return I.prototype=d,l(p,"constructor",d),l(d,"constructor",I),I.displayName=l(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===I||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,l(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e},e.awrap=function(e){return{__await:e}},m(f.prototype),l(f.prototype,a,(function(){return this})),e.AsyncIterator=f,e.async=function(t,n,i,r,a){void 0===a&&(a=Promise);var o=new f(g(t,n,i,r),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},m(p),l(p,o,"Generator"),l(p,r,(function(){return this})),l(p,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},e.values=B,G.prototype={constructor:G,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(y),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return o.type="throw",o.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),g=n.call(a,"finallyLoc");if(l&&g){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!g)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),y(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;y(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:B(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}var Ce="144",he={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ae={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},pe=0,me=1,fe=2,ve=3,be=0,ye=1,Ge=2,Be=3,Ze=0,we=1,xe=2,Se=0,We=1,Ve=2,Re=3,qe=4,ke=5,Xe=100,Ye=101,Ne=102,Ke=103,He=104,ze=200,Me=201,Fe=202,Le=203,_e=204,Te=205,Ee=206,Je=207,Ue=208,De=209,Pe=210,Oe=0,Qe=1,je=2,$e=3,et=4,tt=5,nt=6,it=7,rt=0,at=1,ot=2,lt=0,gt=1,st=2,ct=3,ut=4,It=5,dt=300,Ct=301,ht=302,At=303,pt=304,mt=306,ft=1e3,vt=1001,bt=1002,yt=1003,Gt=1004,Bt=1004,Zt=1005,wt=1005,xt=1006,St=1007,Wt=1007,Vt=1008,Rt=1008,qt=1009,kt=1010,Xt=1011,Yt=1012,Nt=1013,Kt=1014,Ht=1015,zt=1016,Mt=1017,Ft=1018,Lt=1020,_t=1021,Tt=1022,Et=1023,Jt=1024,Ut=1025,Dt=1026,Pt=1027,Ot=1028,Qt=1029,jt=1030,$t=1031,en=1033,tn=33776,nn=33777,rn=33778,an=33779,on=35840,ln=35841,gn=35842,sn=35843,cn=36196,un=37492,In=37496,dn=37808,Cn=37809,hn=37810,An=37811,pn=37812,mn=37813,fn=37814,vn=37815,bn=37816,yn=37817,Gn=37818,Bn=37819,Zn=37820,wn=37821,xn=36492,Sn=2200,Wn=2201,Vn=2202,Rn=2300,qn=2301,kn=2302,Xn=2400,Yn=2401,Nn=2402,Kn=2500,Hn=2501,zn=0,Mn=1,Fn=2,Ln=3e3,_n=3001,Tn=3200,En=3201,Jn=0,Un=1,Dn="",Pn="srgb",On="srgb-linear",Qn=0,jn=7680,$n=7681,ei=7682,ti=7683,ni=34055,ii=34056,ri=5386,ai=512,oi=513,li=514,gi=515,si=516,ci=517,ui=518,Ii=519,di=35044,Ci=35048,hi=35040,Ai=35045,pi=35049,mi=35041,fi=35046,vi=35050,bi=35042,yi="100",Gi="300 es",Bi=1035,Zi=function(){function e(){$(this,e)}return te(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,e);e.target=null}}}}]),e}(),wi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],xi=1234567,Si=Math.PI/180,Wi=180/Math.PI;function Vi(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(wi[255&e]+wi[e>>8&255]+wi[e>>16&255]+wi[e>>24&255]+"-"+wi[255&t]+wi[t>>8&255]+"-"+wi[t>>16&15|64]+wi[t>>24&255]+"-"+wi[63&n|128]+wi[n>>8&255]+"-"+wi[n>>16&255]+wi[n>>24&255]+wi[255&i]+wi[i>>8&255]+wi[i>>16&255]+wi[i>>24&255]).toLowerCase()}function Ri(e,t,n){return Math.max(t,Math.min(n,e))}function qi(e,t){return(e%t+t)%t}function ki(e,t,n){return(1-n)*e+n*t}function Xi(e){return 0===(e&e-1)&&0!==e}function Yi(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Ni(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Ki(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Hi(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}var zi=Object.freeze({__proto__:null,DEG2RAD:Si,RAD2DEG:Wi,generateUUID:Vi,clamp:Ri,euclideanModulo:qi,mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:ki,damp:function(e,t,n,i){return ki(e,t,1-Math.exp(-n*i))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(qi(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(xi=e);var t=xi+=1831565813;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Si},radToDeg:function(e){return e*Wi},isPowerOfTwo:Xi,ceilPowerOfTwo:Yi,floorPowerOfTwo:Ni,setQuaternionFromProperEuler:function(e,t,n,i,r){var a=Math.cos,o=Math.sin,l=a(n/2),g=o(n/2),s=a((t+i)/2),c=o((t+i)/2),u=a((t-i)/2),I=o((t-i)/2),d=a((i-t)/2),C=o((i-t)/2);switch(r){case"XYX":e.set(l*c,g*u,g*I,l*s);break;case"YZY":e.set(g*I,l*c,g*u,l*s);break;case"ZXZ":e.set(g*u,g*I,l*c,l*s);break;case"XZX":e.set(l*c,g*C,g*d,l*s);break;case"YXY":e.set(g*d,l*c,g*C,l*s);break;case"ZYZ":e.set(g*C,g*d,l*c,l*s);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:Hi,denormalize:Ki}),Mi=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;$(this,t),t.prototype.isVector2=!0,this.x=e,this.y=n}return te(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}}),e,this)}))}]),t}(),Fi=function(){function e(){$(this,e),e.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}return te(e,[{key:"set",value:function(e,t,n,i,r,a,o,l,g){var s=this.elements;return s[0]=e,s[1]=i,s[2]=o,s[3]=t,s[4]=r,s[5]=l,s[6]=n,s[7]=a,s[8]=g,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[3],l=n[6],g=n[1],s=n[4],c=n[7],u=n[2],I=n[5],d=n[8],C=i[0],h=i[3],A=i[6],p=i[1],m=i[4],f=i[7],v=i[2],b=i[5],y=i[8];return r[0]=a*C+o*p+l*v,r[3]=a*h+o*m+l*b,r[6]=a*A+o*f+l*y,r[1]=g*C+s*p+c*v,r[4]=g*h+s*m+c*b,r[7]=g*A+s*f+c*y,r[2]=u*C+I*p+d*v,r[5]=u*h+I*m+d*b,r[8]=u*A+I*f+d*y,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],l=e[6],g=e[7],s=e[8];return t*a*s-t*o*g-n*r*s+n*o*l+i*r*g-i*a*l}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],l=e[6],g=e[7],s=e[8],c=s*a-o*g,u=o*l-s*r,I=g*r-a*l,d=t*c+n*u+i*I;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);var C=1/d;return e[0]=c*C,e[1]=(i*g-s*n)*C,e[2]=(o*n-i*a)*C,e[3]=u*C,e[4]=(s*t-i*l)*C,e[5]=(i*r-o*t)*C,e[6]=I*C,e[7]=(n*l-g*t)*C,e[8]=(a*t-n*r)*C,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,i,r,a,o){var l=Math.cos(r),g=Math.sin(r);return this.set(n*l,n*g,-n*(l*a+g*o)+a+e,-i*g,i*l,-i*(-g*a+l*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],a=i[3],o=i[6],l=i[1],g=i[4],s=i[7];return i[0]=t*r+n*l,i[3]=t*a+n*g,i[6]=t*o+n*s,i[1]=-n*r+t*l,i[4]=-n*a+t*g,i[7]=-n*o+t*s,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();function Li(e){for(var t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}var _i={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Ti(e,t){return new _i[e](t)}function Ei(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Ji(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Ui(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var Di=(L(N={},Pn,L({},On,Ji)),L(N,On,L({},Pn,Ui)),N),Pi={legacyMode:!0,get workingColorSpace(){return On},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(this.legacyMode||t===n||!t||!n)return e;if(Di[t]&&void 0!==Di[t][n]){var i=Di[t][n];return e.r=i(e.r),e.g=i(e.g),e.b=i(e.b),e}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}},Oi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qi={r:0,g:0,b:0},ji={h:0,s:0,l:0},$i={h:0,s:0,l:0};function er(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function tr(e,t){return t.r=e.r,t.g=e.g,t.b=e.b,t}var nr,ir=function(e){function t(e,n,i){return $(this,t),this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===n&&void 0===i?this.set(e):this.setRGB(e,n,i)}return te(t,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pn;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Pi.toWorkingColorSpace(this,t),this}},{key:"setRGB",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:On;return this.r=e,this.g=t,this.b=n,Pi.toWorkingColorSpace(this,i),this}},{key:"setHSL",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:On;if(e=qi(e,1),t=Ri(t,0,1),n=Ri(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,a=2*n-r;this.r=er(a,r,e+1/3),this.g=er(a,r,e),this.b=er(a,r,e-1/3)}return Pi.toWorkingColorSpace(this,i),this}},{key:"setStyle",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pn;function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var r,a=t[1],o=t[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,Pi.toWorkingColorSpace(this,n),i(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,Pi.toWorkingColorSpace(this,n),i(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){var l=parseFloat(r[1])/360,g=parseFloat(r[2])/100,s=parseFloat(r[3])/100;return i(r[4]),this.setHSL(l,g,s,n)}}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){var c=t[1],u=c.length;if(3===u)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,Pi.toWorkingColorSpace(this,n),this;if(6===u)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,Pi.toWorkingColorSpace(this,n),this}return e&&e.length>0?this.setColorName(e,n):this}},{key:"setColorName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pn,n=Oi[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copySRGBToLinear",value:function(e){return this.r=Ji(e.r),this.g=Ji(e.g),this.b=Ji(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=Ui(e.r),this.g=Ui(e.g),this.b=Ui(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn;return Pi.fromWorkingColorSpace(tr(this,Qi),e),Ri(255*Qi.r,0,255)<<16^Ri(255*Qi.g,0,255)<<8^Ri(255*Qi.b,0,255)<<0}},{key:"getHexString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn;return("000000"+this.getHex(e).toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:On;Pi.fromWorkingColorSpace(tr(this,Qi),t);var n,i,r=Qi.r,a=Qi.g,o=Qi.b,l=Math.max(r,a,o),g=Math.min(r,a,o),s=(g+l)/2;if(g===l)n=0,i=0;else{var c=l-g;switch(i=s<=.5?c/(l+g):c/(2-l-g),l){case r:n=(a-o)/c+(a<o?6:0);break;case a:n=(o-r)/c+2;break;case o:n=(r-a)/c+4}n/=6}return e.h=n,e.s=i,e.l=s,e}},{key:"getRGB",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:On;return Pi.fromWorkingColorSpace(tr(this,Qi),t),e.r=Qi.r,e.g=Qi.g,e.b=Qi.b,e}},{key:"getStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pn;return Pi.fromWorkingColorSpace(tr(this,Qi),e),e!==Pn?"color(".concat(e," ").concat(Qi.r," ").concat(Qi.g," ").concat(Qi.b,")"):"rgb(".concat(255*Qi.r|0,",").concat(255*Qi.g|0,",").concat(255*Qi.b|0,")")}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(ji),ji.h+=e,ji.s+=t,ji.l+=n,this.setHSL(ji.h,ji.s,ji.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(ji),e.getHSL($i);var n=ki(ji.h,$i.h,t),i=ki(ji.s,$i.s,t),r=ki(ji.l,$i.l,t);return this.setHSL(n,i,r),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}},{key:"toJSON",value:function(){return this.getHex()}},{key:Symbol.iterator,value:de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.r;case 2:return e.next=4,this.g;case 4:return e.next=6,this.b;case 6:case"end":return e.stop()}}),e,this)}))}]),t}();ir.NAMES=Oi;var rr=function(){function e(){$(this,e)}return te(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===nr&&(nr=Ei("canvas")),nr.width=e.width,nr.height=e.height;var n=nr.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=nr}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var t=Ei("canvas");t.width=e.width,t.height=e.height;var n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);for(var i=n.getImageData(0,0,e.width,e.height),r=i.data,a=0;a<r.length;a++)r[a]=255*Ji(r[a]/255);return n.putImageData(i,0,0),t}if(e.data){for(var o=e.data.slice(0),l=0;l<o.length;l++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[l]=Math.floor(255*Ji(o[l]/255)):o[l]=Ji(o[l]);return{data:o,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}]),e}(),ar=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;$(this,e),this.isSource=!0,this.uuid=Vi(),this.data=t,this.version=0}return te(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];var n={uuid:this.uuid,url:""},i=this.data;if(null!==i){var r;if(Array.isArray(i)){r=[];for(var a=0,o=i.length;a<o;a++)i[a].isDataTexture?r.push(or(i[a].image)):r.push(or(i[a]))}else r=or(i);n.url=r}return t||(e.images[this.uuid]=n),n}}]),e}();function or(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?rr.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var lr=0,gr=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vt,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:vt,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:xt,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Vt,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Et,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:qt,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,I=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Ln;return $(this,n),(e=t.call(this)).isTexture=!0,Object.defineProperty(ae(e),"id",{value:lr++}),e.uuid=Vi(),e.name="",e.source=new ar(i),e.mipmaps=[],e.mapping=r,e.wrapS=a,e.wrapT=o,e.magFilter=l,e.minFilter=g,e.anisotropy=u,e.format=s,e.internalFormat=null,e.type=c,e.offset=new Mi(0,0),e.repeat=new Mi(1,1),e.center=new Mi(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new Fi,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=I,e.userData={},e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e.needsPMREMUpdate=!1,e}return te(n,[{key:"image",get:function(){return this.source.data},set:function(e){this.source.data=e}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(this.mapping!==dt)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ft:e.x=e.x-Math.floor(e.x);break;case vt:e.x=e.x<0?0:1;break;case bt:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ft:e.y=e.y-Math.floor(e.y);break;case vt:e.y=e.y<0?0:1;break;case bt:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}]),n}(Zi);gr.DEFAULT_IMAGE=null,gr.DEFAULT_MAPPING=dt;var sr=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;$(this,t),t.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}return te(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,i,r,a=.01,o=.1,l=e.elements,g=l[0],s=l[4],c=l[8],u=l[1],I=l[5],d=l[9],C=l[2],h=l[6],A=l[10];if(Math.abs(s-u)<a&&Math.abs(c-C)<a&&Math.abs(d-h)<a){if(Math.abs(s+u)<o&&Math.abs(c+C)<o&&Math.abs(d+h)<o&&Math.abs(g+I+A-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var p=(g+1)/2,m=(I+1)/2,f=(A+1)/2,v=(s+u)/4,b=(c+C)/4,y=(d+h)/4;return p>m&&p>f?p<a?(n=0,i=.707106781,r=.707106781):(i=v/(n=Math.sqrt(p)),r=b/n):m>f?m<a?(n=.707106781,i=0,r=.707106781):(n=v/(i=Math.sqrt(m)),r=y/i):f<a?(n=.707106781,i=.707106781,r=0):(n=b/(r=Math.sqrt(f)),i=y/r),this.set(n,i,r,t),this}var G=Math.sqrt((h-d)*(h-d)+(c-C)*(c-C)+(u-s)*(u-s));return Math.abs(G)<.001&&(G=1),this.x=(h-d)/G,this.y=(c-C)/G,this.z=(u-s)/G,this.w=Math.acos((g+I+A-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}}),e,this)}))}]),t}(),cr=function(e){ne(n,e);var t=le(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$(this,n),(r=t.call(this)).isWebGLRenderTarget=!0,r.width=e,r.height=i,r.depth=1,r.scissor=new sr(0,0,e,i),r.scissorTest=!1,r.viewport=new sr(0,0,e,i);var o={width:e,height:i,depth:1};return r.texture=new gr(o,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),r.texture.isRenderTargetTexture=!0,r.texture.flipY=!1,r.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,r.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,r.texture.minFilter=void 0!==a.minFilter?a.minFilter:xt,r.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,r.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,r.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,r.samples=void 0!==a.samples?a.samples:0,r}return te(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;var t=Object.assign({},e.texture.image);return this.texture.source=new ar(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Zi),ur=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return $(this,n),(e=t.call(this,null)).isDataArrayTexture=!0,e.image={data:i,width:r,height:a,depth:o},e.magFilter=yt,e.minFilter=yt,e.wrapR=vt,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return te(n)}(gr),Ir=function(e){ne(n,e);var t=le(n);function n(e,i,r){var a;return $(this,n),(a=t.call(this,e,i)).isWebGLArrayRenderTarget=!0,a.depth=r,a.texture=new ur(null,e,i,r),a.texture.isRenderTargetTexture=!0,a}return te(n)}(cr),dr=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return $(this,n),(e=t.call(this,null)).isData3DTexture=!0,e.image={data:i,width:r,height:a,depth:o},e.magFilter=yt,e.minFilter=yt,e.wrapR=vt,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return te(n)}(gr),Cr=function(e){ne(n,e);var t=le(n);function n(e,i,r){var a;return $(this,n),(a=t.call(this,e,i)).isWebGL3DRenderTarget=!0,a.depth=r,a.texture=new dr(null,e,i,r),a.texture.isRenderTargetTexture=!0,a}return te(n)}(cr),hr=function(e){ne(n,e);var t=le(n);function n(e,i,r){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};$(this,n),(a=t.call(this,e,i,o)).isWebGLMultipleRenderTargets=!0;var l=a.texture;a.texture=[];for(var g=0;g<r;g++)a.texture[g]=l.clone(),a.texture[g].isRenderTargetTexture=!0;return a}return te(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}]),n}(cr),Ar=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;$(this,t),this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}return te(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){var n=e._x,i=e._y,r=e._z,a=e._order,o=Math.cos,l=Math.sin,g=o(n/2),s=o(i/2),c=o(r/2),u=l(n/2),I=l(i/2),d=l(r/2);switch(a){case"XYZ":this._x=u*s*c+g*I*d,this._y=g*I*c-u*s*d,this._z=g*s*d+u*I*c,this._w=g*s*c-u*I*d;break;case"YXZ":this._x=u*s*c+g*I*d,this._y=g*I*c-u*s*d,this._z=g*s*d-u*I*c,this._w=g*s*c+u*I*d;break;case"ZXY":this._x=u*s*c-g*I*d,this._y=g*I*c+u*s*d,this._z=g*s*d+u*I*c,this._w=g*s*c-u*I*d;break;case"ZYX":this._x=u*s*c-g*I*d,this._y=g*I*c+u*s*d,this._z=g*s*d-u*I*c,this._w=g*s*c+u*I*d;break;case"YZX":this._x=u*s*c+g*I*d,this._y=g*I*c+u*s*d,this._z=g*s*d-u*I*c,this._w=g*s*c-u*I*d;break;case"XZY":this._x=u*s*c-g*I*d,this._y=g*I*c-u*s*d,this._z=g*s*d+u*I*c,this._w=g*s*c+u*I*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],i=t[4],r=t[8],a=t[1],o=t[5],l=t[9],g=t[2],s=t[6],c=t[10],u=n+o+c;if(u>0){var I=.5/Math.sqrt(u+1);this._w=.25/I,this._x=(s-l)*I,this._y=(r-g)*I,this._z=(a-i)*I}else if(n>o&&n>c){var d=2*Math.sqrt(1+n-o-c);this._w=(s-l)/d,this._x=.25*d,this._y=(i+a)/d,this._z=(r+g)/d}else if(o>c){var C=2*Math.sqrt(1+o-n-c);this._w=(r-g)/C,this._x=(i+a)/C,this._y=.25*C,this._z=(l+s)/C}else{var h=2*Math.sqrt(1+c-n-o);this._w=(a-i)/h,this._x=(r+g)/h,this._y=(l+s)/h,this._z=.25*h}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(Ri(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var i=Math.min(1,t/n);return this.slerp(e,i),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e){return this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,i=e._y,r=e._z,a=e._w,o=t._x,l=t._y,g=t._z,s=t._w;return this._x=n*s+a*o+i*g-r*l,this._y=i*s+a*l+r*o-n*g,this._z=r*s+a*g+n*l-i*o,this._w=a*s-n*o-i*l-r*g,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*e._w+n*e._x+i*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;var l=1-o*o;if(l<=Number.EPSILON){var g=1-t;return this._w=g*a+t*this._w,this._x=g*n+t*this._x,this._y=g*i+t*this._y,this._z=g*r+t*this._z,this.normalize(),this._onChangeCallback(),this}var s=Math.sqrt(l),c=Math.atan2(s,o),u=Math.sin((1-t)*c)/s,I=Math.sin(t*c)/s;return this._w=a*u+this._w*I,this._x=n*u+this._x*I,this._y=i*u+this._y*I,this._z=r*u+this._z*I,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){return this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._w;case 8:case"end":return e.stop()}}),e,this)}))}],[{key:"slerpFlat",value:function(e,t,n,i,r,a,o){var l=n[i+0],g=n[i+1],s=n[i+2],c=n[i+3],u=r[a+0],I=r[a+1],d=r[a+2],C=r[a+3];if(0===o)return e[t+0]=l,e[t+1]=g,e[t+2]=s,void(e[t+3]=c);if(1===o)return e[t+0]=u,e[t+1]=I,e[t+2]=d,void(e[t+3]=C);if(c!==C||l!==u||g!==I||s!==d){var h=1-o,A=l*u+g*I+s*d+c*C,p=A>=0?1:-1,m=1-A*A;if(m>Number.EPSILON){var f=Math.sqrt(m),v=Math.atan2(f,A*p);h=Math.sin(h*v)/f,o=Math.sin(o*v)/f}var b=o*p;if(l=l*h+u*b,g=g*h+I*b,s=s*h+d*b,c=c*h+C*b,h===1-o){var y=1/Math.sqrt(l*l+g*g+s*s+c*c);l*=y,g*=y,s*=y,c*=y}}e[t]=l,e[t+1]=g,e[t+2]=s,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,i,r,a){var o=n[i],l=n[i+1],g=n[i+2],s=n[i+3],c=r[a],u=r[a+1],I=r[a+2],d=r[a+3];return e[t]=o*d+s*c+l*I-g*u,e[t+1]=l*d+s*u+g*c-o*I,e[t+2]=g*d+s*I+o*u-l*c,e[t+3]=s*d-o*c-l*u-g*I,e}}]),t}(),pr=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;$(this,t),t.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}return te(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return this.applyQuaternion(fr.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(fr.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z,l=e.w,g=l*t+a*i-o*n,s=l*n+o*t-r*i,c=l*i+r*n-a*t,u=-r*t-a*n-o*i;return this.x=g*l+u*-r+s*-o-c*-a,this.y=s*l+u*-a+c*-r-g*-o,this.z=c*l+u*-o+g*-a-s*-r,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e){return this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,i=e.y,r=e.z,a=t.x,o=t.y,l=t.z;return this.x=i*l-r*o,this.y=r*a-n*l,this.z=n*o-i*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return mr.copy(this).projectOnVector(e),this.sub(mr)}},{key:"reflect",value:function(e){return this.sub(mr.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Ri(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"setFromEuler",value:function(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:Symbol.iterator,value:de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}}),e,this)}))}]),t}(),mr=new pr,fr=new Ar,vr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pr(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pr(-1/0,-1/0,-1/0);$(this,e),this.isBox3=!0,this.min=t,this.max=n}return te(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,l=0,g=e.length;l<g;l+=3){var s=e[l],c=e[l+1],u=e[l+2];s<t&&(t=s),c<n&&(n=c),u<i&&(i=u),s>r&&(r=s),c>a&&(a=c),u>o&&(o=u)}return this.min.set(t,n,i),this.max.set(r,a,o),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,l=0,g=e.count;l<g;l++){var s=e.getX(l),c=e.getY(l),u=e.getZ(l);s<t&&(t=s),c<n&&(n=c),u<i&&(i=u),s>r&&(r=s),c>a&&(a=c),u>o&&(o=u)}return this.min.set(t,n,i),this.max.set(r,a,o),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=yr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);var n=e.geometry;if(void 0!==n)if(t&&void 0!=n.attributes&&void 0!==n.attributes.position)for(var i=n.attributes.position,r=0,a=i.count;r<a;r++)yr.fromBufferAttribute(i,r).applyMatrix4(e.matrixWorld),this.expandByPoint(yr);else null===n.boundingBox&&n.computeBoundingBox(),Gr.copy(n.boundingBox),Gr.applyMatrix4(e.matrixWorld),this.union(Gr);for(var o=e.children,l=0,g=o.length;l<g;l++)this.expandByObject(o[l],t);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,yr),yr.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(Vr),Rr.subVectors(this.max,Vr),Br.subVectors(e.a,Vr),Zr.subVectors(e.b,Vr),wr.subVectors(e.c,Vr),xr.subVectors(Zr,Br),Sr.subVectors(wr,Zr),Wr.subVectors(Br,wr);var t=[0,-xr.z,xr.y,0,-Sr.z,Sr.y,0,-Wr.z,Wr.y,xr.z,0,-xr.x,Sr.z,0,-Sr.x,Wr.z,0,-Wr.x,-xr.y,xr.x,0,-Sr.y,Sr.x,0,-Wr.y,Wr.x,0];return!!Xr(t,Br,Zr,wr,Rr)&&(!!Xr(t=[1,0,0,0,1,0,0,0,1],Br,Zr,wr,Rr)&&(qr.crossVectors(xr,Sr),Xr(t=[qr.x,qr.y,qr.z],Br,Zr,wr,Rr)))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return yr.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(yr).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(br[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),br[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),br[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),br[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),br[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),br[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),br[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),br[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(br)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),br=[new pr,new pr,new pr,new pr,new pr,new pr,new pr,new pr],yr=new pr,Gr=new vr,Br=new pr,Zr=new pr,wr=new pr,xr=new pr,Sr=new pr,Wr=new pr,Vr=new pr,Rr=new pr,qr=new pr,kr=new pr;function Xr(e,t,n,i,r){for(var a=0,o=e.length-3;a<=o;a+=3){kr.fromArray(e,a);var l=r.x*Math.abs(kr.x)+r.y*Math.abs(kr.y)+r.z*Math.abs(kr.z),g=t.dot(kr),s=n.dot(kr),c=i.dot(kr);if(Math.max(-Math.max(g,s,c),Math.min(g,s,c))>l)return!1}return!0}var Yr=new vr,Nr=new pr,Kr=new pr,Hr=new pr,zr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;$(this,e),this.center=t,this.radius=n}return te(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):Yr.setFromPoints(e).getCenter(n);for(var i=0,r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){Hr.subVectors(e,this.center);var t=Hr.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),i=.5*(n-this.radius);this.center.add(Hr.multiplyScalar(i/n)),this.radius+=i}return this}},{key:"union",value:function(e){return!0===this.center.equals(e.center)?Kr.set(0,0,1).multiplyScalar(e.radius):Kr.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(Nr.copy(e.center).add(Kr)),this.expandByPoint(Nr.copy(e.center).sub(Kr)),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Mr=new pr,Fr=new pr,Lr=new pr,_r=new pr,Tr=new pr,Er=new pr,Jr=new pr,Ur=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pr(0,0,-1);$(this,e),this.origin=t,this.direction=n}return te(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,Mr)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=Mr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Mr.copy(this.direction).multiplyScalar(t).add(this.origin),Mr.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,i){Fr.copy(e).add(t).multiplyScalar(.5),Lr.copy(t).sub(e).normalize(),_r.copy(this.origin).sub(Fr);var r,a,o,l,g=.5*e.distanceTo(t),s=-this.direction.dot(Lr),c=_r.dot(this.direction),u=-_r.dot(Lr),I=_r.lengthSq(),d=Math.abs(1-s*s);if(d>0)if(a=s*c-u,l=g*d,(r=s*u-c)>=0)if(a>=-l)if(a<=l){var C=1/d;o=(r*=C)*(r+s*(a*=C)+2*c)+a*(s*r+a+2*u)+I}else a=g,o=-(r=Math.max(0,-(s*a+c)))*r+a*(a+2*u)+I;else a=-g,o=-(r=Math.max(0,-(s*a+c)))*r+a*(a+2*u)+I;else a<=-l?o=-(r=Math.max(0,-(-s*g+c)))*r+(a=r>0?-g:Math.min(Math.max(-g,-u),g))*(a+2*u)+I:a<=l?(r=0,o=(a=Math.min(Math.max(-g,-u),g))*(a+2*u)+I):o=-(r=Math.max(0,-(s*g+c)))*r+(a=r>0?g:Math.min(Math.max(-g,-u),g))*(a+2*u)+I;else a=s>0?-g:g,o=-(r=Math.max(0,-(s*a+c)))*r+a*(a+2*u)+I;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(Lr).multiplyScalar(a).add(Fr),o}},{key:"intersectSphere",value:function(e,t){Mr.subVectors(e.center,this.origin);var n=Mr.dot(this.direction),i=Mr.dot(Mr)-n*n,r=e.radius*e.radius;if(i>r)return null;var a=Math.sqrt(r-i),o=n-a,l=n+a;return o<0&&l<0?null:o<0?this.at(l,t):this.at(o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,i,r,a,o,l,g=1/this.direction.x,s=1/this.direction.y,c=1/this.direction.z,u=this.origin;return g>=0?(n=(e.min.x-u.x)*g,i=(e.max.x-u.x)*g):(n=(e.max.x-u.x)*g,i=(e.min.x-u.x)*g),s>=0?(r=(e.min.y-u.y)*s,a=(e.max.y-u.y)*s):(r=(e.max.y-u.y)*s,a=(e.min.y-u.y)*s),n>a||r>i?null:((r>n||n!==n)&&(n=r),(a<i||i!==i)&&(i=a),c>=0?(o=(e.min.z-u.z)*c,l=(e.max.z-u.z)*c):(o=(e.max.z-u.z)*c,l=(e.min.z-u.z)*c),n>l||o>i?null:((o>n||n!==n)&&(n=o),(l<i||i!==i)&&(i=l),i<0?null:this.at(n>=0?n:i,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,Mr)}},{key:"intersectTriangle",value:function(e,t,n,i,r){Tr.subVectors(t,e),Er.subVectors(n,e),Jr.crossVectors(Tr,Er);var a,o=this.direction.dot(Jr);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}_r.subVectors(this.origin,e);var l=a*this.direction.dot(Er.crossVectors(_r,Er));if(l<0)return null;var g=a*this.direction.dot(Tr.cross(_r));if(g<0)return null;if(l+g>o)return null;var s=-a*_r.dot(Jr);return s<0?null:this.at(s/o,r)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),Dr=function(){function e(){$(this,e),e.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return te(e,[{key:"set",value:function(e,t,n,i,r,a,o,l,g,s,c,u,I,d,C,h){var A=this.elements;return A[0]=e,A[4]=t,A[8]=n,A[12]=i,A[1]=r,A[5]=a,A[9]=o,A[13]=l,A[2]=g,A[6]=s,A[10]=c,A[14]=u,A[3]=I,A[7]=d,A[11]=C,A[15]=h,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,i=1/Pr.setFromMatrixColumn(e,0).length(),r=1/Pr.setFromMatrixColumn(e,1).length(),a=1/Pr.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),o=Math.sin(n),l=Math.cos(i),g=Math.sin(i),s=Math.cos(r),c=Math.sin(r);if("XYZ"===e.order){var u=a*s,I=a*c,d=o*s,C=o*c;t[0]=l*s,t[4]=-l*c,t[8]=g,t[1]=I+d*g,t[5]=u-C*g,t[9]=-o*l,t[2]=C-u*g,t[6]=d+I*g,t[10]=a*l}else if("YXZ"===e.order){var h=l*s,A=l*c,p=g*s,m=g*c;t[0]=h+m*o,t[4]=p*o-A,t[8]=a*g,t[1]=a*c,t[5]=a*s,t[9]=-o,t[2]=A*o-p,t[6]=m+h*o,t[10]=a*l}else if("ZXY"===e.order){var f=l*s,v=l*c,b=g*s,y=g*c;t[0]=f-y*o,t[4]=-a*c,t[8]=b+v*o,t[1]=v+b*o,t[5]=a*s,t[9]=y-f*o,t[2]=-a*g,t[6]=o,t[10]=a*l}else if("ZYX"===e.order){var G=a*s,B=a*c,Z=o*s,w=o*c;t[0]=l*s,t[4]=Z*g-B,t[8]=G*g+w,t[1]=l*c,t[5]=w*g+G,t[9]=B*g-Z,t[2]=-g,t[6]=o*l,t[10]=a*l}else if("YZX"===e.order){var x=a*l,S=a*g,W=o*l,V=o*g;t[0]=l*s,t[4]=V-x*c,t[8]=W*c+S,t[1]=c,t[5]=a*s,t[9]=-o*s,t[2]=-g*s,t[6]=S*c+W,t[10]=x-V*c}else if("XZY"===e.order){var R=a*l,q=a*g,k=o*l,X=o*g;t[0]=l*s,t[4]=-c,t[8]=g*s,t[1]=R*c+X,t[5]=a*s,t[9]=q*c-k,t[2]=k*c-q,t[6]=o*s,t[10]=X*c+R}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(Qr,e,jr)}},{key:"lookAt",value:function(e,t,n){var i=this.elements;return ta.subVectors(e,t),0===ta.lengthSq()&&(ta.z=1),ta.normalize(),$r.crossVectors(n,ta),0===$r.lengthSq()&&(1===Math.abs(n.z)?ta.x+=1e-4:ta.z+=1e-4,ta.normalize(),$r.crossVectors(n,ta)),$r.normalize(),ea.crossVectors(ta,$r),i[0]=$r.x,i[4]=ea.x,i[8]=ta.x,i[1]=$r.y,i[5]=ea.y,i[9]=ta.y,i[2]=$r.z,i[6]=ea.z,i[10]=ta.z,this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[4],l=n[8],g=n[12],s=n[1],c=n[5],u=n[9],I=n[13],d=n[2],C=n[6],h=n[10],A=n[14],p=n[3],m=n[7],f=n[11],v=n[15],b=i[0],y=i[4],G=i[8],B=i[12],Z=i[1],w=i[5],x=i[9],S=i[13],W=i[2],V=i[6],R=i[10],q=i[14],k=i[3],X=i[7],Y=i[11],N=i[15];return r[0]=a*b+o*Z+l*W+g*k,r[4]=a*y+o*w+l*V+g*X,r[8]=a*G+o*x+l*R+g*Y,r[12]=a*B+o*S+l*q+g*N,r[1]=s*b+c*Z+u*W+I*k,r[5]=s*y+c*w+u*V+I*X,r[9]=s*G+c*x+u*R+I*Y,r[13]=s*B+c*S+u*q+I*N,r[2]=d*b+C*Z+h*W+A*k,r[6]=d*y+C*w+h*V+A*X,r[10]=d*G+C*x+h*R+A*Y,r[14]=d*B+C*S+h*q+A*N,r[3]=p*b+m*Z+f*W+v*k,r[7]=p*y+m*w+f*V+v*X,r[11]=p*G+m*x+f*R+v*Y,r[15]=p*B+m*S+f*q+v*N,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],o=e[5],l=e[9],g=e[13],s=e[2],c=e[6],u=e[10],I=e[14];return e[3]*(+r*l*c-i*g*c-r*o*u+n*g*u+i*o*I-n*l*I)+e[7]*(+t*l*I-t*g*u+r*a*u-i*a*I+i*g*s-r*l*s)+e[11]*(+t*g*c-t*o*I-r*a*c+n*a*I+r*o*s-n*g*s)+e[15]*(-i*o*s-t*l*c+t*o*u+i*a*c-n*a*u+n*l*s)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],l=e[6],g=e[7],s=e[8],c=e[9],u=e[10],I=e[11],d=e[12],C=e[13],h=e[14],A=e[15],p=c*h*g-C*u*g+C*l*I-o*h*I-c*l*A+o*u*A,m=d*u*g-s*h*g-d*l*I+a*h*I+s*l*A-a*u*A,f=s*C*g-d*c*g+d*o*I-a*C*I-s*o*A+a*c*A,v=d*c*l-s*C*l-d*o*u+a*C*u+s*o*h-a*c*h,b=t*p+n*m+i*f+r*v;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var y=1/b;return e[0]=p*y,e[1]=(C*u*r-c*h*r-C*i*I+n*h*I+c*i*A-n*u*A)*y,e[2]=(o*h*r-C*l*r+C*i*g-n*h*g-o*i*A+n*l*A)*y,e[3]=(c*l*r-o*u*r-c*i*g+n*u*g+o*i*I-n*l*I)*y,e[4]=m*y,e[5]=(s*h*r-d*u*r+d*i*I-t*h*I-s*i*A+t*u*A)*y,e[6]=(d*l*r-a*h*r-d*i*g+t*h*g+a*i*A-t*l*A)*y,e[7]=(a*u*r-s*l*r+s*i*g-t*u*g-a*i*I+t*l*I)*y,e[8]=f*y,e[9]=(d*c*r-s*C*r-d*n*I+t*C*I+s*n*A-t*c*A)*y,e[10]=(a*C*r-d*o*r+d*n*g-t*C*g-a*n*A+t*o*A)*y,e[11]=(s*o*r-a*c*r-s*n*g+t*c*g+a*n*I-t*o*I)*y,e[12]=v*y,e[13]=(s*C*i-d*c*i+d*n*u-t*C*u-s*n*h+t*c*h)*y,e[14]=(d*o*i-a*C*i-d*n*l+t*C*l+a*n*h-t*o*h)*y,e[15]=(a*c*i-s*o*i+s*n*l-t*c*l-a*n*u+t*o*u)*y,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,o=e.y,l=e.z,g=r*a,s=r*o;return this.set(g*a+n,g*o-i*l,g*l+i*o,0,g*o+i*l,s*o+n,s*l-i*a,0,g*l-i*o,s*l+i*a,r*l*l+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,i,r,a){return this.set(1,n,r,0,e,1,a,0,t,i,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var i=this.elements,r=t._x,a=t._y,o=t._z,l=t._w,g=r+r,s=a+a,c=o+o,u=r*g,I=r*s,d=r*c,C=a*s,h=a*c,A=o*c,p=l*g,m=l*s,f=l*c,v=n.x,b=n.y,y=n.z;return i[0]=(1-(C+A))*v,i[1]=(I+f)*v,i[2]=(d-m)*v,i[3]=0,i[4]=(I-f)*b,i[5]=(1-(u+A))*b,i[6]=(h+p)*b,i[7]=0,i[8]=(d+m)*y,i[9]=(h-p)*y,i[10]=(1-(u+C))*y,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}},{key:"decompose",value:function(e,t,n){var i=this.elements,r=Pr.set(i[0],i[1],i[2]).length(),a=Pr.set(i[4],i[5],i[6]).length(),o=Pr.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Or.copy(this);var l=1/r,g=1/a,s=1/o;return Or.elements[0]*=l,Or.elements[1]*=l,Or.elements[2]*=l,Or.elements[4]*=g,Or.elements[5]*=g,Or.elements[6]*=g,Or.elements[8]*=s,Or.elements[9]*=s,Or.elements[10]*=s,t.setFromRotationMatrix(Or),n.x=r,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,i,r,a){var o=this.elements,l=2*r/(t-e),g=2*r/(n-i),s=(t+e)/(t-e),c=(n+i)/(n-i),u=-(a+r)/(a-r),I=-2*a*r/(a-r);return o[0]=l,o[4]=0,o[8]=s,o[12]=0,o[1]=0,o[5]=g,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=u,o[14]=I,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,i,r,a){var o=this.elements,l=1/(t-e),g=1/(n-i),s=1/(a-r),c=(t+e)*l,u=(n+i)*g,I=(a+r)*s;return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*g,o[9]=0,o[13]=-u,o[2]=0,o[6]=0,o[10]=-2*s,o[14]=-I,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}(),Pr=new pr,Or=new Dr,Qr=new pr(0,0,0),jr=new pr(1,1,1),$r=new pr,ea=new pr,ta=new pr,na=new Dr,ia=new Ar,ra=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;$(this,t),this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}return te(t,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=e.elements,r=i[0],a=i[4],o=i[8],l=i[1],g=i[5],s=i[9],c=i[2],u=i[6],I=i[10];switch(t){case"XYZ":this._y=Math.asin(Ri(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-s,I),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(u,g),this._z=0);break;case"YXZ":this._x=Math.asin(-Ri(s,-1,1)),Math.abs(s)<.9999999?(this._y=Math.atan2(o,I),this._z=Math.atan2(l,g)):(this._y=Math.atan2(-c,r),this._z=0);break;case"ZXY":this._x=Math.asin(Ri(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(-c,I),this._z=Math.atan2(-a,g)):(this._y=0,this._z=Math.atan2(l,r));break;case"ZYX":this._y=Math.asin(-Ri(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(u,I),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-a,g));break;case"YZX":this._z=Math.asin(Ri(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-s,g),this._y=Math.atan2(-c,r)):(this._x=0,this._y=Math.atan2(o,I));break;case"XZY":this._z=Math.asin(-Ri(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(u,g),this._y=Math.atan2(o,r)):(this._x=Math.atan2(-s,I),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return na.makeRotationFromQuaternion(e),this.setFromRotationMatrix(na,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return ia.setFromEuler(this),this.setFromQuaternion(ia,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}},{key:Symbol.iterator,value:de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._x;case 2:return e.next=4,this._y;case 4:return e.next=6,this._z;case 6:return e.next=8,this._order;case 8:case"end":return e.stop()}}),e,this)}))},{key:"toVector3",value:function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}]),t}();ra.DefaultOrder="XYZ",ra.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var aa=function(){function e(){$(this,e),this.mask=1}return te(e,[{key:"set",value:function(e){this.mask=(1<<e|0)>>>0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!==(this.mask&e.mask)}},{key:"isEnabled",value:function(e){return 0!==(this.mask&(1<<e|0))}}]),e}(),oa=0,la=new pr,ga=new Ar,sa=new Dr,ca=new pr,ua=new pr,Ia=new pr,da=new Ar,Ca=new pr(1,0,0),ha=new pr(0,1,0),Aa=new pr(0,0,1),pa={type:"added"},ma={type:"removed"},fa=function(e){ne(n,e);var t=le(n);function n(){var e;$(this,n),(e=t.call(this)).isObject3D=!0,Object.defineProperty(ae(e),"id",{value:oa++}),e.uuid=Vi(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var i=new pr,r=new ra,a=new Ar,o=new pr(1,1,1);return r._onChange((function(){a.setFromEuler(r,!1)})),a._onChange((function(){r.setFromQuaternion(a,void 0,!1)})),Object.defineProperties(ae(e),{position:{configurable:!0,enumerable:!0,value:i},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Dr},normalMatrix:{value:new Fi}}),e.matrix=new Dr,e.matrixWorld=new Dr,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.matrixWorldAutoUpdate=n.DefaultMatrixWorldAutoUpdate,e.layers=new aa,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return te(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return ga.setFromAxisAngle(e,t),this.quaternion.multiply(ga),this}},{key:"rotateOnWorldAxis",value:function(e,t){return ga.setFromAxisAngle(e,t),this.quaternion.premultiply(ga),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(Ca,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis(ha,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(Aa,e)}},{key:"translateOnAxis",value:function(e,t){return la.copy(e).applyQuaternion(this.quaternion),this.position.add(la.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(Ca,e)}},{key:"translateY",value:function(e){return this.translateOnAxis(ha,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(Aa,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(sa.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?ca.copy(e):ca.set(e,t,n);var i=this.parent;this.updateWorldMatrix(!0,!1),ua.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?sa.lookAt(ua,ca,this.up):sa.lookAt(ca,ua,this.up),this.quaternion.setFromRotationMatrix(sa),i&&(sa.extractRotation(i.matrixWorld),ga.setFromRotationMatrix(sa),this.quaternion.premultiply(ga.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(pa)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(ma)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(ma)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),sa.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),sa.multiply(e.parent.matrixWorld)),e.applyMatrix4(sa),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ua,e,Ia),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ua,da,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++){var r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var i=this.children,r=0,a=i.length;r<a;r++){var o=i[r];!0===o.matrixWorldAutoUpdate&&o.updateWorldMatrix(!1,!0)}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var l=0,g=o.length;l<g;l++){var s=o[l];r(e.shapes,s)}else r(e.shapes,o)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var c=[],u=0,I=this.material.length;u<I;u++)c.push(r(e.materials,this.material[u]));i.material=c}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(var d=0;d<this.children.length;d++)i.children.push(this.children[d].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(var C=0;C<this.animations.length;C++){var h=this.animations[C];i.animations.push(r(e.animations,h))}}if(t){var A=B(e.geometries),p=B(e.materials),m=B(e.textures),f=B(e.images),v=B(e.shapes),b=B(e.skeletons),y=B(e.animations),G=B(e.nodes);A.length>0&&(n.geometries=A),p.length>0&&(n.materials=p),m.length>0&&(n.textures=m),f.length>0&&(n.images=f),v.length>0&&(n.shapes=v),b.length>0&&(n.skeletons=b),y.length>0&&(n.animations=y),G.length>0&&(n.nodes=G)}return n.object=i,n;function B(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}}]),n}(Zi);fa.DefaultUp=new pr(0,1,0),fa.DefaultMatrixAutoUpdate=!0,fa.DefaultMatrixWorldAutoUpdate=!0;var va=new pr,ba=new pr,ya=new pr,Ga=new pr,Ba=new pr,Za=new pr,wa=new pr,xa=new pr,Sa=new pr,Wa=new pr,Va=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pr,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new pr;$(this,e),this.a=t,this.b=n,this.c=i}return te(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return va.subVectors(this.c,this.b),ba.subVectors(this.a,this.b),.5*va.cross(ba).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,i,r,a){return e.getUV(t,this.a,this.b,this.c,n,i,r,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,i,r=this.a,a=this.b,o=this.c;Ba.subVectors(a,r),Za.subVectors(o,r),xa.subVectors(e,r);var l=Ba.dot(xa),g=Za.dot(xa);if(l<=0&&g<=0)return t.copy(r);Sa.subVectors(e,a);var s=Ba.dot(Sa),c=Za.dot(Sa);if(s>=0&&c<=s)return t.copy(a);var u=l*c-s*g;if(u<=0&&l>=0&&s<=0)return n=l/(l-s),t.copy(r).addScaledVector(Ba,n);Wa.subVectors(e,o);var I=Ba.dot(Wa),d=Za.dot(Wa);if(d>=0&&I<=d)return t.copy(o);var C=I*g-l*d;if(C<=0&&g>=0&&d<=0)return i=g/(g-d),t.copy(r).addScaledVector(Za,i);var h=s*d-I*c;if(h<=0&&c-s>=0&&I-d>=0)return wa.subVectors(o,a),i=(c-s)/(c-s+(I-d)),t.copy(a).addScaledVector(wa,i);var A=1/(h+C+u);return n=C*A,i=u*A,t.copy(r).addScaledVector(Ba,n).addScaledVector(Za,i)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,i){i.subVectors(n,t),va.subVectors(e,t),i.cross(va);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,i,r){va.subVectors(i,t),ba.subVectors(n,t),ya.subVectors(e,t);var a=va.dot(va),o=va.dot(ba),l=va.dot(ya),g=ba.dot(ba),s=ba.dot(ya),c=a*g-o*o;if(0===c)return r.set(-2,-1,-1);var u=1/c,I=(g*l-o*s)*u,d=(a*s-o*l)*u;return r.set(1-I-d,d,I)}},{key:"containsPoint",value:function(e,t,n,i){return this.getBarycoord(e,t,n,i,Ga),Ga.x>=0&&Ga.y>=0&&Ga.x+Ga.y<=1}},{key:"getUV",value:function(e,t,n,i,r,a,o,l){return this.getBarycoord(e,t,n,i,Ga),l.set(0,0),l.addScaledVector(r,Ga.x),l.addScaledVector(a,Ga.y),l.addScaledVector(o,Ga.z),l}},{key:"isFrontFacing",value:function(e,t,n,i){return va.subVectors(n,t),ba.subVectors(e,t),va.cross(ba).dot(i)<0}}]),e}(),Ra=0,qa=function(e){ne(n,e);var t=le(n);function n(){var e;return $(this,n),(e=t.call(this)).isMaterial=!0,Object.defineProperty(ae(e),"id",{value:Ra++}),e.uuid=Vi(),e.name="",e.type="Material",e.blending=We,e.side=Ze,e.vertexColors=!1,e.opacity=1,e.transparent=!1,e.blendSrc=_e,e.blendDst=Te,e.blendEquation=Xe,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=$e,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=Ii,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=jn,e.stencilZFail=jn,e.stencilZPass=jn,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return te(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==We&&(n.blending=this.blending),this.side!==Ze&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var r=i(e.textures),a=i(e.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(Zi),ka=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this)).isMeshBasicMaterial=!0,i.type="MeshBasicMaterial",i.color=new ir(16777215),i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=rt,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.fog=!0,i.setValues(e),i}return te(n,[{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(qa),Xa=new pr,Ya=new Mi,Na=function(){function e(t,n,i){if($(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===i,this.usage=di,this.updateRange={offset:0,count:-1},this.version=0}return te(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)Ya.fromBufferAttribute(this,t),Ya.applyMatrix3(e),this.setXY(t,Ya.x,Ya.y);else if(3===this.itemSize)for(var i=0,r=this.count;i<r;i++)Xa.fromBufferAttribute(this,i),Xa.applyMatrix3(e),this.setXYZ(i,Xa.x,Xa.y,Xa.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)Xa.fromBufferAttribute(this,t),Xa.applyMatrix4(e),this.setXYZ(t,Xa.x,Xa.y,Xa.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Xa.fromBufferAttribute(this,t),Xa.applyNormalMatrix(e),this.setXYZ(t,Xa.x,Xa.y,Xa.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Xa.fromBufferAttribute(this,t),Xa.transformDirection(e),this.setXYZ(t,Xa.x,Xa.y,Xa.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){var t=this.array[e*this.itemSize];return this.normalized&&(t=Ki(t,this.array)),t}},{key:"setX",value:function(e,t){return this.normalized&&(t=Hi(t,this.array)),this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){var t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ki(t,this.array)),t}},{key:"setY",value:function(e,t){return this.normalized&&(t=Hi(t,this.array)),this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){var t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ki(t,this.array)),t}},{key:"setZ",value:function(e,t){return this.normalized&&(t=Hi(t,this.array)),this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){var t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ki(t,this.array)),t}},{key:"setW",value:function(e,t){return this.normalized&&(t=Hi(t,this.array)),this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return e*=this.itemSize,this.normalized&&(t=Hi(t,this.array),n=Hi(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=Hi(t,this.array),n=Hi(n,this.array),i=Hi(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}},{key:"setXYZW",value:function(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=Hi(t,this.array),n=Hi(n,this.array),i=Hi(i,this.array),r=Hi(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==di&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}},{key:"copyColorsArray",value:function(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}},{key:"copyVector2sArray",value:function(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}},{key:"copyVector3sArray",value:function(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}},{key:"copyVector4sArray",value:function(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}]),e}(),Ka=function(e){ne(n,e);var t=le(n);function n(e,i,r){return $(this,n),t.call(this,new Int8Array(e),i,r)}return te(n)}(Na),Ha=function(e){ne(n,e);var t=le(n);function n(e,i,r){return $(this,n),t.call(this,new Uint8Array(e),i,r)}return te(n)}(Na),za=function(e){ne(n,e);var t=le(n);function n(e,i,r){return $(this,n),t.call(this,new Uint8ClampedArray(e),i,r)}return te(n)}(Na),Ma=function(e){ne(n,e);var t=le(n);function n(e,i,r){return $(this,n),t.call(this,new Int16Array(e),i,r)}return te(n)}(Na),Fa=function(e){ne(n,e);var t=le(n);function n(e,i,r){return $(this,n),t.call(this,new Uint16Array(e),i,r)}return te(n)}(Na),La=function(e){ne(n,e);var t=le(n);function n(e,i,r){return $(this,n),t.call(this,new Int32Array(e),i,r)}return te(n)}(Na),_a=function(e){ne(n,e);var t=le(n);function n(e,i,r){return $(this,n),t.call(this,new Uint32Array(e),i,r)}return te(n)}(Na),Ta=function(e){ne(n,e);var t=le(n);function n(e,i,r){var a;return $(this,n),(a=t.call(this,new Uint16Array(e),i,r)).isFloat16BufferAttribute=!0,a}return te(n)}(Na),Ea=function(e){ne(n,e);var t=le(n);function n(e,i,r){return $(this,n),t.call(this,new Float32Array(e),i,r)}return te(n)}(Na),Ja=function(e){ne(n,e);var t=le(n);function n(e,i,r){return $(this,n),t.call(this,new Float64Array(e),i,r)}return te(n)}(Na),Ua=0,Da=new Dr,Pa=new fa,Oa=new pr,Qa=new vr,ja=new vr,$a=new pr,eo=function(e){ne(n,e);var t=le(n);function n(){var e;return $(this,n),(e=t.call(this)).isBufferGeometry=!0,Object.defineProperty(ae(e),"id",{value:Ua++}),e.uuid=Vi(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return te(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return Array.isArray(e)?this.index=new(Li(e)?_a:Fa)(e,1):this.index=e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var i=(new Fi).getNormalMatrix(e);n.applyNormalMatrix(i),n.needsUpdate=!0}var r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return Da.makeRotationFromQuaternion(e),this.applyMatrix4(Da),this}},{key:"rotateX",value:function(e){return Da.makeRotationX(e),this.applyMatrix4(Da),this}},{key:"rotateY",value:function(e){return Da.makeRotationY(e),this.applyMatrix4(Da),this}},{key:"rotateZ",value:function(e){return Da.makeRotationZ(e),this.applyMatrix4(Da),this}},{key:"translate",value:function(e,t,n){return Da.makeTranslation(e,t,n),this.applyMatrix4(Da),this}},{key:"scale",value:function(e,t,n){return Da.makeScale(e,t,n),this.applyMatrix4(Da),this}},{key:"lookAt",value:function(e){return Pa.lookAt(e),Pa.updateMatrix(),this.applyMatrix4(Pa.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Oa).negate(),this.translate(Oa.x,Oa.y,Oa.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Ea(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new vr);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new pr(-1/0,-1/0,-1/0),new pr(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,i=t.length;n<i;n++){var r=t[n];Qa.setFromBufferAttribute(r),this.morphTargetsRelative?($a.addVectors(this.boundingBox.min,Qa.min),this.boundingBox.expandByPoint($a),$a.addVectors(this.boundingBox.max,Qa.max),this.boundingBox.expandByPoint($a)):(this.boundingBox.expandByPoint(Qa.min),this.boundingBox.expandByPoint(Qa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new zr);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new pr,1/0);if(e){var n=this.boundingSphere.center;if(Qa.setFromBufferAttribute(e),t)for(var i=0,r=t.length;i<r;i++){var a=t[i];ja.setFromBufferAttribute(a),this.morphTargetsRelative?($a.addVectors(Qa.min,ja.min),Qa.expandByPoint($a),$a.addVectors(Qa.max,ja.max),Qa.expandByPoint($a)):(Qa.expandByPoint(ja.min),Qa.expandByPoint(ja.max))}Qa.getCenter(n);for(var o=0,l=0,g=e.count;l<g;l++)$a.fromBufferAttribute(e,l),o=Math.max(o,n.distanceToSquared($a));if(t)for(var s=0,c=t.length;s<c;s++)for(var u=t[s],I=this.morphTargetsRelative,d=0,C=u.count;d<C;d++)$a.fromBufferAttribute(u,d),I&&(Oa.fromBufferAttribute(e,d),$a.add(Oa)),o=Math.max(o,n.distanceToSquared($a));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,i=t.position.array,r=t.normal.array,a=t.uv.array,o=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Na(new Float32Array(4*o),4));for(var l=this.getAttribute("tangent").array,g=[],s=[],c=0;c<o;c++)g[c]=new pr,s[c]=new pr;var u=new pr,I=new pr,d=new pr,C=new Mi,h=new Mi,A=new Mi,p=new pr,m=new pr,f=this.groups;0===f.length&&(f=[{start:0,count:n.length}]);for(var v=0,b=f.length;v<b;++v)for(var y=f[v],G=y.start,B=G,Z=G+y.count;B<Z;B+=3)N(n[B+0],n[B+1],n[B+2]);for(var w=new pr,x=new pr,S=new pr,W=new pr,V=0,R=f.length;V<R;++V)for(var q=f[V],k=q.start,X=k,Y=k+q.count;X<Y;X+=3)K(n[X+0]),K(n[X+1]),K(n[X+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function N(e,t,n){u.fromArray(i,3*e),I.fromArray(i,3*t),d.fromArray(i,3*n),C.fromArray(a,2*e),h.fromArray(a,2*t),A.fromArray(a,2*n),I.sub(u),d.sub(u),h.sub(C),A.sub(C);var r=1/(h.x*A.y-A.x*h.y);isFinite(r)&&(p.copy(I).multiplyScalar(A.y).addScaledVector(d,-h.y).multiplyScalar(r),m.copy(d).multiplyScalar(h.x).addScaledVector(I,-A.x).multiplyScalar(r),g[e].add(p),g[t].add(p),g[n].add(p),s[e].add(m),s[t].add(m),s[n].add(m))}function K(e){S.fromArray(r,3*e),W.copy(S);var t=g[e];w.copy(t),w.sub(S.multiplyScalar(S.dot(t))).normalize(),x.crossVectors(W,t);var n=x.dot(s[e])<0?-1:1;l[4*e]=w.x,l[4*e+1]=w.y,l[4*e+2]=w.z,l[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new Na(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var i=0,r=n.count;i<r;i++)n.setXYZ(i,0,0,0);var a=new pr,o=new pr,l=new pr,g=new pr,s=new pr,c=new pr,u=new pr,I=new pr;if(e)for(var d=0,C=e.count;d<C;d+=3){var h=e.getX(d+0),A=e.getX(d+1),p=e.getX(d+2);a.fromBufferAttribute(t,h),o.fromBufferAttribute(t,A),l.fromBufferAttribute(t,p),u.subVectors(l,o),I.subVectors(a,o),u.cross(I),g.fromBufferAttribute(n,h),s.fromBufferAttribute(n,A),c.fromBufferAttribute(n,p),g.add(u),s.add(u),c.add(u),n.setXYZ(h,g.x,g.y,g.z),n.setXYZ(A,s.x,s.y,s.z),n.setXYZ(p,c.x,c.y,c.z)}else for(var m=0,f=t.count;m<f;m+=3)a.fromBufferAttribute(t,m+0),o.fromBufferAttribute(t,m+1),l.fromBufferAttribute(t,m+2),u.subVectors(l,o),I.subVectors(a,o),u.cross(I),n.setXYZ(m+0,u.x,u.y,u.z),n.setXYZ(m+1,u.x,u.y,u.z),n.setXYZ(m+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)$a.fromBufferAttribute(e,t),$a.normalize(),e.setXYZ(t,$a.x,$a.y,$a.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,i=e.itemSize,r=e.normalized,a=new n.constructor(t.length*i),o=0,l=0,g=0,s=t.length;g<s;g++){o=e.isInterleavedBufferAttribute?t[g]*e.data.stride+e.offset:t[g]*i;for(var c=0;c<i;c++)a[l++]=n[o++]}return new Na(a,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,i=this.index.array,r=this.attributes;for(var a in r){var o=e(r[a],i);t.setAttribute(a,o)}var l=this.morphAttributes;for(var g in l){for(var s=[],c=l[g],u=0,I=c.length;u<I;u++){var d=e(c[u],i);s.push(d)}t.morphAttributes[g]=s}t.morphTargetsRelative=this.morphTargetsRelative;for(var C=this.groups,h=0,A=C.length;h<A;h++){var p=C[h];t.addGroup(p.start,p.count,p.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;null!==i&&(e.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var a in r){var o=r[a];e.data.attributes[a]=o.toJSON(e.data)}var l={},g=!1;for(var s in this.morphAttributes){for(var c=this.morphAttributes[s],u=[],I=0,d=c.length;I<d;I++){var C=c[I];u.push(C.toJSON(e.data))}u.length>0&&(l[s]=u,g=!0)}g&&(e.data.morphAttributes=l,e.data.morphTargetsRelative=this.morphTargetsRelative);var h=this.groups;h.length>0&&(e.data.groups=JSON.parse(JSON.stringify(h)));var A=this.boundingSphere;return null!==A&&(e.data.boundingSphere={center:A.center.toArray(),radius:A.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var i=e.attributes;for(var r in i){var a=i[r];this.setAttribute(r,a.clone(t))}var o=e.morphAttributes;for(var l in o){for(var g=[],s=o[l],c=0,u=s.length;c<u;c++)g.push(s[c].clone(t));this.morphAttributes[l]=g}this.morphTargetsRelative=e.morphTargetsRelative;for(var I=e.groups,d=0,C=I.length;d<C;d++){var h=I[d];this.addGroup(h.start,h.count,h.materialIndex)}var A=e.boundingBox;null!==A&&(this.boundingBox=A.clone());var p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Zi),to=new Dr,no=new Ur,io=new zr,ro=new pr,ao=new pr,oo=new pr,lo=new pr,go=new pr,so=new pr,co=new pr,uo=new pr,Io=new pr,Co=new Mi,ho=new Mi,Ao=new Mi,po=new pr,mo=new pr,fo=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new eo,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ka;return $(this,n),(e=t.call(this)).isMesh=!0,e.type="Mesh",e.geometry=i,e.material=r,e.updateMorphTargets(),e}return te(n,[{key:"copy",value:function(e,t){return Ie(ie(n.prototype),"copy",this).call(this,e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,r=n.length;i<r;i++){var a=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0!==i&&(null===n.boundingSphere&&n.computeBoundingSphere(),io.copy(n.boundingSphere),io.applyMatrix4(r),!1!==e.ray.intersectsSphere(io)&&(to.copy(r).invert(),no.copy(e.ray).applyMatrix4(to),null===n.boundingBox||!1!==no.intersectsBox(n.boundingBox)))){var a,o=n.index,l=n.attributes.position,g=n.morphAttributes.position,s=n.morphTargetsRelative,c=n.attributes.uv,u=n.attributes.uv2,I=n.groups,d=n.drawRange;if(null!==o)if(Array.isArray(i))for(var C=0,h=I.length;C<h;C++)for(var A=I[C],p=i[A.materialIndex],m=Math.max(A.start,d.start),f=Math.min(o.count,Math.min(A.start+A.count,d.start+d.count));m<f;m+=3){var v=o.getX(m),b=o.getX(m+1),y=o.getX(m+2);(a=vo(this,p,e,no,l,g,s,c,u,v,b,y))&&(a.faceIndex=Math.floor(m/3),a.face.materialIndex=A.materialIndex,t.push(a))}else for(var G=Math.max(0,d.start),B=Math.min(o.count,d.start+d.count);G<B;G+=3){var Z=o.getX(G),w=o.getX(G+1),x=o.getX(G+2);(a=vo(this,i,e,no,l,g,s,c,u,Z,w,x))&&(a.faceIndex=Math.floor(G/3),t.push(a))}else if(void 0!==l)if(Array.isArray(i))for(var S=0,W=I.length;S<W;S++)for(var V=I[S],R=i[V.materialIndex],q=Math.max(V.start,d.start),k=Math.min(l.count,Math.min(V.start+V.count,d.start+d.count));q<k;q+=3){(a=vo(this,R,e,no,l,g,s,c,u,q,q+1,q+2))&&(a.faceIndex=Math.floor(q/3),a.face.materialIndex=V.materialIndex,t.push(a))}else for(var X=Math.max(0,d.start),Y=Math.min(l.count,d.start+d.count);X<Y;X+=3){(a=vo(this,i,e,no,l,g,s,c,u,X,X+1,X+2))&&(a.faceIndex=Math.floor(X/3),t.push(a))}}}}]),n}(fa);function vo(e,t,n,i,r,a,o,l,g,s,c,u){ro.fromBufferAttribute(r,s),ao.fromBufferAttribute(r,c),oo.fromBufferAttribute(r,u);var I=e.morphTargetInfluences;if(a&&I){co.set(0,0,0),uo.set(0,0,0),Io.set(0,0,0);for(var d=0,C=a.length;d<C;d++){var h=I[d],A=a[d];0!==h&&(lo.fromBufferAttribute(A,s),go.fromBufferAttribute(A,c),so.fromBufferAttribute(A,u),o?(co.addScaledVector(lo,h),uo.addScaledVector(go,h),Io.addScaledVector(so,h)):(co.addScaledVector(lo.sub(ro),h),uo.addScaledVector(go.sub(ao),h),Io.addScaledVector(so.sub(oo),h)))}ro.add(co),ao.add(uo),oo.add(Io)}e.isSkinnedMesh&&(e.boneTransform(s,ro),e.boneTransform(c,ao),e.boneTransform(u,oo));var p=function(e,t,n,i,r,a,o,l){if(null===(t.side===we?i.intersectTriangle(o,a,r,!0,l):i.intersectTriangle(r,a,o,t.side!==xe,l)))return null;mo.copy(l),mo.applyMatrix4(e.matrixWorld);var g=n.ray.origin.distanceTo(mo);return g<n.near||g>n.far?null:{distance:g,point:mo.clone(),object:e}}(e,t,n,i,ro,ao,oo,po);if(p){l&&(Co.fromBufferAttribute(l,s),ho.fromBufferAttribute(l,c),Ao.fromBufferAttribute(l,u),p.uv=Va.getUV(po,ro,ao,oo,Co,ho,Ao,new Mi)),g&&(Co.fromBufferAttribute(g,s),ho.fromBufferAttribute(g,c),Ao.fromBufferAttribute(g,u),p.uv2=Va.getUV(po,ro,ao,oo,Co,ho,Ao,new Mi));var m={a:s,b:c,c:u,normal:new pr,materialIndex:0};Va.getNormal(ro,ao,oo,m.normal),p.face=m}return p}var bo=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;$(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:i,height:r,depth:a,widthSegments:o,heightSegments:l,depthSegments:g};var s=ae(e);o=Math.floor(o),l=Math.floor(l),g=Math.floor(g);var c=[],u=[],I=[],d=[],C=0,h=0;function A(e,t,n,i,r,a,o,l,g,A,p){for(var m=a/g,f=o/A,v=a/2,b=o/2,y=l/2,G=g+1,B=A+1,Z=0,w=0,x=new pr,S=0;S<B;S++)for(var W=S*f-b,V=0;V<G;V++){var R=V*m-v;x[e]=R*i,x[t]=W*r,x[n]=y,u.push(x.x,x.y,x.z),x[e]=0,x[t]=0,x[n]=l>0?1:-1,I.push(x.x,x.y,x.z),d.push(V/g),d.push(1-S/A),Z+=1}for(var q=0;q<A;q++)for(var k=0;k<g;k++){var X=C+k+G*q,Y=C+k+G*(q+1),N=C+(k+1)+G*(q+1),K=C+(k+1)+G*q;c.push(X,Y,K),c.push(Y,N,K),w+=6}s.addGroup(h,w,p),h+=w,C+=Z}return A("z","y","x",-1,-1,a,r,i,g,l,0),A("z","y","x",1,-1,a,r,-i,g,l,1),A("x","z","y",1,1,i,a,r,o,g,2),A("x","z","y",1,-1,i,a,-r,o,g,3),A("x","y","z",1,-1,i,r,a,o,l,4),A("x","y","z",-1,-1,i,r,-a,o,l,5),e.setIndex(c),e.setAttribute("position",new Ea(u,3)),e.setAttribute("normal",new Ea(I,3)),e.setAttribute("uv",new Ea(d,2)),e}return te(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(eo);function yo(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}return t}function Go(e){for(var t={},n=0;n<e.length;n++){var i=yo(e[n]);for(var r in i)t[r]=i[r]}return t}var Bo={clone:yo,merge:Go},Zo=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this)).isShaderMaterial=!0,i.type="ShaderMaterial",i.defines={},i.uniforms={},i.uniformsGroups=[],i.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",i.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",i.linewidth=1,i.wireframe=!1,i.wireframeLinewidth=1,i.fog=!1,i.lights=!1,i.clipping=!1,i.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},i.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},i.index0AttributeName=void 0,i.uniformsNeedUpdate=!1,i.glslVersion=null,void 0!==e&&i.setValues(e),i}return te(n,[{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=yo(e.uniforms),this.uniformsGroups=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=Ie(ie(n.prototype),"toJSON",this).call(this,e);for(var i in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var r=this.uniforms[i].value;r&&r.isTexture?t.uniforms[i]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[i]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[i]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[i]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[i]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[i]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[i]={type:"m4",value:r.toArray()}:t.uniforms[i]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}]),n}(qa),wo=function(e){ne(n,e);var t=le(n);function n(){var e;return $(this,n),(e=t.call(this)).isCamera=!0,e.type="Camera",e.matrixWorldInverse=new Dr,e.projectionMatrix=new Dr,e.projectionMatrixInverse=new Dr,e}return te(n,[{key:"copy",value:function(e,t){return Ie(ie(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){Ie(ie(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){Ie(ie(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(fa),xo=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return $(this,n),(e=t.call(this)).isPerspectiveCamera=!0,e.type="PerspectiveCamera",e.fov=i,e.zoom=1,e.near=a,e.far=o,e.focus=10,e.aspect=r,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return te(n,[{key:"copy",value:function(e,t){return Ie(ie(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Wi*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*Si*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*Wi*Math.atan(Math.tan(.5*Si*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*Si*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,l=a.fullHeight;r+=a.offsetX*i/o,t-=a.offsetY*n/l,i*=a.width/o,n*=a.height/l}var g=this.filmOffset;0!==g&&(r+=e*g/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=Ie(ie(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(wo),So=90,Wo=function(e){ne(n,e);var t=le(n);function n(e,i,r){var a;$(this,n),(a=t.call(this)).type="CubeCamera",a.renderTarget=r;var o=new xo(So,1,e,i);o.layers=a.layers,o.up.set(0,-1,0),o.lookAt(new pr(1,0,0)),a.add(o);var l=new xo(So,1,e,i);l.layers=a.layers,l.up.set(0,-1,0),l.lookAt(new pr(-1,0,0)),a.add(l);var g=new xo(So,1,e,i);g.layers=a.layers,g.up.set(0,0,1),g.lookAt(new pr(0,1,0)),a.add(g);var s=new xo(So,1,e,i);s.layers=a.layers,s.up.set(0,0,-1),s.lookAt(new pr(0,-1,0)),a.add(s);var c=new xo(So,1,e,i);c.layers=a.layers,c.up.set(0,-1,0),c.lookAt(new pr(0,0,1)),a.add(c);var u=new xo(So,1,e,i);return u.layers=a.layers,u.up.set(0,-1,0),u.lookAt(new pr(0,0,-1)),a.add(u),a}return te(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,i=c(this.children,6),r=i[0],a=i[1],o=i[2],l=i[3],g=i[4],s=i[5],u=e.getRenderTarget(),I=e.toneMapping,d=e.xr.enabled;e.toneMapping=lt,e.xr.enabled=!1;var C=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,l),e.setRenderTarget(n,4),e.render(t,g),n.texture.generateMipmaps=C,e.setRenderTarget(n,5),e.render(t,s),e.setRenderTarget(u),e.toneMapping=I,e.xr.enabled=d,n.texture.needsPMREMUpdate=!0}}]),n}(fa),Vo=function(e){ne(n,e);var t=le(n);function n(e,i,r,a,o,l,g,s,c,u){var I;return $(this,n),e=void 0!==e?e:[],i=void 0!==i?i:Ct,(I=t.call(this,e,i,r,a,o,l,g,s,c,u)).isCubeTexture=!0,I.flipY=!1,I}return te(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(gr),Ro=function(e){ne(n,e);var t=le(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$(this,n),(i=t.call(this,e,e,r)).isWebGLCubeRenderTarget=!0;var a={width:e,height:e,depth:1},o=[a,a,a,a,a,a];return i.texture=new Vo(o,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),i.texture.isRenderTargetTexture=!0,i.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,i.texture.minFilter=void 0!==r.minFilter?r.minFilter:xt,i}return te(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new bo(5,5,5),o=new Zo({name:"CubemapFromEquirect",uniforms:yo(n),vertexShader:i,fragmentShader:r,side:we,blending:Se});o.uniforms.tEquirect.value=t;var l=new fo(a,o),g=t.minFilter;return t.minFilter===Vt&&(t.minFilter=xt),new Wo(1,10,this).update(e,l),t.minFilter=g,l.geometry.dispose(),l.material.dispose(),this}},{key:"clear",value:function(e,t,n,i){for(var r=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,i);e.setRenderTarget(r)}}]),n}(cr),qo=new pr,ko=new pr,Xo=new Fi,Yo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pr(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;$(this,e),this.isPlane=!0,this.normal=t,this.constant=n}return te(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var i=qo.subVectors(n,t).cross(ko.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta(qo),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(n).multiplyScalar(r).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||Xo.getNormalMatrix(e),i=this.coplanarPoint(qo).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),No=new zr,Ko=new pr,Ho=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yo,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yo,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Yo,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Yo,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Yo,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Yo;$(this,e),this.planes=[t,n,i,r,a,o]}return te(e,[{key:"set",value:function(e,t,n,i,r,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],a=n[2],o=n[3],l=n[4],g=n[5],s=n[6],c=n[7],u=n[8],I=n[9],d=n[10],C=n[11],h=n[12],A=n[13],p=n[14],m=n[15];return t[0].setComponents(o-i,c-l,C-u,m-h).normalize(),t[1].setComponents(o+i,c+l,C+u,m+h).normalize(),t[2].setComponents(o+r,c+g,C+I,m+A).normalize(),t[3].setComponents(o-r,c-g,C-I,m-A).normalize(),t[4].setComponents(o-a,c-s,C-d,m-p).normalize(),t[5].setComponents(o+a,c+s,C+d,m+p).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),No.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(No)}},{key:"intersectsSprite",value:function(e){return No.center.set(0,0,0),No.radius=.7071067811865476,No.applyMatrix4(e.matrixWorld),this.intersectsSphere(No)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var i=t[n];if(Ko.x=i.normal.x>0?e.max.x:e.min.x,Ko.y=i.normal.y>0?e.max.y:e.min.y,Ko.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Ko)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function zo(){var e=null,t=!1,n=null,i=null;function r(t,a){n(t,a),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Mo(e,t){var n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){var a=i.get(t);(!a||a.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=i.get(t);void 0===o?i.set(t,function(t,i){var r,a=t.array,o=t.usage,l=e.createBuffer();if(e.bindBuffer(i,l),e.bufferData(i,a,o),t.onUploadCallback(),a instanceof Float32Array)r=5126;else if(a instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");r=5131}else r=5123;else if(a instanceof Int16Array)r=5122;else if(a instanceof Uint32Array)r=5125;else if(a instanceof Int32Array)r=5124;else if(a instanceof Int8Array)r=5120;else if(a instanceof Uint8Array)r=5121;else{if(!(a instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+a);r=5121}return{buffer:l,type:r,bytesPerElement:a.BYTES_PER_ELEMENT,version:t.version}}(t,r)):o.version<t.version&&(!function(t,i,r){var a=i.array,o=i.updateRange;e.bindBuffer(r,t),-1===o.count?e.bufferSubData(r,0,a):(n?e.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}(o.buffer,t,r),o.version=t.version)}}}}var Fo=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;$(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:i,height:r,widthSegments:a,heightSegments:o};for(var l=i/2,g=r/2,s=Math.floor(a),c=Math.floor(o),u=s+1,I=c+1,d=i/s,C=r/c,h=[],A=[],p=[],m=[],f=0;f<I;f++)for(var v=f*C-g,b=0;b<u;b++){var y=b*d-l;A.push(y,-v,0),p.push(0,0,1),m.push(b/s),m.push(1-f/c)}for(var G=0;G<c;G++)for(var B=0;B<s;B++){var Z=B+u*G,w=B+u*(G+1),x=B+1+u*(G+1),S=B+1+u*G;h.push(Z,w,S),h.push(w,x,S)}return e.setIndex(h),e.setAttribute("position",new Ea(A,3)),e.setAttribute("normal",new Ea(p,3)),e.setAttribute("uv",new Ea(m,2)),e}return te(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(eo),Lo={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},_o={common:{diffuse:{value:new ir(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Fi},uv2Transform:{value:new Fi},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Mi(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ir(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ir(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Fi}},sprite:{diffuse:{value:new ir(16777215)},opacity:{value:1},center:{value:new Mi(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Fi}}},To={basic:{uniforms:Go([_o.common,_o.specularmap,_o.envmap,_o.aomap,_o.lightmap,_o.fog]),vertexShader:Lo.meshbasic_vert,fragmentShader:Lo.meshbasic_frag},lambert:{uniforms:Go([_o.common,_o.specularmap,_o.envmap,_o.aomap,_o.lightmap,_o.emissivemap,_o.bumpmap,_o.normalmap,_o.displacementmap,_o.fog,_o.lights,{emissive:{value:new ir(0)}}]),vertexShader:Lo.meshlambert_vert,fragmentShader:Lo.meshlambert_frag},phong:{uniforms:Go([_o.common,_o.specularmap,_o.envmap,_o.aomap,_o.lightmap,_o.emissivemap,_o.bumpmap,_o.normalmap,_o.displacementmap,_o.fog,_o.lights,{emissive:{value:new ir(0)},specular:{value:new ir(1118481)},shininess:{value:30}}]),vertexShader:Lo.meshphong_vert,fragmentShader:Lo.meshphong_frag},standard:{uniforms:Go([_o.common,_o.envmap,_o.aomap,_o.lightmap,_o.emissivemap,_o.bumpmap,_o.normalmap,_o.displacementmap,_o.roughnessmap,_o.metalnessmap,_o.fog,_o.lights,{emissive:{value:new ir(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Lo.meshphysical_vert,fragmentShader:Lo.meshphysical_frag},toon:{uniforms:Go([_o.common,_o.aomap,_o.lightmap,_o.emissivemap,_o.bumpmap,_o.normalmap,_o.displacementmap,_o.gradientmap,_o.fog,_o.lights,{emissive:{value:new ir(0)}}]),vertexShader:Lo.meshtoon_vert,fragmentShader:Lo.meshtoon_frag},matcap:{uniforms:Go([_o.common,_o.bumpmap,_o.normalmap,_o.displacementmap,_o.fog,{matcap:{value:null}}]),vertexShader:Lo.meshmatcap_vert,fragmentShader:Lo.meshmatcap_frag},points:{uniforms:Go([_o.points,_o.fog]),vertexShader:Lo.points_vert,fragmentShader:Lo.points_frag},dashed:{uniforms:Go([_o.common,_o.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Lo.linedashed_vert,fragmentShader:Lo.linedashed_frag},depth:{uniforms:Go([_o.common,_o.displacementmap]),vertexShader:Lo.depth_vert,fragmentShader:Lo.depth_frag},normal:{uniforms:Go([_o.common,_o.bumpmap,_o.normalmap,_o.displacementmap,{opacity:{value:1}}]),vertexShader:Lo.meshnormal_vert,fragmentShader:Lo.meshnormal_frag},sprite:{uniforms:Go([_o.sprite,_o.fog]),vertexShader:Lo.sprite_vert,fragmentShader:Lo.sprite_frag},background:{uniforms:{uvTransform:{value:new Fi},t2D:{value:null}},vertexShader:Lo.background_vert,fragmentShader:Lo.background_frag},cube:{uniforms:Go([_o.envmap,{opacity:{value:1}}]),vertexShader:Lo.cube_vert,fragmentShader:Lo.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Lo.equirect_vert,fragmentShader:Lo.equirect_frag},distanceRGBA:{uniforms:Go([_o.common,_o.displacementmap,{referencePosition:{value:new pr},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Lo.distanceRGBA_vert,fragmentShader:Lo.distanceRGBA_frag},shadow:{uniforms:Go([_o.lights,_o.fog,{color:{value:new ir(0)},opacity:{value:1}}]),vertexShader:Lo.shadow_vert,fragmentShader:Lo.shadow_frag}};function Eo(e,t,n,i,r,a){var o,l,g=new ir(0),s=!0===r?0:1,c=null,u=0,I=null;function d(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,a)}return{getClearColor:function(){return g},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;g.set(e),d(g,s=t)},getClearAlpha:function(){return s},setClearAlpha:function(e){d(g,s=e)},render:function(n,r){var a=!1,C=!0===r.isScene?r.background:null;C&&C.isTexture&&(C=t.get(C));var h=e.xr,A=h.getSession&&h.getSession();A&&"additive"===A.environmentBlendMode&&(C=null),null===C?d(g,s):C&&C.isColor&&(d(C,1),a=!0),(e.autoClear||a)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),C&&(C.isCubeTexture||C.mapping===mt)?(void 0===l&&((l=new fo(new bo(1,1,1),new Zo({name:"BackgroundCubeMaterial",uniforms:yo(To.cube.uniforms),vertexShader:To.cube.vertexShader,fragmentShader:To.cube.fragmentShader,side:we,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=C,l.material.uniforms.flipEnvMap.value=C.isCubeTexture&&!1===C.isRenderTargetTexture?-1:1,c===C&&u===C.version&&I===e.toneMapping||(l.material.needsUpdate=!0,c=C,u=C.version,I=e.toneMapping),l.layers.enableAll(),n.unshift(l,l.geometry,l.material,0,0,null)):C&&C.isTexture&&(void 0===o&&((o=new fo(new Fo(2,2),new Zo({name:"BackgroundMaterial",uniforms:yo(To.background.uniforms),vertexShader:To.background.vertexShader,fragmentShader:To.background.fragmentShader,side:Ze,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(o)),o.material.uniforms.t2D.value=C,!0===C.matrixAutoUpdate&&C.updateMatrix(),o.material.uniforms.uvTransform.value.copy(C.matrix),c===C&&u===C.version&&I===e.toneMapping||(o.material.needsUpdate=!0,c=C,u=C.version,I=e.toneMapping),o.layers.enableAll(),n.unshift(o,o.geometry,o.material,0,0,null))}}}function Jo(e,t,n,i){var r=e.getParameter(34921),a=i.isWebGL2?null:t.get("OES_vertex_array_object"),o=i.isWebGL2||null!==a,l={},g=d(null),s=g,c=!1;function u(t){return i.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function I(t){return i.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function d(e){for(var t=[],n=[],i=[],a=0;a<r;a++)t[a]=0,n[a]=0,i[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function C(){for(var e=s.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function h(e){A(e,0)}function A(n,r){var a=s.newAttributes,o=s.enabledAttributes,l=s.attributeDivisors;(a[n]=1,0===o[n]&&(e.enableVertexAttribArray(n),o[n]=1),l[n]!==r)&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),l[n]=r)}function p(){for(var t=s.newAttributes,n=s.enabledAttributes,i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function m(t,n,r,a,o,l){!0!==i.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,n,r,a,o,l):e.vertexAttribIPointer(t,n,r,o,l)}function f(){v(),c=!0,s!==g&&u((s=g).object)}function v(){g.geometry=null,g.program=null,g.wireframe=!1}return{setup:function(r,g,I,f,v){var b=!1;if(o){var y=function(t,n,r){var o=!0===r.wireframe,g=l[t.id];void 0===g&&(g={},l[t.id]=g);var s=g[n.id];void 0===s&&(s={},g[n.id]=s);var c=s[o];void 0===c&&(c=d(i.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),s[o]=c);return c}(f,I,g);s!==y&&u((s=y).object),b=function(e,t,n,i){var r=s.attributes,a=t.attributes,o=0,l=n.getAttributes();for(var g in l){if(l[g].location>=0){var c=r[g],u=a[g];if(void 0===u&&("instanceMatrix"===g&&e.instanceMatrix&&(u=e.instanceMatrix),"instanceColor"===g&&e.instanceColor&&(u=e.instanceColor)),void 0===c)return!0;if(c.attribute!==u)return!0;if(u&&c.data!==u.data)return!0;o++}}return s.attributesNum!==o||s.index!==i}(r,f,I,v),b&&function(e,t,n,i){var r={},a=t.attributes,o=0,l=n.getAttributes();for(var g in l){if(l[g].location>=0){var c=a[g];void 0===c&&("instanceMatrix"===g&&e.instanceMatrix&&(c=e.instanceMatrix),"instanceColor"===g&&e.instanceColor&&(c=e.instanceColor));var u={};u.attribute=c,c&&c.data&&(u.data=c.data),r[g]=u,o++}}s.attributes=r,s.attributesNum=o,s.index=i}(r,f,I,v)}else{var G=!0===g.wireframe;s.geometry===f.id&&s.program===I.id&&s.wireframe===G||(s.geometry=f.id,s.program=I.id,s.wireframe=G,b=!0)}null!==v&&n.update(v,34963),(b||c)&&(c=!1,function(r,a,o,l){if(!1===i.isWebGL2&&(r.isInstancedMesh||l.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;C();var g=l.attributes,s=o.getAttributes(),c=a.defaultAttributeValues;for(var u in s){var I=s[u];if(I.location>=0){var d=g[u];if(void 0===d&&("instanceMatrix"===u&&r.instanceMatrix&&(d=r.instanceMatrix),"instanceColor"===u&&r.instanceColor&&(d=r.instanceColor)),void 0!==d){var f=d.normalized,v=d.itemSize,b=n.get(d);if(void 0===b)continue;var y=b.buffer,G=b.type,B=b.bytesPerElement;if(d.isInterleavedBufferAttribute){var Z=d.data,w=Z.stride,x=d.offset;if(Z.isInstancedInterleavedBuffer){for(var S=0;S<I.locationSize;S++)A(I.location+S,Z.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===l._maxInstanceCount&&(l._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(var W=0;W<I.locationSize;W++)h(I.location+W);e.bindBuffer(34962,y);for(var V=0;V<I.locationSize;V++)m(I.location+V,v/I.locationSize,G,f,w*B,(x+v/I.locationSize*V)*B)}else{if(d.isInstancedBufferAttribute){for(var R=0;R<I.locationSize;R++)A(I.location+R,d.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===l._maxInstanceCount&&(l._maxInstanceCount=d.meshPerAttribute*d.count)}else for(var q=0;q<I.locationSize;q++)h(I.location+q);e.bindBuffer(34962,y);for(var k=0;k<I.locationSize;k++)m(I.location+k,v/I.locationSize,G,f,v*B,v/I.locationSize*k*B)}}else if(void 0!==c){var X=c[u];if(void 0!==X)switch(X.length){case 2:e.vertexAttrib2fv(I.location,X);break;case 3:e.vertexAttrib3fv(I.location,X);break;case 4:e.vertexAttrib4fv(I.location,X);break;default:e.vertexAttrib1fv(I.location,X)}}}}p()}(r,g,I,f),null!==v&&e.bindBuffer(34963,n.get(v).buffer))},reset:f,resetDefaultState:v,dispose:function(){for(var e in f(),l){var t=l[e];for(var n in t){var i=t[n];for(var r in i)I(i[r].object),delete i[r];delete t[n]}delete l[e]}},releaseStatesOfGeometry:function(e){if(void 0!==l[e.id]){var t=l[e.id];for(var n in t){var i=t[n];for(var r in i)I(i[r].object),delete i[r];delete t[n]}delete l[e.id]}},releaseStatesOfProgram:function(e){for(var t in l){var n=l[t];if(void 0!==n[e.id]){var i=n[e.id];for(var r in i)I(i[r].object),delete i[r];delete n[e.id]}}},initAttributes:C,enableAttribute:h,disableUnusedAttributes:p}}function Uo(e,t,n,i){var r,a=i.isWebGL2;this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r,1)},this.renderInstances=function(i,o,l){if(0!==l){var g,s;if(a)g=e,s="drawArraysInstanced";else if(s="drawArraysInstancedANGLE",null===(g=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");g[s](r,i,o,l),n.update(o,r,l)}}}function Do(e,t,n){var i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",l=r(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);var g=a||t.has("WEBGL_draw_buffers"),s=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),u=e.getParameter(35660),I=e.getParameter(3379),d=e.getParameter(34076),C=e.getParameter(34921),h=e.getParameter(36347),A=e.getParameter(36348),p=e.getParameter(36349),m=u>0,f=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:g,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:o,logarithmicDepthBuffer:s,maxTextures:c,maxVertexTextures:u,maxTextureSize:I,maxCubemapSize:d,maxAttributes:C,maxVertexUniforms:h,maxVaryings:A,maxFragmentUniforms:p,vertexTextures:m,floatFragmentTextures:f,floatVertexTextures:m&&f,maxSamples:a?e.getParameter(36183):0}}function Po(e){var t=this,n=null,i=0,r=!1,a=!1,o=new Yo,l=new Fi,g={value:null,needsUpdate:!1};function s(){g.value!==n&&(g.value=n,g.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function c(e,n,i,r){var a=null!==e?e.length:0,s=null;if(0!==a){if(s=g.value,!0!==r||null===s){var c=i+4*a,u=n.matrixWorldInverse;l.getNormalMatrix(u),(null===s||s.length<c)&&(s=new Float32Array(c));for(var I=0,d=i;I!==a;++I,d+=4)o.copy(e[I]).applyMatrix4(u,l),o.normal.toArray(s,d),s[d+3]=o.constant}g.value=s,g.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,s}this.uniform=g,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){var o=0!==e.length||t||0!==i||r;return r=t,n=c(e,a,0),i=e.length,o},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1,s()},this.setState=function(t,o,l){var u=t.clippingPlanes,I=t.clipIntersection,d=t.clipShadows,C=e.get(t);if(!r||null===u||0===u.length||a&&!d)a?c(null):s();else{var h=a?0:i,A=4*h,p=C.clippingState||null;g.value=p,p=c(u,o,A,l);for(var m=0;m!==A;++m)p[m]=n[m];C.clippingState=p,this.numIntersection=I?this.numPlanes:0,this.numPlanes+=h}}}function Oo(e){var t=new WeakMap;function n(e,t){return t===At?e.mapping=Ct:t===pt&&(e.mapping=ht),e}function i(e){var n=e.target;n.removeEventListener("dispose",i);var r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){var a=r.mapping;if(a===At||a===pt){if(t.has(r))return n(t.get(r).texture,r.mapping);var o=r.image;if(o&&o.height>0){var l=new Ro(o.height/2);return l.fromEquirectangularTexture(e,r),t.set(r,l),r.addEventListener("dispose",i),n(l.texture,r.mapping)}return null}}return r},dispose:function(){t=new WeakMap}}}To.physical={uniforms:Go([To.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Mi(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new ir(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Mi},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ir(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new ir(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Lo.meshphysical_vert,fragmentShader:Lo.meshphysical_frag};var Qo=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return $(this,n),(e=t.call(this)).isOrthographicCamera=!0,e.type="OrthographicCamera",e.zoom=1,e.view=null,e.left=i,e.right=r,e.top=a,e.bottom=o,e.near=l,e.far=g,e.updateProjectionMatrix(),e}return te(n,[{key:"copy",value:function(e,t){return Ie(ie(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,a=n+e,o=i+t,l=i-t;if(null!==this.view&&this.view.enabled){var g=(this.right-this.left)/this.view.fullWidth/this.zoom,s=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(r+=g*this.view.offsetX)+g*this.view.width,l=(o-=s*this.view.offsetY)-s*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=Ie(ie(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(wo),jo=[.125,.215,.35,.446,.526,.582],$o=20,el=new Qo,tl=new ir,nl=null,il=(1+Math.sqrt(5))/2,rl=1/il,al=[new pr(1,1,1),new pr(-1,1,1),new pr(1,1,-1),new pr(-1,1,-1),new pr(0,il,rl),new pr(0,il,-rl),new pr(rl,0,il),new pr(-rl,0,il),new pr(il,rl,0),new pr(-il,rl,0)],ol=function(){function e(t){$(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return te(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;nl=this._renderer.getRenderTarget(),this._setSize(256);var r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}},{key:"fromEquirectangular",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"fromCubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=cl(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=sl(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}},{key:"_cleanup",value:function(e){this._renderer.setRenderTarget(nl),e.scissorTest=!1,gl(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e,t){e.mapping===Ct||e.mapping===ht?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),nl=this._renderer.getRenderTarget();var n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:xt,minFilter:xt,generateMipmaps:!1,type:zt,format:Et,encoding:Ln,depthBuffer:!1},i=ll(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=ll(e,t,n);var r=this._lodMax,a=function(e){for(var t=[],n=[],i=[],r=e,a=e-4+1+jo.length,o=0;o<a;o++){var l=Math.pow(2,r);n.push(l);var g=1/l;o>e-4?g=jo[o-e+4-1]:0===o&&(g=0),i.push(g);for(var s=1/(l-2),c=-s,u=1+s,I=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,C=6,h=3,A=2,p=1,m=new Float32Array(h*C*d),f=new Float32Array(A*C*d),v=new Float32Array(p*C*d),b=0;b<d;b++){var y=b%3*2/3-1,G=b>2?0:-1,B=[y,G,0,y+2/3,G,0,y+2/3,G+1,0,y,G,0,y+2/3,G+1,0,y,G+1,0];m.set(B,h*C*b),f.set(I,A*C*b);var Z=[b,b,b,b,b,b];v.set(Z,p*C*b)}var w=new eo;w.setAttribute("position",new Na(m,h)),w.setAttribute("uv",new Na(f,A)),w.setAttribute("faceIndex",new Na(v,p)),t.push(w),r>4&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(r);this._sizeLods=a.sizeLods,this._lodPlanes=a.lodPlanes,this._sigmas=a.sigmas,this._blurMaterial=function(e,t,n){var i=new Float32Array($o),r=new pr(0,1,0);return new Zo({name:"SphericalGaussianBlur",defines:{n:$o,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Se,depthTest:!1,depthWrite:!1})}(r,e,t)}return i}},{key:"_compileMaterial",value:function(e){var t=new fo(this._lodPlanes[0],e);this._renderer.compile(t,el)}},{key:"_sceneToCubeUV",value:function(e,t,n,i){var r=new xo(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],l=this._renderer,g=l.autoClear,s=l.toneMapping;l.getClearColor(tl),l.toneMapping=lt,l.autoClear=!1;var c=new ka({name:"PMREM.Background",side:we,depthWrite:!1,depthTest:!1}),u=new fo(new bo,c),I=!1,d=e.background;d?d.isColor&&(c.color.copy(d),e.background=null,I=!0):(c.color.copy(tl),I=!0);for(var C=0;C<6;C++){var h=C%3;0===h?(r.up.set(0,a[C],0),r.lookAt(o[C],0,0)):1===h?(r.up.set(0,0,a[C]),r.lookAt(0,o[C],0)):(r.up.set(0,a[C],0),r.lookAt(0,0,o[C]));var A=this._cubeSize;gl(i,h*A,C>2?A:0,A,A),l.setRenderTarget(i),I&&l.render(u,r),l.render(e,r)}u.geometry.dispose(),u.material.dispose(),l.toneMapping=s,l.autoClear=g,e.background=d}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer,i=e.mapping===Ct||e.mapping===ht;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=cl()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=sl());var r=i?this._cubemapMaterial:this._equirectMaterial,a=new fo(this._lodPlanes[0],r);r.uniforms.envMap.value=e;var o=this._cubeSize;gl(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(a,el)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var i=1;i<this._lodPlanes.length;i++){var r=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),a=al[(i-1)%al.length];this._blur(e,i-1,i,r,a)}t.autoClear=n}},{key:"_blur",value:function(e,t,n,i,r){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,i,"latitudinal",r),this._halfBlur(a,e,n,n,i,"longitudinal",r)}},{key:"_halfBlur",value:function(e,t,n,i,r,a,o){var l=this._renderer,g=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var s=new fo(this._lodPlanes[i],g),c=g.uniforms,u=this._sizeLods[n]-1,I=isFinite(r)?Math.PI/(2*u):2*Math.PI/39,d=r/I,C=isFinite(r)?1+Math.floor(3*d):$o;C>$o&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(C," samples when the maximum is set to ").concat($o));for(var h=[],A=0,p=0;p<$o;++p){var m=p/d,f=Math.exp(-m*m/2);h.push(f),0===p?A+=f:p<C&&(A+=2*f)}for(var v=0;v<h.length;v++)h[v]=h[v]/A;c.envMap.value=e.texture,c.samples.value=C,c.weights.value=h,c.latitudinal.value="latitudinal"===a,o&&(c.poleAxis.value=o);var b=this._lodMax;c.dTheta.value=I,c.mipInt.value=b-n;var y=this._sizeLods[i];gl(t,3*y*(i>b-4?i-b+4:0),4*(this._cubeSize-y),3*y,2*y),l.setRenderTarget(t),l.render(s,el)}}]),e}();function ll(e,t,n){var i=new cr(e,t,n);return i.texture.mapping=mt,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function gl(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function sl(){return new Zo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Se,depthTest:!1,depthWrite:!1})}function cl(){return new Zo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Se,depthTest:!1,depthWrite:!1})}function ul(e){var t=new WeakMap,n=null;function i(e){var n=e.target;n.removeEventListener("dispose",i);var r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){var a=r.mapping,o=a===At||a===pt,l=a===Ct||a===ht;if(o||l){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;var g=t.get(r);return null===n&&(n=new ol(e)),g=o?n.fromEquirectangular(r,g):n.fromCubemap(r,g),t.set(r,g),g.texture}if(t.has(r))return t.get(r).texture;var s=r.image;if(o&&s&&s.height>0||l&&s&&function(e){for(var t=0,n=6,i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(s)){null===n&&(n=new ol(e));var c=o?n.fromEquirectangular(r):n.fromCubemap(r);return t.set(r,c),r.addEventListener("dispose",i),c.texture}return null}}return r},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Il(e){var t={};function n(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function dl(e,t,n,i){var r={},a=new WeakMap;function o(e){var l=e.target;for(var g in null!==l.index&&t.remove(l.index),l.attributes)t.remove(l.attributes[g]);l.removeEventListener("dispose",o),delete r[l.id];var s=a.get(l);s&&(t.remove(s),a.delete(l)),i.releaseStatesOfGeometry(l),!0===l.isInstancedBufferGeometry&&delete l._maxInstanceCount,n.memory.geometries--}function l(e){var n=[],i=e.index,r=e.attributes.position,o=0;if(null!==i){var l=i.array;o=i.version;for(var g=0,s=l.length;g<s;g+=3){var c=l[g+0],u=l[g+1],I=l[g+2];n.push(c,u,u,I,I,c)}}else{var d=r.array;o=r.version;for(var C=0,h=d.length/3-1;C<h;C+=3){var A=C+0,p=C+1,m=C+2;n.push(A,p,p,m,m,A)}}var f=new(Li(n)?_a:Fa)(n,1);f.version=o;var v=a.get(e);v&&t.remove(v),a.set(e,f)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",o),r[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var i in n)t.update(n[i],34962);var r=e.morphAttributes;for(var a in r)for(var o=r[a],l=0,g=o.length;l<g;l++)t.update(o[l],34962)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&l(e)}else l(e);return a.get(e)}}}function Cl(e,t,n,i){var r,a,o,l=i.isWebGL2;this.setMode=function(e){r=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,i){e.drawElements(r,i,a,t*o),n.update(i,r,1)},this.renderInstances=function(i,g,s){if(0!==s){var c,u;if(l)c=e,u="drawElementsInstanced";else if(u="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[u](r,g,a,i*o,s),n.update(g,r,s)}}}function hl(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Al(e,t){return e[0]-t[0]}function pl(e,t){return Math.abs(t[1])-Math.abs(e[1])}function ml(e,t,n){for(var i={},r=new Float32Array(8),a=new WeakMap,o=new sr,l=[],g=0;g<8;g++)l[g]=[g,0];return{update:function(g,s,c,u){var I=g.morphTargetInfluences;if(!0===t.isWebGL2){var d=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,C=void 0!==d?d.length:0,h=a.get(s);if(void 0===h||h.count!==C){void 0!==h&&h.texture.dispose();var A=void 0!==s.morphAttributes.position,p=void 0!==s.morphAttributes.normal,m=void 0!==s.morphAttributes.color,f=s.morphAttributes.position||[],v=s.morphAttributes.normal||[],b=s.morphAttributes.color||[],y=0;!0===A&&(y=1),!0===p&&(y=2),!0===m&&(y=3);var G=s.attributes.position.count*y,B=1;G>t.maxTextureSize&&(B=Math.ceil(G/t.maxTextureSize),G=t.maxTextureSize);var Z=new Float32Array(G*B*4*C),w=new ur(Z,G,B,C);w.type=Ht,w.needsUpdate=!0;for(var x=4*y,S=0;S<C;S++)for(var W=f[S],V=v[S],R=b[S],q=G*B*4*S,k=0;k<W.count;k++){var X=k*x;!0===A&&(o.fromBufferAttribute(W,k),Z[q+X+0]=o.x,Z[q+X+1]=o.y,Z[q+X+2]=o.z,Z[q+X+3]=0),!0===p&&(o.fromBufferAttribute(V,k),Z[q+X+4]=o.x,Z[q+X+5]=o.y,Z[q+X+6]=o.z,Z[q+X+7]=0),!0===m&&(o.fromBufferAttribute(R,k),Z[q+X+8]=o.x,Z[q+X+9]=o.y,Z[q+X+10]=o.z,Z[q+X+11]=4===R.itemSize?o.w:1)}h={count:C,texture:w,size:new Mi(G,B)},a.set(s,h),s.addEventListener("dispose",(function e(){w.dispose(),a.delete(s),s.removeEventListener("dispose",e)}))}for(var Y=0,N=0;N<I.length;N++)Y+=I[N];var K=s.morphTargetsRelative?1:1-Y;u.getUniforms().setValue(e,"morphTargetBaseInfluence",K),u.getUniforms().setValue(e,"morphTargetInfluences",I),u.getUniforms().setValue(e,"morphTargetsTexture",h.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",h.size)}else{var H=void 0===I?0:I.length,z=i[s.id];if(void 0===z||z.length!==H){z=[];for(var M=0;M<H;M++)z[M]=[M,0];i[s.id]=z}for(var F=0;F<H;F++){var L=z[F];L[0]=F,L[1]=I[F]}z.sort(pl);for(var _=0;_<8;_++)_<H&&z[_][1]?(l[_][0]=z[_][0],l[_][1]=z[_][1]):(l[_][0]=Number.MAX_SAFE_INTEGER,l[_][1]=0);l.sort(Al);for(var T=s.morphAttributes.position,E=s.morphAttributes.normal,J=0,U=0;U<8;U++){var D=l[U],P=D[0],O=D[1];P!==Number.MAX_SAFE_INTEGER&&O?(T&&s.getAttribute("morphTarget"+U)!==T[P]&&s.setAttribute("morphTarget"+U,T[P]),E&&s.getAttribute("morphNormal"+U)!==E[P]&&s.setAttribute("morphNormal"+U,E[P]),r[U]=O,J+=O):(T&&!0===s.hasAttribute("morphTarget"+U)&&s.deleteAttribute("morphTarget"+U),E&&!0===s.hasAttribute("morphNormal"+U)&&s.deleteAttribute("morphNormal"+U),r[U]=0)}var Q=s.morphTargetsRelative?1:1-J;u.getUniforms().setValue(e,"morphTargetBaseInfluence",Q),u.getUniforms().setValue(e,"morphTargetInfluences",r)}}}}function fl(e,t,n,i){var r=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var o=i.render.frame,l=e.geometry,g=t.get(e,l);return r.get(g)!==o&&(t.update(g),r.set(g,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),g},dispose:function(){r=new WeakMap}}}var vl=new gr,bl=new ur,yl=new dr,Gl=new Vo,Bl=[],Zl=[],wl=new Float32Array(16),xl=new Float32Array(9),Sl=new Float32Array(4);function Wl(e,t,n){var i=e[0];if(i<=0||i>0)return e;var r=t*n,a=Bl[r];if(void 0===a&&(a=new Float32Array(r),Bl[r]=a),0!==t){i.toArray(a,0);for(var o=1,l=0;o!==t;++o)l+=n,e[o].toArray(a,l)}return a}function Vl(e,t){if(e.length!==t.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Rl(e,t){for(var n=0,i=t.length;n<i;n++)e[n]=t[n]}function ql(e,t){var n=Zl[t];void 0===n&&(n=new Int32Array(t),Zl[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function kl(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Xl(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Vl(n,t))return;e.uniform2fv(this.addr,t),Rl(n,t)}}function Yl(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Vl(n,t))return;e.uniform3fv(this.addr,t),Rl(n,t)}}function Nl(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Vl(n,t))return;e.uniform4fv(this.addr,t),Rl(n,t)}}function Kl(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Vl(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Rl(n,t)}else{if(Vl(n,i))return;Sl.set(i),e.uniformMatrix2fv(this.addr,!1,Sl),Rl(n,i)}}function Hl(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Vl(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Rl(n,t)}else{if(Vl(n,i))return;xl.set(i),e.uniformMatrix3fv(this.addr,!1,xl),Rl(n,i)}}function zl(e,t){var n=this.cache,i=t.elements;if(void 0===i){if(Vl(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Rl(n,t)}else{if(Vl(n,i))return;wl.set(i),e.uniformMatrix4fv(this.addr,!1,wl),Rl(n,i)}}function Ml(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Fl(e,t){var n=this.cache;Vl(n,t)||(e.uniform2iv(this.addr,t),Rl(n,t))}function Ll(e,t){var n=this.cache;Vl(n,t)||(e.uniform3iv(this.addr,t),Rl(n,t))}function _l(e,t){var n=this.cache;Vl(n,t)||(e.uniform4iv(this.addr,t),Rl(n,t))}function Tl(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function El(e,t){var n=this.cache;Vl(n,t)||(e.uniform2uiv(this.addr,t),Rl(n,t))}function Jl(e,t){var n=this.cache;Vl(n,t)||(e.uniform3uiv(this.addr,t),Rl(n,t))}function Ul(e,t){var n=this.cache;Vl(n,t)||(e.uniform4uiv(this.addr,t),Rl(n,t))}function Dl(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(t||vl,r)}function Pl(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||yl,r)}function Ol(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||Gl,r)}function Ql(e,t,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||bl,r)}function jl(e,t){e.uniform1fv(this.addr,t)}function $l(e,t){var n=Wl(t,this.size,2);e.uniform2fv(this.addr,n)}function eg(e,t){var n=Wl(t,this.size,3);e.uniform3fv(this.addr,n)}function tg(e,t){var n=Wl(t,this.size,4);e.uniform4fv(this.addr,n)}function ng(e,t){var n=Wl(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function ig(e,t){var n=Wl(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function rg(e,t){var n=Wl(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function ag(e,t){e.uniform1iv(this.addr,t)}function og(e,t){e.uniform2iv(this.addr,t)}function lg(e,t){e.uniform3iv(this.addr,t)}function gg(e,t){e.uniform4iv(this.addr,t)}function sg(e,t){e.uniform1uiv(this.addr,t)}function cg(e,t){e.uniform2uiv(this.addr,t)}function ug(e,t){e.uniform3uiv(this.addr,t)}function Ig(e,t){e.uniform4uiv(this.addr,t)}function dg(e,t,n){var i=t.length,r=ql(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTexture2D(t[a]||vl,r[a])}function Cg(e,t,n){var i=t.length,r=ql(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTexture3D(t[a]||yl,r[a])}function hg(e,t,n){var i=t.length,r=ql(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTextureCube(t[a]||Gl,r[a])}function Ag(e,t,n){var i=t.length,r=ql(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTexture2DArray(t[a]||bl,r[a])}var pg=te((function e(t,n,i){$(this,e),this.id=t,this.addr=i,this.cache=[],this.setValue=function(e){switch(e){case 5126:return kl;case 35664:return Xl;case 35665:return Yl;case 35666:return Nl;case 35674:return Kl;case 35675:return Hl;case 35676:return zl;case 5124:case 35670:return Ml;case 35667:case 35671:return Fl;case 35668:case 35672:return Ll;case 35669:case 35673:return _l;case 5125:return Tl;case 36294:return El;case 36295:return Jl;case 36296:return Ul;case 35678:case 36198:case 36298:case 36306:case 35682:return Dl;case 35679:case 36299:case 36307:return Pl;case 35680:case 36300:case 36308:case 36293:return Ol;case 36289:case 36303:case 36311:case 36292:return Ql}}(n.type)})),mg=te((function e(t,n,i){$(this,e),this.id=t,this.addr=i,this.cache=[],this.size=n.size,this.setValue=function(e){switch(e){case 5126:return jl;case 35664:return $l;case 35665:return eg;case 35666:return tg;case 35674:return ng;case 35675:return ig;case 35676:return rg;case 5124:case 35670:return ag;case 35667:case 35671:return og;case 35668:case 35672:return lg;case 35669:case 35673:return gg;case 5125:return sg;case 36294:return cg;case 36295:return ug;case 36296:return Ig;case 35678:case 36198:case 36298:case 36306:case 35682:return dg;case 35679:case 36299:case 36307:return Cg;case 35680:case 36300:case 36308:case 36293:return hg;case 36289:case 36303:case 36311:case 36292:return Ag}}(n.type)})),fg=function(){function e(t){$(this,e),this.id=t,this.seq=[],this.map={}}return te(e,[{key:"setValue",value:function(e,t,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var o=i[r];o.setValue(e,t[o.id],n)}}}]),e}(),vg=/(\w+)(\])?(\[|\.)?/g;function bg(e,t){e.seq.push(t),e.map[t.id]=t}function yg(e,t,n){var i=e.name,r=i.length;for(vg.lastIndex=0;;){var a=vg.exec(i),o=vg.lastIndex,l=a[1],g="]"===a[2],s=a[3];if(g&&(l|=0),void 0===s||"["===s&&o+2===r){bg(n,void 0===s?new pg(l,e,t):new mg(l,e,t));break}var c=n.map[l];void 0===c&&bg(n,c=new fg(l)),n=c}}var Gg=function(){function e(t,n){$(this,e),this.seq=[],this.map={};for(var i=t.getProgramParameter(n,35718),r=0;r<i;++r){var a=t.getActiveUniform(n,r);yg(a,t.getUniformLocation(n,a.name),this)}}return te(e,[{key:"setValue",value:function(e,t,n,i){var r=this.map[t];void 0!==r&&r.setValue(e,n,i)}},{key:"setOptional",value:function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)}}],[{key:"upload",value:function(e,t,n,i){for(var r=0,a=t.length;r!==a;++r){var o=t[r],l=n[o.id];!1!==l.needsUpdate&&o.setValue(e,l.value,i)}}},{key:"seqWithValue",value:function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var a=e[i];a.id in t&&n.push(a)}return n}}]),e}();function Bg(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}var Zg=0;function wg(e,t,n){var i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";var a=/ERROR: 0:(\d+)/.exec(r);if(a){var o=parseInt(a[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){for(var n=e.split("\n"),i=[],r=Math.max(t-6,0),a=Math.min(t+6,n.length),o=r;o<a;o++){var l=o+1;i.push("".concat(l===t?">":" "," ").concat(l,": ").concat(n[o]))}return i.join("\n")}(e.getShaderSource(t),o)}return r}function xg(e,t){var n=function(e){switch(e){case Ln:return["Linear","( value )"];case _n:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Sg(e,t){var n;switch(t){case gt:n="Linear";break;case st:n="Reinhard";break;case ct:n="OptimizedCineon";break;case ut:n="ACESFilmic";break;case It:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Wg(e){return""!==e}function Vg(e,t){var n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Rg(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var qg=/^[ \t]*#include +<([\w\d./]+)>/gm;function kg(e){return e.replace(qg,Xg)}function Xg(e,t){var n=Lo[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return kg(n)}var Yg=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ng(e){return e.replace(Yg,Kg)}function Kg(e,t,n,i){for(var r="",a=parseInt(t);a<parseInt(n);a++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function Hg(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function zg(e,t,n,i){var r,a,o=e.getContext(),l=n.defines,g=n.vertexShader,s=n.fragmentShader,c=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===ye?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===Ge?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Be&&(t="SHADOWMAP_TYPE_VSM"),t}(n),u=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Ct:case ht:t="ENVMAP_TYPE_CUBE";break;case mt:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),I=function(e){var t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===ht&&(t="ENVMAP_MODE_REFRACTION");return t}(n),d=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case rt:t="ENVMAP_BLENDING_MULTIPLY";break;case at:t="ENVMAP_BLENDING_MIX";break;case ot:t="ENVMAP_BLENDING_ADD"}return t}(n),C=function(e){var t=e.envMapCubeUVHeight;if(null===t)return null;var n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),h=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Wg).join("\n")}(n),A=function(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(l),p=o.createProgram(),m=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((r=[A].filter(Wg).join("\n")).length>0&&(r+="\n"),(a=[h,A].filter(Wg).join("\n")).length>0&&(a+="\n")):(r=[Hg(n),"#define SHADER_NAME "+n.shaderName,A,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+I:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Wg).join("\n"),a=[h,Hg(n),"#define SHADER_NAME "+n.shaderName,A,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+I:"",n.envMap?"#define "+d:"",C?"#define CUBEUV_TEXEL_WIDTH "+C.texelWidth:"",C?"#define CUBEUV_TEXEL_HEIGHT "+C.texelHeight:"",C?"#define CUBEUV_MAX_MIP "+C.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==lt?"#define TONE_MAPPING":"",n.toneMapping!==lt?Lo.tonemapping_pars_fragment:"",n.toneMapping!==lt?Sg("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Lo.encodings_pars_fragment,xg("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Wg).join("\n")),g=Rg(g=Vg(g=kg(g),n),n),s=Rg(s=Vg(s=kg(s),n),n),g=Ng(g),s=Ng(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(m="#version 300 es\n",r=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+r,a=["#define varying in",n.glslVersion===Gi?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Gi?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var f,v,b=m+a+s,y=Bg(o,35633,m+r+g),G=Bg(o,35632,b);if(o.attachShader(p,y),o.attachShader(p,G),void 0!==n.index0AttributeName?o.bindAttribLocation(p,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(p,0,"position"),o.linkProgram(p),e.debug.checkShaderErrors){var B=o.getProgramInfoLog(p).trim(),Z=o.getShaderInfoLog(y).trim(),w=o.getShaderInfoLog(G).trim(),x=!0,S=!0;if(!1===o.getProgramParameter(p,35714)){x=!1;var W=wg(o,y,"vertex"),V=wg(o,G,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(p,35715)+"\n\nProgram Info Log: "+B+"\n"+W+"\n"+V)}else""!==B?console.warn("THREE.WebGLProgram: Program Info Log:",B):""!==Z&&""!==w||(S=!1);S&&(this.diagnostics={runnable:x,programLog:B,vertexShader:{log:Z,prefix:r},fragmentShader:{log:w,prefix:a}})}return o.deleteShader(y),o.deleteShader(G),this.getUniforms=function(){return void 0===f&&(f=new Gg(o,p)),f},this.getAttributes=function(){return void 0===v&&(v=function(e,t){for(var n={},i=e.getProgramParameter(t,35721),r=0;r<i;r++){var a=e.getActiveAttrib(t,r),o=a.name,l=1;35674===a.type&&(l=2),35675===a.type&&(l=3),35676===a.type&&(l=4),n[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:l}}return n}(o,p)),v},this.destroy=function(){i.releaseStatesOfProgram(this),o.deleteProgram(p),this.program=void 0},this.name=n.shaderName,this.id=Zg++,this.cacheKey=t,this.usedTimes=1,this.program=p,this.vertexShader=y,this.fragmentShader=G,this}var Mg=0,Fg=function(){function e(){$(this,e),this.shaderCache=new Map,this.materialCache=new Map}return te(e,[{key:"update",value:function(e){var t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(i)&&(a.add(i),i.usedTimes++),!1===a.has(r)&&(a.add(r),r.usedTimes++),this}},{key:"remove",value:function(e){var t,n=E(this.materialCache.get(e));try{for(n.s();!(t=n.n()).done;){var i=t.value;i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code)}}catch(r){n.e(r)}finally{n.f()}return this.materialCache.delete(e),this}},{key:"getVertexShaderID",value:function(e){return this._getShaderStage(e.vertexShader).id}},{key:"getFragmentShaderID",value:function(e){return this._getShaderStage(e.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(e){var t=this.materialCache,n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}},{key:"_getShaderStage",value:function(e){var t=this.shaderCache,n=t.get(e);return void 0===n&&(n=new Lg(e),t.set(e,n)),n}}]),e}(),Lg=te((function e(t){$(this,e),this.id=Mg++,this.code=t,this.usedTimes=0}));function _g(e,t,n,i,r,a,o){var l=new aa,g=new Fg,s=[],c=r.isWebGL2,u=r.logarithmicDepthBuffer,I=r.vertexTextures,d=r.precision,C={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(a,l,s,h,A){var p=h.fog,m=A.geometry,f=a.isMeshStandardMaterial?h.environment:null,v=(a.isMeshStandardMaterial?n:t).get(a.envMap||f),b=v&&v.mapping===mt?v.image.height:null,y=C[a.type];null!==a.precision&&(d=r.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",d,"instead.");var G,B,Z,w,x=m.morphAttributes.position||m.morphAttributes.normal||m.morphAttributes.color,S=void 0!==x?x.length:0,W=0;if(void 0!==m.morphAttributes.position&&(W=1),void 0!==m.morphAttributes.normal&&(W=2),void 0!==m.morphAttributes.color&&(W=3),y){var V=To[y];G=V.vertexShader,B=V.fragmentShader}else G=a.vertexShader,B=a.fragmentShader,g.update(a),Z=g.getVertexShaderID(a),w=g.getFragmentShaderID(a);var R=e.getRenderTarget(),q=a.alphaTest>0,k=a.clearcoat>0,X=a.iridescence>0;return{isWebGL2:c,shaderID:y,shaderName:a.type,vertexShader:G,fragmentShader:B,defines:a.defines,customVertexShaderID:Z,customFragmentShaderID:w,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:d,instancing:!0===A.isInstancedMesh,instancingColor:!0===A.isInstancedMesh&&null!==A.instanceColor,supportsVertexTextures:I,outputEncoding:null===R?e.outputEncoding:!0===R.isXRRenderTarget?R.texture.encoding:Ln,map:!!a.map,matcap:!!a.matcap,envMap:!!v,envMapMode:v&&v.mapping,envMapCubeUVHeight:b,lightMap:!!a.lightMap,aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:a.normalMapType===Un,tangentSpaceNormalMap:a.normalMapType===Jn,decodeVideoTexture:!!a.map&&!0===a.map.isVideoTexture&&a.map.encoding===_n,clearcoat:k,clearcoatMap:k&&!!a.clearcoatMap,clearcoatRoughnessMap:k&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:k&&!!a.clearcoatNormalMap,iridescence:X,iridescenceMap:X&&!!a.iridescenceMap,iridescenceThicknessMap:X&&!!a.iridescenceThicknessMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularColorMap:!!a.specularColorMap,opaque:!1===a.transparent&&a.blending===We,alphaMap:!!a.alphaMap,alphaTest:q,gradientMap:!!a.gradientMap,sheen:a.sheen>0,sheenColorMap:!!a.sheenColorMap,sheenRoughnessMap:!!a.sheenRoughnessMap,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!m.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!m.attributes.color&&4===m.attributes.color.itemSize,vertexUvs:!!a.map||!!a.bumpMap||!!a.normalMap||!!a.specularMap||!!a.alphaMap||!!a.emissiveMap||!!a.roughnessMap||!!a.metalnessMap||!!a.clearcoatMap||!!a.clearcoatRoughnessMap||!!a.clearcoatNormalMap||!!a.iridescenceMap||!!a.iridescenceThicknessMap||!!a.displacementMap||!!a.transmissionMap||!!a.thicknessMap||!!a.specularIntensityMap||!!a.specularColorMap||!!a.sheenColorMap||!!a.sheenRoughnessMap,uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.iridescenceMap||a.iridescenceThicknessMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularColorMap||a.sheen>0||a.sheenColorMap||a.sheenRoughnessMap)&&!!a.displacementMap,fog:!!p,useFog:!0===a.fog,fogExp2:p&&p.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===A.isSkinnedMesh,morphTargets:void 0!==m.morphAttributes.position,morphNormals:void 0!==m.morphAttributes.normal,morphColors:void 0!==m.morphAttributes.color,morphTargetsCount:S,morphTextureStride:W,numDirLights:l.directional.length,numPointLights:l.point.length,numSpotLights:l.spot.length,numSpotLightMaps:l.spotLightMap.length,numRectAreaLights:l.rectArea.length,numHemiLights:l.hemi.length,numDirLightShadows:l.directionalShadowMap.length,numPointLightShadows:l.pointShadowMap.length,numSpotLightShadows:l.spotShadowMap.length,numSpotLightShadowsWithMaps:l.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&s.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:lt,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===xe,flipSided:a.side===we,useDepthPacking:!!a.depthPacking,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||i.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(var i in t.defines)n.push(i),n.push(t.defines[i]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){l.disableAll(),t.isWebGL2&&l.enable(0);t.supportsVertexTextures&&l.enable(1);t.instancing&&l.enable(2);t.instancingColor&&l.enable(3);t.map&&l.enable(4);t.matcap&&l.enable(5);t.envMap&&l.enable(6);t.lightMap&&l.enable(7);t.aoMap&&l.enable(8);t.emissiveMap&&l.enable(9);t.bumpMap&&l.enable(10);t.normalMap&&l.enable(11);t.objectSpaceNormalMap&&l.enable(12);t.tangentSpaceNormalMap&&l.enable(13);t.clearcoat&&l.enable(14);t.clearcoatMap&&l.enable(15);t.clearcoatRoughnessMap&&l.enable(16);t.clearcoatNormalMap&&l.enable(17);t.iridescence&&l.enable(18);t.iridescenceMap&&l.enable(19);t.iridescenceThicknessMap&&l.enable(20);t.displacementMap&&l.enable(21);t.specularMap&&l.enable(22);t.roughnessMap&&l.enable(23);t.metalnessMap&&l.enable(24);t.gradientMap&&l.enable(25);t.alphaMap&&l.enable(26);t.alphaTest&&l.enable(27);t.vertexColors&&l.enable(28);t.vertexAlphas&&l.enable(29);t.vertexUvs&&l.enable(30);t.vertexTangents&&l.enable(31);t.uvsVertexOnly&&l.enable(32);e.push(l.mask),l.disableAll(),t.fog&&l.enable(0);t.useFog&&l.enable(1);t.flatShading&&l.enable(2);t.logarithmicDepthBuffer&&l.enable(3);t.skinning&&l.enable(4);t.morphTargets&&l.enable(5);t.morphNormals&&l.enable(6);t.morphColors&&l.enable(7);t.premultipliedAlpha&&l.enable(8);t.shadowMapEnabled&&l.enable(9);t.physicallyCorrectLights&&l.enable(10);t.doubleSided&&l.enable(11);t.flipSided&&l.enable(12);t.useDepthPacking&&l.enable(13);t.dithering&&l.enable(14);t.specularIntensityMap&&l.enable(15);t.specularColorMap&&l.enable(16);t.transmission&&l.enable(17);t.transmissionMap&&l.enable(18);t.thicknessMap&&l.enable(19);t.sheen&&l.enable(20);t.sheenColorMap&&l.enable(21);t.sheenRoughnessMap&&l.enable(22);t.decodeVideoTexture&&l.enable(23);t.opaque&&l.enable(24);e.push(l.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t,n=C[e.type];if(n){var i=To[n];t=Bo.clone(i.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,n){for(var i,r=0,o=s.length;r<o;r++){var l=s[r];if(l.cacheKey===n){++(i=l).usedTimes;break}}return void 0===i&&(i=new zg(e,n,t,a),s.push(i)),i},releaseProgram:function(e){if(0===--e.usedTimes){var t=s.indexOf(e);s[t]=s[s.length-1],s.pop(),e.destroy()}},releaseShaderCache:function(e){g.remove(e)},programs:s,dispose:function(){g.dispose()}}}function Tg(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function Eg(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Jg(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ug(){var e=[],t=0,n=[],i=[],r=[];function a(n,i,r,a,o,l){var g=e[t];return void 0===g?(g={id:n.id,object:n,geometry:i,material:r,groupOrder:a,renderOrder:n.renderOrder,z:o,group:l},e[t]=g):(g.id=n.id,g.object=n,g.geometry=i,g.material=r,g.groupOrder=a,g.renderOrder=n.renderOrder,g.z=o,g.group=l),t++,g}return{opaque:n,transmissive:i,transparent:r,init:function(){t=0,n.length=0,i.length=0,r.length=0},push:function(e,t,o,l,g,s){var c=a(e,t,o,l,g,s);o.transmission>0?i.push(c):!0===o.transparent?r.push(c):n.push(c)},unshift:function(e,t,o,l,g,s){var c=a(e,t,o,l,g,s);o.transmission>0?i.unshift(c):!0===o.transparent?r.unshift(c):n.unshift(c)},finish:function(){for(var n=t,i=e.length;n<i;n++){var r=e[n];if(null===r.id)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Eg),i.length>1&&i.sort(t||Jg),r.length>1&&r.sort(t||Jg)}}}function Dg(){var e=new WeakMap;return{get:function(t,n){var i,r=e.get(t);return void 0===r?(i=new Ug,e.set(t,[i])):n>=r.length?(i=new Ug,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function Pg(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new pr,color:new ir};break;case"SpotLight":n={position:new pr,direction:new pr,color:new ir,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new pr,color:new ir,distance:0,decay:0};break;case"HemisphereLight":n={direction:new pr,skyColor:new ir,groundColor:new ir};break;case"RectAreaLight":n={color:new ir,position:new pr,halfWidth:new pr,halfHeight:new pr}}return e[t.id]=n,n}}}var Og=0;function Qg(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function jg(e,t){for(var n=new Pg,i=function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Mi};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Mi,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0},a=0;a<9;a++)r.probe.push(new pr);var o=new pr,l=new Dr,g=new Dr;return{setup:function(a,o){for(var l=0,g=0,s=0,c=0;c<9;c++)r.probe[c].set(0,0,0);var u=0,I=0,d=0,C=0,h=0,A=0,p=0,m=0,f=0,v=0;a.sort(Qg);for(var b=!0!==o?Math.PI:1,y=0,G=a.length;y<G;y++){var B=a[y],Z=B.color,w=B.intensity,x=B.distance,S=B.shadow&&B.shadow.map?B.shadow.map.texture:null;if(B.isAmbientLight)l+=Z.r*w*b,g+=Z.g*w*b,s+=Z.b*w*b;else if(B.isLightProbe)for(var W=0;W<9;W++)r.probe[W].addScaledVector(B.sh.coefficients[W],w);else if(B.isDirectionalLight){var V=n.get(B);if(V.color.copy(B.color).multiplyScalar(B.intensity*b),B.castShadow){var R=B.shadow,q=i.get(B);q.shadowBias=R.bias,q.shadowNormalBias=R.normalBias,q.shadowRadius=R.radius,q.shadowMapSize=R.mapSize,r.directionalShadow[u]=q,r.directionalShadowMap[u]=S,r.directionalShadowMatrix[u]=B.shadow.matrix,A++}r.directional[u]=V,u++}else if(B.isSpotLight){var k=n.get(B);k.position.setFromMatrixPosition(B.matrixWorld),k.color.copy(Z).multiplyScalar(w*b),k.distance=x,k.coneCos=Math.cos(B.angle),k.penumbraCos=Math.cos(B.angle*(1-B.penumbra)),k.decay=B.decay,r.spot[d]=k;var X=B.shadow;if(B.map&&(r.spotLightMap[f]=B.map,f++,X.updateMatrices(B),B.castShadow&&v++),r.spotLightMatrix[d]=X.matrix,B.castShadow){var Y=i.get(B);Y.shadowBias=X.bias,Y.shadowNormalBias=X.normalBias,Y.shadowRadius=X.radius,Y.shadowMapSize=X.mapSize,r.spotShadow[d]=Y,r.spotShadowMap[d]=S,m++}d++}else if(B.isRectAreaLight){var N=n.get(B);N.color.copy(Z).multiplyScalar(w),N.halfWidth.set(.5*B.width,0,0),N.halfHeight.set(0,.5*B.height,0),r.rectArea[C]=N,C++}else if(B.isPointLight){var K=n.get(B);if(K.color.copy(B.color).multiplyScalar(B.intensity*b),K.distance=B.distance,K.decay=B.decay,B.castShadow){var H=B.shadow,z=i.get(B);z.shadowBias=H.bias,z.shadowNormalBias=H.normalBias,z.shadowRadius=H.radius,z.shadowMapSize=H.mapSize,z.shadowCameraNear=H.camera.near,z.shadowCameraFar=H.camera.far,r.pointShadow[I]=z,r.pointShadowMap[I]=S,r.pointShadowMatrix[I]=B.shadow.matrix,p++}r.point[I]=K,I++}else if(B.isHemisphereLight){var M=n.get(B);M.skyColor.copy(B.color).multiplyScalar(w*b),M.groundColor.copy(B.groundColor).multiplyScalar(w*b),r.hemi[h]=M,h++}}C>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=_o.LTC_FLOAT_1,r.rectAreaLTC2=_o.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=_o.LTC_HALF_1,r.rectAreaLTC2=_o.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=l,r.ambient[1]=g,r.ambient[2]=s;var F=r.hash;F.directionalLength===u&&F.pointLength===I&&F.spotLength===d&&F.rectAreaLength===C&&F.hemiLength===h&&F.numDirectionalShadows===A&&F.numPointShadows===p&&F.numSpotShadows===m&&F.numSpotMaps===f||(r.directional.length=u,r.spot.length=d,r.rectArea.length=C,r.point.length=I,r.hemi.length=h,r.directionalShadow.length=A,r.directionalShadowMap.length=A,r.pointShadow.length=p,r.pointShadowMap.length=p,r.spotShadow.length=m,r.spotShadowMap.length=m,r.directionalShadowMatrix.length=A,r.pointShadowMatrix.length=p,r.spotLightMatrix.length=m+f-v,r.spotLightMap.length=f,r.numSpotLightShadowsWithMaps=v,F.directionalLength=u,F.pointLength=I,F.spotLength=d,F.rectAreaLength=C,F.hemiLength=h,F.numDirectionalShadows=A,F.numPointShadows=p,F.numSpotShadows=m,F.numSpotMaps=f,r.version=Og++)},setupView:function(e,t){for(var n=0,i=0,a=0,s=0,c=0,u=t.matrixWorldInverse,I=0,d=e.length;I<d;I++){var C=e[I];if(C.isDirectionalLight){var h=r.directional[n];h.direction.setFromMatrixPosition(C.matrixWorld),o.setFromMatrixPosition(C.target.matrixWorld),h.direction.sub(o),h.direction.transformDirection(u),n++}else if(C.isSpotLight){var A=r.spot[a];A.position.setFromMatrixPosition(C.matrixWorld),A.position.applyMatrix4(u),A.direction.setFromMatrixPosition(C.matrixWorld),o.setFromMatrixPosition(C.target.matrixWorld),A.direction.sub(o),A.direction.transformDirection(u),a++}else if(C.isRectAreaLight){var p=r.rectArea[s];p.position.setFromMatrixPosition(C.matrixWorld),p.position.applyMatrix4(u),g.identity(),l.copy(C.matrixWorld),l.premultiply(u),g.extractRotation(l),p.halfWidth.set(.5*C.width,0,0),p.halfHeight.set(0,.5*C.height,0),p.halfWidth.applyMatrix4(g),p.halfHeight.applyMatrix4(g),s++}else if(C.isPointLight){var m=r.point[i];m.position.setFromMatrixPosition(C.matrixWorld),m.position.applyMatrix4(u),i++}else if(C.isHemisphereLight){var f=r.hemi[c];f.direction.setFromMatrixPosition(C.matrixWorld),f.direction.transformDirection(u),c++}}},state:r}}function $g(e,t){var n=new jg(e,t),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(e){n.setup(i,e)},setupLightsView:function(e){n.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){r.push(e)}}}function es(e,t){var n=new WeakMap;return{get:function(i){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=n.get(i);return void 0===o?(r=new $g(e,t),n.set(i,[r])):a>=o.length?(r=new $g(e,t),o.push(r)):r=o[a],r},dispose:function(){n=new WeakMap}}}var ts=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this)).isMeshDepthMaterial=!0,i.type="MeshDepthMaterial",i.depthPacking=Tn,i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.wireframe=!1,i.wireframeLinewidth=1,i.setValues(e),i}return te(n,[{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(qa),ns=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this)).isMeshDistanceMaterial=!0,i.type="MeshDistanceMaterial",i.referencePosition=new pr,i.nearDistance=1,i.farDistance=1e3,i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.setValues(e),i}return te(n,[{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(qa);function is(e,t,n){var i=new Ho,r=new Mi,a=new Mi,o=new sr,l=new ts({depthPacking:En}),g=new ns,s={},c=n.maxTextureSize,u={0:we,1:Ze,2:xe},I=new Zo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Mi},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=I.clone();d.defines.HORIZONTAL_PASS=1;var C=new eo;C.setAttribute("position",new Na(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var h=new fo(C,I),A=this;function p(n,i){var a=t.update(h);I.defines.VSM_SAMPLES!==n.blurSamples&&(I.defines.VSM_SAMPLES=n.blurSamples,d.defines.VSM_SAMPLES=n.blurSamples,I.needsUpdate=!0,d.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new cr(r.x,r.y)),I.uniforms.shadow_pass.value=n.map.texture,I.uniforms.resolution.value=n.mapSize,I.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,a,I,h,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,a,d,h,null)}function m(t,n,i,r,a,o){var c=null,I=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(c=void 0!==I?I:!0===i.isPointLight?g:l,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0){var d=c.uuid,C=n.uuid,h=s[d];void 0===h&&(h={},s[d]=h);var A=h[C];void 0===A&&(A=c.clone(),h[C]=A),c=A}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=o===Be?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:u[n.side],c.alphaMap=n.alphaMap,c.alphaTest=n.alphaTest,c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.displacementMap=n.displacementMap,c.displacementScale=n.displacementScale,c.displacementBias=n.displacementBias,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,!0===i.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(i.matrixWorld),c.nearDistance=r,c.farDistance=a),c}function f(n,r,a,o,l){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&l===Be)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var g=t.update(n),s=n.material;if(Array.isArray(s))for(var c=g.groups,u=0,I=c.length;u<I;u++){var d=c[u],C=s[d.materialIndex];if(C&&C.visible){var h=m(n,C,o,a.near,a.far,l);e.renderBufferDirect(a,null,g,h,n,d)}}else if(s.visible){var A=m(n,s,o,a.near,a.far,l);e.renderBufferDirect(a,null,g,A,n,null)}}for(var p=n.children,v=0,b=p.length;v<b;v++)f(p[v],r,a,o,l)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ye,this.render=function(t,n,l){if(!1!==A.enabled&&(!1!==A.autoUpdate||!1!==A.needsUpdate)&&0!==t.length){var g=e.getRenderTarget(),s=e.getActiveCubeFace(),u=e.getActiveMipmapLevel(),I=e.state;I.setBlending(Se),I.buffers.color.setClear(1,1,1,1),I.buffers.depth.setTest(!0),I.setScissorTest(!1);for(var d=0,C=t.length;d<C;d++){var h=t[d],m=h.shadow;if(void 0!==m){if(!1!==m.autoUpdate||!1!==m.needsUpdate){r.copy(m.mapSize);var v=m.getFrameExtents();if(r.multiply(v),a.copy(m.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(a.x=Math.floor(c/v.x),r.x=a.x*v.x,m.mapSize.x=a.x),r.y>c&&(a.y=Math.floor(c/v.y),r.y=a.y*v.y,m.mapSize.y=a.y)),null===m.map){var b=this.type!==Be?{minFilter:yt,magFilter:yt}:{};m.map=new cr(r.x,r.y,b),m.map.texture.name=h.name+".shadowMap",m.camera.updateProjectionMatrix()}e.setRenderTarget(m.map),e.clear();for(var y=m.getViewportCount(),G=0;G<y;G++){var B=m.getViewport(G);o.set(a.x*B.x,a.y*B.y,a.x*B.z,a.y*B.w),I.viewport(o),m.updateMatrices(h,G),i=m.getFrustum(),f(n,l,m.camera,h,this.type)}!0!==m.isPointLightShadow&&this.type===Be&&p(m,l),m.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",h,"has no shadow.")}A.needsUpdate=!1,e.setRenderTarget(g,s,u)}}}function rs(e,t,n){var i,r,a=n.isWebGL2;var o=new function(){var t=!1,n=new sr,i=null,r=new sr(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,o,l){!0===l&&(t*=o,i*=o,a*=o),n.set(t,i,a,o),!1===r.equals(n)&&(e.clearColor(t,i,a,o),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},l=new function(){var t=!1,n=null,i=null,r=null;return{setTest:function(e){e?_(2929):T(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case Oe:e.depthFunc(512);break;case Qe:e.depthFunc(519);break;case je:e.depthFunc(513);break;case $e:e.depthFunc(515);break;case et:e.depthFunc(514);break;case tt:e.depthFunc(518);break;case nt:e.depthFunc(516);break;case it:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},g=new function(){var t=!1,n=null,i=null,r=null,a=null,o=null,l=null,g=null,s=null;return{setTest:function(e){t||(e?_(2960):T(2960))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,o){i===t&&r===n&&a===o||(e.stencilFunc(t,n,o),i=t,r=n,a=o)},setOp:function(t,n,i){o===t&&l===n&&g===i||(e.stencilOp(t,n,i),o=t,l=n,g=i)},setLocked:function(e){t=e},setClear:function(t){s!==t&&(e.clearStencil(t),s=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,o=null,l=null,g=null,s=null}}},s=new WeakMap,c=new WeakMap,u={},I={},d=new WeakMap,C=[],h=null,A=!1,p=null,m=null,f=null,v=null,b=null,y=null,G=null,B=!1,Z=null,w=null,x=null,S=null,W=null,V=e.getParameter(35661),R=!1,q=0,k=e.getParameter(7938);-1!==k.indexOf("WebGL")?(q=parseFloat(/^WebGL (\d)/.exec(k)[1]),R=q>=1):-1!==k.indexOf("OpenGL ES")&&(q=parseFloat(/^OpenGL ES (\d)/.exec(k)[1]),R=q>=2);var X=null,Y={},N=e.getParameter(3088),K=e.getParameter(2978),H=(new sr).fromArray(N),z=(new sr).fromArray(K);function M(t,n,i){var r=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<i;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,r);return a}var F={};function _(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function T(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}F[3553]=M(3553,3553,1),F[34067]=M(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),g.setClear(0),_(2929),l.setFunc($e),P(!1),O(me),_(2884),D(Se);var E=(L(i={},Xe,32774),L(i,Ye,32778),L(i,Ne,32779),i);if(a)E[Ke]=32775,E[He]=32776;else{var J=t.get("EXT_blend_minmax");null!==J&&(E[Ke]=J.MIN_EXT,E[He]=J.MAX_EXT)}var U=(L(r={},ze,0),L(r,Me,1),L(r,Fe,768),L(r,_e,770),L(r,Pe,776),L(r,Ue,774),L(r,Ee,772),L(r,Le,769),L(r,Te,771),L(r,De,775),L(r,Je,773),r);function D(t,n,i,r,a,o,l,g){if(t!==Se){if(!1===A&&(_(3042),A=!0),t===ke)a=a||n,o=o||i,l=l||r,n===m&&a===b||(e.blendEquationSeparate(E[n],E[a]),m=n,b=a),i===f&&r===v&&o===y&&l===G||(e.blendFuncSeparate(U[i],U[r],U[o],U[l]),f=i,v=r,y=o,G=l),p=t,B=null;else if(t!==p||g!==B){if(m===Xe&&b===Xe||(e.blendEquation(32774),m=Xe,b=Xe),g)switch(t){case We:e.blendFuncSeparate(1,771,1,771);break;case Ve:e.blendFunc(1,1);break;case Re:e.blendFuncSeparate(0,769,0,1);break;case qe:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case We:e.blendFuncSeparate(770,771,1,771);break;case Ve:e.blendFunc(770,1);break;case Re:e.blendFuncSeparate(0,769,0,1);break;case qe:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}f=null,v=null,y=null,G=null,p=t,B=g}}else!0===A&&(T(3042),A=!1)}function P(t){Z!==t&&(t?e.frontFace(2304):e.frontFace(2305),Z=t)}function O(t){t!==pe?(_(2884),t!==w&&(t===me?e.cullFace(1029):t===fe?e.cullFace(1028):e.cullFace(1032))):T(2884),w=t}function Q(t,n,i){t?(_(32823),S===n&&W===i||(e.polygonOffset(n,i),S=n,W=i)):T(32823)}function j(t){void 0===t&&(t=33984+V-1),X!==t&&(e.activeTexture(t),X=t)}return{buffers:{color:o,depth:l,stencil:g},enable:_,disable:T,bindFramebuffer:function(t,n){return I[t]!==n&&(e.bindFramebuffer(t,n),I[t]=n,a&&(36009===t&&(I[36160]=n),36160===t&&(I[36009]=n)),!0)},drawBuffers:function(i,r){var a=C,o=!1;if(i)if(void 0===(a=d.get(r))&&(a=[],d.set(r,a)),i.isWebGLMultipleRenderTargets){var l=i.texture;if(a.length!==l.length||36064!==a[0]){for(var g=0,s=l.length;g<s;g++)a[g]=36064+g;a.length=l.length,o=!0}}else 36064!==a[0]&&(a[0]=36064,o=!0);else 1029!==a[0]&&(a[0]=1029,o=!0);o&&(n.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:D,setMaterial:function(e,t){e.side===xe?T(2884):_(2884);var n=e.side===we;t&&(n=!n),P(n),e.blending===We&&!1===e.transparent?D(Se):D(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),l.setFunc(e.depthFunc),l.setTest(e.depthTest),l.setMask(e.depthWrite),o.setMask(e.colorWrite);var i=e.stencilWrite;g.setTest(i),i&&(g.setMask(e.stencilWriteMask),g.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),g.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Q(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?_(32926):T(32926)},setFlipSided:P,setCullFace:O,setLineWidth:function(t){t!==x&&(R&&e.lineWidth(t),x=t)},setPolygonOffset:Q,setScissorTest:function(e){e?_(3089):T(3089)},activeTexture:j,bindTexture:function(t,n){null===X&&j();var i=Y[X];void 0===i&&(i={type:void 0,texture:void 0},Y[X]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||F[t]),i.type=t,i.texture=n)},unbindTexture:function(){var t=Y[X];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){var i=c.get(n);void 0===i&&(i=new WeakMap,c.set(n,i));var r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))},uniformBlockBinding:function(t,n){var i=c.get(n).get(t);s.get(t)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),s.set(t,i))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===H.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),H.copy(t))},viewport:function(t){!1===z.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),z.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===a&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),u={},X=null,Y={},I={},d=new WeakMap,C=[],h=null,A=!1,p=null,m=null,f=null,v=null,b=null,y=null,G=null,B=!1,Z=null,w=null,x=null,S=null,W=null,H.set(0,0,e.canvas.width,e.canvas.height),z.set(0,0,e.canvas.width,e.canvas.height),o.reset(),l.reset(),g.reset()}}}function as(e,t,n,i,r,a,o){var l,g,s,c=r.isWebGL2,u=r.maxTextures,I=r.maxCubemapSize,d=r.maxTextureSize,C=r.maxSamples,h=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,A=/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap,m=new WeakMap,f=!1;try{f="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(E){}function v(e,t){return f?new OffscreenCanvas(e,t):Ei("canvas")}function b(e,t,n,i){var r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?Ni:Math.floor,o=a(r*e.width),l=a(r*e.height);void 0===s&&(s=v(o,l));var g=n?v(o,l):s;return g.width=o,g.height=l,g.getContext("2d").drawImage(e,0,0,o,l),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+l+")."),g}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function y(e){return Xi(e.width)&&Xi(e.height)}function G(e,t){return e.generateMipmaps&&t&&e.minFilter!==yt&&e.minFilter!==xt}function B(t){e.generateMipmap(t)}function Z(n,i,r,a){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===c)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var l=i;return 6403===i&&(5126===r&&(l=33326),5131===r&&(l=33325),5121===r&&(l=33321)),33319===i&&(5126===r&&(l=33328),5131===r&&(l=33327),5121===r&&(l=33323)),6408===i&&(5126===r&&(l=34836),5131===r&&(l=34842),5121===r&&(l=a===_n&&!1===o?35907:32856),32819===r&&(l=32854),32820===r&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||t.get("EXT_color_buffer_float"),l}function w(e,t,n){return!0===G(e,n)||e.isFramebufferTexture&&e.minFilter!==yt&&e.minFilter!==xt?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function x(e){return e===yt||e===Gt||e===Zt?9728:9729}function S(e){var t=e.target;t.removeEventListener("dispose",S),function(e){var t=i.get(e);if(void 0===t.__webglInit)return;var n=e.source,r=m.get(n);if(r){var a=r[t.__cacheKey];a.usedTimes--,0===a.usedTimes&&V(e),0===Object.keys(r).length&&m.delete(n)}i.remove(e)}(t),t.isVideoTexture&&p.delete(t)}function W(t){var n=t.target;n.removeEventListener("dispose",W),function(t){var n=t.texture,r=i.get(t),a=i.get(n);void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var l=0;l<6;l++)e.deleteFramebuffer(r.__webglFramebuffer[l]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[l]);else{if(e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(var g=0;g<r.__webglColorRenderbuffer.length;g++)r.__webglColorRenderbuffer[g]&&e.deleteRenderbuffer(r.__webglColorRenderbuffer[g]);r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(var s=0,c=n.length;s<c;s++){var u=i.get(n[s]);u.__webglTexture&&(e.deleteTexture(u.__webglTexture),o.memory.textures--),i.remove(n[s])}i.remove(n),i.remove(t)}(n)}function V(t){var n=i.get(t);e.deleteTexture(n.__webglTexture);var r=t.source;delete m.get(r)[n.__cacheKey],o.memory.textures--}var R=0;function q(e,t){var r=i.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&r.__version!==e.version){var a=e.image;if(null===a)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==a.complete)return void K(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,r.__webglTexture)}var k=(L(l={},ft,10497),L(l,vt,33071),L(l,bt,33648),l),X=(L(g={},yt,9728),L(g,Gt,9984),L(g,Zt,9986),L(g,xt,9729),L(g,St,9985),L(g,Vt,9987),g);function Y(n,a,o){if(o?(e.texParameteri(n,10242,k[a.wrapS]),e.texParameteri(n,10243,k[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,k[a.wrapR]),e.texParameteri(n,10240,X[a.magFilter]),e.texParameteri(n,10241,X[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===vt&&a.wrapT===vt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,x(a.magFilter)),e.texParameteri(n,10241,x(a.minFilter)),a.minFilter!==yt&&a.minFilter!==xt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var l=t.get("EXT_texture_filter_anisotropic");if(a.type===Ht&&!1===t.has("OES_texture_float_linear"))return;if(!1===c&&a.type===zt&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function N(t,n){var i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",S));var r=n.source,a=m.get(r);void 0===a&&(a={},m.set(r,a));var l=function(e){var t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(l!==t.__cacheKey){void 0===a[l]&&(a[l]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,i=!0),a[l].usedTimes++;var g=a[t.__cacheKey];void 0!==g&&(a[t.__cacheKey].usedTimes--,0===g.usedTimes&&V(n)),t.__cacheKey=l,t.__webglTexture=a[l].texture}return i}function K(t,i,r){var o=3553;i.isDataArrayTexture&&(o=35866),i.isData3DTexture&&(o=32879);var l=N(t,i),g=i.source;if(n.activeTexture(33984+r),n.bindTexture(o,t.__webglTexture),g.version!==g.__currentVersion||!0===l){e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);var s,u=function(e){return!c&&(e.wrapS!==vt||e.wrapT!==vt||e.minFilter!==yt&&e.minFilter!==xt)}(i)&&!1===y(i.image),I=b(i.image,u,!1,d),C=y(I=T(i,I))||c,h=a.convert(i.format,i.encoding),A=a.convert(i.type),p=Z(i.internalFormat,h,A,i.encoding,i.isVideoTexture);Y(o,i,C);var m=i.mipmaps,f=c&&!0!==i.isVideoTexture,v=void 0===g.__currentVersion||!0===l,x=w(i,I,C);if(i.isDepthTexture)p=6402,c?p=i.type===Ht?36012:i.type===Kt?33190:i.type===Lt?35056:33189:i.type===Ht&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Dt&&6402===p&&i.type!==Yt&&i.type!==Kt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Kt,A=a.convert(i.type)),i.format===Pt&&6402===p&&(p=34041,i.type!==Lt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Lt,A=a.convert(i.type))),v&&(f?n.texStorage2D(3553,1,p,I.width,I.height):n.texImage2D(3553,0,p,I.width,I.height,0,h,A,null));else if(i.isDataTexture)if(m.length>0&&C){f&&v&&n.texStorage2D(3553,x,p,m[0].width,m[0].height);for(var S=0,W=m.length;S<W;S++)s=m[S],f?n.texSubImage2D(3553,S,0,0,s.width,s.height,h,A,s.data):n.texImage2D(3553,S,p,s.width,s.height,0,h,A,s.data);i.generateMipmaps=!1}else f?(v&&n.texStorage2D(3553,x,p,I.width,I.height),n.texSubImage2D(3553,0,0,0,I.width,I.height,h,A,I.data)):n.texImage2D(3553,0,p,I.width,I.height,0,h,A,I.data);else if(i.isCompressedTexture){f&&v&&n.texStorage2D(3553,x,p,m[0].width,m[0].height);for(var V=0,R=m.length;V<R;V++)s=m[V],i.format!==Et?null!==h?f?n.compressedTexSubImage2D(3553,V,0,0,s.width,s.height,h,s.data):n.compressedTexImage2D(3553,V,p,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):f?n.texSubImage2D(3553,V,0,0,s.width,s.height,h,A,s.data):n.texImage2D(3553,V,p,s.width,s.height,0,h,A,s.data)}else if(i.isDataArrayTexture)f?(v&&n.texStorage3D(35866,x,p,I.width,I.height,I.depth),n.texSubImage3D(35866,0,0,0,0,I.width,I.height,I.depth,h,A,I.data)):n.texImage3D(35866,0,p,I.width,I.height,I.depth,0,h,A,I.data);else if(i.isData3DTexture)f?(v&&n.texStorage3D(32879,x,p,I.width,I.height,I.depth),n.texSubImage3D(32879,0,0,0,0,I.width,I.height,I.depth,h,A,I.data)):n.texImage3D(32879,0,p,I.width,I.height,I.depth,0,h,A,I.data);else if(i.isFramebufferTexture){if(v)if(f)n.texStorage2D(3553,x,p,I.width,I.height);else for(var q=I.width,k=I.height,X=0;X<x;X++)n.texImage2D(3553,X,p,q,k,0,h,A,null),q>>=1,k>>=1}else if(m.length>0&&C){f&&v&&n.texStorage2D(3553,x,p,m[0].width,m[0].height);for(var K=0,H=m.length;K<H;K++)s=m[K],f?n.texSubImage2D(3553,K,0,0,h,A,s):n.texImage2D(3553,K,p,h,A,s);i.generateMipmaps=!1}else f?(v&&n.texStorage2D(3553,x,p,I.width,I.height),n.texSubImage2D(3553,0,0,0,h,A,I)):n.texImage2D(3553,0,p,h,A,I);G(i,C)&&B(o),g.__currentVersion=g.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function H(t,r,o,l,g){var s=a.convert(o.format,o.encoding),c=a.convert(o.type),u=Z(o.internalFormat,s,c,o.encoding);i.get(r).__hasExternalTextures||(32879===g||35866===g?n.texImage3D(g,0,u,r.width,r.height,r.depth,0,s,c,null):n.texImage2D(g,0,u,r.width,r.height,0,s,c,null)),n.bindFramebuffer(36160,t),_(r)?h.framebufferTexture2DMultisampleEXT(36160,l,g,i.get(o).__webglTexture,0,F(r)):e.framebufferTexture2D(36160,l,g,i.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function z(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var r=33189;if(i||_(n)){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===Ht?r=36012:o.type===Kt&&(r=33190));var l=F(n);_(n)?h.renderbufferStorageMultisampleEXT(36161,l,r,n.width,n.height):e.renderbufferStorageMultisample(36161,l,r,n.width,n.height)}else e.renderbufferStorage(36161,r,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){var g=F(n);i&&!1===_(n)?e.renderbufferStorageMultisample(36161,g,35056,n.width,n.height):_(n)?h.renderbufferStorageMultisampleEXT(36161,g,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else for(var s=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture],c=0;c<s.length;c++){var u=s[c],I=a.convert(u.format,u.encoding),d=a.convert(u.type),C=Z(u.internalFormat,I,d,u.encoding),A=F(n);i&&!1===_(n)?e.renderbufferStorageMultisample(36161,A,C,n.width,n.height):_(n)?h.renderbufferStorageMultisampleEXT(36161,A,C,n.width,n.height):e.renderbufferStorage(36161,C,n.width,n.height)}e.bindRenderbuffer(36161,null)}function M(t){var r=i.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),q(r.depthTexture,0);var a=i.get(r.depthTexture).__webglTexture,o=F(r);if(r.depthTexture.format===Dt)_(r)?h.framebufferTexture2DMultisampleEXT(36160,36096,3553,a,0,o):e.framebufferTexture2D(36160,36096,3553,a,0);else{if(r.depthTexture.format!==Pt)throw new Error("Unknown depthTexture format");_(r)?h.framebufferTexture2DMultisampleEXT(36160,33306,3553,a,0,o):e.framebufferTexture2D(36160,33306,3553,a,0)}}(r.__webglFramebuffer,t)}else if(a){r.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,r.__webglFramebuffer[o]),r.__webglDepthbuffer[o]=e.createRenderbuffer(),z(r.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),z(r.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function F(e){return Math.min(C,e.samples)}function _(e){var n=i.get(e);return c&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function T(e,n){var i=e.encoding,r=e.format,a=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===Bi||i!==Ln&&(i===_n?!1===c?!0===t.has("EXT_sRGB")&&r===Et?(e.format=Bi,e.minFilter=xt,e.generateMipmaps=!1):n=rr.sRGBToLinear(n):r===Et&&a===qt||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",i)),n}this.allocateTextureUnit=function(){var e=R;return e>=u&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+u),R+=1,e},this.resetTextureUnits=function(){R=0},this.setTexture2D=q,this.setTexture2DArray=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?K(r,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(e,t){var r=i.get(e);e.version>0&&r.__version!==e.version?K(r,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=function(t,r){var o=i.get(t);t.version>0&&o.__version!==t.version?function(t,i,r){if(6!==i.image.length)return;var o=N(t,i),l=i.source;if(n.activeTexture(33984+r),n.bindTexture(34067,t.__webglTexture),l.version!==l.__currentVersion||!0===o){e.pixelStorei(37440,i.flipY),e.pixelStorei(37441,i.premultiplyAlpha),e.pixelStorei(3317,i.unpackAlignment),e.pixelStorei(37443,0);for(var g=i.isCompressedTexture||i.image[0].isCompressedTexture,s=i.image[0]&&i.image[0].isDataTexture,u=[],d=0;d<6;d++)u[d]=g||s?s?i.image[d].image:i.image[d]:b(i.image[d],!1,!0,I),u[d]=T(i,u[d]);var C,h=u[0],A=y(h)||c,p=a.convert(i.format,i.encoding),m=a.convert(i.type),f=Z(i.internalFormat,p,m,i.encoding),v=c&&!0!==i.isVideoTexture,x=void 0===l.__currentVersion||!0===o,S=w(i,h,A);if(Y(34067,i,A),g){v&&x&&n.texStorage2D(34067,S,f,h.width,h.height);for(var W=0;W<6;W++){C=u[W].mipmaps;for(var V=0;V<C.length;V++){var R=C[V];i.format!==Et?null!==p?v?n.compressedTexSubImage2D(34069+W,V,0,0,R.width,R.height,p,R.data):n.compressedTexImage2D(34069+W,V,f,R.width,R.height,0,R.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):v?n.texSubImage2D(34069+W,V,0,0,R.width,R.height,p,m,R.data):n.texImage2D(34069+W,V,f,R.width,R.height,0,p,m,R.data)}}}else{C=i.mipmaps,v&&x&&(C.length>0&&S++,n.texStorage2D(34067,S,f,u[0].width,u[0].height));for(var q=0;q<6;q++)if(s){v?n.texSubImage2D(34069+q,0,0,0,u[q].width,u[q].height,p,m,u[q].data):n.texImage2D(34069+q,0,f,u[q].width,u[q].height,0,p,m,u[q].data);for(var k=0;k<C.length;k++){var X=C[k].image[q].image;v?n.texSubImage2D(34069+q,k+1,0,0,X.width,X.height,p,m,X.data):n.texImage2D(34069+q,k+1,f,X.width,X.height,0,p,m,X.data)}}else{v?n.texSubImage2D(34069+q,0,0,0,p,m,u[q]):n.texImage2D(34069+q,0,f,p,m,u[q]);for(var K=0;K<C.length;K++){var H=C[K];v?n.texSubImage2D(34069+q,K+1,0,0,p,m,H.image[q]):n.texImage2D(34069+q,K+1,f,p,m,H.image[q])}}}G(i,A)&&B(34067),l.__currentVersion=l.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}(o,t,r):(n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture))},this.rebindTextures=function(e,t,n){var r=i.get(e);void 0!==t&&H(r.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&M(e)},this.setupRenderTarget=function(t){var l=t.texture,g=i.get(t),s=i.get(l);t.addEventListener("dispose",W),!0!==t.isWebGLMultipleRenderTargets&&(void 0===s.__webglTexture&&(s.__webglTexture=e.createTexture()),s.__version=l.version,o.memory.textures++);var u=!0===t.isWebGLCubeRenderTarget,I=!0===t.isWebGLMultipleRenderTargets,d=y(t)||c;if(u){g.__webglFramebuffer=[];for(var C=0;C<6;C++)g.__webglFramebuffer[C]=e.createFramebuffer()}else{if(g.__webglFramebuffer=e.createFramebuffer(),I)if(r.drawBuffers)for(var h=t.texture,A=0,p=h.length;A<p;A++){var m=i.get(h[A]);void 0===m.__webglTexture&&(m.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(c&&t.samples>0&&!1===_(t)){var f=I?l:[l];g.__webglMultisampledFramebuffer=e.createFramebuffer(),g.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,g.__webglMultisampledFramebuffer);for(var v=0;v<f.length;v++){var b=f[v];g.__webglColorRenderbuffer[v]=e.createRenderbuffer(),e.bindRenderbuffer(36161,g.__webglColorRenderbuffer[v]);var w=a.convert(b.format,b.encoding),x=a.convert(b.type),S=Z(b.internalFormat,w,x,b.encoding),V=F(t);e.renderbufferStorageMultisample(36161,V,S,t.width,t.height),e.framebufferRenderbuffer(36160,36064+v,36161,g.__webglColorRenderbuffer[v])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(g.__webglDepthRenderbuffer=e.createRenderbuffer(),z(g.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(u){n.bindTexture(34067,s.__webglTexture),Y(34067,l,d);for(var R=0;R<6;R++)H(g.__webglFramebuffer[R],t,l,36064,34069+R);G(l,d)&&B(34067),n.unbindTexture()}else if(I){for(var q=t.texture,k=0,X=q.length;k<X;k++){var N=q[k],K=i.get(N);n.bindTexture(3553,K.__webglTexture),Y(3553,N,d),H(g.__webglFramebuffer,t,N,36064+k,3553),G(N,d)&&B(3553)}n.unbindTexture()}else{var L=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(c?L=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(L,s.__webglTexture),Y(L,l,d),H(g.__webglFramebuffer,t,l,36064,L),G(l,d)&&B(L),n.unbindTexture()}t.depthBuffer&&M(t)},this.updateRenderTargetMipmap=function(e){for(var t=y(e)||c,r=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=0,o=r.length;a<o;a++){var l=r[a];if(G(l,t)){var g=e.isWebGLCubeRenderTarget?34067:3553,s=i.get(l).__webglTexture;n.bindTexture(g,s),B(g),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(c&&t.samples>0&&!1===_(t)){var r=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,o=t.height,l=16384,g=[],s=t.stencilBuffer?33306:36096,u=i.get(t),I=!0===t.isWebGLMultipleRenderTargets;if(I)for(var d=0;d<r.length;d++)n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+d,36161,null),n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+d,3553,null,0);n.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,u.__webglFramebuffer);for(var C=0;C<r.length;C++){g.push(36064+C),t.depthBuffer&&g.push(s);var h=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===h&&(t.depthBuffer&&(l|=256),t.stencilBuffer&&(l|=1024)),I&&e.framebufferRenderbuffer(36008,36064,36161,u.__webglColorRenderbuffer[C]),!0===h&&(e.invalidateFramebuffer(36008,[s]),e.invalidateFramebuffer(36009,[s])),I){var p=i.get(r[C]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,p,0)}e.blitFramebuffer(0,0,a,o,0,0,a,o,l,9728),A&&e.invalidateFramebuffer(36008,g)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),I)for(var m=0;m<r.length;m++){n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+m,36161,u.__webglColorRenderbuffer[m]);var f=i.get(r[m]).__webglTexture;n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+m,3553,f,0)}n.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=M,this.setupFrameBufferTexture=H,this.useMultisampledRTT=_}function os(e,t,n){var i=n.isWebGL2;return{convert:function(n){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n===qt)return 5121;if(n===Mt)return 32819;if(n===Ft)return 32820;if(n===kt)return 5120;if(n===Xt)return 5122;if(n===Yt)return 5123;if(n===Nt)return 5124;if(n===Kt)return 5125;if(n===Ht)return 5126;if(n===zt)return i?5131:null!==(r=t.get("OES_texture_half_float"))?r.HALF_FLOAT_OES:null;if(n===_t)return 6406;if(n===Et)return 6408;if(n===Jt)return 6409;if(n===Ut)return 6410;if(n===Dt)return 6402;if(n===Pt)return 34041;if(n===Ot)return 6403;if(n===Tt)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(n===Bi)return null!==(r=t.get("EXT_sRGB"))?r.SRGB_ALPHA_EXT:null;if(n===Qt)return 36244;if(n===jt)return 33319;if(n===$t)return 33320;if(n===en)return 36249;if(n===tn||n===nn||n===rn||n===an)if(a===_n){if(null===(r=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(n===tn)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===nn)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===rn)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===an)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(r=t.get("WEBGL_compressed_texture_s3tc")))return null;if(n===tn)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===nn)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===rn)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===an)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===on||n===ln||n===gn||n===sn){if(null===(r=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(n===on)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===ln)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===gn)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===sn)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===cn)return null!==(r=t.get("WEBGL_compressed_texture_etc1"))?r.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===un||n===In){if(null===(r=t.get("WEBGL_compressed_texture_etc")))return null;if(n===un)return a===_n?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===In)return a===_n?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===dn||n===Cn||n===hn||n===An||n===pn||n===mn||n===fn||n===vn||n===bn||n===yn||n===Gn||n===Bn||n===Zn||n===wn){if(null===(r=t.get("WEBGL_compressed_texture_astc")))return null;if(n===dn)return a===_n?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Cn)return a===_n?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===hn)return a===_n?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===An)return a===_n?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===pn)return a===_n?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===mn)return a===_n?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===fn)return a===_n?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===vn)return a===_n?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===bn)return a===_n?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===yn)return a===_n?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Gn)return a===_n?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Bn)return a===_n?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Zn)return a===_n?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===wn)return a===_n?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===xn){if(null===(r=t.get("EXT_texture_compression_bptc")))return null;if(n===xn)return a===_n?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT}return n===Lt?i?34042:null!==(r=t.get("WEBGL_depth_texture"))?r.UNSIGNED_INT_24_8_WEBGL:null:void 0!==e[n]?e[n]:null}}}var ls=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return $(this,n),(e=t.call(this)).isArrayCamera=!0,e.cameras=i,e}return te(n)}(xo),gs=function(e){ne(n,e);var t=le(n);function n(){var e;return $(this,n),(e=t.call(this)).isGroup=!0,e.type="Group",e}return te(n)}(fa),ss={type:"move"},cs=function(){function e(){$(this,e),this._targetRay=null,this._grip=null,this._hand=null}return te(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new gs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new gs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new pr,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new pr),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new gs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new pr,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new pr),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var i=null,r=null,a=null,o=this._targetRay,l=this._grip,g=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(g&&e.hand){a=!0;var s,c=E(e.hand.values());try{for(c.s();!(s=c.n()).done;){var u=s.value,I=t.getJointPose(u,n);if(void 0===g.joints[u.jointName]){var d=new gs;d.matrixAutoUpdate=!1,d.visible=!1,g.joints[u.jointName]=d,g.add(d)}var C=g.joints[u.jointName];null!==I&&(C.matrix.fromArray(I.transform.matrix),C.matrix.decompose(C.position,C.rotation,C.scale),C.jointRadius=I.radius),C.visible=null!==I}}catch(m){c.e(m)}finally{c.f()}var h=g.joints["index-finger-tip"],A=g.joints["thumb-tip"],p=h.position.distanceTo(A.position);g.inputState.pinching&&p>.025?(g.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!g.inputState.pinching&&p<=.015&&(g.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&null!==(r=t.getPose(e.gripSpace,n))&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1);null!==o&&(null===(i=t.getPose(e.targetRaySpace,n))&&null!==r&&(i=r),null!==i&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),i.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(i.linearVelocity)):o.hasLinearVelocity=!1,i.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(i.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(ss)))}return null!==o&&(o.visible=null!==i),null!==l&&(l.visible=null!==r),null!==g&&(g.visible=null!==a),this}}]),e}(),us=function(e){ne(n,e);var t=le(n);function n(e,i,r,a,o,l,g,s,c,u){var I;if($(this,n),(u=void 0!==u?u:Dt)!==Dt&&u!==Pt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===r&&u===Dt&&(r=Kt),void 0===r&&u===Pt&&(r=Lt),(I=t.call(this,null,a,o,l,g,s,u,r,c)).isDepthTexture=!0,I.image={width:e,height:i},I.magFilter=void 0!==g?g:yt,I.minFilter=void 0!==s?s:yt,I.flipY=!1,I.generateMipmaps=!1,I}return te(n)}(gr),Is=function(e){ne(n,e);var t=le(n);function n(e,i){var r;$(this,n);var a=ae(r=t.call(this)),o=null,l=1,g=null,s="local-floor",c=null,u=null,I=null,d=null,C=null,h=null,A=i.getContextAttributes(),p=null,m=null,f=[],v=[],b=new xo;b.layers.enable(1),b.viewport=new sr;var y=new xo;y.layers.enable(2),y.viewport=new sr;var G=[b,y],B=new ls;B.layers.enable(1),B.layers.enable(2);var Z=null,w=null;function x(e){var t=v.indexOf(e.inputSource);if(-1!==t){var n=f[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}}function S(){o.removeEventListener("select",x),o.removeEventListener("selectstart",x),o.removeEventListener("selectend",x),o.removeEventListener("squeeze",x),o.removeEventListener("squeezestart",x),o.removeEventListener("squeezeend",x),o.removeEventListener("end",S),o.removeEventListener("inputsourceschange",W);for(var t=0;t<f.length;t++){var n=v[t];null!==n&&(v[t]=null,f[t].disconnect(n))}Z=null,w=null,e.setRenderTarget(p),C=null,d=null,I=null,o=null,m=null,X.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}function W(e){for(var t=0;t<e.removed.length;t++){var n=e.removed[t],i=v.indexOf(n);i>=0&&(v[i]=null,f[i].dispatchEvent({type:"disconnected",data:n}))}for(var r=0;r<e.added.length;r++){var a=e.added[r],o=v.indexOf(a);if(-1===o){for(var l=0;l<f.length;l++){if(l>=v.length){v.push(a),o=l;break}if(null===v[l]){v[l]=a,o=l;break}}if(-1===o)break}var g=f[o];g&&g.dispatchEvent({type:"connected",data:a})}}r.cameraAutoUpdate=!0,r.enabled=!1,r.isPresenting=!1,r.getController=function(e){var t=f[e];return void 0===t&&(t=new cs,f[e]=t),t.getTargetRaySpace()},r.getControllerGrip=function(e){var t=f[e];return void 0===t&&(t=new cs,f[e]=t),t.getGripSpace()},r.getHand=function(e){var t=f[e];return void 0===t&&(t=new cs,f[e]=t),t.getHandSpace()},r.setFramebufferScaleFactor=function(e){l=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},r.setReferenceSpaceType=function(e){s=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},r.getReferenceSpace=function(){return c||g},r.setReferenceSpace=function(e){c=e},r.getBaseLayer=function(){return null!==d?d:C},r.getBinding=function(){return I},r.getFrame=function(){return h},r.getSession=function(){return o},r.setSession=function(){var t=ce(de().mark((function t(n){var r,u,h,f,v;return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(o=n)){t.next=25;break}if(p=e.getRenderTarget(),o.addEventListener("select",x),o.addEventListener("selectstart",x),o.addEventListener("selectend",x),o.addEventListener("squeeze",x),o.addEventListener("squeezestart",x),o.addEventListener("squeezeend",x),o.addEventListener("end",S),o.addEventListener("inputsourceschange",W),!0===A.xrCompatible){t.next=14;break}return t.next=14,i.makeXRCompatible();case 14:return void 0===o.renderState.layers||!1===e.capabilities.isWebGL2?(r={antialias:void 0!==o.renderState.layers||A.antialias,alpha:A.alpha,depth:A.depth,stencil:A.stencil,framebufferScaleFactor:l},C=new XRWebGLLayer(o,i,r),o.updateRenderState({baseLayer:C}),m=new cr(C.framebufferWidth,C.framebufferHeight,{format:Et,type:qt,encoding:e.outputEncoding,stencilBuffer:A.stencil})):(u=null,h=null,f=null,A.depth&&(f=A.stencil?35056:33190,u=A.stencil?Pt:Dt,h=A.stencil?Lt:Kt),v={colorFormat:32856,depthFormat:f,scaleFactor:l},I=new XRWebGLBinding(o,i),d=I.createProjectionLayer(v),o.updateRenderState({layers:[d]}),m=new cr(d.textureWidth,d.textureHeight,{format:Et,type:qt,depthTexture:new us(d.textureWidth,d.textureHeight,h,void 0,void 0,void 0,void 0,void 0,void 0,u),stencilBuffer:A.stencil,encoding:e.outputEncoding,samples:A.antialias?4:0}),e.properties.get(m).__ignoreDepthValues=d.ignoreDepthValues),m.isXRRenderTarget=!0,this.setFoveation(1),c=null,t.next=20,o.requestReferenceSpace(s);case 20:g=t.sent,X.setContext(o),X.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"});case 25:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}();var V=new pr,R=new pr;function q(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}r.updateCamera=function(e){if(null!==o){B.near=y.near=b.near=e.near,B.far=y.far=b.far=e.far,Z===B.near&&w===B.far||(o.updateRenderState({depthNear:B.near,depthFar:B.far}),Z=B.near,w=B.far);var t=e.parent,n=B.cameras;q(B,t);for(var i=0;i<n.length;i++)q(n[i],t);B.matrixWorld.decompose(B.position,B.quaternion,B.scale),e.matrix.copy(B.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);for(var r=e.children,a=0,l=r.length;a<l;a++)r[a].updateMatrixWorld(!0);2===n.length?function(e,t,n){V.setFromMatrixPosition(t.matrixWorld),R.setFromMatrixPosition(n.matrixWorld);var i=V.distanceTo(R),r=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),l=r[14]/(r[10]+1),g=(r[9]+1)/r[5],s=(r[9]-1)/r[5],c=(r[8]-1)/r[0],u=(a[8]+1)/a[0],I=o*c,d=o*u,C=i/(-c+u),h=C*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(h),e.translateZ(C),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var A=o+C,p=l+C,m=I-h,f=d+(i-h),v=g*l/p*A,b=s*l/p*A;e.projectionMatrix.makePerspective(m,f,v,b,A,p)}(B,b,y):B.projectionMatrix.copy(b.projectionMatrix)}},r.getCamera=function(){return B},r.getFoveation=function(){return null!==d?d.fixedFoveation:null!==C?C.fixedFoveation:void 0},r.setFoveation=function(e){null!==d&&(d.fixedFoveation=e),null!==C&&void 0!==C.fixedFoveation&&(C.fixedFoveation=e)};var k=null;var X=new zo;return X.setAnimationLoop((function(t,n){if(u=n.getViewerPose(c||g),h=n,null!==u){var i=u.views;null!==C&&(e.setRenderTargetFramebuffer(m,C.framebuffer),e.setRenderTarget(m));var r=!1;i.length!==B.cameras.length&&(B.cameras.length=0,r=!0);for(var a=0;a<i.length;a++){var o=i[a],l=null;if(null!==C)l=C.getViewport(o);else{var s=I.getViewSubImage(d,o);l=s.viewport,0===a&&(e.setRenderTargetTextures(m,s.colorTexture,d.ignoreDepthValues?void 0:s.depthStencilTexture),e.setRenderTarget(m))}var A=G[a];void 0===A&&((A=new xo).layers.enable(a),A.viewport=new sr,G[a]=A),A.matrix.fromArray(o.transform.matrix),A.projectionMatrix.fromArray(o.projectionMatrix),A.viewport.set(l.x,l.y,l.width,l.height),0===a&&B.matrix.copy(A.matrix),!0===r&&B.cameras.push(A)}}for(var p=0;p<f.length;p++){var b=v[p],y=f[p];null!==b&&void 0!==y&&y.update(b,n,c||g)}k&&k(t,n),h=null})),r.setAnimationLoop=function(e){k=e},r.dispose=function(){},r}return te(n)}(Zi);function ds(e,t){function n(n,i){n.opacity.value=i.opacity,i.color&&n.diffuse.value.copy(i.color),i.emissive&&n.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(n.map.value=i.map),i.alphaMap&&(n.alphaMap.value=i.alphaMap),i.bumpMap&&(n.bumpMap.value=i.bumpMap,n.bumpScale.value=i.bumpScale,i.side===we&&(n.bumpScale.value*=-1)),i.displacementMap&&(n.displacementMap.value=i.displacementMap,n.displacementScale.value=i.displacementScale,n.displacementBias.value=i.displacementBias),i.emissiveMap&&(n.emissiveMap.value=i.emissiveMap),i.normalMap&&(n.normalMap.value=i.normalMap,n.normalScale.value.copy(i.normalScale),i.side===we&&n.normalScale.value.negate()),i.specularMap&&(n.specularMap.value=i.specularMap),i.alphaTest>0&&(n.alphaTest.value=i.alphaTest);var r,a,o=t.get(i).envMap;if(o&&(n.envMap.value=o,n.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,n.reflectivity.value=i.reflectivity,n.ior.value=i.ior,n.refractionRatio.value=i.refractionRatio),i.lightMap){n.lightMap.value=i.lightMap;var l=!0!==e.physicallyCorrectLights?Math.PI:1;n.lightMapIntensity.value=i.lightMapIntensity*l}i.aoMap&&(n.aoMap.value=i.aoMap,n.aoMapIntensity.value=i.aoMapIntensity),i.map?r=i.map:i.specularMap?r=i.specularMap:i.displacementMap?r=i.displacementMap:i.normalMap?r=i.normalMap:i.bumpMap?r=i.bumpMap:i.roughnessMap?r=i.roughnessMap:i.metalnessMap?r=i.metalnessMap:i.alphaMap?r=i.alphaMap:i.emissiveMap?r=i.emissiveMap:i.clearcoatMap?r=i.clearcoatMap:i.clearcoatNormalMap?r=i.clearcoatNormalMap:i.clearcoatRoughnessMap?r=i.clearcoatRoughnessMap:i.iridescenceMap?r=i.iridescenceMap:i.iridescenceThicknessMap?r=i.iridescenceThicknessMap:i.specularIntensityMap?r=i.specularIntensityMap:i.specularColorMap?r=i.specularColorMap:i.transmissionMap?r=i.transmissionMap:i.thicknessMap?r=i.thicknessMap:i.sheenColorMap?r=i.sheenColorMap:i.sheenRoughnessMap&&(r=i.sheenRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),n.uvTransform.value.copy(r.matrix)),i.aoMap?a=i.aoMap:i.lightMap&&(a=i.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,i,r,a,o){i.isMeshBasicMaterial||i.isMeshLambertMaterial?n(e,i):i.isMeshToonMaterial?(n(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(n(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(n(e,i),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap);n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===we&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,i,o)):i.isMeshMatcapMaterial?(n(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?n(e,i):i.isMeshDistanceMaterial?(n(e,i),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,i)):i.isMeshNormalMaterial?n(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,n,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*i,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var r;t.map?r=t.map:t.alphaMap&&(r=t.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,i,r,a):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);var n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function Cs(e,t,n,i){var r={},a={},o=[],l=n.isWebGL2?e.getParameter(35375):0;function g(e,t,n){var i=e.value;if(void 0===n[t])return n[t]="number"===typeof i?i:i.clone(),!0;if("number"===typeof i){if(n[t]!==i)return n[t]=i,!0}else{var r=n[t];if(!1===r.equals(i))return r.copy(i),!0}return!1}function s(e){var t=e.value,n={boundary:0,storage:0};return"number"===typeof t?(n.boundary=4,n.storage=4):t.isVector2?(n.boundary=8,n.storage=8):t.isVector3||t.isColor?(n.boundary=16,n.storage=12):t.isVector4?(n.boundary=16,n.storage=16):t.isMatrix3?(n.boundary=48,n.storage=48):t.isMatrix4?(n.boundary=64,n.storage=64):t.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),n}function c(t){var n=t.target;n.removeEventListener("dispose",c);var i=o.indexOf(n.__bindingPointIndex);o.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete a[n.id]}return{bind:function(e,t){var n=t.program;i.uniformBlockBinding(e,n)},update:function(n,u){var I=r[n.id];void 0===I&&(!function(e){for(var t=e.uniforms,n=0,i=16,r=0,a=0,o=t.length;a<o;a++){var l=t[a],g=s(l);if(l.__data=new Float32Array(g.storage/Float32Array.BYTES_PER_ELEMENT),l.__offset=n,a>0)0!==(r=n%i)&&i-r-g.boundary<0&&(n+=i-r,l.__offset=n);n+=g.storage}(r=n%i)>0&&(n+=i-r);e.__size=n,e.__cache={}}(n),I=function(t){var n=function(){for(var e=0;e<l;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;var i=e.createBuffer(),r=t.__size,a=t.usage;return e.bindBuffer(35345,i),e.bufferData(35345,r,a),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,i),i}(n),r[n.id]=I,n.addEventListener("dispose",c));var d=u.program;i.updateUBOMapping(n,d);var C=t.render.frame;a[n.id]!==C&&(!function(t){var n=r[t.id],i=t.uniforms,a=t.__cache;e.bindBuffer(35345,n);for(var o=0,l=i.length;o<l;o++){var s=i[o];if(!0===g(s,o,a)){var c=s.value,u=s.__offset;"number"===typeof c?(s.__data[0]=c,e.bufferSubData(35345,u,s.__data)):(s.value.isMatrix3?(s.__data[0]=s.value.elements[0],s.__data[1]=s.value.elements[1],s.__data[2]=s.value.elements[2],s.__data[3]=s.value.elements[0],s.__data[4]=s.value.elements[3],s.__data[5]=s.value.elements[4],s.__data[6]=s.value.elements[5],s.__data[7]=s.value.elements[0],s.__data[8]=s.value.elements[6],s.__data[9]=s.value.elements[7],s.__data[10]=s.value.elements[8],s.__data[11]=s.value.elements[0]):c.toArray(s.__data),e.bufferSubData(35345,u,s.__data))}}e.bindBuffer(35345,null)}(n),a[n.id]=C)},dispose:function(){for(var t in r)e.deleteBuffer(r[t]);o=[],r={},a={}}}}function hs(){var e=Ei("canvas");return e.style.display="block",e}function As(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;var t,n=void 0!==e.canvas?e.canvas:hs(),i=void 0!==e.context?e.context:null,r=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,l=void 0===e.premultipliedAlpha||e.premultipliedAlpha,g=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,s=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;t=null!==i?i.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;var u=null,I=null,d=[],C=[];this.domElement=n,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Ln,this.physicallyCorrectLights=!1,this.toneMapping=lt,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});var h=this,A=!1,p=0,m=0,f=null,v=-1,b=null,y=new sr,G=new sr,B=null,Z=n.width,w=n.height,x=1,S=null,W=null,V=new sr(0,0,Z,w),R=new sr(0,0,Z,w),q=!1,k=new Ho,X=!1,Y=!1,N=null,K=new Dr,H=new Mi,z=new pr,M={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function F(){return null===f?x:1}var L,_,T,E,J,U,D,P,O,Q,j,$,ee,te,ne,ie,re,ae,oe,le,ge,se,ce,ue,Ie=i;function de(e,t){for(var i=0;i<e.length;i++){var r=e[i],a=n.getContext(r,t);if(null!==a)return a}return null}try{var he={alpha:!0,depth:r,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:g,powerPreference:s,failIfMajorPerformanceCaveat:c};if("setAttribute"in n&&n.setAttribute("data-engine","three.js r".concat(Ce)),n.addEventListener("webglcontextlost",fe,!1),n.addEventListener("webglcontextrestored",ve,!1),n.addEventListener("webglcontextcreationerror",be,!1),null===Ie){var Ae=["webgl2","webgl","experimental-webgl"];if(!0===h.isWebGL1Renderer&&Ae.shift(),null===(Ie=de(Ae,he)))throw de(Ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Ie.getShaderPrecisionFormat&&(Ie.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(_e){throw console.error("THREE.WebGLRenderer: "+_e.message),_e}function pe(){L=new Il(Ie),_=new Do(Ie,L,e),L.init(_),se=new os(Ie,L,_),T=new rs(Ie,L,_),E=new hl,J=new Tg,U=new as(Ie,L,T,J,_,se,E),D=new Oo(h),P=new ul(h),O=new Mo(Ie,_),ce=new Jo(Ie,L,O,_),Q=new dl(Ie,O,E,ce),j=new fl(Ie,Q,O,E),oe=new ml(Ie,_,U),ie=new Po(J),$=new _g(h,D,P,L,_,ce,ie),ee=new ds(h,J),te=new Dg,ne=new es(L,_),ae=new Eo(h,D,T,j,t,l),re=new is(h,j,_),ue=new Cs(Ie,E,_,T),le=new Uo(Ie,L,E,_),ge=new Cl(Ie,L,E,_),E.programs=$.programs,h.capabilities=_,h.extensions=L,h.properties=J,h.renderLists=te,h.shadowMap=re,h.state=T,h.info=E}pe();var me=new Is(h,Ie);function fe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function ve(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;var e=E.autoReset,t=re.enabled,n=re.autoUpdate,i=re.needsUpdate,r=re.type;pe(),E.autoReset=e,re.enabled=t,re.autoUpdate=n,re.needsUpdate=i,re.type=r}function be(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function ye(e){var t=e.target;t.removeEventListener("dispose",ye),Ge(t)}function Ge(e){Be(e),J.remove(e)}function Be(e){var t=J.get(e).programs;void 0!==t&&(t.forEach((function(e){$.releaseProgram(e)})),e.isShaderMaterial&&$.releaseShaderCache(e))}this.xr=me,this.getContext=function(){return Ie},this.getContextAttributes=function(){return Ie.getContextAttributes()},this.forceContextLoss=function(){var e=L.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=L.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return x},this.setPixelRatio=function(e){void 0!==e&&(x=e,this.setSize(Z,w,!1))},this.getSize=function(e){return e.set(Z,w)},this.setSize=function(e,t,i){me.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Z=e,w=t,n.width=Math.floor(e*x),n.height=Math.floor(t*x),!1!==i&&(n.style.width=e+"px",n.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(Z*x,w*x).floor()},this.setDrawingBufferSize=function(e,t,i){Z=e,w=t,x=i,n.width=Math.floor(e*i),n.height=Math.floor(t*i),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(y)},this.getViewport=function(e){return e.copy(V)},this.setViewport=function(e,t,n,i){e.isVector4?V.set(e.x,e.y,e.z,e.w):V.set(e,t,n,i),T.viewport(y.copy(V).multiplyScalar(x).floor())},this.getScissor=function(e){return e.copy(R)},this.setScissor=function(e,t,n,i){e.isVector4?R.set(e.x,e.y,e.z,e.w):R.set(e,t,n,i),T.scissor(G.copy(R).multiplyScalar(x).floor())},this.getScissorTest=function(){return q},this.setScissorTest=function(e){T.setScissorTest(q=e)},this.setOpaqueSort=function(e){S=e},this.setTransparentSort=function(e){W=e},this.getClearColor=function(e){return e.copy(ae.getClearColor())},this.setClearColor=function(){ae.setClearColor.apply(ae,arguments)},this.getClearAlpha=function(){return ae.getClearAlpha()},this.setClearAlpha=function(){ae.setClearAlpha.apply(ae,arguments)},this.clear=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=0;e&&(i|=16384),t&&(i|=256),n&&(i|=1024),Ie.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",fe,!1),n.removeEventListener("webglcontextrestored",ve,!1),n.removeEventListener("webglcontextcreationerror",be,!1),te.dispose(),ne.dispose(),J.dispose(),D.dispose(),P.dispose(),j.dispose(),ce.dispose(),ue.dispose(),$.dispose(),me.dispose(),me.removeEventListener("sessionstart",Ve),me.removeEventListener("sessionend",Re),N&&(N.dispose(),N=null),qe.stop()},this.renderBufferDirect=function(e,t,n,i,r,a){null===t&&(t=M);var o=r.isMesh&&r.matrixWorld.determinant()<0,l=Me(e,t,n,i,r);T.setMaterial(i,o);var g=n.index,s=n.attributes.position;if(null===g){if(void 0===s||0===s.count)return}else if(0===g.count)return;var c,u=1;!0===i.wireframe&&(g=Q.getWireframeAttribute(n),u=2),ce.setup(r,i,l,n,g);var I=le;null!==g&&(c=O.get(g),(I=ge).setIndex(c));var d=null!==g?g.count:s.count,C=n.drawRange.start*u,h=n.drawRange.count*u,A=null!==a?a.start*u:0,p=null!==a?a.count*u:1/0,m=Math.max(C,A),f=Math.min(d,C+h,A+p)-1,v=Math.max(0,f-m+1);if(0!==v){if(r.isMesh)!0===i.wireframe?(T.setLineWidth(i.wireframeLinewidth*F()),I.setMode(1)):I.setMode(4);else if(r.isLine){var b=i.linewidth;void 0===b&&(b=1),T.setLineWidth(b*F()),r.isLineSegments?I.setMode(1):r.isLineLoop?I.setMode(2):I.setMode(3)}else r.isPoints?I.setMode(0):r.isSprite&&I.setMode(4);if(r.isInstancedMesh)I.renderInstances(m,v,r.count);else if(n.isInstancedBufferGeometry){var y=Math.min(n.instanceCount,n._maxInstanceCount);I.renderInstances(m,v,y)}else I.render(m,v)}},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===xe?(e.side=we,e.needsUpdate=!0,He(e,t,n),e.side=Ze,e.needsUpdate=!0,He(e,t,n),e.side=xe):He(e,t,n)}(I=ne.get(e)).init(),C.push(I),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(I.pushLight(e),e.castShadow&&I.pushShadow(e))})),I.setupLights(h.physicallyCorrectLights),e.traverse((function(t){var i=t.material;if(i)if(Array.isArray(i))for(var r=0;r<i.length;r++){n(i[r],e,t)}else n(i,e,t)})),C.pop(),I=null};var Se=null;function We(e){Se&&Se(e)}function Ve(){qe.stop()}function Re(){qe.start()}var qe=new zo;function ke(e,t,n,i){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)I.pushLight(e),e.castShadow&&I.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||k.intersectsSprite(e)){i&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(K);var r=j.update(e),a=e.material;a.visible&&u.push(e,r,a,n,z.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==E.render.frame&&(e.skeleton.update(),e.skeleton.frame=E.render.frame),!e.frustumCulled||k.intersectsObject(e))){i&&z.setFromMatrixPosition(e.matrixWorld).applyMatrix4(K);var o=j.update(e),l=e.material;if(Array.isArray(l))for(var g=o.groups,s=0,c=g.length;s<c;s++){var d=g[s],C=l[d.materialIndex];C&&C.visible&&u.push(e,o,C,n,z.z,d)}else l.visible&&u.push(e,o,l,n,z.z,null)}for(var h=e.children,A=0,p=h.length;A<p;A++)ke(h[A],t,n,i)}}function Xe(e,t,n,i){var r=e.opaque,a=e.transmissive,o=e.transparent;I.setupLightsView(n),a.length>0&&Ye(r,t,n),i&&T.viewport(y.copy(i)),r.length>0&&Ne(r,t,n),a.length>0&&Ne(a,t,n),o.length>0&&Ne(o,t,n),T.buffers.depth.setTest(!0),T.buffers.depth.setMask(!0),T.buffers.color.setMask(!0),T.setPolygonOffset(!1)}function Ye(e,t,n){var i=_.isWebGL2;null===N&&(N=new cr(1,1,{generateMipmaps:!0,type:L.has("EXT_color_buffer_half_float")?zt:qt,minFilter:Vt,samples:i&&!0===o?4:0})),h.getDrawingBufferSize(H),i?N.setSize(H.x,H.y):N.setSize(Ni(H.x),Ni(H.y));var r=h.getRenderTarget();h.setRenderTarget(N),h.clear();var a=h.toneMapping;h.toneMapping=lt,Ne(e,t,n),h.toneMapping=a,U.updateMultisampleRenderTarget(N),U.updateRenderTargetMipmap(N),h.setRenderTarget(r)}function Ne(e,t,n){for(var i=!0===t.isScene?t.overrideMaterial:null,r=0,a=e.length;r<a;r++){var o=e[r],l=o.object,g=o.geometry,s=null===i?o.material:i,c=o.group;l.layers.test(n.layers)&&Ke(l,t,n,g,s,c)}}function Ke(e,t,n,i,r,a){e.onBeforeRender(h,t,n,i,r,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(h,t,n,i,e,a),!0===r.transparent&&r.side===xe?(r.side=we,r.needsUpdate=!0,h.renderBufferDirect(n,t,i,r,e,a),r.side=Ze,r.needsUpdate=!0,h.renderBufferDirect(n,t,i,r,e,a),r.side=xe):h.renderBufferDirect(n,t,i,r,e,a),e.onAfterRender(h,t,n,i,r,a)}function He(e,t,n){!0!==t.isScene&&(t=M);var i=J.get(e),r=I.state.lights,a=I.state.shadowsArray,o=r.state.version,l=$.getParameters(e,r.state,a,t,n),g=$.getProgramCacheKey(l),s=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?P:D).get(e.envMap||i.environment),void 0===s&&(e.addEventListener("dispose",ye),s=new Map,i.programs=s);var c=s.get(g);if(void 0!==c){if(i.currentProgram===c&&i.lightsStateVersion===o)return ze(e,l),c}else l.uniforms=$.getUniforms(e),e.onBuild(n,l,h),e.onBeforeCompile(l,h),c=$.acquireProgram(l,g),s.set(g,c),i.uniforms=l.uniforms;var u=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(u.clippingPlanes=ie.uniform),ze(e,l),i.needsLights=Le(e),i.lightsStateVersion=o,i.needsLights&&(u.ambientLightColor.value=r.state.ambient,u.lightProbe.value=r.state.probe,u.directionalLights.value=r.state.directional,u.directionalLightShadows.value=r.state.directionalShadow,u.spotLights.value=r.state.spot,u.spotLightShadows.value=r.state.spotShadow,u.rectAreaLights.value=r.state.rectArea,u.ltc_1.value=r.state.rectAreaLTC1,u.ltc_2.value=r.state.rectAreaLTC2,u.pointLights.value=r.state.point,u.pointLightShadows.value=r.state.pointShadow,u.hemisphereLights.value=r.state.hemi,u.directionalShadowMap.value=r.state.directionalShadowMap,u.directionalShadowMatrix.value=r.state.directionalShadowMatrix,u.spotShadowMap.value=r.state.spotShadowMap,u.spotLightMatrix.value=r.state.spotLightMatrix,u.spotLightMap.value=r.state.spotLightMap,u.pointShadowMap.value=r.state.pointShadowMap,u.pointShadowMatrix.value=r.state.pointShadowMatrix);var d=c.getUniforms(),C=Gg.seqWithValue(d.seq,u);return i.currentProgram=c,i.uniformsList=C,c}function ze(e,t){var n=J.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}function Me(e,t,n,i,r){!0!==t.isScene&&(t=M),U.resetTextureUnits();var a=t.fog,o=i.isMeshStandardMaterial?t.environment:null,l=null===f?h.outputEncoding:!0===f.isXRRenderTarget?f.texture.encoding:Ln,g=(i.isMeshStandardMaterial?P:D).get(i.envMap||o),s=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,c=!!i.normalMap&&!!n.attributes.tangent,u=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,C=!!n.morphAttributes.color,A=i.toneMapped?h.toneMapping:lt,p=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,m=void 0!==p?p.length:0,y=J.get(i),G=I.state.lights;if(!0===X&&(!0===Y||e!==b)){var B=e===b&&i.id===v;ie.setState(i,e,B)}var Z=!1;i.version===y.__version?y.needsLights&&y.lightsStateVersion!==G.state.version||y.outputEncoding!==l||r.isInstancedMesh&&!1===y.instancing?Z=!0:r.isInstancedMesh||!0!==y.instancing?r.isSkinnedMesh&&!1===y.skinning?Z=!0:r.isSkinnedMesh||!0!==y.skinning?y.envMap!==g||!0===i.fog&&y.fog!==a?Z=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===ie.numPlanes&&y.numIntersection===ie.numIntersection?(y.vertexAlphas!==s||y.vertexTangents!==c||y.morphTargets!==u||y.morphNormals!==d||y.morphColors!==C||y.toneMapping!==A||!0===_.isWebGL2&&y.morphTargetsCount!==m)&&(Z=!0):Z=!0:Z=!0:Z=!0:(Z=!0,y.__version=i.version);var S=y.currentProgram;!0===Z&&(S=He(i,t,r));var W=!1,V=!1,R=!1,q=S.getUniforms(),k=y.uniforms;if(T.useProgram(S.program)&&(W=!0,V=!0,R=!0),i.id!==v&&(v=i.id,V=!0),W||b!==e){if(q.setValue(Ie,"projectionMatrix",e.projectionMatrix),_.logarithmicDepthBuffer&&q.setValue(Ie,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),b!==e&&(b=e,V=!0,R=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){var K=q.map.cameraPosition;void 0!==K&&K.setValue(Ie,z.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&q.setValue(Ie,"isOrthographic",!0===e.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&q.setValue(Ie,"viewMatrix",e.matrixWorldInverse)}if(r.isSkinnedMesh){q.setOptional(Ie,r,"bindMatrix"),q.setOptional(Ie,r,"bindMatrixInverse");var H=r.skeleton;H&&(_.floatVertexTextures?(null===H.boneTexture&&H.computeBoneTexture(),q.setValue(Ie,"boneTexture",H.boneTexture,U),q.setValue(Ie,"boneTextureSize",H.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var F=n.morphAttributes;if((void 0!==F.position||void 0!==F.normal||void 0!==F.color&&!0===_.isWebGL2)&&oe.update(r,n,i,S),(V||y.receiveShadow!==r.receiveShadow)&&(y.receiveShadow=r.receiveShadow,q.setValue(Ie,"receiveShadow",r.receiveShadow)),i.isMeshGouraudMaterial&&null!==i.envMap&&(k.envMap.value=g,k.flipEnvMap.value=g.isCubeTexture&&!1===g.isRenderTargetTexture?-1:1),V&&(q.setValue(Ie,"toneMappingExposure",h.toneMappingExposure),y.needsLights&&Fe(k,R),a&&!0===i.fog&&ee.refreshFogUniforms(k,a),ee.refreshMaterialUniforms(k,i,x,w,N),Gg.upload(Ie,y.uniformsList,k,U)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Gg.upload(Ie,y.uniformsList,k,U),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&q.setValue(Ie,"center",r.center),q.setValue(Ie,"modelViewMatrix",r.modelViewMatrix),q.setValue(Ie,"normalMatrix",r.normalMatrix),q.setValue(Ie,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial)for(var L=i.uniformsGroups,E=0,O=L.length;E<O;E++)if(_.isWebGL2){var Q=L[E];ue.update(Q,S),ue.bind(Q,S)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.");return S}function Fe(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function Le(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}qe.setAnimationLoop(We),"undefined"!==typeof self&&qe.setContext(self),this.setAnimationLoop=function(e){Se=e,me.setAnimationLoop(e),null===e?qe.stop():qe.start()},me.addEventListener("sessionstart",Ve),me.addEventListener("sessionend",Re),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==A){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===me.enabled&&!0===me.isPresenting&&(!0===me.cameraAutoUpdate&&me.updateCamera(t),t=me.getCamera()),!0===e.isScene&&e.onBeforeRender(h,e,t,f),(I=ne.get(e,C.length)).init(),C.push(I),K.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),k.setFromProjectionMatrix(K),Y=this.localClippingEnabled,X=ie.init(this.clippingPlanes,Y,t),(u=te.get(e,d.length)).init(),d.push(u),ke(e,t,0,h.sortObjects),u.finish(),!0===h.sortObjects&&u.sort(S,W),!0===X&&ie.beginShadows();var n=I.state.shadowsArray;if(re.render(n,e,t),!0===X&&ie.endShadows(),!0===this.info.autoReset&&this.info.reset(),ae.render(u,e),I.setupLights(h.physicallyCorrectLights),t.isArrayCamera)for(var i=t.cameras,r=0,a=i.length;r<a;r++){var o=i[r];Xe(u,e,o,o.viewport)}else Xe(u,e,t);null!==f&&(U.updateMultisampleRenderTarget(f),U.updateRenderTargetMipmap(f)),!0===e.isScene&&e.onAfterRender(h,e,t),ce.resetDefaultState(),v=-1,b=null,C.pop(),I=C.length>0?C[C.length-1]:null,d.pop(),u=d.length>0?d[d.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return p},this.getActiveMipmapLevel=function(){return m},this.getRenderTarget=function(){return f},this.setRenderTargetTextures=function(e,t,n){J.get(e.texture).__webglTexture=t,J.get(e.depthTexture).__webglTexture=n;var i=J.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===L.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){var n=J.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;f=e,p=t,m=n;var i=!0;if(e){var r=J.get(e);void 0!==r.__useDefaultFramebuffer?(T.bindFramebuffer(36160,null),i=!1):void 0===r.__webglFramebuffer?U.setupRenderTarget(e):r.__hasExternalTextures&&U.rebindTextures(e,J.get(e.texture).__webglTexture,J.get(e.depthTexture).__webglTexture)}var a=null,o=!1,l=!1;if(e){var g=e.texture;(g.isData3DTexture||g.isDataArrayTexture)&&(l=!0);var s=J.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(a=s[t],o=!0):a=_.isWebGL2&&e.samples>0&&!1===U.useMultisampledRTT(e)?J.get(e).__webglMultisampledFramebuffer:s,y.copy(e.viewport),G.copy(e.scissor),B=e.scissorTest}else y.copy(V).multiplyScalar(x).floor(),G.copy(R).multiplyScalar(x).floor(),B=q;var c=T.bindFramebuffer(36160,a);if(c&&_.drawBuffers&&i&&T.drawBuffers(e,a),T.viewport(y),T.scissor(G),T.setScissorTest(B),o){var u=J.get(e.texture);Ie.framebufferTexture2D(36160,36064,34069+t,u.__webglTexture,n)}else if(l){var I=J.get(e.texture),d=t||0;Ie.framebufferTextureLayer(36160,36064,I.__webglTexture,n||0,d)}v=-1},this.readRenderTargetPixels=function(e,t,n,i,r,a,o){if(e&&e.isWebGLRenderTarget){var l=J.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(l=l[o]),l){T.bindFramebuffer(36160,l);try{var g=e.texture,s=g.format,c=g.type;if(s!==Et&&se.convert(s)!==Ie.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var u=c===zt&&(L.has("EXT_color_buffer_half_float")||_.isWebGL2&&L.has("EXT_color_buffer_float"));if(c!==qt&&se.convert(c)!==Ie.getParameter(35738)&&(c!==Ht||!(_.isWebGL2||L.has("OES_texture_float")||L.has("WEBGL_color_buffer_float")))&&!u)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&Ie.readPixels(t,n,i,r,se.convert(s),se.convert(c),a)}finally{var I=null!==f?J.get(f).__webglFramebuffer:null;T.bindFramebuffer(36160,I)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Math.pow(2,-n),r=Math.floor(t.image.width*i),a=Math.floor(t.image.height*i);U.setTexture2D(t,0),Ie.copyTexSubImage2D(3553,n,0,0,e.x,e.y,r,a),T.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=t.image.width,a=t.image.height,o=se.convert(n.format),l=se.convert(n.type);U.setTexture2D(n,0),Ie.pixelStorei(37440,n.flipY),Ie.pixelStorei(37441,n.premultiplyAlpha),Ie.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?Ie.texSubImage2D(3553,i,e.x,e.y,r,a,o,l,t.image.data):t.isCompressedTexture?Ie.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):Ie.texSubImage2D(3553,i,e.x,e.y,o,l,t.image),0===i&&n.generateMipmaps&&Ie.generateMipmap(3553),T.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(h.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,o=e.max.x-e.min.x+1,l=e.max.y-e.min.y+1,g=e.max.z-e.min.z+1,s=se.convert(i.format),c=se.convert(i.type);if(i.isData3DTexture)U.setTexture3D(i,0),a=32879;else{if(!i.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");U.setTexture2DArray(i,0),a=35866}Ie.pixelStorei(37440,i.flipY),Ie.pixelStorei(37441,i.premultiplyAlpha),Ie.pixelStorei(3317,i.unpackAlignment);var u=Ie.getParameter(3314),I=Ie.getParameter(32878),d=Ie.getParameter(3316),C=Ie.getParameter(3315),A=Ie.getParameter(32877),p=n.isCompressedTexture?n.mipmaps[0]:n.image;Ie.pixelStorei(3314,p.width),Ie.pixelStorei(32878,p.height),Ie.pixelStorei(3316,e.min.x),Ie.pixelStorei(3315,e.min.y),Ie.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?Ie.texSubImage3D(a,r,t.x,t.y,t.z,o,l,g,s,c,p.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Ie.compressedTexSubImage3D(a,r,t.x,t.y,t.z,o,l,g,s,p.data)):Ie.texSubImage3D(a,r,t.x,t.y,t.z,o,l,g,s,c,p),Ie.pixelStorei(3314,u),Ie.pixelStorei(32878,I),Ie.pixelStorei(3316,d),Ie.pixelStorei(3315,C),Ie.pixelStorei(32877,A),0===r&&i.generateMipmaps&&Ie.generateMipmap(a),T.unbindTexture()}},this.initTexture=function(e){e.isCubeTexture?U.setTextureCube(e,0):e.isData3DTexture?U.setTexture3D(e,0):e.isDataArrayTexture?U.setTexture2DArray(e,0):U.setTexture2D(e,0),T.unbindTexture()},this.resetState=function(){p=0,m=0,f=null,T.reset(),ce.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var ps=function(e){ne(n,e);var t=le(n);function n(){return $(this,n),t.apply(this,arguments)}return te(n)}(As);ps.prototype.isWebGL1Renderer=!0;var ms,fs=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;$(this,e),this.isFogExp2=!0,this.name="",this.color=new ir(t),this.density=n}return te(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}(),vs=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;$(this,e),this.isFog=!0,this.name="",this.color=new ir(t),this.near=n,this.far=i}return te(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}(),bs=function(e){ne(n,e);var t=le(n);function n(){var e;return $(this,n),(e=t.call(this)).isScene=!0,e.type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:ae(e)})),e}return te(n,[{key:"copy",value:function(e,t){return Ie(ie(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=Ie(ie(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}},{key:"autoUpdate",get:function(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate},set:function(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}]),n}(fa),ys=function(){function e(t,n){$(this,e),this.isInterleavedBuffer=!0,this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=di,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Vi()}return te(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Vi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Vi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}(),Gs=new pr,Bs=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];$(this,e),this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=n,this.offset=i,this.normalized=!0===r}return te(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)Gs.fromBufferAttribute(this,t),Gs.applyMatrix4(e),this.setXYZ(t,Gs.x,Gs.y,Gs.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)Gs.fromBufferAttribute(this,t),Gs.applyNormalMatrix(e),this.setXYZ(t,Gs.x,Gs.y,Gs.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)Gs.fromBufferAttribute(this,t),Gs.transformDirection(e),this.setXYZ(t,Gs.x,Gs.y,Gs.z);return this}},{key:"setX",value:function(e,t){return this.normalized&&(t=Hi(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.normalized&&(t=Hi(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.normalized&&(t=Hi(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.normalized&&(t=Hi(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){var t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ki(t,this.array)),t}},{key:"getY",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ki(t,this.array)),t}},{key:"getZ",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ki(t,this.array)),t}},{key:"getW",value:function(e){var t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ki(t,this.array)),t}},{key:"setXY",value:function(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Hi(t,this.array),n=Hi(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Hi(t,this.array),n=Hi(n,this.array),i=Hi(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}},{key:"setXYZW",value:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Hi(t,this.array),n=Hi(n,this.array),i=Hi(i,this.array),r=Hi(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");for(var n=[],i=0;i<this.count;i++)for(var r=i*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[r+a]);return new Na(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,r=0;r<this.itemSize;r++)t.push(this.data.array[i+r]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}(),Zs=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this)).isSpriteMaterial=!0,i.type="SpriteMaterial",i.color=new ir(16777215),i.map=null,i.alphaMap=null,i.rotation=0,i.sizeAttenuation=!0,i.transparent=!0,i.fog=!0,i.setValues(e),i}return te(n,[{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(qa),ws=new pr,xs=new pr,Ss=new pr,Ws=new Mi,Vs=new Mi,Rs=new Dr,qs=new pr,ks=new pr,Xs=new pr,Ys=new Mi,Ns=new Mi,Ks=new Mi,Hs=function(e){ne(n,e);var t=le(n);function n(e){var i;if($(this,n),(i=t.call(this)).isSprite=!0,i.type="Sprite",void 0===ms){ms=new eo;var r=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),a=new ys(r,5);ms.setIndex([0,1,2,0,2,3]),ms.setAttribute("position",new Bs(a,3,0,!1)),ms.setAttribute("uv",new Bs(a,2,3,!1))}return i.geometry=ms,i.material=void 0!==e?e:new Zs,i.center=new Mi(.5,.5),i}return te(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),xs.setFromMatrixScale(this.matrixWorld),Rs.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ss.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&xs.multiplyScalar(-Ss.z);var n,i,r=this.material.rotation;0!==r&&(i=Math.cos(r),n=Math.sin(r));var a=this.center;zs(qs.set(-.5,-.5,0),Ss,a,xs,n,i),zs(ks.set(.5,-.5,0),Ss,a,xs,n,i),zs(Xs.set(.5,.5,0),Ss,a,xs,n,i),Ys.set(0,0),Ns.set(1,0),Ks.set(1,1);var o=e.ray.intersectTriangle(qs,ks,Xs,!1,ws);if(null!==o||(zs(ks.set(-.5,.5,0),Ss,a,xs,n,i),Ns.set(0,1),null!==(o=e.ray.intersectTriangle(qs,Xs,ks,!1,ws)))){var l=e.ray.origin.distanceTo(ws);l<e.near||l>e.far||t.push({distance:l,point:ws.clone(),uv:Va.getUV(ws,qs,ks,Xs,Ys,Ns,Ks,new Mi),face:null,object:this})}}},{key:"copy",value:function(e,t){return Ie(ie(n.prototype),"copy",this).call(this,e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n}(fa);function zs(e,t,n,i,r,a){Ws.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(Vs.x=a*Ws.x-r*Ws.y,Vs.y=r*Ws.x+a*Ws.y):Vs.copy(Ws),e.copy(t),e.x+=Vs.x,e.y+=Vs.y,e.applyMatrix4(Rs)}var Ms=new pr,Fs=new pr,Ls=function(e){ne(n,e);var t=le(n);function n(){var e;return $(this,n),(e=t.call(this))._currentLevel=0,e.type="LOD",Object.defineProperties(ae(e),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),e.autoUpdate=!0,e}return te(n,[{key:"copy",value:function(e){Ie(ie(n.prototype),"copy",this).call(this,e,!1);for(var t=e.levels,i=0,r=t.length;i<r;i++){var a=t[i];this.addLevel(a.object.clone(),a.distance)}return this.autoUpdate=e.autoUpdate,this}},{key:"addLevel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t=Math.abs(t);var n,i=this.levels;for(n=0;n<i.length&&!(t<i[n].distance);n++);return i.splice(n,0,{distance:t,object:e}),this.add(e),this}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(e){var t=this.levels;if(t.length>0){var n,i;for(n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object}return null}},{key:"raycast",value:function(e,t){if(this.levels.length>0){Ms.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(Ms);this.getObjectForDistance(n).raycast(e,t)}}},{key:"update",value:function(e){var t=this.levels;if(t.length>1){Ms.setFromMatrixPosition(e.matrixWorld),Fs.setFromMatrixPosition(this.matrixWorld);var n,i,r=Ms.distanceTo(Fs)/e.zoom;for(t[0].object.visible=!0,n=1,i=t.length;n<i&&r>=t[n].distance;n++)t[n-1].object.visible=!1,t[n].object.visible=!0;for(this._currentLevel=n-1;n<i;n++)t[n].object.visible=!1}}},{key:"toJSON",value:function(e){var t=Ie(ie(n.prototype),"toJSON",this).call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var i=this.levels,r=0,a=i.length;r<a;r++){var o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}]),n}(fa),_s=new pr,Ts=new sr,Es=new sr,Js=new pr,Us=new Dr,Ds=function(e){ne(n,e);var t=le(n);function n(e,i){var r;return $(this,n),(r=t.call(this,e,i)).isSkinnedMesh=!0,r.type="SkinnedMesh",r.bindMode="attached",r.bindMatrix=new Dr,r.bindMatrixInverse=new Dr,r}return te(n,[{key:"copy",value:function(e,t){return Ie(ie(n.prototype),"copy",this).call(this,e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new sr,t=this.geometry.attributes.skinWeight,n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);var r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){Ie(ie(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,i=this.geometry;Ts.fromBufferAttribute(i.attributes.skinIndex,e),Es.fromBufferAttribute(i.attributes.skinWeight,e),_s.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var r=0;r<4;r++){var a=Es.getComponent(r);if(0!==a){var o=Ts.getComponent(r);Us.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(Js.copy(_s).applyMatrix4(Us),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(fo),Ps=function(e){ne(n,e);var t=le(n);function n(){var e;return $(this,n),(e=t.call(this)).isBone=!0,e.type="Bone",e}return te(n)}(fa),Os=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,g=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:yt,I=arguments.length>9&&void 0!==arguments[9]?arguments[9]:yt,d=arguments.length>10?arguments[10]:void 0,C=arguments.length>11?arguments[11]:void 0;return $(this,n),(e=t.call(this,null,g,s,c,u,I,o,l,d,C)).isDataTexture=!0,e.image={data:i,width:r,height:a},e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e}return te(n)}(gr),Qs=new Dr,js=new Dr,$s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];$(this,e),this.uuid=Vi(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return te(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Dr)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new Dr;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var i=0,r=this.bones.length;i<r;i++){var a=this.bones[i];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=e.length;r<a;r++){var o=e[r]?e[r].matrixWorld:js;Qs.multiplyMatrices(o,t[r]),Qs.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=Yi(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new Os(t,e,e,Et,Ht);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,i=e.bones.length;n<i;n++){var r=e.bones[n],a=t[r];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),a=new Ps),this.bones.push(a),this.boneInverses.push((new Dr).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,i=0,r=t.length;i<r;i++){var a=t[i];e.bones.push(a.uuid);var o=n[i];e.boneInverses.push(o.toArray())}return e}}]),e}(),ec=function(e){ne(n,e);var t=le(n);function n(e,i,r){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return $(this,n),(a=t.call(this,e,i,r)).isInstancedBufferAttribute=!0,a.meshPerAttribute=o,a}return te(n,[{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=Ie(ie(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(Na),tc=new Dr,nc=new Dr,ic=[],rc=new fo,ac=function(e){ne(n,e);var t=le(n);function n(e,i,r){var a;return $(this,n),(a=t.call(this,e,i)).isInstancedMesh=!0,a.instanceMatrix=new ec(new Float32Array(16*r),16),a.instanceColor=null,a.count=r,a.frustumCulled=!1,a}return te(n,[{key:"copy",value:function(e,t){return Ie(ie(n.prototype),"copy",this).call(this,e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,i=this.count;if(rc.geometry=this.geometry,rc.material=this.material,void 0!==rc.material)for(var r=0;r<i;r++){this.getMatrixAt(r,tc),nc.multiplyMatrices(n,tc),rc.matrixWorld=nc,rc.raycast(e,ic);for(var a=0,o=ic.length;a<o;a++){var l=ic[a];l.instanceId=r,l.object=this,t.push(l)}ic.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new ec(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(fo),oc=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this)).isLineBasicMaterial=!0,i.type="LineBasicMaterial",i.color=new ir(16777215),i.linewidth=1,i.linecap="round",i.linejoin="round",i.fog=!0,i.setValues(e),i}return te(n,[{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}]),n}(qa),lc=new pr,gc=new pr,sc=new Dr,cc=new Ur,uc=new zr,Ic=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new eo,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new oc;return $(this,n),(e=t.call(this)).isLine=!0,e.type="Line",e.geometry=i,e.material=r,e.updateMorphTargets(),e}return te(n,[{key:"copy",value:function(e,t){return Ie(ie(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[0],i=1,r=t.count;i<r;i++)lc.fromBufferAttribute(t,i-1),gc.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=lc.distanceTo(gc);e.setAttribute("lineDistance",new Ea(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),uc.copy(n.boundingSphere),uc.applyMatrix4(i),uc.radius+=r,!1!==e.ray.intersectsSphere(uc)){sc.copy(i).invert(),cc.copy(e.ray).applyMatrix4(sc);var o=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,g=new pr,s=new pr,c=new pr,u=new pr,I=this.isLineSegments?2:1,d=n.index,C=n.attributes.position;if(null!==d)for(var h=Math.max(0,a.start),A=Math.min(d.count,a.start+a.count)-1;h<A;h+=I){var p=d.getX(h),m=d.getX(h+1);if(g.fromBufferAttribute(C,p),s.fromBufferAttribute(C,m),!(cc.distanceSqToSegment(g,s,u,c)>l)){u.applyMatrix4(this.matrixWorld);var f=e.ray.origin.distanceTo(u);f<e.near||f>e.far||t.push({distance:f,point:c.clone().applyMatrix4(this.matrixWorld),index:h,face:null,faceIndex:null,object:this})}}else for(var v=Math.max(0,a.start),b=Math.min(C.count,a.start+a.count)-1;v<b;v+=I){if(g.fromBufferAttribute(C,v),s.fromBufferAttribute(C,v+1),!(cc.distanceSqToSegment(g,s,u,c)>l)){u.applyMatrix4(this.matrixWorld);var y=e.ray.origin.distanceTo(u);y<e.near||y>e.far||t.push({distance:y,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,r=n.length;i<r;i++){var a=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}}]),n}(fa),dc=new pr,Cc=new pr,hc=function(e){ne(n,e);var t=le(n);function n(e,i){var r;return $(this,n),(r=t.call(this,e,i)).isLineSegments=!0,r.type="LineSegments",r}return te(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(null===e.index){for(var t=e.attributes.position,n=[],i=0,r=t.count;i<r;i+=2)dc.fromBufferAttribute(t,i),Cc.fromBufferAttribute(t,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+dc.distanceTo(Cc);e.setAttribute("lineDistance",new Ea(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}]),n}(Ic),Ac=function(e){ne(n,e);var t=le(n);function n(e,i){var r;return $(this,n),(r=t.call(this,e,i)).isLineLoop=!0,r.type="LineLoop",r}return te(n)}(Ic),pc=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this)).isPointsMaterial=!0,i.type="PointsMaterial",i.color=new ir(16777215),i.map=null,i.alphaMap=null,i.size=1,i.sizeAttenuation=!0,i.fog=!0,i.setValues(e),i}return te(n,[{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}]),n}(qa),mc=new Dr,fc=new Ur,vc=new zr,bc=new pr,yc=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new eo,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pc;return $(this,n),(e=t.call(this)).isPoints=!0,e.type="Points",e.geometry=i,e.material=r,e.updateMorphTargets(),e}return te(n,[{key:"copy",value:function(e,t){return Ie(ie(n.prototype),"copy",this).call(this,e,t),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),vc.copy(n.boundingSphere),vc.applyMatrix4(i),vc.radius+=r,!1!==e.ray.intersectsSphere(vc)){mc.copy(i).invert(),fc.copy(e.ray).applyMatrix4(mc);var o=r/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,g=n.index,s=n.attributes.position;if(null!==g)for(var c=Math.max(0,a.start),u=Math.min(g.count,a.start+a.count);c<u;c++){var I=g.getX(c);bc.fromBufferAttribute(s,I),Gc(bc,I,l,i,e,t,this)}else for(var d=Math.max(0,a.start),C=Math.min(s.count,a.start+a.count);d<C;d++)bc.fromBufferAttribute(s,d),Gc(bc,d,l,i,e,t,this)}}},{key:"updateMorphTargets",value:function(){var e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){var n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,r=n.length;i<r;i++){var a=n[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=i}}}}}]),n}(fa);function Gc(e,t,n,i,r,a,o){var l=fc.distanceSqToPoint(e);if(l<n){var g=new pr;fc.closestPointToPoint(e,g),g.applyMatrix4(i);var s=r.ray.origin.distanceTo(g);if(s<r.near||s>r.far)return;a.push({distance:s,distanceToRay:Math.sqrt(l),point:g,index:t,face:null,object:o})}}var Bc=function(e){ne(n,e);var t=le(n);function n(e,i,r,a,o,l,g,s,c){var u;$(this,n),(u=t.call(this,e,i,r,a,o,l,g,s,c)).isVideoTexture=!0,u.minFilter=void 0!==l?l:xt,u.magFilter=void 0!==o?o:xt,u.generateMipmaps=!1;var I=ae(u);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){I.needsUpdate=!0,e.requestVideoFrameCallback(t)})),u}return te(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(gr),Zc=function(e){ne(n,e);var t=le(n);function n(e,i,r){var a;return $(this,n),(a=t.call(this,{width:e,height:i})).isFramebufferTexture=!0,a.format=r,a.magFilter=yt,a.minFilter=yt,a.generateMipmaps=!1,a.needsUpdate=!0,a}return te(n)}(gr),wc=function(e){ne(n,e);var t=le(n);function n(e,i,r,a,o,l,g,s,c,u,I,d){var C;return $(this,n),(C=t.call(this,null,l,g,s,c,u,a,o,I,d)).isCompressedTexture=!0,C.image={width:i,height:r},C.mipmaps=e,C.flipY=!1,C.generateMipmaps=!1,C}return te(n)}(gr),xc=function(e){ne(n,e);var t=le(n);function n(e,i,r,a,o,l,g,s,c){var u;return $(this,n),(u=t.call(this,e,i,r,a,o,l,g,s,c)).isCanvasTexture=!0,u.needsUpdate=!0,u}return te(n)}(gr),Sc=function(){function e(){$(this,e),this.type="Curve",this.arcLengthDivisions=200}return te(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],i=this.getPoint(0),r=0;n.push(0);for(var a=1;a<=e;a++)r+=(t=this.getPoint(a/e)).distanceTo(i),n.push(r),i=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,i=this.getLengths(),r=0,a=i.length;n=t||e*i[a-1];for(var o,l=0,g=a-1;l<=g;)if((o=i[r=Math.floor(l+(g-l)/2)]-n)<0)l=r+1;else{if(!(o>0)){g=r;break}g=r-1}if(i[r=g]===n)return r/(a-1);var s=i[r];return(r+(n-s)/(i[r+1]-s))/(a-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);var a=this.getPoint(i),o=this.getPoint(r),l=t||(a.isVector2?new Mi:new pr);return l.copy(o).sub(a).normalize(),l}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new pr,i=[],r=[],a=[],o=new pr,l=new Dr,g=0;g<=e;g++){var s=g/e;i[g]=this.getTangentAt(s,new pr)}r[0]=new pr,a[0]=new pr;var c=Number.MAX_VALUE,u=Math.abs(i[0].x),I=Math.abs(i[0].y),d=Math.abs(i[0].z);u<=c&&(c=u,n.set(1,0,0)),I<=c&&(c=I,n.set(0,1,0)),d<=c&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),a[0].crossVectors(i[0],r[0]);for(var C=1;C<=e;C++){if(r[C]=r[C-1].clone(),a[C]=a[C-1].clone(),o.crossVectors(i[C-1],i[C]),o.length()>Number.EPSILON){o.normalize();var h=Math.acos(Ri(i[C-1].dot(i[C]),-1,1));r[C].applyMatrix4(l.makeRotationAxis(o,h))}a[C].crossVectors(i[C],r[C])}if(!0===t){var A=Math.acos(Ri(r[0].dot(r[e]),-1,1));A/=e,i[0].dot(o.crossVectors(r[0],r[e]))>0&&(A=-A);for(var p=1;p<=e;p++)r[p].applyMatrix4(l.makeRotationAxis(i[p],A*p)),a[p].crossVectors(i[p],r[p])}return{tangents:i,normals:r,binormals:a}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),Wc=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return $(this,n),(e=t.call(this)).isEllipseCurve=!0,e.type="EllipseCurve",e.aX=i,e.aY=r,e.xRadius=a,e.yRadius=o,e.aStartAngle=l,e.aEndAngle=g,e.aClockwise=s,e.aRotation=c,e}return te(n,[{key:"getPoint",value:function(e,t){for(var n=t||new Mi,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);var o=this.aStartAngle+e*r,l=this.aX+this.xRadius*Math.cos(o),g=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var s=Math.cos(this.aRotation),c=Math.sin(this.aRotation),u=l-this.aX,I=g-this.aY;l=u*s-I*c+this.aX,g=u*c+I*s+this.aY}return n.set(l,g)}},{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=Ie(ie(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return Ie(ie(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(Sc),Vc=function(e){ne(n,e);var t=le(n);function n(e,i,r,a,o,l){var g;return $(this,n),(g=t.call(this,e,i,r,r,a,o,l)).isArcCurve=!0,g.type="ArcCurve",g}return te(n)}(Wc);function Rc(){var e=0,t=0,n=0,i=0;function r(r,a,o,l){e=r,t=o,n=-3*r+3*a-2*o-l,i=2*r-2*a+o+l}return{initCatmullRom:function(e,t,n,i,a){r(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,o,l){var g=(t-e)/a-(n-e)/(a+o)+(n-t)/o,s=(n-t)/o-(i-t)/(o+l)+(i-n)/l;r(t,n,g*=o,s*=o)},calc:function(r){var a=r*r;return e+t*r+n*a+i*(a*r)}}}var qc=new pr,kc=new Rc,Xc=new Rc,Yc=new Rc,Nc=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return $(this,n),(e=t.call(this)).isCatmullRomCurve3=!0,e.type="CatmullRomCurve3",e.points=i,e.closed=r,e.curveType=a,e.tension=o,e}return te(n,[{key:"getPoint",value:function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pr,r=i,a=this.points,o=a.length,l=(o-(this.closed?0:1))*e,g=Math.floor(l),s=l-g;this.closed?g+=g>0?0:(Math.floor(Math.abs(g)/o)+1)*o:0===s&&g===o-1&&(g=o-2,s=1),this.closed||g>0?t=a[(g-1)%o]:(qc.subVectors(a[0],a[1]).add(a[0]),t=qc);var c=a[g%o],u=a[(g+1)%o];if(this.closed||g+2<o?n=a[(g+2)%o]:(qc.subVectors(a[o-1],a[o-2]).add(a[o-1]),n=qc),"centripetal"===this.curveType||"chordal"===this.curveType){var I="chordal"===this.curveType?.5:.25,d=Math.pow(t.distanceToSquared(c),I),C=Math.pow(c.distanceToSquared(u),I),h=Math.pow(u.distanceToSquared(n),I);C<1e-4&&(C=1),d<1e-4&&(d=C),h<1e-4&&(h=C),kc.initNonuniformCatmullRom(t.x,c.x,u.x,n.x,d,C,h),Xc.initNonuniformCatmullRom(t.y,c.y,u.y,n.y,d,C,h),Yc.initNonuniformCatmullRom(t.z,c.z,u.z,n.z,d,C,h)}else"catmullrom"===this.curveType&&(kc.initCatmullRom(t.x,c.x,u.x,n.x,this.tension),Xc.initCatmullRom(t.y,c.y,u.y,n.y,this.tension),Yc.initCatmullRom(t.z,c.z,u.z,n.z,this.tension));return r.set(kc.calc(s),Xc.calc(s),Yc.calc(s)),r}},{key:"copy",value:function(e){Ie(ie(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=Ie(ie(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){Ie(ie(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push((new pr).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(Sc);function Kc(e,t,n,i,r){var a=.5*(i-t),o=.5*(r-n),l=e*e;return(2*n-2*i+a+o)*(e*l)+(-3*n+3*i-2*a-o)*l+a*e+n}function Hc(e,t,n,i){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function zc(e,t,n,i,r){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}var Mc=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mi,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mi,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Mi,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Mi;return $(this,n),(e=t.call(this)).isCubicBezierCurve=!0,e.type="CubicBezierCurve",e.v0=i,e.v1=r,e.v2=a,e.v3=o,e}return te(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mi,n=t,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(zc(e,i.x,r.x,a.x,o.x),zc(e,i.y,r.y,a.y,o.y)),n}},{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=Ie(ie(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return Ie(ie(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Sc),Fc=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pr,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pr,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new pr,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new pr;return $(this,n),(e=t.call(this)).isCubicBezierCurve3=!0,e.type="CubicBezierCurve3",e.v0=i,e.v1=r,e.v2=a,e.v3=o,e}return te(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pr,n=t,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(zc(e,i.x,r.x,a.x,o.x),zc(e,i.y,r.y,a.y,o.y),zc(e,i.z,r.z,a.z,o.z)),n}},{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=Ie(ie(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return Ie(ie(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(Sc),Lc=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mi,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mi;return $(this,n),(e=t.call(this)).isLineCurve=!0,e.type="LineCurve",e.v1=i,e.v2=r,e}return te(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mi,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new Mi;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Ie(ie(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Ie(ie(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Sc),_c=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pr,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pr;return $(this,n),(e=t.call(this)).isLineCurve3=!0,e.type="LineCurve3",e.v1=i,e.v2=r,e}return te(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pr,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Ie(ie(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Ie(ie(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Sc),Tc=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mi,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mi,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Mi;return $(this,n),(e=t.call(this)).isQuadraticBezierCurve=!0,e.type="QuadraticBezierCurve",e.v0=i,e.v1=r,e.v2=a,e}return te(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mi,n=t,i=this.v0,r=this.v1,a=this.v2;return n.set(Hc(e,i.x,r.x,a.x),Hc(e,i.y,r.y,a.y)),n}},{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Ie(ie(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Ie(ie(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Sc),Ec=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pr,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pr,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new pr;return $(this,n),(e=t.call(this)).isQuadraticBezierCurve3=!0,e.type="QuadraticBezierCurve3",e.v0=i,e.v1=r,e.v2=a,e}return te(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pr,n=t,i=this.v0,r=this.v1,a=this.v2;return n.set(Hc(e,i.x,r.x,a.x),Hc(e,i.y,r.y,a.y),Hc(e,i.z,r.z,a.z)),n}},{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Ie(ie(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Ie(ie(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(Sc),Jc=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return $(this,n),(e=t.call(this)).isSplineCurve=!0,e.type="SplineCurve",e.points=i,e}return te(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mi,n=t,i=this.points,r=(i.length-1)*e,a=Math.floor(r),o=r-a,l=i[0===a?a:a-1],g=i[a],s=i[a>i.length-2?i.length-1:a+1],c=i[a>i.length-3?i.length-1:a+2];return n.set(Kc(o,l.x,g.x,s.x,c.x),Kc(o,l.y,g.y,s.y,c.y)),n}},{key:"copy",value:function(e){Ie(ie(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push(r.clone())}return this}},{key:"toJSON",value:function(){var e=Ie(ie(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var r=this.points[t];e.points.push(r.toArray())}return e}},{key:"fromJSON",value:function(e){Ie(ie(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push((new Mi).fromArray(r))}return this}}]),n}(Sc),Uc=Object.freeze({__proto__:null,ArcCurve:Vc,CatmullRomCurve3:Nc,CubicBezierCurve:Mc,CubicBezierCurve3:Fc,EllipseCurve:Wc,LineCurve:Lc,LineCurve3:_c,QuadraticBezierCurve:Tc,QuadraticBezierCurve3:Ec,SplineCurve:Jc}),Dc=function(e){ne(n,e);var t=le(n);function n(){var e;return $(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return te(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Lc(t,e))}},{key:"getPoint",value:function(e,t){for(var n=e*this.getLength(),i=this.getCurveLengths(),r=0;r<i.length;){if(i[r]>=n){var a=i[r]-n,o=this.curves[r],l=o.getLength(),g=0===l?0:1-a/l;return o.getPointAt(g,t)}r++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a.isEllipseCurve?2*t:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?t*a.points.length:t,l=a.getPoints(o),g=0;g<l.length;g++){var s=l[g];e&&e.equals(s)||(n.push(s),e=s)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){Ie(ie(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=Ie(ie(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,i=this.curves.length;t<i;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e}},{key:"fromJSON",value:function(e){Ie(ie(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var r=e.curves[t];this.curves.push((new Uc[r.type]).fromJSON(r))}return this}}]),n}(Sc),Pc=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this)).type="Path",i.currentPoint=new Mi,e&&i.setFromPoints(e),i}return te(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new Lc(this.currentPoint.clone(),new Mi(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,i){var r=new Tc(this.currentPoint.clone(),new Mi(e,t),new Mi(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}},{key:"bezierCurveTo",value:function(e,t,n,i,r,a){var o=new Mc(this.currentPoint.clone(),new Mi(e,t),new Mi(n,i),new Mi(r,a));return this.curves.push(o),this.currentPoint.set(r,a),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new Jc(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,i,r,a){var o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,n,i,r,a),this}},{key:"absarc",value:function(e,t,n,i,r,a){return this.absellipse(e,t,n,n,i,r,a),this}},{key:"ellipse",value:function(e,t,n,i,r,a,o,l){var g=this.currentPoint.x,s=this.currentPoint.y;return this.absellipse(e+g,t+s,n,i,r,a,o,l),this}},{key:"absellipse",value:function(e,t,n,i,r,a,o,l){var g=new Wc(e,t,n,i,r,a,o,l);if(this.curves.length>0){var s=g.getPoint(0);s.equals(this.currentPoint)||this.lineTo(s.x,s.y)}this.curves.push(g);var c=g.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=Ie(ie(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return Ie(ie(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(Dc),Oc=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Mi(0,-.5),new Mi(.5,0),new Mi(0,.5)],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;$(this,n),(e=t.call(this)).type="LatheGeometry",e.parameters={points:i,segments:r,phiStart:a,phiLength:o},r=Math.floor(r),o=Ri(o,0,2*Math.PI);for(var l=[],g=[],s=[],c=[],u=[],I=1/r,d=new pr,C=new Mi,h=new pr,A=new pr,p=new pr,m=0,f=0,v=0;v<=i.length-1;v++)switch(v){case 0:m=i[v+1].x-i[v].x,f=i[v+1].y-i[v].y,h.x=1*f,h.y=-m,h.z=0*f,p.copy(h),h.normalize(),c.push(h.x,h.y,h.z);break;case i.length-1:c.push(p.x,p.y,p.z);break;default:m=i[v+1].x-i[v].x,f=i[v+1].y-i[v].y,h.x=1*f,h.y=-m,h.z=0*f,A.copy(h),h.x+=p.x,h.y+=p.y,h.z+=p.z,h.normalize(),c.push(h.x,h.y,h.z),p.copy(A)}for(var b=0;b<=r;b++)for(var y=a+b*I*o,G=Math.sin(y),B=Math.cos(y),Z=0;Z<=i.length-1;Z++){d.x=i[Z].x*G,d.y=i[Z].y,d.z=i[Z].x*B,g.push(d.x,d.y,d.z),C.x=b/r,C.y=Z/(i.length-1),s.push(C.x,C.y);var w=c[3*Z+0]*G,x=c[3*Z+1],S=c[3*Z+0]*B;u.push(w,x,S)}for(var W=0;W<r;W++)for(var V=0;V<i.length-1;V++){var R=V+W*i.length,q=R,k=R+i.length,X=R+i.length+1,Y=R+1;l.push(q,k,Y),l.push(X,Y,k)}return e.setIndex(l),e.setAttribute("position",new Ea(g,3)),e.setAttribute("uv",new Ea(s,2)),e.setAttribute("normal",new Ea(u,3)),e}return te(n,null,[{key:"fromJSON",value:function(e){return new n(e.points,e.segments,e.phiStart,e.phiLength)}}]),n}(eo),Qc=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;$(this,n);var l=new Pc;return l.absarc(0,-r/2,i,1.5*Math.PI,0),l.absarc(0,r/2,i,0,.5*Math.PI),(e=t.call(this,l.getPoints(a),o)).type="CapsuleGeometry",e.parameters={radius:i,height:r,capSegments:a,radialSegments:o},e}return te(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.length,e.capSegments,e.radialSegments)}}]),n}(Oc),jc=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;$(this,n),(e=t.call(this)).type="CircleGeometry",e.parameters={radius:i,segments:r,thetaStart:a,thetaLength:o},r=Math.max(3,r);var l=[],g=[],s=[],c=[],u=new pr,I=new Mi;g.push(0,0,0),s.push(0,0,1),c.push(.5,.5);for(var d=0,C=3;d<=r;d++,C+=3){var h=a+d/r*o;u.x=i*Math.cos(h),u.y=i*Math.sin(h),g.push(u.x,u.y,u.z),s.push(0,0,1),I.x=(g[C]/i+1)/2,I.y=(g[C+1]/i+1)/2,c.push(I.x,I.y)}for(var A=1;A<=r;A++)l.push(A,A+1,0);return e.setIndex(l),e.setAttribute("position",new Ea(g,3)),e.setAttribute("normal",new Ea(s,3)),e.setAttribute("uv",new Ea(c,2)),e}return te(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.segments,e.thetaStart,e.thetaLength)}}]),n}(eo),$c=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,g=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;$(this,n),(e=t.call(this)).type="CylinderGeometry",e.parameters={radiusTop:i,radiusBottom:r,height:a,radialSegments:o,heightSegments:l,openEnded:g,thetaStart:s,thetaLength:c};var u=ae(e);o=Math.floor(o),l=Math.floor(l);var I=[],d=[],C=[],h=[],A=0,p=[],m=a/2,f=0;function v(){for(var e=new pr,t=new pr,n=0,g=(r-i)/a,v=0;v<=l;v++){for(var b=[],y=v/l,G=y*(r-i)+i,B=0;B<=o;B++){var Z=B/o,w=Z*c+s,x=Math.sin(w),S=Math.cos(w);t.x=G*x,t.y=-y*a+m,t.z=G*S,d.push(t.x,t.y,t.z),e.set(x,g,S).normalize(),C.push(e.x,e.y,e.z),h.push(Z,1-y),b.push(A++)}p.push(b)}for(var W=0;W<o;W++)for(var V=0;V<l;V++){var R=p[V][W],q=p[V+1][W],k=p[V+1][W+1],X=p[V][W+1];I.push(R,q,X),I.push(q,k,X),n+=6}u.addGroup(f,n,0),f+=n}function b(e){for(var t=A,n=new Mi,a=new pr,l=0,g=!0===e?i:r,p=!0===e?1:-1,v=1;v<=o;v++)d.push(0,m*p,0),C.push(0,p,0),h.push(.5,.5),A++;for(var b=A,y=0;y<=o;y++){var G=y/o*c+s,B=Math.cos(G),Z=Math.sin(G);a.x=g*Z,a.y=m*p,a.z=g*B,d.push(a.x,a.y,a.z),C.push(0,p,0),n.x=.5*B+.5,n.y=.5*Z*p+.5,h.push(n.x,n.y),A++}for(var w=0;w<o;w++){var x=t+w,S=b+w;!0===e?I.push(S,S+1,x):I.push(S+1,S,x),l+=3}u.addGroup(f,l,!0===e?1:2),f+=l}return v(),!1===g&&(i>0&&b(!0),r>0&&b(!1)),e.setIndex(I),e.setAttribute("position",new Ea(d,3)),e.setAttribute("normal",new Ea(C,3)),e.setAttribute("uv",new Ea(h,2)),e}return te(n,null,[{key:"fromJSON",value:function(e){return new n(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}(eo),eu=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return $(this,n),(e=t.call(this,0,i,r,a,o,l,g,s)).type="ConeGeometry",e.parameters={radius:i,height:r,radialSegments:a,heightSegments:o,openEnded:l,thetaStart:g,thetaLength:s},e}return te(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}]),n}($c),tu=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;$(this,n),(e=t.call(this)).type="PolyhedronGeometry",e.parameters={vertices:i,indices:r,radius:a,detail:o};var l=[],g=[];function s(e){for(var t=new pr,n=new pr,i=new pr,a=0;a<r.length;a+=3)h(r[a+0],t),h(r[a+1],n),h(r[a+2],i),c(t,n,i,e)}function c(e,t,n,i){for(var r=i+1,a=[],o=0;o<=r;o++){a[o]=[];for(var l=e.clone().lerp(n,o/r),g=t.clone().lerp(n,o/r),s=r-o,c=0;c<=s;c++)a[o][c]=0===c&&o===r?l:l.clone().lerp(g,c/s)}for(var u=0;u<r;u++)for(var I=0;I<2*(r-u)-1;I++){var d=Math.floor(I/2);I%2===0?(C(a[u][d+1]),C(a[u+1][d]),C(a[u][d])):(C(a[u][d+1]),C(a[u+1][d+1]),C(a[u+1][d]))}}function u(e){for(var t=new pr,n=0;n<l.length;n+=3)t.x=l[n+0],t.y=l[n+1],t.z=l[n+2],t.normalize().multiplyScalar(e),l[n+0]=t.x,l[n+1]=t.y,l[n+2]=t.z}function I(){for(var e=new pr,t=0;t<l.length;t+=3){e.x=l[t+0],e.y=l[t+1],e.z=l[t+2];var n=m(e)/2/Math.PI+.5,i=f(e)/Math.PI+.5;g.push(n,1-i)}A(),d()}function d(){for(var e=0;e<g.length;e+=6){var t=g[e+0],n=g[e+2],i=g[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);r>.9&&a<.1&&(t<.2&&(g[e+0]+=1),n<.2&&(g[e+2]+=1),i<.2&&(g[e+4]+=1))}}function C(e){l.push(e.x,e.y,e.z)}function h(e,t){var n=3*e;t.x=i[n+0],t.y=i[n+1],t.z=i[n+2]}function A(){for(var e=new pr,t=new pr,n=new pr,i=new pr,r=new Mi,a=new Mi,o=new Mi,s=0,c=0;s<l.length;s+=9,c+=6){e.set(l[s+0],l[s+1],l[s+2]),t.set(l[s+3],l[s+4],l[s+5]),n.set(l[s+6],l[s+7],l[s+8]),r.set(g[c+0],g[c+1]),a.set(g[c+2],g[c+3]),o.set(g[c+4],g[c+5]),i.copy(e).add(t).add(n).divideScalar(3);var u=m(i);p(r,c+0,e,u),p(a,c+2,t,u),p(o,c+4,n,u)}}function p(e,t,n,i){i<0&&1===e.x&&(g[t]=e.x-1),0===n.x&&0===n.z&&(g[t]=i/2/Math.PI+.5)}function m(e){return Math.atan2(e.z,-e.x)}function f(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}return s(o),u(a),I(),e.setAttribute("position",new Ea(l,3)),e.setAttribute("normal",new Ea(l.slice(),3)),e.setAttribute("uv",new Ea(g,2)),0===o?e.computeVertexNormals():e.normalizeNormals(),e}return te(n,null,[{key:"fromJSON",value:function(e){return new n(e.vertices,e.indices,e.radius,e.details)}}]),n}(eo),nu=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;$(this,n);var a=(1+Math.sqrt(5))/2,o=1/a,l=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-a,0,-o,a,0,o,-a,0,o,a,-o,-a,0,-o,a,0,o,-a,0,o,a,0,-a,0,-o,a,0,-o,-a,0,o,a,0,o],g=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];return(e=t.call(this,l,g,i,r)).type="DodecahedronGeometry",e.parameters={radius:i,detail:r},e}return te(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(tu),iu=new pr,ru=new pr,au=new pr,ou=new Va,lu=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if($(this,n),(e=t.call(this)).type="EdgesGeometry",e.parameters={geometry:i,thresholdAngle:r},null!==i){for(var a=4,o=Math.pow(10,a),l=Math.cos(Si*r),g=i.getIndex(),s=i.getAttribute("position"),c=g?g.count:s.count,u=[0,0,0],I=["a","b","c"],d=new Array(3),C={},h=[],A=0;A<c;A+=3){g?(u[0]=g.getX(A),u[1]=g.getX(A+1),u[2]=g.getX(A+2)):(u[0]=A,u[1]=A+1,u[2]=A+2);var p=ou.a,m=ou.b,f=ou.c;if(p.fromBufferAttribute(s,u[0]),m.fromBufferAttribute(s,u[1]),f.fromBufferAttribute(s,u[2]),ou.getNormal(au),d[0]="".concat(Math.round(p.x*o),",").concat(Math.round(p.y*o),",").concat(Math.round(p.z*o)),d[1]="".concat(Math.round(m.x*o),",").concat(Math.round(m.y*o),",").concat(Math.round(m.z*o)),d[2]="".concat(Math.round(f.x*o),",").concat(Math.round(f.y*o),",").concat(Math.round(f.z*o)),d[0]!==d[1]&&d[1]!==d[2]&&d[2]!==d[0])for(var v=0;v<3;v++){var b=(v+1)%3,y=d[v],G=d[b],B=ou[I[v]],Z=ou[I[b]],w="".concat(y,"_").concat(G),x="".concat(G,"_").concat(y);x in C&&C[x]?(au.dot(C[x].normal)<=l&&(h.push(B.x,B.y,B.z),h.push(Z.x,Z.y,Z.z)),C[x]=null):w in C||(C[w]={index0:u[v],index1:u[b],normal:au.clone()})}}for(var S in C)if(C[S]){var W=C[S],V=W.index0,R=W.index1;iu.fromBufferAttribute(s,V),ru.fromBufferAttribute(s,R),h.push(iu.x,iu.y,iu.z),h.push(ru.x,ru.y,ru.z)}e.setAttribute("position",new Ea(h,3))}return e}return te(n)}(eo),gu=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this,e)).uuid=Vi(),i.type="Shape",i.holes=[],i}return te(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){Ie(ie(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var r=e.holes[t];this.holes.push(r.clone())}return this}},{key:"toJSON",value:function(){var e=Ie(ie(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,i=this.holes.length;t<i;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e}},{key:"fromJSON",value:function(e){Ie(ie(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var r=e.holes[t];this.holes.push((new Pc).fromJSON(r))}return this}}]),n}(Pc),su=function(e,t){var n,i,r,a,o,l,g,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=t&&t.length,u=c?t[0]*s:e.length,I=cu(e,0,u,s,!0),d=[];if(!I||I.next===I.prev)return d;if(c&&(I=pu(e,t,I,s)),e.length>80*s){n=r=e[0],i=a=e[1];for(var C=s;C<u;C+=s)(o=e[C])<n&&(n=o),(l=e[C+1])<i&&(i=l),o>r&&(r=o),l>a&&(a=l);g=0!==(g=Math.max(r-n,a-i))?1/g:0}return Iu(I,d,s,n,i,g),d};function cu(e,t,n,i,r){var a,o;if(r===function(e,t,n,i){for(var r=0,a=t,o=n-i;a<n;a+=i)r+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return r}(e,t,n,i)>0)for(a=t;a<n;a+=i)o=qu(a,e[a],e[a+1],o);else for(a=n-i;a>=t;a-=i)o=qu(a,e[a],e[a+1],o);return o&&wu(o,o.next)&&(ku(o),o=o.next),o}function uu(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!wu(i,i.next)&&0!==Zu(i.prev,i,i.next))i=i.next;else{if(ku(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function Iu(e,t,n,i,r,a,o){if(e){!o&&a&&function(e,t,n,i){var r=e;do{null===r.z&&(r.z=bu(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,a,o,l,g,s=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,i=n,l=0,t=0;t<s&&(l++,i=i.nextZ);t++);for(g=s;l>0||g>0&&i;)0!==l&&(0===g||!i||n.z<=i.z)?(r=n,n=n.nextZ,l--):(r=i,i=i.nextZ,g--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,s*=2}while(o>1)}(r)}(e,i,r,a);for(var l,g,s=e;e.prev!==e.next;)if(l=e.prev,g=e.next,a?Cu(e,i,r,a):du(e))t.push(l.i/n),t.push(e.i/n),t.push(g.i/n),ku(e),e=g.next,s=g.next;else if((e=g)===s){o?1===o?Iu(e=hu(uu(e),t,n),t,n,i,r,a,2):2===o&&Au(e,t,n,i,r,a):Iu(uu(e),t,n,i,r,a,1);break}}}function du(e){var t=e.prev,n=e,i=e.next;if(Zu(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(Gu(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Zu(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Cu(e,t,n,i){var r=e.prev,a=e,o=e.next;if(Zu(r,a,o)>=0)return!1;for(var l=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,g=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,s=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,c=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,u=bu(l,g,t,n,i),I=bu(s,c,t,n,i),d=e.prevZ,C=e.nextZ;d&&d.z>=u&&C&&C.z<=I;){if(d!==e.prev&&d!==e.next&&Gu(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Zu(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,C!==e.prev&&C!==e.next&&Gu(r.x,r.y,a.x,a.y,o.x,o.y,C.x,C.y)&&Zu(C.prev,C,C.next)>=0)return!1;C=C.nextZ}for(;d&&d.z>=u;){if(d!==e.prev&&d!==e.next&&Gu(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Zu(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;C&&C.z<=I;){if(C!==e.prev&&C!==e.next&&Gu(r.x,r.y,a.x,a.y,o.x,o.y,C.x,C.y)&&Zu(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function hu(e,t,n){var i=e;do{var r=i.prev,a=i.next.next;!wu(r,a)&&xu(r,i,i.next,a)&&Vu(r,a)&&Vu(a,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(a.i/n),ku(i),ku(i.next),i=e=a),i=i.next}while(i!==e);return uu(i)}function Au(e,t,n,i,r,a){var o=e;do{for(var l=o.next.next;l!==o.prev;){if(o.i!==l.i&&Bu(o,l)){var g=Ru(o,l);return o=uu(o,o.next),g=uu(g,g.next),Iu(o,t,n,i,r,a),void Iu(g,t,n,i,r,a)}l=l.next}o=o.next}while(o!==e)}function pu(e,t,n,i){var r,a,o,l=[];for(r=0,a=t.length;r<a;r++)(o=cu(e,t[r]*i,r<a-1?t[r+1]*i:e.length,i,!1))===o.next&&(o.steiner=!0),l.push(yu(o));for(l.sort(mu),r=0;r<l.length;r++)fu(l[r],n),n=uu(n,n.next);return n}function mu(e,t){return e.x-t.x}function fu(e,t){if(t=function(e,t){var n,i=t,r=e.x,a=e.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var l=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(l<=r&&l>o){if(o=l,l===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===o)return n;var g,s=n,c=n.x,u=n.y,I=1/0;i=n;do{r>=i.x&&i.x>=c&&r!==i.x&&Gu(a<u?r:o,a,c,u,a<u?o:r,a,i.x,i.y)&&(g=Math.abs(a-i.y)/(r-i.x),Vu(i,e)&&(g<I||g===I&&(i.x>n.x||i.x===n.x&&vu(n,i)))&&(n=i,I=g)),i=i.next}while(i!==s);return n}(e,t),t){var n=Ru(t,e);uu(t,t.next),uu(n,n.next)}}function vu(e,t){return Zu(e.prev,e,t.prev)<0&&Zu(t.next,e,e.next)<0}function bu(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function yu(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Gu(e,t,n,i,r,a,o,l){return(r-o)*(t-l)-(e-o)*(a-l)>=0&&(e-o)*(i-l)-(n-o)*(t-l)>=0&&(n-o)*(a-l)-(r-o)*(i-l)>=0}function Bu(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&xu(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Vu(e,t)&&Vu(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(Zu(e.prev,e,t.prev)||Zu(e,t.prev,t))||wu(e,t)&&Zu(e.prev,e,e.next)>0&&Zu(t.prev,t,t.next)>0)}function Zu(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function wu(e,t){return e.x===t.x&&e.y===t.y}function xu(e,t,n,i){var r=Wu(Zu(e,t,n)),a=Wu(Zu(e,t,i)),o=Wu(Zu(n,i,e)),l=Wu(Zu(n,i,t));return r!==a&&o!==l||(!(0!==r||!Su(e,n,t))||(!(0!==a||!Su(e,i,t))||(!(0!==o||!Su(n,e,i))||!(0!==l||!Su(n,t,i)))))}function Su(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Wu(e){return e>0?1:e<0?-1:0}function Vu(e,t){return Zu(e.prev,e,e.next)<0?Zu(e,t,e.next)>=0&&Zu(e,e.prev,t)>=0:Zu(e,t,e.prev)<0||Zu(e,e.next,t)<0}function Ru(e,t){var n=new Xu(e.i,e.x,e.y),i=new Xu(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function qu(e,t,n,i){var r=new Xu(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ku(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Xu(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Yu=function(){function e(){$(this,e)}return te(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],i=[],r=[];Nu(e),Ku(n,e);var a=e.length;t.forEach(Nu);for(var o=0;o<t.length;o++)i.push(a),a+=t[o].length,Ku(n,t[o]);for(var l=su(n,i),g=0;g<l.length;g+=3)r.push(l.slice(g,g+3));return r}}]),e}();function Nu(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Ku(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var Hu=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gu([new Mi(.5,.5),new Mi(-.5,.5),new Mi(-.5,-.5),new Mi(.5,-.5)]),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$(this,n),(e=t.call(this)).type="ExtrudeGeometry",e.parameters={shapes:i,options:r},i=Array.isArray(i)?i:[i];for(var a=ae(e),o=[],l=[],g=0,s=i.length;g<s;g++){var c=i[g];u(c)}function u(e){var t,n,i,g,s,c=[],u=void 0!==r.curveSegments?r.curveSegments:12,I=void 0!==r.steps?r.steps:1,d=void 0!==r.depth?r.depth:1,C=void 0===r.bevelEnabled||r.bevelEnabled,h=void 0!==r.bevelThickness?r.bevelThickness:.2,A=void 0!==r.bevelSize?r.bevelSize:h-.1,p=void 0!==r.bevelOffset?r.bevelOffset:0,m=void 0!==r.bevelSegments?r.bevelSegments:3,f=r.extrudePath,v=void 0!==r.UVGenerator?r.UVGenerator:zu,b=!1;f&&(t=f.getSpacedPoints(I),b=!0,C=!1,n=f.computeFrenetFrames(I,!1),i=new pr,g=new pr,s=new pr),C||(m=0,h=0,A=0,p=0);var y=e.extractPoints(u),G=y.shape,B=y.holes;if(!Yu.isClockWise(G)){G=G.reverse();for(var Z=0,w=B.length;Z<w;Z++){var x=B[Z];Yu.isClockWise(x)&&(B[Z]=x.reverse())}}for(var S=Yu.triangulateShape(G,B),W=G,V=0,R=B.length;V<R;V++){var q=B[V];G=G.concat(q)}function k(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var X=G.length,Y=S.length;function N(e,t,n){var i,r,a,o=e.x-t.x,l=e.y-t.y,g=n.x-e.x,s=n.y-e.y,c=o*o+l*l,u=o*s-l*g;if(Math.abs(u)>Number.EPSILON){var I=Math.sqrt(c),d=Math.sqrt(g*g+s*s),C=t.x-l/I,h=t.y+o/I,A=((n.x-s/d-C)*s-(n.y+g/d-h)*g)/(o*s-l*g),p=(i=C+o*A-e.x)*i+(r=h+l*A-e.y)*r;if(p<=2)return new Mi(i,r);a=Math.sqrt(p/2)}else{var m=!1;o>Number.EPSILON?g>Number.EPSILON&&(m=!0):o<-Number.EPSILON?g<-Number.EPSILON&&(m=!0):Math.sign(l)===Math.sign(s)&&(m=!0),m?(i=-l,r=o,a=Math.sqrt(c)):(i=o,r=l,a=Math.sqrt(c/2))}return new Mi(i/a,r/a)}for(var K=[],H=0,z=W.length,M=z-1,F=H+1;H<z;H++,M++,F++)M===z&&(M=0),F===z&&(F=0),K[H]=N(W[H],W[M],W[F]);for(var L,_=[],T=K.concat(),E=0,J=B.length;E<J;E++){var U=B[E];L=[];for(var D=0,P=U.length,O=P-1,Q=D+1;D<P;D++,O++,Q++)O===P&&(O=0),Q===P&&(Q=0),L[D]=N(U[D],U[O],U[Q]);_.push(L),T=T.concat(L)}for(var j=0;j<m;j++){for(var $=j/m,ee=h*Math.cos($*Math.PI/2),te=A*Math.sin($*Math.PI/2)+p,ne=0,ie=W.length;ne<ie;ne++){var re=k(W[ne],K[ne],te);Re(re.x,re.y,-ee)}for(var ae=0,oe=B.length;ae<oe;ae++){var le=B[ae];L=_[ae];for(var ge=0,se=le.length;ge<se;ge++){var ce=k(le[ge],L[ge],te);Re(ce.x,ce.y,-ee)}}}for(var ue=A+p,Ie=0;Ie<X;Ie++){var de=C?k(G[Ie],T[Ie],ue):G[Ie];b?(g.copy(n.normals[0]).multiplyScalar(de.x),i.copy(n.binormals[0]).multiplyScalar(de.y),s.copy(t[0]).add(g).add(i),Re(s.x,s.y,s.z)):Re(de.x,de.y,0)}for(var Ce=1;Ce<=I;Ce++)for(var he=0;he<X;he++){var Ae=C?k(G[he],T[he],ue):G[he];b?(g.copy(n.normals[Ce]).multiplyScalar(Ae.x),i.copy(n.binormals[Ce]).multiplyScalar(Ae.y),s.copy(t[Ce]).add(g).add(i),Re(s.x,s.y,s.z)):Re(Ae.x,Ae.y,d/I*Ce)}for(var pe=m-1;pe>=0;pe--){for(var me=pe/m,fe=h*Math.cos(me*Math.PI/2),ve=A*Math.sin(me*Math.PI/2)+p,be=0,ye=W.length;be<ye;be++){var Ge=k(W[be],K[be],ve);Re(Ge.x,Ge.y,d+fe)}for(var Be=0,Ze=B.length;Be<Ze;Be++){var we=B[Be];L=_[Be];for(var xe=0,Se=we.length;xe<Se;xe++){var We=k(we[xe],L[xe],ve);b?Re(We.x,We.y+t[I-1].y,t[I-1].x+fe):Re(We.x,We.y,d+fe)}}}function Ve(e,t){for(var n=e.length;--n>=0;){var i=n,r=n-1;r<0&&(r=e.length-1);for(var a=0,o=I+2*m;a<o;a++){var l=X*a,g=X*(a+1);ke(t+i+l,t+r+l,t+r+g,t+i+g)}}}function Re(e,t,n){c.push(e),c.push(t),c.push(n)}function qe(e,t,n){Xe(e),Xe(t),Xe(n);var i=o.length/3,r=v.generateTopUV(a,o,i-3,i-2,i-1);Ye(r[0]),Ye(r[1]),Ye(r[2])}function ke(e,t,n,i){Xe(e),Xe(t),Xe(i),Xe(t),Xe(n),Xe(i);var r=o.length/3,l=v.generateSideWallUV(a,o,r-6,r-3,r-2,r-1);Ye(l[0]),Ye(l[1]),Ye(l[3]),Ye(l[1]),Ye(l[2]),Ye(l[3])}function Xe(e){o.push(c[3*e+0]),o.push(c[3*e+1]),o.push(c[3*e+2])}function Ye(e){l.push(e.x),l.push(e.y)}!function(){var e=o.length/3;if(C){for(var t=0,n=X*t,i=0;i<Y;i++){var r=S[i];qe(r[2]+n,r[1]+n,r[0]+n)}n=X*(t=I+2*m);for(var l=0;l<Y;l++){var g=S[l];qe(g[0]+n,g[1]+n,g[2]+n)}}else{for(var s=0;s<Y;s++){var c=S[s];qe(c[2],c[1],c[0])}for(var u=0;u<Y;u++){var d=S[u];qe(d[0]+X*I,d[1]+X*I,d[2]+X*I)}}a.addGroup(e,o.length/3-e,0)}(),function(){var e=o.length/3,t=0;Ve(W,t),t+=W.length;for(var n=0,i=B.length;n<i;n++){var r=B[n];Ve(r,t),t+=r.length}a.addGroup(e,o.length/3-e,1)}()}return e.setAttribute("position",new Ea(o,3)),e.setAttribute("uv",new Ea(l,2)),e.computeVertexNormals(),e}return te(n,[{key:"toJSON",value:function(){var e=Ie(ie(n.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var i=0,r=e.length;i<r;i++){var a=e[i];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,t){for(var i=[],r=0,a=e.shapes.length;r<a;r++){var o=t[e.shapes[r]];i.push(o)}var l=e.options.extrudePath;return void 0!==l&&(e.options.extrudePath=(new Uc[l.type]).fromJSON(l)),new n(i,e.options)}}]),n}(eo),zu={generateTopUV:function(e,t,n,i,r){var a=t[3*n],o=t[3*n+1],l=t[3*i],g=t[3*i+1],s=t[3*r],c=t[3*r+1];return[new Mi(a,o),new Mi(l,g),new Mi(s,c)]},generateSideWallUV:function(e,t,n,i,r,a){var o=t[3*n],l=t[3*n+1],g=t[3*n+2],s=t[3*i],c=t[3*i+1],u=t[3*i+2],I=t[3*r],d=t[3*r+1],C=t[3*r+2],h=t[3*a],A=t[3*a+1],p=t[3*a+2];return Math.abs(l-c)<Math.abs(o-s)?[new Mi(o,1-g),new Mi(s,1-u),new Mi(I,1-C),new Mi(h,1-p)]:[new Mi(l,1-g),new Mi(c,1-u),new Mi(d,1-C),new Mi(A,1-p)]}};var Mu=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;$(this,n);var a=(1+Math.sqrt(5))/2,o=[-1,a,0,1,a,0,-1,-a,0,1,-a,0,0,-1,a,0,1,a,0,-1,-a,0,1,-a,a,0,-1,a,0,1,-a,0,-1,-a,0,1],l=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return(e=t.call(this,o,l,i,r)).type="IcosahedronGeometry",e.parameters={radius:i,detail:r},e}return te(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(tu),Fu=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;$(this,n);var a=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];return(e=t.call(this,a,o,i,r)).type="OctahedronGeometry",e.parameters={radius:i,detail:r},e}return te(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(tu),Lu=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;$(this,n),(e=t.call(this)).type="RingGeometry",e.parameters={innerRadius:i,outerRadius:r,thetaSegments:a,phiSegments:o,thetaStart:l,thetaLength:g},a=Math.max(3,a);for(var s=[],c=[],u=[],I=[],d=i,C=(r-i)/(o=Math.max(1,o)),h=new pr,A=new Mi,p=0;p<=o;p++){for(var m=0;m<=a;m++){var f=l+m/a*g;h.x=d*Math.cos(f),h.y=d*Math.sin(f),c.push(h.x,h.y,h.z),u.push(0,0,1),A.x=(h.x/r+1)/2,A.y=(h.y/r+1)/2,I.push(A.x,A.y)}d+=C}for(var v=0;v<o;v++)for(var b=v*(a+1),y=0;y<a;y++){var G=y+b,B=G,Z=G+a+1,w=G+a+2,x=G+1;s.push(B,Z,x),s.push(Z,w,x)}return e.setIndex(s),e.setAttribute("position",new Ea(c,3)),e.setAttribute("normal",new Ea(u,3)),e.setAttribute("uv",new Ea(I,2)),e}return te(n,null,[{key:"fromJSON",value:function(e){return new n(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}]),n}(eo),_u=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new gu([new Mi(0,.5),new Mi(-.5,-.5),new Mi(.5,-.5)]),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;$(this,n),(e=t.call(this)).type="ShapeGeometry",e.parameters={shapes:i,curveSegments:r};var a=[],o=[],l=[],g=[],s=0,c=0;if(!1===Array.isArray(i))I(i);else for(var u=0;u<i.length;u++)I(i[u]),e.addGroup(s,c,u),s+=c,c=0;function I(e){var t=o.length/3,n=e.extractPoints(r),i=n.shape,s=n.holes;!1===Yu.isClockWise(i)&&(i=i.reverse());for(var u=0,I=s.length;u<I;u++){var d=s[u];!0===Yu.isClockWise(d)&&(s[u]=d.reverse())}for(var C=Yu.triangulateShape(i,s),h=0,A=s.length;h<A;h++){var p=s[h];i=i.concat(p)}for(var m=0,f=i.length;m<f;m++){var v=i[m];o.push(v.x,v.y,0),l.push(0,0,1),g.push(v.x,v.y)}for(var b=0,y=C.length;b<y;b++){var G=C[b],B=G[0]+t,Z=G[1]+t,w=G[2]+t;a.push(B,Z,w),c+=3}}return e.setIndex(a),e.setAttribute("position",new Ea(o,3)),e.setAttribute("normal",new Ea(l,3)),e.setAttribute("uv",new Ea(g,2)),e}return te(n,[{key:"toJSON",value:function(){var e=Ie(ie(n.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,t){for(var i=[],r=0,a=e.shapes.length;r<a;r++){var o=t[e.shapes[r]];i.push(o)}return new n(i,e.curveSegments)}}]),n}(eo);var Tu=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;$(this,n),(e=t.call(this)).type="SphereGeometry",e.parameters={radius:i,widthSegments:r,heightSegments:a,phiStart:o,phiLength:l,thetaStart:g,thetaLength:s},r=Math.max(3,Math.floor(r)),a=Math.max(2,Math.floor(a));for(var c=Math.min(g+s,Math.PI),u=0,I=[],d=new pr,C=new pr,h=[],A=[],p=[],m=[],f=0;f<=a;f++){var v=[],b=f/a,y=0;0==f&&0==g?y=.5/r:f==a&&c==Math.PI&&(y=-.5/r);for(var G=0;G<=r;G++){var B=G/r;d.x=-i*Math.cos(o+B*l)*Math.sin(g+b*s),d.y=i*Math.cos(g+b*s),d.z=i*Math.sin(o+B*l)*Math.sin(g+b*s),A.push(d.x,d.y,d.z),C.copy(d).normalize(),p.push(C.x,C.y,C.z),m.push(B+y,1-b),v.push(u++)}I.push(v)}for(var Z=0;Z<a;Z++)for(var w=0;w<r;w++){var x=I[Z][w+1],S=I[Z][w],W=I[Z+1][w],V=I[Z+1][w+1];(0!==Z||g>0)&&h.push(x,S,V),(Z!==a-1||c<Math.PI)&&h.push(S,W,V)}return e.setIndex(h),e.setAttribute("position",new Ea(A,3)),e.setAttribute("normal",new Ea(p,3)),e.setAttribute("uv",new Ea(m,2)),e}return te(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}]),n}(eo),Eu=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;$(this,n);var a=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],o=[2,1,0,0,3,2,1,3,0,2,3,1];return(e=t.call(this,a,o,i,r)).type="TetrahedronGeometry",e.parameters={radius:i,detail:r},e}return te(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.detail)}}]),n}(tu),Ju=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;$(this,n),(e=t.call(this)).type="TorusGeometry",e.parameters={radius:i,tube:r,radialSegments:a,tubularSegments:o,arc:l},a=Math.floor(a),o=Math.floor(o);for(var g=[],s=[],c=[],u=[],I=new pr,d=new pr,C=new pr,h=0;h<=a;h++)for(var A=0;A<=o;A++){var p=A/o*l,m=h/a*Math.PI*2;d.x=(i+r*Math.cos(m))*Math.cos(p),d.y=(i+r*Math.cos(m))*Math.sin(p),d.z=r*Math.sin(m),s.push(d.x,d.y,d.z),I.x=i*Math.cos(p),I.y=i*Math.sin(p),C.subVectors(d,I).normalize(),c.push(C.x,C.y,C.z),u.push(A/o),u.push(h/a)}for(var f=1;f<=a;f++)for(var v=1;v<=o;v++){var b=(o+1)*f+v-1,y=(o+1)*(f-1)+v-1,G=(o+1)*(f-1)+v,B=(o+1)*f+v;g.push(b,y,B),g.push(y,G,B)}return e.setIndex(g),e.setAttribute("position",new Ea(s,3)),e.setAttribute("normal",new Ea(c,3)),e.setAttribute("uv",new Ea(u,2)),e}return te(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}]),n}(eo),Uu=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;$(this,n),(e=t.call(this)).type="TorusKnotGeometry",e.parameters={radius:i,tube:r,tubularSegments:a,radialSegments:o,p:l,q:g},a=Math.floor(a),o=Math.floor(o);for(var s=[],c=[],u=[],I=[],d=new pr,C=new pr,h=new pr,A=new pr,p=new pr,m=new pr,f=new pr,v=0;v<=a;++v){var b=v/a*l*Math.PI*2;q(b,l,g,i,h),q(b+.01,l,g,i,A),m.subVectors(A,h),f.addVectors(A,h),p.crossVectors(m,f),f.crossVectors(p,m),p.normalize(),f.normalize();for(var y=0;y<=o;++y){var G=y/o*Math.PI*2,B=-r*Math.cos(G),Z=r*Math.sin(G);d.x=h.x+(B*f.x+Z*p.x),d.y=h.y+(B*f.y+Z*p.y),d.z=h.z+(B*f.z+Z*p.z),c.push(d.x,d.y,d.z),C.subVectors(d,h).normalize(),u.push(C.x,C.y,C.z),I.push(v/a),I.push(y/o)}}for(var w=1;w<=a;w++)for(var x=1;x<=o;x++){var S=(o+1)*(w-1)+(x-1),W=(o+1)*w+(x-1),V=(o+1)*w+x,R=(o+1)*(w-1)+x;s.push(S,W,R),s.push(W,V,R)}function q(e,t,n,i,r){var a=Math.cos(e),o=Math.sin(e),l=n/t*e,g=Math.cos(l);r.x=i*(2+g)*.5*a,r.y=i*(2+g)*o*.5,r.z=i*Math.sin(l)*.5}return e.setIndex(s),e.setAttribute("position",new Ea(c,3)),e.setAttribute("normal",new Ea(u,3)),e.setAttribute("uv",new Ea(I,2)),e}return te(n,null,[{key:"fromJSON",value:function(e){return new n(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}]),n}(eo),Du=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ec(new pr(-1,-1,0),new pr(-1,1,0),new pr(1,1,0)),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,l=arguments.length>4&&void 0!==arguments[4]&&arguments[4];$(this,n),(e=t.call(this)).type="TubeGeometry",e.parameters={path:i,tubularSegments:r,radius:a,radialSegments:o,closed:l};var g=i.computeFrenetFrames(r,l);e.tangents=g.tangents,e.normals=g.normals,e.binormals=g.binormals;var s=new pr,c=new pr,u=new Mi,I=new pr,d=[],C=[],h=[],A=[];function p(){for(var e=0;e<r;e++)m(e);m(!1===l?r:0),v(),f()}function m(e){I=i.getPointAt(e/r,I);for(var t=g.normals[e],n=g.binormals[e],l=0;l<=o;l++){var u=l/o*Math.PI*2,h=Math.sin(u),A=-Math.cos(u);c.x=A*t.x+h*n.x,c.y=A*t.y+h*n.y,c.z=A*t.z+h*n.z,c.normalize(),C.push(c.x,c.y,c.z),s.x=I.x+a*c.x,s.y=I.y+a*c.y,s.z=I.z+a*c.z,d.push(s.x,s.y,s.z)}}function f(){for(var e=1;e<=r;e++)for(var t=1;t<=o;t++){var n=(o+1)*(e-1)+(t-1),i=(o+1)*e+(t-1),a=(o+1)*e+t,l=(o+1)*(e-1)+t;A.push(n,i,l),A.push(i,a,l)}}function v(){for(var e=0;e<=r;e++)for(var t=0;t<=o;t++)u.x=e/r,u.y=t/o,h.push(u.x,u.y)}return p(),e.setIndex(A),e.setAttribute("position",new Ea(d,3)),e.setAttribute("normal",new Ea(C,3)),e.setAttribute("uv",new Ea(h,2)),e}return te(n,[{key:"toJSON",value:function(){var e=Ie(ie(n.prototype),"toJSON",this).call(this);return e.path=this.parameters.path.toJSON(),e}}],[{key:"fromJSON",value:function(e){return new n((new Uc[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}]),n}(eo),Pu=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if($(this,n),(e=t.call(this)).type="WireframeGeometry",e.parameters={geometry:i},null!==i){var r=[],a=new Set,o=new pr,l=new pr;if(null!==i.index){var g=i.attributes.position,s=i.index,c=i.groups;0===c.length&&(c=[{start:0,count:s.count,materialIndex:0}]);for(var u=0,I=c.length;u<I;++u)for(var d=c[u],C=d.start,h=d.count,A=C,p=C+h;A<p;A+=3)for(var m=0;m<3;m++){var f=s.getX(A+m),v=s.getX(A+(m+1)%3);o.fromBufferAttribute(g,f),l.fromBufferAttribute(g,v),!0===Ou(o,l,a)&&(r.push(o.x,o.y,o.z),r.push(l.x,l.y,l.z))}}else for(var b=i.attributes.position,y=0,G=b.count/3;y<G;y++)for(var B=0;B<3;B++){var Z=3*y+B,w=3*y+(B+1)%3;o.fromBufferAttribute(b,Z),l.fromBufferAttribute(b,w),!0===Ou(o,l,a)&&(r.push(o.x,o.y,o.z),r.push(l.x,l.y,l.z))}e.setAttribute("position",new Ea(r,3))}return e}return te(n)}(eo);function Ou(e,t,n){var i="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),r="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}var Qu=Object.freeze({__proto__:null,BoxGeometry:bo,CapsuleGeometry:Qc,CircleGeometry:jc,ConeGeometry:eu,CylinderGeometry:$c,DodecahedronGeometry:nu,EdgesGeometry:lu,ExtrudeGeometry:Hu,IcosahedronGeometry:Mu,LatheGeometry:Oc,OctahedronGeometry:Fu,PlaneGeometry:Fo,PolyhedronGeometry:tu,RingGeometry:Lu,ShapeGeometry:_u,SphereGeometry:Tu,TetrahedronGeometry:Eu,TorusGeometry:Ju,TorusKnotGeometry:Uu,TubeGeometry:Du,WireframeGeometry:Pu}),ju=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this)).isShadowMaterial=!0,i.type="ShadowMaterial",i.color=new ir(0),i.transparent=!0,i.fog=!0,i.setValues(e),i}return te(n,[{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.fog=e.fog,this}}]),n}(qa),$u=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this,e)).isRawShaderMaterial=!0,i.type="RawShaderMaterial",i}return te(n)}(Zo),eI=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this)).isMeshStandardMaterial=!0,i.defines={STANDARD:""},i.type="MeshStandardMaterial",i.color=new ir(16777215),i.roughness=1,i.metalness=0,i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new ir(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Jn,i.normalScale=new Mi(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.roughnessMap=null,i.metalnessMap=null,i.alphaMap=null,i.envMap=null,i.envMapIntensity=1,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.fog=!0,i.setValues(e),i}return te(n,[{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(qa),tI=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this)).isMeshPhysicalMaterial=!0,i.defines={STANDARD:"",PHYSICAL:""},i.type="MeshPhysicalMaterial",i.clearcoatMap=null,i.clearcoatRoughness=0,i.clearcoatRoughnessMap=null,i.clearcoatNormalScale=new Mi(1,1),i.clearcoatNormalMap=null,i.ior=1.5,Object.defineProperty(ae(i),"reflectivity",{get:function(){return Ri(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),i.iridescenceMap=null,i.iridescenceIOR=1.3,i.iridescenceThicknessRange=[100,400],i.iridescenceThicknessMap=null,i.sheenColor=new ir(0),i.sheenColorMap=null,i.sheenRoughness=1,i.sheenRoughnessMap=null,i.transmissionMap=null,i.thickness=0,i.thicknessMap=null,i.attenuationDistance=0,i.attenuationColor=new ir(1,1,1),i.specularIntensity=1,i.specularIntensityMap=null,i.specularColor=new ir(1,1,1),i.specularColorMap=null,i._sheen=0,i._clearcoat=0,i._iridescence=0,i._transmission=0,i.setValues(e),i}return te(n,[{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}},{key:"iridescence",get:function(){return this._iridescence},set:function(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=O(e.iridescenceThicknessRange),this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}]),n}(eI),nI=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this)).isMeshPhongMaterial=!0,i.type="MeshPhongMaterial",i.color=new ir(16777215),i.specular=new ir(1118481),i.shininess=30,i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new ir(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Jn,i.normalScale=new Mi(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=rt,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.fog=!0,i.setValues(e),i}return te(n,[{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(qa),iI=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this)).isMeshToonMaterial=!0,i.defines={TOON:""},i.type="MeshToonMaterial",i.color=new ir(16777215),i.map=null,i.gradientMap=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new ir(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Jn,i.normalScale=new Mi(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.alphaMap=null,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.fog=!0,i.setValues(e),i}return te(n,[{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}]),n}(qa),rI=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this)).isMeshNormalMaterial=!0,i.type="MeshNormalMaterial",i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Jn,i.normalScale=new Mi(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.wireframe=!1,i.wireframeLinewidth=1,i.flatShading=!1,i.setValues(e),i}return te(n,[{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}(qa),aI=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this)).isMeshLambertMaterial=!0,i.type="MeshLambertMaterial",i.color=new ir(16777215),i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new ir(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Jn,i.normalScale=new Mi(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=rt,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.fog=!0,i.setValues(e),i}return te(n,[{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(qa),oI=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this)).isMeshMatcapMaterial=!0,i.defines={MATCAP:""},i.type="MeshMatcapMaterial",i.color=new ir(16777215),i.matcap=null,i.map=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=Jn,i.normalScale=new Mi(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.alphaMap=null,i.flatShading=!1,i.fog=!0,i.setValues(e),i}return te(n,[{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}]),n}(qa),lI=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this)).isLineDashedMaterial=!0,i.type="LineDashedMaterial",i.scale=1,i.dashSize=3,i.gapSize=1,i.setValues(e),i}return te(n,[{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(oc);function gI(e,t,n){return cI(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function sI(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function cI(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function uI(e){for(var t=e.length,n=new Array(t),i=0;i!==t;++i)n[i]=i;return n.sort((function(t,n){return e[t]-e[n]})),n}function II(e,t,n){for(var i=e.length,r=new e.constructor(i),a=0,o=0;o!==i;++a)for(var l=n[a]*t,g=0;g!==t;++g)r[o++]=e[l+g];return r}function dI(e,t,n,i){for(var r=1,a=e[0];void 0!==a&&void 0===a[i];)a=e[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[i])&&(t.push(a.time),n.push.apply(n,o)),a=e[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[i])&&(t.push(a.time),o.toArray(n,n.length)),a=e[r++]}while(void 0!==a);else do{void 0!==(o=a[i])&&(t.push(a.time),n.push(o)),a=e[r++]}while(void 0!==a)}}var CI=Object.freeze({__proto__:null,arraySlice:gI,convertArray:sI,isTypedArray:cI,getKeyframeOrder:uI,sortedArray:II,flattenJSON:dI,subclip:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=e.clone();a.name=t;for(var o=[],l=0;l<a.tracks.length;++l){for(var g=a.tracks[l],s=g.getValueSize(),c=[],u=[],I=0;I<g.times.length;++I){var d=g.times[I]*r;if(!(d<n||d>=i)){c.push(g.times[I]);for(var C=0;C<s;++C)u.push(g.values[I*s+C])}}0!==c.length&&(g.times=sI(c,g.times.constructor),g.values=sI(u,g.values.constructor),o.push(g))}a.tracks=o;for(var h=1/0,A=0;A<a.tracks.length;++A)h>a.tracks[A].times[0]&&(h=a.tracks[A].times[0]);for(var p=0;p<a.tracks.length;++p)a.tracks[p].shift(-1*h);return a.resetDuration(),a},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);for(var r=n.tracks.length,a=t/i,o=function(t){var i=n.tracks[t],r=i.ValueTypeName;if("bool"===r||"string"===r)return"continue";var o=e.tracks.find((function(e){return e.name===i.name&&e.ValueTypeName===r}));if(void 0===o)return"continue";var l=0,g=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=g/3);var s=0,c=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=c/3);var u=i.times.length-1,I=void 0;if(a<=i.times[0]){var d=l,C=g-l;I=gI(i.values,d,C)}else if(a>=i.times[u]){var h=u*g+l,A=h+g-l;I=gI(i.values,h,A)}else{var p=i.createInterpolant(),m=l,f=g-l;p.evaluate(a),I=gI(p.resultBuffer,m,f)}"quaternion"===r&&(new Ar).fromArray(I).normalize().conjugate().toArray(I);for(var v=o.times.length,b=0;b<v;++b){var y=b*c+s;if("quaternion"===r)Ar.multiplyQuaternionsFlat(o.values,y,I,0,o.values,y);else for(var G=c-2*s,B=0;B<G;++B)o.values[y+B]-=I[B]}},l=0;l<r;++l)o(l);return e.blendMode=Hn,e}}),hI=function(){function e(t,n,i,r){$(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}return te(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var a;n:{i:if(!(e<i)){for(var o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(r=i,e<(i=t[++n]))break t}a=t.length;break n}if(e>=r)break e;var l=t[1];e<l&&(n=2,r=l);for(var g=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===g)break;if(i=r,e>=(r=t[--n-1]))break t}a=n,n=0}for(;n<a;){var s=n+a>>>1;e<t[s]?a=s:n=s+1}if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,a=0;a!==i;++a)t[a]=n[r+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}(),AI=function(e){ne(n,e);var t=le(n);function n(e,i,r,a){var o;return $(this,n),(o=t.call(this,e,i,r,a))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:Xn,endingEnd:Xn},o}return te(n,[{key:"intervalChanged_",value:function(e,t,n){var i=this.parameterPositions,r=e-2,a=e+1,o=i[r],l=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case Yn:r=e,o=2*t-n;break;case Nn:o=t+i[r=i.length-2]-i[r+1];break;default:r=e,o=n}if(void 0===l)switch(this.getSettings_().endingEnd){case Yn:a=e,l=2*n-t;break;case Nn:a=1,l=n+i[1]-i[0];break;default:a=e-1,l=t}var g=.5*(n-t),s=this.valueSize;this._weightPrev=g/(t-o),this._weightNext=g/(l-n),this._offsetPrev=r*s,this._offsetNext=a*s}},{key:"interpolate_",value:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,g=l-o,s=this._offsetPrev,c=this._offsetNext,u=this._weightPrev,I=this._weightNext,d=(n-t)/(i-t),C=d*d,h=C*d,A=-u*h+2*u*C-u*d,p=(1+u)*h+(-1.5-2*u)*C+(-.5+u)*d+1,m=(-1-I)*h+(1.5+I)*C+.5*d,f=I*h-I*C,v=0;v!==o;++v)r[v]=A*a[s+v]+p*a[g+v]+m*a[l+v]+f*a[c+v];return r}}]),n}(hI),pI=function(e){ne(n,e);var t=le(n);function n(e,i,r,a){return $(this,n),t.call(this,e,i,r,a)}return te(n,[{key:"interpolate_",value:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,g=l-o,s=(n-t)/(i-t),c=1-s,u=0;u!==o;++u)r[u]=a[g+u]*c+a[l+u]*s;return r}}]),n}(hI),mI=function(e){ne(n,e);var t=le(n);function n(e,i,r,a){return $(this,n),t.call(this,e,i,r,a)}return te(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(hI),fI=function(){function e(t,n,i,r){if($(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=sI(n,this.TimeBufferType),this.values=sI(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}return te(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new mI(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new pI(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new AI(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case Rn:t=this.InterpolantFactoryMethodDiscrete;break;case qn:t=this.InterpolantFactoryMethodLinear;break;case kn:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Rn;case this.InterpolantFactoryMethodLinear:return qn;case this.InterpolantFactoryMethodSmooth:return kn}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<e;)++r;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==r||a!==i){r>=a&&(r=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=gI(n,r,a),this.values=gI(this.values,r*o,a*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==r;o++){var l=n[o];if("number"===typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(null!==a&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(void 0!==i&&cI(i))for(var g=0,s=i.length;g!==s;++g){var c=i[g];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,g,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=gI(this.times),t=gI(this.values),n=this.getValueSize(),i=this.getInterpolation()===kn,r=e.length-1,a=1,o=1;o<r;++o){var l=!1,g=e[o];if(g!==e[o+1]&&(1!==o||g!==e[0]))if(i)l=!0;else for(var s=o*n,c=s-n,u=s+n,I=0;I!==n;++I){var d=t[s+I];if(d!==t[c+I]||d!==t[u+I]){l=!0;break}}if(l){if(o!==a){e[a]=e[o];for(var C=o*n,h=a*n,A=0;A!==n;++A)t[h+A]=t[C+A]}++a}}if(r>0){e[a]=e[r];for(var p=r*n,m=a*n,f=0;f!==n;++f)t[m+f]=t[p+f];++a}return a!==e.length?(this.times=gI(e,0,a),this.values=gI(t,0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=gI(this.times,0),t=gI(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:sI(e.times,Array),values:sI(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}}]),e}();fI.prototype.TimeBufferType=Float32Array,fI.prototype.ValueBufferType=Float32Array,fI.prototype.DefaultInterpolation=qn;var vI=function(e){ne(n,e);var t=le(n);function n(){return $(this,n),t.apply(this,arguments)}return te(n)}(fI);vI.prototype.ValueTypeName="bool",vI.prototype.ValueBufferType=Array,vI.prototype.DefaultInterpolation=Rn,vI.prototype.InterpolantFactoryMethodLinear=void 0,vI.prototype.InterpolantFactoryMethodSmooth=void 0;var bI=function(e){ne(n,e);var t=le(n);function n(){return $(this,n),t.apply(this,arguments)}return te(n)}(fI);bI.prototype.ValueTypeName="color";var yI=function(e){ne(n,e);var t=le(n);function n(){return $(this,n),t.apply(this,arguments)}return te(n)}(fI);yI.prototype.ValueTypeName="number";var GI=function(e){ne(n,e);var t=le(n);function n(e,i,r,a){return $(this,n),t.call(this,e,i,r,a)}return te(n,[{key:"interpolate_",value:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(n-t)/(i-t),g=e*o,s=g+o;g!==s;g+=4)Ar.slerpFlat(r,0,a,g-o,a,g,l);return r}}]),n}(hI),BI=function(e){ne(n,e);var t=le(n);function n(){return $(this,n),t.apply(this,arguments)}return te(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new GI(this.times,this.values,this.getValueSize(),e)}}]),n}(fI);BI.prototype.ValueTypeName="quaternion",BI.prototype.DefaultInterpolation=qn,BI.prototype.InterpolantFactoryMethodSmooth=void 0;var ZI=function(e){ne(n,e);var t=le(n);function n(){return $(this,n),t.apply(this,arguments)}return te(n)}(fI);ZI.prototype.ValueTypeName="string",ZI.prototype.ValueBufferType=Array,ZI.prototype.DefaultInterpolation=Rn,ZI.prototype.InterpolantFactoryMethodLinear=void 0,ZI.prototype.InterpolantFactoryMethodSmooth=void 0;var wI=function(e){ne(n,e);var t=le(n);function n(){return $(this,n),t.apply(this,arguments)}return te(n)}(fI);wI.prototype.ValueTypeName="vector";var xI=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Kn;$(this,e),this.name=t,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=Vi(),this.duration<0&&this.resetDuration()}return te(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,a=n.length;r!==a;++r)t.push(SI(n[r]).scale(i));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},r=0,a=n.length;r!==a;++r)t.push(fI.toJSON(n[r]));return i}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,i){for(var r=t.length,a=[],o=0;o<r;o++){var l=[],g=[];l.push((o+r-1)%r,o,(o+1)%r),g.push(0,1,0);var s=uI(l);l=II(l,1,s),g=II(g,1,s),i||0!==l[0]||(l.push(r),g.push(g[0])),a.push(new yI(".morphTargetInfluences["+t[o].name+"]",l,g).scale(1/n))}return new this(e,-1,a)}},{key:"findByName",value:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var l=e[a],g=l.name.match(r);if(g&&g.length>1){var s=g[1],c=i[s];c||(i[s]=c=[]),c.push(l)}}var u=[];for(var I in i)u.push(this.CreateFromMorphTargetSequence(I,i[I],t,n));return u}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,r){if(0!==n.length){var a=[],o=[];dI(n,a,o,i),0!==a.length&&r.push(new e(t,a,o))}},i=[],r=e.name||"default",a=e.fps||30,o=e.blendMode,l=e.length||-1,g=e.hierarchy||[],s=0;s<g.length;s++){var c=g[s].keys;if(c&&0!==c.length)if(c[0].morphTargets){var u={},I=void 0;for(I=0;I<c.length;I++)if(c[I].morphTargets)for(var d=0;d<c[I].morphTargets.length;d++)u[c[I].morphTargets[d]]=-1;for(var C in u){for(var h=[],A=[],p=0;p!==c[I].morphTargets.length;++p){var m=c[I];h.push(m.time),A.push(m.morphTarget===C?1:0)}i.push(new yI(".morphTargetInfluence["+C+"]",h,A))}l=u.length*a}else{var f=".bones["+t[s].name+"]";n(wI,f+".position",c,"pos",i),n(BI,f+".quaternion",c,"rot",i),n(wI,f+".scale",c,"scl",i)}}return 0===i.length?null:new this(r,l,i,o)}}]),e}();function SI(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return yI;case"vector":case"vector2":case"vector3":case"vector4":return wI;case"color":return bI;case"quaternion":return BI;case"bool":case"boolean":return vI;case"string":return ZI}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],i=[];dI(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var WI,VI={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},RI=te((function e(t,n,i){$(this,e);var r=this,a=!1,o=0,l=0,g=void 0,s=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=i,this.itemStart=function(e){l++,!1===a&&void 0!==r.onStart&&r.onStart(e,o,l),a=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,l),o===l&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return g?g(e):e},this.setURLModifier=function(e){return g=e,this},this.addHandler=function(e,t){return s.push(e,t),this},this.removeHandler=function(e){var t=s.indexOf(e);return-1!==t&&s.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=s.length;t<n;t+=2){var i=s[t],r=s[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return r}return null}})),qI=new RI,kI=function(){function e(t){$(this,e),this.manager=void 0!==t?t:qI,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return te(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise((function(i,r){n.load(e,i,t,r)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),XI={},YI=function(e){ne(n,e);var t=le(n);function n(e,i){var r;return $(this,n),(r=t.call(this,e)).response=i,r}return te(n)}(ge(Error)),NI=function(e){ne(n,e);var t=le(n);function n(e){return $(this,n),t.call(this,e)}return te(n,[{key:"load",value:function(e,t,n,i){var r=this;void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=VI.get(e);if(void 0!==a)return this.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;if(void 0===XI[e]){XI[e]=[],XI[e].push({onLoad:t,onProgress:n,onError:i});var o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,g=this.responseType;fetch(o).then((function(t){if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;var n=XI[e],i=t.body.getReader(),r=t.headers.get("Content-Length"),a=r?parseInt(r):0,o=0!==a,l=0,g=new ReadableStream({start:function(e){!function t(){i.read().then((function(i){var r=i.done,g=i.value;if(r)e.close();else{l+=g.byteLength;for(var s=new ProgressEvent("progress",{lengthComputable:o,loaded:l,total:a}),c=0,u=n.length;c<u;c++){var I=n[c];I.onProgress&&I.onProgress(s)}e.enqueue(g),t()}}))}()}});return new Response(g)}throw new YI('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)})).then((function(e){switch(g){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((function(e){return(new DOMParser).parseFromString(e,l)}));case"json":return e.json();default:if(void 0===l)return e.text();var t=/charset="?([^;"\s]*)"?/i.exec(l),n=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(n);return e.arrayBuffer().then((function(e){return i.decode(e)}))}})).then((function(t){VI.add(e,t);var n=XI[e];delete XI[e];for(var i=0,r=n.length;i<r;i++){var a=n[i];a.onLoad&&a.onLoad(t)}})).catch((function(t){var n=XI[e];if(void 0===n)throw r.manager.itemError(e),t;delete XI[e];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(t)}r.manager.itemError(e)})).finally((function(){r.manager.itemEnd(e)})),this.manager.itemStart(e)}else XI[e].push({onLoad:t,onProgress:n,onError:i})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(kI),KI=function(e){ne(n,e);var t=le(n);function n(e){return $(this,n),t.call(this,e)}return te(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new NI(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){for(var t=[],n=0;n<e.length;n++){var i=xI.parse(e[n]);t.push(i)}return t}}]),n}(kI),HI=function(e){ne(n,e);var t=le(n);function n(e){return $(this,n),t.call(this,e)}return te(n,[{key:"load",value:function(e,t,n,i){var r=this,a=[],o=new wc,l=new NI(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(r.withCredentials);var g=0;function s(s){l.load(e[s],(function(e){var n=r.parse(e,!0);a[s]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(g+=1)&&(1===n.mipmapCount&&(o.minFilter=xt),o.image=a,o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,i)}if(Array.isArray(e))for(var c=0,u=e.length;c<u;++c)s(c);else l.load(e,(function(e){var n=r.parse(e,!0);if(n.isCubemap){for(var i=n.mipmaps.length/n.mipmapCount,l=0;l<i;l++){a[l]={mipmaps:[]};for(var g=0;g<n.mipmapCount;g++)a[l].mipmaps.push(n.mipmaps[l*n.mipmapCount+g]),a[l].format=n.format,a[l].width=n.width,a[l].height=n.height}o.image=a}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=xt),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,i);return o}}]),n}(kI),zI=function(e){ne(n,e);var t=le(n);function n(e){return $(this,n),t.call(this,e)}return te(n,[{key:"load",value:function(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=VI.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;var o=Ei("img");function l(){s(),VI.add(e,this),t&&t(this),r.manager.itemEnd(e)}function g(t){s(),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}function s(){o.removeEventListener("load",l,!1),o.removeEventListener("error",g,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",g,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o}}]),n}(kI),MI=function(e){ne(n,e);var t=le(n);function n(e){return $(this,n),t.call(this,e)}return te(n,[{key:"load",value:function(e,t,n,i){var r=new Vo,a=new zI(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function l(n){a.load(e[n],(function(e){r.images[n]=e,6===++o&&(r.needsUpdate=!0,t&&t(r))}),void 0,i)}for(var g=0;g<e.length;++g)l(g);return r}}]),n}(kI),FI=function(e){ne(n,e);var t=le(n);function n(e){return $(this,n),t.call(this,e)}return te(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new Os,o=new NI(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(r.withCredentials),o.load(e,(function(e){var n=r.parse(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:vt,a.wrapT=void 0!==n.wrapT?n.wrapT:vt,a.magFilter=void 0!==n.magFilter?n.magFilter:xt,a.minFilter=void 0!==n.minFilter?n.minFilter:xt,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(a.encoding=n.encoding),void 0!==n.flipY&&(a.flipY=n.flipY),void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=Vt),1===n.mipmapCount&&(a.minFilter=xt),void 0!==n.generateMipmaps&&(a.generateMipmaps=n.generateMipmaps),a.needsUpdate=!0,t&&t(a,n))}),n,i),a}}]),n}(kI),LI=function(e){ne(n,e);var t=le(n);function n(e){return $(this,n),t.call(this,e)}return te(n,[{key:"load",value:function(e,t,n,i){var r=new gr,a=new zI(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)}),n,i),r}}]),n}(kI),_I=function(e){ne(n,e);var t=le(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return $(this,n),(i=t.call(this)).isLight=!0,i.type="Light",i.color=new ir(e),i.intensity=r,i}return te(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e,t){return Ie(ie(n.prototype),"copy",this).call(this,e,t),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=Ie(ie(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(fa),TI=function(e){ne(n,e);var t=le(n);function n(e,i,r){var a;return $(this,n),(a=t.call(this,e,r)).isHemisphereLight=!0,a.type="HemisphereLight",a.position.copy(fa.DefaultUp),a.updateMatrix(),a.groundColor=new ir(i),a}return te(n,[{key:"copy",value:function(e,t){return Ie(ie(n.prototype),"copy",this).call(this,e,t),this.groundColor.copy(e.groundColor),this}}]),n}(_I),EI=new Dr,JI=new pr,UI=new pr,DI=function(){function e(t){$(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Mi(512,512),this.map=null,this.mapPass=null,this.matrix=new Dr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ho,this._frameExtents=new Mi(1,1),this._viewportCount=1,this._viewports=[new sr(0,0,1,1)]}return te(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;JI.setFromMatrixPosition(e.matrixWorld),t.position.copy(JI),UI.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(UI),t.updateMatrixWorld(),EI.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(EI),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),PI=function(e){ne(n,e);var t=le(n);function n(){var e;return $(this,n),(e=t.call(this,new xo(50,1,.5,500))).isSpotLightShadow=!0,e.focus=1,e}return te(n,[{key:"updateMatrices",value:function(e){var t=this.camera,i=2*Wi*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;i===t.fov&&r===t.aspect&&a===t.far||(t.fov=i,t.aspect=r,t.far=a,t.updateProjectionMatrix()),Ie(ie(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(DI),OI=function(e){ne(n,e);var t=le(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return $(this,n),(r=t.call(this,e,i)).isSpotLight=!0,r.type="SpotLight",r.position.copy(fa.DefaultUp),r.updateMatrix(),r.target=new fa,r.distance=a,r.angle=o,r.penumbra=l,r.decay=g,r.map=null,r.shadow=new PI,r}return te(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return Ie(ie(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(_I),QI=new Dr,jI=new pr,$I=new pr,ed=function(e){ne(n,e);var t=le(n);function n(){var e;return $(this,n),(e=t.call(this,new xo(90,1,.5,500))).isPointLightShadow=!0,e._frameExtents=new Mi(4,2),e._viewportCount=6,e._viewports=[new sr(2,1,1,1),new sr(0,1,1,1),new sr(3,1,1,1),new sr(1,1,1,1),new sr(3,0,1,1),new sr(1,0,1,1)],e._cubeDirections=[new pr(1,0,0),new pr(-1,0,0),new pr(0,0,1),new pr(0,0,-1),new pr(0,1,0),new pr(0,-1,0)],e._cubeUps=[new pr(0,1,0),new pr(0,1,0),new pr(0,1,0),new pr(0,1,0),new pr(0,0,1),new pr(0,0,-1)],e}return te(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),jI.setFromMatrixPosition(e.matrixWorld),n.position.copy(jI),$I.copy(n.position),$I.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt($I),n.updateMatrixWorld(),i.makeTranslation(-jI.x,-jI.y,-jI.z),QI.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(QI)}}]),n}(DI),td=function(e){ne(n,e);var t=le(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return $(this,n),(r=t.call(this,e,i)).isPointLight=!0,r.type="PointLight",r.distance=a,r.decay=o,r.shadow=new ed,r}return te(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e,t){return Ie(ie(n.prototype),"copy",this).call(this,e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(_I),nd=function(e){ne(n,e);var t=le(n);function n(){var e;return $(this,n),(e=t.call(this,new Qo(-5,5,5,-5,.5,500))).isDirectionalLightShadow=!0,e}return te(n)}(DI),id=function(e){ne(n,e);var t=le(n);function n(e,i){var r;return $(this,n),(r=t.call(this,e,i)).isDirectionalLight=!0,r.type="DirectionalLight",r.position.copy(fa.DefaultUp),r.updateMatrix(),r.target=new fa,r.shadow=new nd,r}return te(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(_I),rd=function(e){ne(n,e);var t=le(n);function n(e,i){var r;return $(this,n),(r=t.call(this,e,i)).isAmbientLight=!0,r.type="AmbientLight",r}return te(n)}(_I),ad=function(e){ne(n,e);var t=le(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return $(this,n),(r=t.call(this,e,i)).isRectAreaLight=!0,r.type="RectAreaLight",r.width=a,r.height=o,r}return te(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=Ie(ie(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(_I),od=function(){function e(){$(this,e),this.isSphericalHarmonics3=!0,this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new pr)}return te(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*i*1.092548),t.addScaledVector(a[5],i*r*1.092548),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],n*r*1.092548),t.addScaledVector(a[8],.546274*(n*n-i*i)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,i=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*i),t.addScaledVector(a[2],1.023328*r),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*i),t.addScaledVector(a[5],.858086*i*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],.858086*n*r),t.addScaledVector(a[8],.429043*(n*n-i*i)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}]),e}(),ld=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new od,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return $(this,n),(e=t.call(this,void 0,r)).isLightProbe=!0,e.sh=i,e}return te(n,[{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=Ie(ie(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(_I),gd=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this,e)).textures={},i}return te(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new NI(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){var t=this.textures;function i(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=n.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new ir).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(var a in e.uniforms){var o=e.uniforms[a];switch(r.uniforms[a]={},o.type){case"t":r.uniforms[a].value=i(o.value);break;case"c":r.uniforms[a].value=(new ir).setHex(o.value);break;case"v2":r.uniforms[a].value=(new Mi).fromArray(o.value);break;case"v3":r.uniforms[a].value=(new pr).fromArray(o.value);break;case"v4":r.uniforms[a].value=(new sr).fromArray(o.value);break;case"m3":r.uniforms[a].value=(new Fi).fromArray(o.value);break;case"m4":r.uniforms[a].value=(new Dr).fromArray(o.value);break;default:r.uniforms[a].value=o.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(var l in e.extensions)r.extensions[l]=e.extensions[l];if(void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=i(e.map)),void 0!==e.matcap&&(r.matcap=i(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=i(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=i(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=i(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var g=e.normalScale;!1===Array.isArray(g)&&(g=[g,g]),r.normalScale=(new Mi).fromArray(g)}return void 0!==e.displacementMap&&(r.displacementMap=i(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=i(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=i(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=i(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=i(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=i(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=i(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=i(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=i(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=i(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=i(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=i(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Mi).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=i(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=i(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=i(e.thicknessMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=i(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}},{key:"setTextures",value:function(e){return this.textures=e,this}}],[{key:"createMaterialFromType",value:function(e){return new{ShadowMaterial:ju,SpriteMaterial:Zs,RawShaderMaterial:$u,ShaderMaterial:Zo,PointsMaterial:pc,MeshPhysicalMaterial:tI,MeshStandardMaterial:eI,MeshPhongMaterial:nI,MeshToonMaterial:iI,MeshNormalMaterial:rI,MeshLambertMaterial:aI,MeshDepthMaterial:ts,MeshDistanceMaterial:ns,MeshBasicMaterial:ka,MeshMatcapMaterial:oI,LineDashedMaterial:lI,LineBasicMaterial:oc,Material:qa}[e]}}]),n}(kI),sd=function(){function e(){$(this,e)}return te(e,null,[{key:"decodeText",value:function(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(r){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}},{key:"resolveURL",value:function(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}]),e}(),cd=function(e){ne(n,e);var t=le(n);function n(){var e;return $(this,n),(e=t.call(this)).isInstancedBufferGeometry=!0,e.type="InstancedBufferGeometry",e.instanceCount=1/0,e}return te(n,[{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e=Ie(ie(n.prototype),"toJSON",this).call(this,this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n}(eo),ud=function(e){ne(n,e);var t=le(n);function n(e){return $(this,n),t.call(this,e)}return te(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new NI(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(n){try{t(r.parse(JSON.parse(n)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}}),n,i)}},{key:"parse",value:function(e){var t={},n={};function i(e,i){if(void 0!==t[i])return t[i];var r=e.interleavedBuffers[i],a=function(e,t){if(void 0!==n[t])return n[t];var i=e.arrayBuffers[t],r=new Uint32Array(i).buffer;return n[t]=r,r}(e,r.buffer),o=Ti(r.type,a),l=new ys(o,r.stride);return l.uuid=r.uuid,t[i]=l,l}var r=e.isInstancedBufferGeometry?new cd:new eo,a=e.data.index;if(void 0!==a){var o=Ti(a.type,a.array);r.setIndex(new Na(o,1))}var l=e.data.attributes;for(var g in l){var s=l[g],c=void 0;if(s.isInterleavedBufferAttribute){var u=i(e.data,s.data);c=new Bs(u,s.itemSize,s.offset,s.normalized)}else{var I=Ti(s.type,s.array);c=new(s.isInstancedBufferAttribute?ec:Na)(I,s.itemSize,s.normalized)}void 0!==s.name&&(c.name=s.name),void 0!==s.usage&&c.setUsage(s.usage),void 0!==s.updateRange&&(c.updateRange.offset=s.updateRange.offset,c.updateRange.count=s.updateRange.count),r.setAttribute(g,c)}var d=e.data.morphAttributes;if(d)for(var C in d){for(var h=d[C],A=[],p=0,m=h.length;p<m;p++){var f=h[p],v=void 0;if(f.isInterleavedBufferAttribute){var b=i(e.data,f.data);v=new Bs(b,f.itemSize,f.offset,f.normalized)}else{var y=Ti(f.type,f.array);v=new Na(y,f.itemSize,f.normalized)}void 0!==f.name&&(v.name=f.name),A.push(v)}r.morphAttributes[C]=A}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);var G=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==G)for(var B=0,Z=G.length;B!==Z;++B){var w=G[B];r.addGroup(w.start,w.count,w.materialIndex)}var x=e.data.boundingSphere;if(void 0!==x){var S=new pr;void 0!==x.center&&S.fromArray(x.center),r.boundingSphere=new zr(S,x.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}}]),n}(kI),Id=function(e){ne(n,e);var t=le(n);function n(e){return $(this,n),t.call(this,e)}return te(n,[{key:"load",value:function(e,t,n,i){var r=this,a=""===this.path?sd.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;var o=new NI(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){var a=null;try{a=JSON.parse(n)}catch(l){return void 0!==i&&i(l),void console.error("THREE:ObjectLoader: Can't parse "+e+".",l.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?r.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e)}),n,i)}},{key:"loadAsync",value:function(){var e=ce(de().mark((function e(t,n){var i,r,a,o,l,g;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this,r=""===this.path?sd.extractUrlBase(t):this.path,this.resourcePath=this.resourcePath||r,(a=new NI(this.manager)).setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),e.next=9,a.loadAsync(t,n);case 9:if(o=e.sent,l=JSON.parse(o),void 0!==(g=l.metadata)&&void 0!==g.type&&"geometry"!==g.type.toLowerCase()){e.next=14;break}throw new Error("THREE.ObjectLoader: Can't load "+t);case 14:return e.next=16,i.parseAsync(l);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"parse",value:function(e,t){var n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,(function(){void 0!==t&&t(g)})),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),g=this.parseObject(e.object,r,l,o,n),s=this.parseSkeletons(e.skeletons,g);if(this.bindSkeletons(g,s),void 0!==t){var c=!1;for(var u in a)if(a[u].data instanceof HTMLImageElement){c=!0;break}!1===c&&t(g)}return g}},{key:"parseAsync",value:function(){var e=ce(de().mark((function e(t){var n,i,r,a,o,l,g,s;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),e.next=5,this.parseImagesAsync(t.images);case 5:return a=e.sent,o=this.parseTextures(t.textures,a),l=this.parseMaterials(t.materials,o),g=this.parseObject(t.object,r,l,o,n),s=this.parseSkeletons(t.skeletons,g),this.bindSkeletons(g,s),e.abrupt("return",g);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseShapes",value:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var r=(new gu).fromJSON(e[n]);t[r.uuid]=r}return t}},{key:"parseSkeletons",value:function(e,t){var n={},i={};if(t.traverse((function(e){e.isBone&&(i[e.uuid]=e)})),void 0!==e)for(var r=0,a=e.length;r<a;r++){var o=(new $s).fromJSON(e[r],i);n[o.uuid]=o}return n}},{key:"parseGeometries",value:function(e,t){var n={};if(void 0!==e)for(var i=new ud,r=0,a=e.length;r<a;r++){var o=void 0,l=e[r];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(l);break;default:l.type in Qu?o=Qu[l.type].fromJSON(l,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(l.type,'"'))}o.uuid=l.uuid,void 0!==l.name&&(o.name=l.name),!0===o.isBufferGeometry&&void 0!==l.userData&&(o.userData=l.userData),n[l.uuid]=o}return n}},{key:"parseMaterials",value:function(e,t){var n={},i={};if(void 0!==e){var r=new gd;r.setTextures(t);for(var a=0,o=e.length;a<o;a++){var l=e[a];void 0===n[l.uuid]&&(n[l.uuid]=r.parse(l)),i[l.uuid]=n[l.uuid]}}return i}},{key:"parseAnimations",value:function(e){var t={};if(void 0!==e)for(var n=0;n<e.length;n++){var i=e[n],r=xI.parse(i);t[r.uuid]=r}return t}},{key:"parseImages",value:function(e,t){var n,i=this,r={};function a(e){if("string"===typeof e){var t=e;return function(e){return i.manager.itemStart(e),n.load(e,(function(){i.manager.itemEnd(e)}),void 0,(function(){i.manager.itemError(e),i.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:i.resourcePath+t)}return e.data?{data:Ti(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){var o=new RI(t);(n=new zI(o)).setCrossOrigin(this.crossOrigin);for(var l=0,g=e.length;l<g;l++){var s=e[l],c=s.url;if(Array.isArray(c)){for(var u=[],I=0,d=c.length;I<d;I++){var C=a(c[I]);null!==C&&(C instanceof HTMLImageElement?u.push(C):u.push(new Os(C.data,C.width,C.height)))}r[s.uuid]=new ar(u)}else{var h=a(s.url);r[s.uuid]=new ar(h)}}}return r}},{key:"parseImagesAsync",value:function(){var e=ce(de().mark((function e(t){var n,i,r,a,o,l,g,s,c,u,I,d,C,h,A;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=function(){return o=ce(de().mark((function e(t){var i,a;return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=8;break}return a=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(i=t)?i:n.resourcePath+i,e.next=5,r.loadAsync(a);case 5:return e.abrupt("return",e.sent);case 8:if(!t.data){e.next=12;break}return e.abrupt("return",{data:Ti(t.type,t.data),width:t.width,height:t.height});case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)},a=function(e){return o.apply(this,arguments)},n=this,i={},!(void 0!==t&&t.length>0)){e.next=33;break}(r=new zI(this.manager)).setCrossOrigin(this.crossOrigin),l=0,g=t.length;case 8:if(!(l<g)){e.next=33;break}if(s=t[l],c=s.url,!Array.isArray(c)){e.next=26;break}u=[],I=0,d=c.length;case 14:if(!(I<d)){e.next=23;break}return C=c[I],e.next=18,a(C);case 18:null!==(h=e.sent)&&(h instanceof HTMLImageElement?u.push(h):u.push(new Os(h.data,h.width,h.height)));case 20:I++,e.next=14;break;case 23:i[s.uuid]=new ar(u),e.next=30;break;case 26:return e.next=28,a(s.url);case 28:A=e.sent,i[s.uuid]=new ar(A);case 30:l++,e.next=8;break;case 33:return e.abrupt("return",i);case 34:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTextures",value:function(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var r=0,a=e.length;r<a;r++){var o=e[r];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var l=t[o.image],g=l.data,s=void 0;Array.isArray(g)?(s=new Vo,6===g.length&&(s.needsUpdate=!0)):(s=g&&g.data?new Os:new gr,g&&(s.needsUpdate=!0)),s.source=l,s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=n(o.mapping,dd)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.center&&s.center.fromArray(o.center),void 0!==o.rotation&&(s.rotation=o.rotation),void 0!==o.wrap&&(s.wrapS=n(o.wrap[0],Cd),s.wrapT=n(o.wrap[1],Cd)),void 0!==o.format&&(s.format=o.format),void 0!==o.type&&(s.type=o.type),void 0!==o.encoding&&(s.encoding=o.encoding),void 0!==o.minFilter&&(s.minFilter=n(o.minFilter,hd)),void 0!==o.magFilter&&(s.magFilter=n(o.magFilter,hd)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(s.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(s.unpackAlignment=o.unpackAlignment),void 0!==o.userData&&(s.userData=o.userData),i[o.uuid]=s}return i}},{key:"parseObject",value:function(e,t,n,i,r){var a,o,l;function g(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function s(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,r=e.length;i<r;i++){var a=e[i];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function c(e){return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),i[e]}switch(e.type){case"Scene":a=new bs,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new ir(e.background):a.background=c(e.background)),void 0!==e.environment&&(a.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new vs(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new fs(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":a=new xo(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new Qo(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new rd(e.color,e.intensity);break;case"DirectionalLight":a=new id(e.color,e.intensity);break;case"PointLight":a=new td(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new ad(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new OI(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new TI(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new ld).fromJSON(e);break;case"SkinnedMesh":o=g(e.geometry),l=s(e.material),a=new Ds(o,l),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":o=g(e.geometry),l=s(e.material),a=new fo(o,l);break;case"InstancedMesh":o=g(e.geometry),l=s(e.material);var u=e.count,I=e.instanceMatrix,d=e.instanceColor;(a=new ac(o,l,u)).instanceMatrix=new ec(new Float32Array(I.array),16),void 0!==d&&(a.instanceColor=new ec(new Float32Array(d.array),d.itemSize));break;case"LOD":a=new Ls;break;case"Line":a=new Ic(g(e.geometry),s(e.material));break;case"LineLoop":a=new Ac(g(e.geometry),s(e.material));break;case"LineSegments":a=new hc(g(e.geometry),s(e.material));break;case"PointCloud":case"Points":a=new yc(g(e.geometry),s(e.material));break;case"Sprite":a=new Hs(s(e.material));break;case"Group":a=new gs;break;case"Bone":a=new Ps;break;default:a=new fa}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children)for(var C=e.children,h=0;h<C.length;h++)a.add(this.parseObject(C[h],t,n,i,r));if(void 0!==e.animations)for(var A=e.animations,p=0;p<A.length;p++){var m=A[p];a.animations.push(r[m])}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);for(var f=e.levels,v=0;v<f.length;v++){var b=f[v],y=a.getObjectByProperty("uuid",b.object);void 0!==y&&a.addLevel(y,b.distance)}}return a}},{key:"bindSkeletons",value:function(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){var n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}]),n}(kI),dd={UVMapping:dt,CubeReflectionMapping:Ct,CubeRefractionMapping:ht,EquirectangularReflectionMapping:At,EquirectangularRefractionMapping:pt,CubeUVReflectionMapping:mt},Cd={RepeatWrapping:ft,ClampToEdgeWrapping:vt,MirroredRepeatWrapping:bt},hd={NearestFilter:yt,NearestMipmapNearestFilter:Gt,NearestMipmapLinearFilter:Zt,LinearFilter:xt,LinearMipmapNearestFilter:St,LinearMipmapLinearFilter:Vt},Ad=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this,e)).isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),i.options={premultiplyAlpha:"none"},i}return te(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=VI.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){VI.add(e,n),t&&t(n),r.manager.itemEnd(e)})).catch((function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)}}]),n}(kI),pd={getContext:function(){return void 0===WI&&(WI=new(window.AudioContext||window.webkitAudioContext)),WI},setContext:function(e){WI=e}},md=function(e){ne(n,e);var t=le(n);function n(e){return $(this,n),t.call(this,e)}return te(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new NI(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{var a=n.slice(0);pd.getContext().decodeAudioData(a,(function(e){t(e)}))}catch(o){i?i(o):console.error(o),r.manager.itemError(e)}}),n,i)}}]),n}(kI),fd=function(e){ne(n,e);var t=le(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;$(this,n),(r=t.call(this,void 0,a)).isHemisphereLightProbe=!0;var o=(new ir).set(e),l=(new ir).set(i),g=new pr(o.r,o.g,o.b),s=new pr(l.r,l.g,l.b),c=Math.sqrt(Math.PI),u=c*Math.sqrt(.75);return r.sh.coefficients[0].copy(g).add(s).multiplyScalar(c),r.sh.coefficients[1].copy(g).sub(s).multiplyScalar(u),r}return te(n)}(ld),vd=function(e){ne(n,e);var t=le(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;$(this,n),(i=t.call(this,void 0,r)).isAmbientLightProbe=!0;var a=(new ir).set(e);return i.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI)),i}return te(n)}(ld),bd=new Dr,yd=new Dr,Gd=new Dr,Bd=function(){function e(){$(this,e),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new xo,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new xo,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return te(e,[{key:"update",value:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Gd.copy(e.projectionMatrix);var n,i,r=t.eyeSep/2,a=r*t.near/t.focus,o=t.near*Math.tan(Si*t.fov*.5)/t.zoom;yd.elements[12]=-r,bd.elements[12]=r,n=-o*t.aspect+a,i=o*t.aspect+a,Gd.elements[0]=2*t.near/(i-n),Gd.elements[8]=(i+n)/(i-n),this.cameraL.projectionMatrix.copy(Gd),n=-o*t.aspect-a,i=o*t.aspect-a,Gd.elements[0]=2*t.near/(i-n),Gd.elements[8]=(i+n)/(i-n),this.cameraR.projectionMatrix.copy(Gd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(yd),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(bd)}}]),e}(),Zd=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];$(this,e),this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return te(e,[{key:"start",value:function(){this.startTime=wd(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=wd();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}]),e}();function wd(){return("undefined"===typeof performance?Date:performance).now()}var xd=new pr,Sd=new Ar,Wd=new pr,Vd=new pr,Rd=function(e){ne(n,e);var t=le(n);function n(){var e;return $(this,n),(e=t.call(this)).type="AudioListener",e.context=pd.getContext(),e.gain=e.context.createGain(),e.gain.connect(e.context.destination),e.filter=null,e.timeDelta=0,e._clock=new Zd,e}return te(n,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(e){Ie(ie(n.prototype),"updateMatrixWorld",this).call(this,e);var t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(xd,Sd,Wd),Vd.set(0,0,-1).applyQuaternion(Sd),t.positionX){var r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(xd.x,r),t.positionY.linearRampToValueAtTime(xd.y,r),t.positionZ.linearRampToValueAtTime(xd.z,r),t.forwardX.linearRampToValueAtTime(Vd.x,r),t.forwardY.linearRampToValueAtTime(Vd.y,r),t.forwardZ.linearRampToValueAtTime(Vd.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(xd.x,xd.y,xd.z),t.setOrientation(Vd.x,Vd.y,Vd.z,i.x,i.y,i.z)}}]),n}(fa),qd=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this)).type="Audio",i.listener=e,i.context=e.context,i.gain=i.context.createGain(),i.gain.connect(e.getInput()),i.autoplay=!1,i.buffer=null,i.detune=0,i.loop=!1,i.loopStart=0,i.loopEnd=0,i.offset=0,i.duration=void 0,i.playbackRate=1,i.isPlaying=!1,i.hasPlaybackControl=!0,i.source=null,i.sourceType="empty",i._startedAt=0,i._progress=0,i._connected=!1,i.filters=[],i}return te(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(fa),kd=new pr,Xd=new Ar,Yd=new pr,Nd=new pr,Kd=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this,e)).panner=i.context.createPanner(),i.panner.panningModel="HRTF",i.panner.connect(i.gain),i}return te(n,[{key:"disconnect",value:function(){Ie(ie(n.prototype),"disconnect",this).call(this),this.panner.disconnect(this.gain)}},{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(e){return this.panner.refDistance=e,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(e){return this.panner.rolloffFactor=e,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(e){return this.panner.distanceModel=e,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(e){return this.panner.maxDistance=e,this}},{key:"setDirectionalCone",value:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}},{key:"updateMatrixWorld",value:function(e){if(Ie(ie(n.prototype),"updateMatrixWorld",this).call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(kd,Xd,Yd),Nd.set(0,0,1).applyQuaternion(Xd);var t=this.panner;if(t.positionX){var i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(kd.x,i),t.positionY.linearRampToValueAtTime(kd.y,i),t.positionZ.linearRampToValueAtTime(kd.z,i),t.orientationX.linearRampToValueAtTime(Nd.x,i),t.orientationY.linearRampToValueAtTime(Nd.y,i),t.orientationZ.linearRampToValueAtTime(Nd.z,i)}else t.setPosition(kd.x,kd.y,kd.z),t.setOrientation(Nd.x,Nd.y,Nd.z)}}}]),n}(qd),Hd=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;$(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return te(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}(),zd=function(){function e(t,n,i){var r,a,o;switch($(this,e),this.binding=t,this.valueSize=i,n){case"quaternion":r=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return te(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=t}else{var l=t/(a+=t);this._mixBufferRegion(n,r,0,l,i)}this.cumulativeWeight=a}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){var l=t*this._origIndex;this._mixBufferRegion(n,i,l,1-r,t)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(var g=t,s=t+t;g!==s;++g)if(n[g]!==n[g+t]){o.setValue(n,i);break}}},{key:"saveOriginalState",value:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(var r=n,a=i;r!==a;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,i,r){if(i>=.5)for(var a=0;a!==r;++a)e[t+a]=e[n+a]}},{key:"_slerp",value:function(e,t,n,i){Ar.slerpFlat(e,t,e,t,e,n,i)}},{key:"_slerpAdditive",value:function(e,t,n,i,r){var a=this._workIndex*r;Ar.multiplyQuaternionsFlat(e,a,e,t,e,n),Ar.slerpFlat(e,t,e,t,e,a,i)}},{key:"_lerp",value:function(e,t,n,i,r){for(var a=1-i,o=0;o!==r;++o){var l=t+o;e[l]=e[l]*a+e[n+o]*i}}},{key:"_lerpAdditive",value:function(e,t,n,i,r){for(var a=0;a!==r;++a){var o=t+a;e[o]=e[o]+e[n+a]*i}}}]),e}(),Md="\\[\\]\\.:\\/",Fd=new RegExp("[\\[\\]\\.:\\/]","g"),Ld="[^\\[\\]\\.:\\/]",_d="[^"+Md.replace("\\.","")+"]",Td=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Ld)+/(WCOD+)?/.source.replace("WCOD",_d)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ld)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ld)+"$"),Ed=["material","materials","bones","map"],Jd=function(){function e(t,n,i){$(this,e);var r=i||Ud.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,r)}return te(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),Ud=function(){function e(t,n,i){$(this,e),this.path=n,this.parsedPath=i||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return te(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,i=n.objectName,r=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(i){var o=n.objectIndex;switch(i){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var l=0;l<t.length;l++)if(t[l].name===o){o=l;break}break;case"map":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var g=t[r];if(void 0!==g){var s=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=g,this.propertyIndex=a}else void 0!==g.fromArray&&void 0!==g.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=g):Array.isArray(g)?(c=this.BindingType.EntireArray,this.resolvedProperty=g):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][s]}else{var u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,i){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,i):new e(t,n,i)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(Fd,"")}},{key:"parseTrackName",value:function(e){var t=Td.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==Ed.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function e(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.name===t||r.uuid===t)return r;var a=e(r.children);if(a)return a}return null}(e.children);if(i)return i}return null}}]),e}();Ud.Composite=Jd,Ud.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Ud.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Ud.prototype.GetterByBindingType=[Ud.prototype._getValue_direct,Ud.prototype._getValue_array,Ud.prototype._getValue_arrayElement,Ud.prototype._getValue_toArray],Ud.prototype.SetterByBindingTypeAndVersioning=[[Ud.prototype._setValue_direct,Ud.prototype._setValue_direct_setNeedsUpdate,Ud.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ud.prototype._setValue_array,Ud.prototype._setValue_array_setNeedsUpdate,Ud.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ud.prototype._setValue_arrayElement,Ud.prototype._setValue_arrayElement_setNeedsUpdate,Ud.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ud.prototype._setValue_fromArray,Ud.prototype._setValue_fromArray_setNeedsUpdate,Ud.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Dd=function(){function e(){$(this,e),this.isAnimationObjectGroup=!0,this.uuid=Vi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,i=arguments.length;n!==i;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}return te(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length,o=void 0,l=e.length,g=this.nCachedObjects_,s=0,c=arguments.length;s!==c;++s){var u=arguments[s],I=u.uuid,d=t[I];if(void 0===d){d=l++,t[I]=d,e.push(u);for(var C=0,h=a;C!==h;++C)r[C].push(new Ud(u,n[C],i[C]))}else if(d<g){o=e[d];var A=--g,p=e[A];t[p.uuid]=d,e[d]=p,t[I]=A,e[A]=u;for(var m=0,f=a;m!==f;++m){var v=r[m],b=v[A],y=v[d];v[d]=b,void 0===y&&(y=new Ud(u,n[m],i[m])),v[A]=y}}else e[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=g}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var l=arguments[a],g=l.uuid,s=t[g];if(void 0!==s&&s>=r){var c=r++,u=e[c];t[u.uuid]=s,e[s]=u,t[g]=c,e[c]=l;for(var I=0,d=i;I!==d;++I){var C=n[I],h=C[c],A=C[s];C[s]=h,C[c]=A}}}this.nCachedObjects_=r}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=e.length,o=0,l=arguments.length;o!==l;++o){var g=arguments[o],s=g.uuid,c=t[s];if(void 0!==c)if(delete t[s],c<r){var u=--r,I=e[u],d=--a,C=e[d];t[I.uuid]=c,e[c]=I,t[C.uuid]=u,e[u]=C,e.pop();for(var h=0,A=i;h!==A;++h){var p=n[h],m=p[u],f=p[d];p[c]=m,p[u]=f,p.pop()}}else{var v=--a,b=e[v];v>0&&(t[b.uuid]=c),e[c]=b,e.pop();for(var y=0,G=i;y!==G;++y){var B=n[y];B[c]=B[v],B.pop()}}}this.nCachedObjects_=r}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,o=this._parsedPaths,l=this._objects,g=l.length,s=this.nCachedObjects_,c=new Array(g);i=r.length,n[e]=i,a.push(e),o.push(t),r.push(c);for(var u=s,I=l.length;u!==I;++u){var d=l[u];c[u]=new Ud(d,e,t)}return c}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,l=a[o];t[e[o]]=n,a[n]=l,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}]),e}(),Pd=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;$(this,e),this._mixer=t,this._clip=n,this._localRoot=i,this.blendMode=r;for(var a=n.tracks,o=a.length,l=new Array(o),g={endingStart:Xn,endingEnd:Xn},s=0;s!==o;++s){var c=a[s].createInterpolant(null);l[s]=c,c.settings=g}this._interpolantSettings=g,this._interpolants=l,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Wn,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return te(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,a=r/i,o=i/r;e.warp(1,a,t),this.warp(o,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var i=this._mixer,r=i.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var l=o.parameterPositions,g=o.sampleValues;return l[0]=r,l[1]=r+n,g[0]=e/a,g[1]=t/a,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var a=(e-r)*n;a<0||0===n?t=0:(this._startTime=null,t=n*a)}t*=this._updateTimeScale(e);var o=this._updateTime(t),l=this._updateWeight(e);if(l>0){var g=this._interpolants,s=this._propertyBindings;if(this.blendMode===Hn)for(var c=0,u=g.length;c!==u;++c)g[c].evaluate(o),s[c].accumulateAdditive(l);else for(var I=0,d=g.length;I!==d;++I)g[I].evaluate(o),s[I].accumulate(i,l)}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,i=this.time+e,r=this._loopCount,a=n===Vn;if(0===e)return-1===r?i:a&&1===(1&r)?t-i:i;if(n===Sn){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=t||i<0){var o=Math.floor(i/t);i-=t*o,r+=Math.abs(o);var l=this.repetitions-r;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===l){var g=e<0;this._setEndings(g,!g,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&1===(1&r))return t-i}return i}},{key:"_setEndings",value:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=Yn,i.endingEnd=Yn):(i.endingStart=e?this.zeroSlopeAtStart?Yn:Xn:Nn,i.endingEnd=t?this.zeroSlopeAtEnd?Yn:Xn:Nn)}},{key:"_scheduleFading",value:function(e,t,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,l=a.sampleValues;return o[0]=r,l[0]=t,o[1]=r+e,l[1]=n,this}}]),e}(),Od=new Float32Array(1),Qd=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this))._root=e,i._initMemoryManager(),i._accuIndex=0,i.time=0,i.timeScale=1,i}return te(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,o=e._interpolants,l=n.uuid,g=this._bindingsByRootAndName,s=g[l];void 0===s&&(s={},g[l]=s);for(var c=0;c!==r;++c){var u=i[c],I=u.name,d=s[I];if(void 0!==d)++d.referenceCount,a[c]=d;else{if(void 0!==(d=a[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,l,I));continue}var C=t&&t._propertyBindings[c].binding.parsedPath;++(d=new zd(Ud.create(n,I,C),u.ValueTypeName,u.getValueSize())).referenceCount,this._addInactiveBinding(d,l,I),a[c]=d}o[c].resultBuffer=d.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,a=0,o=r.length;a!==o;++a){var l=r[a];0===l.useCount++&&(this._lendBinding(l),l.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var i=this._actions,r=this._actionsByClip,a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,a=this._actionsByClip,o=a[r],l=o.knownActions,g=l[l.length-1],s=e._byClipCacheIndex;g._byClipCacheIndex=s,l[s]=g,l.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===l.length&&delete a[r],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0===--r.referenceCount&&this._removeInactiveBinding(r)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_addInactiveBinding",value:function(e,t,n){var i=this._bindingsByRootAndName,r=this._bindings,a=i[t];void 0===a&&(a={},i[t]=a),a[n]=e,e._cacheIndex=r.length,r.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],l=t[t.length-1],g=e._cacheIndex;l._cacheIndex=g,t[g]=l,t.pop(),delete o[r],0===Object.keys(o).length&&delete a[i]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new pI(new Float32Array(2),new Float32Array(2),1,Od)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}},{key:"clipAction",value:function(e,t,n){var i=t||this._root,r=i.uuid,a="string"===typeof e?xI.findByName(i,e):e,o=null!==a?a.uuid:e,l=this._actionsByClip[o],g=null;if(void 0===n&&(n=null!==a?a.blendMode:Kn),void 0!==l){var s=l.actionByRoot[r];if(void 0!==s&&s.blendMode===n)return s;g=l.knownActions[0],null===a&&(a=g._clip)}if(null===a)return null;var c=new Pd(this,a,t,n);return this._bindAction(c,g),this._addInactiveAction(c,o,r),c}},{key:"existingAction",value:function(e,t){var n=t||this._root,i=n.uuid,r="string"===typeof e?xI.findByName(n,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){t[o]._update(i,e,r,a)}for(var l=this._bindings,g=this._nActiveBindings,s=0;s!==g;++s)l[s].apply(a);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,l=a.length;o!==l;++o){var g=a[o];this._deactivateAction(g);var s=g._cacheIndex,c=t[t.length-1];g._cacheIndex=null,g._byClipCacheIndex=null,c._cacheIndex=s,t[s]=c,t.pop(),this._removeInactiveBindingsForAction(g)}delete i[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var l=a[o];l.restoreOriginalState(),this._removeInactiveBinding(l)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(Zi),jd=function(){function e(t){$(this,e),this.value=t}return te(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}(),$d=0,eC=function(e){ne(n,e);var t=le(n);function n(){var e;return $(this,n),(e=t.call(this)).isUniformsGroup=!0,Object.defineProperty(ae(e),"id",{value:$d++}),e.name="",e.usage=di,e.uniforms=[],e}return te(n,[{key:"add",value:function(e){return this.uniforms.push(e),this}},{key:"remove",value:function(e){var t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}},{key:"setName",value:function(e){return this.name=e,this}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"dispose",value:function(){return this.dispatchEvent({type:"dispose"}),this}},{key:"copy",value:function(e){this.name=e.name,this.usage=e.usage;var t=e.uniforms;this.uniforms.length=0;for(var n=0,i=t.length;n<i;n++)this.uniforms.push(t[n].clone());return this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Zi),tC=function(e){ne(n,e);var t=le(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return $(this,n),(r=t.call(this,e,i)).isInstancedInterleavedBuffer=!0,r.meshPerAttribute=a,r}return te(n,[{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=Ie(ie(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=Ie(ie(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(ys),nC=function(){function e(t,n,i,r,a){$(this,e),this.isGLBufferAttribute=!0,this.buffer=t,this.type=n,this.itemSize=i,this.elementSize=r,this.count=a,this.version=0}return te(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}(),iC=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;$(this,e),this.ray=new Ur(t,n),this.near=i,this.far=r,this.camera=null,this.layers=new aa,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return te(e,[{key:"set",value:function(e,t){this.ray.set(e,t)}},{key:"setFromCamera",value:function(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}},{key:"intersectObject",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return aC(e,this,n,t),n.sort(rC),n}},{key:"intersectObjects",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=0,r=e.length;i<r;i++)aC(e[i],this,n,t);return n.sort(rC),n}}]),e}();function rC(e,t){return e.distance-t.distance}function aC(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i)for(var r=e.children,a=0,o=r.length;a<o;a++)aC(r[a],t,n,!0)}var oC=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return $(this,e),this.radius=t,this.phi=n,this.theta=i,this}return te(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Ri(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),lC=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return $(this,e),this.radius=t,this.theta=n,this.y=i,this}return te(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),gC=new Mi,sC=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Mi(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mi(-1/0,-1/0);$(this,e),this.isBox2=!0,this.min=t,this.max=n}return te(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=gC.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return gC.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}(),cC=new pr,uC=new pr,IC=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pr;$(this,e),this.start=t,this.end=n}return te(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){cC.subVectors(e,this.start),uC.subVectors(this.end,this.start);var n=uC.dot(uC),i=uC.dot(cC)/n;return t&&(i=Ri(i,0,1)),i}},{key:"closestPointToPoint",value:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),dC=new pr,CC=function(e){ne(n,e);var t=le(n);function n(e,i){var r;$(this,n),(r=t.call(this)).light=e,r.light.updateMatrixWorld(),r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r.color=i;for(var a=new eo,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],l=0,g=1;l<32;l++,g++){var s=l/32*Math.PI*2,c=g/32*Math.PI*2;o.push(Math.cos(s),Math.sin(s),1,Math.cos(c),Math.sin(c),1)}a.setAttribute("position",new Ea(o,3));var u=new oc({fog:!1,toneMapped:!1});return r.cone=new hc(a,u),r.add(r.cone),r.update(),r}return te(n,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),dC.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(dC),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),n}(fa),hC=new pr,AC=new Dr,pC=new Dr,mC=function(e){ne(n,e);var t=le(n);function n(e){var i;$(this,n);for(var r=fC(e),a=new eo,o=[],l=[],g=new ir(0,0,1),s=new ir(0,1,0),c=0;c<r.length;c++){var u=r[c];u.parent&&u.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),l.push(g.r,g.g,g.b),l.push(s.r,s.g,s.b))}a.setAttribute("position",new Ea(o,3)),a.setAttribute("color",new Ea(l,3));var I=new oc({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(i=t.call(this,a,I)).isSkeletonHelper=!0,i.type="SkeletonHelper",i.root=e,i.bones=r,i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i}return te(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,i=this.geometry,r=i.getAttribute("position");pC.copy(this.root.matrixWorld).invert();for(var a=0,o=0;a<t.length;a++){var l=t[a];l.parent&&l.parent.isBone&&(AC.multiplyMatrices(pC,l.matrixWorld),hC.setFromMatrixPosition(AC),r.setXYZ(o,hC.x,hC.y,hC.z),AC.multiplyMatrices(pC,l.parent.matrixWorld),hC.setFromMatrixPosition(AC),r.setXYZ(o+1,hC.x,hC.y,hC.z),o+=2)}i.getAttribute("position").needsUpdate=!0,Ie(ie(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(hc);function fC(e){var t=[];!0===e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,fC(e.children[n]));return t}var vC=function(e){ne(n,e);var t=le(n);function n(e,i,r){var a;$(this,n);var o=new Tu(i,4,2),l=new ka({wireframe:!0,fog:!1,toneMapped:!1});return(a=t.call(this,o,l)).light=e,a.light.updateMatrixWorld(),a.color=r,a.type="PointLightHelper",a.matrix=a.light.matrixWorld,a.matrixAutoUpdate=!1,a.update(),a}return te(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),n}(fo),bC=new pr,yC=new ir,GC=new ir,BC=function(e){ne(n,e);var t=le(n);function n(e,i,r){var a;$(this,n),(a=t.call(this)).light=e,a.light.updateMatrixWorld(),a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=r;var o=new Fu(i);o.rotateY(.5*Math.PI),a.material=new ka({wireframe:!0,fog:!1,toneMapped:!1}),void 0===a.color&&(a.material.vertexColors=!0);var l=o.getAttribute("position"),g=new Float32Array(3*l.count);return o.setAttribute("color",new Na(g,3)),a.add(new fo(o,a.material)),a.update(),a}return te(n,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");yC.copy(this.light.color),GC.copy(this.light.groundColor);for(var n=0,i=t.count;n<i;n++){var r=n<i/2?yC:GC;t.setXYZ(n,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(bC.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),n}(fa),ZC=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;$(this,n),a=new ir(a),o=new ir(o);for(var l=r/2,g=i/r,s=i/2,c=[],u=[],I=0,d=0,C=-s;I<=r;I++,C+=g){c.push(-s,0,C,s,0,C),c.push(C,0,-s,C,0,s);var h=I===l?a:o;h.toArray(u,d),d+=3,h.toArray(u,d),d+=3,h.toArray(u,d),d+=3,h.toArray(u,d),d+=3}var A=new eo;A.setAttribute("position",new Ea(c,3)),A.setAttribute("color",new Ea(u,3));var p=new oc({vertexColors:!0,toneMapped:!1});return(e=t.call(this,A,p)).type="GridHelper",e}return te(n)}(hc),wC=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;$(this,n),l=new ir(l),g=new ir(g);var s=[],c=[];if(r>1)for(var u=0;u<r;u++){var I=u/r*(2*Math.PI),d=Math.sin(I)*i,C=Math.cos(I)*i;s.push(0,0,0),s.push(d,0,C);var h=1&u?l:g;c.push(h.r,h.g,h.b),c.push(h.r,h.g,h.b)}for(var A=0;A<a;A++)for(var p=1&A?l:g,m=i-i/a*A,f=0;f<o;f++){var v=f/o*(2*Math.PI),b=Math.sin(v)*m,y=Math.cos(v)*m;s.push(b,0,y),c.push(p.r,p.g,p.b),v=(f+1)/o*(2*Math.PI),b=Math.sin(v)*m,y=Math.cos(v)*m,s.push(b,0,y),c.push(p.r,p.g,p.b)}var G=new eo;G.setAttribute("position",new Ea(s,3)),G.setAttribute("color",new Ea(c,3));var B=new oc({vertexColors:!0,toneMapped:!1});return(e=t.call(this,G,B)).type="PolarGridHelper",e}return te(n)}(hc),xC=new pr,SC=new pr,WC=new pr,VC=function(e){ne(n,e);var t=le(n);function n(e,i,r){var a;$(this,n),(a=t.call(this)).light=e,a.light.updateMatrixWorld(),a.matrix=e.matrixWorld,a.matrixAutoUpdate=!1,a.color=r,void 0===i&&(i=1);var o=new eo;o.setAttribute("position",new Ea([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));var l=new oc({fog:!1,toneMapped:!1});return a.lightPlane=new Ic(o,l),a.add(a.lightPlane),(o=new eo).setAttribute("position",new Ea([0,0,0,0,0,1],3)),a.targetLine=new Ic(o,l),a.add(a.targetLine),a.update(),a}return te(n,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){xC.setFromMatrixPosition(this.light.matrixWorld),SC.setFromMatrixPosition(this.light.target.matrixWorld),WC.subVectors(SC,xC),this.lightPlane.lookAt(SC),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(SC),this.targetLine.scale.z=WC.length()}}]),n}(fa),RC=new pr,qC=new wo,kC=function(e){ne(n,e);var t=le(n);function n(e){var i;$(this,n);var r=new eo,a=new oc({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],l=[],g={};function s(e,t){c(e),c(t)}function c(e){o.push(0,0,0),l.push(0,0,0),void 0===g[e]&&(g[e]=[]),g[e].push(o.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),r.setAttribute("position",new Ea(o,3)),r.setAttribute("color",new Ea(l,3)),(i=t.call(this,r,a)).type="CameraHelper",i.camera=e,i.camera.updateProjectionMatrix&&i.camera.updateProjectionMatrix(),i.matrix=e.matrixWorld,i.matrixAutoUpdate=!1,i.pointMap=g,i.update();var u=new ir(16755200),I=new ir(16711680),d=new ir(43775),C=new ir(16777215),h=new ir(3355443);return i.setColors(u,I,d,C,h),i}return te(n,[{key:"setColors",value:function(e,t,n,i,r){var a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,r.r,r.g,r.b),a.setXYZ(41,r.r,r.g,r.b),a.setXYZ(42,r.r,r.g,r.b),a.setXYZ(43,r.r,r.g,r.b),a.setXYZ(44,r.r,r.g,r.b),a.setXYZ(45,r.r,r.g,r.b),a.setXYZ(46,r.r,r.g,r.b),a.setXYZ(47,r.r,r.g,r.b),a.setXYZ(48,r.r,r.g,r.b),a.setXYZ(49,r.r,r.g,r.b),a.needsUpdate=!0}},{key:"update",value:function(){var e=this.geometry,t=this.pointMap;qC.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),XC("c",t,e,qC,0,0,-1),XC("t",t,e,qC,0,0,1),XC("n1",t,e,qC,-1,-1,-1),XC("n2",t,e,qC,1,-1,-1),XC("n3",t,e,qC,-1,1,-1),XC("n4",t,e,qC,1,1,-1),XC("f1",t,e,qC,-1,-1,1),XC("f2",t,e,qC,1,-1,1),XC("f3",t,e,qC,-1,1,1),XC("f4",t,e,qC,1,1,1),XC("u1",t,e,qC,.7,1.1,-1),XC("u2",t,e,qC,-.7,1.1,-1),XC("u3",t,e,qC,0,2,-1),XC("cf1",t,e,qC,-1,0,1),XC("cf2",t,e,qC,1,0,1),XC("cf3",t,e,qC,0,-1,1),XC("cf4",t,e,qC,0,1,1),XC("cn1",t,e,qC,-1,0,-1),XC("cn2",t,e,qC,1,0,-1),XC("cn3",t,e,qC,0,-1,-1),XC("cn4",t,e,qC,0,1,-1),e.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(hc);function XC(e,t,n,i,r,a,o){RC.set(r,a,o).unproject(i);var l=t[e];if(void 0!==l)for(var g=n.getAttribute("position"),s=0,c=l.length;s<c;s++)g.setXYZ(l[s],RC.x,RC.y,RC.z)}var YC,NC,KC=new vr,HC=function(e){ne(n,e);var t=le(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;$(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(24),l=new eo;return l.setIndex(new Na(a,1)),l.setAttribute("position",new Na(o,3)),(i=t.call(this,l,new oc({color:r,toneMapped:!1}))).object=e,i.type="BoxHelper",i.matrixAutoUpdate=!1,i.update(),i}return te(n,[{key:"update",value:function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&KC.setFromObject(this.object),!KC.isEmpty()){var t=KC.min,n=KC.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(e){return this.object=e,this.update(),this}},{key:"copy",value:function(e,t){return Ie(ie(n.prototype),"copy",this).call(this,e,t),this.object=e.object,this}}]),n}(hc),zC=function(e){ne(n,e);var t=le(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;$(this,n);var a=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],l=new eo;return l.setIndex(new Na(a,1)),l.setAttribute("position",new Ea(o,3)),(i=t.call(this,l,new oc({color:r,toneMapped:!1}))).box=e,i.type="Box3Helper",i.geometry.computeBoundingSphere(),i}return te(n,[{key:"updateMatrixWorld",value:function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),Ie(ie(n.prototype),"updateMatrixWorld",this).call(this,e))}}]),n}(hc),MC=function(e){ne(n,e);var t=le(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;$(this,n);var o=a,l=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],g=new eo;g.setAttribute("position",new Ea(l,3)),g.computeBoundingSphere(),(i=t.call(this,g,new oc({color:o,toneMapped:!1}))).type="PlaneHelper",i.plane=e,i.size=r;var s=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new eo;return c.setAttribute("position",new Ea(s,3)),c.computeBoundingSphere(),i.add(new fo(c,new ka({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),i}return te(n,[{key:"updateMatrixWorld",value:function(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),Ie(ie(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(Ic),FC=new pr,LC=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new pr(0,0,1),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new pr(0,0,0),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*a,g=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*l;return $(this,n),(e=t.call(this)).type="ArrowHelper",void 0===YC&&((YC=new eo).setAttribute("position",new Ea([0,0,0,0,1,0],3)),(NC=new $c(0,.5,1,5,1)).translate(0,-.5,0)),e.position.copy(r),e.line=new Ic(YC,new oc({color:o,toneMapped:!1})),e.line.matrixAutoUpdate=!1,e.add(e.line),e.cone=new fo(NC,new ka({color:o,toneMapped:!1})),e.cone.matrixAutoUpdate=!1,e.add(e.cone),e.setDirection(i),e.setLength(a,l,g),e}return te(n,[{key:"setDirection",value:function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{FC.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(FC,t)}}},{key:"setLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}},{key:"setColor",value:function(e){this.line.material.color.set(e),this.cone.material.color.set(e)}},{key:"copy",value:function(e){return Ie(ie(n.prototype),"copy",this).call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}]),n}(fa),_C=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;$(this,n);var r=[0,0,0,i,0,0,0,0,0,0,i,0,0,0,0,0,0,i],a=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],o=new eo;o.setAttribute("position",new Ea(r,3)),o.setAttribute("color",new Ea(a,3));var l=new oc({vertexColors:!0,toneMapped:!1});return(e=t.call(this,o,l)).type="AxesHelper",e}return te(n,[{key:"setColors",value:function(e,t,n){var i=new ir,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(hc),TC=function(){function e(){$(this,e),this.type="ShapePath",this.color=new ir,this.subPaths=[],this.currentPath=null}return te(e,[{key:"moveTo",value:function(e,t){return this.currentPath=new Pc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}},{key:"lineTo",value:function(e,t){return this.currentPath.lineTo(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}},{key:"bezierCurveTo",value:function(e,t,n,i,r,a){return this.currentPath.bezierCurveTo(e,t,n,i,r,a),this}},{key:"splineThru",value:function(e){return this.currentPath.splineThru(e),this}},{key:"toShapes",value:function(e){function t(e,t){for(var n=t.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=t[r],l=t[a],g=l.x-o.x,s=l.y-o.y;if(Math.abs(s)>Number.EPSILON){if(s<0&&(o=t[a],g=-g,l=t[r],s=-s),e.y<o.y||e.y>l.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=s*(e.x-o.x)-g*(e.y-o.y);if(0===c)return!0;if(c<0)continue;i=!i}}else{if(e.y!==o.y)continue;if(l.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=l.x)return!0}}return i}var n,i,r,a=Yu.isClockWise,o=this.subPaths;if(0===o.length)return[];var l=[];if(1===o.length)return i=o[0],(r=new gu).curves=i.curves,l.push(r),l;var g=!a(o[0].getPoints());g=e?!g:g;var s,c,u=[],I=[],d=[],C=0;I[C]=void 0,d[C]=[];for(var h=0,A=o.length;h<A;h++)n=a(s=(i=o[h]).getPoints()),(n=e?!n:n)?(!g&&I[C]&&C++,I[C]={s:new gu,p:s},I[C].s.curves=i.curves,g&&C++,d[C]=[]):d[C].push({h:i,p:s[0]});if(!I[0])return function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],a=new gu;a.curves=r.curves,t.push(a)}return t}(o);if(I.length>1){for(var p=!1,m=0,f=0,v=I.length;f<v;f++)u[f]=[];for(var b=0,y=I.length;b<y;b++)for(var G=d[b],B=0;B<G.length;B++){for(var Z=G[B],w=!0,x=0;x<I.length;x++)t(Z.p,I[x].p)&&(b!==x&&m++,w?(w=!1,u[x].push(Z)):p=!0);w&&u[b].push(Z)}m>0&&!1===p&&(d=u)}for(var S=0,W=I.length;S<W;S++){r=I[S].s,l.push(r);for(var V=0,R=(c=d[S]).length;V<R;V++)r.holes.push(c[V].h)}return l}}]),e}(),EC=JC();function JC(){for(var e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),r=new Uint32Array(512),a=0;a<256;++a){var o=a-127;o<-27?(i[a]=0,i[256|a]=32768,r[a]=24,r[256|a]=24):o<-14?(i[a]=1024>>-o-14,i[256|a]=1024>>-o-14|32768,r[a]=-o-1,r[256|a]=-o-1):o<=15?(i[a]=o+15<<10,i[256|a]=o+15<<10|32768,r[a]=13,r[256|a]=13):o<128?(i[a]=31744,i[256|a]=64512,r[a]=24,r[256|a]=24):(i[a]=31744,i[256|a]=64512,r[a]=13,r[256|a]=13)}for(var l=new Uint32Array(2048),g=new Uint32Array(64),s=new Uint32Array(64),c=1;c<1024;++c){for(var u=c<<13,I=0;0===(8388608&u);)u<<=1,I-=8388608;u&=-8388609,I+=947912704,l[c]=u|I}for(var d=1024;d<2048;++d)l[d]=939524096+(d-1024<<13);for(var C=1;C<31;++C)g[C]=C<<23;g[31]=1199570944,g[32]=2147483648;for(var h=33;h<63;++h)g[h]=2147483648+(h-32<<23);g[63]=3347054592;for(var A=1;A<64;++A)32!==A&&(s[A]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:l,exponentTable:g,offsetTable:s}}var UC=Object.freeze({__proto__:null,toHalfFloat:function(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Ri(e,-65504,65504),EC.floatView[0]=e;var t=EC.uint32View[0],n=t>>23&511;return EC.baseTable[n]+((8388607&t)>>EC.shiftTable[n])},fromHalfFloat:function(e){var t=e>>10;return EC.uint32View[0]=EC.mantissaTable[EC.offsetTable[t]+(1023&e)]+EC.exponentTable[t],EC.floatView[0]}});function DC(){console.error("THREE.ImmediateRenderObject has been removed.")}var PC=function(e){ne(n,e);var t=le(n);function n(e,i,r){var a;return $(this,n),console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),(a=t.call(this,e,i,r)).samples=4,a}return te(n)}(cr),OC=function(e){ne(n,e);var t=le(n);function n(e,i,r,a){return $(this,n),console.warn("THREE.DataTexture2DArray has been renamed to DataArrayTexture."),t.call(this,e,i,r,a)}return te(n)}(ur),QC=function(e){ne(n,e);var t=le(n);function n(e,i,r,a){return $(this,n),console.warn("THREE.DataTexture3D has been renamed to Data3DTexture."),t.call(this,e,i,r,a)}return te(n)}(dr),jC=function(e){ne(n,e);var t=le(n);function n(e,i,r,a,o,l){return $(this,n),console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),t.call(this,e,i,r,a,o,l)}return te(n)}(bo),$C=function(e){ne(n,e);var t=le(n);function n(e,i,r,a){return $(this,n),console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),t.call(this,e,i,r,a)}return te(n)}(Qc),eh=function(e){ne(n,e);var t=le(n);function n(e,i,r,a){return $(this,n),console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),t.call(this,e,i,r,a)}return te(n)}(jc),th=function(e){ne(n,e);var t=le(n);function n(e,i,r,a,o,l,g){return $(this,n),console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),t.call(this,e,i,r,a,o,l,g)}return te(n)}(eu),nh=function(e){ne(n,e);var t=le(n);function n(e,i,r,a,o,l,g,s){return $(this,n),console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),t.call(this,e,i,r,a,o,l,g,s)}return te(n)}($c),ih=function(e){ne(n,e);var t=le(n);function n(e,i){return $(this,n),console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),t.call(this,e,i)}return te(n)}(nu),rh=function(e){ne(n,e);var t=le(n);function n(e,i){return $(this,n),console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),t.call(this,e,i)}return te(n)}(Hu),ah=function(e){ne(n,e);var t=le(n);function n(e,i){return $(this,n),console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),t.call(this,e,i)}return te(n)}(Mu),oh=function(e){ne(n,e);var t=le(n);function n(e,i,r,a){return $(this,n),console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),t.call(this,e,i,r,a)}return te(n)}(Oc),lh=function(e){ne(n,e);var t=le(n);function n(e,i){return $(this,n),console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),t.call(this,e,i)}return te(n)}(Fu),gh=function(e){ne(n,e);var t=le(n);function n(e,i,r,a){return $(this,n),console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),t.call(this,e,i,r,a)}return te(n)}(Fo),sh=function(e){ne(n,e);var t=le(n);function n(e,i,r,a){return $(this,n),console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),t.call(this,e,i,r,a)}return te(n)}(tu),ch=function(e){ne(n,e);var t=le(n);function n(e,i,r,a,o,l){return $(this,n),console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),t.call(this,e,i,r,a,o,l)}return te(n)}(Lu),uh=function(e){ne(n,e);var t=le(n);function n(e,i){return $(this,n),console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),t.call(this,e,i)}return te(n)}(_u),Ih=function(e){ne(n,e);var t=le(n);function n(e,i,r,a,o,l,g){return $(this,n),console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),t.call(this,e,i,r,a,o,l,g)}return te(n)}(Tu),dh=function(e){ne(n,e);var t=le(n);function n(e,i){return $(this,n),console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),t.call(this,e,i)}return te(n)}(Eu),Ch=function(e){ne(n,e);var t=le(n);function n(e,i,r,a,o){return $(this,n),console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),t.call(this,e,i,r,a,o)}return te(n)}(Ju),hh=function(e){ne(n,e);var t=le(n);function n(e,i,r,a,o,l){return $(this,n),console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),t.call(this,e,i,r,a,o,l)}return te(n)}(Uu),Ah=function(e){ne(n,e);var t=le(n);function n(e,i,r,a,o){return $(this,n),console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),t.call(this,e,i,r,a,o)}return te(n)}(Du);"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ce}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ce);var ph=n(4585);function mh(e){var t,n=new Set,i=function(e,i){var r="function"===typeof e?e(t):e;if(r!==t){var a=t;t=i?r:Object.assign({},t,r),n.forEach((function(e){return e(t,a)}))}},r=function(){return t},a={setState:i,getState:r,subscribe:function(e,i,a){return i||a?function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");var o=i(t);function l(){var n=i(t);if(!a(o,n)){var r=o;e(o=n,r)}}return n.add(l),function(){return n.delete(l)}}(e,i,a):(n.add(e),function(){return n.delete(e)})},destroy:function(){return n.clear()}};return t=e(i,r,a),a}var fh="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?i.useEffect:i.useLayoutEffect;function vh(e){var t="function"===typeof e?mh(e):e,n=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.getState,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is,a=(0,i.useReducer)((function(e){return e+1}),0),o=c(a,2),l=o[1],g=t.getState(),s=(0,i.useRef)(g),u=(0,i.useRef)(n),I=(0,i.useRef)(r),d=(0,i.useRef)(!1),C=(0,i.useRef)();void 0===C.current&&(C.current=n(g));var h=!1;(s.current!==g||u.current!==n||I.current!==r||d.current)&&(e=n(g),h=!r(C.current,e)),fh((function(){h&&(C.current=e),s.current=g,u.current=n,I.current=r,d.current=!1}));var A=(0,i.useRef)(g);fh((function(){var e=function(){try{var e=t.getState(),n=u.current(e);I.current(C.current,n)||(s.current=e,C.current=n,l())}catch(i){d.current=!0,l()}},n=t.subscribe(e);return t.getState()!==A.current&&e(),n}),[]);var p=h?e:C.current;return(0,i.useDebugValue)(p),p};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");var e=[n,t];return{next:function(){var t=e.length<=0;return{value:e.shift(),done:t}}}},n}var bh=n(258),yh=n.n(bh),Gh=n(4545);function Bh(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e,t){return e===t};if(e===t)return!0;if(!e||!t)return!1;var i=e.length;if(t.length!==i)return!1;for(var r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}var Zh=[];function wh(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=E(Zh);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(Bh(t,o.keys,o.equal)){if(i)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return o.response;if(!i)throw o.promise}}}catch(g){a.e(g)}finally{a.f()}var l={keys:t,equal:r.equal,promise:e.apply(void 0,O(t)).then((function(e){return l.response=e})).then((function(){r.lifespan&&r.lifespan>0&&setTimeout((function(){var e=Zh.indexOf(l);-1!==e&&Zh.splice(e,1)}),r.lifespan)})).catch((function(e){return l.error=e}))};if(Zh.push(l),!i)throw l.promise}var xh,Sh,Wh=["children","key","ref"],Vh=["children","key","ref"],Rh=["args","attach"],qh=["args","children"],kh=["args","children"],Xh=["params"],Yh=function(e){return e&&e.isOrthographicCamera},Nh="undefined"!==typeof window&&(null!=(xh=window.document)&&xh.createElement||"ReactNative"===(null==(Sh=window.navigator)?void 0:Sh.product))?i.useLayoutEffect:i.useEffect;function Kh(e){var t=i.useRef(e);return Nh((function(){t.current=e}),[e]),t}function Hh(e){var t=e.set;return Nh((function(){return t(new Promise((function(){return null}))),function(){return t(!1)}}),[t]),null}var zh=function(e){ne(n,e);var t=le(n);function n(){var e;$(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={error:!1},e}return te(n,[{key:"componentDidCatch",value:function(e){this.props.set(e)}},{key:"render",value:function(){return this.state.error?null:this.props.children}}]),n}(i.Component);zh.getDerivedStateFromError=function(){return{error:!0}};var Mh="__default";function Fh(e){return Array.isArray(e)?Math.min(Math.max(e[0],window.devicePixelRatio),e[1]):e}var Lh=function(e){var t;return null==(t=e.__r3f)?void 0:t.root.getState()},_h={obj:function(e){return e===Object(e)&&!_h.arr(e)&&"function"!==typeof e},fun:function(e){return"function"===typeof e},str:function(e){return"string"===typeof e},num:function(e){return"number"===typeof e},boo:function(e){return"boolean"===typeof e},und:function(e){return void 0===e},arr:function(e){return Array.isArray(e)},equ:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.arrays,r=void 0===i?"shallow":i,a=n.objects,o=void 0===a?"reference":a,l=n.strict,g=void 0===l||l;if(typeof e!==typeof t||!!e!==!!t)return!1;if(_h.str(e)||_h.num(e))return e===t;var s=_h.obj(e);if(s&&"reference"===o)return e===t;var c,u=_h.arr(e);if(u&&"reference"===r)return e===t;if((u||s)&&e===t)return!0;for(c in e)if(!(c in t))return!1;for(c in g?t:e)if(e[c]!==t[c])return!1;if(_h.und(c)){if(u&&0===e.length&&0===t.length)return!0;if(s&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function Th(e){var t={nodes:{},materials:{}};return e&&e.traverse((function(e){e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}function Eh(e,t){var n=e;return(null!=t&&t.primitive||!n.__r3f)&&(n.__r3f=T({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},t)),e}function Jh(e,t){var n=e;if(t.includes("-")){var i=t.split("-"),r=i.pop();return n=i.reduce((function(e,t){return e[t]}),e),{target:n,key:r}}return{target:n,key:t}}var Uh=/-\d+$/;function Dh(e,t,n){if(_h.str(n)){if(Uh.test(n)){var i=Jh(e,n.replace(Uh,"")),r=i.target,a=i.key;Array.isArray(r[a])||(r[a]=[])}var o=Jh(e,n),l=o.target,g=o.key;t.__r3f.previousAttach=l[g],l[g]=t}else t.__r3f.previousAttach=n(e,t)}function Ph(e,t,n){var i,r;if(_h.str(n)){var a=Jh(e,n),o=a.target,l=a.key,g=t.__r3f.previousAttach;void 0===g?delete o[l]:o[l]=g}else null==(i=t.__r3f)||null==i.previousAttach||i.previousAttach(e,t);null==(r=t.__r3f)||delete r.previousAttach}function Oh(e,t){t.children,t.key,t.ref;var n,i=j(t,Wh),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(r.children,r.key,r.ref,j(r,Vh)),o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=null!=(n=null==e?void 0:e.__r3f)?n:{},g=Object.entries(i),s=[];if(o)for(var u=Object.keys(a),I=0;I<u.length;I++)i.hasOwnProperty(u[I])||g.unshift([u[I],Mh+"remove"]);g.forEach((function(t){var n,i=c(t,2),r=i[0],o=i[1];if((null==(n=e.__r3f)||!n.primitive||"object"!==r)&&!_h.equ(o,a[r])){if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(r))return s.push([r,o,!0,[]]);var l=[];r.includes("-")&&(l=r.split("-")),s.push([r,o,!1,l])}}));var d=T({},i);return l.memoizedProps&&l.memoizedProps.args&&(d.args=l.memoizedProps.args),l.memoizedProps&&l.memoizedProps.attach&&(d.attach=l.memoizedProps.attach),{memoized:d,changes:s}}function Qh(e,t){var n,i,r,a=null!=(n=e.__r3f)?n:{},o=a.root,l=null!=(i=null==o||null==o.getState?void 0:o.getState())?i:{},g=(r=t)&&r.memoized&&r.changes?t:Oh(e,t),s=g.memoized,u=g.changes,I=a.eventCount;if(e.__r3f&&(e.__r3f.memoizedProps=s),u.forEach((function(t){var n,i=c(t,4),r=i[0],o=i[1],g=i[2],u=i[3],I=e,d=I[r];if(u.length&&(d=u.reduce((function(e,t){return e[t]}),e),!d||!d.set)){var C=Q(u.reverse()),h=C[0];I=C.slice(1).reverse().reduce((function(e,t){return e[t]}),e),r=h}if(o===Mh+"remove")if(d&&d.constructor)o=D(d.constructor,O(null!=(n=s.args)?n:[]));else if(I.constructor){var A,p=D(I.constructor,O(null!=(A=I.__r3f.memoizedProps.args)?A:[]));o=p[d],p.dispose&&p.dispose()}else o=0;if(g)o?a.handlers[r]=o:delete a.handlers[r],a.eventCount=Object.keys(a.handlers).length;else if(d&&d.set&&(d.copy||d instanceof aa)){var m;if(Array.isArray(o))d.fromArray?d.fromArray(o):(m=d).set.apply(m,O(o));else if(d.copy&&o&&o.constructor&&d.constructor.name===o.constructor.name)d.copy(o);else if(void 0!==o){var f=d instanceof ir;!f&&d.setScalar?d.setScalar(o):d instanceof aa&&o instanceof aa?d.mask=o.mask:d.set(o);0}}else I[r]=o,!l.linear&&I[r]instanceof gr&&(I[r].encoding=_n);jh(e)})),a.parent&&l.internal&&e.raycast&&I!==a.eventCount){var d=l.internal.interaction.indexOf(e);d>-1&&l.internal.interaction.splice(d,1),a.eventCount&&l.internal.interaction.push(e)}return u.length&&e.parent&&$h(e),e}function jh(e){var t,n,i=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();i&&0===i.internal.frames&&i.invalidate()}function $h(e){null==e.onUpdate||e.onUpdate(e)}function eA(e,t){e.manual||(Yh(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function tA(e,t,n){var i=n.pop(),r=n.reduce((function(e,t){return e[t]}),e);return r[i]=t}function nA(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function iA(e,t,n,i){var r=n.get(t);r&&(n.delete(t),0===n.size&&(e.delete(i),r.target.releasePointerCapture(i)))}function rA(e){function t(e){return e.filter((function(e){return["Move","Over","Enter","Out","Leave"].some((function(t){var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}))}function n(t){var n=e.getState().internal;Array.from(n.hovered.values()).forEach((function(e){if(!t.length||!t.find((function(t){return t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId}))){var i=e.eventObject.__r3f,r=null==i?void 0:i.handlers;if(n.hovered.delete(nA(e)),null!=i&&i.eventCount){var a=T(T({},e),{},{intersections:t});null==r.onPointerOut||r.onPointerOut(a),null==r.onPointerLeave||r.onPointerLeave(a)}}}))}function i(e,t){t.forEach((function(t){var n;return null==(n=t.__r3f)||null==n.handlers.onPointerMissed?void 0:n.handlers.onPointerMissed(e)}))}return{handlePointer:function(r){switch(r){case"onPointerLeave":case"onPointerCancel":return function(){return n([])};case"onLostPointerCapture":return function(t){var i=e.getState().internal;"pointerId"in t&&!i.capturedMap.has(t.pointerId)&&(i.capturedMap.delete(t.pointerId),n([]))}}return function(a){var o=e.getState(),l=o.onPointerMissed,g=o.internal;g.lastEvent.current=a;var s="onPointerMove"===r,c="onClick"===r||"onContextMenu"===r||"onDoubleClick"===r,u=function(t,n){var i=e.getState(),r=new Set,a=[],o=n?n(i.internal.interaction):i.internal.interaction;o.forEach((function(e){var t=Lh(e);t&&(t.raycaster.camera=void 0)})),i.previousRoot||null==i.events.compute||i.events.compute(t,i);var l=o.flatMap((function(e){var n,i=Lh(e);return i&&i.events.enabled&&null!==i.raycaster.camera?(void 0===i.raycaster.camera&&(null==i.events.compute||i.events.compute(t,i,null==(n=i.previousRoot)?void 0:n.getState()),void 0===i.raycaster.camera&&(i.raycaster.camera=null)),i.raycaster.camera?i.raycaster.intersectObject(e,!0):[]):[]})).sort((function(e,t){var n=Lh(e.object),i=Lh(t.object);return n&&i?i.events.priority-n.events.priority||e.distance-t.distance:0})).filter((function(e){var t=nA(e);return!r.has(t)&&(r.add(t),!0)}));i.events.filter&&(l=i.events.filter(l,i));var g,s=E(l);try{for(s.s();!(g=s.n()).done;)for(var c=g.value,u=c.object;u;){var I;null!=(I=u.__r3f)&&I.eventCount&&a.push(T(T({},c),{},{eventObject:u})),u=u.parent}}catch(A){s.e(A)}finally{s.f()}if("pointerId"in t&&i.internal.capturedMap.has(t.pointerId)){var d,C=E(i.internal.capturedMap.get(t.pointerId).values());try{for(C.s();!(d=C.n()).done;){var h=d.value;a.push(h.intersection)}}catch(A){C.e(A)}finally{C.f()}}return a}(a,s?t:void 0),I=c?function(t){var n=e.getState().internal,i=t.offsetX-n.initialClick[0],r=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(i*i+r*r))}(a):0;"onPointerDown"===r&&(g.initialClick=[a.offsetX,a.offsetY],g.initialHits=u.map((function(e){return e.eventObject}))),c&&!u.length&&I<=2&&(i(a,g.interaction),l&&l(a)),s&&n(u),function(e,t,i,r){e.length&&function(){var a,o={stopped:!1},l=E(e);try{var g=function(){var l=a.value,g=Lh(l.object);if(g){var s=g.raycaster,c=g.pointer,u=g.camera,I=g.internal,d=new pr(c.x,c.y,0).unproject(u),C=function(e){var t,n;return null!=(t=null==(n=I.capturedMap.get(e))?void 0:n.has(l.eventObject))&&t},h=function(e){var n={intersection:l,target:t.target};I.capturedMap.has(e)?I.capturedMap.get(e).set(l.eventObject,n):I.capturedMap.set(e,new Map([[l.eventObject,n]])),t.target.setPointerCapture(e)},A=function(e){var t=I.capturedMap.get(e);t&&iA(I.capturedMap,l.eventObject,t,e)},p={};for(var m in t){var f=t[m];"function"!==typeof f&&(p[m]=f)}var v=T(T(T({},l),p),{},{pointer:c,intersections:e,stopped:o.stopped,delta:i,unprojectedPoint:d,ray:s.ray,camera:u,stopPropagation:function(){var i="pointerId"in t&&I.capturedMap.get(t.pointerId);if((!i||i.has(l.eventObject))&&(v.stopped=o.stopped=!0,I.hovered.size&&Array.from(I.hovered.values()).find((function(e){return e.eventObject===l.eventObject})))){var r=e.slice(0,e.indexOf(l));n([].concat(O(r),[l]))}},target:{hasPointerCapture:C,setPointerCapture:h,releasePointerCapture:A},currentTarget:{hasPointerCapture:C,setPointerCapture:h,releasePointerCapture:A},nativeEvent:t});if(r(v),!0===o.stopped)return"break"}};for(l.s();!(a=l.n()).done&&"break"!==g(););}catch(s){l.e(s)}finally{l.f()}}()}(u,a,I,(function(e){var t=e.eventObject,n=t.__r3f,o=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(s){if(o.onPointerOver||o.onPointerEnter||o.onPointerOut||o.onPointerLeave){var l=nA(e),u=g.hovered.get(l);u?u.stopped&&e.stopPropagation():(g.hovered.set(l,e),null==o.onPointerOver||o.onPointerOver(e),null==o.onPointerEnter||o.onPointerEnter(e))}null==o.onPointerMove||o.onPointerMove(e)}else{var I=o[r];I?c&&!g.initialHits.includes(t)||(i(a,g.interaction.filter((function(e){return!g.initialHits.includes(e)}))),I(e)):c&&g.initialHits.includes(t)&&i(a,g.interaction.filter((function(e){return!g.initialHits.includes(e)})))}}))}}}}var aA={},oA=function(e){aA=T(T({},aA),e)};var lA,gA=function(e){return!(null==e||!e.render)},sA=i.createContext(null);var cA,uA,IA=new Set,dA=new Set,CA=new Set;function hA(e,t){e.size&&e.forEach((function(e){return(0,e.callback)(t)}))}function AA(e,t){switch(e){case"before":return hA(IA,t);case"after":return hA(dA,t);case"tail":return hA(CA,t)}}function pA(e,t,n){var i=t.clock.getDelta();for("never"===t.frameloop&&"number"===typeof e&&(i=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),cA=t.internal.subscribers,lA=0;lA<cA.length;lA++)(uA=cA[lA]).ref.current(uA.store.getState(),i,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function mA(){var e=i.useContext(sA);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function fA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1?arguments[1]:void 0;return mA()(e,t)}function vA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=mA(),i=n.getState().internal.subscribe,r=Kh(e);return Nh((function(){return i(r,t,n)}),[t,i,n]),null}function bA(e,t){return function(n){var i=new n;e&&e(i);for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return Promise.all(a.map((function(e){return new Promise((function(n,r){return i.load(e,(function(e){e.scene&&Object.assign(e,Th(e.scene)),n(e)}),t,(function(t){return r(new Error("Could not load ".concat(e,": ").concat(t.message,")")))}))}))})))}}function yA(e,t,n,i){var r=Array.isArray(t)?t:[t],a=function(e,t,n){return wh(e,t,!1,n)}(bA(n,i),[e].concat(O(r)),{equal:_h.equ});return Array.isArray(t)?a:a[0]}yA.preload=function(e,t,n){var i=Array.isArray(t)?t:[t];return function(e,t,n){wh(e,t,!0,n)}(bA(n),[e].concat(O(i)))},yA.clear=function(e,t){var n=Array.isArray(t)?t:[t];return function(e){if(void 0===e||0===e.length)Zh.splice(0,Zh.length);else{var t=Zh.find((function(t){return Bh(e,t.keys,t.equal)}));if(t){var n=Zh.indexOf(t);-1!==n&&Zh.splice(n,1)}}}([e].concat(O(n)))};var GA=new Map,BA=function(e){var t,n,i,r=!1;function a(o){if(n=requestAnimationFrame(a),r=!0,t=0,AA("before",o),e.forEach((function(e){var n;!(i=e.store.getState()).internal.active||!("always"===i.frameloop||i.internal.frames>0)||null!=(n=i.gl.xr)&&n.isPresenting||(t+=pA(o,i))})),AA("after",o),0===t)return AA("tail",o),r=!1,cancelAnimationFrame(n)}return{loop:a,invalidate:function t(n){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!n)return e.forEach((function(e){return t(e.store.getState())}),o);null!=(i=n.gl.xr)&&i.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+o),r||(r=!0,requestAnimationFrame(a)))},advance:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n&&AA("before",t),i?pA(t,i,r):e.forEach((function(e){return pA(t,e.store.getState())})),n&&AA("after",t)}}}(GA),ZA=BA.invalidate,wA=BA.advance,xA=function(e,t){function n(e,t,n){var i,r=t.args,a=void 0===r?[]:r,o=t.attach,l=j(t,Rh),g="".concat(e[0].toUpperCase()).concat(e.slice(1));if("primitive"===e){if(void 0===l.object)throw new Error("R3F: Primitives without 'object' are invalid!");i=Eh(l.object,{type:e,root:n,attach:o,primitive:!0})}else{var s=aA[g];if(!s)throw new Error("R3F: ".concat(g," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"));if(!Array.isArray(a))throw new Error("R3F: The args prop must be an array!");i=Eh(D(s,O(a)),{type:e,root:n,attach:o,memoizedProps:{args:a}})}return void 0===i.__r3f.attach&&(i instanceof eo?i.__r3f.attach="geometry":i instanceof qa&&(i.__r3f.attach="material")),"inject"!==g&&Qh(i,l),i}function i(e,t){var n,i,r=!1;t&&(null!=(n=t.__r3f)&&n.attach?Dh(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),r=!0),r||null==(i=e.__r3f)||i.objects.push(t),t.__r3f||Eh(t,{}),t.__r3f.parent=e,$h(t),jh(t))}function r(e,t,n){var i=!1;if(t){var r,a;if(null!=(r=t.__r3f)&&r.attach)Dh(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});var o=e.children.filter((function(e){return e!==t})),l=o.indexOf(n);e.children=[].concat(O(o.slice(0,l)),[t],O(o.slice(l))),i=!0}i||null==(a=e.__r3f)||a.objects.push(t),t.__r3f||Eh(t,{}),t.__r3f.parent=e,$h(t),jh(t)}}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&O(e).forEach((function(e){return o(t,e,n)}))}function o(e,t,n){if(t){var i,r,o;if(t.__r3f&&(t.__r3f.parent=null),null!=(i=e.__r3f)&&i.objects&&(e.__r3f.objects=e.__r3f.objects.filter((function(e){return e!==t}))),null!=(r=t.__r3f)&&r.attach)Ph(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var l;e.remove(t),null!=(l=t.__r3f)&&l.root&&function(e,t){var n=e.getState().internal;n.interaction=n.interaction.filter((function(e){return e!==t})),n.initialHits=n.initialHits.filter((function(e){return e!==t})),n.hovered.forEach((function(e,i){e.eventObject!==t&&e.object!==t||n.hovered.delete(i)})),n.capturedMap.forEach((function(e,i){iA(n.capturedMap,t,e,i)}))}(t.__r3f.root,t)}var g,s=null==(o=t.__r3f)?void 0:o.primitive,c=void 0===n?null!==t.dispose&&!s:n;if(!s)a(null==(g=t.__r3f)?void 0:g.objects,t,c),a(t.children,t,c);t.__r3f&&(delete t.__r3f.root,delete t.__r3f.objects,delete t.__r3f.handlers,delete t.__r3f.memoizedProps,s||delete t.__r3f),c&&t.dispose&&"Scene"!==t.type&&(0,Gh.unstable_scheduleCallback)(Gh.unstable_IdlePriority,(function(){try{t.dispose()}catch(e){}})),jh(e)}}var l=function(){return console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.")},g=yh()({createInstance:n,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:function(e,t){if(t){var n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,i(n,t))}},removeChildFromContainer:function(e,t){t&&o(e.getState().scene,t)},insertInContainerBefore:function(e,t,n){if(t&&n){var i=e.getState().scene;i.__r3f&&r(i,t,n)}},getRootHostContext:function(){return null},getChildHostContext:function(e){return e},finalizeInitialChildren:function(e){var t,n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate:function(e,t,n,i){if(e.__r3f.primitive&&i.object&&i.object!==e)return[!0];var r=i.args,a=void 0===r?[]:r,o=(i.children,j(i,qh)),l=n.args,g=void 0===l?[]:l,s=(n.children,j(n,kh));if(!Array.isArray(a))throw new Error("R3F: the args prop must be an array!");if(a.some((function(e,t){return e!==g[t]})))return[!0];var c=Oh(e,o,s,!0);return c.changes.length?[!1,c]:null},commitUpdate:function(e,t,r,a,l,g){var s=c(t,2),u=s[0],I=s[1];u?function(e,t,r,a){var l,g=null==(l=e.__r3f)?void 0:l.parent;if(g){var s=n(t,r,e.__r3f.root);if(e.children){var c,u=E(e.children);try{for(u.s();!(c=u.n()).done;){var I=c.value;I.__r3f&&i(s,I)}}catch(d){u.e(d)}finally{u.f()}e.children=e.children.filter((function(e){return!e.__r3f}))}e.__r3f.objects.forEach((function(e){return i(s,e)})),e.__r3f.objects=[],o(g,e),i(g,s),s.raycast&&s.__r3f.eventCount&&s.__r3f.root.getState().internal.interaction.push(s),[a,a.alternate].forEach((function(e){null!==e&&(e.stateNode=s,e.ref&&("function"===typeof e.ref?e.ref(s):e.ref.current=s))}))}}(e,r,l,g):Qh(e,I)},commitMount:function(e,t,n,i){var r,a=null!=(r=e.__r3f)?r:{};e.raycast&&a.handlers&&a.eventCount&&e.__r3f.root.getState().internal.interaction.push(e)},getPublicInstance:function(e){return e},prepareForCommit:function(){return null},preparePortalMount:function(e){return Eh(e.getState().scene)},resetAfterCommit:function(){},shouldSetTextContent:function(){return!1},clearContainer:function(){return!1},hideInstance:function(e){var t,n=null!=(t=e.__r3f)?t:{},i=n.attach,r=n.parent;i&&r&&Ph(r,e,i),e.isObject3D&&(e.visible=!1),jh(e)},unhideInstance:function(e,t){var n,i=null!=(n=e.__r3f)?n:{},r=i.attach,a=i.parent;r&&a&&Dh(a,e,r),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),jh(e)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:function(){return t?t():ph.DefaultEventPriority},beforeActiveInstanceBlur:function(){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},now:"undefined"!==typeof performance&&_h.fun(performance.now)?performance.now:_h.fun(Date.now)?Date.now:function(){return 0},scheduleTimeout:_h.fun(setTimeout)?setTimeout:void 0,cancelTimeout:_h.fun(clearTimeout)?clearTimeout:void 0});return{reconciler:g,applyProps:Qh}}(0,(function(){var e,t;switch(null==(e=window)||null==(t=e.event)?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ph.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ph.ContinuousEventPriority;default:return ph.DefaultEventPriority}})),SA=xA.reconciler,WA=xA.applyProps,VA={objects:"shallow",strict:!1},RA=function(e,t){var n="function"===typeof e?e(t):e;return gA(n)?n:new As(T({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0},e))};function qA(e,t){if(t)return t;if(e instanceof HTMLCanvasElement&&e.parentElement){var n=e.parentElement.getBoundingClientRect();return{width:n.width,height:n.height,top:n.top,left:n.left}}return{width:0,height:0,top:0,left:0}}function kA(t){var n=GA.get(t),r=null==n?void 0:n.fiber,a=null==n?void 0:n.store;n&&console.warn("R3F.createRoot should only be called once!");var o,l="function"===typeof reportError?reportError:console.error,g=a||function(e,t){var n=vh((function(n,r){var a=new pr,o=new pr,l=new pr;function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r().size,i=n.width,g=n.height,s=n.top,c=n.left,u=i/g;t instanceof pr?l.copy(t):l.set.apply(l,O(t));var I=e.getWorldPosition(a).distanceTo(l);if(Yh(e))return{width:i/e.zoom,height:g/e.zoom,top:s,left:c,factor:1,distance:I,aspect:u};var d=e.fov*Math.PI/180,C=2*Math.tan(d/2)*I,h=C*(i/g);return{width:h,height:C,top:s,left:c,factor:i/h,distance:I,aspect:u}}var s=void 0,c=function(e){return n((function(t){return{performance:T(T({},t.performance),{},{current:e})}}))},u=new Mi,I={set:n,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(r(),t)},advance:function(e,n){return t(e,n,r())},legacy:!1,linear:!1,flat:!1,scene:Eh(new bs),controls:null,clock:new Zd,pointer:u,mouse:u,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:function(){var e=r();s&&clearTimeout(s),e.performance.current!==e.performance.min&&c(e.performance.min),s=setTimeout((function(){return c(r().performance.max)}),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:g},setEvents:function(e){return n((function(t){return T(T({},t),{},{events:T(T({},t.events),e)})}))},setSize:function(e,t,i,a,l){var s=r().camera,c={width:e,height:t,top:a||0,left:l||0,updateStyle:i};n((function(e){return{size:c,viewport:T(T({},e.viewport),g(s,o,c))}}))},setDpr:function(e){return n((function(t){var n=Fh(e);return{viewport:T(T({},t.viewport),{},{dpr:n,initialDpr:t.viewport.initialDpr||n})}}))},setFrameloop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always",t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n((function(){return{frameloop:e}}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:i.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:function(e,t,n){var i=r().internal;return i.priority=i.priority+(t>0?1:0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort((function(e,t){return e.priority-t.priority})),function(){var n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter((function(t){return t.ref!==e})))}}}};return I})),r=n.getState(),a=r.size,o=r.viewport.dpr,l=r.camera;return n.subscribe((function(){var e=n.getState(),t=e.camera,i=e.size,r=e.viewport,g=e.gl,s=e.set;i===a&&r.dpr===o||(a=i,o=r.dpr,eA(t,i),g.setPixelRatio(r.dpr),g.setSize(i.width,i.height,i.updateStyle)),t!==l&&(l=t,s((function(e){return{viewport:T(T({},e.viewport),e.viewport.getCurrentViewport(t))}})))})),n.subscribe((function(t){return e(t)})),n}(ZA,wA),s=r||SA.createContainer(g,ph.ConcurrentRoot,null,!1,null,"",l,null);n||GA.set(t,{fiber:s,store:g});var c=!1;return{configure:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.gl,r=n.size,a=n.events,l=n.onCreated,s=n.shadows,u=void 0!==s&&s,I=n.linear,d=void 0!==I&&I,C=n.flat,h=void 0!==C&&C,A=n.legacy,p=void 0!==A&&A,m=n.orthographic,f=void 0!==m&&m,v=n.frameloop,b=void 0===v?"always":v,y=n.dpr,G=void 0===y?[1,2]:y,B=n.performance,Z=n.raycaster,w=n.camera,x=n.onPointerMissed,S=g.getState(),W=S.gl;S.gl||S.set({gl:W=RA(i,t)});var V=S.raycaster;V||S.set({raycaster:V=new iC});var R=Z||{},q=R.params,k=j(R,Xh);if(_h.equ(k,V,VA)||WA(V,T({},k)),_h.equ(q,V.params,VA)||WA(V,{params:T(T({},V.params),q)}),!S.camera){var X=w instanceof wo,Y=X?w:f?new Qo(0,0,0,0,.1,1e3):new xo(75,0,.1,1e3);X||(Y.position.z=5,w&&WA(Y,w),null!=w&&w.rotation||Y.lookAt(0,0,0)),S.set({camera:Y})}if(!S.xr){var N=function(e,t){var n=g.getState();"never"!==n.frameloop&&wA(e,!0,n,t)},K=function(){var e=g.getState();e.gl.xr.enabled=e.gl.xr.isPresenting,e.gl.xr.setAnimationLoop(e.gl.xr.isPresenting?N:null),e.gl.xr.isPresenting||ZA(e)},H={connect:function(){var e=g.getState().gl;e.xr.addEventListener("sessionstart",K),e.xr.addEventListener("sessionend",K)},disconnect:function(){var e=g.getState().gl;e.xr.removeEventListener("sessionstart",K),e.xr.removeEventListener("sessionend",K)}};W.xr&&H.connect(),S.set({xr:H})}if(W.shadowMap){var z=_h.boo(u);if(z&&W.shadowMap.enabled!==u||!_h.equ(u,W.shadowMap,VA)){var M=W.shadowMap.enabled;W.shadowMap.enabled=!!u,z?W.shadowMap.type=Ge:Object.assign(W.shadowMap,u),M!==W.shadowMap.enabled&&(W.shadowMap.needsUpdate=!0)}}tA(e,p,["ColorManagement","legacyMode"]);var F=d?Ln:_n,L=h?lt:ut;W.outputEncoding!==F&&(W.outputEncoding=F),W.toneMapping!==L&&(W.toneMapping=L),S.legacy!==p&&S.set((function(){return{legacy:p}})),S.linear!==d&&S.set((function(){return{linear:d}})),S.flat!==h&&S.set((function(){return{flat:h}})),!i||_h.fun(i)||gA(i)||_h.equ(i,W,VA)||WA(W,i),a&&!S.events.handlers&&S.set({events:a(g)}),G&&S.viewport.dpr!==Fh(G)&&S.setDpr(G);var _=qA(t,r);return _h.equ(_,S.size,VA)||S.setSize(_.width,_.height,_.updateStyle,_.top,_.left),S.frameloop!==b&&S.setFrameloop(b),S.onPointerMissed||S.set({onPointerMissed:x}),B&&!_h.equ(B,S.performance,VA)&&S.set((function(e){return{performance:T(T({},e.performance),B)}})),o=l,c=!0,this},render:function(e){return c||this.configure(),SA.updateContainer(i.createElement(XA,{store:g,children:e,onCreated:o,rootElement:t}),s,null,(function(){})),g},unmount:function(){YA(t)}}}function XA(e){var t=e.store,n=e.children,r=e.onCreated,a=e.rootElement;return Nh((function(){var e=t.getState();e.set((function(e){return{internal:T(T({},e.internal),{},{active:!0})}})),r&&r(e),t.getState().events.connected||null==e.events.connect||e.events.connect(a)}),[]),i.createElement(sA.Provider,{value:t},n)}function YA(e,t){var n=GA.get(e),i=null==n?void 0:n.fiber;if(i){var r=null==n?void 0:n.store.getState();r&&(r.internal.active=!1),SA.updateContainer(null,i,null,(function(){r&&setTimeout((function(){try{var n,i,a,o;null==r.events.disconnect||r.events.disconnect(),null==(n=r.gl)||null==(i=n.renderLists)||null==i.dispose||i.dispose(),null==(a=r.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(o=r.gl)&&o.xr&&r.xr.disconnect(),function(e){for(var t in e.dispose&&"Scene"!==e.type&&e.dispose(),e)null==t.dispose||t.dispose(),delete e[t]}(r),GA.delete(e),t&&t(e)}catch(l){}}),500)}))}}SA.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:i.version});i.unstable_act;var NA=n(7494),KA=n.n(NA);function HA(e){var t=void 0===e?{debounce:0,scroll:!1,offsetSize:!1}:e,n=t.debounce,r=t.scroll,a=t.polyfill,o=t.offsetSize,l=a||("undefined"===typeof window?te((function e(){$(this,e)})):window.ResizeObserver);if(!l)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");var g=c((0,i.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),2),s=g[0],u=g[1],I=(0,i.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),d=n?"number"===typeof n?n:n.scroll:null,C=n?"number"===typeof n?n:n.resize:null,h=(0,i.useRef)(!1);(0,i.useEffect)((function(){return h.current=!0,function(){h.current=!1}}));var A=c((0,i.useMemo)((function(){var e=function(){if(I.current.element){var e=I.current.element.getBoundingClientRect(),t={left:e.left,top:e.top,width:e.width,height:e.height,bottom:e.bottom,right:e.right,x:e.x,y:e.y};I.current.element instanceof HTMLElement&&o&&(t.height=I.current.element.offsetHeight,t.width=I.current.element.offsetWidth),Object.freeze(t),h.current&&!FA(I.current.lastBounds,t)&&u(I.current.lastBounds=t)}};return[e,C?KA()(e,C):e,d?KA()(e,d):e]}),[u,o,d,C]),3),p=A[0],m=A[1],f=A[2];function v(){I.current.scrollContainers&&(I.current.scrollContainers.forEach((function(e){return e.removeEventListener("scroll",f,!0)})),I.current.scrollContainers=null),I.current.resizeObserver&&(I.current.resizeObserver.disconnect(),I.current.resizeObserver=null)}function b(){I.current.element&&(I.current.resizeObserver=new l(f),I.current.resizeObserver.observe(I.current.element),r&&I.current.scrollContainers&&I.current.scrollContainers.forEach((function(e){return e.addEventListener("scroll",f,{capture:!0,passive:!0})})))}var y;return function(e,t){(0,i.useEffect)((function(){if(t){var n=e;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),function(){window.removeEventListener("scroll",n,!0)}}}),[e,t])}(f,Boolean(r)),y=m,(0,i.useEffect)((function(){var e=y;return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[y]),(0,i.useEffect)((function(){v(),b()}),[r,f,m]),(0,i.useEffect)((function(){return v}),[]),[function(e){e&&e!==I.current.element&&(v(),I.current.element=e,I.current.scrollContainers=zA(e),b())},s,p]}function zA(e){var t=[];if(!e||e===document.body)return t;var n=window.getComputedStyle(e);return[n.overflow,n.overflowX,n.overflowY].some((function(e){return"auto"===e||"scroll"===e}))&&t.push(e),[].concat(t,O(zA(e.parentElement)))}var MA=["x","y","top","bottom","left","right","width","height"],FA=function(e,t){return MA.every((function(n){return e[n]===t[n]}))},LA=["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","onPointerMissed","onCreated"],_A={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function TA(e){var t=rA(e).handlePointer;return{priority:1,enabled:!0,compute:function(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(_A).reduce((function(e,n){return T(T({},e),{},L({},n,t(n)))}),{}),connect:function(t){var n,i=e.getState(),r=i.set,a=i.events;null==a.disconnect||a.disconnect(),r((function(e){return{events:T(T({},e.events),{},{connected:t})}})),Object.entries(null!=(n=a.handlers)?n:[]).forEach((function(e){var n=c(e,2),i=n[0],r=n[1],a=c(_A[i],2),o=a[0],l=a[1];t.addEventListener(o,r,{passive:l})}))},disconnect:function(){var t,n=e.getState(),i=n.set,r=n.events;r.connected&&(Object.entries(null!=(t=r.handlers)?t:[]).forEach((function(e){var t=c(e,2),n=t[0],i=t[1];if(r&&r.connected instanceof HTMLElement){var a=c(_A[n],1)[0];r.connected.removeEventListener(a,i)}})),i((function(e){return{events:T(T({},e.events),{},{connected:void 0})}})))}}}var EA,JA=i.forwardRef((function(t,n){var r=t.children,a=t.fallback,o=t.resize,l=t.style,g=t.gl,s=t.events,I=void 0===s?TA:s,d=t.eventSource,C=t.eventPrefix,h=t.shadows,A=t.linear,p=t.flat,m=t.legacy,f=t.orthographic,v=t.frameloop,b=t.dpr,y=t.performance,G=t.raycaster,B=t.camera,Z=t.onPointerMissed,w=t.onCreated,x=j(t,LA);i.useMemo((function(){return oA(e)}),[]);var S=c(HA(T({scroll:!0,debounce:{scroll:50,resize:0}},o)),2),W=S[0],V=S[1],R=i.useRef(null),q=i.useRef(null),k=c(i.useState(null),2),X=k[0],Y=k[1];i.useImperativeHandle(n,(function(){return R.current}));var N=Kh(Z),K=c(i.useState(!1),2),H=K[0],z=K[1],M=c(i.useState(!1),2),F=M[0],L=M[1];if(H)throw H;if(F)throw F;var _=i.useRef(null);return V.width>0&&V.height>0&&X&&(_.current||(_.current=kA(X)),_.current.configure({gl:g,events:I,shadows:h,linear:A,flat:p,legacy:m,orthographic:f,frameloop:v,dpr:b,performance:y,raycaster:G,camera:B,size:V,onPointerMissed:function(){return null==N.current?void 0:N.current.apply(N,arguments)},onCreated:function(e){var t;null==e.events.connect||e.events.connect(d?(t=d)&&t.hasOwnProperty("current")?d.current:d:q.current),C&&e.setEvents({compute:function(e,t){var n=e[C+"X"],i=e[C+"Y"];t.pointer.set(n/t.size.width*2-1,-i/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==w||w(e)}}),_.current.render(i.createElement(zh,{set:L},i.createElement(i.Suspense,{fallback:i.createElement(Hh,{set:z})},r)))),Nh((function(){Y(R.current)}),[]),i.useEffect((function(){if(X)return function(){return YA(X)}}),[X]),i.createElement("div",u({ref:q,style:T({position:"relative",width:"100%",height:"100%",overflow:"hidden"},l)},x),i.createElement("div",{ref:W,style:{width:"100%",height:"100%"}},i.createElement("canvas",{ref:R,style:{display:"block"}},a)))})),UA=function(e){ne(n,e);var t=le(n);function n(){return $(this,n),t.call(this,{uniforms:{time:{value:0},fade:{value:1}},vertexShader:"\n      uniform float time;\n      attribute float size;\n      varying vec3 vColor;\n      void main() {\n        vColor = color;\n        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\n        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(mvPosition.x + 2.0 * time + 100.0));\n        gl_Position = projectionMatrix * mvPosition;\n      }",fragmentShader:"\n      uniform sampler2D pointTexture;\n      uniform float fade;\n      varying vec3 vColor;\n      void main() {\n        float opacity = 1.0;\n        if (fade == 1.0) {\n          float d = distance(gl_PointCoord, vec2(0.5, 0.5));\n          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));\n        }\n        gl_FragColor = vec4(vColor, opacity);\n\n        #include <tonemapping_fragment>\n\t      #include <encodings_fragment>\n      }"})}return te(n)}(Zo),DA=function(e){return(new pr).setFromSpherical(new oC(e,Math.acos(1-2*Math.random()),2*Math.random()*Math.PI))},PA=i.forwardRef((function(e,t){var n=e.radius,r=void 0===n?100:n,a=e.depth,o=void 0===a?50:a,l=e.count,g=void 0===l?5e3:l,s=e.saturation,u=void 0===s?0:s,I=e.factor,d=void 0===I?4:I,C=e.fade,h=void 0!==C&&C,A=e.speed,p=void 0===A?1:A,m=i.useRef(),f=i.useMemo((function(){for(var e=[],t=[],n=Array.from({length:g},(function(){return(.5+.5*Math.random())*d})),i=new ir,a=r+o,l=o/g,s=0;s<g;s++)a-=l*Math.random(),e.push.apply(e,O(DA(a).toArray())),i.setHSL(s/g,u,.9),t.push(i.r,i.g,i.b);return[new Float32Array(e),new Float32Array(t),new Float32Array(n)]}),[g,o,d,r,u]),v=c(f,3),b=v[0],y=v[1],G=v[2];vA((function(e){return m.current&&(m.current.uniforms.time.value=e.clock.getElapsedTime()*p)}));var B=c(i.useState((function(){return new UA})),1)[0];return i.createElement("points",{ref:t},i.createElement("bufferGeometry",null,i.createElement("bufferAttribute",{attach:"attributes-position",args:[b,3]}),i.createElement("bufferAttribute",{attach:"attributes-color",args:[y,3]}),i.createElement("bufferAttribute",{attach:"attributes-size",args:[G,1]})),i.createElement("primitive",{ref:m,object:B,attach:"material",blending:Ve,"uniforms-fade-value":h,transparent:!0,vertexColors:!0}))})),OA=n(184),QA=["bi","bj"],jA=["body","contact","target"],$A=["uuid"],ep=["body","ray"],tp={exports:{}},np="object"===typeof Reflect?Reflect:null,ip=np&&"function"===typeof np.apply?np.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};EA=np&&"function"===typeof np.ownKeys?np.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var rp=Number.isNaN||function(e){return e!==e};function ap(){ap.init.call(this)}tp.exports=ap,tp.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,a),i(n)}function a(){"function"===typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}hp(e,t,a,{once:!0}),"error"!==t&&function(e,t,n){"function"===typeof e.on&&hp(e,"error",t,n)}(e,r,{once:!0})}))},ap.EventEmitter=ap,ap.prototype._events=void 0,ap.prototype._eventsCount=0,ap.prototype._maxListeners=void 0;var op=10;function lp(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function gp(e){return void 0===e._maxListeners?ap.defaultMaxListeners:e._maxListeners}function sp(e,t,n,i){var r,a,o;if(lp(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"===typeof o?o=a[t]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=gp(e))>0&&o.length>r&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,function(e){console&&console.warn&&console.warn(e)}(l)}return e}function cp(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function up(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=cp.bind(i);return r.listener=n,i.wrapFn=r,r}function Ip(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"===typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):Cp(r,r.length)}function dp(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function Cp(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function hp(e,t,n,i){if("function"===typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(a){i.once&&e.removeEventListener(t,r),n(a)}))}}Object.defineProperty(ap,"defaultMaxListeners",{enumerable:!0,get:function(){return op},set:function(e){if("number"!==typeof e||e<0||rp(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");op=e}}),ap.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ap.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||rp(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},ap.prototype.getMaxListeners=function(){return gp(this)},ap.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var l=r[e];if(void 0===l)return!1;if("function"===typeof l)ip(l,this,t);else{var g=l.length,s=Cp(l,g);for(n=0;n<g;++n)ip(s[n],this,t)}return!0},ap.prototype.addListener=function(e,t){return sp(this,e,t,!1)},ap.prototype.on=ap.prototype.addListener,ap.prototype.prependListener=function(e,t){return sp(this,e,t,!0)},ap.prototype.once=function(e,t){return lp(t),this.on(e,up(this,e,t)),this},ap.prototype.prependOnceListener=function(e,t){return lp(t),this.prependListener(e,up(this,e,t)),this},ap.prototype.removeListener=function(e,t){var n,i,r,a,o;if(lp(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(r=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,r=a;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},ap.prototype.off=ap.prototype.removeListener,ap.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,a=Object.keys(n);for(i=0;i<a.length;++i)"removeListener"!==(r=a[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},ap.prototype.listeners=function(e){return Ip(this,e,!0)},ap.prototype.rawListeners=function(e){return Ip(this,e,!1)},ap.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):dp.call(e,t)},ap.prototype.listenerCount=dp,ap.prototype.eventNames=function(){return this._eventsCount>0?EA(this._events):[]};var Ap=tp.exports;function pp(e,t,n){var i=void 0===t?null:t,r=function(e,t){var n=atob(e);if(t){for(var i=new Uint8Array(n.length),r=0,a=n.length;r<a;++r)i[r]=n.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return n}(e,void 0!==n&&n),a=r.indexOf("\n",10)+1,o=r.substring(a)+(i?"//# sourceMappingURL="+i:""),l=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(l)}var mp=function(e,t,n){var i;return function(r){return i=i||pp(e,t,n),new Worker(i,r)}}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogUmVjb3JkcyB3aGF0IG9iamVjdHMgYXJlIGNvbGxpZGluZyB3aXRoIGVhY2ggb3RoZXIKICAgKi8KCiAgLyoqCiAgICogQSAzeDMgbWF0cml4LgogICAqIEF1dGhvcmVkIGJ5IHtAbGluayBodHRwOi8vZ2l0aHViLmNvbS9zY2h0ZXBwZS8gc2NodGVwcGV9CiAgICovCiAgY2xhc3MgTWF0MyB7CiAgICAvKioKICAgICAqIEEgdmVjdG9yIG9mIGxlbmd0aCA5LCBjb250YWluaW5nIGFsbCBtYXRyaXggZWxlbWVudHMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBlbGVtZW50cyBBIHZlY3RvciBvZiBsZW5ndGggOSwgY29udGFpbmluZyBhbGwgbWF0cml4IGVsZW1lbnRzLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihlbGVtZW50cykgewogICAgICBpZiAoZWxlbWVudHMgPT09IHZvaWQgMCkgewogICAgICAgIGVsZW1lbnRzID0gWzAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDBdOwogICAgICB9CgogICAgICB0aGlzLmVsZW1lbnRzID0gZWxlbWVudHM7CiAgICB9CiAgICAvKioKICAgICAqIFNldHMgdGhlIG1hdHJpeCB0byBpZGVudGl0eQogICAgICogQHRvZG8gU2hvdWxkIHBlcmhhcHMgYmUgcmVuYW1lZCB0byBgc2V0SWRlbnRpdHkoKWAgdG8gYmUgbW9yZSBjbGVhci4KICAgICAqIEB0b2RvIENyZWF0ZSBhbm90aGVyIGZ1bmN0aW9uIHRoYXQgaW1tZWRpYXRlbHkgY3JlYXRlcyBhbiBpZGVudGl0eSBtYXRyaXggZWcuIGBleWUoKWAKICAgICAqLwoKCiAgICBpZGVudGl0eSgpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGVbMF0gPSAxOwogICAgICBlWzFdID0gMDsKICAgICAgZVsyXSA9IDA7CiAgICAgIGVbM10gPSAwOwogICAgICBlWzRdID0gMTsKICAgICAgZVs1XSA9IDA7CiAgICAgIGVbNl0gPSAwOwogICAgICBlWzddID0gMDsKICAgICAgZVs4XSA9IDE7CiAgICB9CiAgICAvKioKICAgICAqIFNldCBhbGwgZWxlbWVudHMgdG8gemVybwogICAgICovCgoKICAgIHNldFplcm8oKSB7CiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBlWzBdID0gMDsKICAgICAgZVsxXSA9IDA7CiAgICAgIGVbMl0gPSAwOwogICAgICBlWzNdID0gMDsKICAgICAgZVs0XSA9IDA7CiAgICAgIGVbNV0gPSAwOwogICAgICBlWzZdID0gMDsKICAgICAgZVs3XSA9IDA7CiAgICAgIGVbOF0gPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBtYXRyaXggZGlhZ29uYWwgZWxlbWVudHMgZnJvbSBhIFZlYzMKICAgICAqLwoKCiAgICBzZXRUcmFjZSh2ZWN0b3IpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGVbMF0gPSB2ZWN0b3IueDsKICAgICAgZVs0XSA9IHZlY3Rvci55OwogICAgICBlWzhdID0gdmVjdG9yLno7CiAgICB9CiAgICAvKioKICAgICAqIEdldHMgdGhlIG1hdHJpeCBkaWFnb25hbCBlbGVtZW50cwogICAgICovCgoKICAgIGdldFRyYWNlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgdGFyZ2V0LnggPSBlWzBdOwogICAgICB0YXJnZXQueSA9IGVbNF07CiAgICAgIHRhcmdldC56ID0gZVs4XTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTWF0cml4LVZlY3RvciBtdWx0aXBsaWNhdGlvbgogICAgICogQHBhcmFtIHYgVGhlIHZlY3RvciB0byBtdWx0aXBseSB3aXRoCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLCB0YXJnZXQgdG8gc2F2ZSB0aGUgcmVzdWx0IGluLgogICAgICovCgoKICAgIHZtdWx0KHYsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgeCA9IHYueDsKICAgICAgY29uc3QgeSA9IHYueTsKICAgICAgY29uc3QgeiA9IHYuejsKICAgICAgdGFyZ2V0LnggPSBlWzBdICogeCArIGVbMV0gKiB5ICsgZVsyXSAqIHo7CiAgICAgIHRhcmdldC55ID0gZVszXSAqIHggKyBlWzRdICogeSArIGVbNV0gKiB6OwogICAgICB0YXJnZXQueiA9IGVbNl0gKiB4ICsgZVs3XSAqIHkgKyBlWzhdICogejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTWF0cml4LXNjYWxhciBtdWx0aXBsaWNhdGlvbgogICAgICovCgoKICAgIHNtdWx0KHMpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSAqPSBzOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIE1hdHJpeCBtdWx0aXBsaWNhdGlvbgogICAgICogQHBhcmFtIG1hdHJpeCBNYXRyaXggdG8gbXVsdGlwbHkgd2l0aCBmcm9tIGxlZnQgc2lkZS4KICAgICAqLwoKCiAgICBtbXVsdChtYXRyaXgsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgTWF0MygpOwogICAgICB9CgogICAgICBjb25zdCBBID0gdGhpcy5lbGVtZW50czsKICAgICAgY29uc3QgQiA9IG1hdHJpeC5lbGVtZW50czsKICAgICAgY29uc3QgVCA9IHRhcmdldC5lbGVtZW50czsKICAgICAgY29uc3QgYTExID0gQVswXSwKICAgICAgICAgICAgYTEyID0gQVsxXSwKICAgICAgICAgICAgYTEzID0gQVsyXSwKICAgICAgICAgICAgYTIxID0gQVszXSwKICAgICAgICAgICAgYTIyID0gQVs0XSwKICAgICAgICAgICAgYTIzID0gQVs1XSwKICAgICAgICAgICAgYTMxID0gQVs2XSwKICAgICAgICAgICAgYTMyID0gQVs3XSwKICAgICAgICAgICAgYTMzID0gQVs4XTsKICAgICAgY29uc3QgYjExID0gQlswXSwKICAgICAgICAgICAgYjEyID0gQlsxXSwKICAgICAgICAgICAgYjEzID0gQlsyXSwKICAgICAgICAgICAgYjIxID0gQlszXSwKICAgICAgICAgICAgYjIyID0gQls0XSwKICAgICAgICAgICAgYjIzID0gQls1XSwKICAgICAgICAgICAgYjMxID0gQls2XSwKICAgICAgICAgICAgYjMyID0gQls3XSwKICAgICAgICAgICAgYjMzID0gQls4XTsKICAgICAgVFswXSA9IGExMSAqIGIxMSArIGExMiAqIGIyMSArIGExMyAqIGIzMTsKICAgICAgVFsxXSA9IGExMSAqIGIxMiArIGExMiAqIGIyMiArIGExMyAqIGIzMjsKICAgICAgVFsyXSA9IGExMSAqIGIxMyArIGExMiAqIGIyMyArIGExMyAqIGIzMzsKICAgICAgVFszXSA9IGEyMSAqIGIxMSArIGEyMiAqIGIyMSArIGEyMyAqIGIzMTsKICAgICAgVFs0XSA9IGEyMSAqIGIxMiArIGEyMiAqIGIyMiArIGEyMyAqIGIzMjsKICAgICAgVFs1XSA9IGEyMSAqIGIxMyArIGEyMiAqIGIyMyArIGEyMyAqIGIzMzsKICAgICAgVFs2XSA9IGEzMSAqIGIxMSArIGEzMiAqIGIyMSArIGEzMyAqIGIzMTsKICAgICAgVFs3XSA9IGEzMSAqIGIxMiArIGEzMiAqIGIyMiArIGEzMyAqIGIzMjsKICAgICAgVFs4XSA9IGEzMSAqIGIxMyArIGEzMiAqIGIyMyArIGEzMyAqIGIzMzsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2NhbGUgZWFjaCBjb2x1bW4gb2YgdGhlIG1hdHJpeAogICAgICovCgoKICAgIHNjYWxlKHZlY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBNYXQzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGUgPSB0aGlzLmVsZW1lbnRzOwogICAgICBjb25zdCB0ID0gdGFyZ2V0LmVsZW1lbnRzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDM7IGkrKykgewogICAgICAgIHRbMyAqIGkgKyAwXSA9IHZlY3Rvci54ICogZVszICogaSArIDBdOwogICAgICAgIHRbMyAqIGkgKyAxXSA9IHZlY3Rvci55ICogZVszICogaSArIDFdOwogICAgICAgIHRbMyAqIGkgKyAyXSA9IHZlY3Rvci56ICogZVszICogaSArIDJdOwogICAgICB9CgogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTb2x2ZSBBeD1iCiAgICAgKiBAcGFyYW0gYiBUaGUgcmlnaHQgaGFuZCBzaWRlCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBUYXJnZXQgdmVjdG9yIHRvIHNhdmUgaW4uCiAgICAgKiBAcmV0dXJuIFRoZSBzb2x1dGlvbiB4CiAgICAgKiBAdG9kbyBzaG91bGQgcmV1c2UgYXJyYXlzCiAgICAgKi8KCgogICAgc29sdmUoYiwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIC8vIENvbnN0cnVjdCBlcXVhdGlvbnMKICAgICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93cwoKICAgICAgY29uc3QgbmMgPSA0OyAvLyBudW0gY29scwoKICAgICAgY29uc3QgZXFucyA9IFtdOwogICAgICBsZXQgaTsKICAgICAgbGV0IGo7CgogICAgICBmb3IgKGkgPSAwOyBpIDwgbnIgKiBuYzsgaSsrKSB7CiAgICAgICAgZXFucy5wdXNoKDApOwogICAgICB9CgogICAgICBmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKSB7CiAgICAgICAgZm9yIChqID0gMDsgaiA8IDM7IGorKykgewogICAgICAgICAgZXFuc1tpICsgbmMgKiBqXSA9IHRoaXMuZWxlbWVudHNbaSArIDMgKiBqXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGVxbnNbMyArIDQgKiAwXSA9IGIueDsKICAgICAgZXFuc1szICsgNCAqIDFdID0gYi55OwogICAgICBlcW5zWzMgKyA0ICogMl0gPSBiLno7IC8vIENvbXB1dGUgcmlnaHQgdXBwZXIgdHJpYW5ndWxhciB2ZXJzaW9uIG9mIHRoZSBtYXRyaXggLSBHYXVzcyBlbGltaW5hdGlvbgoKICAgICAgbGV0IG4gPSAzOwogICAgICBjb25zdCBrID0gbjsKICAgICAgbGV0IG5wOwogICAgICBjb25zdCBrcCA9IDQ7IC8vIG51bSByb3dzCgogICAgICBsZXQgcDsKCiAgICAgIGRvIHsKICAgICAgICBpID0gayAtIG47CgogICAgICAgIGlmIChlcW5zW2kgKyBuYyAqIGldID09PSAwKSB7CiAgICAgICAgICAvLyB0aGUgcGl2b3QgaXMgbnVsbCwgc3dhcCBsaW5lcwogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgaWYgKGVxbnNbaSArIG5jICogal0gIT09IDApIHsKICAgICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgICBkbyB7CiAgICAgICAgICAgICAgICAvLyBkbyBsaWduZSggaSApID0gbGlnbmUoIGkgKSArIGxpZ25lKCBrICkKICAgICAgICAgICAgICAgIHAgPSBrcCAtIG5wOwogICAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBpXSArPSBlcW5zW3AgKyBuYyAqIGpdOwogICAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwoKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gIT09IDApIHsKICAgICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgazsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBlcW5zW2kgKyBuYyAqIGpdIC8gZXFuc1tpICsgbmMgKiBpXTsKICAgICAgICAgICAgbnAgPSBrcDsKCiAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAvLyBkbyBsaWduZSggayApID0gbGlnbmUoIGsgKSAtIG11bHRpcGxpZXIgKiBsaWduZSggaSApCiAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgZXFuc1twICsgbmMgKiBqXSA9IHAgPD0gaSA/IDAgOiBlcW5zW3AgKyBuYyAqIGpdIC0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgICAgIH0gd2hpbGUgKC0tbnApOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSB3aGlsZSAoLS1uKTsgLy8gR2V0IHRoZSBzb2x1dGlvbgoKCiAgICAgIHRhcmdldC56ID0gZXFuc1syICogbmMgKyAzXSAvIGVxbnNbMiAqIG5jICsgMl07CiAgICAgIHRhcmdldC55ID0gKGVxbnNbMSAqIG5jICsgM10gLSBlcW5zWzEgKiBuYyArIDJdICogdGFyZ2V0LnopIC8gZXFuc1sxICogbmMgKyAxXTsKICAgICAgdGFyZ2V0LnggPSAoZXFuc1swICogbmMgKyAzXSAtIGVxbnNbMCAqIG5jICsgMl0gKiB0YXJnZXQueiAtIGVxbnNbMCAqIG5jICsgMV0gKiB0YXJnZXQueSkgLyBlcW5zWzAgKiBuYyArIDBdOwoKICAgICAgaWYgKGlzTmFOKHRhcmdldC54KSB8fCBpc05hTih0YXJnZXQueSkgfHwgaXNOYU4odGFyZ2V0LnopIHx8IHRhcmdldC54ID09PSBJbmZpbml0eSB8fCB0YXJnZXQueSA9PT0gSW5maW5pdHkgfHwgdGFyZ2V0LnogPT09IEluZmluaXR5KSB7CiAgICAgICAgdGhyb3cgYENvdWxkIG5vdCBzb2x2ZSBlcXVhdGlvbiEgR290IHg9WyR7dGFyZ2V0LnRvU3RyaW5nKCl9XSwgYj1bJHtiLnRvU3RyaW5nKCl9XSwgQT1bJHt0aGlzLnRvU3RyaW5nKCl9XWA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBlbGVtZW50IGluIHRoZSBtYXRyaXggYnkgaW5kZXguIEluZGV4IHN0YXJ0cyBhdCAwLCBub3QgMSEhIQogICAgICogQHBhcmFtIHZhbHVlIElmIHByb3ZpZGVkLCB0aGUgbWF0cml4IGVsZW1lbnQgd2lsbCBiZSBzZXQgdG8gdGhpcyB2YWx1ZS4KICAgICAqLwoKCiAgICBlKHJvdywgY29sdW1uLCB2YWx1ZSkgewogICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzW2NvbHVtbiArIDMgKiByb3ddOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFNldCB2YWx1ZQogICAgICAgIHRoaXMuZWxlbWVudHNbY29sdW1uICsgMyAqIHJvd10gPSB2YWx1ZTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb3B5IGFub3RoZXIgbWF0cml4IGludG8gdGhpcyBtYXRyaXggb2JqZWN0LgogICAgICovCgoKICAgIGNvcHkobWF0cml4KSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0cml4LmVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdGhpcy5lbGVtZW50c1tpXSA9IG1hdHJpeC5lbGVtZW50c1tpXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG1hdHJpeC4KICAgICAqLwoKCiAgICB0b1N0cmluZygpIHsKICAgICAgbGV0IHIgPSAnJzsKICAgICAgY29uc3Qgc2VwID0gJywnOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHsKICAgICAgICByICs9IHRoaXMuZWxlbWVudHNbaV0gKyBzZXA7CiAgICAgIH0KCiAgICAgIHJldHVybiByOwogICAgfQogICAgLyoqCiAgICAgKiByZXZlcnNlIHRoZSBtYXRyaXgKICAgICAqIEBwYXJhbSB0YXJnZXQgVGFyZ2V0IG1hdHJpeCB0byBzYXZlIGluLgogICAgICogQHJldHVybiBUaGUgc29sdXRpb24geAogICAgICovCgoKICAgIHJldmVyc2UodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBNYXQzKCk7CiAgICAgIH0KCiAgICAgIC8vIENvbnN0cnVjdCBlcXVhdGlvbnMKICAgICAgY29uc3QgbnIgPSAzOyAvLyBudW0gcm93cwoKICAgICAgY29uc3QgbmMgPSA2OyAvLyBudW0gY29scwoKICAgICAgY29uc3QgZXFucyA9IHJldmVyc2VfZXFuczsKICAgICAgbGV0IGk7CiAgICAgIGxldCBqOwoKICAgICAgZm9yIChpID0gMDsgaSA8IDM7IGkrKykgewogICAgICAgIGZvciAoaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIGVxbnNbaSArIG5jICogal0gPSB0aGlzLmVsZW1lbnRzW2kgKyAzICogal07CiAgICAgICAgfQogICAgICB9CgogICAgICBlcW5zWzMgKyA2ICogMF0gPSAxOwogICAgICBlcW5zWzMgKyA2ICogMV0gPSAwOwogICAgICBlcW5zWzMgKyA2ICogMl0gPSAwOwogICAgICBlcW5zWzQgKyA2ICogMF0gPSAwOwogICAgICBlcW5zWzQgKyA2ICogMV0gPSAxOwogICAgICBlcW5zWzQgKyA2ICogMl0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMF0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMV0gPSAwOwogICAgICBlcW5zWzUgKyA2ICogMl0gPSAxOyAvLyBDb21wdXRlIHJpZ2h0IHVwcGVyIHRyaWFuZ3VsYXIgdmVyc2lvbiBvZiB0aGUgbWF0cml4IC0gR2F1c3MgZWxpbWluYXRpb24KCiAgICAgIGxldCBuID0gMzsKICAgICAgY29uc3QgayA9IG47CiAgICAgIGxldCBucDsKICAgICAgY29uc3Qga3AgPSBuYzsgLy8gbnVtIHJvd3MKCiAgICAgIGxldCBwOwoKICAgICAgZG8gewogICAgICAgIGkgPSBrIC0gbjsKCiAgICAgICAgaWYgKGVxbnNbaSArIG5jICogaV0gPT09IDApIHsKICAgICAgICAgIC8vIHRoZSBwaXZvdCBpcyBudWxsLCBzd2FwIGxpbmVzCiAgICAgICAgICBmb3IgKGogPSBpICsgMTsgaiA8IGs7IGorKykgewogICAgICAgICAgICBpZiAoZXFuc1tpICsgbmMgKiBqXSAhPT0gMCkgewogICAgICAgICAgICAgIG5wID0ga3A7CgogICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgIC8vIGRvIGxpbmUoIGkgKSA9IGxpbmUoIGkgKSArIGxpbmUoIGsgKQogICAgICAgICAgICAgICAgcCA9IGtwIC0gbnA7CiAgICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldICs9IGVxbnNbcCArIG5jICogal07CiAgICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CgogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoZXFuc1tpICsgbmMgKiBpXSAhPT0gMCkgewogICAgICAgICAgZm9yIChqID0gaSArIDE7IGogPCBrOyBqKyspIHsKICAgICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgICAgICBucCA9IGtwOwoKICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgIC8vIGRvIGxpbmUoIGsgKSA9IGxpbmUoIGsgKSAtIG11bHRpcGxpZXIgKiBsaW5lKCBpICkKICAgICAgICAgICAgICBwID0ga3AgLSBucDsKICAgICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gcCA8PSBpID8gMCA6IGVxbnNbcCArIG5jICogal0gLSBlcW5zW3AgKyBuYyAqIGldICogbXVsdGlwbGllcjsKICAgICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IHdoaWxlICgtLW4pOyAvLyBlbGltaW5hdGUgdGhlIHVwcGVyIGxlZnQgdHJpYW5nbGUgb2YgdGhlIG1hdHJpeAoKCiAgICAgIGkgPSAyOwoKICAgICAgZG8gewogICAgICAgIGogPSBpIC0gMTsKCiAgICAgICAgZG8gewogICAgICAgICAgY29uc3QgbXVsdGlwbGllciA9IGVxbnNbaSArIG5jICogal0gLyBlcW5zW2kgKyBuYyAqIGldOwogICAgICAgICAgbnAgPSBuYzsKCiAgICAgICAgICBkbyB7CiAgICAgICAgICAgIHAgPSBuYyAtIG5wOwogICAgICAgICAgICBlcW5zW3AgKyBuYyAqIGpdID0gZXFuc1twICsgbmMgKiBqXSAtIGVxbnNbcCArIG5jICogaV0gKiBtdWx0aXBsaWVyOwogICAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgICAgfSB3aGlsZSAoai0tKTsKICAgICAgfSB3aGlsZSAoLS1pKTsgLy8gb3BlcmF0aW9ucyBvbiB0aGUgZGlhZ29uYWwKCgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBjb25zdCBtdWx0aXBsaWVyID0gMSAvIGVxbnNbaSArIG5jICogaV07CiAgICAgICAgbnAgPSBuYzsKCiAgICAgICAgZG8gewogICAgICAgICAgcCA9IG5jIC0gbnA7CiAgICAgICAgICBlcW5zW3AgKyBuYyAqIGldID0gZXFuc1twICsgbmMgKiBpXSAqIG11bHRpcGxpZXI7CiAgICAgICAgfSB3aGlsZSAoLS1ucCk7CiAgICAgIH0gd2hpbGUgKGktLSk7CgogICAgICBpID0gMjsKCiAgICAgIGRvIHsKICAgICAgICBqID0gMjsKCiAgICAgICAgZG8gewogICAgICAgICAgcCA9IGVxbnNbbnIgKyBqICsgbmMgKiBpXTsKCiAgICAgICAgICBpZiAoaXNOYU4ocCkgfHwgcCA9PT0gSW5maW5pdHkpIHsKICAgICAgICAgICAgdGhyb3cgYENvdWxkIG5vdCByZXZlcnNlISBBPVske3RoaXMudG9TdHJpbmcoKX1dYDsKICAgICAgICAgIH0KCiAgICAgICAgICB0YXJnZXQuZShpLCBqLCBwKTsKICAgICAgICB9IHdoaWxlIChqLS0pOwogICAgICB9IHdoaWxlIChpLS0pOwoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBtYXRyaXggZnJvbSBhIHF1YXRlcmlvbgogICAgICovCgoKICAgIHNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24ocSkgewogICAgICBjb25zdCB4ID0gcS54OwogICAgICBjb25zdCB5ID0gcS55OwogICAgICBjb25zdCB6ID0gcS56OwogICAgICBjb25zdCB3ID0gcS53OwogICAgICBjb25zdCB4MiA9IHggKyB4OwogICAgICBjb25zdCB5MiA9IHkgKyB5OwogICAgICBjb25zdCB6MiA9IHogKyB6OwogICAgICBjb25zdCB4eCA9IHggKiB4MjsKICAgICAgY29uc3QgeHkgPSB4ICogeTI7CiAgICAgIGNvbnN0IHh6ID0geCAqIHoyOwogICAgICBjb25zdCB5eSA9IHkgKiB5MjsKICAgICAgY29uc3QgeXogPSB5ICogejI7CiAgICAgIGNvbnN0IHp6ID0geiAqIHoyOwogICAgICBjb25zdCB3eCA9IHcgKiB4MjsKICAgICAgY29uc3Qgd3kgPSB3ICogeTI7CiAgICAgIGNvbnN0IHd6ID0gdyAqIHoyOwogICAgICBjb25zdCBlID0gdGhpcy5lbGVtZW50czsKICAgICAgZVszICogMCArIDBdID0gMSAtICh5eSArIHp6KTsKICAgICAgZVszICogMCArIDFdID0geHkgLSB3ejsKICAgICAgZVszICogMCArIDJdID0geHogKyB3eTsKICAgICAgZVszICogMSArIDBdID0geHkgKyB3ejsKICAgICAgZVszICogMSArIDFdID0gMSAtICh4eCArIHp6KTsKICAgICAgZVszICogMSArIDJdID0geXogLSB3eDsKICAgICAgZVszICogMiArIDBdID0geHogLSB3eTsKICAgICAgZVszICogMiArIDFdID0geXogKyB3eDsKICAgICAgZVszICogMiArIDJdID0gMSAtICh4eCArIHl5KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zcG9zZSB0aGUgbWF0cml4CiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsLiBXaGVyZSB0byBzdG9yZSB0aGUgcmVzdWx0LgogICAgICogQHJldHVybiBUaGUgdGFyZ2V0IE1hdDMsIG9yIGEgbmV3IE1hdDMgaWYgdGFyZ2V0IHdhcyBvbWl0dGVkLgogICAgICovCgoKICAgIHRyYW5zcG9zZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IE1hdDMoKTsKICAgICAgfQoKICAgICAgY29uc3QgTSA9IHRoaXMuZWxlbWVudHM7CiAgICAgIGNvbnN0IFQgPSB0YXJnZXQuZWxlbWVudHM7CiAgICAgIGxldCB0bXA7IC8vU2V0IGRpYWdvbmFscwoKICAgICAgVFswXSA9IE1bMF07CiAgICAgIFRbNF0gPSBNWzRdOwogICAgICBUWzhdID0gTVs4XTsKICAgICAgdG1wID0gTVsxXTsKICAgICAgVFsxXSA9IE1bM107CiAgICAgIFRbM10gPSB0bXA7CiAgICAgIHRtcCA9IE1bMl07CiAgICAgIFRbMl0gPSBNWzZdOwogICAgICBUWzZdID0gdG1wOwogICAgICB0bXAgPSBNWzVdOwogICAgICBUWzVdID0gTVs3XTsKICAgICAgVFs3XSA9IHRtcDsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgfQogIGNvbnN0IHJldmVyc2VfZXFucyA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTsKCiAgLyoqCiAgICogMy1kaW1lbnNpb25hbCB2ZWN0b3IKICAgKiBAZXhhbXBsZQogICAqICAgICBjb25zdCB2ID0gbmV3IFZlYzMoMSwgMiwgMykKICAgKiAgICAgY29uc29sZS5sb2coJ3g9JyArIHYueCkgLy8geD0xCiAgICovCgogIGNsYXNzIFZlYzMgewogICAgY29uc3RydWN0b3IoeCwgeSwgeikgewogICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7CiAgICAgICAgeCA9IDAuMDsKICAgICAgfQoKICAgICAgaWYgKHkgPT09IHZvaWQgMCkgewogICAgICAgIHkgPSAwLjA7CiAgICAgIH0KCiAgICAgIGlmICh6ID09PSB2b2lkIDApIHsKICAgICAgICB6ID0gMC4wOwogICAgICB9CgogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgY3Jvc3MgcHJvZHVjdAogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbi4KICAgICAqLwoKCiAgICBjcm9zcyh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB2eCA9IHZlY3Rvci54OwogICAgICBjb25zdCB2eSA9IHZlY3Rvci55OwogICAgICBjb25zdCB2eiA9IHZlY3Rvci56OwogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHkgKiB2eiAtIHogKiB2eTsKICAgICAgdGFyZ2V0LnkgPSB6ICogdnggLSB4ICogdno7CiAgICAgIHRhcmdldC56ID0geCAqIHZ5IC0geSAqIHZ4OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHZlY3RvcnMnIDMgZWxlbWVudHMKICAgICAqLwoKCiAgICBzZXQoeCwgeSwgeikgewogICAgICB0aGlzLnggPSB4OwogICAgICB0aGlzLnkgPSB5OwogICAgICB0aGlzLnogPSB6OwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogU2V0IGFsbCBjb21wb25lbnRzIG9mIHRoZSB2ZWN0b3IgdG8gemVyby4KICAgICAqLwoKCiAgICBzZXRaZXJvKCkgewogICAgICB0aGlzLnggPSB0aGlzLnkgPSB0aGlzLnogPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBWZWN0b3IgYWRkaXRpb24KICAgICAqLwoKCiAgICB2YWRkKHZlY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQpIHsKICAgICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICsgdGhpcy54OwogICAgICAgIHRhcmdldC55ID0gdmVjdG9yLnkgKyB0aGlzLnk7CiAgICAgICAgdGFyZ2V0LnogPSB2ZWN0b3IueiArIHRoaXMuejsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbmV3IFZlYzModGhpcy54ICsgdmVjdG9yLngsIHRoaXMueSArIHZlY3Rvci55LCB0aGlzLnogKyB2ZWN0b3Iueik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVmVjdG9yIHN1YnRyYWN0aW9uCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluLgogICAgICovCgoKICAgIHZzdWIodmVjdG9yLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCkgewogICAgICAgIHRhcmdldC54ID0gdGhpcy54IC0gdmVjdG9yLng7CiAgICAgICAgdGFyZ2V0LnkgPSB0aGlzLnkgLSB2ZWN0b3IueTsKICAgICAgICB0YXJnZXQueiA9IHRoaXMueiAtIHZlY3Rvci56OwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBuZXcgVmVjMyh0aGlzLnggLSB2ZWN0b3IueCwgdGhpcy55IC0gdmVjdG9yLnksIHRoaXMueiAtIHZlY3Rvci56KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGNyb3NzIHByb2R1Y3QgbWF0cml4IGFfY3Jvc3MgZnJvbSBhIHZlY3Rvciwgc3VjaCB0aGF0IGEgeCBiID0gYV9jcm9zcyAqIGIgPSBjCiAgICAgKgogICAgICogU2VlIHtAbGluayBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci9UREJEMjQvVlQwNi9sZWN0dXJlcy9MZWN0dXJlNi5wZGYgVW1lw6UgVW5pdmVyc2l0eSBMZWN0dXJlfQogICAgICovCgoKICAgIGNyb3NzbWF0KCkgewogICAgICByZXR1cm4gbmV3IE1hdDMoWzAsIC10aGlzLnosIHRoaXMueSwgdGhpcy56LCAwLCAtdGhpcy54LCAtdGhpcy55LCB0aGlzLngsIDBdKTsKICAgIH0KICAgIC8qKgogICAgICogTm9ybWFsaXplIHRoZSB2ZWN0b3IuIE5vdGUgdGhhdCB0aGlzIGNoYW5nZXMgdGhlIHZhbHVlcyBpbiB0aGUgdmVjdG9yLgogICAgICAqIEByZXR1cm4gUmV0dXJucyB0aGUgbm9ybSBvZiB0aGUgdmVjdG9yCiAgICAgKi8KCgogICAgbm9ybWFsaXplKCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBuID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeik7CgogICAgICBpZiAobiA+IDAuMCkgewogICAgICAgIGNvbnN0IGludk4gPSAxIC8gbjsKICAgICAgICB0aGlzLnggKj0gaW52TjsKICAgICAgICB0aGlzLnkgKj0gaW52TjsKICAgICAgICB0aGlzLnogKj0gaW52TjsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBNYWtlIHNvbWV0aGluZyB1cAogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICB9CgogICAgICByZXR1cm4gbjsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSB2ZXJzaW9uIG9mIHRoaXMgdmVjdG9yIHRoYXQgaXMgb2YgbGVuZ3RoIDEuCiAgICAgKiBAcGFyYW0gdGFyZ2V0IE9wdGlvbmFsIHRhcmdldCB0byBzYXZlIGluCiAgICAgKiBAcmV0dXJuIFJldHVybnMgdGhlIHVuaXQgdmVjdG9yCiAgICAgKi8KCgogICAgdW5pdCh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgbGV0IG5pbnYgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKCiAgICAgIGlmIChuaW52ID4gMC4wKSB7CiAgICAgICAgbmludiA9IDEuMCAvIG5pbnY7CiAgICAgICAgdGFyZ2V0LnggPSB4ICogbmludjsKICAgICAgICB0YXJnZXQueSA9IHkgKiBuaW52OwogICAgICAgIHRhcmdldC56ID0geiAqIG5pbnY7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGFyZ2V0LnggPSAxOwogICAgICAgIHRhcmdldC55ID0gMDsKICAgICAgICB0YXJnZXQueiA9IDA7CiAgICAgIH0KCiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgbGVuZ3RoIG9mIHRoZSB2ZWN0b3IKICAgICAqLwoKCiAgICBsZW5ndGgoKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBzcXVhcmVkIGxlbmd0aCBvZiB0aGUgdmVjdG9yLgogICAgICovCgoKICAgIGxlbmd0aFNxdWFyZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmRvdCh0aGlzKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGRpc3RhbmNlIGZyb20gdGhpcyBwb2ludCB0byBhbm90aGVyIHBvaW50CiAgICAgKi8KCgogICAgZGlzdGFuY2VUbyhwKSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIGNvbnN0IHB4ID0gcC54OwogICAgICBjb25zdCBweSA9IHAueTsKICAgICAgY29uc3QgcHogPSBwLno7CiAgICAgIHJldHVybiBNYXRoLnNxcnQoKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHNxdWFyZWQgZGlzdGFuY2UgZnJvbSB0aGlzIHBvaW50IHRvIGFub3RoZXIgcG9pbnQKICAgICAqLwoKCiAgICBkaXN0YW5jZVNxdWFyZWQocCkgewogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCBweCA9IHAueDsKICAgICAgY29uc3QgcHkgPSBwLnk7CiAgICAgIGNvbnN0IHB6ID0gcC56OwogICAgICByZXR1cm4gKHB4IC0geCkgKiAocHggLSB4KSArIChweSAtIHkpICogKHB5IC0geSkgKyAocHogLSB6KSAqIChweiAtIHopOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSBhbGwgdGhlIGNvbXBvbmVudHMgb2YgdGhlIHZlY3RvciB3aXRoIGEgc2NhbGFyLgogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBzY2FsZShzY2FsYXIsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICB0YXJnZXQueCA9IHNjYWxhciAqIHg7CiAgICAgIHRhcmdldC55ID0gc2NhbGFyICogeTsKICAgICAgdGFyZ2V0LnogPSBzY2FsYXIgKiB6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgdmVjdG9yIHdpdGggYW4gb3RoZXIgdmVjdG9yLCBjb21wb25lbnQtd2lzZS4KICAgICAqIEBwYXJhbSB0YXJnZXQgVGhlIHZlY3RvciB0byBzYXZlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgdm11bCh2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHZlY3Rvci54ICogdGhpcy54OwogICAgICB0YXJnZXQueSA9IHZlY3Rvci55ICogdGhpcy55OwogICAgICB0YXJnZXQueiA9IHZlY3Rvci56ICogdGhpcy56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBTY2FsZSBhIHZlY3RvciBhbmQgYWRkIGl0IHRvIHRoaXMgdmVjdG9yLiBTYXZlIHRoZSByZXN1bHQgaW4gInRhcmdldCIuICh0YXJnZXQgPSB0aGlzICsgdmVjdG9yICogc2NhbGFyKQogICAgICogQHBhcmFtIHRhcmdldCBUaGUgdmVjdG9yIHRvIHNhdmUgdGhlIHJlc3VsdCBpbi4KICAgICAqLwoKCiAgICBhZGRTY2FsZWRWZWN0b3Ioc2NhbGFyLCB2ZWN0b3IsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IHRoaXMueCArIHNjYWxhciAqIHZlY3Rvci54OwogICAgICB0YXJnZXQueSA9IHRoaXMueSArIHNjYWxhciAqIHZlY3Rvci55OwogICAgICB0YXJnZXQueiA9IHRoaXMueiArIHNjYWxhciAqIHZlY3Rvci56OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgZG90IHByb2R1Y3QKICAgICAqIEBwYXJhbSB2ZWN0b3IKICAgICAqLwoKCiAgICBkb3QodmVjdG9yKSB7CiAgICAgIHJldHVybiB0aGlzLnggKiB2ZWN0b3IueCArIHRoaXMueSAqIHZlY3Rvci55ICsgdGhpcy56ICogdmVjdG9yLno7CiAgICB9CgogICAgaXNaZXJvKCkgewogICAgICByZXR1cm4gdGhpcy54ID09PSAwICYmIHRoaXMueSA9PT0gMCAmJiB0aGlzLnogPT09IDA7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgdGhlIHZlY3RvciBwb2ludCBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uLgogICAgICogQHBhcmFtIHRhcmdldCBPcHRpb25hbCB0YXJnZXQgdG8gc2F2ZSBpbgogICAgICovCgoKICAgIG5lZ2F0ZSh0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnggPSAtdGhpcy54OwogICAgICB0YXJnZXQueSA9IC10aGlzLnk7CiAgICAgIHRhcmdldC56ID0gLXRoaXMuejsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0d28gYXJ0aWZpY2lhbCB0YW5nZW50cyB0byB0aGUgdmVjdG9yCiAgICAgKiBAcGFyYW0gdDEgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBmaXJzdCB0YW5nZW50IGluCiAgICAgKiBAcGFyYW0gdDIgVmVjdG9yIG9iamVjdCB0byBzYXZlIHRoZSBzZWNvbmQgdGFuZ2VudCBpbgogICAgICovCgoKICAgIHRhbmdlbnRzKHQxLCB0MikgewogICAgICBjb25zdCBub3JtID0gdGhpcy5sZW5ndGgoKTsKCiAgICAgIGlmIChub3JtID4gMC4wKSB7CiAgICAgICAgY29uc3QgbiA9IFZlYzNfdGFuZ2VudHNfbjsKICAgICAgICBjb25zdCBpbm9ybSA9IDEgLyBub3JtOwogICAgICAgIG4uc2V0KHRoaXMueCAqIGlub3JtLCB0aGlzLnkgKiBpbm9ybSwgdGhpcy56ICogaW5vcm0pOwogICAgICAgIGNvbnN0IHJhbmRWZWMgPSBWZWMzX3RhbmdlbnRzX3JhbmRWZWM7CgogICAgICAgIGlmIChNYXRoLmFicyhuLngpIDwgMC45KSB7CiAgICAgICAgICByYW5kVmVjLnNldCgxLCAwLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByYW5kVmVjLnNldCgwLCAxLCAwKTsKICAgICAgICAgIG4uY3Jvc3MocmFuZFZlYywgdDEpOwogICAgICAgIH0KCiAgICAgICAgbi5jcm9zcyh0MSwgdDIpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRoZSBub3JtYWwgbGVuZ3RoIGlzIHplcm8sIG1ha2Ugc29tZXRoaW5nIHVwCiAgICAgICAgdDEuc2V0KDEsIDAsIDApOwogICAgICAgIHQyLnNldCgwLCAxLCAwKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhIG1vcmUgcmVhZGFibGUgZm9ybWF0CiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBgJHt0aGlzLnh9LCR7dGhpcy55fSwke3RoaXMuen1gOwogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0cyB0byBhbiBhcnJheQogICAgICovCgoKICAgIHRvQXJyYXkoKSB7CiAgICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnksIHRoaXMuel07CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyB2ZWN0b3IuCiAgICAgKi8KCgogICAgY29weSh2ZWN0b3IpIHsKICAgICAgdGhpcy54ID0gdmVjdG9yLng7CiAgICAgIHRoaXMueSA9IHZlY3Rvci55OwogICAgICB0aGlzLnogPSB2ZWN0b3IuejsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIERvIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gdmVjdG9ycwogICAgICogQHBhcmFtIHQgQSBudW1iZXIgYmV0d2VlbiAwIGFuZCAxLiAwIHdpbGwgbWFrZSB0aGlzIGZ1bmN0aW9uIHJldHVybiB1LCBhbmQgMSB3aWxsIG1ha2UgaXQgcmV0dXJuIHYuIE51bWJlcnMgaW4gYmV0d2VlbiB3aWxsIGdlbmVyYXRlIGEgdmVjdG9yIGluIGJldHdlZW4gdGhlbS4KICAgICAqLwoKCiAgICBsZXJwKHZlY3RvciwgdCwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IHggPSB0aGlzLng7CiAgICAgIGNvbnN0IHkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHogPSB0aGlzLno7CiAgICAgIHRhcmdldC54ID0geCArICh2ZWN0b3IueCAtIHgpICogdDsKICAgICAgdGFyZ2V0LnkgPSB5ICsgKHZlY3Rvci55IC0geSkgKiB0OwogICAgICB0YXJnZXQueiA9IHogKyAodmVjdG9yLnogLSB6KSAqIHQ7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdmVjdG9yIGVxdWFscyBpcyBhbG1vc3QgZXF1YWwgdG8gYW5vdGhlciBvbmUuCiAgICAgKi8KCgogICAgYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uKSB7CiAgICAgIGlmIChwcmVjaXNpb24gPT09IHZvaWQgMCkgewogICAgICAgIHByZWNpc2lvbiA9IDFlLTY7CiAgICAgIH0KCiAgICAgIGlmIChNYXRoLmFicyh0aGlzLnggLSB2ZWN0b3IueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55IC0gdmVjdG9yLnkpID4gcHJlY2lzaW9uIHx8IE1hdGguYWJzKHRoaXMueiAtIHZlY3Rvci56KSA+IHByZWNpc2lvbikgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGEgdmVjdG9yIGlzIGFsbW9zdCB6ZXJvCiAgICAgKi8KCgogICAgYWxtb3N0WmVybyhwcmVjaXNpb24pIHsKICAgICAgaWYgKHByZWNpc2lvbiA9PT0gdm9pZCAwKSB7CiAgICAgICAgcHJlY2lzaW9uID0gMWUtNjsKICAgICAgfQoKICAgICAgaWYgKE1hdGguYWJzKHRoaXMueCkgPiBwcmVjaXNpb24gfHwgTWF0aC5hYnModGhpcy55KSA+IHByZWNpc2lvbiB8fCBNYXRoLmFicyh0aGlzLnopID4gcHJlY2lzaW9uKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIHZlY3RvciBpcyBhbnRpLXBhcmFsbGVsIHRvIGFub3RoZXIgdmVjdG9yLgogICAgICogQHBhcmFtIHByZWNpc2lvbiBTZXQgdG8gemVybyBmb3IgZXhhY3QgY29tcGFyaXNvbnMKICAgICAqLwoKCiAgICBpc0FudGlwYXJhbGxlbFRvKHZlY3RvciwgcHJlY2lzaW9uKSB7CiAgICAgIHRoaXMubmVnYXRlKGFudGlwX25lZyk7CiAgICAgIHJldHVybiBhbnRpcF9uZWcuYWxtb3N0RXF1YWxzKHZlY3RvciwgcHJlY2lzaW9uKTsKICAgIH0KICAgIC8qKgogICAgICogQ2xvbmUgdGhlIHZlY3RvcgogICAgICovCgoKICAgIGNsb25lKCkgewogICAgICByZXR1cm4gbmV3IFZlYzModGhpcy54LCB0aGlzLnksIHRoaXMueik7CiAgICB9CgogIH0KICBWZWMzLlpFUk8gPSBuZXcgVmVjMygwLCAwLCAwKTsKICBWZWMzLlVOSVRfWCA9IG5ldyBWZWMzKDEsIDAsIDApOwogIFZlYzMuVU5JVF9ZID0gbmV3IFZlYzMoMCwgMSwgMCk7CiAgVmVjMy5VTklUX1ogPSBuZXcgVmVjMygwLCAwLCAxKTsKICBjb25zdCBWZWMzX3RhbmdlbnRzX24gPSBuZXcgVmVjMygpOwogIGNvbnN0IFZlYzNfdGFuZ2VudHNfcmFuZFZlYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYW50aXBfbmVnID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQXhpcyBhbGlnbmVkIGJvdW5kaW5nIGJveCBjbGFzcy4KICAgKi8KICBjbGFzcyBBQUJCIHsKICAgIC8qKgogICAgICogVGhlIGxvd2VyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3gKICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHVwcGVyIGJvdW5kIG9mIHRoZSBib3VuZGluZyBib3gKICAgICAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLmxvd2VyQm91bmQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnVwcGVyQm91bmQgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMubG93ZXJCb3VuZCkgewogICAgICAgIHRoaXMubG93ZXJCb3VuZC5jb3B5KG9wdGlvbnMubG93ZXJCb3VuZCk7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnVwcGVyQm91bmQpIHsKICAgICAgICB0aGlzLnVwcGVyQm91bmQuY29weShvcHRpb25zLnVwcGVyQm91bmQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgQUFCQiBib3VuZHMgZnJvbSBhIHNldCBvZiBwb2ludHMuCiAgICAgKiBAcGFyYW0gcG9pbnRzIEFuIGFycmF5IG9mIFZlYzMncy4KICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0CiAgICAgKi8KCgogICAgc2V0RnJvbVBvaW50cyhwb2ludHMsIHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCBza2luU2l6ZSkgewogICAgICBjb25zdCBsID0gdGhpcy5sb3dlckJvdW5kOwogICAgICBjb25zdCB1ID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBxID0gcXVhdGVybmlvbjsgLy8gU2V0IHRvIHRoZSBmaXJzdCBwb2ludAoKICAgICAgbC5jb3B5KHBvaW50c1swXSk7CgogICAgICBpZiAocSkgewogICAgICAgIHEudm11bHQobCwgbCk7CiAgICAgIH0KCiAgICAgIHUuY29weShsKTsKCiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IHAgPSBwb2ludHNbaV07CgogICAgICAgIGlmIChxKSB7CiAgICAgICAgICBxLnZtdWx0KHAsIHRtcCQxKTsKICAgICAgICAgIHAgPSB0bXAkMTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnggPiB1LngpIHsKICAgICAgICAgIHUueCA9IHAueDsKICAgICAgICB9CgogICAgICAgIGlmIChwLnggPCBsLngpIHsKICAgICAgICAgIGwueCA9IHAueDsKICAgICAgICB9CgogICAgICAgIGlmIChwLnkgPiB1LnkpIHsKICAgICAgICAgIHUueSA9IHAueTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnkgPCBsLnkpIHsKICAgICAgICAgIGwueSA9IHAueTsKICAgICAgICB9CgogICAgICAgIGlmIChwLnogPiB1LnopIHsKICAgICAgICAgIHUueiA9IHAuejsKICAgICAgICB9CgogICAgICAgIGlmIChwLnogPCBsLnopIHsKICAgICAgICAgIGwueiA9IHAuejsKICAgICAgICB9CiAgICAgIH0gLy8gQWRkIG9mZnNldAoKCiAgICAgIGlmIChwb3NpdGlvbikgewogICAgICAgIHBvc2l0aW9uLnZhZGQobCwgbCk7CiAgICAgICAgcG9zaXRpb24udmFkZCh1LCB1KTsKICAgICAgfQoKICAgICAgaWYgKHNraW5TaXplKSB7CiAgICAgICAgbC54IC09IHNraW5TaXplOwogICAgICAgIGwueSAtPSBza2luU2l6ZTsKICAgICAgICBsLnogLT0gc2tpblNpemU7CiAgICAgICAgdS54ICs9IHNraW5TaXplOwogICAgICAgIHUueSArPSBza2luU2l6ZTsKICAgICAgICB1LnogKz0gc2tpblNpemU7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBDb3B5IGJvdW5kcyBmcm9tIGFuIEFBQkIgdG8gdGhpcyBBQUJCCiAgICAgKiBAcGFyYW0gYWFiYiBTb3VyY2UgdG8gY29weSBmcm9tCiAgICAgKiBAcmV0dXJuIFRoZSB0aGlzIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eQogICAgICovCgoKICAgIGNvcHkoYWFiYikgewogICAgICB0aGlzLmxvd2VyQm91bmQuY29weShhYWJiLmxvd2VyQm91bmQpOwogICAgICB0aGlzLnVwcGVyQm91bmQuY29weShhYWJiLnVwcGVyQm91bmQpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogQ2xvbmUgYW4gQUFCQgogICAgICovCgoKICAgIGNsb25lKCkgewogICAgICByZXR1cm4gbmV3IEFBQkIoKS5jb3B5KHRoaXMpOwogICAgfQogICAgLyoqCiAgICAgKiBFeHRlbmQgdGhpcyBBQUJCIHNvIHRoYXQgaXQgY292ZXJzIHRoZSBnaXZlbiBBQUJCIHRvby4KICAgICAqLwoKCiAgICBleHRlbmQoYWFiYikgewogICAgICB0aGlzLmxvd2VyQm91bmQueCA9IE1hdGgubWluKHRoaXMubG93ZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueCk7CiAgICAgIHRoaXMudXBwZXJCb3VuZC54ID0gTWF0aC5tYXgodGhpcy51cHBlckJvdW5kLngsIGFhYmIudXBwZXJCb3VuZC54KTsKICAgICAgdGhpcy5sb3dlckJvdW5kLnkgPSBNYXRoLm1pbih0aGlzLmxvd2VyQm91bmQueSwgYWFiYi5sb3dlckJvdW5kLnkpOwogICAgICB0aGlzLnVwcGVyQm91bmQueSA9IE1hdGgubWF4KHRoaXMudXBwZXJCb3VuZC55LCBhYWJiLnVwcGVyQm91bmQueSk7CiAgICAgIHRoaXMubG93ZXJCb3VuZC56ID0gTWF0aC5taW4odGhpcy5sb3dlckJvdW5kLnosIGFhYmIubG93ZXJCb3VuZC56KTsKICAgICAgdGhpcy51cHBlckJvdW5kLnogPSBNYXRoLm1heCh0aGlzLnVwcGVyQm91bmQueiwgYWFiYi51cHBlckJvdW5kLnopOwogICAgfQogICAgLyoqCiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIEFBQkIgb3ZlcmxhcHMgdGhpcyBBQUJCLgogICAgICovCgoKICAgIG92ZXJsYXBzKGFhYmIpIHsKICAgICAgY29uc3QgbDEgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTIgPSBhYWJiLnVwcGVyQm91bmQ7IC8vICAgICAgbDIgICAgICAgIHUyCiAgICAgIC8vICAgICAgfC0tLS0tLS0tLXwKICAgICAgLy8gfC0tLS0tLS0tfAogICAgICAvLyBsMSAgICAgICB1MQoKICAgICAgY29uc3Qgb3ZlcmxhcHNYID0gbDIueCA8PSB1MS54ICYmIHUxLnggPD0gdTIueCB8fCBsMS54IDw9IHUyLnggJiYgdTIueCA8PSB1MS54OwogICAgICBjb25zdCBvdmVybGFwc1kgPSBsMi55IDw9IHUxLnkgJiYgdTEueSA8PSB1Mi55IHx8IGwxLnkgPD0gdTIueSAmJiB1Mi55IDw9IHUxLnk7CiAgICAgIGNvbnN0IG92ZXJsYXBzWiA9IGwyLnogPD0gdTEueiAmJiB1MS56IDw9IHUyLnogfHwgbDEueiA8PSB1Mi56ICYmIHUyLnogPD0gdTEuejsKICAgICAgcmV0dXJuIG92ZXJsYXBzWCAmJiBvdmVybGFwc1kgJiYgb3ZlcmxhcHNaOwogICAgfSAvLyBNb3N0bHkgZm9yIGRlYnVnZ2luZwoKCiAgICB2b2x1bWUoKSB7CiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIHJldHVybiAodS54IC0gbC54KSAqICh1LnkgLSBsLnkpICogKHUueiAtIGwueik7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gQUFCQiBpcyBmdWxseSBjb250YWluZWQgaW4gdGhpcyBBQUJCLgogICAgICovCgoKICAgIGNvbnRhaW5zKGFhYmIpIHsKICAgICAgY29uc3QgbDEgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUxID0gdGhpcy51cHBlckJvdW5kOwogICAgICBjb25zdCBsMiA9IGFhYmIubG93ZXJCb3VuZDsKICAgICAgY29uc3QgdTIgPSBhYWJiLnVwcGVyQm91bmQ7IC8vICAgICAgbDIgICAgICAgIHUyCiAgICAgIC8vICAgICAgfC0tLS0tLS0tLXwKICAgICAgLy8gfC0tLS0tLS0tLS0tLS0tLXwKICAgICAgLy8gbDEgICAgICAgICAgICAgIHUxCgogICAgICByZXR1cm4gbDEueCA8PSBsMi54ICYmIHUxLnggPj0gdTIueCAmJiBsMS55IDw9IGwyLnkgJiYgdTEueSA+PSB1Mi55ICYmIGwxLnogPD0gbDIueiAmJiB1MS56ID49IHUyLno7CiAgICB9CgogICAgZ2V0Q29ybmVycyhhLCBiLCBjLCBkLCBlLCBmLCBnLCBoKSB7CiAgICAgIGNvbnN0IGwgPSB0aGlzLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB0aGlzLnVwcGVyQm91bmQ7CiAgICAgIGEuY29weShsKTsKICAgICAgYi5zZXQodS54LCBsLnksIGwueik7CiAgICAgIGMuc2V0KHUueCwgdS55LCBsLnopOwogICAgICBkLnNldChsLngsIHUueSwgdS56KTsKICAgICAgZS5zZXQodS54LCBsLnksIHUueik7CiAgICAgIGYuc2V0KGwueCwgdS55LCBsLnopOwogICAgICBnLnNldChsLngsIGwueSwgdS56KTsKICAgICAgaC5jb3B5KHUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gYW5vdGhlciBmcmFtZS4KICAgICAqIEByZXR1cm4gVGhlICJ0YXJnZXQiIEFBQkIgb2JqZWN0LgogICAgICovCgoKICAgIHRvTG9jYWxGcmFtZShmcmFtZSwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVyczsKICAgICAgY29uc3QgYSA9IGNvcm5lcnNbMF07CiAgICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdOwogICAgICBjb25zdCBjID0gY29ybmVyc1syXTsKICAgICAgY29uc3QgZCA9IGNvcm5lcnNbM107CiAgICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdOwogICAgICBjb25zdCBmID0gY29ybmVyc1s1XTsKICAgICAgY29uc3QgZyA9IGNvcm5lcnNbNl07CiAgICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lCgogICAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07CiAgICAgICAgZnJhbWUucG9pbnRUb0xvY2FsKGNvcm5lciwgY29ybmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHJlcHJlc2VudGF0aW9uIG9mIGFuIEFBQkIgaW4gdGhlIGdsb2JhbCBmcmFtZS4KICAgICAqIEByZXR1cm4gVGhlICJ0YXJnZXQiIEFBQkIgb2JqZWN0LgogICAgICovCgoKICAgIHRvV29ybGRGcmFtZShmcmFtZSwgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSB0cmFuc2Zvcm1JbnRvRnJhbWVfY29ybmVyczsKICAgICAgY29uc3QgYSA9IGNvcm5lcnNbMF07CiAgICAgIGNvbnN0IGIgPSBjb3JuZXJzWzFdOwogICAgICBjb25zdCBjID0gY29ybmVyc1syXTsKICAgICAgY29uc3QgZCA9IGNvcm5lcnNbM107CiAgICAgIGNvbnN0IGUgPSBjb3JuZXJzWzRdOwogICAgICBjb25zdCBmID0gY29ybmVyc1s1XTsKICAgICAgY29uc3QgZyA9IGNvcm5lcnNbNl07CiAgICAgIGNvbnN0IGggPSBjb3JuZXJzWzddOyAvLyBHZXQgY29ybmVycyBpbiBjdXJyZW50IGZyYW1lCgogICAgICB0aGlzLmdldENvcm5lcnMoYSwgYiwgYywgZCwgZSwgZiwgZywgaCk7IC8vIFRyYW5zZm9ybSB0aGVtIHRvIG5ldyBsb2NhbCBmcmFtZQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNvcm5lciA9IGNvcm5lcnNbaV07CiAgICAgICAgZnJhbWUucG9pbnRUb1dvcmxkKGNvcm5lciwgY29ybmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldC5zZXRGcm9tUG9pbnRzKGNvcm5lcnMpOwogICAgfQogICAgLyoqCiAgICAgKiBDaGVjayBpZiB0aGUgQUFCQiBpcyBoaXQgYnkgYSByYXkuCiAgICAgKi8KCgogICAgb3ZlcmxhcHNSYXkocmF5KSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBkaXJlY3Rpb24sCiAgICAgICAgZnJvbQogICAgICB9ID0gcmF5OyAvLyBjb25zdCB0ID0gMAogICAgICAvLyByYXkuZGlyZWN0aW9uIGlzIHVuaXQgZGlyZWN0aW9uIHZlY3RvciBvZiByYXkKCiAgICAgIGNvbnN0IGRpckZyYWNYID0gMSAvIGRpcmVjdGlvbi54OwogICAgICBjb25zdCBkaXJGcmFjWSA9IDEgLyBkaXJlY3Rpb24ueTsKICAgICAgY29uc3QgZGlyRnJhY1ogPSAxIC8gZGlyZWN0aW9uLno7IC8vIHRoaXMubG93ZXJCb3VuZCBpcyB0aGUgY29ybmVyIG9mIEFBQkIgd2l0aCBtaW5pbWFsIGNvb3JkaW5hdGVzIC0gbGVmdCBib3R0b20sIHJ0IGlzIG1heGltYWwgY29ybmVyCgogICAgICBjb25zdCB0MSA9ICh0aGlzLmxvd2VyQm91bmQueCAtIGZyb20ueCkgKiBkaXJGcmFjWDsKICAgICAgY29uc3QgdDIgPSAodGhpcy51cHBlckJvdW5kLnggLSBmcm9tLngpICogZGlyRnJhY1g7CiAgICAgIGNvbnN0IHQzID0gKHRoaXMubG93ZXJCb3VuZC55IC0gZnJvbS55KSAqIGRpckZyYWNZOwogICAgICBjb25zdCB0NCA9ICh0aGlzLnVwcGVyQm91bmQueSAtIGZyb20ueSkgKiBkaXJGcmFjWTsKICAgICAgY29uc3QgdDUgPSAodGhpcy5sb3dlckJvdW5kLnogLSBmcm9tLnopICogZGlyRnJhY1o7CiAgICAgIGNvbnN0IHQ2ID0gKHRoaXMudXBwZXJCb3VuZC56IC0gZnJvbS56KSAqIGRpckZyYWNaOyAvLyBjb25zdCB0bWluID0gTWF0aC5tYXgoTWF0aC5tYXgoTWF0aC5taW4odDEsIHQyKSwgTWF0aC5taW4odDMsIHQ0KSkpOwogICAgICAvLyBjb25zdCB0bWF4ID0gTWF0aC5taW4oTWF0aC5taW4oTWF0aC5tYXgodDEsIHQyKSwgTWF0aC5tYXgodDMsIHQ0KSkpOwoKICAgICAgY29uc3QgdG1pbiA9IE1hdGgubWF4KE1hdGgubWF4KE1hdGgubWluKHQxLCB0MiksIE1hdGgubWluKHQzLCB0NCkpLCBNYXRoLm1pbih0NSwgdDYpKTsKICAgICAgY29uc3QgdG1heCA9IE1hdGgubWluKE1hdGgubWluKE1hdGgubWF4KHQxLCB0MiksIE1hdGgubWF4KHQzLCB0NCkpLCBNYXRoLm1heCh0NSwgdDYpKTsgLy8gaWYgdG1heCA8IDAsIHJheSAobGluZSkgaXMgaW50ZXJzZWN0aW5nIEFBQkIsIGJ1dCB3aG9sZSBBQUJCIGlzIGJlaGluZyB1cwoKICAgICAgaWYgKHRtYXggPCAwKSB7CiAgICAgICAgLy90ID0gdG1heDsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0gLy8gaWYgdG1pbiA+IHRtYXgsIHJheSBkb2Vzbid0IGludGVyc2VjdCBBQUJCCgoKICAgICAgaWYgKHRtaW4gPiB0bWF4KSB7CiAgICAgICAgLy90ID0gdG1heDsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICB9CiAgY29uc3QgdG1wJDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRyYW5zZm9ybUludG9GcmFtZV9jb3JuZXJzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwoKICAvKioKICAgKiBDb2xsaXNpb24gIm1hdHJpeCIuCiAgICogSXQncyBhY3R1YWxseSBhIHRyaWFuZ3VsYXItc2hhcGVkIGFycmF5IG9mIHdoZXRoZXIgdHdvIGJvZGllcyBhcmUgdG91Y2hpbmcgdGhpcyBzdGVwLCBmb3IgcmVmZXJlbmNlIG5leHQgc3RlcAogICAqLwogIGNsYXNzIEFycmF5Q29sbGlzaW9uTWF0cml4IHsKICAgIC8qKgogICAgICogVGhlIG1hdHJpeCBzdG9yYWdlLgogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5tYXRyaXggPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGFuIGVsZW1lbnQKICAgICAqLwoKCiAgICBnZXQoYmksIGJqKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5tYXRyaXhbKGkgKiAoaSArIDEpID4+IDEpICsgaiAtIDFdOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgYW4gZWxlbWVudAogICAgICovCgoKICAgIHNldChiaSwgYmosIHZhbHVlKSB7CiAgICAgIGxldCB7CiAgICAgICAgaW5kZXg6IGkKICAgICAgfSA9IGJpOwogICAgICBsZXQgewogICAgICAgIGluZGV4OiBqCiAgICAgIH0gPSBiajsKCiAgICAgIGlmIChqID4gaSkgewogICAgICAgIGNvbnN0IHRlbXAgPSBqOwogICAgICAgIGogPSBpOwogICAgICAgIGkgPSB0ZW1wOwogICAgICB9CgogICAgICB0aGlzLm1hdHJpeFsoaSAqIChpICsgMSkgPj4gMSkgKyBqIC0gMV0gPSB2YWx1ZSA/IDEgOiAwOwogICAgfQogICAgLyoqCiAgICAgKiBTZXRzIGFsbCBlbGVtZW50cyB0byB6ZXJvCiAgICAgKi8KCgogICAgcmVzZXQoKSB7CiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gdGhpcy5tYXRyaXgubGVuZ3RoOyBpICE9PSBsOyBpKyspIHsKICAgICAgICB0aGlzLm1hdHJpeFtpXSA9IDA7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgbWF4IG51bWJlciBvZiBvYmplY3RzCiAgICAgKi8KCgogICAgc2V0TnVtT2JqZWN0cyhuKSB7CiAgICAgIHRoaXMubWF0cml4Lmxlbmd0aCA9IG4gKiAobiAtIDEpID4+IDE7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQmFzZSBjbGFzcyBmb3Igb2JqZWN0cyB0aGF0IGRpc3BhdGNoZXMgZXZlbnRzLgogICAqLwogIGNsYXNzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyCiAgICAgKiBAcmV0dXJuIFRoZSBzZWxmIG9iamVjdCwgZm9yIGNoYWluYWJpbGl0eS4KICAgICAqLwogICAgYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLl9saXN0ZW5lcnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwoKICAgICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgbGlzdGVuZXJzW3R5cGVdID0gW107CiAgICAgIH0KCiAgICAgIGlmICghbGlzdGVuZXJzW3R5cGVdLmluY2x1ZGVzKGxpc3RlbmVyKSkgewogICAgICAgIGxpc3RlbmVyc1t0eXBlXS5wdXNoKGxpc3RlbmVyKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIGFuIGV2ZW50IGxpc3RlbmVyIGlzIGFkZGVkCiAgICAgKi8KCgogICAgaGFzRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKCiAgICAgIGlmIChsaXN0ZW5lcnNbdHlwZV0gIT09IHVuZGVmaW5lZCAmJiBsaXN0ZW5lcnNbdHlwZV0uaW5jbHVkZXMobGlzdGVuZXIpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYW55IGV2ZW50IGxpc3RlbmVyIG9mIHRoZSBnaXZlbiB0eXBlIGlzIGFkZGVkCiAgICAgKi8KCgogICAgaGFzQW55RXZlbnRMaXN0ZW5lcih0eXBlKSB7CiAgICAgIGlmICh0aGlzLl9saXN0ZW5lcnMgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwogICAgICByZXR1cm4gbGlzdGVuZXJzW3R5cGVdICE9PSB1bmRlZmluZWQ7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZSBhbiBldmVudCBsaXN0ZW5lcgogICAgICogQHJldHVybiBUaGUgc2VsZiBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikgewogICAgICBpZiAodGhpcy5fbGlzdGVuZXJzID09PSB1bmRlZmluZWQpIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzOwoKICAgICAgaWYgKGxpc3RlbmVyc1t0eXBlXSA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzW3R5cGVdLmluZGV4T2YobGlzdGVuZXIpOwoKICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgIGxpc3RlbmVyc1t0eXBlXS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogRW1pdCBhbiBldmVudC4KICAgICAqIEByZXR1cm4gVGhlIHNlbGYgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIGRpc3BhdGNoRXZlbnQoZXZlbnQpIHsKICAgICAgaWYgKHRoaXMuX2xpc3RlbmVycyA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVyczsKICAgICAgY29uc3QgbGlzdGVuZXJBcnJheSA9IGxpc3RlbmVyc1tldmVudC50eXBlXTsKCiAgICAgIGlmIChsaXN0ZW5lckFycmF5ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBldmVudC50YXJnZXQgPSB0aGlzOwoKICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGxpc3RlbmVyQXJyYXkubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgICBsaXN0ZW5lckFycmF5W2ldLmNhbGwodGhpcywgZXZlbnQpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQSBRdWF0ZXJuaW9uIGRlc2NyaWJlcyBhIHJvdGF0aW9uIGluIDNEIHNwYWNlLiBUaGUgUXVhdGVybmlvbiBpcyBtYXRoZW1hdGljYWxseSBkZWZpbmVkIGFzIFEgPSB4KmkgKyB5KmogKyB6KmsgKyB3LCB3aGVyZSAoaSxqLGspIGFyZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9ycy4gKHgseSx6KSBjYW4gYmUgc2VlbiBhcyBhIHZlY3RvciByZWxhdGVkIHRvIHRoZSBheGlzIG9mIHJvdGF0aW9uLCB3aGlsZSB0aGUgcmVhbCBtdWx0aXBsaWVyLCB3LCBpcyByZWxhdGVkIHRvIHRoZSBhbW91bnQgb2Ygcm90YXRpb24uCiAgICogQHBhcmFtIHggTXVsdGlwbGllciBvZiB0aGUgaW1hZ2luYXJ5IGJhc2lzIHZlY3RvciBpLgogICAqIEBwYXJhbSB5IE11bHRpcGxpZXIgb2YgdGhlIGltYWdpbmFyeSBiYXNpcyB2ZWN0b3Igai4KICAgKiBAcGFyYW0geiBNdWx0aXBsaWVyIG9mIHRoZSBpbWFnaW5hcnkgYmFzaXMgdmVjdG9yIGsuCiAgICogQHBhcmFtIHcgTXVsdGlwbGllciBvZiB0aGUgcmVhbCBwYXJ0LgogICAqIEBzZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9RdWF0ZXJuaW9uCiAgICovCgogIGNsYXNzIFF1YXRlcm5pb24gewogICAgY29uc3RydWN0b3IoeCwgeSwgeiwgdykgewogICAgICBpZiAoeCA9PT0gdm9pZCAwKSB7CiAgICAgICAgeCA9IDA7CiAgICAgIH0KCiAgICAgIGlmICh5ID09PSB2b2lkIDApIHsKICAgICAgICB5ID0gMDsKICAgICAgfQoKICAgICAgaWYgKHogPT09IHZvaWQgMCkgewogICAgICAgIHogPSAwOwogICAgICB9CgogICAgICBpZiAodyA9PT0gdm9pZCAwKSB7CiAgICAgICAgdyA9IDE7CiAgICAgIH0KCiAgICAgIHRoaXMueCA9IHg7CiAgICAgIHRoaXMueSA9IHk7CiAgICAgIHRoaXMueiA9IHo7CiAgICAgIHRoaXMudyA9IHc7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgdmFsdWUgb2YgdGhlIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgc2V0KHgsIHksIHosIHcpIHsKICAgICAgdGhpcy54ID0geDsKICAgICAgdGhpcy55ID0geTsKICAgICAgdGhpcy56ID0gejsKICAgICAgdGhpcy53ID0gdzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgdG8gYSByZWFkYWJsZSBmb3JtYXQKICAgICAqIEByZXR1cm4gIngseSx6LHciCiAgICAgKi8KCgogICAgdG9TdHJpbmcoKSB7CiAgICAgIHJldHVybiBgJHt0aGlzLnh9LCR7dGhpcy55fSwke3RoaXMuen0sJHt0aGlzLnd9YDsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCB0byBhbiBBcnJheQogICAgICogQHJldHVybiBbeCwgeSwgeiwgd10KICAgICAqLwoKCiAgICB0b0FycmF5KCkgewogICAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55LCB0aGlzLnosIHRoaXMud107CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiBjb21wb25lbnRzIGdpdmVuIGFuIGF4aXMgYW5kIGFuIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgc2V0RnJvbUF4aXNBbmdsZSh2ZWN0b3IsIGFuZ2xlKSB7CiAgICAgIGNvbnN0IHMgPSBNYXRoLnNpbihhbmdsZSAqIDAuNSk7CiAgICAgIHRoaXMueCA9IHZlY3Rvci54ICogczsKICAgICAgdGhpcy55ID0gdmVjdG9yLnkgKiBzOwogICAgICB0aGlzLnogPSB2ZWN0b3IueiAqIHM7CiAgICAgIHRoaXMudyA9IE1hdGguY29zKGFuZ2xlICogMC41KTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnRzIHRoZSBxdWF0ZXJuaW9uIHRvIFsgYXhpcywgYW5nbGUgXSByZXByZXNlbnRhdGlvbi4KICAgICAqIEBwYXJhbSB0YXJnZXRBeGlzIEEgdmVjdG9yIG9iamVjdCB0byByZXVzZSBmb3Igc3RvcmluZyB0aGUgYXhpcy4KICAgICAqIEByZXR1cm4gQW4gYXJyYXksIGZpcnN0IGVsZW1lbnQgaXMgdGhlIGF4aXMgYW5kIHRoZSBzZWNvbmQgaXMgdGhlIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgKi8KCgogICAgdG9BeGlzQW5nbGUodGFyZ2V0QXhpcykgewogICAgICBpZiAodGFyZ2V0QXhpcyA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0QXhpcyA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHRoaXMubm9ybWFsaXplKCk7IC8vIGlmIHc+MSBhY29zIGFuZCBzcXJ0IHdpbGwgcHJvZHVjZSBlcnJvcnMsIHRoaXMgY2FudCBoYXBwZW4gaWYgcXVhdGVybmlvbiBpcyBub3JtYWxpc2VkCgogICAgICBjb25zdCBhbmdsZSA9IDIgKiBNYXRoLmFjb3ModGhpcy53KTsKICAgICAgY29uc3QgcyA9IE1hdGguc3FydCgxIC0gdGhpcy53ICogdGhpcy53KTsgLy8gYXNzdW1pbmcgcXVhdGVybmlvbiBub3JtYWxpc2VkIHRoZW4gdyBpcyBsZXNzIHRoYW4gMSwgc28gdGVybSBhbHdheXMgcG9zaXRpdmUuCgogICAgICBpZiAocyA8IDAuMDAxKSB7CiAgICAgICAgLy8gdGVzdCB0byBhdm9pZCBkaXZpZGUgYnkgemVybywgcyBpcyBhbHdheXMgcG9zaXRpdmUgZHVlIHRvIHNxcnQKICAgICAgICAvLyBpZiBzIGNsb3NlIHRvIHplcm8gdGhlbiBkaXJlY3Rpb24gb2YgYXhpcyBub3QgaW1wb3J0YW50CiAgICAgICAgdGFyZ2V0QXhpcy54ID0gdGhpcy54OyAvLyBpZiBpdCBpcyBpbXBvcnRhbnQgdGhhdCBheGlzIGlzIG5vcm1hbGlzZWQgdGhlbiByZXBsYWNlIHdpdGggeD0xOyB5PXo9MDsKCiAgICAgICAgdGFyZ2V0QXhpcy55ID0gdGhpcy55OwogICAgICAgIHRhcmdldEF4aXMueiA9IHRoaXMuejsKICAgICAgfSBlbHNlIHsKICAgICAgICB0YXJnZXRBeGlzLnggPSB0aGlzLnggLyBzOyAvLyBub3JtYWxpc2UgYXhpcwoKICAgICAgICB0YXJnZXRBeGlzLnkgPSB0aGlzLnkgLyBzOwogICAgICAgIHRhcmdldEF4aXMueiA9IHRoaXMueiAvIHM7CiAgICAgIH0KCiAgICAgIHJldHVybiBbdGFyZ2V0QXhpcywgYW5nbGVdOwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHF1YXRlcm5pb24gdmFsdWUgZ2l2ZW4gdHdvIHZlY3RvcnMuIFRoZSByZXN1bHRpbmcgcm90YXRpb24gd2lsbCBiZSB0aGUgbmVlZGVkIHJvdGF0aW9uIHRvIHJvdGF0ZSB1IHRvIHYuCiAgICAgKi8KCgogICAgc2V0RnJvbVZlY3RvcnModSwgdikgewogICAgICBpZiAodS5pc0FudGlwYXJhbGxlbFRvKHYpKSB7CiAgICAgICAgY29uc3QgdDEgPSBzZnZfdDE7CiAgICAgICAgY29uc3QgdDIgPSBzZnZfdDI7CiAgICAgICAgdS50YW5nZW50cyh0MSwgdDIpOwogICAgICAgIHRoaXMuc2V0RnJvbUF4aXNBbmdsZSh0MSwgTWF0aC5QSSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgYSA9IHUuY3Jvc3Modik7CiAgICAgICAgdGhpcy54ID0gYS54OwogICAgICAgIHRoaXMueSA9IGEueTsKICAgICAgICB0aGlzLnogPSBhLno7CiAgICAgICAgdGhpcy53ID0gTWF0aC5zcXJ0KHUubGVuZ3RoKCkgKiogMiAqIHYubGVuZ3RoKCkgKiogMikgKyB1LmRvdCh2KTsKICAgICAgICB0aGlzLm5vcm1hbGl6ZSgpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogTXVsdGlwbHkgdGhlIHF1YXRlcm5pb24gd2l0aCBhbiBvdGhlciBxdWF0ZXJuaW9uLgogICAgICovCgoKICAgIG11bHQocXVhdCwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4ID0gdGhpcy54OwogICAgICBjb25zdCBheSA9IHRoaXMueTsKICAgICAgY29uc3QgYXogPSB0aGlzLno7CiAgICAgIGNvbnN0IGF3ID0gdGhpcy53OwogICAgICBjb25zdCBieCA9IHF1YXQueDsKICAgICAgY29uc3QgYnkgPSBxdWF0Lnk7CiAgICAgIGNvbnN0IGJ6ID0gcXVhdC56OwogICAgICBjb25zdCBidyA9IHF1YXQudzsKICAgICAgdGFyZ2V0LnggPSBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5OwogICAgICB0YXJnZXQueSA9IGF5ICogYncgKyBhdyAqIGJ5ICsgYXogKiBieCAtIGF4ICogYno7CiAgICAgIHRhcmdldC56ID0gYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieDsKICAgICAgdGFyZ2V0LncgPSBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGludmVyc2UgcXVhdGVybmlvbiByb3RhdGlvbi4KICAgICAqLwoKCiAgICBpbnZlcnNlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICBjb25zdCB3ID0gdGhpcy53OwogICAgICB0aGlzLmNvbmp1Z2F0ZSh0YXJnZXQpOwogICAgICBjb25zdCBpbm9ybTIgPSAxIC8gKHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3KTsKICAgICAgdGFyZ2V0LnggKj0gaW5vcm0yOwogICAgICB0YXJnZXQueSAqPSBpbm9ybTI7CiAgICAgIHRhcmdldC56ICo9IGlub3JtMjsKICAgICAgdGFyZ2V0LncgKj0gaW5vcm0yOwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHF1YXRlcm5pb24gY29uanVnYXRlCiAgICAgKi8KCgogICAgY29uanVnYXRlKHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB9CgogICAgICB0YXJnZXQueCA9IC10aGlzLng7CiAgICAgIHRhcmdldC55ID0gLXRoaXMueTsKICAgICAgdGFyZ2V0LnogPSAtdGhpcy56OwogICAgICB0YXJnZXQudyA9IHRoaXMudzsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKgogICAgICogTm9ybWFsaXplIHRoZSBxdWF0ZXJuaW9uLiBOb3RlIHRoYXQgdGhpcyBjaGFuZ2VzIHRoZSB2YWx1ZXMgb2YgdGhlIHF1YXRlcm5pb24uCiAgICAgKi8KCgogICAgbm9ybWFsaXplKCkgewogICAgICBsZXQgbCA9IE1hdGguc3FydCh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkgKyB0aGlzLnogKiB0aGlzLnogKyB0aGlzLncgKiB0aGlzLncpOwoKICAgICAgaWYgKGwgPT09IDApIHsKICAgICAgICB0aGlzLnggPSAwOwogICAgICAgIHRoaXMueSA9IDA7CiAgICAgICAgdGhpcy56ID0gMDsKICAgICAgICB0aGlzLncgPSAwOwogICAgICB9IGVsc2UgewogICAgICAgIGwgPSAxIC8gbDsKICAgICAgICB0aGlzLnggKj0gbDsKICAgICAgICB0aGlzLnkgKj0gbDsKICAgICAgICB0aGlzLnogKj0gbDsKICAgICAgICB0aGlzLncgKj0gbDsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIEFwcHJveGltYXRpb24gb2YgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uLiBXb3JrcyBiZXN0IHdoZW4gcXVhdCBpcyBhbHJlYWR5IGFsbW9zdC1ub3JtYWxpemVkLgogICAgICogQGF1dGhvciB1bnBoYXNlZCwgaHR0cHM6Ly9naXRodWIuY29tL3VucGhhc2VkCiAgICAgKi8KCgogICAgbm9ybWFsaXplRmFzdCgpIHsKICAgICAgY29uc3QgZiA9ICgzLjAgLSAodGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55ICsgdGhpcy56ICogdGhpcy56ICsgdGhpcy53ICogdGhpcy53KSkgLyAyLjA7CgogICAgICBpZiAoZiA9PT0gMCkgewogICAgICAgIHRoaXMueCA9IDA7CiAgICAgICAgdGhpcy55ID0gMDsKICAgICAgICB0aGlzLnogPSAwOwogICAgICAgIHRoaXMudyA9IDA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy54ICo9IGY7CiAgICAgICAgdGhpcy55ICo9IGY7CiAgICAgICAgdGhpcy56ICo9IGY7CiAgICAgICAgdGhpcy53ICo9IGY7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB0aGUgcXVhdGVybmlvbiBieSBhIHZlY3RvcgogICAgICovCgoKICAgIHZtdWx0KHYsIHRhcmdldCkgewogICAgICBpZiAodGFyZ2V0ID09PSB2b2lkIDApIHsKICAgICAgICB0YXJnZXQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBjb25zdCB4ID0gdi54OwogICAgICBjb25zdCB5ID0gdi55OwogICAgICBjb25zdCB6ID0gdi56OwogICAgICBjb25zdCBxeCA9IHRoaXMueDsKICAgICAgY29uc3QgcXkgPSB0aGlzLnk7CiAgICAgIGNvbnN0IHF6ID0gdGhpcy56OwogICAgICBjb25zdCBxdyA9IHRoaXMudzsgLy8gcSp2CgogICAgICBjb25zdCBpeCA9IHF3ICogeCArIHF5ICogeiAtIHF6ICogeTsKICAgICAgY29uc3QgaXkgPSBxdyAqIHkgKyBxeiAqIHggLSBxeCAqIHo7CiAgICAgIGNvbnN0IGl6ID0gcXcgKiB6ICsgcXggKiB5IC0gcXkgKiB4OwogICAgICBjb25zdCBpdyA9IC1xeCAqIHggLSBxeSAqIHkgLSBxeiAqIHo7CiAgICAgIHRhcmdldC54ID0gaXggKiBxdyArIGl3ICogLXF4ICsgaXkgKiAtcXogLSBpeiAqIC1xeTsKICAgICAgdGFyZ2V0LnkgPSBpeSAqIHF3ICsgaXcgKiAtcXkgKyBpeiAqIC1xeCAtIGl4ICogLXF6OwogICAgICB0YXJnZXQueiA9IGl6ICogcXcgKyBpdyAqIC1xeiArIGl4ICogLXF5IC0gaXkgKiAtcXg7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIENvcGllcyB2YWx1ZSBvZiBzb3VyY2UgdG8gdGhpcyBxdWF0ZXJuaW9uLgogICAgICogQHJldHVybiB0aGlzCiAgICAgKi8KCgogICAgY29weShxdWF0KSB7CiAgICAgIHRoaXMueCA9IHF1YXQueDsKICAgICAgdGhpcy55ID0gcXVhdC55OwogICAgICB0aGlzLnogPSBxdWF0Lno7CiAgICAgIHRoaXMudyA9IHF1YXQudzsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgdGhlIHF1YXRlcm5pb24gdG8gZXVsZXIgYW5nbGUgcmVwcmVzZW50YXRpb24uIE9yZGVyOiBZWlgsIGFzIHRoaXMgcGFnZSBkZXNjcmliZXM6IGh0dHBzOi8vd3d3LmV1Y2xpZGVhbnNwYWNlLmNvbS9tYXRocy9zdGFuZGFyZHMvaW5kZXguaHRtCiAgICAgKiBAcGFyYW0gb3JkZXIgVGhyZWUtY2hhcmFjdGVyIHN0cmluZywgZGVmYXVsdHMgdG8gIllaWCIKICAgICAqLwoKCiAgICB0b0V1bGVyKHRhcmdldCwgb3JkZXIpIHsKICAgICAgaWYgKG9yZGVyID09PSB2b2lkIDApIHsKICAgICAgICBvcmRlciA9ICdZWlgnOwogICAgICB9CgogICAgICBsZXQgaGVhZGluZzsKICAgICAgbGV0IGF0dGl0dWRlOwogICAgICBsZXQgYmFuazsKICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgY29uc3QgdyA9IHRoaXMudzsKCiAgICAgIHN3aXRjaCAob3JkZXIpIHsKICAgICAgICBjYXNlICdZWlgnOgogICAgICAgICAgY29uc3QgdGVzdCA9IHggKiB5ICsgeiAqIHc7CgogICAgICAgICAgaWYgKHRlc3QgPiAwLjQ5OSkgewogICAgICAgICAgICAvLyBzaW5ndWxhcml0eSBhdCBub3J0aCBwb2xlCiAgICAgICAgICAgIGhlYWRpbmcgPSAyICogTWF0aC5hdGFuMih4LCB3KTsKICAgICAgICAgICAgYXR0aXR1ZGUgPSBNYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHRlc3QgPCAtMC40OTkpIHsKICAgICAgICAgICAgLy8gc2luZ3VsYXJpdHkgYXQgc291dGggcG9sZQogICAgICAgICAgICBoZWFkaW5nID0gLTIgKiBNYXRoLmF0YW4yKHgsIHcpOwogICAgICAgICAgICBhdHRpdHVkZSA9IC1NYXRoLlBJIC8gMjsKICAgICAgICAgICAgYmFuayA9IDA7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGhlYWRpbmcgPT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBjb25zdCBzcXggPSB4ICogeDsKICAgICAgICAgICAgY29uc3Qgc3F5ID0geSAqIHk7CiAgICAgICAgICAgIGNvbnN0IHNxeiA9IHogKiB6OwogICAgICAgICAgICBoZWFkaW5nID0gTWF0aC5hdGFuMigyICogeSAqIHcgLSAyICogeCAqIHosIDEgLSAyICogc3F5IC0gMiAqIHNxeik7IC8vIEhlYWRpbmcKCiAgICAgICAgICAgIGF0dGl0dWRlID0gTWF0aC5hc2luKDIgKiB0ZXN0KTsgLy8gYXR0aXR1ZGUKCiAgICAgICAgICAgIGJhbmsgPSBNYXRoLmF0YW4yKDIgKiB4ICogdyAtIDIgKiB5ICogeiwgMSAtIDIgKiBzcXggLSAyICogc3F6KTsgLy8gYmFuawogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFdWxlciBvcmRlciAke29yZGVyfSBub3Qgc3VwcG9ydGVkIHlldC5gKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnkgPSBoZWFkaW5nOwogICAgICB0YXJnZXQueiA9IGF0dGl0dWRlOwogICAgICB0YXJnZXQueCA9IGJhbms7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgcXVhdGVybmlvbiBjb21wb25lbnRzIGdpdmVuIEV1bGVyIGFuZ2xlIHJlcHJlc2VudGF0aW9uLgogICAgICoKICAgICAqIEBwYXJhbSBvcmRlciBUaGUgb3JkZXIgdG8gYXBwbHkgYW5nbGVzOiAnWFlaJyBvciAnWVhaJyBvciBhbnkgb3RoZXIgY29tYmluYXRpb24uCiAgICAgKgogICAgICogU2VlIHtAbGluayBodHRwczovL3d3dy5tYXRod29ya3MuY29tL21hdGxhYmNlbnRyYWwvZmlsZWV4Y2hhbmdlLzIwNjk2LWZ1bmN0aW9uLXRvLWNvbnZlcnQtYmV0d2Vlbi1kY20tZXVsZXItYW5nbGVzLXF1YXRlcm5pb25zLWFuZC1ldWxlci12ZWN0b3JzIE1hdGhXb3Jrc30gcmVmZXJlbmNlCiAgICAgKi8KCgogICAgc2V0RnJvbUV1bGVyKHgsIHksIHosIG9yZGVyKSB7CiAgICAgIGlmIChvcmRlciA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3JkZXIgPSAnWFlaJzsKICAgICAgfQoKICAgICAgY29uc3QgYzEgPSBNYXRoLmNvcyh4IC8gMik7CiAgICAgIGNvbnN0IGMyID0gTWF0aC5jb3MoeSAvIDIpOwogICAgICBjb25zdCBjMyA9IE1hdGguY29zKHogLyAyKTsKICAgICAgY29uc3QgczEgPSBNYXRoLnNpbih4IC8gMik7CiAgICAgIGNvbnN0IHMyID0gTWF0aC5zaW4oeSAvIDIpOwogICAgICBjb25zdCBzMyA9IE1hdGguc2luKHogLyAyKTsKCiAgICAgIGlmIChvcmRlciA9PT0gJ1hZWicpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgKyBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdZWFonKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWlhZJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMzsKICAgICAgfSBlbHNlIGlmIChvcmRlciA9PT0gJ1pZWCcpIHsKICAgICAgICB0aGlzLnggPSBzMSAqIGMyICogYzMgLSBjMSAqIHMyICogczM7CiAgICAgICAgdGhpcy55ID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzOwogICAgICAgIHRoaXMueiA9IGMxICogYzIgKiBzMyAtIHMxICogczIgKiBjMzsKICAgICAgICB0aGlzLncgPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7CiAgICAgIH0gZWxzZSBpZiAob3JkZXIgPT09ICdZWlgnKSB7CiAgICAgICAgdGhpcy54ID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzOwogICAgICAgIHRoaXMueSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMzsKICAgICAgICB0aGlzLnogPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7CiAgICAgICAgdGhpcy53ID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzOwogICAgICB9IGVsc2UgaWYgKG9yZGVyID09PSAnWFpZJykgewogICAgICAgIHRoaXMueCA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMzsKICAgICAgICB0aGlzLnkgPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7CiAgICAgICAgdGhpcy56ID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzOwogICAgICAgIHRoaXMudyA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMzsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CgogICAgY2xvbmUoKSB7CiAgICAgIHJldHVybiBuZXcgUXVhdGVybmlvbih0aGlzLngsIHRoaXMueSwgdGhpcy56LCB0aGlzLncpOwogICAgfQogICAgLyoqCiAgICAgKiBQZXJmb3JtcyBhIHNwaGVyaWNhbCBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHR3byBxdWF0CiAgICAgKgogICAgICogQHBhcmFtIHRvUXVhdCBzZWNvbmQgb3BlcmFuZAogICAgICogQHBhcmFtIHQgaW50ZXJwb2xhdGlvbiBhbW91bnQgYmV0d2VlbiB0aGUgc2VsZiBxdWF0ZXJuaW9uIGFuZCB0b1F1YXQKICAgICAqIEBwYXJhbSB0YXJnZXQgQSBxdWF0ZXJuaW9uIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uIElmIG5vdCBwcm92aWRlZCwgYSBuZXcgb25lIHdpbGwgYmUgY3JlYXRlZC4KICAgICAqIEByZXR1cm5zIHtRdWF0ZXJuaW9ufSBUaGUgInRhcmdldCIgb2JqZWN0CiAgICAgKi8KCgogICAgc2xlcnAodG9RdWF0LCB0LCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgfQoKICAgICAgY29uc3QgYXggPSB0aGlzLng7CiAgICAgIGNvbnN0IGF5ID0gdGhpcy55OwogICAgICBjb25zdCBheiA9IHRoaXMuejsKICAgICAgY29uc3QgYXcgPSB0aGlzLnc7CiAgICAgIGxldCBieCA9IHRvUXVhdC54OwogICAgICBsZXQgYnkgPSB0b1F1YXQueTsKICAgICAgbGV0IGJ6ID0gdG9RdWF0Lno7CiAgICAgIGxldCBidyA9IHRvUXVhdC53OwogICAgICBsZXQgb21lZ2E7CiAgICAgIGxldCBjb3NvbTsKICAgICAgbGV0IHNpbm9tOwogICAgICBsZXQgc2NhbGUwOwogICAgICBsZXQgc2NhbGUxOyAvLyBjYWxjIGNvc2luZQoKICAgICAgY29zb20gPSBheCAqIGJ4ICsgYXkgKiBieSArIGF6ICogYnogKyBhdyAqIGJ3OyAvLyBhZGp1c3Qgc2lnbnMgKGlmIG5lY2Vzc2FyeSkKCiAgICAgIGlmIChjb3NvbSA8IDAuMCkgewogICAgICAgIGNvc29tID0gLWNvc29tOwogICAgICAgIGJ4ID0gLWJ4OwogICAgICAgIGJ5ID0gLWJ5OwogICAgICAgIGJ6ID0gLWJ6OwogICAgICAgIGJ3ID0gLWJ3OwogICAgICB9IC8vIGNhbGN1bGF0ZSBjb2VmZmljaWVudHMKCgogICAgICBpZiAoMS4wIC0gY29zb20gPiAwLjAwMDAwMSkgewogICAgICAgIC8vIHN0YW5kYXJkIGNhc2UgKHNsZXJwKQogICAgICAgIG9tZWdhID0gTWF0aC5hY29zKGNvc29tKTsKICAgICAgICBzaW5vbSA9IE1hdGguc2luKG9tZWdhKTsKICAgICAgICBzY2FsZTAgPSBNYXRoLnNpbigoMS4wIC0gdCkgKiBvbWVnYSkgLyBzaW5vbTsKICAgICAgICBzY2FsZTEgPSBNYXRoLnNpbih0ICogb21lZ2EpIC8gc2lub207CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gImZyb20iIGFuZCAidG8iIHF1YXRlcm5pb25zIGFyZSB2ZXJ5IGNsb3NlCiAgICAgICAgLy8gIC4uLiBzbyB3ZSBjYW4gZG8gYSBsaW5lYXIgaW50ZXJwb2xhdGlvbgogICAgICAgIHNjYWxlMCA9IDEuMCAtIHQ7CiAgICAgICAgc2NhbGUxID0gdDsKICAgICAgfSAvLyBjYWxjdWxhdGUgZmluYWwgdmFsdWVzCgoKICAgICAgdGFyZ2V0LnggPSBzY2FsZTAgKiBheCArIHNjYWxlMSAqIGJ4OwogICAgICB0YXJnZXQueSA9IHNjYWxlMCAqIGF5ICsgc2NhbGUxICogYnk7CiAgICAgIHRhcmdldC56ID0gc2NhbGUwICogYXogKyBzY2FsZTEgKiBiejsKICAgICAgdGFyZ2V0LncgPSBzY2FsZTAgKiBhdyArIHNjYWxlMSAqIGJ3OwogICAgICByZXR1cm4gdGFyZ2V0OwogICAgfQogICAgLyoqCiAgICAgKiBSb3RhdGUgYW4gYWJzb2x1dGUgb3JpZW50YXRpb24gcXVhdGVybmlvbiBnaXZlbiBhbiBhbmd1bGFyIHZlbG9jaXR5IGFuZCBhIHRpbWUgc3RlcC4KICAgICAqLwoKCiAgICBpbnRlZ3JhdGUoYW5ndWxhclZlbG9jaXR5LCBkdCwgYW5ndWxhckZhY3RvciwgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4ID0gYW5ndWxhclZlbG9jaXR5LnggKiBhbmd1bGFyRmFjdG9yLngsCiAgICAgICAgICAgIGF5ID0gYW5ndWxhclZlbG9jaXR5LnkgKiBhbmd1bGFyRmFjdG9yLnksCiAgICAgICAgICAgIGF6ID0gYW5ndWxhclZlbG9jaXR5LnogKiBhbmd1bGFyRmFjdG9yLnosCiAgICAgICAgICAgIGJ4ID0gdGhpcy54LAogICAgICAgICAgICBieSA9IHRoaXMueSwKICAgICAgICAgICAgYnogPSB0aGlzLnosCiAgICAgICAgICAgIGJ3ID0gdGhpcy53OwogICAgICBjb25zdCBoYWxmX2R0ID0gZHQgKiAwLjU7CiAgICAgIHRhcmdldC54ICs9IGhhbGZfZHQgKiAoYXggKiBidyArIGF5ICogYnogLSBheiAqIGJ5KTsKICAgICAgdGFyZ2V0LnkgKz0gaGFsZl9kdCAqIChheSAqIGJ3ICsgYXogKiBieCAtIGF4ICogYnopOwogICAgICB0YXJnZXQueiArPSBoYWxmX2R0ICogKGF6ICogYncgKyBheCAqIGJ5IC0gYXkgKiBieCk7CiAgICAgIHRhcmdldC53ICs9IGhhbGZfZHQgKiAoLWF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBieik7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogIH0KICBjb25zdCBzZnZfdDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNmdl90MiA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIFRoZSBhdmFpbGFibGUgc2hhcGUgdHlwZXMuCiAgICovCiAgY29uc3QgU0hBUEVfVFlQRVMgPSB7CiAgICAvKiogU1BIRVJFICovCiAgICBTUEhFUkU6IDEsCgogICAgLyoqIFBMQU5FICovCiAgICBQTEFORTogMiwKCiAgICAvKiogQk9YICovCiAgICBCT1g6IDQsCgogICAgLyoqIENPTVBPVU5EICovCiAgICBDT01QT1VORDogOCwKCiAgICAvKiogQ09OVkVYUE9MWUhFRFJPTiAqLwogICAgQ09OVkVYUE9MWUhFRFJPTjogMTYsCgogICAgLyoqIEhFSUdIVEZJRUxEICovCiAgICBIRUlHSFRGSUVMRDogMzIsCgogICAgLyoqIFBBUlRJQ0xFICovCiAgICBQQVJUSUNMRTogNjQsCgogICAgLyoqIENZTElOREVSICovCiAgICBDWUxJTkRFUjogMTI4LAoKICAgIC8qKiBUUklNRVNIICovCiAgICBUUklNRVNIOiAyNTYKICB9OwogIC8qKgogICAqIFNoYXBlVHlwZQogICAqLwoKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBzaGFwZXMKICAgKi8KICBjbGFzcyBTaGFwZSB7CiAgICAvKioKICAgICAqIElkZW50aWZpZXIgb2YgdGhlIFNoYXBlLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgdHlwZSBvZiB0aGlzIHNoYXBlLiBNdXN0IGJlIHNldCB0byBhbiBpbnQgPiAwIGJ5IHN1YmNsYXNzZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBsb2NhbCBib3VuZGluZyBzcGhlcmUgcmFkaXVzIG9mIHRoaXMgc2hhcGUuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdoZXRoZXIgdG8gcHJvZHVjZSBjb250YWN0IGZvcmNlcyB3aGVuIGluIGNvbnRhY3Qgd2l0aCBvdGhlciBib2RpZXMuIE5vdGUgdGhhdCBjb250YWN0cyB3aWxsIGJlIGdlbmVyYXRlZCwgYnV0IHRoZXkgd2lsbCBiZSBkaXNhYmxlZC4KICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBAZGVmYXVsdCAtMQogICAgICovCgogICAgLyoqCiAgICAgKiBPcHRpb25hbCBtYXRlcmlhbCBvZiB0aGUgc2hhcGUgdGhhdCByZWd1bGF0ZXMgY29udGFjdCBwcm9wZXJ0aWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYm9keSB0byB3aGljaCB0aGUgc2hhcGUgaXMgYWRkZWQgdG8uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCB0aGUgU2hhcGUgdHlwZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5pZCA9IFNoYXBlLmlkQ291bnRlcisrOwogICAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGUgfHwgMDsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IDA7CiAgICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSBvcHRpb25zLmNvbGxpc2lvblJlc3BvbnNlID8gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlckdyb3VwIDogMTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgOiAtMTsKICAgICAgdGhpcy5tYXRlcmlhbCA9IG9wdGlvbnMubWF0ZXJpYWwgPyBvcHRpb25zLm1hdGVyaWFsIDogbnVsbDsKICAgICAgdGhpcy5ib2R5ID0gbnVsbDsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgdGhlIGJvdW5kaW5nIHNwaGVyZSByYWRpdXMuCiAgICAgKiBUaGUgcmVzdWx0IGlzIHN0b3JlZCBpbiB0aGUgcHJvcGVydHkgYC5ib3VuZGluZ1NwaGVyZVJhZGl1c2AKICAgICAqLwoKCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhyb3cgYGNvbXB1dGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAke3RoaXMudHlwZX1gOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHZvbHVtZSBvZiB0aGlzIHNoYXBlCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICB0aHJvdyBgdm9sdW1lKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICR7dGhpcy50eXBlfWA7CiAgICB9CiAgICAvKioKICAgICAqIENhbGN1bGF0ZXMgdGhlIGluZXJ0aWEgaW4gdGhlIGxvY2FsIGZyYW1lIGZvciB0aGlzIHNoYXBlLgogICAgICogQHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfbW9tZW50c19vZl9pbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICB0aHJvdyBgY2FsY3VsYXRlTG9jYWxJbmVydGlhKCkgbm90IGltcGxlbWVudGVkIGZvciBzaGFwZSB0eXBlICR7dGhpcy50eXBlfWA7CiAgICB9CiAgICAvKioKICAgICAqIEB0b2RvIHVzZSBhYnN0cmFjdCBmb3IgdGhlc2Uga2luZCBvZiBtZXRob2RzCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgdGhyb3cgYGNhbGN1bGF0ZVdvcmxkQUFCQigpIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2hhcGUgdHlwZSAke3RoaXMudHlwZX1gOwogICAgfQoKICB9CiAgU2hhcGUuaWRDb3VudGVyID0gMDsKICBTaGFwZS50eXBlcyA9IFNIQVBFX1RZUEVTOwoKICAvKioKICAgKiBUcmFuc2Zvcm1hdGlvbiB1dGlsaXRpZXMuCiAgICovCiAgY2xhc3MgVHJhbnNmb3JtIHsKICAgIC8qKgogICAgICogcG9zaXRpb24KICAgICAqLwoKICAgIC8qKgogICAgICogcXVhdGVybmlvbgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwoKICAgICAgaWYgKG9wdGlvbnMucG9zaXRpb24pIHsKICAgICAgICB0aGlzLnBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIGlmIChvcHRpb25zLnF1YXRlcm5pb24pIHsKICAgICAgICB0aGlzLnF1YXRlcm5pb24uY29weShvcHRpb25zLnF1YXRlcm5pb24pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhIGdsb2JhbCBwb2ludCBpbiBsb2NhbCB0cmFuc2Zvcm0gY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgcG9pbnRUb0xvY2FsKHdvcmxkUG9pbnQsIHJlc3VsdCkgewogICAgICByZXR1cm4gVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHRoaXMucG9zaXRpb24sIHRoaXMucXVhdGVybmlvbiwgd29ybGRQb2ludCwgcmVzdWx0KTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgbG9jYWwgcG9pbnQgaW4gZ2xvYmFsIHRyYW5zZm9ybSBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBwb2ludFRvV29ybGQobG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIHJldHVybiBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodGhpcy5wb3NpdGlvbiwgdGhpcy5xdWF0ZXJuaW9uLCBsb2NhbFBvaW50LCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb1dvcmxkRnJhbWUKICAgICAqLwoKCiAgICB2ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24udm11bHQobG9jYWxWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHBvaW50VG9Mb2NhbEZyYW1lCiAgICAgKi8KCgogICAgc3RhdGljIHBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgd29ybGRQb2ludC52c3ViKHBvc2l0aW9uLCByZXN1bHQpOwogICAgICBxdWF0ZXJuaW9uLmNvbmp1Z2F0ZSh0bXBRdWF0JDEpOwogICAgICB0bXBRdWF0JDEudm11bHQocmVzdWx0LCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBwb2ludFRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyBwb2ludFRvV29ybGRGcmFtZShwb3NpdGlvbiwgcXVhdGVybmlvbiwgbG9jYWxQb2ludCwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udm11bHQobG9jYWxQb2ludCwgcmVzdWx0KTsKICAgICAgcmVzdWx0LnZhZGQocG9zaXRpb24sIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIHZlY3RvclRvV29ybGRGcmFtZQogICAgICovCgoKICAgIHN0YXRpYyB2ZWN0b3JUb1dvcmxkRnJhbWUocXVhdGVybmlvbiwgbG9jYWxWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBxdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiB2ZWN0b3JUb0xvY2FsRnJhbWUKICAgICAqLwoKCiAgICBzdGF0aWMgdmVjdG9yVG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0ZXJuaW9uLCB3b3JsZFZlY3RvciwgcmVzdWx0KSB7CiAgICAgIGlmIChyZXN1bHQgPT09IHZvaWQgMCkgewogICAgICAgIHJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIHF1YXRlcm5pb24udyAqPSAtMTsKICAgICAgcXVhdGVybmlvbi52bXVsdCh3b3JsZFZlY3RvciwgcmVzdWx0KTsKICAgICAgcXVhdGVybmlvbi53ICo9IC0xOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CiAgY29uc3QgdG1wUXVhdCQxID0gbmV3IFF1YXRlcm5pb24oKTsKCiAgLyoqCiAgICogQSBzZXQgb2YgcG9seWdvbnMgZGVzY3JpYmluZyBhIGNvbnZleCBzaGFwZS4KICAgKgogICAqIFRoZSBzaGFwZSBNVVNUIGJlIGNvbnZleCBmb3IgdGhlIGNvZGUgdG8gd29yayBwcm9wZXJseS4gTm8gcG9seWdvbnMgbWF5IGJlIGNvcGxhbmFyIChjb250YWluZWQKICAgKiBpbiB0aGUgc2FtZSAzRCBwbGFuZSksIGluc3RlYWQgdGhlc2Ugc2hvdWxkIGJlIG1lcmdlZCBpbnRvIG9uZSBwb2x5Z29uLgogICAqCiAgICogQGF1dGhvciBxaWFvIC8gaHR0cHM6Ly9naXRodWIuY29tL3FpYW8gKG9yaWdpbmFsIGF1dGhvciwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9xaWFvL3RocmVlLmpzL2NvbW1pdC84NTAyNmYwYzc2OWU0MDAwMTQ4YTY3ZDQ1YTllOWI5YzUxMDg4MzZmKQogICAqIEBhdXRob3Igc2NodGVwcGUgLyBodHRwczovL2dpdGh1Yi5jb20vc2NodGVwcGUKICAgKiBAc2VlIGh0dHBzOi8vd3d3LmFsdGRldmJsb2dhZGF5LmNvbS8yMDExLzA1LzEzL2NvbnRhY3QtZ2VuZXJhdGlvbi1iZXR3ZWVuLTNkLWNvbnZleC1tZXNoZXMvCiAgICoKICAgKiBAdG9kbyBNb3ZlIHRoZSBjbGlwcGluZyBmdW5jdGlvbnMgdG8gQ29udGFjdEdlbmVyYXRvcj8KICAgKiBAdG9kbyBBdXRvbWF0aWNhbGx5IG1lcmdlIGNvcGxhbmFyIHBvbHlnb25zIGluIGNvbnN0cnVjdG9yLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGNvbnZleFNoYXBlID0gbmV3IENBTk5PTi5Db252ZXhQb2x5aGVkcm9uKHsgdmVydGljZXMsIGZhY2VzIH0pCiAgICogICAgIGNvbnN0IGNvbnZleEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY29udmV4U2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShjb252ZXhCb2R5KQogICAqLwogIGNsYXNzIENvbnZleFBvbHloZWRyb24gZXh0ZW5kcyBTaGFwZSB7CiAgICAvKiogdmVydGljZXMgKi8KCiAgICAvKioKICAgICAqIEFycmF5IG9mIGludGVnZXIgYXJyYXlzLCBpbmRpY2F0aW5nIHdoaWNoIHZlcnRpY2VzIGVhY2ggZmFjZSBjb25zaXN0cyBvZgogICAgICovCgogICAgLyoqIGZhY2VOb3JtYWxzICovCgogICAgLyoqIHdvcmxkVmVydGljZXMgKi8KCiAgICAvKiogd29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlICovCgogICAgLyoqIHdvcmxkRmFjZU5vcm1hbHMgKi8KCiAgICAvKiogd29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlICovCgogICAgLyoqCiAgICAgKiBJZiBnaXZlbiwgdGhlc2UgbG9jYWxseSBkZWZpbmVkLCBub3JtYWxpemVkIGF4ZXMgYXJlIHRoZSBvbmx5IG9uZXMgYmVpbmcgY2hlY2tlZCB3aGVuIGRvaW5nIHNlcGFyYXRpbmcgYXhpcyBjaGVjay4KICAgICAqLwoKICAgIC8qKiB1bmlxdWVFZGdlcyAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHZlcnRpY2VzIEFuIGFycmF5IG9mIFZlYzMncwogICAgICogQHBhcmFtIGZhY2VzIEFycmF5IG9mIGludGVnZXIgYXJyYXlzLCBkZXNjcmliaW5nIHdoaWNoIHZlcnRpY2VzIHRoYXQgaXMgaW5jbHVkZWQgaW4gZWFjaCBmYWNlLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihwcm9wcykgewogICAgICBpZiAocHJvcHMgPT09IHZvaWQgMCkgewogICAgICAgIHByb3BzID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IHsKICAgICAgICB2ZXJ0aWNlcyA9IFtdLAogICAgICAgIGZhY2VzID0gW10sCiAgICAgICAgbm9ybWFscyA9IFtdLAogICAgICAgIGF4ZXMsCiAgICAgICAgYm91bmRpbmdTcGhlcmVSYWRpdXMKICAgICAgfSA9IHByb3BzOwogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTgogICAgICB9KTsKICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzOwogICAgICB0aGlzLmZhY2VzID0gZmFjZXM7CiAgICAgIHRoaXMuZmFjZU5vcm1hbHMgPSBub3JtYWxzOwoKICAgICAgaWYgKHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5jb21wdXRlTm9ybWFscygpOwogICAgICB9CgogICAgICBpZiAoIWJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBib3VuZGluZ1NwaGVyZVJhZGl1czsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzID0gW107IC8vIFdvcmxkIHRyYW5zZm9ybWVkIHZlcnNpb24gb2YgLnZlcnRpY2VzCgogICAgICB0aGlzLndvcmxkVmVydGljZXNOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFscyA9IFtdOyAvLyBXb3JsZCB0cmFuc2Zvcm1lZCB2ZXJzaW9uIG9mIC5mYWNlTm9ybWFscwoKICAgICAgdGhpcy53b3JsZEZhY2VOb3JtYWxzTmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLnVuaXF1ZUF4ZXMgPSBheGVzID8gYXhlcy5zbGljZSgpIDogbnVsbDsKICAgICAgdGhpcy51bmlxdWVFZGdlcyA9IFtdOwogICAgICB0aGlzLmNvbXB1dGVFZGdlcygpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB1bmlxdWVFZGdlcwogICAgICovCgoKICAgIGNvbXB1dGVFZGdlcygpIHsKICAgICAgY29uc3QgZmFjZXMgPSB0aGlzLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7CiAgICAgIGNvbnN0IGVkZ2VzID0gdGhpcy51bmlxdWVFZGdlczsKICAgICAgZWRnZXMubGVuZ3RoID0gMDsKICAgICAgY29uc3QgZWRnZSA9IG5ldyBWZWMzKCk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBmYWNlID0gZmFjZXNbaV07CiAgICAgICAgY29uc3QgbnVtVmVydGljZXMgPSBmYWNlLmxlbmd0aDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IG51bVZlcnRpY2VzOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGsgPSAoaiArIDEpICUgbnVtVmVydGljZXM7CiAgICAgICAgICB2ZXJ0aWNlc1tmYWNlW2pdXS52c3ViKHZlcnRpY2VzW2ZhY2Vba11dLCBlZGdlKTsKICAgICAgICAgIGVkZ2Uubm9ybWFsaXplKCk7CiAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKCiAgICAgICAgICBmb3IgKGxldCBwID0gMDsgcCAhPT0gZWRnZXMubGVuZ3RoOyBwKyspIHsKICAgICAgICAgICAgaWYgKGVkZ2VzW3BdLmFsbW9zdEVxdWFscyhlZGdlKSB8fCBlZGdlc1twXS5hbG1vc3RFcXVhbHMoZWRnZSkpIHsKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICAgIGVkZ2VzLnB1c2goZWRnZS5jbG9uZSgpKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFscyBvZiB0aGUgZmFjZXMuCiAgICAgKiBXaWxsIHJldXNlIGV4aXN0aW5nIFZlYzMgb2JqZWN0cyBpbiB0aGUgYGZhY2VOb3JtYWxzYCBhcnJheSBpZiB0aGV5IGV4aXN0LgogICAgICovCgoKICAgIGNvbXB1dGVOb3JtYWxzKCkgewogICAgICB0aGlzLmZhY2VOb3JtYWxzLmxlbmd0aCA9IHRoaXMuZmFjZXMubGVuZ3RoOyAvLyBHZW5lcmF0ZSBub3JtYWxzCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBDaGVjayBzbyBhbGwgdmVydGljZXMgZXhpc3RzIGZvciB0aGlzIGZhY2UKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuZmFjZXNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgIGlmICghdGhpcy52ZXJ0aWNlc1t0aGlzLmZhY2VzW2ldW2pdXSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFZlcnRleCAke3RoaXMuZmFjZXNbaV1bal19IG5vdCBmb3VuZCFgKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGNvbnN0IG4gPSB0aGlzLmZhY2VOb3JtYWxzW2ldIHx8IG5ldyBWZWMzKCk7CiAgICAgICAgdGhpcy5nZXRGYWNlTm9ybWFsKGksIG4pOwogICAgICAgIG4ubmVnYXRlKG4pOwogICAgICAgIHRoaXMuZmFjZU5vcm1hbHNbaV0gPSBuOwogICAgICAgIGNvbnN0IHZlcnRleCA9IHRoaXMudmVydGljZXNbdGhpcy5mYWNlc1tpXVswXV07CgogICAgICAgIGlmIChuLmRvdCh2ZXJ0ZXgpIDwgMCkgewogICAgICAgICAgY29uc29sZS5lcnJvcihgLmZhY2VOb3JtYWxzWyR7aX1dID0gVmVjMygke24udG9TdHJpbmcoKX0pIGxvb2tzIGxpa2UgaXQgcG9pbnRzIGludG8gdGhlIHNoYXBlPyBUaGUgdmVydGljZXMgZm9sbG93LiBNYWtlIHN1cmUgdGhleSBhcmUgb3JkZXJlZCBDQ1cgYXJvdW5kIHRoZSBub3JtYWwsIHVzaW5nIHRoZSByaWdodCBoYW5kIHJ1bGUuYCk7CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmZhY2VzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGNvbnNvbGUud2FybihgLnZlcnRpY2VzWyR7dGhpcy5mYWNlc1tpXVtqXX1dID0gVmVjMygke3RoaXMudmVydGljZXNbdGhpcy5mYWNlc1tpXVtqXV0udG9TdHJpbmcoKX0pYCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIG5vcm1hbCBvZiBhIGZhY2UgZnJvbSBpdHMgdmVydGljZXMKICAgICAqLwoKCiAgICBnZXRGYWNlTm9ybWFsKGksIHRhcmdldCkgewogICAgICBjb25zdCBmID0gdGhpcy5mYWNlc1tpXTsKICAgICAgY29uc3QgdmEgPSB0aGlzLnZlcnRpY2VzW2ZbMF1dOwogICAgICBjb25zdCB2YiA9IHRoaXMudmVydGljZXNbZlsxXV07CiAgICAgIGNvbnN0IHZjID0gdGhpcy52ZXJ0aWNlc1tmWzJdXTsKICAgICAgQ29udmV4UG9seWhlZHJvbi5jb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBmYWNlIG5vcm1hbCBnaXZlbiAzIHZlcnRpY2VzCiAgICAgKi8KCgogICAgc3RhdGljIGNvbXB1dGVOb3JtYWwodmEsIHZiLCB2YywgdGFyZ2V0KSB7CiAgICAgIGNvbnN0IGNiID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYWIgPSBuZXcgVmVjMygpOwogICAgICB2Yi52c3ViKHZhLCBhYik7CiAgICAgIHZjLnZzdWIodmIsIGNiKTsKICAgICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7CgogICAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkgewogICAgICAgIHRhcmdldC5ub3JtYWxpemUoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBAcGFyYW0gbWluRGlzdCBDbGFtcCBkaXN0YW5jZQogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgYW4gYXJyYXkgb2YgY29udGFjdCBwb2ludCBvYmplY3RzLCBzZWUgY2xpcEZhY2VBZ2FpbnN0SHVsbAogICAgICovCgoKICAgIGNsaXBBZ2FpbnN0SHVsbChwb3NBLCBxdWF0QSwgaHVsbEIsIHBvc0IsIHF1YXRCLCBzZXBhcmF0aW5nTm9ybWFsLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHsKICAgICAgY29uc3QgV29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogICAgICBsZXQgY2xvc2VzdEZhY2VCID0gLTE7CiAgICAgIGxldCBkbWF4ID0gLU51bWJlci5NQVhfVkFMVUU7CgogICAgICBmb3IgKGxldCBmYWNlID0gMDsgZmFjZSA8IGh1bGxCLmZhY2VzLmxlbmd0aDsgZmFjZSsrKSB7CiAgICAgICAgV29ybGROb3JtYWwuY29weShodWxsQi5mYWNlTm9ybWFsc1tmYWNlXSk7CiAgICAgICAgcXVhdEIudm11bHQoV29ybGROb3JtYWwsIFdvcmxkTm9ybWFsKTsKICAgICAgICBjb25zdCBkID0gV29ybGROb3JtYWwuZG90KHNlcGFyYXRpbmdOb3JtYWwpOwoKICAgICAgICBpZiAoZCA+IGRtYXgpIHsKICAgICAgICAgIGRtYXggPSBkOwogICAgICAgICAgY2xvc2VzdEZhY2VCID0gZmFjZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkVmVydHNCMSA9IFtdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBodWxsQi5mYWNlc1tjbG9zZXN0RmFjZUJdLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGh1bGxCLnZlcnRpY2VzW2h1bGxCLmZhY2VzW2Nsb3Nlc3RGYWNlQl1baV1dOwogICAgICAgIGNvbnN0IHdvcmxkYiA9IG5ldyBWZWMzKCk7CiAgICAgICAgd29ybGRiLmNvcHkoYik7CiAgICAgICAgcXVhdEIudm11bHQod29ybGRiLCB3b3JsZGIpOwogICAgICAgIHBvc0IudmFkZCh3b3JsZGIsIHdvcmxkYik7CiAgICAgICAgd29ybGRWZXJ0c0IxLnB1c2god29ybGRiKTsKICAgICAgfQoKICAgICAgaWYgKGNsb3Nlc3RGYWNlQiA+PSAwKSB7CiAgICAgICAgdGhpcy5jbGlwRmFjZUFnYWluc3RIdWxsKHNlcGFyYXRpbmdOb3JtYWwsIHBvc0EsIHF1YXRBLCB3b3JsZFZlcnRzQjEsIG1pbkRpc3QsIG1heERpc3QsIHJlc3VsdCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogRmluZCB0aGUgc2VwYXJhdGluZyBheGlzIGJldHdlZW4gdGhpcyBodWxsIGFuZCBhbm90aGVyCiAgICAgKiBAcGFyYW0gdGFyZ2V0IFRoZSB0YXJnZXQgdmVjdG9yIHRvIHNhdmUgdGhlIGF4aXMgaW4KICAgICAqIEByZXR1cm4gUmV0dXJucyBmYWxzZSBpZiBhIHNlcGFyYXRpb24gaXMgZm91bmQsIGVsc2UgdHJ1ZQogICAgICovCgoKICAgIGZpbmRTZXBhcmF0aW5nQXhpcyhodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCLCB0YXJnZXQsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSB7CiAgICAgIGNvbnN0IGZhY2VBTm9ybWFsV1MzID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgV29ybGRub3JtYWwxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgZGVsdGFDID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgd29ybGRFZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkRWRnZTEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBDcm9zcyA9IG5ldyBWZWMzKCk7CiAgICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgICAgY29uc3QgaHVsbEEgPSB0aGlzOwoKICAgICAgaWYgKCFodWxsQS51bmlxdWVBeGVzKSB7CiAgICAgICAgY29uc3QgbnVtRmFjZXNBID0gZmFjZUxpc3RBID8gZmFjZUxpc3RBLmxlbmd0aCA6IGh1bGxBLmZhY2VzLmxlbmd0aDsgLy8gVGVzdCBmYWNlIG5vcm1hbHMgZnJvbSBodWxsQQoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQTsgaSsrKSB7CiAgICAgICAgICBjb25zdCBmaSA9IGZhY2VMaXN0QSA/IGZhY2VMaXN0QVtpXSA6IGk7IC8vIEdldCB3b3JsZCBmYWNlIG5vcm1hbAoKICAgICAgICAgIGZhY2VBTm9ybWFsV1MzLmNvcHkoaHVsbEEuZmFjZU5vcm1hbHNbZmldKTsKICAgICAgICAgIHF1YXRBLnZtdWx0KGZhY2VBTm9ybWFsV1MzLCBmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICBjb25zdCBkID0gaHVsbEEudGVzdFNlcEF4aXMoZmFjZUFOb3JtYWxXUzMsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgIGlmIChkID09PSBmYWxzZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICAgIGRtaW4gPSBkOwogICAgICAgICAgICB0YXJnZXQuY29weShmYWNlQU5vcm1hbFdTMyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gaHVsbEEudW5pcXVlQXhlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgLy8gR2V0IHdvcmxkIGF4aXMKICAgICAgICAgIHF1YXRBLnZtdWx0KGh1bGxBLnVuaXF1ZUF4ZXNbaV0sIGZhY2VBTm9ybWFsV1MzKTsKICAgICAgICAgIGNvbnN0IGQgPSBodWxsQS50ZXN0U2VwQXhpcyhmYWNlQU5vcm1hbFdTMywgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KGZhY2VBTm9ybWFsV1MzKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICghaHVsbEIudW5pcXVlQXhlcykgewogICAgICAgIC8vIFRlc3QgZmFjZSBub3JtYWxzIGZyb20gaHVsbEIKICAgICAgICBjb25zdCBudW1GYWNlc0IgPSBmYWNlTGlzdEIgPyBmYWNlTGlzdEIubGVuZ3RoIDogaHVsbEIuZmFjZXMubGVuZ3RoOwoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUZhY2VzQjsgaSsrKSB7CiAgICAgICAgICBjb25zdCBmaSA9IGZhY2VMaXN0QiA/IGZhY2VMaXN0QltpXSA6IGk7CiAgICAgICAgICBXb3JsZG5vcm1hbDEuY29weShodWxsQi5mYWNlTm9ybWFsc1tmaV0pOwogICAgICAgICAgcXVhdEIudm11bHQoV29ybGRub3JtYWwxLCBXb3JsZG5vcm1hbDEpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KFdvcmxkbm9ybWFsMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRlc3QgdW5pcXVlIGF4ZXMgaW4gQgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBodWxsQi51bmlxdWVBeGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICBxdWF0Qi52bXVsdChodWxsQi51bmlxdWVBeGVzW2ldLCBXb3JsZG5vcm1hbDEpOwogICAgICAgICAgY29uc3QgZCA9IGh1bGxBLnRlc3RTZXBBeGlzKFdvcmxkbm9ybWFsMSwgaHVsbEIsIHBvc0EsIHF1YXRBLCBwb3NCLCBxdWF0Qik7CgogICAgICAgICAgaWYgKGQgPT09IGZhbHNlKSB7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoZCA8IGRtaW4pIHsKICAgICAgICAgICAgZG1pbiA9IGQ7CiAgICAgICAgICAgIHRhcmdldC5jb3B5KFdvcmxkbm9ybWFsMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIFRlc3QgZWRnZXMKCgogICAgICBmb3IgKGxldCBlMCA9IDA7IGUwICE9PSBodWxsQS51bmlxdWVFZGdlcy5sZW5ndGg7IGUwKyspIHsKICAgICAgICAvLyBHZXQgd29ybGQgZWRnZQogICAgICAgIHF1YXRBLnZtdWx0KGh1bGxBLnVuaXF1ZUVkZ2VzW2UwXSwgd29ybGRFZGdlMCk7CgogICAgICAgIGZvciAobGV0IGUxID0gMDsgZTEgIT09IGh1bGxCLnVuaXF1ZUVkZ2VzLmxlbmd0aDsgZTErKykgewogICAgICAgICAgLy8gR2V0IHdvcmxkIGVkZ2UgMgogICAgICAgICAgcXVhdEIudm11bHQoaHVsbEIudW5pcXVlRWRnZXNbZTFdLCB3b3JsZEVkZ2UxKTsKICAgICAgICAgIHdvcmxkRWRnZTAuY3Jvc3Mod29ybGRFZGdlMSwgQ3Jvc3MpOwoKICAgICAgICAgIGlmICghQ3Jvc3MuYWxtb3N0WmVybygpKSB7CiAgICAgICAgICAgIENyb3NzLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBjb25zdCBkaXN0ID0gaHVsbEEudGVzdFNlcEF4aXMoQ3Jvc3MsIGh1bGxCLCBwb3NBLCBxdWF0QSwgcG9zQiwgcXVhdEIpOwoKICAgICAgICAgICAgaWYgKGRpc3QgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoZGlzdCA8IGRtaW4pIHsKICAgICAgICAgICAgICBkbWluID0gZGlzdDsKICAgICAgICAgICAgICB0YXJnZXQuY29weShDcm9zcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHBvc0IudnN1Yihwb3NBLCBkZWx0YUMpOwoKICAgICAgaWYgKGRlbHRhQy5kb3QodGFyZ2V0KSA+IDAuMCkgewogICAgICAgIHRhcmdldC5uZWdhdGUodGFyZ2V0KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIFRlc3Qgc2VwYXJhdGluZyBheGlzIGFnYWluc3QgdHdvIGh1bGxzLiBCb3RoIGh1bGxzIGFyZSBwcm9qZWN0ZWQgb250byB0aGUgYXhpcyBhbmQgdGhlIG92ZXJsYXAgc2l6ZSBpcyByZXR1cm5lZCBpZiB0aGVyZSBpcyBvbmUuCiAgICAgKiBAcmV0dXJuIFRoZSBvdmVybGFwIGRlcHRoLCBvciBGQUxTRSBpZiBubyBwZW5ldHJhdGlvbi4KICAgICAqLwoKCiAgICB0ZXN0U2VwQXhpcyhheGlzLCBodWxsQiwgcG9zQSwgcXVhdEEsIHBvc0IsIHF1YXRCKSB7CiAgICAgIGNvbnN0IGh1bGxBID0gdGhpczsKICAgICAgQ29udmV4UG9seWhlZHJvbi5wcm9qZWN0KGh1bGxBLCBheGlzLCBwb3NBLCBxdWF0QSwgbWF4bWluQSk7CiAgICAgIENvbnZleFBvbHloZWRyb24ucHJvamVjdChodWxsQiwgYXhpcywgcG9zQiwgcXVhdEIsIG1heG1pbkIpOwogICAgICBjb25zdCBtYXhBID0gbWF4bWluQVswXTsKICAgICAgY29uc3QgbWluQSA9IG1heG1pbkFbMV07CiAgICAgIGNvbnN0IG1heEIgPSBtYXhtaW5CWzBdOwogICAgICBjb25zdCBtaW5CID0gbWF4bWluQlsxXTsKCiAgICAgIGlmIChtYXhBIDwgbWluQiB8fCBtYXhCIDwgbWluQSkgewogICAgICAgIHJldHVybiBmYWxzZTsgLy8gU2VwYXJhdGVkCiAgICAgIH0KCiAgICAgIGNvbnN0IGQwID0gbWF4QSAtIG1pbkI7CiAgICAgIGNvbnN0IGQxID0gbWF4QiAtIG1pbkE7CiAgICAgIGNvbnN0IGRlcHRoID0gZDAgPCBkMSA/IGQwIDogZDE7CiAgICAgIHJldHVybiBkZXB0aDsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlTG9jYWxJbmVydGlhCiAgICAgKi8KCgogICAgY2FsY3VsYXRlTG9jYWxJbmVydGlhKG1hc3MsIHRhcmdldCkgewogICAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGJveCBpbmVydGlhCiAgICAgIC8vIEV4YWN0IGluZXJ0aWEgY2FsY3VsYXRpb24gaXMgb3ZlcmtpbGwsIGJ1dCBzZWUgaHR0cDovL2dlb21ldHJpY3Rvb2xzLmNvbS9Eb2N1bWVudGF0aW9uL1BvbHloZWRyYWxNYXNzUHJvcGVydGllcy5wZGYgZm9yIHRoZSBjb3JyZWN0IHdheSB0byBkbyBpdAogICAgICBjb25zdCBhYWJibWF4ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYWFiYm1pbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuY29tcHV0ZUxvY2FsQUFCQihhYWJibWluLCBhYWJibWF4KTsKICAgICAgY29uc3QgeCA9IGFhYmJtYXgueCAtIGFhYmJtaW4ueDsKICAgICAgY29uc3QgeSA9IGFhYmJtYXgueSAtIGFhYmJtaW4ueTsKICAgICAgY29uc3QgeiA9IGFhYmJtYXgueiAtIGFhYmJtaW4uejsKICAgICAgdGFyZ2V0LnggPSAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeSAqIDIgKiB5ICsgMiAqIHogKiAyICogeik7CiAgICAgIHRhcmdldC55ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHggKiAyICogeCArIDIgKiB6ICogMiAqIHopOwogICAgICB0YXJnZXQueiA9IDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB5ICogMiAqIHkgKyAyICogeCAqIDIgKiB4KTsKICAgIH0KICAgIC8qKgogICAgICogQHBhcmFtIGZhY2VfaSBJbmRleCBvZiB0aGUgZmFjZQogICAgICovCgoKICAgIGdldFBsYW5lQ29uc3RhbnRPZkZhY2UoZmFjZV9pKSB7CiAgICAgIGNvbnN0IGYgPSB0aGlzLmZhY2VzW2ZhY2VfaV07CiAgICAgIGNvbnN0IG4gPSB0aGlzLmZhY2VOb3JtYWxzW2ZhY2VfaV07CiAgICAgIGNvbnN0IHYgPSB0aGlzLnZlcnRpY2VzW2ZbMF1dOwogICAgICBjb25zdCBjID0gLW4uZG90KHYpOwogICAgICByZXR1cm4gYzsKICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgYWdhaW5zdCBhIGh1bGwuCiAgICAgKiBAcGFyYW0gd29ybGRWZXJ0c0IxIEFuIGFycmF5IG9mIFZlYzMgd2l0aCB2ZXJ0aWNlcyBpbiB0aGUgd29ybGQgZnJhbWUuCiAgICAgKiBAcGFyYW0gbWluRGlzdCBEaXN0YW5jZSBjbGFtcGluZwogICAgICogQHBhcmFtIEFycmF5IHJlc3VsdCBBcnJheSB0byBzdG9yZSByZXN1bHRpbmcgY29udGFjdCBwb2ludHMgaW4uIFdpbGwgYmUgb2JqZWN0cyB3aXRoIHByb3BlcnRpZXM6IHBvaW50LCBkZXB0aCwgbm9ybWFsLiBUaGVzZSBhcmUgcmVwcmVzZW50ZWQgaW4gd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0SHVsbChzZXBhcmF0aW5nTm9ybWFsLCBwb3NBLCBxdWF0QSwgd29ybGRWZXJ0c0IxLCBtaW5EaXN0LCBtYXhEaXN0LCByZXN1bHQpIHsKICAgICAgY29uc3QgZmFjZUFOb3JtYWxXUyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGVkZ2UwID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgV29ybGRFZGdlMCA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHdvcmxkUGxhbmVBbm9ybWFsMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBsYW5lTm9ybWFsV1MxID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgd29ybGRBMSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGxvY2FsUGxhbmVOb3JtYWwgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBwbGFuZU5vcm1hbFdTID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaHVsbEEgPSB0aGlzOwogICAgICBjb25zdCB3b3JsZFZlcnRzQjIgPSBbXTsKICAgICAgY29uc3QgcFZ0eEluID0gd29ybGRWZXJ0c0IxOwogICAgICBjb25zdCBwVnR4T3V0ID0gd29ybGRWZXJ0c0IyOwogICAgICBsZXQgY2xvc2VzdEZhY2VBID0gLTE7CiAgICAgIGxldCBkbWluID0gTnVtYmVyLk1BWF9WQUxVRTsgLy8gRmluZCB0aGUgZmFjZSB3aXRoIG5vcm1hbCBjbG9zZXN0IHRvIHRoZSBzZXBhcmF0aW5nIGF4aXMKCiAgICAgIGZvciAobGV0IGZhY2UgPSAwOyBmYWNlIDwgaHVsbEEuZmFjZXMubGVuZ3RoOyBmYWNlKyspIHsKICAgICAgICBmYWNlQU5vcm1hbFdTLmNvcHkoaHVsbEEuZmFjZU5vcm1hbHNbZmFjZV0pOwogICAgICAgIHF1YXRBLnZtdWx0KGZhY2VBTm9ybWFsV1MsIGZhY2VBTm9ybWFsV1MpOwogICAgICAgIGNvbnN0IGQgPSBmYWNlQU5vcm1hbFdTLmRvdChzZXBhcmF0aW5nTm9ybWFsKTsKCiAgICAgICAgaWYgKGQgPCBkbWluKSB7CiAgICAgICAgICBkbWluID0gZDsKICAgICAgICAgIGNsb3Nlc3RGYWNlQSA9IGZhY2U7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoY2xvc2VzdEZhY2VBIDwgMCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBHZXQgdGhlIGZhY2UgYW5kIGNvbnN0cnVjdCBjb25uZWN0ZWQgZmFjZXMKCgogICAgICBjb25zdCBwb2x5QSA9IGh1bGxBLmZhY2VzW2Nsb3Nlc3RGYWNlQV07CiAgICAgIHBvbHlBLmNvbm5lY3RlZEZhY2VzID0gW107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGh1bGxBLmZhY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBodWxsQS5mYWNlc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgaWYgKAogICAgICAgICAgLyogU2hhcmluZyBhIHZlcnRleCovCiAgICAgICAgICBwb2x5QS5pbmRleE9mKGh1bGxBLmZhY2VzW2ldW2pdKSAhPT0gLTEgJiYKICAgICAgICAgIC8qIE5vdCB0aGUgb25lIHdlIGFyZSBsb29raW5nIGZvciBjb25uZWN0aW9ucyBmcm9tICovCiAgICAgICAgICBpICE9PSBjbG9zZXN0RmFjZUEgJiYKICAgICAgICAgIC8qIE5vdCBhbHJlYWR5IGFkZGVkICovCiAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5pbmRleE9mKGkpID09PSAtMSkgewogICAgICAgICAgICBwb2x5QS5jb25uZWN0ZWRGYWNlcy5wdXNoKGkpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBDbGlwIHRoZSBwb2x5Z29uIHRvIHRoZSBiYWNrIG9mIHRoZSBwbGFuZXMgb2YgYWxsIGZhY2VzIG9mIGh1bGwgQSwKICAgICAgLy8gdGhhdCBhcmUgYWRqYWNlbnQgdG8gdGhlIHdpdG5lc3MgZmFjZQoKCiAgICAgIGNvbnN0IG51bVZlcnRpY2VzQSA9IHBvbHlBLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtVmVydGljZXNBOyBpKyspIHsKICAgICAgICBjb25zdCBhID0gaHVsbEEudmVydGljZXNbcG9seUFbaV1dOwogICAgICAgIGNvbnN0IGIgPSBodWxsQS52ZXJ0aWNlc1twb2x5QVsoaSArIDEpICUgbnVtVmVydGljZXNBXV07CiAgICAgICAgYS52c3ViKGIsIGVkZ2UwKTsKICAgICAgICBXb3JsZEVkZ2UwLmNvcHkoZWRnZTApOwogICAgICAgIHF1YXRBLnZtdWx0KFdvcmxkRWRnZTAsIFdvcmxkRWRnZTApOwogICAgICAgIHBvc0EudmFkZChXb3JsZEVkZ2UwLCBXb3JsZEVkZ2UwKTsKICAgICAgICB3b3JsZFBsYW5lQW5vcm1hbDEuY29weSh0aGlzLmZhY2VOb3JtYWxzW2Nsb3Nlc3RGYWNlQV0pOwogICAgICAgIHF1YXRBLnZtdWx0KHdvcmxkUGxhbmVBbm9ybWFsMSwgd29ybGRQbGFuZUFub3JtYWwxKTsKICAgICAgICBwb3NBLnZhZGQod29ybGRQbGFuZUFub3JtYWwxLCB3b3JsZFBsYW5lQW5vcm1hbDEpOwogICAgICAgIFdvcmxkRWRnZTAuY3Jvc3Mod29ybGRQbGFuZUFub3JtYWwxLCBwbGFuZU5vcm1hbFdTMSk7CiAgICAgICAgcGxhbmVOb3JtYWxXUzEubmVnYXRlKHBsYW5lTm9ybWFsV1MxKTsKICAgICAgICB3b3JsZEExLmNvcHkoYSk7CiAgICAgICAgcXVhdEEudm11bHQod29ybGRBMSwgd29ybGRBMSk7CiAgICAgICAgcG9zQS52YWRkKHdvcmxkQTEsIHdvcmxkQTEpOwogICAgICAgIGNvbnN0IG90aGVyRmFjZSA9IHBvbHlBLmNvbm5lY3RlZEZhY2VzW2ldOwogICAgICAgIGxvY2FsUGxhbmVOb3JtYWwuY29weSh0aGlzLmZhY2VOb3JtYWxzW290aGVyRmFjZV0pOwogICAgICAgIGNvbnN0IGxvY2FsUGxhbmVFcSA9IHRoaXMuZ2V0UGxhbmVDb25zdGFudE9mRmFjZShvdGhlckZhY2UpOwogICAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTsKICAgICAgICBxdWF0QS52bXVsdChwbGFuZU5vcm1hbFdTLCBwbGFuZU5vcm1hbFdTKTsKICAgICAgICBjb25zdCBwbGFuZUVxV1MgPSBsb2NhbFBsYW5lRXEgLSBwbGFuZU5vcm1hbFdTLmRvdChwb3NBKTsgLy8gQ2xpcCBmYWNlIGFnYWluc3Qgb3VyIGNvbnN0cnVjdGVkIHBsYW5lCgogICAgICAgIHRoaXMuY2xpcEZhY2VBZ2FpbnN0UGxhbmUocFZ0eEluLCBwVnR4T3V0LCBwbGFuZU5vcm1hbFdTLCBwbGFuZUVxV1MpOyAvLyBUaHJvdyBhd2F5IGFsbCBjbGlwcGVkIHBvaW50cywgYnV0IHNhdmUgdGhlIHJlbWFpbmluZyB1bnRpbCBuZXh0IGNsaXAKCiAgICAgICAgd2hpbGUgKHBWdHhJbi5sZW5ndGgpIHsKICAgICAgICAgIHBWdHhJbi5zaGlmdCgpOwogICAgICAgIH0KCiAgICAgICAgd2hpbGUgKHBWdHhPdXQubGVuZ3RoKSB7CiAgICAgICAgICBwVnR4SW4ucHVzaChwVnR4T3V0LnNoaWZ0KCkpOwogICAgICAgIH0KICAgICAgfSAvLyBvbmx5IGtlZXAgY29udGFjdCBwb2ludHMgdGhhdCBhcmUgYmVoaW5kIHRoZSB3aXRuZXNzIGZhY2UKCgogICAgICBsb2NhbFBsYW5lTm9ybWFsLmNvcHkodGhpcy5mYWNlTm9ybWFsc1tjbG9zZXN0RmFjZUFdKTsKICAgICAgY29uc3QgbG9jYWxQbGFuZUVxID0gdGhpcy5nZXRQbGFuZUNvbnN0YW50T2ZGYWNlKGNsb3Nlc3RGYWNlQSk7CiAgICAgIHBsYW5lTm9ybWFsV1MuY29weShsb2NhbFBsYW5lTm9ybWFsKTsKICAgICAgcXVhdEEudm11bHQocGxhbmVOb3JtYWxXUywgcGxhbmVOb3JtYWxXUyk7CiAgICAgIGNvbnN0IHBsYW5lRXFXUyA9IGxvY2FsUGxhbmVFcSAtIHBsYW5lTm9ybWFsV1MuZG90KHBvc0EpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwVnR4SW4ubGVuZ3RoOyBpKyspIHsKICAgICAgICBsZXQgZGVwdGggPSBwbGFuZU5vcm1hbFdTLmRvdChwVnR4SW5baV0pICsgcGxhbmVFcVdTOyAvLyA/Pz8KCiAgICAgICAgaWYgKGRlcHRoIDw9IG1pbkRpc3QpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBjbGFtcGVkOiBkZXB0aD0ke2RlcHRofSB0byBtaW5EaXN0PSR7bWluRGlzdH1gKTsKICAgICAgICAgIGRlcHRoID0gbWluRGlzdDsKICAgICAgICB9CgogICAgICAgIGlmIChkZXB0aCA8PSBtYXhEaXN0KSB7CiAgICAgICAgICBjb25zdCBwb2ludCA9IHBWdHhJbltpXTsKCiAgICAgICAgICBpZiAoZGVwdGggPD0gMWUtNikgewogICAgICAgICAgICBjb25zdCBwID0gewogICAgICAgICAgICAgIHBvaW50LAogICAgICAgICAgICAgIG5vcm1hbDogcGxhbmVOb3JtYWxXUywKICAgICAgICAgICAgICBkZXB0aAogICAgICAgICAgICB9OwogICAgICAgICAgICByZXN1bHQucHVzaChwKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2xpcCBhIGZhY2UgaW4gYSBodWxsIGFnYWluc3QgdGhlIGJhY2sgb2YgYSBwbGFuZS4KICAgICAqIEBwYXJhbSBwbGFuZUNvbnN0YW50IFRoZSBjb25zdGFudCBpbiB0aGUgbWF0aGVtYXRpY2FsIHBsYW5lIGVxdWF0aW9uCiAgICAgKi8KCgogICAgY2xpcEZhY2VBZ2FpbnN0UGxhbmUoaW5WZXJ0aWNlcywgb3V0VmVydGljZXMsIHBsYW5lTm9ybWFsLCBwbGFuZUNvbnN0YW50KSB7CiAgICAgIGxldCBuX2RvdF9maXJzdDsKICAgICAgbGV0IG5fZG90X2xhc3Q7CiAgICAgIGNvbnN0IG51bVZlcnRzID0gaW5WZXJ0aWNlcy5sZW5ndGg7CgogICAgICBpZiAobnVtVmVydHMgPCAyKSB7CiAgICAgICAgcmV0dXJuIG91dFZlcnRpY2VzOwogICAgICB9CgogICAgICBsZXQgZmlyc3RWZXJ0ZXggPSBpblZlcnRpY2VzW2luVmVydGljZXMubGVuZ3RoIC0gMV07CiAgICAgIGxldCBsYXN0VmVydGV4ID0gaW5WZXJ0aWNlc1swXTsKICAgICAgbl9kb3RfZmlyc3QgPSBwbGFuZU5vcm1hbC5kb3QoZmlyc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgIGZvciAobGV0IHZpID0gMDsgdmkgPCBudW1WZXJ0czsgdmkrKykgewogICAgICAgIGxhc3RWZXJ0ZXggPSBpblZlcnRpY2VzW3ZpXTsKICAgICAgICBuX2RvdF9sYXN0ID0gcGxhbmVOb3JtYWwuZG90KGxhc3RWZXJ0ZXgpICsgcGxhbmVDb25zdGFudDsKCiAgICAgICAgaWYgKG5fZG90X2ZpcnN0IDwgMCkgewogICAgICAgICAgaWYgKG5fZG90X2xhc3QgPCAwKSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kIDwgMCwgc28gb3V0cHV0IGxhc3RWZXJ0ZXgKICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIG5ld3YuY29weShsYXN0VmVydGV4KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFN0YXJ0IDwgMCwgZW5kID49IDAsIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24KICAgICAgICAgICAgY29uc3QgbmV3diA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIGZpcnN0VmVydGV4LmxlcnAobGFzdFZlcnRleCwgbl9kb3RfZmlyc3QgLyAobl9kb3RfZmlyc3QgLSBuX2RvdF9sYXN0KSwgbmV3dik7CiAgICAgICAgICAgIG91dFZlcnRpY2VzLnB1c2gobmV3dik7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmIChuX2RvdF9sYXN0IDwgMCkgewogICAgICAgICAgICAvLyBTdGFydCA+PSAwLCBlbmQgPCAwIHNvIG91dHB1dCBpbnRlcnNlY3Rpb24gYW5kIGVuZAogICAgICAgICAgICBjb25zdCBuZXd2ID0gbmV3IFZlYzMoKTsKICAgICAgICAgICAgZmlyc3RWZXJ0ZXgubGVycChsYXN0VmVydGV4LCBuX2RvdF9maXJzdCAvIChuX2RvdF9maXJzdCAtIG5fZG90X2xhc3QpLCBuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChuZXd2KTsKICAgICAgICAgICAgb3V0VmVydGljZXMucHVzaChsYXN0VmVydGV4KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZpcnN0VmVydGV4ID0gbGFzdFZlcnRleDsKICAgICAgICBuX2RvdF9maXJzdCA9IG5fZG90X2xhc3Q7CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXRWZXJ0aWNlczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgLndvcmxkVmVydGljZXNgIGFuZCBzZXRzIGAud29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlYCB0byBmYWxzZS4KICAgICAqLwoKCiAgICBjb21wdXRlV29ybGRWZXJ0aWNlcyhwb3NpdGlvbiwgcXVhdCkgewogICAgICB3aGlsZSAodGhpcy53b3JsZFZlcnRpY2VzLmxlbmd0aCA8IHRoaXMudmVydGljZXMubGVuZ3RoKSB7CiAgICAgICAgdGhpcy53b3JsZFZlcnRpY2VzLnB1c2gobmV3IFZlYzMoKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3Qgd29ybGRWZXJ0cyA9IHRoaXMud29ybGRWZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgcXVhdC52bXVsdCh2ZXJ0c1tpXSwgd29ybGRWZXJ0c1tpXSk7CiAgICAgICAgcG9zaXRpb24udmFkZCh3b3JsZFZlcnRzW2ldLCB3b3JsZFZlcnRzW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy53b3JsZFZlcnRpY2VzTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KCiAgICBjb21wdXRlTG9jYWxBQUJCKGFhYmJtaW4sIGFhYmJtYXgpIHsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBhYWJibWluLnNldChOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFLCBOdW1iZXIuTUFYX1ZBTFVFKTsKICAgICAgYWFiYm1heC5zZXQoLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gdmVydGljZXNbaV07CgogICAgICAgIGlmICh2LnggPCBhYWJibWluLngpIHsKICAgICAgICAgIGFhYmJtaW4ueCA9IHYueDsKICAgICAgICB9IGVsc2UgaWYgKHYueCA+IGFhYmJtYXgueCkgewogICAgICAgICAgYWFiYm1heC54ID0gdi54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHYueSA8IGFhYmJtaW4ueSkgewogICAgICAgICAgYWFiYm1pbi55ID0gdi55OwogICAgICAgIH0gZWxzZSBpZiAodi55ID4gYWFiYm1heC55KSB7CiAgICAgICAgICBhYWJibWF4LnkgPSB2Lnk7CiAgICAgICAgfQoKICAgICAgICBpZiAodi56IDwgYWFiYm1pbi56KSB7CiAgICAgICAgICBhYWJibWluLnogPSB2Lno7CiAgICAgICAgfSBlbHNlIGlmICh2LnogPiBhYWJibWF4LnopIHsKICAgICAgICAgIGFhYmJtYXgueiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyBgd29ybGRWZXJ0aWNlc2AgYW5kIHNldHMgYHdvcmxkVmVydGljZXNOZWVkc1VwZGF0ZWAgdG8gZmFsc2UuCiAgICAgKi8KCgogICAgY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocXVhdCkgewogICAgICBjb25zdCBOID0gdGhpcy5mYWNlTm9ybWFscy5sZW5ndGg7CgogICAgICB3aGlsZSAodGhpcy53b3JsZEZhY2VOb3JtYWxzLmxlbmd0aCA8IE4pIHsKICAgICAgICB0aGlzLndvcmxkRmFjZU5vcm1hbHMucHVzaChuZXcgVmVjMygpKTsKICAgICAgfQoKICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMuZmFjZU5vcm1hbHM7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFscyA9IHRoaXMud29ybGRGYWNlTm9ybWFsczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBxdWF0LnZtdWx0KG5vcm1hbHNbaV0sIHdvcmxkTm9ybWFsc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMud29ybGRGYWNlTm9ybWFsc05lZWRzVXBkYXRlID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzCiAgICAgKi8KCgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIEFzc3VtZSBwb2ludHMgYXJlIGRpc3RyaWJ1dGVkIHdpdGggbG9jYWwgKDAsMCwwKSBhcyBjZW50ZXIKICAgICAgbGV0IG1heDIgPSAwOwogICAgICBjb25zdCB2ZXJ0cyA9IHRoaXMudmVydGljZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBub3JtMiA9IHZlcnRzW2ldLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgICAgaWYgKG5vcm0yID4gbWF4MikgewogICAgICAgICAgbWF4MiA9IG5vcm0yOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBsZXQgbWlueDsKICAgICAgbGV0IG1pbnk7CiAgICAgIGxldCBtaW56OwogICAgICBsZXQgbWF4eDsKICAgICAgbGV0IG1heHk7CiAgICAgIGxldCBtYXh6OwogICAgICBsZXQgdGVtcFdvcmxkVmVydGV4ID0gbmV3IFZlYzMoKTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0ZW1wV29ybGRWZXJ0ZXguY29weSh2ZXJ0c1tpXSk7CiAgICAgICAgcXVhdC52bXVsdCh0ZW1wV29ybGRWZXJ0ZXgsIHRlbXBXb3JsZFZlcnRleCk7CiAgICAgICAgcG9zLnZhZGQodGVtcFdvcmxkVmVydGV4LCB0ZW1wV29ybGRWZXJ0ZXgpOwogICAgICAgIGNvbnN0IHYgPSB0ZW1wV29ybGRWZXJ0ZXg7CgogICAgICAgIGlmIChtaW54ID09PSB1bmRlZmluZWQgfHwgdi54IDwgbWlueCkgewogICAgICAgICAgbWlueCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh4ID09PSB1bmRlZmluZWQgfHwgdi54ID4gbWF4eCkgewogICAgICAgICAgbWF4eCA9IHYueDsKICAgICAgICB9CgogICAgICAgIGlmIChtaW55ID09PSB1bmRlZmluZWQgfHwgdi55IDwgbWlueSkgewogICAgICAgICAgbWlueSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh5ID09PSB1bmRlZmluZWQgfHwgdi55ID4gbWF4eSkgewogICAgICAgICAgbWF4eSA9IHYueTsKICAgICAgICB9CgogICAgICAgIGlmIChtaW56ID09PSB1bmRlZmluZWQgfHwgdi56IDwgbWlueikgewogICAgICAgICAgbWlueiA9IHYuejsKICAgICAgICB9CgogICAgICAgIGlmIChtYXh6ID09PSB1bmRlZmluZWQgfHwgdi56ID4gbWF4eikgewogICAgICAgICAgbWF4eiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1pbi5zZXQobWlueCwgbWlueSwgbWlueik7CiAgICAgIG1heC5zZXQobWF4eCwgbWF4eSwgbWF4eik7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhcHByb3hpbWF0ZSBjb252ZXggdm9sdW1lCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgLyAzLjA7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBhdmVyYWdlIG9mIGFsbCB0aGUgdmVydGljZXMgcG9zaXRpb25zCiAgICAgKi8KCgogICAgZ2V0QXZlcmFnZVBvaW50TG9jYWwodGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVydHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0YXJnZXQudmFkZCh2ZXJ0c1tpXSwgdGFyZ2V0KTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNjYWxlKDEgLyB2ZXJ0cy5sZW5ndGgsIHRhcmdldCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CiAgICAvKioKICAgICAqIFRyYW5zZm9ybSBhbGwgbG9jYWwgcG9pbnRzLiBXaWxsIGNoYW5nZSB0aGUgLnZlcnRpY2VzCiAgICAgKi8KCgogICAgdHJhbnNmb3JtQWxsUG9pbnRzKG9mZnNldCwgcXVhdCkgewogICAgICBjb25zdCBuID0gdGhpcy52ZXJ0aWNlcy5sZW5ndGg7CiAgICAgIGNvbnN0IHZlcnRzID0gdGhpcy52ZXJ0aWNlczsgLy8gQXBwbHkgcm90YXRpb24KCiAgICAgIGlmIChxdWF0KSB7CiAgICAgICAgLy8gUm90YXRlIHZlcnRpY2VzCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tpXTsKICAgICAgICAgIHF1YXQudm11bHQodiwgdik7CiAgICAgICAgfSAvLyBSb3RhdGUgZmFjZSBub3JtYWxzCgoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmFjZU5vcm1hbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHYgPSB0aGlzLmZhY2VOb3JtYWxzW2ldOwogICAgICAgICAgcXVhdC52bXVsdCh2LCB2KTsKICAgICAgICB9CiAgICAgICAgLyoKICAgICAgICAgICAgICAvLyBSb3RhdGUgZWRnZXMKICAgICAgICAgICAgICBmb3IobGV0IGk9MDsgaTx0aGlzLnVuaXF1ZUVkZ2VzLmxlbmd0aDsgaSsrKXsKICAgICAgICAgICAgICAgICAgY29uc3QgdiA9IHRoaXMudW5pcXVlRWRnZXNbaV07CiAgICAgICAgICAgICAgICAgIHF1YXQudm11bHQodix2KTsKICAgICAgICAgICAgICB9Ki8KCiAgICAgIH0gLy8gQXBwbHkgb2Zmc2V0CgoKICAgICAgaWYgKG9mZnNldCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7CiAgICAgICAgICBjb25zdCB2ID0gdmVydHNbaV07CiAgICAgICAgICB2LnZhZGQob2Zmc2V0LCB2KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2tzIHdoZXRoZXIgcCBpcyBpbnNpZGUgdGhlIHBvbHloZWRyYS4gTXVzdCBiZSBpbiBsb2NhbCBjb29yZHMuCiAgICAgKiBUaGUgcG9pbnQgbGllcyBvdXRzaWRlIG9mIHRoZSBjb252ZXggaHVsbCBvZiB0aGUgb3RoZXIgcG9pbnRzIGlmIGFuZCBvbmx5IGlmIHRoZSBkaXJlY3Rpb24KICAgICAqIG9mIGFsbCB0aGUgdmVjdG9ycyBmcm9tIGl0IHRvIHRob3NlIG90aGVyIHBvaW50cyBhcmUgb24gbGVzcyB0aGFuIG9uZSBoYWxmIG9mIGEgc3BoZXJlIGFyb3VuZCBpdC4KICAgICAqIEBwYXJhbSBwIEEgcG9pbnQgZ2l2ZW4gaW4gbG9jYWwgY29vcmRpbmF0ZXMKICAgICAqLwoKCiAgICBwb2ludElzSW5zaWRlKHApIHsKICAgICAgY29uc3QgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCBmYWNlcyA9IHRoaXMuZmFjZXM7CiAgICAgIGNvbnN0IG5vcm1hbHMgPSB0aGlzLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBwb2ludEluc2lkZSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuZ2V0QXZlcmFnZVBvaW50TG9jYWwocG9pbnRJbnNpZGUpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmZhY2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgbGV0IG4gPSBub3JtYWxzW2ldOwogICAgICAgIGNvbnN0IHYgPSB2ZXJ0c1tmYWNlc1tpXVswXV07IC8vIFdlIG9ubHkgbmVlZCBvbmUgcG9pbnQgaW4gdGhlIGZhY2UKICAgICAgICAvLyBUaGlzIGRvdCBwcm9kdWN0IGRldGVybWluZXMgd2hpY2ggc2lkZSBvZiB0aGUgZWRnZSB0aGUgcG9pbnQgaXMKCiAgICAgICAgY29uc3QgdlRvUCA9IG5ldyBWZWMzKCk7CiAgICAgICAgcC52c3ViKHYsIHZUb1ApOwogICAgICAgIGNvbnN0IHIxID0gbi5kb3QodlRvUCk7CiAgICAgICAgY29uc3QgdlRvUG9pbnRJbnNpZGUgPSBuZXcgVmVjMygpOwogICAgICAgIHBvaW50SW5zaWRlLnZzdWIodiwgdlRvUG9pbnRJbnNpZGUpOwogICAgICAgIGNvbnN0IHIyID0gbi5kb3QodlRvUG9pbnRJbnNpZGUpOwoKICAgICAgICBpZiAocjEgPCAwICYmIHIyID4gMCB8fCByMSA+IDAgJiYgcjIgPCAwKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIEVuY291bnRlcmVkIHNvbWUgb3RoZXIgc2lnbi4gRXhpdC4KICAgICAgICB9CiAgICAgIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLgoKCiAgICAgIHJldHVybiAtMTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IG1heCBhbmQgbWluIGRvdCBwcm9kdWN0IG9mIGEgY29udmV4IGh1bGwgYXQgcG9zaXRpb24gKHBvcyxxdWF0KSBwcm9qZWN0ZWQgb250byBhbiBheGlzLgogICAgICogUmVzdWx0cyBhcmUgc2F2ZWQgaW4gdGhlIGFycmF5IG1heG1pbi4KICAgICAqIEBwYXJhbSByZXN1bHQgcmVzdWx0WzBdIGFuZCByZXN1bHRbMV0gd2lsbCBiZSBzZXQgdG8gbWF4aW11bSBhbmQgbWluaW11bSwgcmVzcGVjdGl2ZWx5LgogICAgICovCgoKICAgIHN0YXRpYyBwcm9qZWN0KHNoYXBlLCBheGlzLCBwb3MsIHF1YXQsIHJlc3VsdCkgewogICAgICBjb25zdCBuID0gc2hhcGUudmVydGljZXMubGVuZ3RoOwogICAgICBjb25zdCBsb2NhbEF4aXMgPSBwcm9qZWN0X2xvY2FsQXhpczsKICAgICAgbGV0IG1heCA9IDA7CiAgICAgIGxldCBtaW4gPSAwOwogICAgICBjb25zdCBsb2NhbE9yaWdpbiA9IHByb2plY3RfbG9jYWxPcmlnaW47CiAgICAgIGNvbnN0IHZzID0gc2hhcGUudmVydGljZXM7CiAgICAgIGxvY2FsT3JpZ2luLnNldFplcm8oKTsgLy8gVHJhbnNmb3JtIHRoZSBheGlzIHRvIGxvY2FsCgogICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Mb2NhbEZyYW1lKHBvcywgcXVhdCwgYXhpcywgbG9jYWxBeGlzKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvcywgcXVhdCwgbG9jYWxPcmlnaW4sIGxvY2FsT3JpZ2luKTsKICAgICAgY29uc3QgYWRkID0gbG9jYWxPcmlnaW4uZG90KGxvY2FsQXhpcyk7CiAgICAgIG1pbiA9IG1heCA9IHZzWzBdLmRvdChsb2NhbEF4aXMpOwoKICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCBuOyBpKyspIHsKICAgICAgICBjb25zdCB2YWwgPSB2c1tpXS5kb3QobG9jYWxBeGlzKTsKCiAgICAgICAgaWYgKHZhbCA+IG1heCkgewogICAgICAgICAgbWF4ID0gdmFsOwogICAgICAgIH0KCiAgICAgICAgaWYgKHZhbCA8IG1pbikgewogICAgICAgICAgbWluID0gdmFsOwogICAgICAgIH0KICAgICAgfQoKICAgICAgbWluIC09IGFkZDsKICAgICAgbWF4IC09IGFkZDsKCiAgICAgIGlmIChtaW4gPiBtYXgpIHsKICAgICAgICAvLyBJbmNvbnNpc3RlbnQgLSBzd2FwCiAgICAgICAgY29uc3QgdGVtcCA9IG1pbjsKICAgICAgICBtaW4gPSBtYXg7CiAgICAgICAgbWF4ID0gdGVtcDsKICAgICAgfSAvLyBPdXRwdXQKCgogICAgICByZXN1bHRbMF0gPSBtYXg7CiAgICAgIHJlc3VsdFsxXSA9IG1pbjsKICAgIH0KCiAgfQogIGNvbnN0IG1heG1pbkEgPSBbXTsKICBjb25zdCBtYXhtaW5CID0gW107CiAgbmV3IFZlYzMoKTsKICBjb25zdCBwcm9qZWN0X2xvY2FsQXhpcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcHJvamVjdF9sb2NhbE9yaWdpbiA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIEEgM2QgYm94IHNoYXBlLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHNpemUgPSAxCiAgICogICAgIGNvbnN0IGhhbGZFeHRlbnRzID0gbmV3IENBTk5PTi5WZWMzKHNpemUsIHNpemUsIHNpemUpCiAgICogICAgIGNvbnN0IGJveFNoYXBlID0gbmV3IENBTk5PTi5Cb3goaGFsZkV4dGVudHMpCiAgICogICAgIGNvbnN0IGJveEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogYm94U2hhcGUgfSkKICAgKiAgICAgd29ybGQuYWRkQm9keShib3hCb2R5KQogICAqLwogIGNsYXNzIEJveCBleHRlbmRzIFNoYXBlIHsKICAgIC8qKgogICAgICogVGhlIGhhbGYgZXh0ZW50cyBvZiB0aGUgYm94LgogICAgICovCgogICAgLyoqCiAgICAgKiBVc2VkIGJ5IHRoZSBjb250YWN0IGdlbmVyYXRvciB0byBtYWtlIGNvbnRhY3RzIHdpdGggb3RoZXIgY29udmV4IHBvbHloZWRyYSBmb3IgZXhhbXBsZS4KICAgICAqLwogICAgY29uc3RydWN0b3IoaGFsZkV4dGVudHMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLkJPWAogICAgICB9KTsKICAgICAgdGhpcy5oYWxmRXh0ZW50cyA9IGhhbGZFeHRlbnRzOwogICAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IG51bGw7CiAgICAgIHRoaXMudXBkYXRlQ29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB0aGUgbG9jYWwgY29udmV4IHBvbHloZWRyb24gcmVwcmVzZW50YXRpb24gdXNlZCBmb3Igc29tZSBjb2xsaXNpb25zLgogICAgICovCgoKICAgIHVwZGF0ZUNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbigpIHsKICAgICAgY29uc3Qgc3ggPSB0aGlzLmhhbGZFeHRlbnRzLng7CiAgICAgIGNvbnN0IHN5ID0gdGhpcy5oYWxmRXh0ZW50cy55OwogICAgICBjb25zdCBzeiA9IHRoaXMuaGFsZkV4dGVudHMuejsKICAgICAgY29uc3QgViA9IFZlYzM7CiAgICAgIGNvbnN0IHZlcnRpY2VzID0gW25ldyBWKC1zeCwgLXN5LCAtc3opLCBuZXcgVihzeCwgLXN5LCAtc3opLCBuZXcgVihzeCwgc3ksIC1zeiksIG5ldyBWKC1zeCwgc3ksIC1zeiksIG5ldyBWKC1zeCwgLXN5LCBzeiksIG5ldyBWKHN4LCAtc3ksIHN6KSwgbmV3IFYoc3gsIHN5LCBzeiksIG5ldyBWKC1zeCwgc3ksIHN6KV07CiAgICAgIGNvbnN0IGZhY2VzID0gW1szLCAyLCAxLCAwXSwgLy8gLXoKICAgICAgWzQsIDUsIDYsIDddLCAvLyAregogICAgICBbNSwgNCwgMCwgMV0sIC8vIC15CiAgICAgIFsyLCAzLCA3LCA2XSwgLy8gK3kKICAgICAgWzAsIDQsIDcsIDNdLCAvLyAteAogICAgICBbMSwgMiwgNiwgNV0gLy8gK3gKICAgICAgXTsKICAgICAgY29uc3QgYXhlcyA9IFtuZXcgVigwLCAwLCAxKSwgbmV3IFYoMCwgMSwgMCksIG5ldyBWKDEsIDAsIDApXTsKICAgICAgY29uc3QgaCA9IG5ldyBDb252ZXhQb2x5aGVkcm9uKHsKICAgICAgICB2ZXJ0aWNlcywKICAgICAgICBmYWNlcywKICAgICAgICBheGVzCiAgICAgIH0pOwogICAgICB0aGlzLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiA9IGg7CiAgICAgIGgubWF0ZXJpYWwgPSB0aGlzLm1hdGVyaWFsOwogICAgfQogICAgLyoqCiAgICAgKiBDYWxjdWxhdGUgdGhlIGluZXJ0aWEgb2YgdGhlIGJveC4KICAgICAqLwoKCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIEJveC5jYWxjdWxhdGVJbmVydGlhKHRoaXMuaGFsZkV4dGVudHMsIG1hc3MsIHRhcmdldCk7CiAgICAgIHJldHVybiB0YXJnZXQ7CiAgICB9CgogICAgc3RhdGljIGNhbGN1bGF0ZUluZXJ0aWEoaGFsZkV4dGVudHMsIG1hc3MsIHRhcmdldCkgewogICAgICBjb25zdCBlID0gaGFsZkV4dGVudHM7CiAgICAgIHRhcmdldC54ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueSAqIDIgKiBlLnkgKyAyICogZS56ICogMiAqIGUueik7CiAgICAgIHRhcmdldC55ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueCAqIDIgKiBlLnggKyAyICogZS56ICogMiAqIGUueik7CiAgICAgIHRhcmdldC56ID0gMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIGUueSAqIDIgKiBlLnkgKyAyICogZS54ICogMiAqIGUueCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgYm94IDYgc2lkZSBub3JtYWxzCiAgICAgKiBAcGFyYW0gc2l4VGFyZ2V0VmVjdG9ycyBBbiBhcnJheSBvZiA2IHZlY3RvcnMsIHRvIHN0b3JlIHRoZSByZXN1bHRpbmcgc2lkZSBub3JtYWxzIGluLgogICAgICogQHBhcmFtIHF1YXQgT3JpZW50YXRpb24gdG8gYXBwbHkgdG8gdGhlIG5vcm1hbCB2ZWN0b3JzLiBJZiBub3QgcHJvdmlkZWQsIHRoZSB2ZWN0b3JzIHdpbGwgYmUgaW4gcmVzcGVjdCB0byB0aGUgbG9jYWwgZnJhbWUuCiAgICAgKi8KCgogICAgZ2V0U2lkZU5vcm1hbHMoc2l4VGFyZ2V0VmVjdG9ycywgcXVhdCkgewogICAgICBjb25zdCBzaWRlcyA9IHNpeFRhcmdldFZlY3RvcnM7CiAgICAgIGNvbnN0IGV4ID0gdGhpcy5oYWxmRXh0ZW50czsKICAgICAgc2lkZXNbMF0uc2V0KGV4LngsIDAsIDApOwogICAgICBzaWRlc1sxXS5zZXQoMCwgZXgueSwgMCk7CiAgICAgIHNpZGVzWzJdLnNldCgwLCAwLCBleC56KTsKICAgICAgc2lkZXNbM10uc2V0KC1leC54LCAwLCAwKTsKICAgICAgc2lkZXNbNF0uc2V0KDAsIC1leC55LCAwKTsKICAgICAgc2lkZXNbNV0uc2V0KDAsIDAsIC1leC56KTsKCiAgICAgIGlmIChxdWF0ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gc2lkZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHF1YXQudm11bHQoc2lkZXNbaV0sIHNpZGVzW2ldKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBzaWRlczsKICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgdm9sdW1lIG9mIHRoZSBib3guCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gOC4wICogdGhpcy5oYWxmRXh0ZW50cy54ICogdGhpcy5oYWxmRXh0ZW50cy55ICogdGhpcy5oYWxmRXh0ZW50cy56OwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cwogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gdGhpcy5oYWxmRXh0ZW50cy5sZW5ndGgoKTsKICAgIH0KICAgIC8qKgogICAgICogZm9yRWFjaFdvcmxkQ29ybmVyCiAgICAgKi8KCgogICAgZm9yRWFjaFdvcmxkQ29ybmVyKHBvcywgcXVhdCwgY2FsbGJhY2spIHsKICAgICAgY29uc3QgZSA9IHRoaXMuaGFsZkV4dGVudHM7CiAgICAgIGNvbnN0IGNvcm5lcnMgPSBbW2UueCwgZS55LCBlLnpdLCBbLWUueCwgZS55LCBlLnpdLCBbLWUueCwgLWUueSwgZS56XSwgWy1lLngsIC1lLnksIC1lLnpdLCBbZS54LCAtZS55LCAtZS56XSwgW2UueCwgZS55LCAtZS56XSwgWy1lLngsIGUueSwgLWUuel0sIFtlLngsIC1lLnksIGUuel1dOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3JuZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgd29ybGRDb3JuZXJUZW1wUG9zLnNldChjb3JuZXJzW2ldWzBdLCBjb3JuZXJzW2ldWzFdLCBjb3JuZXJzW2ldWzJdKTsKICAgICAgICBxdWF0LnZtdWx0KHdvcmxkQ29ybmVyVGVtcFBvcywgd29ybGRDb3JuZXJUZW1wUG9zKTsKICAgICAgICBwb3MudmFkZCh3b3JsZENvcm5lclRlbXBQb3MsIHdvcmxkQ29ybmVyVGVtcFBvcyk7CiAgICAgICAgY2FsbGJhY2sod29ybGRDb3JuZXJUZW1wUG9zLngsIHdvcmxkQ29ybmVyVGVtcFBvcy55LCB3b3JsZENvcm5lclRlbXBQb3Mueik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgY29uc3QgZSA9IHRoaXMuaGFsZkV4dGVudHM7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbMF0uc2V0KGUueCwgZS55LCBlLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzFdLnNldCgtZS54LCBlLnksIGUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbMl0uc2V0KC1lLngsIC1lLnksIGUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbM10uc2V0KC1lLngsIC1lLnksIC1lLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzRdLnNldChlLngsIC1lLnksIC1lLnopOwogICAgICB3b3JsZENvcm5lcnNUZW1wWzVdLnNldChlLngsIGUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbNl0uc2V0KC1lLngsIGUueSwgLWUueik7CiAgICAgIHdvcmxkQ29ybmVyc1RlbXBbN10uc2V0KGUueCwgLWUueSwgZS56KTsKICAgICAgY29uc3Qgd2MgPSB3b3JsZENvcm5lcnNUZW1wWzBdOwogICAgICBxdWF0LnZtdWx0KHdjLCB3Yyk7CiAgICAgIHBvcy52YWRkKHdjLCB3Yyk7CiAgICAgIG1heC5jb3B5KHdjKTsKICAgICAgbWluLmNvcHkod2MpOwoKICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCA4OyBpKyspIHsKICAgICAgICBjb25zdCB3YyA9IHdvcmxkQ29ybmVyc1RlbXBbaV07CiAgICAgICAgcXVhdC52bXVsdCh3Yywgd2MpOwogICAgICAgIHBvcy52YWRkKHdjLCB3Yyk7CiAgICAgICAgY29uc3QgeCA9IHdjLng7CiAgICAgICAgY29uc3QgeSA9IHdjLnk7CiAgICAgICAgY29uc3QgeiA9IHdjLno7CgogICAgICAgIGlmICh4ID4gbWF4LngpIHsKICAgICAgICAgIG1heC54ID0geDsKICAgICAgICB9CgogICAgICAgIGlmICh5ID4gbWF4LnkpIHsKICAgICAgICAgIG1heC55ID0geTsKICAgICAgICB9CgogICAgICAgIGlmICh6ID4gbWF4LnopIHsKICAgICAgICAgIG1heC56ID0gejsKICAgICAgICB9CgogICAgICAgIGlmICh4IDwgbWluLngpIHsKICAgICAgICAgIG1pbi54ID0geDsKICAgICAgICB9CgogICAgICAgIGlmICh5IDwgbWluLnkpIHsKICAgICAgICAgIG1pbi55ID0geTsKICAgICAgICB9CgogICAgICAgIGlmICh6IDwgbWluLnopIHsKICAgICAgICAgIG1pbi56ID0gejsKICAgICAgICB9CiAgICAgIH0gLy8gR2V0IGVhY2ggYXhpcyBtYXgKICAgICAgLy8gbWluLnNldChJbmZpbml0eSxJbmZpbml0eSxJbmZpbml0eSk7CiAgICAgIC8vIG1heC5zZXQoLUluZmluaXR5LC1JbmZpbml0eSwtSW5maW5pdHkpOwogICAgICAvLyB0aGlzLmZvckVhY2hXb3JsZENvcm5lcihwb3MscXVhdCxmdW5jdGlvbih4LHkseil7CiAgICAgIC8vICAgICBpZih4ID4gbWF4LngpewogICAgICAvLyAgICAgICAgIG1heC54ID0geDsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmKHkgPiBtYXgueSl7CiAgICAgIC8vICAgICAgICAgbWF4LnkgPSB5OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeiA+IG1heC56KXsKICAgICAgLy8gICAgICAgICBtYXgueiA9IHo7CiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgICBpZih4IDwgbWluLngpewogICAgICAvLyAgICAgICAgIG1pbi54ID0geDsKICAgICAgLy8gICAgIH0KICAgICAgLy8gICAgIGlmKHkgPCBtaW4ueSl7CiAgICAgIC8vICAgICAgICAgbWluLnkgPSB5OwogICAgICAvLyAgICAgfQogICAgICAvLyAgICAgaWYoeiA8IG1pbi56KXsKICAgICAgLy8gICAgICAgICBtaW4ueiA9IHo7CiAgICAgIC8vICAgICB9CiAgICAgIC8vIH0pOwoKICAgIH0KCiAgfQogIGNvbnN0IHdvcmxkQ29ybmVyVGVtcFBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgd29ybGRDb3JuZXJzVGVtcCA9IFtuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpLCBuZXcgVmVjMygpXTsKCiAgLyoqCiAgICogQk9EWV9UWVBFUwogICAqLwogIGNvbnN0IEJPRFlfVFlQRVMgPSB7CiAgICAvKiogRFlOQU1JQyAqLwogICAgRFlOQU1JQzogMSwKCiAgICAvKiogU1RBVElDICovCiAgICBTVEFUSUM6IDIsCgogICAgLyoqIEtJTkVNQVRJQyAqLwogICAgS0lORU1BVElDOiA0CiAgfTsKICAvKioKICAgKiBCb2R5VHlwZQogICAqLwoKICAvKioKICAgKiBCT0RZX1NMRUVQX1NUQVRFUwogICAqLwogIGNvbnN0IEJPRFlfU0xFRVBfU1RBVEVTID0gewogICAgLyoqIEFXQUtFICovCiAgICBBV0FLRTogMCwKCiAgICAvKiogU0xFRVBZICovCiAgICBTTEVFUFk6IDEsCgogICAgLyoqIFNMRUVQSU5HICovCiAgICBTTEVFUElORzogMgogIH07CiAgLyoqCiAgICogQm9keVNsZWVwU3RhdGUKICAgKi8KCiAgLyoqCiAgICogQmFzZSBjbGFzcyBmb3IgYWxsIGJvZHkgdHlwZXMuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3Qgc2hhcGUgPSBuZXcgQ0FOTk9OLlNwaGVyZSgxKQogICAqICAgICBjb25zdCBib2R5ID0gbmV3IENBTk5PTi5Cb2R5KHsKICAgKiAgICAgICBtYXNzOiAxLAogICAqICAgICAgIHNoYXBlLAogICAqICAgICB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHkpCiAgICovCiAgY2xhc3MgQm9keSBleHRlbmRzIEV2ZW50VGFyZ2V0IHsKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciB0d28gYm9kaWVzIGNvbGxpZGUuIFRoaXMgZXZlbnQgaXMgZGlzcGF0Y2hlZCBvbiBlYWNoCiAgICAgKiBvZiB0aGUgdHdvIGJvZGllcyBpbnZvbHZlZCBpbiB0aGUgY29sbGlzaW9uLgogICAgICogQGV2ZW50IGNvbGxpZGUKICAgICAqIEBwYXJhbSBib2R5IFRoZSBib2R5IHRoYXQgd2FzIGludm9sdmVkIGluIHRoZSBjb2xsaXNpb24uCiAgICAgKiBAcGFyYW0gY29udGFjdCBUaGUgZGV0YWlscyBvZiB0aGUgY29sbGlzaW9uLgogICAgICovCgogICAgLyoqCiAgICAgKiBBIGR5bmFtaWMgYm9keSBpcyBmdWxseSBzaW11bGF0ZWQuIENhbiBiZSBtb3ZlZCBtYW51YWxseSBieSB0aGUgdXNlciwgYnV0IG5vcm1hbGx5IHRoZXkgbW92ZSBhY2NvcmRpbmcgdG8gZm9yY2VzLiBBIGR5bmFtaWMgYm9keSBjYW4gY29sbGlkZSB3aXRoIGFsbCBib2R5IHR5cGVzLiBBIGR5bmFtaWMgYm9keSBhbHdheXMgaGFzIGZpbml0ZSwgbm9uLXplcm8gbWFzcy4KICAgICAqLwoKICAgIC8qKgogICAgICogQSBzdGF0aWMgYm9keSBkb2VzIG5vdCBtb3ZlIGR1cmluZyBzaW11bGF0aW9uIGFuZCBiZWhhdmVzIGFzIGlmIGl0IGhhcyBpbmZpbml0ZSBtYXNzLiBTdGF0aWMgYm9kaWVzIGNhbiBiZSBtb3ZlZCBtYW51YWxseSBieSBzZXR0aW5nIHRoZSBwb3NpdGlvbiBvZiB0aGUgYm9keS4gVGhlIHZlbG9jaXR5IG9mIGEgc3RhdGljIGJvZHkgaXMgYWx3YXlzIHplcm8uIFN0YXRpYyBib2RpZXMgZG8gbm90IGNvbGxpZGUgd2l0aCBvdGhlciBzdGF0aWMgb3Iga2luZW1hdGljIGJvZGllcy4KICAgICAqLwoKICAgIC8qKgogICAgICogQSBraW5lbWF0aWMgYm9keSBtb3ZlcyB1bmRlciBzaW11bGF0aW9uIGFjY29yZGluZyB0byBpdHMgdmVsb2NpdHkuIFRoZXkgZG8gbm90IHJlc3BvbmQgdG8gZm9yY2VzLiBUaGV5IGNhbiBiZSBtb3ZlZCBtYW51YWxseSwgYnV0IG5vcm1hbGx5IGEga2luZW1hdGljIGJvZHkgaXMgbW92ZWQgYnkgc2V0dGluZyBpdHMgdmVsb2NpdHkuIEEga2luZW1hdGljIGJvZHkgYmVoYXZlcyBhcyBpZiBpdCBoYXMgaW5maW5pdGUgbWFzcy4gS2luZW1hdGljIGJvZGllcyBkbyBub3QgY29sbGlkZSB3aXRoIG90aGVyIHN0YXRpYyBvciBraW5lbWF0aWMgYm9kaWVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBBV0FLRQogICAgICovCgogICAgLyoqCiAgICAgKiBTTEVFUFkKICAgICAqLwoKICAgIC8qKgogICAgICogU0xFRVBJTkcKICAgICAqLwoKICAgIC8qKgogICAgICogRGlzcGF0Y2hlZCBhZnRlciBhIHNsZWVwaW5nIGJvZHkgaGFzIHdva2VuIHVwLgogICAgICogQGV2ZW50IHdha2V1cAogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgZ29uZSBpbiB0byB0aGUgc2xlZXB5IHN0YXRlLgogICAgICogQGV2ZW50IHNsZWVweQogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgZmFsbGVuIGFzbGVlcC4KICAgICAqIEBldmVudCBzbGVlcAogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuaWQgPSBCb2R5LmlkQ291bnRlcisrOwogICAgICB0aGlzLmluZGV4ID0gLTE7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLnZsYW1iZGEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gdHlwZW9mIG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPT09ICdudW1iZXInID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCA6IDE7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzayA9IHR5cGVvZiBvcHRpb25zLmNvbGxpc2lvbkZpbHRlck1hc2sgPT09ICdudW1iZXInID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrIDogLTE7CiAgICAgIHRoaXMuY29sbGlzaW9uUmVzcG9uc2UgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA9PT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5jb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CiAgICAgIHRoaXMucG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnByZXZpb3VzUG9zaXRpb24gPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmludGVycG9sYXRlZFBvc2l0aW9uID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbml0UG9zaXRpb24gPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMucG9zaXRpb24pIHsKICAgICAgICB0aGlzLnBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgICAgdGhpcy5wcmV2aW91c1Bvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRQb3NpdGlvbi5jb3B5KG9wdGlvbnMucG9zaXRpb24pOwogICAgICAgIHRoaXMuaW5pdFBvc2l0aW9uLmNvcHkob3B0aW9ucy5wb3NpdGlvbik7CiAgICAgIH0KCiAgICAgIHRoaXMudmVsb2NpdHkgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMudmVsb2NpdHkpIHsKICAgICAgICB0aGlzLnZlbG9jaXR5LmNvcHkob3B0aW9ucy52ZWxvY2l0eSk7CiAgICAgIH0KCiAgICAgIHRoaXMuaW5pdFZlbG9jaXR5ID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5mb3JjZSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IG1hc3MgPSB0eXBlb2Ygb3B0aW9ucy5tYXNzID09PSAnbnVtYmVyJyA/IG9wdGlvbnMubWFzcyA6IDA7CiAgICAgIHRoaXMubWFzcyA9IG1hc3M7CiAgICAgIHRoaXMuaW52TWFzcyA9IG1hc3MgPiAwID8gMS4wIC8gbWFzcyA6IDA7CiAgICAgIHRoaXMubWF0ZXJpYWwgPSBvcHRpb25zLm1hdGVyaWFsIHx8IG51bGw7CiAgICAgIHRoaXMubGluZWFyRGFtcGluZyA9IHR5cGVvZiBvcHRpb25zLmxpbmVhckRhbXBpbmcgPT09ICdudW1iZXInID8gb3B0aW9ucy5saW5lYXJEYW1waW5nIDogMC4wMTsKICAgICAgdGhpcy50eXBlID0gbWFzcyA8PSAwLjAgPyBCb2R5LlNUQVRJQyA6IEJvZHkuRFlOQU1JQzsKCiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50eXBlID09PSB0eXBlb2YgQm9keS5TVEFUSUMpIHsKICAgICAgICB0aGlzLnR5cGUgPSBvcHRpb25zLnR5cGU7CiAgICAgIH0KCiAgICAgIHRoaXMuYWxsb3dTbGVlcCA9IHR5cGVvZiBvcHRpb25zLmFsbG93U2xlZXAgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5hbGxvd1NsZWVwIDogdHJ1ZTsKICAgICAgdGhpcy5zbGVlcFN0YXRlID0gQm9keS5BV0FLRTsKICAgICAgdGhpcy5zbGVlcFNwZWVkTGltaXQgPSB0eXBlb2Ygb3B0aW9ucy5zbGVlcFNwZWVkTGltaXQgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5zbGVlcFNwZWVkTGltaXQgOiAwLjE7CiAgICAgIHRoaXMuc2xlZXBUaW1lTGltaXQgPSB0eXBlb2Ygb3B0aW9ucy5zbGVlcFRpbWVMaW1pdCAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnNsZWVwVGltZUxpbWl0IDogMTsKICAgICAgdGhpcy50aW1lTGFzdFNsZWVweSA9IDA7CiAgICAgIHRoaXMud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IGZhbHNlOwogICAgICB0aGlzLnRvcnF1ZSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHRoaXMuaW5pdFF1YXRlcm5pb24gPSBuZXcgUXVhdGVybmlvbigpOwogICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHRoaXMuaW50ZXJwb2xhdGVkUXVhdGVybmlvbiA9IG5ldyBRdWF0ZXJuaW9uKCk7CgogICAgICBpZiAob3B0aW9ucy5xdWF0ZXJuaW9uKSB7CiAgICAgICAgdGhpcy5xdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgICB0aGlzLmluaXRRdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KG9wdGlvbnMucXVhdGVybmlvbik7CiAgICAgICAgdGhpcy5pbnRlcnBvbGF0ZWRRdWF0ZXJuaW9uLmNvcHkob3B0aW9ucy5xdWF0ZXJuaW9uKTsKICAgICAgfQoKICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkgPSBuZXcgVmVjMygpOwoKICAgICAgaWYgKG9wdGlvbnMuYW5ndWxhclZlbG9jaXR5KSB7CiAgICAgICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkuY29weShvcHRpb25zLmFuZ3VsYXJWZWxvY2l0eSk7CiAgICAgIH0KCiAgICAgIHRoaXMuaW5pdEFuZ3VsYXJWZWxvY2l0eSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuc2hhcGVzID0gW107CiAgICAgIHRoaXMuc2hhcGVPZmZzZXRzID0gW107CiAgICAgIHRoaXMuc2hhcGVPcmllbnRhdGlvbnMgPSBbXTsKICAgICAgdGhpcy5pbmVydGlhID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbnZJbmVydGlhID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGQgPSBuZXcgTWF0MygpOwogICAgICB0aGlzLmludk1hc3NTb2x2ZSA9IDA7CiAgICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZSA9IG5ldyBNYXQzKCk7CiAgICAgIHRoaXMuZml4ZWRSb3RhdGlvbiA9IHR5cGVvZiBvcHRpb25zLmZpeGVkUm90YXRpb24gIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5maXhlZFJvdGF0aW9uIDogZmFsc2U7CiAgICAgIHRoaXMuYW5ndWxhckRhbXBpbmcgPSB0eXBlb2Ygb3B0aW9ucy5hbmd1bGFyRGFtcGluZyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmFuZ3VsYXJEYW1waW5nIDogMC4wMTsKICAgICAgdGhpcy5saW5lYXJGYWN0b3IgPSBuZXcgVmVjMygxLCAxLCAxKTsKCiAgICAgIGlmIChvcHRpb25zLmxpbmVhckZhY3RvcikgewogICAgICAgIHRoaXMubGluZWFyRmFjdG9yLmNvcHkob3B0aW9ucy5saW5lYXJGYWN0b3IpOwogICAgICB9CgogICAgICB0aGlzLmFuZ3VsYXJGYWN0b3IgPSBuZXcgVmVjMygxLCAxLCAxKTsKCiAgICAgIGlmIChvcHRpb25zLmFuZ3VsYXJGYWN0b3IpIHsKICAgICAgICB0aGlzLmFuZ3VsYXJGYWN0b3IuY29weShvcHRpb25zLmFuZ3VsYXJGYWN0b3IpOwogICAgICB9CgogICAgICB0aGlzLmFhYmIgPSBuZXcgQUFCQigpOwogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMuYm91bmRpbmdSYWRpdXMgPSAwOwogICAgICB0aGlzLndsYW1iZGEgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmlzVHJpZ2dlciA9IEJvb2xlYW4ob3B0aW9ucy5pc1RyaWdnZXIpOwoKICAgICAgaWYgKG9wdGlvbnMuc2hhcGUpIHsKICAgICAgICB0aGlzLmFkZFNoYXBlKG9wdGlvbnMuc2hhcGUpOwogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICB9CiAgICAvKioKICAgICAqIFdha2UgdGhlIGJvZHkgdXAuCiAgICAgKi8KCgogICAgd2FrZVVwKCkgewogICAgICBjb25zdCBwcmV2U3RhdGUgPSB0aGlzLnNsZWVwU3RhdGU7CiAgICAgIHRoaXMuc2xlZXBTdGF0ZSA9IEJvZHkuQVdBS0U7CiAgICAgIHRoaXMud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IGZhbHNlOwoKICAgICAgaWYgKHByZXZTdGF0ZSA9PT0gQm9keS5TTEVFUElORykgewogICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5Lndha2V1cEV2ZW50KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBGb3JjZSBib2R5IHNsZWVwCiAgICAgKi8KCgogICAgc2xlZXAoKSB7CiAgICAgIHRoaXMuc2xlZXBTdGF0ZSA9IEJvZHkuU0xFRVBJTkc7CiAgICAgIHRoaXMudmVsb2NpdHkuc2V0KDAsIDAsIDApOwogICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eS5zZXQoMCwgMCwgMCk7CiAgICAgIHRoaXMud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSA9IGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBDYWxsZWQgZXZlcnkgdGltZXN0ZXAgdG8gdXBkYXRlIGludGVybmFsIHNsZWVwIHRpbWVyIGFuZCBjaGFuZ2Ugc2xlZXAgc3RhdGUgaWYgbmVlZGVkLgogICAgICogQHBhcmFtIHRpbWUgVGhlIHdvcmxkIHRpbWUgaW4gc2Vjb25kcwogICAgICovCgoKICAgIHNsZWVwVGljayh0aW1lKSB7CiAgICAgIGlmICh0aGlzLmFsbG93U2xlZXApIHsKICAgICAgICBjb25zdCBzbGVlcFN0YXRlID0gdGhpcy5zbGVlcFN0YXRlOwogICAgICAgIGNvbnN0IHNwZWVkU3F1YXJlZCA9IHRoaXMudmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpICsgdGhpcy5hbmd1bGFyVmVsb2NpdHkubGVuZ3RoU3F1YXJlZCgpOwogICAgICAgIGNvbnN0IHNwZWVkTGltaXRTcXVhcmVkID0gdGhpcy5zbGVlcFNwZWVkTGltaXQgKiogMjsKCiAgICAgICAgaWYgKHNsZWVwU3RhdGUgPT09IEJvZHkuQVdBS0UgJiYgc3BlZWRTcXVhcmVkIDwgc3BlZWRMaW1pdFNxdWFyZWQpIHsKICAgICAgICAgIHRoaXMuc2xlZXBTdGF0ZSA9IEJvZHkuU0xFRVBZOyAvLyBTbGVlcHkKCiAgICAgICAgICB0aGlzLnRpbWVMYXN0U2xlZXB5ID0gdGltZTsKICAgICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChCb2R5LnNsZWVweUV2ZW50KTsKICAgICAgICB9IGVsc2UgaWYgKHNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBZICYmIHNwZWVkU3F1YXJlZCA+IHNwZWVkTGltaXRTcXVhcmVkKSB7CiAgICAgICAgICB0aGlzLndha2VVcCgpOyAvLyBXYWtlIHVwCiAgICAgICAgfSBlbHNlIGlmIChzbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQWSAmJiB0aW1lIC0gdGhpcy50aW1lTGFzdFNsZWVweSA+IHRoaXMuc2xlZXBUaW1lTGltaXQpIHsKICAgICAgICAgIHRoaXMuc2xlZXAoKTsgLy8gU2xlZXBpbmcKCiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoQm9keS5zbGVlcEV2ZW50KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogSWYgdGhlIGJvZHkgaXMgc2xlZXBpbmcsIGl0IHNob3VsZCBiZSBpbW1vdmFibGUgLyBoYXZlIGluZmluaXRlIG1hc3MgZHVyaW5nIHNvbHZlLiBXZSBzb2x2ZSBpdCBieSBoYXZpbmcgYSBzZXBhcmF0ZSAic29sdmUgbWFzcyIuCiAgICAgKi8KCgogICAgdXBkYXRlU29sdmVNYXNzUHJvcGVydGllcygpIHsKICAgICAgaWYgKHRoaXMuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORyB8fCB0aGlzLnR5cGUgPT09IEJvZHkuS0lORU1BVElDKSB7CiAgICAgICAgdGhpcy5pbnZNYXNzU29sdmUgPSAwOwogICAgICAgIHRoaXMuaW52SW5lcnRpYVNvbHZlLnNldFplcm8oKTsKICAgICAgICB0aGlzLmludkluZXJ0aWFXb3JsZFNvbHZlLnNldFplcm8oKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmludk1hc3NTb2x2ZSA9IHRoaXMuaW52TWFzczsKICAgICAgICB0aGlzLmludkluZXJ0aWFTb2x2ZS5jb3B5KHRoaXMuaW52SW5lcnRpYSk7CiAgICAgICAgdGhpcy5pbnZJbmVydGlhV29ybGRTb2x2ZS5jb3B5KHRoaXMuaW52SW5lcnRpYVdvcmxkKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb252ZXJ0IGEgd29ybGQgcG9pbnQgdG8gbG9jYWwgYm9keSBmcmFtZS4KICAgICAqLwoKCiAgICBwb2ludFRvTG9jYWxGcmFtZSh3b3JsZFBvaW50LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgd29ybGRQb2ludC52c3ViKHRoaXMucG9zaXRpb24sIHJlc3VsdCk7CiAgICAgIHRoaXMucXVhdGVybmlvbi5jb25qdWdhdGUoKS52bXVsdChyZXN1bHQsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgYSB3b3JsZCB2ZWN0b3IgdG8gbG9jYWwgYm9keSBmcmFtZS4KICAgICAqLwoKCiAgICB2ZWN0b3JUb0xvY2FsRnJhbWUod29ybGRWZWN0b3IsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24uY29uanVnYXRlKCkudm11bHQod29ybGRWZWN0b3IsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIENvbnZlcnQgYSBsb2NhbCBib2R5IHBvaW50IHRvIHdvcmxkIGZyYW1lLgogICAgICovCgoKICAgIHBvaW50VG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLnF1YXRlcm5pb24udm11bHQobG9jYWxQb2ludCwgcmVzdWx0KTsKICAgICAgcmVzdWx0LnZhZGQodGhpcy5wb3NpdGlvbiwgcmVzdWx0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogQ29udmVydCBhIGxvY2FsIGJvZHkgcG9pbnQgdG8gd29ybGQgZnJhbWUuCiAgICAgKi8KCgogICAgdmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsVmVjdG9yLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGhpcy5xdWF0ZXJuaW9uLnZtdWx0KGxvY2FsVmVjdG9yLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSBzaGFwZSB0byB0aGUgYm9keSB3aXRoIGEgbG9jYWwgb2Zmc2V0IGFuZCBvcmllbnRhdGlvbi4KICAgICAqIEByZXR1cm4gVGhlIGJvZHkgb2JqZWN0LCBmb3IgY2hhaW5hYmlsaXR5LgogICAgICovCgoKICAgIGFkZFNoYXBlKHNoYXBlLCBfb2Zmc2V0LCBfb3JpZW50YXRpb24pIHsKICAgICAgY29uc3Qgb2Zmc2V0ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3Qgb3JpZW50YXRpb24gPSBuZXcgUXVhdGVybmlvbigpOwoKICAgICAgaWYgKF9vZmZzZXQpIHsKICAgICAgICBvZmZzZXQuY29weShfb2Zmc2V0KTsKICAgICAgfQoKICAgICAgaWYgKF9vcmllbnRhdGlvbikgewogICAgICAgIG9yaWVudGF0aW9uLmNvcHkoX29yaWVudGF0aW9uKTsKICAgICAgfQoKICAgICAgdGhpcy5zaGFwZXMucHVzaChzaGFwZSk7CiAgICAgIHRoaXMuc2hhcGVPZmZzZXRzLnB1c2gob2Zmc2V0KTsKICAgICAgdGhpcy5zaGFwZU9yaWVudGF0aW9ucy5wdXNoKG9yaWVudGF0aW9uKTsKICAgICAgdGhpcy51cGRhdGVNYXNzUHJvcGVydGllcygpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nUmFkaXVzKCk7CiAgICAgIHRoaXMuYWFiYk5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgc2hhcGUuYm9keSA9IHRoaXM7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmUgYSBzaGFwZSBmcm9tIHRoZSBib2R5LgogICAgICogQHJldHVybiBUaGUgYm9keSBvYmplY3QsIGZvciBjaGFpbmFiaWxpdHkuCiAgICAgKi8KCgogICAgcmVtb3ZlU2hhcGUoc2hhcGUpIHsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnNoYXBlcy5pbmRleE9mKHNoYXBlKTsKCiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHsKICAgICAgICBjb25zb2xlLndhcm4oJ1NoYXBlIGRvZXMgbm90IGJlbG9uZyB0byB0aGUgYm9keScpOwogICAgICAgIHJldHVybiB0aGlzOwogICAgICB9CgogICAgICB0aGlzLnNoYXBlcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnNoYXBlT2Zmc2V0cy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB0aGlzLnNoYXBlT3JpZW50YXRpb25zLnNwbGljZShpbmRleCwgMSk7CiAgICAgIHRoaXMudXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1JhZGl1cygpOwogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHNoYXBlLmJvZHkgPSBudWxsOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBib3VuZGluZyByYWRpdXMgb2YgdGhlIGJvZHkuIFNob3VsZCBiZSBkb25lIGlmIGFueSBvZiB0aGUgc2hhcGVzIGFyZSBjaGFuZ2VkLgogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nUmFkaXVzKCkgewogICAgICBjb25zdCBzaGFwZXMgPSB0aGlzLnNoYXBlczsKICAgICAgY29uc3Qgc2hhcGVPZmZzZXRzID0gdGhpcy5zaGFwZU9mZnNldHM7CiAgICAgIGNvbnN0IE4gPSBzaGFwZXMubGVuZ3RoOwogICAgICBsZXQgcmFkaXVzID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBzaGFwZSA9IHNoYXBlc1tpXTsKICAgICAgICBzaGFwZS51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICAgIGNvbnN0IG9mZnNldCA9IHNoYXBlT2Zmc2V0c1tpXS5sZW5ndGgoKTsKICAgICAgICBjb25zdCByID0gc2hhcGUuYm91bmRpbmdTcGhlcmVSYWRpdXM7CgogICAgICAgIGlmIChvZmZzZXQgKyByID4gcmFkaXVzKSB7CiAgICAgICAgICByYWRpdXMgPSBvZmZzZXQgKyByOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1JhZGl1cyA9IHJhZGl1czsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlcyB0aGUgLmFhYmIKICAgICAqLwoKCiAgICB1cGRhdGVBQUJCKCkgewogICAgICBjb25zdCBzaGFwZXMgPSB0aGlzLnNoYXBlczsKICAgICAgY29uc3Qgc2hhcGVPZmZzZXRzID0gdGhpcy5zaGFwZU9mZnNldHM7CiAgICAgIGNvbnN0IHNoYXBlT3JpZW50YXRpb25zID0gdGhpcy5zaGFwZU9yaWVudGF0aW9uczsKICAgICAgY29uc3QgTiA9IHNoYXBlcy5sZW5ndGg7CiAgICAgIGNvbnN0IG9mZnNldCA9IHRtcFZlYzsKICAgICAgY29uc3Qgb3JpZW50YXRpb24gPSB0bXBRdWF0OwogICAgICBjb25zdCBib2R5UXVhdCA9IHRoaXMucXVhdGVybmlvbjsKICAgICAgY29uc3QgYWFiYiA9IHRoaXMuYWFiYjsKICAgICAgY29uc3Qgc2hhcGVBQUJCID0gdXBkYXRlQUFCQl9zaGFwZUFBQkI7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3Qgc2hhcGUgPSBzaGFwZXNbaV07IC8vIEdldCBzaGFwZSB3b3JsZCBwb3NpdGlvbgoKICAgICAgICBib2R5UXVhdC52bXVsdChzaGFwZU9mZnNldHNbaV0sIG9mZnNldCk7CiAgICAgICAgb2Zmc2V0LnZhZGQodGhpcy5wb3NpdGlvbiwgb2Zmc2V0KTsgLy8gR2V0IHNoYXBlIHdvcmxkIHF1YXRlcm5pb24KCiAgICAgICAgYm9keVF1YXQubXVsdChzaGFwZU9yaWVudGF0aW9uc1tpXSwgb3JpZW50YXRpb24pOyAvLyBHZXQgc2hhcGUgQUFCQgoKICAgICAgICBzaGFwZS5jYWxjdWxhdGVXb3JsZEFBQkIob2Zmc2V0LCBvcmllbnRhdGlvbiwgc2hhcGVBQUJCLmxvd2VyQm91bmQsIHNoYXBlQUFCQi51cHBlckJvdW5kKTsKCiAgICAgICAgaWYgKGkgPT09IDApIHsKICAgICAgICAgIGFhYmIuY29weShzaGFwZUFBQkIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhYWJiLmV4dGVuZChzaGFwZUFBQkIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5hYWJiTmVlZHNVcGRhdGUgPSBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIGAuaW5lcnRpYVdvcmxkYCBhbmQgYC5pbnZJbmVydGlhV29ybGRgCiAgICAgKi8KCgogICAgdXBkYXRlSW5lcnRpYVdvcmxkKGZvcmNlKSB7CiAgICAgIGNvbnN0IEkgPSB0aGlzLmludkluZXJ0aWE7CgogICAgICBpZiAoSS54ID09PSBJLnkgJiYgSS55ID09PSBJLnogJiYgIWZvcmNlKSA7IGVsc2UgewogICAgICAgIGNvbnN0IG0xID0gdWl3X20xOwogICAgICAgIGNvbnN0IG0yID0gdWl3X20yOwogICAgICAgIG0xLnNldFJvdGF0aW9uRnJvbVF1YXRlcm5pb24odGhpcy5xdWF0ZXJuaW9uKTsKICAgICAgICBtMS50cmFuc3Bvc2UobTIpOwogICAgICAgIG0xLnNjYWxlKEksIG0xKTsKICAgICAgICBtMS5tbXVsdChtMiwgdGhpcy5pbnZJbmVydGlhV29ybGQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IGZvcmNlIHRvIGEgcG9pbnQgb2YgdGhlIGJvZHkuIFRoaXMgY291bGQgZm9yIGV4YW1wbGUgYmUgYSBwb2ludCBvbiB0aGUgQm9keSBzdXJmYWNlLgogICAgICogQXBwbHlpbmcgZm9yY2UgdGhpcyB3YXkgd2lsbCBhZGQgdG8gQm9keS5mb3JjZSBhbmQgQm9keS50b3JxdWUuCiAgICAgKiBAcGFyYW0gZm9yY2UgVGhlIGFtb3VudCBvZiBmb3JjZSB0byBhZGQuCiAgICAgKiBAcGFyYW0gcmVsYXRpdmVQb2ludCBBIHBvaW50IHJlbGF0aXZlIHRvIHRoZSBjZW50ZXIgb2YgbWFzcyB0byBhcHBseSB0aGUgZm9yY2Ugb24uCiAgICAgKi8KCgogICAgYXBwbHlGb3JjZShmb3JjZSwgcmVsYXRpdmVQb2ludCkgewogICAgICBpZiAocmVsYXRpdmVQb2ludCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVsYXRpdmVQb2ludCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIC8vIE5lZWRlZD8KICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy53YWtlVXAoKTsKICAgICAgfSAvLyBDb21wdXRlIHByb2R1Y2VkIHJvdGF0aW9uYWwgZm9yY2UKCgogICAgICBjb25zdCByb3RGb3JjZSA9IEJvZHlfYXBwbHlGb3JjZV9yb3RGb3JjZTsKICAgICAgcmVsYXRpdmVQb2ludC5jcm9zcyhmb3JjZSwgcm90Rm9yY2UpOyAvLyBBZGQgbGluZWFyIGZvcmNlCgogICAgICB0aGlzLmZvcmNlLnZhZGQoZm9yY2UsIHRoaXMuZm9yY2UpOyAvLyBBZGQgcm90YXRpb25hbCBmb3JjZQoKICAgICAgdGhpcy50b3JxdWUudmFkZChyb3RGb3JjZSwgdGhpcy50b3JxdWUpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSBmb3JjZSB0byBhIGxvY2FsIHBvaW50IGluIHRoZSBib2R5LgogICAgICogQHBhcmFtIGZvcmNlIFRoZSBmb3JjZSB2ZWN0b3IgdG8gYXBwbHksIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgYm9keSBmcmFtZS4KICAgICAqIEBwYXJhbSBsb2NhbFBvaW50IEEgbG9jYWwgcG9pbnQgaW4gdGhlIGJvZHkgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLgogICAgICovCgoKICAgIGFwcGx5TG9jYWxGb3JjZShsb2NhbEZvcmNlLCBsb2NhbFBvaW50KSB7CiAgICAgIGlmIChsb2NhbFBvaW50ID09PSB2b2lkIDApIHsKICAgICAgICBsb2NhbFBvaW50ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCB3b3JsZEZvcmNlID0gQm9keV9hcHBseUxvY2FsRm9yY2Vfd29ybGRGb3JjZTsKICAgICAgY29uc3QgcmVsYXRpdmVQb2ludFdvcmxkID0gQm9keV9hcHBseUxvY2FsRm9yY2VfcmVsYXRpdmVQb2ludFdvcmxkOyAvLyBUcmFuc2Zvcm0gdGhlIGZvcmNlIHZlY3RvciB0byB3b3JsZCBzcGFjZQoKICAgICAgdGhpcy52ZWN0b3JUb1dvcmxkRnJhbWUobG9jYWxGb3JjZSwgd29ybGRGb3JjZSk7CiAgICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlbGF0aXZlUG9pbnRXb3JsZCk7CiAgICAgIHRoaXMuYXBwbHlGb3JjZSh3b3JsZEZvcmNlLCByZWxhdGl2ZVBvaW50V29ybGQpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSB0b3JxdWUgdG8gdGhlIGJvZHkuCiAgICAgKiBAcGFyYW0gdG9ycXVlIFRoZSBhbW91bnQgb2YgdG9ycXVlIHRvIGFkZC4KICAgICAqLwoKCiAgICBhcHBseVRvcnF1ZSh0b3JxdWUpIHsKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy53YWtlVXAoKTsKICAgICAgfSAvLyBBZGQgcm90YXRpb25hbCBmb3JjZQoKCiAgICAgIHRoaXMudG9ycXVlLnZhZGQodG9ycXVlLCB0aGlzLnRvcnF1ZSk7CiAgICB9CiAgICAvKioKICAgICAqIEFwcGx5IGltcHVsc2UgdG8gYSBwb2ludCBvZiB0aGUgYm9keS4gVGhpcyBjb3VsZCBmb3IgZXhhbXBsZSBiZSBhIHBvaW50IG9uIHRoZSBCb2R5IHN1cmZhY2UuCiAgICAgKiBBbiBpbXB1bHNlIGlzIGEgZm9yY2UgYWRkZWQgdG8gYSBib2R5IGR1cmluZyBhIHNob3J0IHBlcmlvZCBvZiB0aW1lIChpbXB1bHNlID0gZm9yY2UgKiB0aW1lKS4KICAgICAqIEltcHVsc2VzIHdpbGwgYmUgYWRkZWQgdG8gQm9keS52ZWxvY2l0eSBhbmQgQm9keS5hbmd1bGFyVmVsb2NpdHkuCiAgICAgKiBAcGFyYW0gaW1wdWxzZSBUaGUgYW1vdW50IG9mIGltcHVsc2UgdG8gYWRkLgogICAgICogQHBhcmFtIHJlbGF0aXZlUG9pbnQgQSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3MgdG8gYXBwbHkgdGhlIGZvcmNlIG9uLgogICAgICovCgoKICAgIGFwcGx5SW1wdWxzZShpbXB1bHNlLCByZWxhdGl2ZVBvaW50KSB7CiAgICAgIGlmIChyZWxhdGl2ZVBvaW50ID09PSB2b2lkIDApIHsKICAgICAgICByZWxhdGl2ZVBvaW50ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gQm9keS5EWU5BTUlDKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSB7CiAgICAgICAgdGhpcy53YWtlVXAoKTsKICAgICAgfSAvLyBDb21wdXRlIHBvaW50IHBvc2l0aW9uIHJlbGF0aXZlIHRvIHRoZSBib2R5IGNlbnRlcgoKCiAgICAgIGNvbnN0IHIgPSByZWxhdGl2ZVBvaW50OyAvLyBDb21wdXRlIHByb2R1Y2VkIGNlbnRyYWwgaW1wdWxzZSB2ZWxvY2l0eQoKICAgICAgY29uc3QgdmVsbyA9IEJvZHlfYXBwbHlJbXB1bHNlX3ZlbG87CiAgICAgIHZlbG8uY29weShpbXB1bHNlKTsKICAgICAgdmVsby5zY2FsZSh0aGlzLmludk1hc3MsIHZlbG8pOyAvLyBBZGQgbGluZWFyIGltcHVsc2UKCiAgICAgIHRoaXMudmVsb2NpdHkudmFkZCh2ZWxvLCB0aGlzLnZlbG9jaXR5KTsgLy8gQ29tcHV0ZSBwcm9kdWNlZCByb3RhdGlvbmFsIGltcHVsc2UgdmVsb2NpdHkKCiAgICAgIGNvbnN0IHJvdFZlbG8gPSBCb2R5X2FwcGx5SW1wdWxzZV9yb3RWZWxvOwogICAgICByLmNyb3NzKGltcHVsc2UsIHJvdFZlbG8pOwogICAgICAvKgogICAgICAgcm90VmVsby54ICo9IHRoaXMuaW52SW5lcnRpYS54OwogICAgICAgcm90VmVsby55ICo9IHRoaXMuaW52SW5lcnRpYS55OwogICAgICAgcm90VmVsby56ICo9IHRoaXMuaW52SW5lcnRpYS56OwogICAgICAgKi8KCiAgICAgIHRoaXMuaW52SW5lcnRpYVdvcmxkLnZtdWx0KHJvdFZlbG8sIHJvdFZlbG8pOyAvLyBBZGQgcm90YXRpb25hbCBJbXB1bHNlCgogICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eS52YWRkKHJvdFZlbG8sIHRoaXMuYW5ndWxhclZlbG9jaXR5KTsKICAgIH0KICAgIC8qKgogICAgICogQXBwbHkgbG9jYWxseS1kZWZpbmVkIGltcHVsc2UgdG8gYSBsb2NhbCBwb2ludCBpbiB0aGUgYm9keS4KICAgICAqIEBwYXJhbSBmb3JjZSBUaGUgZm9yY2UgdmVjdG9yIHRvIGFwcGx5LCBkZWZpbmVkIGxvY2FsbHkgaW4gdGhlIGJvZHkgZnJhbWUuCiAgICAgKiBAcGFyYW0gbG9jYWxQb2ludCBBIGxvY2FsIHBvaW50IGluIHRoZSBib2R5IHRvIGFwcGx5IHRoZSBmb3JjZSBvbi4KICAgICAqLwoKCiAgICBhcHBseUxvY2FsSW1wdWxzZShsb2NhbEltcHVsc2UsIGxvY2FsUG9pbnQpIHsKICAgICAgaWYgKGxvY2FsUG9pbnQgPT09IHZvaWQgMCkgewogICAgICAgIGxvY2FsUG9pbnQgPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICBpZiAodGhpcy50eXBlICE9PSBCb2R5LkRZTkFNSUMpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHdvcmxkSW1wdWxzZSA9IEJvZHlfYXBwbHlMb2NhbEltcHVsc2Vfd29ybGRJbXB1bHNlOwogICAgICBjb25zdCByZWxhdGl2ZVBvaW50V29ybGQgPSBCb2R5X2FwcGx5TG9jYWxJbXB1bHNlX3JlbGF0aXZlUG9pbnQ7IC8vIFRyYW5zZm9ybSB0aGUgZm9yY2UgdmVjdG9yIHRvIHdvcmxkIHNwYWNlCgogICAgICB0aGlzLnZlY3RvclRvV29ybGRGcmFtZShsb2NhbEltcHVsc2UsIHdvcmxkSW1wdWxzZSk7CiAgICAgIHRoaXMudmVjdG9yVG9Xb3JsZEZyYW1lKGxvY2FsUG9pbnQsIHJlbGF0aXZlUG9pbnRXb3JsZCk7CiAgICAgIHRoaXMuYXBwbHlJbXB1bHNlKHdvcmxkSW1wdWxzZSwgcmVsYXRpdmVQb2ludFdvcmxkKTsKICAgIH0KICAgIC8qKgogICAgICogU2hvdWxkIGJlIGNhbGxlZCB3aGVuZXZlciB5b3UgY2hhbmdlIHRoZSBib2R5IHNoYXBlIG9yIG1hc3MuCiAgICAgKi8KCgogICAgdXBkYXRlTWFzc1Byb3BlcnRpZXMoKSB7CiAgICAgIGNvbnN0IGhhbGZFeHRlbnRzID0gQm9keV91cGRhdGVNYXNzUHJvcGVydGllc19oYWxmRXh0ZW50czsKICAgICAgdGhpcy5pbnZNYXNzID0gdGhpcy5tYXNzID4gMCA/IDEuMCAvIHRoaXMubWFzcyA6IDA7CiAgICAgIGNvbnN0IEkgPSB0aGlzLmluZXJ0aWE7CiAgICAgIGNvbnN0IGZpeGVkID0gdGhpcy5maXhlZFJvdGF0aW9uOyAvLyBBcHByb3hpbWF0ZSB3aXRoIEFBQkIgYm94CgogICAgICB0aGlzLnVwZGF0ZUFBQkIoKTsKICAgICAgaGFsZkV4dGVudHMuc2V0KCh0aGlzLmFhYmIudXBwZXJCb3VuZC54IC0gdGhpcy5hYWJiLmxvd2VyQm91bmQueCkgLyAyLCAodGhpcy5hYWJiLnVwcGVyQm91bmQueSAtIHRoaXMuYWFiYi5sb3dlckJvdW5kLnkpIC8gMiwgKHRoaXMuYWFiYi51cHBlckJvdW5kLnogLSB0aGlzLmFhYmIubG93ZXJCb3VuZC56KSAvIDIpOwogICAgICBCb3guY2FsY3VsYXRlSW5lcnRpYShoYWxmRXh0ZW50cywgdGhpcy5tYXNzLCBJKTsKICAgICAgdGhpcy5pbnZJbmVydGlhLnNldChJLnggPiAwICYmICFmaXhlZCA/IDEuMCAvIEkueCA6IDAsIEkueSA+IDAgJiYgIWZpeGVkID8gMS4wIC8gSS55IDogMCwgSS56ID4gMCAmJiAhZml4ZWQgPyAxLjAgLyBJLnogOiAwKTsKICAgICAgdGhpcy51cGRhdGVJbmVydGlhV29ybGQodHJ1ZSk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB3b3JsZCB2ZWxvY2l0eSBvZiBhIHBvaW50IGluIHRoZSBib2R5LgogICAgICogQHBhcmFtIHdvcmxkUG9pbnQKICAgICAqIEBwYXJhbSByZXN1bHQKICAgICAqIEByZXR1cm4gVGhlIHJlc3VsdCB2ZWN0b3IuCiAgICAgKi8KCgogICAgZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQod29ybGRQb2ludCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IHIgPSBuZXcgVmVjMygpOwogICAgICB3b3JsZFBvaW50LnZzdWIodGhpcy5wb3NpdGlvbiwgcik7CiAgICAgIHRoaXMuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHIsIHJlc3VsdCk7CiAgICAgIHRoaXMudmVsb2NpdHkudmFkZChyZXN1bHQsIHJlc3VsdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIE1vdmUgdGhlIGJvZHkgZm9yd2FyZCBpbiB0aW1lLgogICAgICogQHBhcmFtIGR0IFRpbWUgc3RlcAogICAgICogQHBhcmFtIHF1YXROb3JtYWxpemUgU2V0IHRvIHRydWUgdG8gbm9ybWFsaXplIHRoZSBib2R5IHF1YXRlcm5pb24KICAgICAqIEBwYXJhbSBxdWF0Tm9ybWFsaXplRmFzdCBJZiB0aGUgcXVhdGVybmlvbiBzaG91bGQgYmUgbm9ybWFsaXplZCB1c2luZyAiZmFzdCIgcXVhdGVybmlvbiBub3JtYWxpemF0aW9uCiAgICAgKi8KCgogICAgaW50ZWdyYXRlKGR0LCBxdWF0Tm9ybWFsaXplLCBxdWF0Tm9ybWFsaXplRmFzdCkgewogICAgICAvLyBTYXZlIHByZXZpb3VzIHBvc2l0aW9uCiAgICAgIHRoaXMucHJldmlvdXNQb3NpdGlvbi5jb3B5KHRoaXMucG9zaXRpb24pOwogICAgICB0aGlzLnByZXZpb3VzUXVhdGVybmlvbi5jb3B5KHRoaXMucXVhdGVybmlvbik7CgogICAgICBpZiAoISh0aGlzLnR5cGUgPT09IEJvZHkuRFlOQU1JQyB8fCB0aGlzLnR5cGUgPT09IEJvZHkuS0lORU1BVElDKSB8fCB0aGlzLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcpIHsKICAgICAgICAvLyBPbmx5IGZvciBkeW5hbWljCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCB2ZWxvID0gdGhpcy52ZWxvY2l0eTsKICAgICAgY29uc3QgYW5ndWxhclZlbG8gPSB0aGlzLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgY29uc3QgcG9zID0gdGhpcy5wb3NpdGlvbjsKICAgICAgY29uc3QgZm9yY2UgPSB0aGlzLmZvcmNlOwogICAgICBjb25zdCB0b3JxdWUgPSB0aGlzLnRvcnF1ZTsKICAgICAgY29uc3QgcXVhdCA9IHRoaXMucXVhdGVybmlvbjsKICAgICAgY29uc3QgaW52TWFzcyA9IHRoaXMuaW52TWFzczsKICAgICAgY29uc3QgaW52SW5lcnRpYSA9IHRoaXMuaW52SW5lcnRpYVdvcmxkOwogICAgICBjb25zdCBsaW5lYXJGYWN0b3IgPSB0aGlzLmxpbmVhckZhY3RvcjsKICAgICAgY29uc3QgaU1kdCA9IGludk1hc3MgKiBkdDsKICAgICAgdmVsby54ICs9IGZvcmNlLnggKiBpTWR0ICogbGluZWFyRmFjdG9yLng7CiAgICAgIHZlbG8ueSArPSBmb3JjZS55ICogaU1kdCAqIGxpbmVhckZhY3Rvci55OwogICAgICB2ZWxvLnogKz0gZm9yY2UueiAqIGlNZHQgKiBsaW5lYXJGYWN0b3IuejsKICAgICAgY29uc3QgZSA9IGludkluZXJ0aWEuZWxlbWVudHM7CiAgICAgIGNvbnN0IGFuZ3VsYXJGYWN0b3IgPSB0aGlzLmFuZ3VsYXJGYWN0b3I7CiAgICAgIGNvbnN0IHR4ID0gdG9ycXVlLnggKiBhbmd1bGFyRmFjdG9yLng7CiAgICAgIGNvbnN0IHR5ID0gdG9ycXVlLnkgKiBhbmd1bGFyRmFjdG9yLnk7CiAgICAgIGNvbnN0IHR6ID0gdG9ycXVlLnogKiBhbmd1bGFyRmFjdG9yLno7CiAgICAgIGFuZ3VsYXJWZWxvLnggKz0gZHQgKiAoZVswXSAqIHR4ICsgZVsxXSAqIHR5ICsgZVsyXSAqIHR6KTsKICAgICAgYW5ndWxhclZlbG8ueSArPSBkdCAqIChlWzNdICogdHggKyBlWzRdICogdHkgKyBlWzVdICogdHopOwogICAgICBhbmd1bGFyVmVsby56ICs9IGR0ICogKGVbNl0gKiB0eCArIGVbN10gKiB0eSArIGVbOF0gKiB0eik7IC8vIFVzZSBuZXcgdmVsb2NpdHkgIC0gbGVhcCBmcm9nCgogICAgICBwb3MueCArPSB2ZWxvLnggKiBkdDsKICAgICAgcG9zLnkgKz0gdmVsby55ICogZHQ7CiAgICAgIHBvcy56ICs9IHZlbG8ueiAqIGR0OwogICAgICBxdWF0LmludGVncmF0ZSh0aGlzLmFuZ3VsYXJWZWxvY2l0eSwgZHQsIHRoaXMuYW5ndWxhckZhY3RvciwgcXVhdCk7CgogICAgICBpZiAocXVhdE5vcm1hbGl6ZSkgewogICAgICAgIGlmIChxdWF0Tm9ybWFsaXplRmFzdCkgewogICAgICAgICAgcXVhdC5ub3JtYWxpemVGYXN0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHF1YXQubm9ybWFsaXplKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmFhYmJOZWVkc1VwZGF0ZSA9IHRydWU7IC8vIFVwZGF0ZSB3b3JsZCBpbmVydGlhCgogICAgICB0aGlzLnVwZGF0ZUluZXJ0aWFXb3JsZCgpOwogICAgfQoKICB9CiAgQm9keS5pZENvdW50ZXIgPSAwOwogIEJvZHkuQ09MTElERV9FVkVOVF9OQU1FID0gJ2NvbGxpZGUnOwogIEJvZHkuRFlOQU1JQyA9IEJPRFlfVFlQRVMuRFlOQU1JQzsKICBCb2R5LlNUQVRJQyA9IEJPRFlfVFlQRVMuU1RBVElDOwogIEJvZHkuS0lORU1BVElDID0gQk9EWV9UWVBFUy5LSU5FTUFUSUM7CiAgQm9keS5BV0FLRSA9IEJPRFlfU0xFRVBfU1RBVEVTLkFXQUtFOwogIEJvZHkuU0xFRVBZID0gQk9EWV9TTEVFUF9TVEFURVMuU0xFRVBZOwogIEJvZHkuU0xFRVBJTkcgPSBCT0RZX1NMRUVQX1NUQVRFUy5TTEVFUElORzsKICBCb2R5Lndha2V1cEV2ZW50ID0gewogICAgdHlwZTogJ3dha2V1cCcKICB9OwogIEJvZHkuc2xlZXB5RXZlbnQgPSB7CiAgICB0eXBlOiAnc2xlZXB5JwogIH07CiAgQm9keS5zbGVlcEV2ZW50ID0gewogICAgdHlwZTogJ3NsZWVwJwogIH07CiAgY29uc3QgdG1wVmVjID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBRdWF0ID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCB1cGRhdGVBQUJCX3NoYXBlQUFCQiA9IG5ldyBBQUJCKCk7CiAgY29uc3QgdWl3X20xID0gbmV3IE1hdDMoKTsKICBjb25zdCB1aXdfbTIgPSBuZXcgTWF0MygpOwogIG5ldyBNYXQzKCk7CiAgY29uc3QgQm9keV9hcHBseUZvcmNlX3JvdEZvcmNlID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5TG9jYWxGb3JjZV93b3JsZEZvcmNlID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5TG9jYWxGb3JjZV9yZWxhdGl2ZVBvaW50V29ybGQgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlJbXB1bHNlX3ZlbG8gPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlJbXB1bHNlX3JvdFZlbG8gPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfYXBwbHlMb2NhbEltcHVsc2Vfd29ybGRJbXB1bHNlID0gbmV3IFZlYzMoKTsKICBjb25zdCBCb2R5X2FwcGx5TG9jYWxJbXB1bHNlX3JlbGF0aXZlUG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IEJvZHlfdXBkYXRlTWFzc1Byb3BlcnRpZXNfaGFsZkV4dGVudHMgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBCYXNlIGNsYXNzIGZvciBicm9hZHBoYXNlIGltcGxlbWVudGF0aW9ucwogICAqIEBhdXRob3Igc2NodGVwcGUKICAgKi8KICBjbGFzcyBCcm9hZHBoYXNlIHsKICAgIC8qKgogICAgICogVGhlIHdvcmxkIHRvIHNlYXJjaCBmb3IgY29sbGlzaW9ucyBpbi4KICAgICAqLwoKICAgIC8qKgogICAgICogSWYgc2V0IHRvIHRydWUsIHRoZSBicm9hZHBoYXNlIHVzZXMgYm91bmRpbmcgYm94ZXMgZm9yIGludGVyc2VjdGlvbiB0ZXN0cywgZWxzZSBpdCB1c2VzIGJvdW5kaW5nIHNwaGVyZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byB0cnVlIGlmIHRoZSBvYmplY3RzIGluIHRoZSB3b3JsZCBtb3ZlZC4KICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLnVzZUJvdW5kaW5nQm94ZXMgPSBmYWxzZTsKICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgY29sbGlzaW9uIHBhaXJzIGZyb20gdGhlIHdvcmxkCiAgICAgKiBAcGFyYW0gd29ybGQgVGhlIHdvcmxkIHRvIHNlYXJjaCBpbgogICAgICogQHBhcmFtIHAxIEVtcHR5IGFycmF5IHRvIGJlIGZpbGxlZCB3aXRoIGJvZHkgb2JqZWN0cwogICAgICogQHBhcmFtIHAyIEVtcHR5IGFycmF5IHRvIGJlIGZpbGxlZCB3aXRoIGJvZHkgb2JqZWN0cwogICAgICovCgoKICAgIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb2xsaXNpb25QYWlycyBub3QgaW1wbGVtZW50ZWQgZm9yIHRoaXMgQnJvYWRQaGFzZSBjbGFzcyEnKTsKICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgYSBib2R5IHBhaXIgbmVlZHMgdG8gYmUgaW50ZXJzZWN0aW9uIHRlc3RlZCBhdCBhbGwuCiAgICAgKi8KCgogICAgbmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYm9keUEsIGJvZHlCKSB7CiAgICAgIC8vIENoZWNrIGNvbGxpc2lvbiBmaWx0ZXIgbWFza3MKICAgICAgaWYgKChib2R5QS5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlCLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwIHx8IChib2R5Qi5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIGJvZHlBLmNvbGxpc2lvbkZpbHRlck1hc2spID09PSAwKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9IC8vIENoZWNrIHR5cGVzCgoKICAgICAgaWYgKCgoYm9keUEudHlwZSAmIEJvZHkuU1RBVElDKSAhPT0gMCB8fCBib2R5QS5zbGVlcFN0YXRlID09PSBCb2R5LlNMRUVQSU5HKSAmJiAoKGJvZHlCLnR5cGUgJiBCb2R5LlNUQVRJQykgIT09IDAgfHwgYm9keUIuc2xlZXBTdGF0ZSA9PT0gQm9keS5TTEVFUElORykpIHsKICAgICAgICAvLyBCb3RoIGJvZGllcyBhcmUgc3RhdGljIG9yIHNsZWVwaW5nLiBTa2lwLgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyB2b2x1bWVzIG9mIHR3byBib2RpZXMgaW50ZXJzZWN0LgogICAgICovCgoKICAgIGludGVyc2VjdGlvblRlc3QoYm9keUEsIGJvZHlCLCBwYWlyczEsIHBhaXJzMikgewogICAgICBpZiAodGhpcy51c2VCb3VuZGluZ0JveGVzKSB7CiAgICAgICAgdGhpcy5kb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRvQm91bmRpbmdTcGhlcmVCcm9hZHBoYXNlKGJvZHlBLCBib2R5QiwgcGFpcnMxLCBwYWlyczIpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBzcGhlcmVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy4KICAgICAqIEBwYXJhbSBwYWlyczEgYm9keUEgaXMgYXBwZW5kZWQgdG8gdGhpcyBhcnJheSBpZiBpbnRlcnNlY3Rpb24KICAgICAqIEBwYXJhbSBwYWlyczIgYm9keUIgaXMgYXBwZW5kZWQgdG8gdGhpcyBhcnJheSBpZiBpbnRlcnNlY3Rpb24KICAgICAqLwoKCiAgICBkb0JvdW5kaW5nU3BoZXJlQnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGNvbnN0IHIgPSBCcm9hZHBoYXNlX2NvbGxpc2lvblBhaXJzX3I7CiAgICAgIGJvZHlCLnBvc2l0aW9uLnZzdWIoYm9keUEucG9zaXRpb24sIHIpOwogICAgICBjb25zdCBib3VuZGluZ1JhZGl1c1N1bTIgPSAoYm9keUEuYm91bmRpbmdSYWRpdXMgKyBib2R5Qi5ib3VuZGluZ1JhZGl1cykgKiogMjsKICAgICAgY29uc3Qgbm9ybTIgPSByLmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgIGlmIChub3JtMiA8IGJvdW5kaW5nUmFkaXVzU3VtMikgewogICAgICAgIHBhaXJzMS5wdXNoKGJvZHlBKTsKICAgICAgICBwYWlyczIucHVzaChib2R5Qik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kaW5nIGJveGVzIG9mIHR3byBib2RpZXMgYXJlIGludGVyc2VjdGluZy4KICAgICAqLwoKCiAgICBkb0JvdW5kaW5nQm94QnJvYWRwaGFzZShib2R5QSwgYm9keUIsIHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGlmIChib2R5QS5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICBib2R5QS51cGRhdGVBQUJCKCk7CiAgICAgIH0KCiAgICAgIGlmIChib2R5Qi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICBib2R5Qi51cGRhdGVBQUJCKCk7CiAgICAgIH0gLy8gQ2hlY2sgQUFCQiAvIEFBQkIKCgogICAgICBpZiAoYm9keUEuYWFiYi5vdmVybGFwcyhib2R5Qi5hYWJiKSkgewogICAgICAgIHBhaXJzMS5wdXNoKGJvZHlBKTsKICAgICAgICBwYWlyczIucHVzaChib2R5Qik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlcyBkdXBsaWNhdGUgcGFpcnMgZnJvbSB0aGUgcGFpciBhcnJheXMuCiAgICAgKi8KCgogICAgbWFrZVBhaXJzVW5pcXVlKHBhaXJzMSwgcGFpcnMyKSB7CiAgICAgIGNvbnN0IHQgPSBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV90ZW1wOwogICAgICBjb25zdCBwMSA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AxOwogICAgICBjb25zdCBwMiA9IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AyOwogICAgICBjb25zdCBOID0gcGFpcnMxLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBwMVtpXSA9IHBhaXJzMVtpXTsKICAgICAgICBwMltpXSA9IHBhaXJzMltpXTsKICAgICAgfQoKICAgICAgcGFpcnMxLmxlbmd0aCA9IDA7CiAgICAgIHBhaXJzMi5sZW5ndGggPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGlkMSA9IHAxW2ldLmlkOwogICAgICAgIGNvbnN0IGlkMiA9IHAyW2ldLmlkOwogICAgICAgIGNvbnN0IGtleSA9IGlkMSA8IGlkMiA/IGAke2lkMX0sJHtpZDJ9YCA6IGAke2lkMn0sJHtpZDF9YDsKICAgICAgICB0W2tleV0gPSBpOwogICAgICAgIHQua2V5cy5wdXNoKGtleSk7CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSB0LmtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBrZXkgPSB0LmtleXMucG9wKCk7CiAgICAgICAgY29uc3QgcGFpckluZGV4ID0gdFtrZXldOwogICAgICAgIHBhaXJzMS5wdXNoKHAxW3BhaXJJbmRleF0pOwogICAgICAgIHBhaXJzMi5wdXNoKHAyW3BhaXJJbmRleF0pOwogICAgICAgIGRlbGV0ZSB0W2tleV07CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVG8gYmUgaW1wbGVtZW50ZWQgYnkgc3ViY2Fzc2VzCiAgICAgKi8KCgogICAgc2V0V29ybGQod29ybGQpIHt9CiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBib3VuZGluZyBzcGhlcmVzIG9mIHR3byBib2RpZXMgb3ZlcmxhcC4KICAgICAqLwoKCiAgICBzdGF0aWMgYm91bmRpbmdTcGhlcmVDaGVjayhib2R5QSwgYm9keUIpIHsKICAgICAgY29uc3QgZGlzdCA9IG5ldyBWZWMzKCk7IC8vIGJzY19kaXN0OwoKICAgICAgYm9keUEucG9zaXRpb24udnN1Yihib2R5Qi5wb3NpdGlvbiwgZGlzdCk7CiAgICAgIGNvbnN0IHNhID0gYm9keUEuc2hhcGVzWzBdOwogICAgICBjb25zdCBzYiA9IGJvZHlCLnNoYXBlc1swXTsKICAgICAgcmV0dXJuIE1hdGgucG93KHNhLmJvdW5kaW5nU3BoZXJlUmFkaXVzICsgc2IuYm91bmRpbmdTcGhlcmVSYWRpdXMsIDIpID4gZGlzdC5sZW5ndGhTcXVhcmVkKCk7CiAgICB9CiAgICAvKioKICAgICAqIFJldHVybnMgYWxsIHRoZSBib2RpZXMgd2l0aGluIHRoZSBBQUJCLgogICAgICovCgoKICAgIGFhYmJRdWVyeSh3b3JsZCwgYWFiYiwgcmVzdWx0KSB7CiAgICAgIGNvbnNvbGUud2FybignLmFhYmJRdWVyeSBpcyBub3QgaW1wbGVtZW50ZWQgaW4gdGhpcyBCcm9hZHBoYXNlIHN1YmNsYXNzLicpOwogICAgICByZXR1cm4gW107CiAgICB9CgogIH0gLy8gVGVtcCBvYmplY3RzCgogIGNvbnN0IEJyb2FkcGhhc2VfY29sbGlzaW9uUGFpcnNfciA9IG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgUXVhdGVybmlvbigpOwogIG5ldyBWZWMzKCk7CiAgY29uc3QgQnJvYWRwaGFzZV9tYWtlUGFpcnNVbmlxdWVfdGVtcCA9IHsKICAgIGtleXM6IFtdCiAgfTsKICBjb25zdCBCcm9hZHBoYXNlX21ha2VQYWlyc1VuaXF1ZV9wMSA9IFtdOwogIGNvbnN0IEJyb2FkcGhhc2VfbWFrZVBhaXJzVW5pcXVlX3AyID0gW107CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CgogIC8qKgogICAqIE5haXZlIGJyb2FkcGhhc2UgaW1wbGVtZW50YXRpb24sIHVzZWQgaW4gbGFjayBvZiBiZXR0ZXIgb25lcy4KICAgKgogICAqIFRoZSBuYWl2ZSBicm9hZHBoYXNlIGxvb2tzIGF0IGFsbCBwb3NzaWJsZSBwYWlycyB3aXRob3V0IHJlc3RyaWN0aW9uLCB0aGVyZWZvcmUgaXQgaGFzIGNvbXBsZXhpdHkgTl4yIF8od2hpY2ggaXMgYmFkKV8KICAgKi8KICBjbGFzcyBOYWl2ZUJyb2FkcGhhc2UgZXh0ZW5kcyBCcm9hZHBoYXNlIHsKICAgIC8qKgogICAgICogQHRvZG8gUmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgdGhlIGNvbGxpc2lvbiBwYWlycyBpbiB0aGUgcGh5c2ljcyB3b3JsZAogICAgICovCgoKICAgIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwYWlyczEsIHBhaXJzMikgewogICAgICBjb25zdCBib2RpZXMgPSB3b3JsZC5ib2RpZXM7CiAgICAgIGNvbnN0IG4gPSBib2RpZXMubGVuZ3RoOwogICAgICBsZXQgYmk7CiAgICAgIGxldCBiajsgLy8gTmFpdmUgTl4yIGZ0dyEKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBuOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gaTsgaisrKSB7CiAgICAgICAgICBiaSA9IGJvZGllc1tpXTsKICAgICAgICAgIGJqID0gYm9kaWVzW2pdOwoKICAgICAgICAgIGlmICghdGhpcy5uZWVkQnJvYWRwaGFzZUNvbGxpc2lvbihiaSwgYmopKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uVGVzdChiaSwgYmosIHBhaXJzMSwgcGFpcnMyKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhbGwgdGhlIGJvZGllcyB3aXRoaW4gYW4gQUFCQi4KICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgcmVzdWx0aW5nIGJvZGllcyBpbi4KICAgICAqLwoKCiAgICBhYWJiUXVlcnkod29ybGQsIGFhYmIsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBbXTsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3JsZC5ib2RpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBiID0gd29ybGQuYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIGIudXBkYXRlQUFCQigpOwogICAgICAgIH0gLy8gVWdseSBoYWNrIHVudGlsIEJvZHkgZ2V0cyBhYWJiCgoKICAgICAgICBpZiAoYi5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7CiAgICAgICAgICByZXN1bHQucHVzaChiKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogIH0KCiAgLyoqCiAgICogU3RvcmFnZSBmb3IgUmF5IGNhc3RpbmcgZGF0YQogICAqLwogIGNsYXNzIFJheWNhc3RSZXN1bHQgewogICAgLyoqCiAgICAgKiByYXlGcm9tV29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogcmF5VG9Xb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBoaXROb3JtYWxXb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBoaXRQb2ludFdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIGhhc0hpdAogICAgICovCgogICAgLyoqCiAgICAgKiBzaGFwZQogICAgICovCgogICAgLyoqCiAgICAgKiBib2R5CiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBpbmRleCBvZiB0aGUgaGl0IHRyaWFuZ2xlLCBpZiB0aGUgaGl0IHNoYXBlIHdhcyBhIHRyaW1lc2gKICAgICAqLwoKICAgIC8qKgogICAgICogRGlzdGFuY2UgdG8gdGhlIGhpdC4gV2lsbCBiZSBzZXQgdG8gLTEgaWYgdGhlcmUgd2FzIG5vIGhpdAogICAgICovCgogICAgLyoqCiAgICAgKiBJZiB0aGUgcmF5IHNob3VsZCBzdG9wIHRyYXZlcnNpbmcgdGhlIGJvZGllcwogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5yYXlGcm9tV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnJheVRvV29ybGQgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmhpdE5vcm1hbFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5oaXRQb2ludFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5oYXNIaXQgPSBmYWxzZTsKICAgICAgdGhpcy5zaGFwZSA9IG51bGw7CiAgICAgIHRoaXMuYm9keSA9IG51bGw7CiAgICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gLTE7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSAtMTsKICAgICAgdGhpcy5zaG91bGRTdG9wID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIFJlc2V0IGFsbCByZXN1bHQgZGF0YS4KICAgICAqLwoKCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5yYXlGcm9tV29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLnJheVRvV29ybGQuc2V0WmVybygpOwogICAgICB0aGlzLmhpdE5vcm1hbFdvcmxkLnNldFplcm8oKTsKICAgICAgdGhpcy5oaXRQb2ludFdvcmxkLnNldFplcm8oKTsKICAgICAgdGhpcy5oYXNIaXQgPSBmYWxzZTsKICAgICAgdGhpcy5zaGFwZSA9IG51bGw7CiAgICAgIHRoaXMuYm9keSA9IG51bGw7CiAgICAgIHRoaXMuaGl0RmFjZUluZGV4ID0gLTE7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSAtMTsKICAgICAgdGhpcy5zaG91bGRTdG9wID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIGFib3J0CiAgICAgKi8KCgogICAgYWJvcnQoKSB7CiAgICAgIHRoaXMuc2hvdWxkU3RvcCA9IHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCByZXN1bHQgZGF0YS4KICAgICAqLwoKCiAgICBzZXQocmF5RnJvbVdvcmxkLCByYXlUb1dvcmxkLCBoaXROb3JtYWxXb3JsZCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKSB7CiAgICAgIHRoaXMucmF5RnJvbVdvcmxkLmNvcHkocmF5RnJvbVdvcmxkKTsKICAgICAgdGhpcy5yYXlUb1dvcmxkLmNvcHkocmF5VG9Xb3JsZCk7CiAgICAgIHRoaXMuaGl0Tm9ybWFsV29ybGQuY29weShoaXROb3JtYWxXb3JsZCk7CiAgICAgIHRoaXMuaGl0UG9pbnRXb3JsZC5jb3B5KGhpdFBvaW50V29ybGQpOwogICAgICB0aGlzLnNoYXBlID0gc2hhcGU7CiAgICAgIHRoaXMuYm9keSA9IGJvZHk7CiAgICAgIHRoaXMuZGlzdGFuY2UgPSBkaXN0YW5jZTsKICAgIH0KCiAgfQoKICBsZXQgX1NoYXBlJHR5cGVzJFNQSEVSRSwgX1NoYXBlJHR5cGVzJFBMQU5FLCBfU2hhcGUkdHlwZXMkQk9YLCBfU2hhcGUkdHlwZXMkQ1lMSU5ERVIsIF9TaGFwZSR0eXBlcyRDT05WRVhQTywgX1NoYXBlJHR5cGVzJEhFSUdIVEZJLCBfU2hhcGUkdHlwZXMkVFJJTUVTSDsKCiAgLyoqCiAgICogUkFZX01PREVTCiAgICovCiAgY29uc3QgUkFZX01PREVTID0gewogICAgLyoqIENMT1NFU1QgKi8KICAgIENMT1NFU1Q6IDEsCgogICAgLyoqIEFOWSAqLwogICAgQU5ZOiAyLAoKICAgIC8qKiBBTEwgKi8KICAgIEFMTDogNAogIH07CiAgLyoqCiAgICogUmF5TW9kZQogICAqLwoKICBfU2hhcGUkdHlwZXMkU1BIRVJFID0gU2hhcGUudHlwZXMuU1BIRVJFOwogIF9TaGFwZSR0eXBlcyRQTEFORSA9IFNoYXBlLnR5cGVzLlBMQU5FOwogIF9TaGFwZSR0eXBlcyRCT1ggPSBTaGFwZS50eXBlcy5CT1g7CiAgX1NoYXBlJHR5cGVzJENZTElOREVSID0gU2hhcGUudHlwZXMuQ1lMSU5ERVI7CiAgX1NoYXBlJHR5cGVzJENPTlZFWFBPID0gU2hhcGUudHlwZXMuQ09OVkVYUE9MWUhFRFJPTjsKICBfU2hhcGUkdHlwZXMkSEVJR0hURkkgPSBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRDsKICBfU2hhcGUkdHlwZXMkVFJJTUVTSCA9IFNoYXBlLnR5cGVzLlRSSU1FU0g7CgogIC8qKgogICAqIEEgbGluZSBpbiAzRCBzcGFjZSB0aGF0IGludGVyc2VjdHMgYm9kaWVzIGFuZCByZXR1cm4gcG9pbnRzLgogICAqLwogIGNsYXNzIFJheSB7CiAgICAvKioKICAgICAqIGZyb20KICAgICAqLwoKICAgIC8qKgogICAgICogdG8KICAgICAqLwoKICAgIC8qKgogICAgICogZGlyZWN0aW9uCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBwcmVjaXNpb24gb2YgdGhlIHJheS4gVXNlZCB3aGVuIGNoZWNraW5nIHBhcmFsbGVsaXR5IGV0Yy4KICAgICAqIEBkZWZhdWx0IDAuMDAwMQogICAgICovCgogICAgLyoqCiAgICAgKiBTZXQgdG8gYGZhbHNlYCBpZiB5b3UgZG9uJ3Qgd2FudCB0aGUgUmF5IHRvIHRha2UgYGNvbGxpc2lvblJlc3BvbnNlYCBmbGFncyBpbnRvIGFjY291bnQgb24gYm9kaWVzIGFuZCBzaGFwZXMuCiAgICAgKiBAZGVmYXVsdCB0cnVlCiAgICAgKi8KCiAgICAvKioKICAgICAqIElmIHNldCB0byBgdHJ1ZWAsIHRoZSByYXkgc2tpcHMgYW55IGhpdHMgd2l0aCBub3JtYWwuZG90KHJheURpcmVjdGlvbikgPCAwLgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogY29sbGlzaW9uRmlsdGVyTWFzawogICAgICogQGRlZmF1bHQgLTEKICAgICAqLwoKICAgIC8qKgogICAgICogY29sbGlzaW9uRmlsdGVyR3JvdXAKICAgICAqIEBkZWZhdWx0IC0xCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBpbnRlcnNlY3Rpb24gbW9kZS4gU2hvdWxkIGJlIFJheS5BTlksIFJheS5BTEwgb3IgUmF5LkNMT1NFU1QuCiAgICAgKiBAZGVmYXVsdCBSQVkuQU5ZCiAgICAgKi8KCiAgICAvKioKICAgICAqIEN1cnJlbnQgcmVzdWx0IG9iamVjdC4KICAgICAqLwoKICAgIC8qKgogICAgICogV2lsbCBiZSBzZXQgdG8gYHRydWVgIGR1cmluZyBpbnRlcnNlY3RXb3JsZCgpIGlmIHRoZSByYXkgaGl0IGFueXRoaW5nLgogICAgICovCgogICAgLyoqCiAgICAgKiBVc2VyLXByb3ZpZGVkIHJlc3VsdCBjYWxsYmFjay4gV2lsbCBiZSB1c2VkIGlmIG1vZGUgaXMgUmF5LkFMTC4KICAgICAqLwoKICAgIC8qKgogICAgICogQ0xPU0VTVAogICAgICovCgogICAgLyoqCiAgICAgKiBBTlkKICAgICAqLwoKICAgIC8qKgogICAgICogQUxMCiAgICAgKi8KICAgIGdldCBbX1NoYXBlJHR5cGVzJFNQSEVSRV0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RTcGhlcmU7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkUExBTkVdKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0UGxhbmU7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkQk9YXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdEJveDsKICAgIH0KCiAgICBnZXQgW19TaGFwZSR0eXBlcyRDWUxJTkRFUl0oKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXg7CiAgICB9CgogICAgZ2V0IFtfU2hhcGUkdHlwZXMkQ09OVkVYUE9dKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0Q29udmV4OwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJEhFSUdIVEZJXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2ludGVyc2VjdEhlaWdodGZpZWxkOwogICAgfQoKICAgIGdldCBbX1NoYXBlJHR5cGVzJFRSSU1FU0hdKCkgewogICAgICByZXR1cm4gdGhpcy5faW50ZXJzZWN0VHJpbWVzaDsKICAgIH0KCiAgICBjb25zdHJ1Y3Rvcihmcm9tLCB0bykgewogICAgICBpZiAoZnJvbSA9PT0gdm9pZCAwKSB7CiAgICAgICAgZnJvbSA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGlmICh0byA9PT0gdm9pZCAwKSB7CiAgICAgICAgdG8gPSBuZXcgVmVjMygpOwogICAgICB9CgogICAgICB0aGlzLmZyb20gPSBmcm9tLmNsb25lKCk7CiAgICAgIHRoaXMudG8gPSB0by5jbG9uZSgpOwogICAgICB0aGlzLmRpcmVjdGlvbiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMucHJlY2lzaW9uID0gMC4wMDAxOwogICAgICB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB0cnVlOwogICAgICB0aGlzLnNraXBCYWNrZmFjZXMgPSBmYWxzZTsKICAgICAgdGhpcy5jb2xsaXNpb25GaWx0ZXJNYXNrID0gLTE7CiAgICAgIHRoaXMuY29sbGlzaW9uRmlsdGVyR3JvdXAgPSAtMTsKICAgICAgdGhpcy5tb2RlID0gUmF5LkFOWTsKICAgICAgdGhpcy5yZXN1bHQgPSBuZXcgUmF5Y2FzdFJlc3VsdCgpOwogICAgICB0aGlzLmhhc0hpdCA9IGZhbHNlOwoKICAgICAgdGhpcy5jYWxsYmFjayA9IHJlc3VsdCA9PiB7fTsKICAgIH0KICAgIC8qKgogICAgICogRG8gaXRlcnNlY3Rpb24gYWdhaW5zdCBhbGwgYm9kaWVzIGluIHRoZSBnaXZlbiBXb3JsZC4KICAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgcmF5IGhpdCBhbnl0aGluZywgb3RoZXJ3aXNlIGZhbHNlLgogICAgICovCgoKICAgIGludGVyc2VjdFdvcmxkKHdvcmxkLCBvcHRpb25zKSB7CiAgICAgIHRoaXMubW9kZSA9IG9wdGlvbnMubW9kZSB8fCBSYXkuQU5ZOwogICAgICB0aGlzLnJlc3VsdCA9IG9wdGlvbnMucmVzdWx0IHx8IG5ldyBSYXljYXN0UmVzdWx0KCk7CiAgICAgIHRoaXMuc2tpcEJhY2tmYWNlcyA9ICEhb3B0aW9ucy5za2lwQmFja2ZhY2VzOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlck1hc2sgPSB0eXBlb2Ygb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJNYXNrICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyTWFzayA6IC0xOwogICAgICB0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwID0gdHlwZW9mIG9wdGlvbnMuY29sbGlzaW9uRmlsdGVyR3JvdXAgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5jb2xsaXNpb25GaWx0ZXJHcm91cCA6IC0xOwogICAgICB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB0eXBlb2Ygb3B0aW9ucy5jaGVja0NvbGxpc2lvblJlc3BvbnNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuY2hlY2tDb2xsaXNpb25SZXNwb25zZSA6IHRydWU7CgogICAgICBpZiAob3B0aW9ucy5mcm9tKSB7CiAgICAgICAgdGhpcy5mcm9tLmNvcHkob3B0aW9ucy5mcm9tKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMudG8pIHsKICAgICAgICB0aGlzLnRvLmNvcHkob3B0aW9ucy50byk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2FsbGJhY2sgPSBvcHRpb25zLmNhbGxiYWNrIHx8ICgoKSA9PiB7fSk7CgogICAgICB0aGlzLmhhc0hpdCA9IGZhbHNlOwogICAgICB0aGlzLnJlc3VsdC5yZXNldCgpOwogICAgICB0aGlzLnVwZGF0ZURpcmVjdGlvbigpOwogICAgICB0aGlzLmdldEFBQkIodG1wQUFCQiQxKTsKICAgICAgdG1wQXJyYXkubGVuZ3RoID0gMDsKICAgICAgd29ybGQuYnJvYWRwaGFzZS5hYWJiUXVlcnkod29ybGQsIHRtcEFBQkIkMSwgdG1wQXJyYXkpOwogICAgICB0aGlzLmludGVyc2VjdEJvZGllcyh0bXBBcnJheSk7CiAgICAgIHJldHVybiB0aGlzLmhhc0hpdDsKICAgIH0KICAgIC8qKgogICAgICogU2hvb3QgYSByYXkgYXQgYSBib2R5LCBnZXQgYmFjayBpbmZvcm1hdGlvbiBhYm91dCB0aGUgaGl0LgogICAgICogQGRlcHJlY2F0ZWQgQHBhcmFtIHJlc3VsdCBzZXQgdGhlIHJlc3VsdCBwcm9wZXJ0eSBvZiB0aGUgUmF5IGluc3RlYWQuCiAgICAgKi8KCgogICAgaW50ZXJzZWN0Qm9keShib2R5LCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0OwogICAgICAgIHRoaXMudXBkYXRlRGlyZWN0aW9uKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGNoZWNrQ29sbGlzaW9uUmVzcG9uc2UgPSB0aGlzLmNoZWNrQ29sbGlzaW9uUmVzcG9uc2U7CgogICAgICBpZiAoY2hlY2tDb2xsaXNpb25SZXNwb25zZSAmJiAhYm9keS5jb2xsaXNpb25SZXNwb25zZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCh0aGlzLmNvbGxpc2lvbkZpbHRlckdyb3VwICYgYm9keS5jb2xsaXNpb25GaWx0ZXJNYXNrKSA9PT0gMCB8fCAoYm9keS5jb2xsaXNpb25GaWx0ZXJHcm91cCAmIHRoaXMuY29sbGlzaW9uRmlsdGVyTWFzaykgPT09IDApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IHhpID0gaW50ZXJzZWN0Qm9keV94aTsKICAgICAgY29uc3QgcWkgPSBpbnRlcnNlY3RCb2R5X3FpOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSBib2R5LnNoYXBlcy5sZW5ndGg7IGkgPCBOOyBpKyspIHsKICAgICAgICBjb25zdCBzaGFwZSA9IGJvZHkuc2hhcGVzW2ldOwoKICAgICAgICBpZiAoY2hlY2tDb2xsaXNpb25SZXNwb25zZSAmJiAhc2hhcGUuY29sbGlzaW9uUmVzcG9uc2UpIHsKICAgICAgICAgIGNvbnRpbnVlOyAvLyBTa2lwCiAgICAgICAgfQoKICAgICAgICBib2R5LnF1YXRlcm5pb24ubXVsdChib2R5LnNoYXBlT3JpZW50YXRpb25zW2ldLCBxaSk7CiAgICAgICAgYm9keS5xdWF0ZXJuaW9uLnZtdWx0KGJvZHkuc2hhcGVPZmZzZXRzW2ldLCB4aSk7CiAgICAgICAgeGkudmFkZChib2R5LnBvc2l0aW9uLCB4aSk7CiAgICAgICAgdGhpcy5pbnRlcnNlY3RTaGFwZShzaGFwZSwgcWksIHhpLCBib2R5KTsKCiAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBTaG9vdCBhIHJheSBhdCBhbiBhcnJheSBib2RpZXMsIGdldCBiYWNrIGluZm9ybWF0aW9uIGFib3V0IHRoZSBoaXQuCiAgICAgKiBAcGFyYW0gYm9kaWVzIEFuIGFycmF5IG9mIEJvZHkgb2JqZWN0cy4KICAgICAqIEBkZXByZWNhdGVkIEBwYXJhbSByZXN1bHQgc2V0IHRoZSByZXN1bHQgcHJvcGVydHkgb2YgdGhlIFJheSBpbnN0ZWFkLgogICAgICoKICAgICAqLwoKCiAgICBpbnRlcnNlY3RCb2RpZXMoYm9kaWVzLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCkgewogICAgICAgIHRoaXMucmVzdWx0ID0gcmVzdWx0OwogICAgICAgIHRoaXMudXBkYXRlRGlyZWN0aW9uKCk7CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYm9kaWVzLmxlbmd0aDsgIXRoaXMucmVzdWx0LnNob3VsZFN0b3AgJiYgaSA8IGw7IGkrKykgewogICAgICAgIHRoaXMuaW50ZXJzZWN0Qm9keShib2RpZXNbaV0pOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZXMgdGhlIGRpcmVjdGlvbiB2ZWN0b3IuCiAgICAgKi8KCgogICAgdXBkYXRlRGlyZWN0aW9uKCkgewogICAgICB0aGlzLnRvLnZzdWIodGhpcy5mcm9tLCB0aGlzLmRpcmVjdGlvbik7CiAgICAgIHRoaXMuZGlyZWN0aW9uLm5vcm1hbGl6ZSgpOwogICAgfQoKICAgIGludGVyc2VjdFNoYXBlKHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSkgewogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOyAvLyBDaGVja2luZyBib3VuZGluZ1NwaGVyZQoKICAgICAgY29uc3QgZGlzdGFuY2UgPSBkaXN0YW5jZUZyb21JbnRlcnNlY3Rpb24oZnJvbSwgdGhpcy5kaXJlY3Rpb24sIHBvc2l0aW9uKTsKCiAgICAgIGlmIChkaXN0YW5jZSA+IHNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBpbnRlcnNlY3RNZXRob2QgPSB0aGlzW3NoYXBlLnR5cGVdOwoKICAgICAgaWYgKGludGVyc2VjdE1ldGhvZCkgewogICAgICAgIGludGVyc2VjdE1ldGhvZC5jYWxsKHRoaXMsIHNoYXBlLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgc2hhcGUpOwogICAgICB9CiAgICB9CgogICAgX2ludGVyc2VjdEJveChib3gsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlKSB7CiAgICAgIHJldHVybiB0aGlzLl9pbnRlcnNlY3RDb252ZXgoYm94LmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbiwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpOwogICAgfQoKICAgIF9pbnRlcnNlY3RQbGFuZShzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgY29uc3QgZnJvbSA9IHRoaXMuZnJvbTsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLmRpcmVjdGlvbjsgLy8gR2V0IHBsYW5lIG5vcm1hbAoKICAgICAgY29uc3Qgd29ybGROb3JtYWwgPSBuZXcgVmVjMygwLCAwLCAxKTsKICAgICAgcXVhdC52bXVsdCh3b3JsZE5vcm1hbCwgd29ybGROb3JtYWwpOwogICAgICBjb25zdCBsZW4gPSBuZXcgVmVjMygpOwogICAgICBmcm9tLnZzdWIocG9zaXRpb24sIGxlbik7CiAgICAgIGNvbnN0IHBsYW5lVG9Gcm9tID0gbGVuLmRvdCh3b3JsZE5vcm1hbCk7CiAgICAgIHRvLnZzdWIocG9zaXRpb24sIGxlbik7CiAgICAgIGNvbnN0IHBsYW5lVG9UbyA9IGxlbi5kb3Qod29ybGROb3JtYWwpOwoKICAgICAgaWYgKHBsYW5lVG9Gcm9tICogcGxhbmVUb1RvID4gMCkgewogICAgICAgIC8vICJmcm9tIiBhbmQgInRvIiBhcmUgb24gdGhlIHNhbWUgc2lkZSBvZiB0aGUgcGxhbmUuLi4gYmFpbCBvdXQKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChmcm9tLmRpc3RhbmNlVG8odG8pIDwgcGxhbmVUb0Zyb20pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IG5fZG90X2RpciA9IHdvcmxkTm9ybWFsLmRvdChkaXJlY3Rpb24pOwoKICAgICAgaWYgKE1hdGguYWJzKG5fZG90X2RpcikgPCB0aGlzLnByZWNpc2lvbikgewogICAgICAgIC8vIE5vIGludGVyc2VjdGlvbgogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgcGxhbmVQb2ludFRvRnJvbSA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IGRpcl9zY2FsZWRfd2l0aF90ID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaGl0UG9pbnRXb3JsZCA9IG5ldyBWZWMzKCk7CiAgICAgIGZyb20udnN1Yihwb3NpdGlvbiwgcGxhbmVQb2ludFRvRnJvbSk7CiAgICAgIGNvbnN0IHQgPSAtd29ybGROb3JtYWwuZG90KHBsYW5lUG9pbnRUb0Zyb20pIC8gbl9kb3RfZGlyOwogICAgICBkaXJlY3Rpb24uc2NhbGUodCwgZGlyX3NjYWxlZF93aXRoX3QpOwogICAgICBmcm9tLnZhZGQoZGlyX3NjYWxlZF93aXRoX3QsIGhpdFBvaW50V29ybGQpOwogICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbih3b3JsZE5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHdvcmxkIEFBQkIgb2YgdGhlIHJheS4KICAgICAqLwoKCiAgICBnZXRBQUJCKGFhYmIpIHsKICAgICAgY29uc3QgewogICAgICAgIGxvd2VyQm91bmQsCiAgICAgICAgdXBwZXJCb3VuZAogICAgICB9ID0gYWFiYjsKICAgICAgY29uc3QgdG8gPSB0aGlzLnRvOwogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBsb3dlckJvdW5kLnggPSBNYXRoLm1pbih0by54LCBmcm9tLngpOwogICAgICBsb3dlckJvdW5kLnkgPSBNYXRoLm1pbih0by55LCBmcm9tLnkpOwogICAgICBsb3dlckJvdW5kLnogPSBNYXRoLm1pbih0by56LCBmcm9tLnopOwogICAgICB1cHBlckJvdW5kLnggPSBNYXRoLm1heCh0by54LCBmcm9tLngpOwogICAgICB1cHBlckJvdW5kLnkgPSBNYXRoLm1heCh0by55LCBmcm9tLnkpOwogICAgICB1cHBlckJvdW5kLnogPSBNYXRoLm1heCh0by56LCBmcm9tLnopOwogICAgfQoKICAgIF9pbnRlcnNlY3RIZWlnaHRmaWVsZChzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUpIHsKICAgICAgc2hhcGUuZGF0YTsKICAgICAgc2hhcGUuZWxlbWVudFNpemU7IC8vIENvbnZlcnQgdGhlIHJheSB0byBsb2NhbCBoZWlnaHRmaWVsZCBjb29yZGluYXRlcwoKICAgICAgY29uc3QgbG9jYWxSYXkgPSBpbnRlcnNlY3RIZWlnaHRmaWVsZF9sb2NhbFJheTsgLy9uZXcgUmF5KHRoaXMuZnJvbSwgdGhpcy50byk7CgogICAgICBsb2NhbFJheS5mcm9tLmNvcHkodGhpcy5mcm9tKTsKICAgICAgbG9jYWxSYXkudG8uY29weSh0aGlzLnRvKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBsb2NhbFJheS5mcm9tLCBsb2NhbFJheS5mcm9tKTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Mb2NhbEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBsb2NhbFJheS50bywgbG9jYWxSYXkudG8pOwogICAgICBsb2NhbFJheS51cGRhdGVEaXJlY3Rpb24oKTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CgogICAgICBjb25zdCBpbmRleCA9IGludGVyc2VjdEhlaWdodGZpZWxkX2luZGV4OwogICAgICBsZXQgaU1pblg7CiAgICAgIGxldCBpTWluWTsKICAgICAgbGV0IGlNYXhYOwogICAgICBsZXQgaU1heFk7IC8vIFNldCB0byBtYXgKCiAgICAgIGlNaW5YID0gaU1pblkgPSAwOwogICAgICBpTWF4WCA9IGlNYXhZID0gc2hhcGUuZGF0YS5sZW5ndGggLSAxOwogICAgICBjb25zdCBhYWJiID0gbmV3IEFBQkIoKTsKICAgICAgbG9jYWxSYXkuZ2V0QUFCQihhYWJiKTsKICAgICAgc2hhcGUuZ2V0SW5kZXhPZlBvc2l0aW9uKGFhYmIubG93ZXJCb3VuZC54LCBhYWJiLmxvd2VyQm91bmQueSwgaW5kZXgsIHRydWUpOwogICAgICBpTWluWCA9IE1hdGgubWF4KGlNaW5YLCBpbmRleFswXSk7CiAgICAgIGlNaW5ZID0gTWF0aC5tYXgoaU1pblksIGluZGV4WzFdKTsKICAgICAgc2hhcGUuZ2V0SW5kZXhPZlBvc2l0aW9uKGFhYmIudXBwZXJCb3VuZC54LCBhYWJiLnVwcGVyQm91bmQueSwgaW5kZXgsIHRydWUpOwogICAgICBpTWF4WCA9IE1hdGgubWluKGlNYXhYLCBpbmRleFswXSArIDEpOwogICAgICBpTWF4WSA9IE1hdGgubWluKGlNYXhZLCBpbmRleFsxXSArIDEpOwoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDwgaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHsKICAgICAgICAgIGlmICh0aGlzLnJlc3VsdC5zaG91bGRTdG9wKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBzaGFwZS5nZXRBYWJiQXRJbmRleChpLCBqLCBhYWJiKTsKCiAgICAgICAgICBpZiAoIWFhYmIub3ZlcmxhcHNSYXkobG9jYWxSYXkpKSB7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfSAvLyBMb3dlciB0cmlhbmdsZQoKCiAgICAgICAgICBzaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCBmYWxzZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUocG9zaXRpb24sIHF1YXQsIHNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIHRoaXMuX2ludGVyc2VjdENvbnZleChzaGFwZS5waWxsYXJDb252ZXgsIHF1YXQsIHdvcmxkUGlsbGFyT2Zmc2V0LCBib2R5LCByZXBvcnRlZFNoYXBlLCBpbnRlcnNlY3RDb252ZXhPcHRpb25zKTsKCiAgICAgICAgICBpZiAodGhpcy5yZXN1bHQuc2hvdWxkU3RvcCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IC8vIFVwcGVyIHRyaWFuZ2xlCgoKICAgICAgICAgIHNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIHRydWUpOwogICAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBzaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICB0aGlzLl9pbnRlcnNlY3RDb252ZXgoc2hhcGUucGlsbGFyQ29udmV4LCBxdWF0LCB3b3JsZFBpbGxhck9mZnNldCwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgaW50ZXJzZWN0Q29udmV4T3B0aW9ucyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgX2ludGVyc2VjdFNwaGVyZShzcGhlcmUsIHF1YXQsIHBvc2l0aW9uLCBib2R5LCByZXBvcnRlZFNoYXBlKSB7CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgciA9IHNwaGVyZS5yYWRpdXM7CiAgICAgIGNvbnN0IGEgPSAodG8ueCAtIGZyb20ueCkgKiogMiArICh0by55IC0gZnJvbS55KSAqKiAyICsgKHRvLnogLSBmcm9tLnopICoqIDI7CiAgICAgIGNvbnN0IGIgPSAyICogKCh0by54IC0gZnJvbS54KSAqIChmcm9tLnggLSBwb3NpdGlvbi54KSArICh0by55IC0gZnJvbS55KSAqIChmcm9tLnkgLSBwb3NpdGlvbi55KSArICh0by56IC0gZnJvbS56KSAqIChmcm9tLnogLSBwb3NpdGlvbi56KSk7CiAgICAgIGNvbnN0IGMgPSAoZnJvbS54IC0gcG9zaXRpb24ueCkgKiogMiArIChmcm9tLnkgLSBwb3NpdGlvbi55KSAqKiAyICsgKGZyb20ueiAtIHBvc2l0aW9uLnopICoqIDIgLSByICoqIDI7CiAgICAgIGNvbnN0IGRlbHRhID0gYiAqKiAyIC0gNCAqIGEgKiBjOwogICAgICBjb25zdCBpbnRlcnNlY3Rpb25Qb2ludCA9IFJheV9pbnRlcnNlY3RTcGhlcmVfaW50ZXJzZWN0aW9uUG9pbnQ7CiAgICAgIGNvbnN0IG5vcm1hbCA9IFJheV9pbnRlcnNlY3RTcGhlcmVfbm9ybWFsOwoKICAgICAgaWYgKGRlbHRhIDwgMCkgewogICAgICAgIC8vIE5vIGludGVyc2VjdGlvbgogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIGlmIChkZWx0YSA9PT0gMCkgewogICAgICAgIC8vIHNpbmdsZSBpbnRlcnNlY3Rpb24gcG9pbnQKICAgICAgICBmcm9tLmxlcnAodG8sIGRlbHRhLCBpbnRlcnNlY3Rpb25Qb2ludCk7CiAgICAgICAgaW50ZXJzZWN0aW9uUG9pbnQudnN1Yihwb3NpdGlvbiwgbm9ybWFsKTsKICAgICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGQxID0gKC1iIC0gTWF0aC5zcXJ0KGRlbHRhKSkgLyAoMiAqIGEpOwogICAgICAgIGNvbnN0IGQyID0gKC1iICsgTWF0aC5zcXJ0KGRlbHRhKSkgLyAoMiAqIGEpOwoKICAgICAgICBpZiAoZDEgPj0gMCAmJiBkMSA8PSAxKSB7CiAgICAgICAgICBmcm9tLmxlcnAodG8sIGQxLCBpbnRlcnNlY3Rpb25Qb2ludCk7CiAgICAgICAgICBpbnRlcnNlY3Rpb25Qb2ludC52c3ViKHBvc2l0aW9uLCBub3JtYWwpOwogICAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3Rpb25Qb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgLTEpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMucmVzdWx0LnNob3VsZFN0b3ApIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmIChkMiA+PSAwICYmIGQyIDw9IDEpIHsKICAgICAgICAgIGZyb20ubGVycCh0bywgZDIsIGludGVyc2VjdGlvblBvaW50KTsKICAgICAgICAgIGludGVyc2VjdGlvblBvaW50LnZzdWIocG9zaXRpb24sIG5vcm1hbCk7CiAgICAgICAgICBub3JtYWwubm9ybWFsaXplKCk7CiAgICAgICAgICB0aGlzLnJlcG9ydEludGVyc2VjdGlvbihub3JtYWwsIGludGVyc2VjdGlvblBvaW50LCByZXBvcnRlZFNoYXBlLCBib2R5LCAtMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgX2ludGVyc2VjdENvbnZleChzaGFwZSwgcXVhdCwgcG9zaXRpb24sIGJvZHksIHJlcG9ydGVkU2hhcGUsIG9wdGlvbnMpIHsKICAgICAgY29uc3Qgbm9ybWFsID0gaW50ZXJzZWN0Q29udmV4X25vcm1hbDsKICAgICAgY29uc3QgdmVjdG9yID0gaW50ZXJzZWN0Q29udmV4X3ZlY3RvcjsKICAgICAgY29uc3QgZmFjZUxpc3QgPSBvcHRpb25zICYmIG9wdGlvbnMuZmFjZUxpc3QgfHwgbnVsbDsgLy8gQ2hlY2tpbmcgZmFjZXMKCiAgICAgIGNvbnN0IGZhY2VzID0gc2hhcGUuZmFjZXM7CiAgICAgIGNvbnN0IHZlcnRpY2VzID0gc2hhcGUudmVydGljZXM7CiAgICAgIGNvbnN0IG5vcm1hbHMgPSBzaGFwZS5mYWNlTm9ybWFsczsKICAgICAgY29uc3QgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb247CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgZnJvbVRvRGlzdGFuY2UgPSBmcm9tLmRpc3RhbmNlVG8odG8pOwogICAgICBjb25zdCBOZmFjZXMgPSBmYWNlTGlzdCA/IGZhY2VMaXN0Lmxlbmd0aCA6IGZhY2VzLmxlbmd0aDsKICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZXN1bHQ7CgogICAgICBmb3IgKGxldCBqID0gMDsgIXJlc3VsdC5zaG91bGRTdG9wICYmIGogPCBOZmFjZXM7IGorKykgewogICAgICAgIGNvbnN0IGZpID0gZmFjZUxpc3QgPyBmYWNlTGlzdFtqXSA6IGo7CiAgICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ZpXTsKICAgICAgICBjb25zdCBmYWNlTm9ybWFsID0gbm9ybWFsc1tmaV07CiAgICAgICAgY29uc3QgcSA9IHF1YXQ7CiAgICAgICAgY29uc3QgeCA9IHBvc2l0aW9uOyAvLyBkZXRlcm1pbmUgaWYgcmF5IGludGVyc2VjdHMgdGhlIHBsYW5lIG9mIHRoZSBmYWNlCiAgICAgICAgLy8gbm90ZTogdGhpcyB3b3JrcyByZWdhcmRsZXNzIG9mIHRoZSBkaXJlY3Rpb24gb2YgdGhlIGZhY2Ugbm9ybWFsCiAgICAgICAgLy8gR2V0IHBsYW5lIHBvaW50IGluIHdvcmxkIGNvb3JkaW5hdGVzLi4uCgogICAgICAgIHZlY3Rvci5jb3B5KHZlcnRpY2VzW2ZhY2VbMF1dKTsKICAgICAgICBxLnZtdWx0KHZlY3RvciwgdmVjdG9yKTsKICAgICAgICB2ZWN0b3IudmFkZCh4LCB2ZWN0b3IpOyAvLyAuLi5idXQgbWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgcmF5IGZyb20uIFdlJ2xsIGZpeCB0aGlzIGxhdGVyLgoKICAgICAgICB2ZWN0b3IudnN1Yihmcm9tLCB2ZWN0b3IpOyAvLyBHZXQgcGxhbmUgbm9ybWFsCgogICAgICAgIHEudm11bHQoZmFjZU5vcm1hbCwgbm9ybWFsKTsgLy8gSWYgdGhpcyBkb3QgcHJvZHVjdCBpcyBuZWdhdGl2ZSwgd2UgaGF2ZSBzb21ldGhpbmcgaW50ZXJlc3RpbmcKCiAgICAgICAgY29uc3QgZG90ID0gZGlyZWN0aW9uLmRvdChub3JtYWwpOyAvLyBCYWlsIG91dCBpZiByYXkgYW5kIHBsYW5lIGFyZSBwYXJhbGxlbAoKICAgICAgICBpZiAoTWF0aC5hYnMoZG90KSA8IHRoaXMucHJlY2lzaW9uKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IC8vIGNhbGMgZGlzdGFuY2UgdG8gcGxhbmUKCgogICAgICAgIGNvbnN0IHNjYWxhciA9IG5vcm1hbC5kb3QodmVjdG9yKSAvIGRvdDsgLy8gaWYgbmVnYXRpdmUgZGlzdGFuY2UsIHRoZW4gcGxhbmUgaXMgYmVoaW5kIHJheQoKICAgICAgICBpZiAoc2NhbGFyIDwgMCkgewogICAgICAgICAgY29udGludWU7CiAgICAgICAgfSAvLyBpZiAoZG90IDwgMCkgewogICAgICAgIC8vIEludGVyc2VjdGlvbiBwb2ludCBpcyBmcm9tICsgZGlyZWN0aW9uICogc2NhbGFyCgoKICAgICAgICBkaXJlY3Rpb24uc2NhbGUoc2NhbGFyLCBpbnRlcnNlY3RQb2ludCk7CiAgICAgICAgaW50ZXJzZWN0UG9pbnQudmFkZChmcm9tLCBpbnRlcnNlY3RQb2ludCk7IC8vIGEgaXMgdGhlIHBvaW50IHdlIGNvbXBhcmUgcG9pbnRzIGIgYW5kIGMgd2l0aC4KCiAgICAgICAgYS5jb3B5KHZlcnRpY2VzW2ZhY2VbMF1dKTsKICAgICAgICBxLnZtdWx0KGEsIGEpOwogICAgICAgIHgudmFkZChhLCBhKTsKCiAgICAgICAgZm9yIChsZXQgaSA9IDE7ICFyZXN1bHQuc2hvdWxkU3RvcCAmJiBpIDwgZmFjZS5sZW5ndGggLSAxOyBpKyspIHsKICAgICAgICAgIC8vIFRyYW5zZm9ybSAzIHZlcnRpY2VzIHRvIHdvcmxkIGNvb3JkcwogICAgICAgICAgYi5jb3B5KHZlcnRpY2VzW2ZhY2VbaV1dKTsKICAgICAgICAgIGMuY29weSh2ZXJ0aWNlc1tmYWNlW2kgKyAxXV0pOwogICAgICAgICAgcS52bXVsdChiLCBiKTsKICAgICAgICAgIHEudm11bHQoYywgYyk7CiAgICAgICAgICB4LnZhZGQoYiwgYik7CiAgICAgICAgICB4LnZhZGQoYywgYyk7CiAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IGludGVyc2VjdFBvaW50LmRpc3RhbmNlVG8oZnJvbSk7CgogICAgICAgICAgaWYgKCEoUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYSwgYiwgYykgfHwgUmF5LnBvaW50SW5UcmlhbmdsZShpbnRlcnNlY3RQb2ludCwgYiwgYSwgYykpIHx8IGRpc3RhbmNlID4gZnJvbVRvRGlzdGFuY2UpIHsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBpbnRlcnNlY3RQb2ludCwgcmVwb3J0ZWRTaGFwZSwgYm9keSwgZmkpOwogICAgICAgIH0gLy8gfQoKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBAdG9kbyBPcHRpbWl6ZSBieSB0cmFuc2Zvcm1pbmcgdGhlIHdvcmxkIHRvIGxvY2FsIHNwYWNlIGZpcnN0LgogICAgICogQHRvZG8gVXNlIE9jdHJlZSBsb29rdXAKICAgICAqLwoKCiAgICBfaW50ZXJzZWN0VHJpbWVzaChtZXNoLCBxdWF0LCBwb3NpdGlvbiwgYm9keSwgcmVwb3J0ZWRTaGFwZSwgb3B0aW9ucykgewogICAgICBjb25zdCBub3JtYWwgPSBpbnRlcnNlY3RUcmltZXNoX25vcm1hbDsKICAgICAgY29uc3QgdHJpYW5nbGVzID0gaW50ZXJzZWN0VHJpbWVzaF90cmlhbmdsZXM7CiAgICAgIGNvbnN0IHRyZWVUcmFuc2Zvcm0gPSBpbnRlcnNlY3RUcmltZXNoX3RyZWVUcmFuc2Zvcm07CiAgICAgIGNvbnN0IHZlY3RvciA9IGludGVyc2VjdENvbnZleF92ZWN0b3I7CiAgICAgIGNvbnN0IGxvY2FsRGlyZWN0aW9uID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbERpcmVjdGlvbjsKICAgICAgY29uc3QgbG9jYWxGcm9tID0gaW50ZXJzZWN0VHJpbWVzaF9sb2NhbEZyb207CiAgICAgIGNvbnN0IGxvY2FsVG8gPSBpbnRlcnNlY3RUcmltZXNoX2xvY2FsVG87CiAgICAgIGNvbnN0IHdvcmxkSW50ZXJzZWN0UG9pbnQgPSBpbnRlcnNlY3RUcmltZXNoX3dvcmxkSW50ZXJzZWN0UG9pbnQ7CiAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gaW50ZXJzZWN0VHJpbWVzaF93b3JsZE5vcm1hbDsgLy8gQ2hlY2tpbmcgZmFjZXMKCiAgICAgIGNvbnN0IGluZGljZXMgPSBtZXNoLmluZGljZXM7CiAgICAgIG1lc2gudmVydGljZXM7IC8vIGNvbnN0IG5vcm1hbHMgPSBtZXNoLmZhY2VOb3JtYWxzCgogICAgICBjb25zdCBmcm9tID0gdGhpcy5mcm9tOwogICAgICBjb25zdCB0byA9IHRoaXMudG87CiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZGlyZWN0aW9uOwogICAgICB0cmVlVHJhbnNmb3JtLnBvc2l0aW9uLmNvcHkocG9zaXRpb24pOwogICAgICB0cmVlVHJhbnNmb3JtLnF1YXRlcm5pb24uY29weShxdWF0KTsgLy8gVHJhbnNmb3JtIHJheSB0byBsb2NhbCBzcGFjZSEKCiAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGRpcmVjdGlvbiwgbG9jYWxEaXJlY3Rpb24pOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUocG9zaXRpb24sIHF1YXQsIGZyb20sIGxvY2FsRnJvbSk7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShwb3NpdGlvbiwgcXVhdCwgdG8sIGxvY2FsVG8pOwogICAgICBsb2NhbFRvLnggKj0gbWVzaC5zY2FsZS54OwogICAgICBsb2NhbFRvLnkgKj0gbWVzaC5zY2FsZS55OwogICAgICBsb2NhbFRvLnogKj0gbWVzaC5zY2FsZS56OwogICAgICBsb2NhbEZyb20ueCAqPSBtZXNoLnNjYWxlLng7CiAgICAgIGxvY2FsRnJvbS55ICo9IG1lc2guc2NhbGUueTsKICAgICAgbG9jYWxGcm9tLnogKj0gbWVzaC5zY2FsZS56OwogICAgICBsb2NhbFRvLnZzdWIobG9jYWxGcm9tLCBsb2NhbERpcmVjdGlvbik7CiAgICAgIGxvY2FsRGlyZWN0aW9uLm5vcm1hbGl6ZSgpOwogICAgICBjb25zdCBmcm9tVG9EaXN0YW5jZVNxdWFyZWQgPSBsb2NhbEZyb20uZGlzdGFuY2VTcXVhcmVkKGxvY2FsVG8pOwogICAgICBtZXNoLnRyZWUucmF5UXVlcnkodGhpcywgdHJlZVRyYW5zZm9ybSwgdHJpYW5nbGVzKTsKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOID0gdHJpYW5nbGVzLmxlbmd0aDsgIXRoaXMucmVzdWx0LnNob3VsZFN0b3AgJiYgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgdHJpYW5nbGVzSW5kZXggPSB0cmlhbmdsZXNbaV07CiAgICAgICAgbWVzaC5nZXROb3JtYWwodHJpYW5nbGVzSW5kZXgsIG5vcm1hbCk7IC8vIGRldGVybWluZSBpZiByYXkgaW50ZXJzZWN0cyB0aGUgcGxhbmUgb2YgdGhlIGZhY2UKICAgICAgICAvLyBub3RlOiB0aGlzIHdvcmtzIHJlZ2FyZGxlc3Mgb2YgdGhlIGRpcmVjdGlvbiBvZiB0aGUgZmFjZSBub3JtYWwKICAgICAgICAvLyBHZXQgcGxhbmUgcG9pbnQgaW4gd29ybGQgY29vcmRpbmF0ZXMuLi4KCiAgICAgICAgbWVzaC5nZXRWZXJ0ZXgoaW5kaWNlc1t0cmlhbmdsZXNJbmRleCAqIDNdLCBhKTsgLy8gLi4uYnV0IG1ha2UgaXQgcmVsYXRpdmUgdG8gdGhlIHJheSBmcm9tLiBXZSdsbCBmaXggdGhpcyBsYXRlci4KCiAgICAgICAgYS52c3ViKGxvY2FsRnJvbSwgdmVjdG9yKTsgLy8gSWYgdGhpcyBkb3QgcHJvZHVjdCBpcyBuZWdhdGl2ZSwgd2UgaGF2ZSBzb21ldGhpbmcgaW50ZXJlc3RpbmcKCiAgICAgICAgY29uc3QgZG90ID0gbG9jYWxEaXJlY3Rpb24uZG90KG5vcm1hbCk7IC8vIEJhaWwgb3V0IGlmIHJheSBhbmQgcGxhbmUgYXJlIHBhcmFsbGVsCiAgICAgICAgLy8gaWYgKE1hdGguYWJzKCBkb3QgKSA8IHRoaXMucHJlY2lzaW9uKXsKICAgICAgICAvLyAgICAgY29udGludWU7CiAgICAgICAgLy8gfQogICAgICAgIC8vIGNhbGMgZGlzdGFuY2UgdG8gcGxhbmUKCiAgICAgICAgY29uc3Qgc2NhbGFyID0gbm9ybWFsLmRvdCh2ZWN0b3IpIC8gZG90OyAvLyBpZiBuZWdhdGl2ZSBkaXN0YW5jZSwgdGhlbiBwbGFuZSBpcyBiZWhpbmQgcmF5CgogICAgICAgIGlmIChzY2FsYXIgPCAwKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IC8vIEludGVyc2VjdGlvbiBwb2ludCBpcyBmcm9tICsgZGlyZWN0aW9uICogc2NhbGFyCgoKICAgICAgICBsb2NhbERpcmVjdGlvbi5zY2FsZShzY2FsYXIsIGludGVyc2VjdFBvaW50KTsKICAgICAgICBpbnRlcnNlY3RQb2ludC52YWRkKGxvY2FsRnJvbSwgaW50ZXJzZWN0UG9pbnQpOyAvLyBHZXQgdHJpYW5nbGUgdmVydGljZXMKCiAgICAgICAgbWVzaC5nZXRWZXJ0ZXgoaW5kaWNlc1t0cmlhbmdsZXNJbmRleCAqIDMgKyAxXSwgYik7CiAgICAgICAgbWVzaC5nZXRWZXJ0ZXgoaW5kaWNlc1t0cmlhbmdsZXNJbmRleCAqIDMgKyAyXSwgYyk7CiAgICAgICAgY29uc3Qgc3F1YXJlZERpc3RhbmNlID0gaW50ZXJzZWN0UG9pbnQuZGlzdGFuY2VTcXVhcmVkKGxvY2FsRnJvbSk7CgogICAgICAgIGlmICghKFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGIsIGEsIGMpIHx8IFJheS5wb2ludEluVHJpYW5nbGUoaW50ZXJzZWN0UG9pbnQsIGEsIGIsIGMpKSB8fCBzcXVhcmVkRGlzdGFuY2UgPiBmcm9tVG9EaXN0YW5jZVNxdWFyZWQpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gLy8gdHJhbnNmb3JtIGludGVyc2VjdHBvaW50IGFuZCBub3JtYWwgdG8gd29ybGQKCgogICAgICAgIFRyYW5zZm9ybS52ZWN0b3JUb1dvcmxkRnJhbWUocXVhdCwgbm9ybWFsLCB3b3JsZE5vcm1hbCk7CiAgICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvc2l0aW9uLCBxdWF0LCBpbnRlcnNlY3RQb2ludCwgd29ybGRJbnRlcnNlY3RQb2ludCk7CiAgICAgICAgdGhpcy5yZXBvcnRJbnRlcnNlY3Rpb24od29ybGROb3JtYWwsIHdvcmxkSW50ZXJzZWN0UG9pbnQsIHJlcG9ydGVkU2hhcGUsIGJvZHksIHRyaWFuZ2xlc0luZGV4KTsKICAgICAgfQoKICAgICAgdHJpYW5nbGVzLmxlbmd0aCA9IDA7CiAgICB9CiAgICAvKioKICAgICAqIEByZXR1cm4gVHJ1ZSBpZiB0aGUgaW50ZXJzZWN0aW9ucyBzaG91bGQgY29udGludWUKICAgICAqLwoKCiAgICByZXBvcnRJbnRlcnNlY3Rpb24obm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgaGl0RmFjZUluZGV4KSB7CiAgICAgIGNvbnN0IGZyb20gPSB0aGlzLmZyb207CiAgICAgIGNvbnN0IHRvID0gdGhpcy50bzsKICAgICAgY29uc3QgZGlzdGFuY2UgPSBmcm9tLmRpc3RhbmNlVG8oaGl0UG9pbnRXb3JsZCk7CiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucmVzdWx0OyAvLyBTa2lwIGJhY2sgZmFjZXM/CgogICAgICBpZiAodGhpcy5za2lwQmFja2ZhY2VzICYmIG5vcm1hbC5kb3QodGhpcy5kaXJlY3Rpb24pID4gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgcmVzdWx0LmhpdEZhY2VJbmRleCA9IHR5cGVvZiBoaXRGYWNlSW5kZXggIT09ICd1bmRlZmluZWQnID8gaGl0RmFjZUluZGV4IDogLTE7CgogICAgICBzd2l0Y2ggKHRoaXMubW9kZSkgewogICAgICAgIGNhc2UgUmF5LkFMTDoKICAgICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgIHJlc3VsdC5zZXQoZnJvbSwgdG8sIG5vcm1hbCwgaGl0UG9pbnRXb3JsZCwgc2hhcGUsIGJvZHksIGRpc3RhbmNlKTsKICAgICAgICAgIHJlc3VsdC5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgdGhpcy5jYWxsYmFjayhyZXN1bHQpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgUmF5LkNMT1NFU1Q6CiAgICAgICAgICAvLyBTdG9yZSBpZiBjbG9zZXIgdGhhbiBjdXJyZW50IGNsb3Nlc3QKICAgICAgICAgIGlmIChkaXN0YW5jZSA8IHJlc3VsdC5kaXN0YW5jZSB8fCAhcmVzdWx0Lmhhc0hpdCkgewogICAgICAgICAgICB0aGlzLmhhc0hpdCA9IHRydWU7CiAgICAgICAgICAgIHJlc3VsdC5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgICByZXN1bHQuc2V0KGZyb20sIHRvLCBub3JtYWwsIGhpdFBvaW50V29ybGQsIHNoYXBlLCBib2R5LCBkaXN0YW5jZSk7CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgUmF5LkFOWToKICAgICAgICAgIC8vIFJlcG9ydCBhbmQgc3RvcC4KICAgICAgICAgIHRoaXMuaGFzSGl0ID0gdHJ1ZTsKICAgICAgICAgIHJlc3VsdC5oYXNIaXQgPSB0cnVlOwogICAgICAgICAgcmVzdWx0LnNldChmcm9tLCB0bywgbm9ybWFsLCBoaXRQb2ludFdvcmxkLCBzaGFwZSwgYm9keSwgZGlzdGFuY2UpOwogICAgICAgICAgcmVzdWx0LnNob3VsZFN0b3AgPSB0cnVlOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQXMgcGVyICJCYXJ5Y2VudHJpYyBUZWNobmlxdWUiIGFzIG5hbWVkCiAgICAgKiB7QGxpbmsgaHR0cHM6Ly93d3cuYmxhY2twYXduLmNvbS90ZXh0cy9wb2ludGlucG9seS9kZWZhdWx0Lmh0bWwgaGVyZX0gYnV0IHdpdGhvdXQgdGhlIGRpdmlzaW9uCiAgICAgKi8KCgogICAgc3RhdGljIHBvaW50SW5UcmlhbmdsZShwLCBhLCBiLCBjKSB7CiAgICAgIGMudnN1YihhLCB2MCk7CiAgICAgIGIudnN1YihhLCB2MSk7CiAgICAgIHAudnN1YihhLCB2Mik7CiAgICAgIGNvbnN0IGRvdDAwID0gdjAuZG90KHYwKTsKICAgICAgY29uc3QgZG90MDEgPSB2MC5kb3QodjEpOwogICAgICBjb25zdCBkb3QwMiA9IHYwLmRvdCh2Mik7CiAgICAgIGNvbnN0IGRvdDExID0gdjEuZG90KHYxKTsKICAgICAgY29uc3QgZG90MTIgPSB2MS5kb3QodjIpOwogICAgICBsZXQgdTsKICAgICAgbGV0IHY7CiAgICAgIHJldHVybiAodSA9IGRvdDExICogZG90MDIgLSBkb3QwMSAqIGRvdDEyKSA+PSAwICYmICh2ID0gZG90MDAgKiBkb3QxMiAtIGRvdDAxICogZG90MDIpID49IDAgJiYgdSArIHYgPCBkb3QwMCAqIGRvdDExIC0gZG90MDEgKiBkb3QwMTsKICAgIH0KCiAgfQogIFJheS5DTE9TRVNUID0gUkFZX01PREVTLkNMT1NFU1Q7CiAgUmF5LkFOWSA9IFJBWV9NT0RFUy5BTlk7CiAgUmF5LkFMTCA9IFJBWV9NT0RFUy5BTEw7CiAgY29uc3QgdG1wQUFCQiQxID0gbmV3IEFBQkIoKTsKICBjb25zdCB0bXBBcnJheSA9IFtdOwogIGNvbnN0IHYxID0gbmV3IFZlYzMoKTsKICBjb25zdCB2MiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Qm9keV94aSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0Qm9keV9xaSA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgY29uc3QgaW50ZXJzZWN0UG9pbnQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGMgPSBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFJheWNhc3RSZXN1bHQoKTsKICBjb25zdCBpbnRlcnNlY3RDb252ZXhPcHRpb25zID0gewogICAgZmFjZUxpc3Q6IFswXQogIH07CiAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdEhlaWdodGZpZWxkX2xvY2FsUmF5ID0gbmV3IFJheSgpOwogIGNvbnN0IGludGVyc2VjdEhlaWdodGZpZWxkX2luZGV4ID0gW107CiAgY29uc3QgUmF5X2ludGVyc2VjdFNwaGVyZV9pbnRlcnNlY3Rpb25Qb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgUmF5X2ludGVyc2VjdFNwaGVyZV9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdENvbnZleF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RDb252ZXhfdmVjdG9yID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3RUcmltZXNoX25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF9sb2NhbERpcmVjdGlvbiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF9sb2NhbEZyb20gPSBuZXcgVmVjMygpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfbG9jYWxUbyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF93b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF93b3JsZEludGVyc2VjdFBvaW50ID0gbmV3IFZlYzMoKTsKICBuZXcgQUFCQigpOwogIGNvbnN0IGludGVyc2VjdFRyaW1lc2hfdHJpYW5nbGVzID0gW107CiAgY29uc3QgaW50ZXJzZWN0VHJpbWVzaF90cmVlVHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybSgpOwogIGNvbnN0IHYwID0gbmV3IFZlYzMoKTsKICBjb25zdCBpbnRlcnNlY3QgPSBuZXcgVmVjMygpOwoKICBmdW5jdGlvbiBkaXN0YW5jZUZyb21JbnRlcnNlY3Rpb24oZnJvbSwgZGlyZWN0aW9uLCBwb3NpdGlvbikgewogICAgLy8gdjAgaXMgdmVjdG9yIGZyb20gZnJvbSB0byBwb3NpdGlvbgogICAgcG9zaXRpb24udnN1Yihmcm9tLCB2MCk7CiAgICBjb25zdCBkb3QgPSB2MC5kb3QoZGlyZWN0aW9uKTsgLy8gaW50ZXJzZWN0ID0gZGlyZWN0aW9uKmRvdCArIGZyb20KCiAgICBkaXJlY3Rpb24uc2NhbGUoZG90LCBpbnRlcnNlY3QpOwogICAgaW50ZXJzZWN0LnZhZGQoZnJvbSwgaW50ZXJzZWN0KTsKICAgIGNvbnN0IGRpc3RhbmNlID0gcG9zaXRpb24uZGlzdGFuY2VUbyhpbnRlcnNlY3QpOwogICAgcmV0dXJuIGRpc3RhbmNlOwogIH0KCiAgLyoqCiAgICogU3dlZXAgYW5kIHBydW5lIGJyb2FkcGhhc2UgYWxvbmcgb25lIGF4aXMuCiAgICovCiAgY2xhc3MgU0FQQnJvYWRwaGFzZSBleHRlbmRzIEJyb2FkcGhhc2UgewogICAgLyoqCiAgICAgKiBMaXN0IG9mIGJvZGllcyBjdXJyZW50bHkgaW4gdGhlIGJyb2FkcGhhc2UuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSB3b3JsZCB0byBzZWFyY2ggaW4uCiAgICAgKi8KCiAgICAvKioKICAgICAqIEF4aXMgdG8gc29ydCB0aGUgYm9kaWVzIGFsb25nLgogICAgICogU2V0IHRvIDAgZm9yIHggYXhpcywgYW5kIDEgZm9yIHkgYXhpcy4KICAgICAqIEZvciBiZXN0IHBlcmZvcm1hbmNlLCBwaWNrIHRoZSBheGlzIHdoZXJlIGJvZGllcyBhcmUgbW9zdCBkaXN0cmlidXRlZC4KICAgICAqLwoKICAgIC8qKgogICAgICogQ2hlY2sgaWYgdGhlIGJvdW5kcyBvZiB0d28gYm9kaWVzIG92ZXJsYXAsIGFsb25nIHRoZSBnaXZlbiBTQVAgYXhpcy4KICAgICAqLwogICAgc3RhdGljIGNoZWNrQm91bmRzKGJpLCBiaiwgYXhpc0luZGV4KSB7CiAgICAgIGxldCBiaVBvczsKICAgICAgbGV0IGJqUG9zOwoKICAgICAgaWYgKGF4aXNJbmRleCA9PT0gMCkgewogICAgICAgIGJpUG9zID0gYmkucG9zaXRpb24ueDsKICAgICAgICBialBvcyA9IGJqLnBvc2l0aW9uLng7CiAgICAgIH0gZWxzZSBpZiAoYXhpc0luZGV4ID09PSAxKSB7CiAgICAgICAgYmlQb3MgPSBiaS5wb3NpdGlvbi55OwogICAgICAgIGJqUG9zID0gYmoucG9zaXRpb24ueTsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDIpIHsKICAgICAgICBiaVBvcyA9IGJpLnBvc2l0aW9uLno7CiAgICAgICAgYmpQb3MgPSBiai5wb3NpdGlvbi56OwogICAgICB9CgogICAgICBjb25zdCByaSA9IGJpLmJvdW5kaW5nUmFkaXVzLAogICAgICAgICAgICByaiA9IGJqLmJvdW5kaW5nUmFkaXVzLAogICAgICAgICAgICBib3VuZEEyID0gYmlQb3MgKyByaSwKICAgICAgICAgICAgYm91bmRCMSA9IGJqUG9zIC0gcmo7CiAgICAgIHJldHVybiBib3VuZEIxIDwgYm91bmRBMjsKICAgIH0gLy8gTm90ZTogdGhlc2UgYXJlIGlkZW50aWNhbCwgc2F2ZSBmb3IgeC95L3ogbG93ZXJib3VuZAoKICAgIC8qKgogICAgICogaW5zZXJ0aW9uU29ydFgKICAgICAqLwoKCiAgICBzdGF0aWMgaW5zZXJ0aW9uU29ydFgoYSkgewogICAgICBmb3IgKGxldCBpID0gMSwgbCA9IGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IGFbaV07CiAgICAgICAgbGV0IGo7CgogICAgICAgIGZvciAoaiA9IGkgLSAxOyBqID49IDA7IGotLSkgewogICAgICAgICAgaWYgKGFbal0uYWFiYi5sb3dlckJvdW5kLnggPD0gdi5hYWJiLmxvd2VyQm91bmQueCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgICBhW2ogKyAxXSA9IGFbal07CiAgICAgICAgfQoKICAgICAgICBhW2ogKyAxXSA9IHY7CiAgICAgIH0KCiAgICAgIHJldHVybiBhOwogICAgfQogICAgLyoqCiAgICAgKiBpbnNlcnRpb25Tb3J0WQogICAgICovCgoKICAgIHN0YXRpYyBpbnNlcnRpb25Tb3J0WShhKSB7CiAgICAgIGZvciAobGV0IGkgPSAxLCBsID0gYS5sZW5ndGg7IGkgPCBsOyBpKyspIHsKICAgICAgICBjb25zdCB2ID0gYVtpXTsKICAgICAgICBsZXQgajsKCiAgICAgICAgZm9yIChqID0gaSAtIDE7IGogPj0gMDsgai0tKSB7CiAgICAgICAgICBpZiAoYVtqXS5hYWJiLmxvd2VyQm91bmQueSA8PSB2LmFhYmIubG93ZXJCb3VuZC55KSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIGFbaiArIDFdID0gYVtqXTsKICAgICAgICB9CgogICAgICAgIGFbaiArIDFdID0gdjsKICAgICAgfQoKICAgICAgcmV0dXJuIGE7CiAgICB9CiAgICAvKioKICAgICAqIGluc2VydGlvblNvcnRaCiAgICAgKi8KCgogICAgc3RhdGljIGluc2VydGlvblNvcnRaKGEpIHsKICAgICAgZm9yIChsZXQgaSA9IDEsIGwgPSBhLmxlbmd0aDsgaSA8IGw7IGkrKykgewogICAgICAgIGNvbnN0IHYgPSBhW2ldOwogICAgICAgIGxldCBqOwoKICAgICAgICBmb3IgKGogPSBpIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICAgIGlmIChhW2pdLmFhYmIubG93ZXJCb3VuZC56IDw9IHYuYWFiYi5sb3dlckJvdW5kLnopIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgICAgYVtqICsgMV0gPSBhW2pdOwogICAgICAgIH0KCiAgICAgICAgYVtqICsgMV0gPSB2OwogICAgICB9CgogICAgICByZXR1cm4gYTsKICAgIH0KCiAgICBjb25zdHJ1Y3Rvcih3b3JsZCkgewogICAgICBzdXBlcigpOwogICAgICB0aGlzLmF4aXNMaXN0ID0gW107CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgICB0aGlzLmF4aXNJbmRleCA9IDA7CiAgICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDsKCiAgICAgIHRoaXMuX2FkZEJvZHlIYW5kbGVyID0gZXZlbnQgPT4gewogICAgICAgIGF4aXNMaXN0LnB1c2goZXZlbnQuYm9keSk7CiAgICAgIH07CgogICAgICB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlciA9IGV2ZW50ID0+IHsKICAgICAgICBjb25zdCBpZHggPSBheGlzTGlzdC5pbmRleE9mKGV2ZW50LmJvZHkpOwoKICAgICAgICBpZiAoaWR4ICE9PSAtMSkgewogICAgICAgICAgYXhpc0xpc3Quc3BsaWNlKGlkeCwgMSk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgaWYgKHdvcmxkKSB7CiAgICAgICAgdGhpcy5zZXRXb3JsZCh3b3JsZCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogQ2hhbmdlIHRoZSB3b3JsZAogICAgICovCgoKICAgIHNldFdvcmxkKHdvcmxkKSB7CiAgICAgIC8vIENsZWFyIHRoZSBvbGQgYXhpcyBhcnJheQogICAgICB0aGlzLmF4aXNMaXN0Lmxlbmd0aCA9IDA7IC8vIEFkZCBhbGwgYm9kaWVzIGZyb20gdGhlIG5ldyB3b3JsZAoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3JsZC5ib2RpZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLmF4aXNMaXN0LnB1c2god29ybGQuYm9kaWVzW2ldKTsKICAgICAgfSAvLyBSZW1vdmUgb2xkIGhhbmRsZXJzLCBpZiBhbnkKCgogICAgICB3b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdhZGRCb2R5JywgdGhpcy5fYWRkQm9keUhhbmRsZXIpOwogICAgICB3b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdyZW1vdmVCb2R5JywgdGhpcy5fcmVtb3ZlQm9keUhhbmRsZXIpOyAvLyBBZGQgaGFuZGxlcnMgdG8gdXBkYXRlIHRoZSBsaXN0IG9mIGJvZGllcy4KCiAgICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ2FkZEJvZHknLCB0aGlzLl9hZGRCb2R5SGFuZGxlcik7CiAgICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3JlbW92ZUJvZHknLCB0aGlzLl9yZW1vdmVCb2R5SGFuZGxlcik7CiAgICAgIHRoaXMud29ybGQgPSB3b3JsZDsKICAgICAgdGhpcy5kaXJ0eSA9IHRydWU7CiAgICB9CiAgICAvKioKICAgICAqIENvbGxlY3QgYWxsIGNvbGxpc2lvbiBwYWlycwogICAgICovCgoKICAgIGNvbGxpc2lvblBhaXJzKHdvcmxkLCBwMSwgcDIpIHsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5heGlzTGlzdDsKICAgICAgY29uc3QgTiA9IGJvZGllcy5sZW5ndGg7CiAgICAgIGNvbnN0IGF4aXNJbmRleCA9IHRoaXMuYXhpc0luZGV4OwogICAgICBsZXQgaTsKICAgICAgbGV0IGo7CgogICAgICBpZiAodGhpcy5kaXJ0eSkgewogICAgICAgIHRoaXMuc29ydExpc3QoKTsKICAgICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7CiAgICAgIH0gLy8gTG9vayB0aHJvdWdoIHRoZSBsaXN0CgoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CgogICAgICAgIGZvciAoaiA9IGkgKyAxOyBqIDwgTjsgaisrKSB7CiAgICAgICAgICBjb25zdCBiaiA9IGJvZGllc1tqXTsKCiAgICAgICAgICBpZiAoIXRoaXMubmVlZEJyb2FkcGhhc2VDb2xsaXNpb24oYmksIGJqKSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIVNBUEJyb2FkcGhhc2UuY2hlY2tCb3VuZHMoYmksIGJqLCBheGlzSW5kZXgpKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICAgIHRoaXMuaW50ZXJzZWN0aW9uVGVzdChiaSwgYmosIHAxLCBwMik7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgc29ydExpc3QoKSB7CiAgICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDsKICAgICAgY29uc3QgYXhpc0luZGV4ID0gdGhpcy5heGlzSW5kZXg7CiAgICAgIGNvbnN0IE4gPSBheGlzTGlzdC5sZW5ndGg7IC8vIFVwZGF0ZSBBQUJCcwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYXhpc0xpc3RbaV07CgogICAgICAgIGlmIChiaS5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIGJpLnVwZGF0ZUFBQkIoKTsKICAgICAgICB9CiAgICAgIH0gLy8gU29ydCB0aGUgbGlzdAoKCiAgICAgIGlmIChheGlzSW5kZXggPT09IDApIHsKICAgICAgICBTQVBCcm9hZHBoYXNlLmluc2VydGlvblNvcnRYKGF4aXNMaXN0KTsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDEpIHsKICAgICAgICBTQVBCcm9hZHBoYXNlLmluc2VydGlvblNvcnRZKGF4aXNMaXN0KTsKICAgICAgfSBlbHNlIGlmIChheGlzSW5kZXggPT09IDIpIHsKICAgICAgICBTQVBCcm9hZHBoYXNlLmluc2VydGlvblNvcnRaKGF4aXNMaXN0KTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyB0aGUgdmFyaWFuY2Ugb2YgdGhlIGJvZHkgcG9zaXRpb25zIGFuZCBlc3RpbWF0ZXMgdGhlIGJlc3QgYXhpcyB0byB1c2UuCiAgICAgKiBXaWxsIGF1dG9tYXRpY2FsbHkgc2V0IHByb3BlcnR5IGBheGlzSW5kZXhgLgogICAgICovCgoKICAgIGF1dG9EZXRlY3RBeGlzKCkgewogICAgICBsZXQgc3VtWCA9IDA7CiAgICAgIGxldCBzdW1YMiA9IDA7CiAgICAgIGxldCBzdW1ZID0gMDsKICAgICAgbGV0IHN1bVkyID0gMDsKICAgICAgbGV0IHN1bVogPSAwOwogICAgICBsZXQgc3VtWjIgPSAwOwogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmF4aXNMaXN0OwogICAgICBjb25zdCBOID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgaW52TiA9IDEgLyBOOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGIgPSBib2RpZXNbaV07CiAgICAgICAgY29uc3QgY2VudGVyWCA9IGIucG9zaXRpb24ueDsKICAgICAgICBzdW1YICs9IGNlbnRlclg7CiAgICAgICAgc3VtWDIgKz0gY2VudGVyWCAqIGNlbnRlclg7CiAgICAgICAgY29uc3QgY2VudGVyWSA9IGIucG9zaXRpb24ueTsKICAgICAgICBzdW1ZICs9IGNlbnRlclk7CiAgICAgICAgc3VtWTIgKz0gY2VudGVyWSAqIGNlbnRlclk7CiAgICAgICAgY29uc3QgY2VudGVyWiA9IGIucG9zaXRpb24uejsKICAgICAgICBzdW1aICs9IGNlbnRlclo7CiAgICAgICAgc3VtWjIgKz0gY2VudGVyWiAqIGNlbnRlclo7CiAgICAgIH0KCiAgICAgIGNvbnN0IHZhcmlhbmNlWCA9IHN1bVgyIC0gc3VtWCAqIHN1bVggKiBpbnZOOwogICAgICBjb25zdCB2YXJpYW5jZVkgPSBzdW1ZMiAtIHN1bVkgKiBzdW1ZICogaW52TjsKICAgICAgY29uc3QgdmFyaWFuY2VaID0gc3VtWjIgLSBzdW1aICogc3VtWiAqIGludk47CgogICAgICBpZiAodmFyaWFuY2VYID4gdmFyaWFuY2VZKSB7CiAgICAgICAgaWYgKHZhcmlhbmNlWCA+IHZhcmlhbmNlWikgewogICAgICAgICAgdGhpcy5heGlzSW5kZXggPSAwOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmF4aXNJbmRleCA9IDI7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHZhcmlhbmNlWSA+IHZhcmlhbmNlWikgewogICAgICAgIHRoaXMuYXhpc0luZGV4ID0gMTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmF4aXNJbmRleCA9IDI7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmV0dXJucyBhbGwgdGhlIGJvZGllcyB3aXRoaW4gYW4gQUFCQi4KICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgcmVzdWx0aW5nIGJvZGllcyBpbi4KICAgICAqLwoKCiAgICBhYWJiUXVlcnkod29ybGQsIGFhYmIsIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIHsKICAgICAgICByZXN1bHQgPSBbXTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZGlydHkpIHsKICAgICAgICB0aGlzLnNvcnRMaXN0KCk7CiAgICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlOwogICAgICB9CgogICAgICBjb25zdCBheGlzSW5kZXggPSB0aGlzLmF4aXNJbmRleDsKICAgICAgbGV0IGF4aXMgPSAneCc7CgogICAgICBpZiAoYXhpc0luZGV4ID09PSAxKSB7CiAgICAgICAgYXhpcyA9ICd5JzsKICAgICAgfQoKICAgICAgaWYgKGF4aXNJbmRleCA9PT0gMikgewogICAgICAgIGF4aXMgPSAneic7CiAgICAgIH0KCiAgICAgIGNvbnN0IGF4aXNMaXN0ID0gdGhpcy5heGlzTGlzdDsKICAgICAgYWFiYi5sb3dlckJvdW5kW2F4aXNdOwogICAgICBhYWJiLnVwcGVyQm91bmRbYXhpc107CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGF4aXNMaXN0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgYiA9IGF4aXNMaXN0W2ldOwoKICAgICAgICBpZiAoYi5hYWJiTmVlZHNVcGRhdGUpIHsKICAgICAgICAgIGIudXBkYXRlQUFCQigpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGIuYWFiYi5vdmVybGFwcyhhYWJiKSkgewogICAgICAgICAgcmVzdWx0LnB1c2goYik7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQoKICB9CgogIGNsYXNzIFV0aWxzIHsKICAgIC8qKgogICAgICogRXh0ZW5kIGFuIG9wdGlvbnMgb2JqZWN0IHdpdGggZGVmYXVsdCB2YWx1ZXMuCiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9ucyBvYmplY3QuIE1heSBiZSBmYWxzeTogaW4gdGhpcyBjYXNlLCBhIG5ldyBvYmplY3QgaXMgY3JlYXRlZCBhbmQgcmV0dXJuZWQuCiAgICAgKiBAcGFyYW0gZGVmYXVsdHMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgZGVmYXVsdCB2YWx1ZXMuCiAgICAgKiBAcmV0dXJuIFRoZSBtb2RpZmllZCBvcHRpb25zIG9iamVjdC4KICAgICAqLwogICAgc3RhdGljIGRlZmF1bHRzKG9wdGlvbnMsIGRlZmF1bHRzKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGtleSBpbiBkZWZhdWx0cykgewogICAgICAgIGlmICghKGtleSBpbiBvcHRpb25zKSkgewogICAgICAgICAgb3B0aW9uc1trZXldID0gZGVmYXVsdHNba2V5XTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBvcHRpb25zOwogICAgfQoKICB9CgogIC8qKgogICAqIENvbnN0cmFpbnQgYmFzZSBjbGFzcwogICAqLwogIGNsYXNzIENvbnN0cmFpbnQgewogICAgLyoqCiAgICAgKiBFcXVhdGlvbnMgdG8gYmUgc29sdmVkIGluIHRoaXMgY29uc3RyYWludC4KICAgICAqLwoKICAgIC8qKgogICAgICogQm9keSBBLgogICAgICovCgogICAgLyoqCiAgICAgKiBCb2R5IEIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNldCB0byBmYWxzZSBpZiB5b3UgZG9uJ3Qgd2FudCB0aGUgYm9kaWVzIHRvIGNvbGxpZGUgd2hlbiB0aGV5IGFyZSBjb25uZWN0ZWQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIGNvbGxpZGVDb25uZWN0ZWQ6IHRydWUsCiAgICAgICAgd2FrZVVwQm9kaWVzOiB0cnVlCiAgICAgIH0pOwogICAgICB0aGlzLmVxdWF0aW9ucyA9IFtdOwogICAgICB0aGlzLmJvZHlBID0gYm9keUE7CiAgICAgIHRoaXMuYm9keUIgPSBib2R5QjsKICAgICAgdGhpcy5pZCA9IENvbnN0cmFpbnQuaWRDb3VudGVyKys7CiAgICAgIHRoaXMuY29sbGlkZUNvbm5lY3RlZCA9IG9wdGlvbnMuY29sbGlkZUNvbm5lY3RlZDsKCiAgICAgIGlmIChvcHRpb25zLndha2VVcEJvZGllcykgewogICAgICAgIGlmIChib2R5QSkgewogICAgICAgICAgYm9keUEud2FrZVVwKCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoYm9keUIpIHsKICAgICAgICAgIGJvZHlCLndha2VVcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgYWxsIHRoZSBlcXVhdGlvbnMgd2l0aCBkYXRhLgogICAgICovCgoKICAgIHVwZGF0ZSgpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdtZXRob2QgdXBkYXRlKCkgbm90IGltcGxtZW1lbnRlZCBpbiB0aGlzIENvbnN0cmFpbnQgc3ViY2xhc3MhJyk7CiAgICB9CiAgICAvKioKICAgICAqIEVuYWJsZXMgYWxsIGVxdWF0aW9ucyBpbiB0aGUgY29uc3RyYWludC4KICAgICAqLwoKCiAgICBlbmFibGUoKSB7CiAgICAgIGNvbnN0IGVxcyA9IHRoaXMuZXF1YXRpb25zOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlcXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBlcXNbaV0uZW5hYmxlZCA9IHRydWU7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogRGlzYWJsZXMgYWxsIGVxdWF0aW9ucyBpbiB0aGUgY29uc3RyYWludC4KICAgICAqLwoKCiAgICBkaXNhYmxlKCkgewogICAgICBjb25zdCBlcXMgPSB0aGlzLmVxdWF0aW9uczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXFzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZXFzW2ldLmVuYWJsZWQgPSBmYWxzZTsKICAgICAgfQogICAgfQoKICB9CiAgQ29uc3RyYWludC5pZENvdW50ZXIgPSAwOwoKICAvKioKICAgKiBBbiBlbGVtZW50IGNvbnRhaW5pbmcgNiBlbnRyaWVzLCAzIHNwYXRpYWwgYW5kIDMgcm90YXRpb25hbCBkZWdyZWVzIG9mIGZyZWVkb20uCiAgICovCgogIGNsYXNzIEphY29iaWFuRWxlbWVudCB7CiAgICAvKioKICAgICAqIHNwYXRpYWwKICAgICAqLwoKICAgIC8qKgogICAgICogcm90YXRpb25hbAogICAgICovCiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgdGhpcy5zcGF0aWFsID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yb3RhdGlvbmFsID0gbmV3IFZlYzMoKTsKICAgIH0KICAgIC8qKgogICAgICogTXVsdGlwbHkgd2l0aCBvdGhlciBKYWNvYmlhbkVsZW1lbnQKICAgICAqLwoKCiAgICBtdWx0aXBseUVsZW1lbnQoZWxlbWVudCkgewogICAgICByZXR1cm4gZWxlbWVudC5zcGF0aWFsLmRvdCh0aGlzLnNwYXRpYWwpICsgZWxlbWVudC5yb3RhdGlvbmFsLmRvdCh0aGlzLnJvdGF0aW9uYWwpOwogICAgfQogICAgLyoqCiAgICAgKiBNdWx0aXBseSB3aXRoIHR3byB2ZWN0b3JzCiAgICAgKi8KCgogICAgbXVsdGlwbHlWZWN0b3JzKHNwYXRpYWwsIHJvdGF0aW9uYWwpIHsKICAgICAgcmV0dXJuIHNwYXRpYWwuZG90KHRoaXMuc3BhdGlhbCkgKyByb3RhdGlvbmFsLmRvdCh0aGlzLnJvdGF0aW9uYWwpOwogICAgfQoKICB9CgogIC8qKgogICAqIEVxdWF0aW9uIGJhc2UgY2xhc3MuCiAgICoKICAgKiBgYWAsIGBiYCBhbmQgYGVwc2AgYXJlIHtAbGluayBodHRwczovL3d3dzguY3MudW11LnNlL2t1cnNlci81RFYwNTgvVlQxNS9sZWN0dXJlcy9TUE9PS2xhYm5vdGVzLnBkZiBTUE9PS30gcGFyYW1ldGVycyB0aGF0IGRlZmF1bHQgdG8gYDAuMGAuIFNlZSB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL3NjaHRlcHBlL2Nhbm5vbi5qcy9pc3N1ZXMvMjM4I2lzc3VlY29tbWVudC0xNDcxNzIzMjcgdGhpcyBleGNoYW5nZX0gZm9yIG1vcmUgZGV0YWlscyBvbiBDYW5ub24ncyBwaHlzaWNzIGltcGxlbWVudGF0aW9uLgogICAqLwogIGNsYXNzIEVxdWF0aW9uIHsKICAgIC8qKgogICAgICogTWluaW11bSAocmVhZDogbmVnYXRpdmUgbWF4KSBmb3JjZSB0byBiZSBhcHBsaWVkIGJ5IHRoZSBjb25zdHJhaW50LgogICAgICovCgogICAgLyoqCiAgICAgKiBNYXhpbXVtIChyZWFkOiBwb3NpdGl2ZSBtYXgpIGZvcmNlIHRvIGJlIGFwcGxpZWQgYnkgdGhlIGNvbnN0cmFpbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNQT09LIHBhcmFtZXRlcgogICAgICovCgogICAgLyoqCiAgICAgKiBTUE9PSyBwYXJhbWV0ZXIKICAgICAqLwoKICAgIC8qKgogICAgICogU1BPT0sgcGFyYW1ldGVyCiAgICAgKi8KCiAgICAvKioKICAgICAqIEEgbnVtYmVyLCBwcm9wb3J0aW9uYWwgdG8gdGhlIGZvcmNlIGFkZGVkIHRvIHRoZSBib2RpZXMuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJpLCBiaiwgbWluRm9yY2UsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtaW5Gb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWluRm9yY2UgPSAtMWU2OwogICAgICB9CgogICAgICBpZiAobWF4Rm9yY2UgPT09IHZvaWQgMCkgewogICAgICAgIG1heEZvcmNlID0gMWU2OwogICAgICB9CgogICAgICB0aGlzLmlkID0gRXF1YXRpb24uaWRDb3VudGVyKys7CiAgICAgIHRoaXMubWluRm9yY2UgPSBtaW5Gb3JjZTsKICAgICAgdGhpcy5tYXhGb3JjZSA9IG1heEZvcmNlOwogICAgICB0aGlzLmJpID0gYmk7CiAgICAgIHRoaXMuYmogPSBiajsKICAgICAgdGhpcy5hID0gMC4wOyAvLyBTUE9PSyBwYXJhbWV0ZXIKCiAgICAgIHRoaXMuYiA9IDAuMDsgLy8gU1BPT0sgcGFyYW1ldGVyCgogICAgICB0aGlzLmVwcyA9IDAuMDsgLy8gU1BPT0sgcGFyYW1ldGVyCgogICAgICB0aGlzLmphY29iaWFuRWxlbWVudEEgPSBuZXcgSmFjb2JpYW5FbGVtZW50KCk7CiAgICAgIHRoaXMuamFjb2JpYW5FbGVtZW50QiA9IG5ldyBKYWNvYmlhbkVsZW1lbnQoKTsKICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTsKICAgICAgdGhpcy5tdWx0aXBsaWVyID0gMDsKICAgICAgdGhpcy5zZXRTcG9va1BhcmFtcygxZTcsIDQsIDEgLyA2MCk7IC8vIFNldCB0eXBpY2FsIHNwb29rIHBhcmFtcwogICAgfQogICAgLyoqCiAgICAgKiBSZWNhbGN1bGF0ZXMgYSwgYiwgYW5kIGVwcy4KICAgICAqCiAgICAgKiBUaGUgRXF1YXRpb24gY29uc3RydWN0b3Igc2V0cyB0eXBpY2FsIFNQT09LIHBhcmFtZXRlcnMgYXMgc3VjaDoKICAgICAqICogYHN0aWZmbmVzc2AgPSAxZTcKICAgICAqICogYHJlbGF4YXRpb25gID0gNAogICAgICogKiBgdGltZVN0ZXBgPSAxIC8gNjAsIF9ub3RlIHRoZSBoYXJkY29kZWQgcmVmcmVzaCByYXRlLl8KICAgICAqLwoKCiAgICBzZXRTcG9va1BhcmFtcyhzdGlmZm5lc3MsIHJlbGF4YXRpb24sIHRpbWVTdGVwKSB7CiAgICAgIGNvbnN0IGQgPSByZWxheGF0aW9uOwogICAgICBjb25zdCBrID0gc3RpZmZuZXNzOwogICAgICBjb25zdCBoID0gdGltZVN0ZXA7CiAgICAgIHRoaXMuYSA9IDQuMCAvIChoICogKDEgKyA0ICogZCkpOwogICAgICB0aGlzLmIgPSA0LjAgKiBkIC8gKDEgKyA0ICogZCk7CiAgICAgIHRoaXMuZXBzID0gNC4wIC8gKGggKiBoICogayAqICgxICsgNCAqIGQpKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgdGhlIHJpZ2h0IGhhbmQgc2lkZSBvZiB0aGUgU1BPT0sgZXF1YXRpb24KICAgICAqLwoKCiAgICBjb21wdXRlQihhLCBiLCBoKSB7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR3EgPSB0aGlzLmNvbXB1dGVHcSgpOwogICAgICBjb25zdCBHaU1mID0gdGhpcy5jb21wdXRlR2lNZigpOwogICAgICByZXR1cm4gLUdxICogYSAtIEdXICogYiAtIEdpTWYgKiBoOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKnEsIHdoZXJlIHEgYXJlIHRoZSBnZW5lcmFsaXplZCBib2R5IGNvb3JkaW5hdGVzCiAgICAgKi8KCgogICAgY29tcHV0ZUdxKCkgewogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IGJpID0gdGhpcy5iaTsKICAgICAgY29uc3QgYmogPSB0aGlzLmJqOwogICAgICBjb25zdCB4aSA9IGJpLnBvc2l0aW9uOwogICAgICBjb25zdCB4aiA9IGJqLnBvc2l0aW9uOwogICAgICByZXR1cm4gR0Euc3BhdGlhbC5kb3QoeGkpICsgR0Iuc3BhdGlhbC5kb3QoeGopOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlcyBHKlcsIHdoZXJlIFcgYXJlIHRoZSBib2R5IHZlbG9jaXRpZXMKICAgICAqLwoKCiAgICBjb21wdXRlR1coKSB7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHZpID0gYmkudmVsb2NpdHk7CiAgICAgIGNvbnN0IHZqID0gYmoudmVsb2NpdHk7CiAgICAgIGNvbnN0IHdpID0gYmkuYW5ndWxhclZlbG9jaXR5OwogICAgICBjb25zdCB3aiA9IGJqLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgcmV0dXJuIEdBLm11bHRpcGx5VmVjdG9ycyh2aSwgd2kpICsgR0IubXVsdGlwbHlWZWN0b3JzKHZqLCB3aik7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGVzIEcqV2xhbWJkYSwgd2hlcmUgVyBhcmUgdGhlIGJvZHkgdmVsb2NpdGllcwogICAgICovCgoKICAgIGNvbXB1dGVHV2xhbWJkYSgpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgdmkgPSBiaS52bGFtYmRhOwogICAgICBjb25zdCB2aiA9IGJqLnZsYW1iZGE7CiAgICAgIGNvbnN0IHdpID0gYmkud2xhbWJkYTsKICAgICAgY29uc3Qgd2ogPSBiai53bGFtYmRhOwogICAgICByZXR1cm4gR0EubXVsdGlwbHlWZWN0b3JzKHZpLCB3aSkgKyBHQi5tdWx0aXBseVZlY3RvcnModmosIHdqKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgRyppbnYoTSkqZiwgd2hlcmUgTSBpcyB0aGUgbWFzcyBtYXRyaXggd2l0aCBkaWFnb25hbCBibG9ja3MgZm9yIGVhY2ggYm9keSwgYW5kIGYgYXJlIHRoZSBmb3JjZXMgb24gdGhlIGJvZGllcy4KICAgICAqLwoKCiAgICBjb21wdXRlR2lNZigpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgZmkgPSBiaS5mb3JjZTsKICAgICAgY29uc3QgdGkgPSBiaS50b3JxdWU7CiAgICAgIGNvbnN0IGZqID0gYmouZm9yY2U7CiAgICAgIGNvbnN0IHRqID0gYmoudG9ycXVlOwogICAgICBjb25zdCBpbnZNYXNzaSA9IGJpLmludk1hc3NTb2x2ZTsKICAgICAgY29uc3QgaW52TWFzc2ogPSBiai5pbnZNYXNzU29sdmU7CiAgICAgIGZpLnNjYWxlKGludk1hc3NpLCBpTWZpKTsKICAgICAgZmouc2NhbGUoaW52TWFzc2osIGlNZmopOwogICAgICBiaS5pbnZJbmVydGlhV29ybGRTb2x2ZS52bXVsdCh0aSwgaW52SWlfdm11bHRfdGF1aSk7CiAgICAgIGJqLmludkluZXJ0aWFXb3JsZFNvbHZlLnZtdWx0KHRqLCBpbnZJal92bXVsdF90YXVqKTsKICAgICAgcmV0dXJuIEdBLm11bHRpcGx5VmVjdG9ycyhpTWZpLCBpbnZJaV92bXVsdF90YXVpKSArIEdCLm11bHRpcGx5VmVjdG9ycyhpTWZqLCBpbnZJal92bXVsdF90YXVqKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZXMgRyppbnYoTSkqRycKICAgICAqLwoKCiAgICBjb21wdXRlR2lNR3QoKSB7CiAgICAgIGNvbnN0IEdBID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRBOwogICAgICBjb25zdCBHQiA9IHRoaXMuamFjb2JpYW5FbGVtZW50QjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IGludk1hc3NpID0gYmkuaW52TWFzc1NvbHZlOwogICAgICBjb25zdCBpbnZNYXNzaiA9IGJqLmludk1hc3NTb2x2ZTsKICAgICAgY29uc3QgaW52SWkgPSBiaS5pbnZJbmVydGlhV29ybGRTb2x2ZTsKICAgICAgY29uc3QgaW52SWogPSBiai5pbnZJbmVydGlhV29ybGRTb2x2ZTsKICAgICAgbGV0IHJlc3VsdCA9IGludk1hc3NpICsgaW52TWFzc2o7CiAgICAgIGludklpLnZtdWx0KEdBLnJvdGF0aW9uYWwsIHRtcCk7CiAgICAgIHJlc3VsdCArPSB0bXAuZG90KEdBLnJvdGF0aW9uYWwpOwogICAgICBpbnZJai52bXVsdChHQi5yb3RhdGlvbmFsLCB0bXApOwogICAgICByZXN1bHQgKz0gdG1wLmRvdChHQi5yb3RhdGlvbmFsKTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGNvbnN0cmFpbnQgdmVsb2NpdHkgdG8gdGhlIGJvZGllcy4KICAgICAqLwoKCiAgICBhZGRUb1dsYW1iZGEoZGVsdGFsYW1iZGEpIHsKICAgICAgY29uc3QgR0EgPSB0aGlzLmphY29iaWFuRWxlbWVudEE7CiAgICAgIGNvbnN0IEdCID0gdGhpcy5qYWNvYmlhbkVsZW1lbnRCOwogICAgICBjb25zdCBiaSA9IHRoaXMuYmk7CiAgICAgIGNvbnN0IGJqID0gdGhpcy5iajsKICAgICAgY29uc3QgdGVtcCA9IGFkZFRvV2xhbWJkYV90ZW1wOyAvLyBBZGQgdG8gbGluZWFyIHZlbG9jaXR5CiAgICAgIC8vIHZfbGFtYmRhICs9IGludihNKSAqIGRlbHRhX2xhbWJhICogRwoKICAgICAgYmkudmxhbWJkYS5hZGRTY2FsZWRWZWN0b3IoYmkuaW52TWFzc1NvbHZlICogZGVsdGFsYW1iZGEsIEdBLnNwYXRpYWwsIGJpLnZsYW1iZGEpOwogICAgICBiai52bGFtYmRhLmFkZFNjYWxlZFZlY3Rvcihiai5pbnZNYXNzU29sdmUgKiBkZWx0YWxhbWJkYSwgR0Iuc3BhdGlhbCwgYmoudmxhbWJkYSk7IC8vIEFkZCB0byBhbmd1bGFyIHZlbG9jaXR5CgogICAgICBiaS5pbnZJbmVydGlhV29ybGRTb2x2ZS52bXVsdChHQS5yb3RhdGlvbmFsLCB0ZW1wKTsKICAgICAgYmkud2xhbWJkYS5hZGRTY2FsZWRWZWN0b3IoZGVsdGFsYW1iZGEsIHRlbXAsIGJpLndsYW1iZGEpOwogICAgICBiai5pbnZJbmVydGlhV29ybGRTb2x2ZS52bXVsdChHQi5yb3RhdGlvbmFsLCB0ZW1wKTsKICAgICAgYmoud2xhbWJkYS5hZGRTY2FsZWRWZWN0b3IoZGVsdGFsYW1iZGEsIHRlbXAsIGJqLndsYW1iZGEpOwogICAgfQogICAgLyoqCiAgICAgKiBDb21wdXRlIHRoZSBkZW5vbWluYXRvciBwYXJ0IG9mIHRoZSBTUE9PSyBlcXVhdGlvbjogQyA9IEcqaW52KE0pKkcnICsgZXBzCiAgICAgKi8KCgogICAgY29tcHV0ZUMoKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbXB1dGVHaU1HdCgpICsgdGhpcy5lcHM7CiAgICB9CgogIH0KICBFcXVhdGlvbi5pZENvdW50ZXIgPSAwOwogIGNvbnN0IGlNZmkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGlNZmogPSBuZXcgVmVjMygpOwogIGNvbnN0IGludklpX3ZtdWx0X3RhdWkgPSBuZXcgVmVjMygpOwogIGNvbnN0IGludklqX3ZtdWx0X3RhdWogPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYWRkVG9XbGFtYmRhX3RlbXAgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBDb250YWN0L25vbi1wZW5ldHJhdGlvbiBjb25zdHJhaW50IGVxdWF0aW9uCiAgICovCiAgY2xhc3MgQ29udGFjdEVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiAiYm91bmNpbmVzcyI6IHUxID0gLWUqdTAKICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQtb3JpZW50ZWQgdmVjdG9yIHRoYXQgZ29lcyBmcm9tIHRoZSBjZW50ZXIgb2YgYmkgdG8gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFdvcmxkLW9yaWVudGVkIHZlY3RvciB0aGF0IHN0YXJ0cyBpbiBib2R5IGogcG9zaXRpb24gYW5kIGdvZXMgdG8gdGhlIGNvbnRhY3QgcG9pbnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbnRhY3Qgbm9ybWFsLCBwb2ludGluZyBvdXQgb2YgYm9keSBpLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgMCwgbWF4Rm9yY2UpOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gMC4wOwogICAgICB0aGlzLnJpID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5yaiA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMubmkgPSBuZXcgVmVjMygpOwogICAgfQoKICAgIGNvbXB1dGVCKGgpIHsKICAgICAgY29uc3QgYSA9IHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgY29uc3QgYmkgPSB0aGlzLmJpOwogICAgICBjb25zdCBiaiA9IHRoaXMuYmo7CiAgICAgIGNvbnN0IHJpID0gdGhpcy5yaTsKICAgICAgY29uc3QgcmogPSB0aGlzLnJqOwogICAgICBjb25zdCByaXhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxOwogICAgICBjb25zdCByanhuID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyOwogICAgICBjb25zdCB2aSA9IGJpLnZlbG9jaXR5OwogICAgICBjb25zdCB3aSA9IGJpLmFuZ3VsYXJWZWxvY2l0eTsKICAgICAgYmkuZm9yY2U7CiAgICAgIGJpLnRvcnF1ZTsKICAgICAgY29uc3QgdmogPSBiai52ZWxvY2l0eTsKICAgICAgY29uc3Qgd2ogPSBiai5hbmd1bGFyVmVsb2NpdHk7CiAgICAgIGJqLmZvcmNlOwogICAgICBiai50b3JxdWU7CiAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIGNvbnN0IG4gPSB0aGlzLm5pOyAvLyBDYWx1Y2xhdGUgY3Jvc3MgcHJvZHVjdHMKCiAgICAgIHJpLmNyb3NzKG4sIHJpeG4pOwogICAgICByai5jcm9zcyhuLCByanhuKTsgLy8gZyA9IHhqK3JqIC0oeGkrcmkpCiAgICAgIC8vIEcgPSBbIC1uaSAgLXJpeG4gIG5pICByanhuIF0KCiAgICAgIG4ubmVnYXRlKEdBLnNwYXRpYWwpOwogICAgICByaXhuLm5lZ2F0ZShHQS5yb3RhdGlvbmFsKTsKICAgICAgR0Iuc3BhdGlhbC5jb3B5KG4pOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkocmp4bik7IC8vIENhbGN1bGF0ZSB0aGUgcGVuZXRyYXRpb24gdmVjdG9yCgogICAgICBwZW5ldHJhdGlvblZlYy5jb3B5KGJqLnBvc2l0aW9uKTsKICAgICAgcGVuZXRyYXRpb25WZWMudmFkZChyaiwgcGVuZXRyYXRpb25WZWMpOwogICAgICBwZW5ldHJhdGlvblZlYy52c3ViKGJpLnBvc2l0aW9uLCBwZW5ldHJhdGlvblZlYyk7CiAgICAgIHBlbmV0cmF0aW9uVmVjLnZzdWIocmksIHBlbmV0cmF0aW9uVmVjKTsKICAgICAgY29uc3QgZyA9IG4uZG90KHBlbmV0cmF0aW9uVmVjKTsgLy8gQ29tcHV0ZSBpdGVyYXRpb24KCiAgICAgIGNvbnN0IGVQbHVzT25lID0gdGhpcy5yZXN0aXR1dGlvbiArIDE7CiAgICAgIGNvbnN0IEdXID0gZVBsdXNPbmUgKiB2ai5kb3QobikgLSBlUGx1c09uZSAqIHZpLmRvdChuKSArIHdqLmRvdChyanhuKSAtIHdpLmRvdChyaXhuKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBjdXJyZW50IHJlbGF0aXZlIHZlbG9jaXR5IGluIHRoZSBjb250YWN0IHBvaW50LgogICAgICovCgoKICAgIGdldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWwoKSB7CiAgICAgIGNvbnN0IHZpID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmk7CiAgICAgIGNvbnN0IHZqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmo7CiAgICAgIGNvbnN0IHhpID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGk7CiAgICAgIGNvbnN0IHhqID0gQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfeGo7CiAgICAgIGNvbnN0IHJlbFZlbCA9IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3JlbFZlbDsKICAgICAgdGhpcy5iaS5wb3NpdGlvbi52YWRkKHRoaXMucmksIHhpKTsKICAgICAgdGhpcy5iai5wb3NpdGlvbi52YWRkKHRoaXMucmosIHhqKTsKICAgICAgdGhpcy5iaS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludCh4aSwgdmkpOwogICAgICB0aGlzLmJqLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHhqLCB2aik7CiAgICAgIHZpLnZzdWIodmosIHJlbFZlbCk7CiAgICAgIHJldHVybiB0aGlzLm5pLmRvdChyZWxWZWwpOwogICAgfQoKICB9CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxID0gbmV3IFZlYzMoKTsgLy8gVGVtcCB2ZWN0b3JzCgogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9jb21wdXRlQl90ZW1wMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2NvbXB1dGVCX3RlbXAzID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF92aSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfdmogPSBuZXcgVmVjMygpOwogIGNvbnN0IENvbnRhY3RFcXVhdGlvbl9nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsX3hpID0gbmV3IFZlYzMoKTsKICBjb25zdCBDb250YWN0RXF1YXRpb25fZ2V0SW1wYWN0VmVsb2NpdHlBbG9uZ05vcm1hbF94aiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgQ29udGFjdEVxdWF0aW9uX2dldEltcGFjdFZlbG9jaXR5QWxvbmdOb3JtYWxfcmVsVmVsID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogQ29ubmVjdHMgdHdvIGJvZGllcyBhdCBnaXZlbiBvZmZzZXQgcG9pbnRzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IGJvZHlBID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pCiAgICogICAgIGNvbnN0IGJvZHlCID0gbmV3IEJvZHkoeyBtYXNzOiAxIH0pCiAgICogICAgIGJvZHlBLnBvc2l0aW9uLnNldCgtMSwgMCwgMCkKICAgKiAgICAgYm9keUIucG9zaXRpb24uc2V0KDEsIDAsIDApCiAgICogICAgIGJvZHlBLmFkZFNoYXBlKHNoYXBlQSkKICAgKiAgICAgYm9keUIuYWRkU2hhcGUoc2hhcGVCKQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlBKQogICAqICAgICB3b3JsZC5hZGRCb2R5KGJvZHlCKQogICAqICAgICBjb25zdCBsb2NhbFBpdm90QSA9IG5ldyBWZWMzKDEsIDAsIDApCiAgICogICAgIGNvbnN0IGxvY2FsUGl2b3RCID0gbmV3IFZlYzMoLTEsIDAsIDApCiAgICogICAgIGNvbnN0IGNvbnN0cmFpbnQgPSBuZXcgUG9pbnRUb1BvaW50Q29uc3RyYWludChib2R5QSwgbG9jYWxQaXZvdEEsIGJvZHlCLCBsb2NhbFBpdm90QikKICAgKiAgICAgd29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50KQogICAqLwogIGNsYXNzIFBvaW50VG9Qb2ludENvbnN0cmFpbnQgZXh0ZW5kcyBDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogUGl2b3QsIGRlZmluZWQgbG9jYWxseSBpbiBib2R5QS4KICAgICAqLwoKICAgIC8qKgogICAgICogUGl2b3QsIGRlZmluZWQgbG9jYWxseSBpbiBib2R5Qi4KICAgICAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHBpdm90QSBUaGUgcG9pbnQgcmVsYXRpdmUgdG8gdGhlIGNlbnRlciBvZiBtYXNzIG9mIGJvZHlBIHdoaWNoIGJvZHlBIGlzIGNvbnN0cmFpbmVkIHRvLgogICAgICogQHBhcmFtIGJvZHlCIEJvZHkgdGhhdCB3aWxsIGJlIGNvbnN0cmFpbmVkIGluIGEgc2ltaWxhciB3YXkgdG8gdGhlIHNhbWUgcG9pbnQgYXMgYm9keUEuIFdlIHdpbGwgdGhlcmVmb3JlIGdldCBhIGxpbmsgYmV0d2VlbiBib2R5QSBhbmQgYm9keUIuIElmIG5vdCBzcGVjaWZpZWQsIGJvZHlBIHdpbGwgYmUgY29uc3RyYWluZWQgdG8gYSBzdGF0aWMgcG9pbnQuCiAgICAgKiBAcGFyYW0gcGl2b3RCIFRoZSBwb2ludCByZWxhdGl2ZSB0byB0aGUgY2VudGVyIG9mIG1hc3Mgb2YgYm9keUIgd2hpY2ggYm9keUIgaXMgY29uc3RyYWluZWQgdG8uCiAgICAgKiBAcGFyYW0gbWF4Rm9yY2UgVGhlIG1heGltdW0gZm9yY2UgdGhhdCBzaG91bGQgYmUgYXBwbGllZCB0byBjb25zdHJhaW4gdGhlIGJvZGllcy4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIHBpdm90QSwgYm9keUIsIHBpdm90QiwgbWF4Rm9yY2UpIHsKICAgICAgaWYgKHBpdm90QSA9PT0gdm9pZCAwKSB7CiAgICAgICAgcGl2b3RBID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKHBpdm90QiA9PT0gdm9pZCAwKSB7CiAgICAgICAgcGl2b3RCID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgaWYgKG1heEZvcmNlID09PSB2b2lkIDApIHsKICAgICAgICBtYXhGb3JjZSA9IDFlNjsKICAgICAgfQoKICAgICAgc3VwZXIoYm9keUEsIGJvZHlCKTsKICAgICAgdGhpcy5waXZvdEEgPSBwaXZvdEEuY2xvbmUoKTsKICAgICAgdGhpcy5waXZvdEIgPSBwaXZvdEIuY2xvbmUoKTsKICAgICAgY29uc3QgeCA9IHRoaXMuZXF1YXRpb25YID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpOwogICAgICBjb25zdCB5ID0gdGhpcy5lcXVhdGlvblkgPSBuZXcgQ29udGFjdEVxdWF0aW9uKGJvZHlBLCBib2R5Qik7CiAgICAgIGNvbnN0IHogPSB0aGlzLmVxdWF0aW9uWiA9IG5ldyBDb250YWN0RXF1YXRpb24oYm9keUEsIGJvZHlCKTsgLy8gRXF1YXRpb25zIHRvIGJlIGZlZCB0byB0aGUgc29sdmVyCgogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKHgsIHksIHopOyAvLyBNYWtlIHRoZSBlcXVhdGlvbnMgYmlkaXJlY3Rpb25hbAoKICAgICAgeC5taW5Gb3JjZSA9IHkubWluRm9yY2UgPSB6Lm1pbkZvcmNlID0gLW1heEZvcmNlOwogICAgICB4Lm1heEZvcmNlID0geS5tYXhGb3JjZSA9IHoubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgICAgeC5uaS5zZXQoMSwgMCwgMCk7CiAgICAgIHkubmkuc2V0KDAsIDEsIDApOwogICAgICB6Lm5pLnNldCgwLCAwLCAxKTsKICAgIH0KCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IGJvZHlBID0gdGhpcy5ib2R5QTsKICAgICAgY29uc3QgYm9keUIgPSB0aGlzLmJvZHlCOwogICAgICBjb25zdCB4ID0gdGhpcy5lcXVhdGlvblg7CiAgICAgIGNvbnN0IHkgPSB0aGlzLmVxdWF0aW9uWTsKICAgICAgY29uc3QgeiA9IHRoaXMuZXF1YXRpb25aOyAvLyBSb3RhdGUgdGhlIHBpdm90cyB0byB3b3JsZCBzcGFjZQoKICAgICAgYm9keUEucXVhdGVybmlvbi52bXVsdCh0aGlzLnBpdm90QSwgeC5yaSk7CiAgICAgIGJvZHlCLnF1YXRlcm5pb24udm11bHQodGhpcy5waXZvdEIsIHgucmopOwogICAgICB5LnJpLmNvcHkoeC5yaSk7CiAgICAgIHkucmouY29weSh4LnJqKTsKICAgICAgei5yaS5jb3B5KHgucmkpOwogICAgICB6LnJqLmNvcHkoeC5yaik7CiAgICB9CgogIH0KCiAgLyoqCiAgICogQ29uZSBlcXVhdGlvbi4gV29ya3MgdG8ga2VlcCB0aGUgZ2l2ZW4gYm9keSB3b3JsZCB2ZWN0b3JzIGFsaWduZWQsIG9yIHRpbHRlZCB3aXRoaW4gYSBnaXZlbiBhbmdsZSBmcm9tIGVhY2ggb3RoZXIuCiAgICovCiAgY2xhc3MgQ29uZUVxdWF0aW9uIGV4dGVuZHMgRXF1YXRpb24gewogICAgLyoqCiAgICAgKiBMb2NhbCBheGlzIGluIEEKICAgICAqLwoKICAgIC8qKgogICAgICogTG9jYWwgYXhpcyBpbiBCCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSAiY29uZSBhbmdsZSIgdG8ga2VlcAogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OwogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1tYXhGb3JjZSwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKDAsIDEsIDApOwogICAgICB0aGlzLmFuZ2xlID0gdHlwZW9mIG9wdGlvbnMuYW5nbGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5hbmdsZSA6IDA7CiAgICB9CgogICAgY29tcHV0ZUIoaCkgewogICAgICBjb25zdCBhID0gdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICBjb25zdCBuaSA9IHRoaXMuYXhpc0E7CiAgICAgIGNvbnN0IG5qID0gdGhpcy5heGlzQjsKICAgICAgY29uc3Qgbml4bmogPSB0bXBWZWMxJDI7CiAgICAgIGNvbnN0IG5qeG5pID0gdG1wVmVjMiQyOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0cwoKICAgICAgbmkuY3Jvc3MobmosIG5peG5qKTsKICAgICAgbmouY3Jvc3MobmksIG5qeG5pKTsgLy8gVGhlIGFuZ2xlIGJldHdlZW4gdHdvIHZlY3RvciBpczoKICAgICAgLy8gY29zKHRoZXRhKSA9IGEgKiBiIC8gKGxlbmd0aChhKSAqIGxlbmd0aChiKSA9IHsgbGVuKGEpID0gbGVuKGIpID0gMSB9ID0gYSAqIGIKICAgICAgLy8gZyA9IGEgKiBiCiAgICAgIC8vIGdkb3QgPSAoYiB4IGEpICogd2kgKyAoYSB4IGIpICogd2oKICAgICAgLy8gRyA9IFswIGJ4YSAwIGF4Yl0KICAgICAgLy8gVyA9IFt2aSB3aSB2aiB3al0KCiAgICAgIEdBLnJvdGF0aW9uYWwuY29weShuanhuaSk7CiAgICAgIEdCLnJvdGF0aW9uYWwuY29weShuaXhuaik7CiAgICAgIGNvbnN0IGcgPSBNYXRoLmNvcyh0aGlzLmFuZ2xlKSAtIG5pLmRvdChuaik7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1nICogYSAtIEdXICogYiAtIGggKiBHaU1mOwogICAgICByZXR1cm4gQjsKICAgIH0KCiAgfQogIGNvbnN0IHRtcFZlYzEkMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdG1wVmVjMiQyID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogUm90YXRpb25hbCBjb25zdHJhaW50LiBXb3JrcyB0byBrZWVwIHRoZSBsb2NhbCB2ZWN0b3JzIG9ydGhvZ29uYWwgdG8gZWFjaCBvdGhlciBpbiB3b3JsZCBzcGFjZS4KICAgKi8KICBjbGFzcyBSb3RhdGlvbmFsRXF1YXRpb24gZXh0ZW5kcyBFcXVhdGlvbiB7CiAgICAvKioKICAgICAqIFdvcmxkIG9yaWVudGVkIHJvdGF0aW9uYWwgYXhpcy4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgb3JpZW50ZWQgcm90YXRpb25hbCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBtYXhBbmdsZQogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OwogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1tYXhGb3JjZSwgbWF4Rm9yY2UpOwogICAgICB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKDAsIDEsIDApOwogICAgICB0aGlzLm1heEFuZ2xlID0gTWF0aC5QSSAvIDI7CiAgICB9CgogICAgY29tcHV0ZUIoaCkgewogICAgICBjb25zdCBhID0gdGhpcy5hOwogICAgICBjb25zdCBiID0gdGhpcy5iOwogICAgICBjb25zdCBuaSA9IHRoaXMuYXhpc0E7CiAgICAgIGNvbnN0IG5qID0gdGhpcy5heGlzQjsKICAgICAgY29uc3Qgbml4bmogPSB0bXBWZWMxJDE7CiAgICAgIGNvbnN0IG5qeG5pID0gdG1wVmVjMiQxOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIENhbHVjbGF0ZSBjcm9zcyBwcm9kdWN0cwoKICAgICAgbmkuY3Jvc3MobmosIG5peG5qKTsKICAgICAgbmouY3Jvc3MobmksIG5qeG5pKTsgLy8gZyA9IG5pICogbmoKICAgICAgLy8gZ2RvdCA9IChuaiB4IG5pKSAqIHdpICsgKG5pIHggbmopICogd2oKICAgICAgLy8gRyA9IFswIG5qeG5pIDAgbml4bmpdCiAgICAgIC8vIFcgPSBbdmkgd2kgdmogd2pdCgogICAgICBHQS5yb3RhdGlvbmFsLmNvcHkobmp4bmkpOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkobml4bmopOwogICAgICBjb25zdCBnID0gTWF0aC5jb3ModGhpcy5tYXhBbmdsZSkgLSBuaS5kb3QobmopOwogICAgICBjb25zdCBHVyA9IHRoaXMuY29tcHV0ZUdXKCk7CiAgICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7CiAgICAgIGNvbnN0IEIgPSAtZyAqIGEgLSBHVyAqIGIgLSBoICogR2lNZjsKICAgICAgcmV0dXJuIEI7CiAgICB9CgogIH0KICBjb25zdCB0bXBWZWMxJDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzIkMSA9IG5ldyBWZWMzKCk7CgogIC8qKgogICAqIEEgQ29uZSBUd2lzdCBjb25zdHJhaW50LCB1c2VmdWwgZm9yIHJhZ2RvbGxzLgogICAqLwogIGNsYXNzIENvbmVUd2lzdENvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogVGhlIGF4aXMgZGlyZWN0aW9uIGZvciB0aGUgY29uc3RyYWludCBvZiB0aGUgYm9keSBBLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgYXhpcyBkaXJlY3Rpb24gZm9yIHRoZSBjb25zdHJhaW50IG9mIHRoZSBib2R5IEIuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBhcGVydHVyZSBhbmdsZSBvZiB0aGUgY29uZS4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIHR3aXN0IGFuZ2xlIG9mIHRoZSBqb2ludC4KICAgICAqLwogICAgY29uc3RydWN0b3IoYm9keUEsIGJvZHlCLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGNvbnN0IG1heEZvcmNlID0gdHlwZW9mIG9wdGlvbnMubWF4Rm9yY2UgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5tYXhGb3JjZSA6IDFlNjsgLy8gU2V0IHBpdm90IHBvaW50IGluIGJldHdlZW4KCiAgICAgIGNvbnN0IHBpdm90QSA9IG9wdGlvbnMucGl2b3RBID8gb3B0aW9ucy5waXZvdEEuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBpdm90QiA9IG9wdGlvbnMucGl2b3RCID8gb3B0aW9ucy5waXZvdEIuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsKICAgICAgdGhpcy5heGlzQSA9IG9wdGlvbnMuYXhpc0EgPyBvcHRpb25zLmF4aXNBLmNsb25lKCkgOiBuZXcgVmVjMygpOwogICAgICB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMuY29sbGlkZUNvbm5lY3RlZCA9ICEhb3B0aW9ucy5jb2xsaWRlQ29ubmVjdGVkOwogICAgICB0aGlzLmFuZ2xlID0gdHlwZW9mIG9wdGlvbnMuYW5nbGUgIT09ICd1bmRlZmluZWQnID8gb3B0aW9ucy5hbmdsZSA6IDA7CiAgICAgIGNvbnN0IGMgPSB0aGlzLmNvbmVFcXVhdGlvbiA9IG5ldyBDb25lRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgY29uc3QgdCA9IHRoaXMudHdpc3RFcXVhdGlvbiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgdGhpcy50d2lzdEFuZ2xlID0gdHlwZW9mIG9wdGlvbnMudHdpc3RBbmdsZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnR3aXN0QW5nbGUgOiAwOyAvLyBNYWtlIHRoZSBjb25lIGVxdWF0aW9uIHB1c2ggdGhlIGJvZGllcyB0b3dhcmQgdGhlIGNvbmUgYXhpcywgbm90IG91dHdhcmQKCiAgICAgIGMubWF4Rm9yY2UgPSAwOwogICAgICBjLm1pbkZvcmNlID0gLW1heEZvcmNlOyAvLyBNYWtlIHRoZSB0d2lzdCBlcXVhdGlvbiBhZGQgdG9ycXVlIHRvd2FyZCB0aGUgaW5pdGlhbCBwb3NpdGlvbgoKICAgICAgdC5tYXhGb3JjZSA9IDA7CiAgICAgIHQubWluRm9yY2UgPSAtbWF4Rm9yY2U7CiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2goYywgdCk7CiAgICB9CgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgY29uZSA9IHRoaXMuY29uZUVxdWF0aW9uOwogICAgICBjb25zdCB0d2lzdCA9IHRoaXMudHdpc3RFcXVhdGlvbjsKICAgICAgc3VwZXIudXBkYXRlKCk7IC8vIFVwZGF0ZSB0aGUgYXhlcyB0byB0aGUgY29uZSBjb25zdHJhaW50CgogICAgICBib2R5QS52ZWN0b3JUb1dvcmxkRnJhbWUodGhpcy5heGlzQSwgY29uZS5heGlzQSk7CiAgICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0aGlzLmF4aXNCLCBjb25lLmF4aXNCKTsgLy8gVXBkYXRlIHRoZSB3b3JsZCBheGVzIGluIHRoZSB0d2lzdCBjb25zdHJhaW50CgogICAgICB0aGlzLmF4aXNBLnRhbmdlbnRzKHR3aXN0LmF4aXNBLCB0d2lzdC5heGlzQSk7CiAgICAgIGJvZHlBLnZlY3RvclRvV29ybGRGcmFtZSh0d2lzdC5heGlzQSwgdHdpc3QuYXhpc0EpOwogICAgICB0aGlzLmF4aXNCLnRhbmdlbnRzKHR3aXN0LmF4aXNCLCB0d2lzdC5heGlzQik7CiAgICAgIGJvZHlCLnZlY3RvclRvV29ybGRGcmFtZSh0d2lzdC5heGlzQiwgdHdpc3QuYXhpc0IpOwogICAgICBjb25lLmFuZ2xlID0gdGhpcy5hbmdsZTsKICAgICAgdHdpc3QubWF4QW5nbGUgPSB0aGlzLnR3aXN0QW5nbGU7CiAgICB9CgogIH0KICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CgogIC8qKgogICAqIENvbnN0cmFpbnMgdHdvIGJvZGllcyB0byBiZSBhdCBhIGNvbnN0YW50IGRpc3RhbmNlIGZyb20gZWFjaCBvdGhlcnMgY2VudGVyIG9mIG1hc3MuCiAgICovCiAgY2xhc3MgRGlzdGFuY2VDb25zdHJhaW50IGV4dGVuZHMgQ29uc3RyYWludCB7CiAgICAvKioKICAgICAqIFRoZSBkaXN0YW5jZSB0byBrZWVwLiBJZiB1bmRlZmluZWQsIGl0IHdpbGwgYmUgc2V0IHRvIHRoZSBjdXJyZW50IGRpc3RhbmNlIGJldHdlZW4gYm9keUEgYW5kIGJvZHlCCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBkaXN0YW5jZSBUaGUgZGlzdGFuY2UgdG8ga2VlcC4gSWYgdW5kZWZpbmVkLCBpdCB3aWxsIGJlIHNldCB0byB0aGUgY3VycmVudCBkaXN0YW5jZSBiZXR3ZWVuIGJvZHlBIGFuZCBib2R5Qi4KICAgICAqIEBwYXJhbSBtYXhGb3JjZSBUaGUgbWF4aW11bSBmb3JjZSB0aGF0IHNob3VsZCBiZSBhcHBsaWVkIHRvIGNvbnN0cmFpbiB0aGUgYm9kaWVzLgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIGRpc3RhbmNlLCBtYXhGb3JjZSkgewogICAgICBpZiAobWF4Rm9yY2UgPT09IHZvaWQgMCkgewogICAgICAgIG1heEZvcmNlID0gMWU2OwogICAgICB9CgogICAgICBzdXBlcihib2R5QSwgYm9keUIpOwoKICAgICAgaWYgKHR5cGVvZiBkaXN0YW5jZSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBkaXN0YW5jZSA9IGJvZHlBLnBvc2l0aW9uLmRpc3RhbmNlVG8oYm9keUIucG9zaXRpb24pOwogICAgICB9CgogICAgICB0aGlzLmRpc3RhbmNlID0gZGlzdGFuY2U7CiAgICAgIGNvbnN0IGVxID0gdGhpcy5kaXN0YW5jZUVxdWF0aW9uID0gbmV3IENvbnRhY3RFcXVhdGlvbihib2R5QSwgYm9keUIpOwogICAgICB0aGlzLmVxdWF0aW9ucy5wdXNoKGVxKTsgLy8gTWFrZSBpdCBiaWRpcmVjdGlvbmFsCgogICAgICBlcS5taW5Gb3JjZSA9IC1tYXhGb3JjZTsKICAgICAgZXEubWF4Rm9yY2UgPSBtYXhGb3JjZTsKICAgIH0KICAgIC8qKgogICAgICogdXBkYXRlCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgZXEgPSB0aGlzLmRpc3RhbmNlRXF1YXRpb247CiAgICAgIGNvbnN0IGhhbGZEaXN0ID0gdGhpcy5kaXN0YW5jZSAqIDAuNTsKICAgICAgY29uc3Qgbm9ybWFsID0gZXEubmk7CiAgICAgIGJvZHlCLnBvc2l0aW9uLnZzdWIoYm9keUEucG9zaXRpb24sIG5vcm1hbCk7CiAgICAgIG5vcm1hbC5ub3JtYWxpemUoKTsKICAgICAgbm9ybWFsLnNjYWxlKGhhbGZEaXN0LCBlcS5yaSk7CiAgICAgIG5vcm1hbC5zY2FsZSgtaGFsZkRpc3QsIGVxLnJqKTsKICAgIH0KCiAgfQoKICAvKioKICAgKiBMb2NrIGNvbnN0cmFpbnQuIFdpbGwgcmVtb3ZlIGFsbCBkZWdyZWVzIG9mIGZyZWVkb20gYmV0d2VlbiB0aGUgYm9kaWVzLgogICAqLwogIGNsYXNzIExvY2tDb25zdHJhaW50IGV4dGVuZHMgUG9pbnRUb1BvaW50Q29uc3RyYWludCB7CiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgY29uc3QgbWF4Rm9yY2UgPSB0eXBlb2Ygb3B0aW9ucy5tYXhGb3JjZSAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLm1heEZvcmNlIDogMWU2OyAvLyBTZXQgcGl2b3QgcG9pbnQgaW4gYmV0d2VlbgoKICAgICAgY29uc3QgcGl2b3RBID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgcGl2b3RCID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgaGFsZldheSA9IG5ldyBWZWMzKCk7CiAgICAgIGJvZHlBLnBvc2l0aW9uLnZhZGQoYm9keUIucG9zaXRpb24sIGhhbGZXYXkpOwogICAgICBoYWxmV2F5LnNjYWxlKDAuNSwgaGFsZldheSk7CiAgICAgIGJvZHlCLnBvaW50VG9Mb2NhbEZyYW1lKGhhbGZXYXksIHBpdm90Qik7CiAgICAgIGJvZHlBLnBvaW50VG9Mb2NhbEZyYW1lKGhhbGZXYXksIHBpdm90QSk7IC8vIFRoZSBwb2ludC10by1wb2ludCBjb25zdHJhaW50IHdpbGwga2VlcCBhIHBvaW50IHNoYXJlZCBiZXR3ZWVuIHRoZSBib2RpZXMKCiAgICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsgLy8gU3RvcmUgaW5pdGlhbCByb3RhdGlvbiBvZiB0aGUgYm9kaWVzIGFzIHVuaXQgdmVjdG9ycyBpbiB0aGUgbG9jYWwgYm9keSBzcGFjZXMKCiAgICAgIHRoaXMueEEgPSBib2R5QS52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1gpOwogICAgICB0aGlzLnhCID0gYm9keUIudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9YKTsKICAgICAgdGhpcy55QSA9IGJvZHlBLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWSk7CiAgICAgIHRoaXMueUIgPSBib2R5Qi52ZWN0b3JUb0xvY2FsRnJhbWUoVmVjMy5VTklUX1kpOwogICAgICB0aGlzLnpBID0gYm9keUEudmVjdG9yVG9Mb2NhbEZyYW1lKFZlYzMuVU5JVF9aKTsKICAgICAgdGhpcy56QiA9IGJvZHlCLnZlY3RvclRvTG9jYWxGcmFtZShWZWMzLlVOSVRfWik7IC8vIC4uLmFuZCB0aGUgZm9sbG93aW5nIHJvdGF0aW9uYWwgZXF1YXRpb25zIHdpbGwga2VlcCBhbGwgcm90YXRpb25hbCBET0YncyBpbiBwbGFjZQoKICAgICAgY29uc3QgcjEgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjEgPSBuZXcgUm90YXRpb25hbEVxdWF0aW9uKGJvZHlBLCBib2R5Qiwgb3B0aW9ucyk7CiAgICAgIGNvbnN0IHIyID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24yID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCByMyA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMyA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChyMSwgcjIsIHIzKTsKICAgIH0KICAgIC8qKgogICAgICogdXBkYXRlCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uOwogICAgICBjb25zdCByMSA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMTsKICAgICAgY29uc3QgcjIgPSB0aGlzLnJvdGF0aW9uYWxFcXVhdGlvbjI7CiAgICAgIGNvbnN0IHIzID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24zOwogICAgICBzdXBlci51cGRhdGUoKTsgLy8gVGhlc2UgdmVjdG9yIHBhaXJzIG11c3QgYmUgb3J0aG9nb25hbAoKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueEEsIHIxLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueUIsIHIxLmF4aXNCKTsKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueUEsIHIyLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuekIsIHIyLmF4aXNCKTsKICAgICAgYm9keUEudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMuekEsIHIzLmF4aXNBKTsKICAgICAgYm9keUIudmVjdG9yVG9Xb3JsZEZyYW1lKHRoaXMueEIsIHIzLmF4aXNCKTsKICAgIH0KCiAgfQogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogUm90YXRpb25hbCBtb3RvciBjb25zdHJhaW50LiBUcmllcyB0byBrZWVwIHRoZSByZWxhdGl2ZSBhbmd1bGFyIHZlbG9jaXR5IG9mIHRoZSBib2RpZXMgdG8gYSBnaXZlbiB2YWx1ZS4KICAgKi8KICBjbGFzcyBSb3RhdGlvbmFsTW90b3JFcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8qKgogICAgICogV29ybGQgb3JpZW50ZWQgcm90YXRpb25hbCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBXb3JsZCBvcmllbnRlZCByb3RhdGlvbmFsIGF4aXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE1vdG9yIHZlbG9jaXR5LgogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG1heEZvcmNlKSB7CiAgICAgIGlmIChtYXhGb3JjZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4Rm9yY2UgPSAxZTY7CiAgICAgIH0KCiAgICAgIHN1cGVyKGJvZHlBLCBib2R5QiwgLW1heEZvcmNlLCBtYXhGb3JjZSk7CiAgICAgIHRoaXMuYXhpc0EgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLmF4aXNCID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy50YXJnZXRWZWxvY2l0eSA9IDA7CiAgICB9CgogICAgY29tcHV0ZUIoaCkgewogICAgICB0aGlzLmE7CiAgICAgIGNvbnN0IGIgPSB0aGlzLmI7CiAgICAgIHRoaXMuYmk7CiAgICAgIHRoaXMuYmo7CiAgICAgIGNvbnN0IGF4aXNBID0gdGhpcy5heGlzQTsKICAgICAgY29uc3QgYXhpc0IgPSB0aGlzLmF4aXNCOwogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7IC8vIGcgPSAwCiAgICAgIC8vIGdkb3QgPSBheGlzQSAqIHdpIC0gYXhpc0IgKiB3agogICAgICAvLyBnZG90ID0gRyAqIFcgPSBHICogW3ZpIHdpIHZqIHdqXQogICAgICAvLyA9PgogICAgICAvLyBHID0gWzAgYXhpc0EgMCAtYXhpc0JdCgogICAgICBHQS5yb3RhdGlvbmFsLmNvcHkoYXhpc0EpOwogICAgICBheGlzQi5uZWdhdGUoR0Iucm90YXRpb25hbCk7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKSAtIHRoaXMudGFyZ2V0VmVsb2NpdHk7CiAgICAgIGNvbnN0IEdpTWYgPSB0aGlzLmNvbXB1dGVHaU1mKCk7CiAgICAgIGNvbnN0IEIgPSAtR1cgKiBiIC0gaCAqIEdpTWY7CiAgICAgIHJldHVybiBCOwogICAgfQoKICB9CgogIC8qKgogICAqIEhpbmdlIGNvbnN0cmFpbnQuIFRoaW5rIG9mIGl0IGFzIGEgZG9vciBoaW5nZS4gSXQgdHJpZXMgdG8ga2VlcCB0aGUgZG9vciBpbiB0aGUgY29ycmVjdCBwbGFjZSBhbmQgd2l0aCB0aGUgY29ycmVjdCBvcmllbnRhdGlvbi4KICAgKi8KICBjbGFzcyBIaW5nZUNvbnN0cmFpbnQgZXh0ZW5kcyBQb2ludFRvUG9pbnRDb25zdHJhaW50IHsKICAgIC8qKgogICAgICogUm90YXRpb24gYXhpcywgZGVmaW5lZCBsb2NhbGx5IGluIGJvZHlBLgogICAgICovCgogICAgLyoqCiAgICAgKiBSb3RhdGlvbiBheGlzLCBkZWZpbmVkIGxvY2FsbHkgaW4gYm9keUIuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGJvZHlBLCBib2R5Qiwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBtYXhGb3JjZSA9IHR5cGVvZiBvcHRpb25zLm1heEZvcmNlICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4Rm9yY2UgOiAxZTY7CiAgICAgIGNvbnN0IHBpdm90QSA9IG9wdGlvbnMucGl2b3RBID8gb3B0aW9ucy5waXZvdEEuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBpdm90QiA9IG9wdGlvbnMucGl2b3RCID8gb3B0aW9ucy5waXZvdEIuY2xvbmUoKSA6IG5ldyBWZWMzKCk7CiAgICAgIHN1cGVyKGJvZHlBLCBwaXZvdEEsIGJvZHlCLCBwaXZvdEIsIG1heEZvcmNlKTsKICAgICAgY29uc3QgYXhpc0EgPSB0aGlzLmF4aXNBID0gb3B0aW9ucy5heGlzQSA/IG9wdGlvbnMuYXhpc0EuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICBheGlzQS5ub3JtYWxpemUoKTsKICAgICAgY29uc3QgYXhpc0IgPSB0aGlzLmF4aXNCID0gb3B0aW9ucy5heGlzQiA/IG9wdGlvbnMuYXhpc0IuY2xvbmUoKSA6IG5ldyBWZWMzKDEsIDAsIDApOwogICAgICBheGlzQi5ub3JtYWxpemUoKTsKICAgICAgdGhpcy5jb2xsaWRlQ29ubmVjdGVkID0gISFvcHRpb25zLmNvbGxpZGVDb25uZWN0ZWQ7CiAgICAgIGNvbnN0IHJvdGF0aW9uYWwxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xID0gbmV3IFJvdGF0aW9uYWxFcXVhdGlvbihib2R5QSwgYm9keUIsIG9wdGlvbnMpOwogICAgICBjb25zdCByb3RhdGlvbmFsMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMiA9IG5ldyBSb3RhdGlvbmFsRXF1YXRpb24oYm9keUEsIGJvZHlCLCBvcHRpb25zKTsKICAgICAgY29uc3QgbW90b3IgPSB0aGlzLm1vdG9yRXF1YXRpb24gPSBuZXcgUm90YXRpb25hbE1vdG9yRXF1YXRpb24oYm9keUEsIGJvZHlCLCBtYXhGb3JjZSk7CiAgICAgIG1vdG9yLmVuYWJsZWQgPSBmYWxzZTsgLy8gTm90IGVuYWJsZWQgYnkgZGVmYXVsdAogICAgICAvLyBFcXVhdGlvbnMgdG8gYmUgZmVkIHRvIHRoZSBzb2x2ZXIKCiAgICAgIHRoaXMuZXF1YXRpb25zLnB1c2gocm90YXRpb25hbDEsIHJvdGF0aW9uYWwyLCBtb3Rvcik7CiAgICB9CiAgICAvKioKICAgICAqIGVuYWJsZU1vdG9yCiAgICAgKi8KCgogICAgZW5hYmxlTW90b3IoKSB7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi5lbmFibGVkID0gdHJ1ZTsKICAgIH0KICAgIC8qKgogICAgICogZGlzYWJsZU1vdG9yCiAgICAgKi8KCgogICAgZGlzYWJsZU1vdG9yKCkgewogICAgICB0aGlzLm1vdG9yRXF1YXRpb24uZW5hYmxlZCA9IGZhbHNlOwogICAgfQogICAgLyoqCiAgICAgKiBzZXRNb3RvclNwZWVkCiAgICAgKi8KCgogICAgc2V0TW90b3JTcGVlZChzcGVlZCkgewogICAgICB0aGlzLm1vdG9yRXF1YXRpb24udGFyZ2V0VmVsb2NpdHkgPSBzcGVlZDsKICAgIH0KICAgIC8qKgogICAgICogc2V0TW90b3JNYXhGb3JjZQogICAgICovCgoKICAgIHNldE1vdG9yTWF4Rm9yY2UobWF4Rm9yY2UpIHsKICAgICAgdGhpcy5tb3RvckVxdWF0aW9uLm1heEZvcmNlID0gbWF4Rm9yY2U7CiAgICAgIHRoaXMubW90b3JFcXVhdGlvbi5taW5Gb3JjZSA9IC1tYXhGb3JjZTsKICAgIH0KICAgIC8qKgogICAgICogdXBkYXRlCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBib2R5QSA9IHRoaXMuYm9keUE7CiAgICAgIGNvbnN0IGJvZHlCID0gdGhpcy5ib2R5QjsKICAgICAgY29uc3QgbW90b3IgPSB0aGlzLm1vdG9yRXF1YXRpb247CiAgICAgIGNvbnN0IHIxID0gdGhpcy5yb3RhdGlvbmFsRXF1YXRpb24xOwogICAgICBjb25zdCByMiA9IHRoaXMucm90YXRpb25hbEVxdWF0aW9uMjsKICAgICAgY29uc3Qgd29ybGRBeGlzQSA9IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMTsKICAgICAgY29uc3Qgd29ybGRBeGlzQiA9IEhpbmdlQ29uc3RyYWludF91cGRhdGVfdG1wVmVjMjsKICAgICAgY29uc3QgYXhpc0EgPSB0aGlzLmF4aXNBOwogICAgICBjb25zdCBheGlzQiA9IHRoaXMuYXhpc0I7CiAgICAgIHN1cGVyLnVwZGF0ZSgpOyAvLyBHZXQgd29ybGQgYXhlcwoKICAgICAgYm9keUEucXVhdGVybmlvbi52bXVsdChheGlzQSwgd29ybGRBeGlzQSk7CiAgICAgIGJvZHlCLnF1YXRlcm5pb24udm11bHQoYXhpc0IsIHdvcmxkQXhpc0IpOwogICAgICB3b3JsZEF4aXNBLnRhbmdlbnRzKHIxLmF4aXNBLCByMi5heGlzQSk7CiAgICAgIHIxLmF4aXNCLmNvcHkod29ybGRBeGlzQik7CiAgICAgIHIyLmF4aXNCLmNvcHkod29ybGRBeGlzQik7CgogICAgICBpZiAodGhpcy5tb3RvckVxdWF0aW9uLmVuYWJsZWQpIHsKICAgICAgICBib2R5QS5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMuYXhpc0EsIG1vdG9yLmF4aXNBKTsKICAgICAgICBib2R5Qi5xdWF0ZXJuaW9uLnZtdWx0KHRoaXMuYXhpc0IsIG1vdG9yLmF4aXNCKTsKICAgICAgfQogICAgfQoKICB9CiAgY29uc3QgSGluZ2VDb25zdHJhaW50X3VwZGF0ZV90bXBWZWMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBIaW5nZUNvbnN0cmFpbnRfdXBkYXRlX3RtcFZlYzIgPSBuZXcgVmVjMygpOwoKICAvKioKICAgKiBDb25zdHJhaW5zIHRoZSBzbGlwcGluZyBpbiBhIGNvbnRhY3QgYWxvbmcgYSB0YW5nZW50CiAgICovCiAgY2xhc3MgRnJpY3Rpb25FcXVhdGlvbiBleHRlbmRzIEVxdWF0aW9uIHsKICAgIC8vIFRhbmdlbnQKCiAgICAvKioKICAgICAqIEBwYXJhbSBzbGlwRm9yY2Ugc2hvdWxkIGJlICstRl9mcmljdGlvbiA9ICstbXUgKiBGX25vcm1hbCA9ICstbXUgKiBtICogZwogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIHNsaXBGb3JjZSkgewogICAgICBzdXBlcihib2R5QSwgYm9keUIsIC1zbGlwRm9yY2UsIHNsaXBGb3JjZSk7CiAgICAgIHRoaXMucmkgPSBuZXcgVmVjMygpOwogICAgICB0aGlzLnJqID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy50ID0gbmV3IFZlYzMoKTsKICAgIH0KCiAgICBjb21wdXRlQihoKSB7CiAgICAgIHRoaXMuYTsKICAgICAgY29uc3QgYiA9IHRoaXMuYjsKICAgICAgdGhpcy5iaTsKICAgICAgdGhpcy5iajsKICAgICAgY29uc3QgcmkgPSB0aGlzLnJpOwogICAgICBjb25zdCByaiA9IHRoaXMucmo7CiAgICAgIGNvbnN0IHJpeHQgPSBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxOwogICAgICBjb25zdCByanh0ID0gRnJpY3Rpb25FcXVhdGlvbl9jb21wdXRlQl90ZW1wMjsKICAgICAgY29uc3QgdCA9IHRoaXMudDsgLy8gQ2FsdWNsYXRlIGNyb3NzIHByb2R1Y3RzCgogICAgICByaS5jcm9zcyh0LCByaXh0KTsKICAgICAgcmouY3Jvc3ModCwgcmp4dCk7IC8vIEcgPSBbLXQgLXJpeHQgdCByanh0XQogICAgICAvLyBBbmQgcmVtZW1iZXIsIHRoaXMgaXMgYSBwdXJlIHZlbG9jaXR5IGNvbnN0cmFpbnQsIGcgaXMgYWx3YXlzIHplcm8hCgogICAgICBjb25zdCBHQSA9IHRoaXMuamFjb2JpYW5FbGVtZW50QTsKICAgICAgY29uc3QgR0IgPSB0aGlzLmphY29iaWFuRWxlbWVudEI7CiAgICAgIHQubmVnYXRlKEdBLnNwYXRpYWwpOwogICAgICByaXh0Lm5lZ2F0ZShHQS5yb3RhdGlvbmFsKTsKICAgICAgR0Iuc3BhdGlhbC5jb3B5KHQpOwogICAgICBHQi5yb3RhdGlvbmFsLmNvcHkocmp4dCk7CiAgICAgIGNvbnN0IEdXID0gdGhpcy5jb21wdXRlR1coKTsKICAgICAgY29uc3QgR2lNZiA9IHRoaXMuY29tcHV0ZUdpTWYoKTsKICAgICAgY29uc3QgQiA9IC1HVyAqIGIgLSBoICogR2lNZjsKICAgICAgcmV0dXJuIEI7CiAgICB9CgogIH0KICBjb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBGcmljdGlvbkVxdWF0aW9uX2NvbXB1dGVCX3RlbXAyID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogRGVmaW5lcyB3aGF0IGhhcHBlbnMgd2hlbiB0d28gbWF0ZXJpYWxzIG1lZXQuCiAgICogQHRvZG8gUmVmYWN0b3IgbWF0ZXJpYWxzIHRvIG1hdGVyaWFsQSBhbmQgbWF0ZXJpYWxCCiAgICovCiAgY2xhc3MgQ29udGFjdE1hdGVyaWFsIHsKICAgIC8qKgogICAgICogSWRlbnRpZmllciBvZiB0aGlzIG1hdGVyaWFsLgogICAgICovCgogICAgLyoqCiAgICAgKiBQYXJ0aWNpcGF0aW5nIG1hdGVyaWFscy4KICAgICAqLwoKICAgIC8qKgogICAgICogRnJpY3Rpb24gY29lZmZpY2llbnQuCiAgICAgKiBAZGVmYXVsdCAwLjMKICAgICAqLwoKICAgIC8qKgogICAgICogUmVzdGl0dXRpb24gY29lZmZpY2llbnQuCiAgICAgKiBAZGVmYXVsdCAwLjMKICAgICAqLwoKICAgIC8qKgogICAgICogU3RpZmZuZXNzIG9mIHRoZSBwcm9kdWNlZCBjb250YWN0IGVxdWF0aW9ucy4KICAgICAqIEBkZWZhdWx0IDFlNwogICAgICovCgogICAgLyoqCiAgICAgKiBSZWxheGF0aW9uIHRpbWUgb2YgdGhlIHByb2R1Y2VkIGNvbnRhY3QgZXF1YXRpb25zLgogICAgICogQGRlZmF1bHQgMwogICAgICovCgogICAgLyoqCiAgICAgKiBTdGlmZm5lc3Mgb2YgdGhlIHByb2R1Y2VkIGZyaWN0aW9uIGVxdWF0aW9ucy4KICAgICAqIEBkZWZhdWx0IDFlNwogICAgICovCgogICAgLyoqCiAgICAgKiBSZWxheGF0aW9uIHRpbWUgb2YgdGhlIHByb2R1Y2VkIGZyaWN0aW9uIGVxdWF0aW9ucwogICAgICogQGRlZmF1bHQgMwogICAgICovCiAgICBjb25zdHJ1Y3RvcihtMSwgbTIsIG9wdGlvbnMpIHsKICAgICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHsKICAgICAgICBmcmljdGlvbjogMC4zLAogICAgICAgIHJlc3RpdHV0aW9uOiAwLjMsCiAgICAgICAgY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzOiAxZTcsCiAgICAgICAgY29udGFjdEVxdWF0aW9uUmVsYXhhdGlvbjogMywKICAgICAgICBmcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzOiAxZTcsCiAgICAgICAgZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb246IDMKICAgICAgfSk7CiAgICAgIHRoaXMuaWQgPSBDb250YWN0TWF0ZXJpYWwuaWRDb3VudGVyKys7CiAgICAgIHRoaXMubWF0ZXJpYWxzID0gW20xLCBtMl07CiAgICAgIHRoaXMuZnJpY3Rpb24gPSBvcHRpb25zLmZyaWN0aW9uOwogICAgICB0aGlzLnJlc3RpdHV0aW9uID0gb3B0aW9ucy5yZXN0aXR1dGlvbjsKICAgICAgdGhpcy5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MgPSBvcHRpb25zLmNvbnRhY3RFcXVhdGlvblN0aWZmbmVzczsKICAgICAgdGhpcy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uID0gb3B0aW9ucy5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MgPSBvcHRpb25zLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3M7CiAgICAgIHRoaXMuZnJpY3Rpb25FcXVhdGlvblJlbGF4YXRpb24gPSBvcHRpb25zLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uOwogICAgfQoKICB9CiAgQ29udGFjdE1hdGVyaWFsLmlkQ291bnRlciA9IDA7CgogIC8qKgogICAqIERlZmluZXMgYSBwaHlzaWNzIG1hdGVyaWFsLgogICAqLwogIGNsYXNzIE1hdGVyaWFsIHsKICAgIC8qKgogICAgICogTWF0ZXJpYWwgbmFtZS4KICAgICAqIElmIG9wdGlvbnMgaXMgYSBzdHJpbmcsIG5hbWUgd2lsbCBiZSBzZXQgdG8gdGhhdCBzdHJpbmcuCiAgICAgKiBAdG9kbyBEZXByZWNhdGUgdGhpcwogICAgICovCgogICAgLyoqIE1hdGVyaWFsIGlkLiAqLwoKICAgIC8qKgogICAgICogRnJpY3Rpb24gZm9yIHRoaXMgbWF0ZXJpYWwuCiAgICAgKiBJZiBub24tbmVnYXRpdmUsIGl0IHdpbGwgYmUgdXNlZCBpbnN0ZWFkIG9mIHRoZSBmcmljdGlvbiBnaXZlbiBieSBDb250YWN0TWF0ZXJpYWxzLiBJZiB0aGVyZSdzIG5vIG1hdGNoaW5nIENvbnRhY3RNYXRlcmlhbCwgdGhlIHZhbHVlIGZyb20gYGRlZmF1bHRDb250YWN0TWF0ZXJpYWxgIGluIHRoZSBXb3JsZCB3aWxsIGJlIHVzZWQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFJlc3RpdHV0aW9uIGZvciB0aGlzIG1hdGVyaWFsLgogICAgICogSWYgbm9uLW5lZ2F0aXZlLCBpdCB3aWxsIGJlIHVzZWQgaW5zdGVhZCBvZiB0aGUgcmVzdGl0dXRpb24gZ2l2ZW4gYnkgQ29udGFjdE1hdGVyaWFscy4gSWYgdGhlcmUncyBubyBtYXRjaGluZyBDb250YWN0TWF0ZXJpYWwsIHRoZSB2YWx1ZSBmcm9tIGBkZWZhdWx0Q29udGFjdE1hdGVyaWFsYCBpbiB0aGUgV29ybGQgd2lsbCBiZSB1c2VkLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsKICAgICAgICBvcHRpb25zID0ge307CiAgICAgIH0KCiAgICAgIGxldCBuYW1lID0gJyc7IC8vIEJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IGZpeAoKICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykgewogICAgICAgIC8vY29uc29sZS53YXJuKGBQYXNzaW5nIGEgc3RyaW5nIHRvIE1hdGVyaWFsT3B0aW9ucyBpcyBkZXByZWNhdGVkLCBhbmQgaGFzIG5vIGVmZmVjdGApCiAgICAgICAgbmFtZSA9IG9wdGlvbnM7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgICB0aGlzLmlkID0gTWF0ZXJpYWwuaWRDb3VudGVyKys7CiAgICAgIHRoaXMuZnJpY3Rpb24gPSB0eXBlb2Ygb3B0aW9ucy5mcmljdGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmZyaWN0aW9uIDogLTE7CiAgICAgIHRoaXMucmVzdGl0dXRpb24gPSB0eXBlb2Ygb3B0aW9ucy5yZXN0aXR1dGlvbiAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLnJlc3RpdHV0aW9uIDogLTE7CiAgICB9CgogIH0KICBNYXRlcmlhbC5pZENvdW50ZXIgPSAwOwoKICAvKioKICAgKiBBIHNwcmluZywgY29ubmVjdGluZyB0d28gYm9kaWVzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHNwcmluZyA9IG5ldyBTcHJpbmcoYm94Qm9keSwgc3BoZXJlQm9keSwgewogICAqICAgICAgIHJlc3RMZW5ndGg6IDAsCiAgICogICAgICAgc3RpZmZuZXNzOiA1MCwKICAgKiAgICAgICBkYW1waW5nOiAxLAogICAqICAgICB9KQogICAqCiAgICogICAgIC8vIENvbXB1dGUgdGhlIGZvcmNlIGFmdGVyIGVhY2ggc3RlcAogICAqICAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIChldmVudCkgPT4gewogICAqICAgICAgIHNwcmluZy5hcHBseUZvcmNlKCkKICAgKiAgICAgfSkKICAgKi8KICBjbGFzcyBTcHJpbmcgewogICAgLyoqCiAgICAgKiBSZXN0IGxlbmd0aCBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+IDAuCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIFN0aWZmbmVzcyBvZiB0aGUgc3ByaW5nLiBBIG51bWJlciA+PSAwLgogICAgICogQGRlZmF1bHQgMTAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIERhbXBpbmcgb2YgdGhlIHNwcmluZy4gQSBudW1iZXIgPj0gMC4KICAgICAqIEBkZWZhdWx0IDEKICAgICAqLwoKICAgIC8qKgogICAgICogRmlyc3QgY29ubmVjdGVkIGJvZHkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFNlY29uZCBjb25uZWN0ZWQgYm9keS4KICAgICAqLwoKICAgIC8qKgogICAgICogQW5jaG9yIGZvciBib2R5QSBpbiBsb2NhbCBib2R5QSBjb29yZGluYXRlcy4KICAgICAqIFdoZXJlIHRvIGhvb2sgdGhlIHNwcmluZyB0byBib2R5IEEsIGluIGxvY2FsIGJvZHkgY29vcmRpbmF0ZXMuCiAgICAgKiBAZGVmYXVsdCBuZXcgVmVjMygpCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFuY2hvciBmb3IgYm9keUIgaW4gbG9jYWwgYm9keUIgY29vcmRpbmF0ZXMuCiAgICAgKiBXaGVyZSB0byBob29rIHRoZSBzcHJpbmcgdG8gYm9keSBCLCBpbiBsb2NhbCBib2R5IGNvb3JkaW5hdGVzLgogICAgICogQGRlZmF1bHQgbmV3IFZlYzMoKQogICAgICovCiAgICBjb25zdHJ1Y3Rvcihib2R5QSwgYm9keUIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5yZXN0TGVuZ3RoID0gdHlwZW9mIG9wdGlvbnMucmVzdExlbmd0aCA9PT0gJ251bWJlcicgPyBvcHRpb25zLnJlc3RMZW5ndGggOiAxOwogICAgICB0aGlzLnN0aWZmbmVzcyA9IG9wdGlvbnMuc3RpZmZuZXNzIHx8IDEwMDsKICAgICAgdGhpcy5kYW1waW5nID0gb3B0aW9ucy5kYW1waW5nIHx8IDE7CiAgICAgIHRoaXMuYm9keUEgPSBib2R5QTsKICAgICAgdGhpcy5ib2R5QiA9IGJvZHlCOwogICAgICB0aGlzLmxvY2FsQW5jaG9yQSA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMubG9jYWxBbmNob3JCID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLmxvY2FsQW5jaG9yQSkgewogICAgICAgIHRoaXMubG9jYWxBbmNob3JBLmNvcHkob3B0aW9ucy5sb2NhbEFuY2hvckEpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy5sb2NhbEFuY2hvckIpIHsKICAgICAgICB0aGlzLmxvY2FsQW5jaG9yQi5jb3B5KG9wdGlvbnMubG9jYWxBbmNob3JCKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMud29ybGRBbmNob3JBKSB7CiAgICAgICAgdGhpcy5zZXRXb3JsZEFuY2hvckEob3B0aW9ucy53b3JsZEFuY2hvckEpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy53b3JsZEFuY2hvckIpIHsKICAgICAgICB0aGlzLnNldFdvcmxkQW5jaG9yQihvcHRpb25zLndvcmxkQW5jaG9yQik7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSBhbmNob3IgcG9pbnQgb24gYm9keSBBLCB1c2luZyB3b3JsZCBjb29yZGluYXRlcy4KICAgICAqLwoKCiAgICBzZXRXb3JsZEFuY2hvckEod29ybGRBbmNob3JBKSB7CiAgICAgIHRoaXMuYm9keUEucG9pbnRUb0xvY2FsRnJhbWUod29ybGRBbmNob3JBLCB0aGlzLmxvY2FsQW5jaG9yQSk7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgYW5jaG9yIHBvaW50IG9uIGJvZHkgQiwgdXNpbmcgd29ybGQgY29vcmRpbmF0ZXMuCiAgICAgKi8KCgogICAgc2V0V29ybGRBbmNob3JCKHdvcmxkQW5jaG9yQikgewogICAgICB0aGlzLmJvZHlCLnBvaW50VG9Mb2NhbEZyYW1lKHdvcmxkQW5jaG9yQiwgdGhpcy5sb2NhbEFuY2hvckIpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEEsIGluIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgdmVjdG9yIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgZ2V0V29ybGRBbmNob3JBKHJlc3VsdCkgewogICAgICB0aGlzLmJvZHlBLnBvaW50VG9Xb3JsZEZyYW1lKHRoaXMubG9jYWxBbmNob3JBLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIGFuY2hvciBwb2ludCBvbiBib2R5IEIsIGluIHdvcmxkIGNvb3JkaW5hdGVzLgogICAgICogQHBhcmFtIHJlc3VsdCBUaGUgdmVjdG9yIHRvIHN0b3JlIHRoZSByZXN1bHQgaW4uCiAgICAgKi8KCgogICAgZ2V0V29ybGRBbmNob3JCKHJlc3VsdCkgewogICAgICB0aGlzLmJvZHlCLnBvaW50VG9Xb3JsZEZyYW1lKHRoaXMubG9jYWxBbmNob3JCLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBBcHBseSB0aGUgc3ByaW5nIGZvcmNlIHRvIHRoZSBjb25uZWN0ZWQgYm9kaWVzLgogICAgICovCgoKICAgIGFwcGx5Rm9yY2UoKSB7CiAgICAgIGNvbnN0IGsgPSB0aGlzLnN0aWZmbmVzczsKICAgICAgY29uc3QgZCA9IHRoaXMuZGFtcGluZzsKICAgICAgY29uc3QgbCA9IHRoaXMucmVzdExlbmd0aDsKICAgICAgY29uc3QgYm9keUEgPSB0aGlzLmJvZHlBOwogICAgICBjb25zdCBib2R5QiA9IHRoaXMuYm9keUI7CiAgICAgIGNvbnN0IHIgPSBhcHBseUZvcmNlX3I7CiAgICAgIGNvbnN0IHJfdW5pdCA9IGFwcGx5Rm9yY2Vfcl91bml0OwogICAgICBjb25zdCB1ID0gYXBwbHlGb3JjZV91OwogICAgICBjb25zdCBmID0gYXBwbHlGb3JjZV9mOwogICAgICBjb25zdCB0bXAgPSBhcHBseUZvcmNlX3RtcDsKICAgICAgY29uc3Qgd29ybGRBbmNob3JBID0gYXBwbHlGb3JjZV93b3JsZEFuY2hvckE7CiAgICAgIGNvbnN0IHdvcmxkQW5jaG9yQiA9IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JCOwogICAgICBjb25zdCByaSA9IGFwcGx5Rm9yY2Vfcmk7CiAgICAgIGNvbnN0IHJqID0gYXBwbHlGb3JjZV9yajsKICAgICAgY29uc3QgcmlfeF9mID0gYXBwbHlGb3JjZV9yaV94X2Y7CiAgICAgIGNvbnN0IHJqX3hfZiA9IGFwcGx5Rm9yY2VfcmpfeF9mOyAvLyBHZXQgd29ybGQgYW5jaG9ycwoKICAgICAgdGhpcy5nZXRXb3JsZEFuY2hvckEod29ybGRBbmNob3JBKTsKICAgICAgdGhpcy5nZXRXb3JsZEFuY2hvckIod29ybGRBbmNob3JCKTsgLy8gR2V0IG9mZnNldCBwb2ludHMKCiAgICAgIHdvcmxkQW5jaG9yQS52c3ViKGJvZHlBLnBvc2l0aW9uLCByaSk7CiAgICAgIHdvcmxkQW5jaG9yQi52c3ViKGJvZHlCLnBvc2l0aW9uLCByaik7IC8vIENvbXB1dGUgZGlzdGFuY2UgdmVjdG9yIGJldHdlZW4gd29ybGQgYW5jaG9yIHBvaW50cwoKICAgICAgd29ybGRBbmNob3JCLnZzdWIod29ybGRBbmNob3JBLCByKTsKICAgICAgY29uc3QgcmxlbiA9IHIubGVuZ3RoKCk7CiAgICAgIHJfdW5pdC5jb3B5KHIpOwogICAgICByX3VuaXQubm9ybWFsaXplKCk7IC8vIENvbXB1dGUgcmVsYXRpdmUgdmVsb2NpdHkgb2YgdGhlIGFuY2hvciBwb2ludHMsIHUKCiAgICAgIGJvZHlCLnZlbG9jaXR5LnZzdWIoYm9keUEudmVsb2NpdHksIHUpOyAvLyBBZGQgcm90YXRpb25hbCB2ZWxvY2l0eQoKICAgICAgYm9keUIuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHJqLCB0bXApOwogICAgICB1LnZhZGQodG1wLCB1KTsKICAgICAgYm9keUEuYW5ndWxhclZlbG9jaXR5LmNyb3NzKHJpLCB0bXApOwogICAgICB1LnZzdWIodG1wLCB1KTsgLy8gRiA9IC0gayAqICggeCAtIEwgKSAtIEQgKiAoIHUgKQoKICAgICAgcl91bml0LnNjYWxlKC1rICogKHJsZW4gLSBsKSAtIGQgKiB1LmRvdChyX3VuaXQpLCBmKTsgLy8gQWRkIGZvcmNlcyB0byBib2RpZXMKCiAgICAgIGJvZHlBLmZvcmNlLnZzdWIoZiwgYm9keUEuZm9yY2UpOwogICAgICBib2R5Qi5mb3JjZS52YWRkKGYsIGJvZHlCLmZvcmNlKTsgLy8gQW5ndWxhciBmb3JjZQoKICAgICAgcmkuY3Jvc3MoZiwgcmlfeF9mKTsKICAgICAgcmouY3Jvc3MoZiwgcmpfeF9mKTsKICAgICAgYm9keUEudG9ycXVlLnZzdWIocmlfeF9mLCBib2R5QS50b3JxdWUpOwogICAgICBib2R5Qi50b3JxdWUudmFkZChyal94X2YsIGJvZHlCLnRvcnF1ZSk7CiAgICB9CgogIH0KICBjb25zdCBhcHBseUZvcmNlX3IgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2Vfcl91bml0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3UgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfZiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV93b3JsZEFuY2hvckEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2Vfd29ybGRBbmNob3JCID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JpID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JqID0gbmV3IFZlYzMoKTsKICBjb25zdCBhcHBseUZvcmNlX3JpX3hfZiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXBwbHlGb3JjZV9yal94X2YgPSBuZXcgVmVjMygpOwogIGNvbnN0IGFwcGx5Rm9yY2VfdG1wID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogV2hlZWxJbmZvCiAgICovCiAgY2xhc3MgV2hlZWxJbmZvIHsKICAgIC8qKgogICAgICogTWF4IHRyYXZlbCBkaXN0YW5jZSBvZiB0aGUgc3VzcGVuc2lvbiwgaW4gbWV0ZXJzLgogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBTcGVlZCB0byBhcHBseSB0byB0aGUgd2hlZWwgcm90YXRpb24gd2hlbiB0aGUgd2hlZWwgaXMgc2xpZGluZy4KICAgICAqIEBkZWZhdWx0IC0wLjEKICAgICAqLwoKICAgIC8qKgogICAgICogSWYgdGhlIGN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgc2hvdWxkIGJlIHVzZWQuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBzbGlkaW5nCiAgICAgKi8KCiAgICAvKioKICAgICAqIENvbm5lY3Rpb24gcG9pbnQsIGRlZmluZWQgbG9jYWxseSBpbiB0aGUgY2hhc3NpcyBib2R5IGZyYW1lLgogICAgICovCgogICAgLyoqCiAgICAgKiBjaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogZGlyZWN0aW9uTG9jYWwKICAgICAqLwoKICAgIC8qKgogICAgICogZGlyZWN0aW9uV29ybGQKICAgICAqLwoKICAgIC8qKgogICAgICogYXhsZUxvY2FsCiAgICAgKi8KCiAgICAvKioKICAgICAqIGF4bGVXb3JsZAogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uUmVzdExlbmd0aAogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uTWF4TGVuZ3RoCiAgICAgKiBAZGVmYXVsdCAyCiAgICAgKi8KCiAgICAvKioKICAgICAqIHJhZGl1cwogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uU3RpZmZuZXNzCiAgICAgKiBAZGVmYXVsdCAxMDAKICAgICAqLwoKICAgIC8qKgogICAgICogZGFtcGluZ0NvbXByZXNzaW9uCiAgICAgKiBAZGVmYXVsdCAxMAogICAgICovCgogICAgLyoqCiAgICAgKiBkYW1waW5nUmVsYXhhdGlvbgogICAgICogQGRlZmF1bHQgMTAKICAgICAqLwoKICAgIC8qKgogICAgICogZnJpY3Rpb25TbGlwCiAgICAgKiBAZGVmYXVsdCAxMC41CiAgICAgKi8KCiAgICAvKiogZm9yd2FyZEFjY2VsZXJhdGlvbiAqLwoKICAgIC8qKiBzaWRlQWNjZWxlcmF0aW9uICovCgogICAgLyoqCiAgICAgKiBzdGVlcmluZwogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBSb3RhdGlvbiB2YWx1ZSwgaW4gcmFkaWFucy4KICAgICAqIEBkZWZhdWx0IDAKICAgICAqLwoKICAgIC8qKgogICAgICogZGVsdGFSb3RhdGlvbgogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiByb2xsSW5mbHVlbmNlCiAgICAgKiBAZGVmYXVsdCAwLjAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIG1heFN1c3BlbnNpb25Gb3JjZQogICAgICovCgogICAgLyoqCiAgICAgKiBlbmdpbmVGb3JjZQogICAgICovCgogICAgLyoqCiAgICAgKiBicmFrZQogICAgICovCgogICAgLyoqCiAgICAgKiBpc0Zyb250V2hlZWwKICAgICAqIEBkZWZhdWx0IHRydWUKICAgICAqLwoKICAgIC8qKgogICAgICogY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uCiAgICAgKiBAZGVmYXVsdCAxCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5CiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHN1c3BlbnNpb25Gb3JjZQogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBzbGlwSW5mbwogICAgICovCgogICAgLyoqCiAgICAgKiBza2lkSW5mbwogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBzdXNwZW5zaW9uTGVuZ3RoCiAgICAgKiBAZGVmYXVsdCAwCiAgICAgKi8KCiAgICAvKioKICAgICAqIHNpZGVJbXB1bHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIGZvcndhcmRJbXB1bHNlCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSByZXN1bHQgZnJvbSByYXljYXN0aW5nLgogICAgICovCgogICAgLyoqCiAgICAgKiBXaGVlbCB3b3JsZCB0cmFuc2Zvcm0uCiAgICAgKi8KCiAgICAvKioKICAgICAqIGlzSW5Db250YWN0CiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgb3B0aW9ucyA9IFV0aWxzLmRlZmF1bHRzKG9wdGlvbnMsIHsKICAgICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWw6IG5ldyBWZWMzKCksCiAgICAgICAgY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkOiBuZXcgVmVjMygpLAogICAgICAgIGRpcmVjdGlvbkxvY2FsOiBuZXcgVmVjMygpLAogICAgICAgIGRpcmVjdGlvbldvcmxkOiBuZXcgVmVjMygpLAogICAgICAgIGF4bGVMb2NhbDogbmV3IFZlYzMoKSwKICAgICAgICBheGxlV29ybGQ6IG5ldyBWZWMzKCksCiAgICAgICAgc3VzcGVuc2lvblJlc3RMZW5ndGg6IDEsCiAgICAgICAgc3VzcGVuc2lvbk1heExlbmd0aDogMiwKICAgICAgICByYWRpdXM6IDEsCiAgICAgICAgc3VzcGVuc2lvblN0aWZmbmVzczogMTAwLAogICAgICAgIGRhbXBpbmdDb21wcmVzc2lvbjogMTAsCiAgICAgICAgZGFtcGluZ1JlbGF4YXRpb246IDEwLAogICAgICAgIGZyaWN0aW9uU2xpcDogMTAuNSwKICAgICAgICBmb3J3YXJkQWNjZWxlcmF0aW9uOiAxLAogICAgICAgIHNpZGVBY2NlbGVyYXRpb246IDEsCiAgICAgICAgc3RlZXJpbmc6IDAsCiAgICAgICAgcm90YXRpb246IDAsCiAgICAgICAgZGVsdGFSb3RhdGlvbjogMCwKICAgICAgICByb2xsSW5mbHVlbmNlOiAwLjAxLAogICAgICAgIG1heFN1c3BlbnNpb25Gb3JjZTogTnVtYmVyLk1BWF9WQUxVRSwKICAgICAgICBpc0Zyb250V2hlZWw6IHRydWUsCiAgICAgICAgY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uOiAxLAogICAgICAgIHN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5OiAwLAogICAgICAgIHN1c3BlbnNpb25Gb3JjZTogMCwKICAgICAgICBzbGlwSW5mbzogMCwKICAgICAgICBza2lkSW5mbzogMCwKICAgICAgICBzdXNwZW5zaW9uTGVuZ3RoOiAwLAogICAgICAgIG1heFN1c3BlbnNpb25UcmF2ZWw6IDEsCiAgICAgICAgdXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDogZmFsc2UsCiAgICAgICAgY3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDogLTAuMQogICAgICB9KTsKICAgICAgdGhpcy5tYXhTdXNwZW5zaW9uVHJhdmVsID0gb3B0aW9ucy5tYXhTdXNwZW5zaW9uVHJhdmVsOwogICAgICB0aGlzLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQgPSBvcHRpb25zLmN1c3RvbVNsaWRpbmdSb3RhdGlvbmFsU3BlZWQ7CiAgICAgIHRoaXMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCA9IG9wdGlvbnMudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZDsKICAgICAgdGhpcy5zbGlkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsID0gb3B0aW9ucy5jaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwuY2xvbmUoKTsKICAgICAgdGhpcy5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQgPSBvcHRpb25zLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZC5jbG9uZSgpOwogICAgICB0aGlzLmRpcmVjdGlvbkxvY2FsID0gb3B0aW9ucy5kaXJlY3Rpb25Mb2NhbC5jbG9uZSgpOwogICAgICB0aGlzLmRpcmVjdGlvbldvcmxkID0gb3B0aW9ucy5kaXJlY3Rpb25Xb3JsZC5jbG9uZSgpOwogICAgICB0aGlzLmF4bGVMb2NhbCA9IG9wdGlvbnMuYXhsZUxvY2FsLmNsb25lKCk7CiAgICAgIHRoaXMuYXhsZVdvcmxkID0gb3B0aW9ucy5heGxlV29ybGQuY2xvbmUoKTsKICAgICAgdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aCA9IG9wdGlvbnMuc3VzcGVuc2lvblJlc3RMZW5ndGg7CiAgICAgIHRoaXMuc3VzcGVuc2lvbk1heExlbmd0aCA9IG9wdGlvbnMuc3VzcGVuc2lvbk1heExlbmd0aDsKICAgICAgdGhpcy5yYWRpdXMgPSBvcHRpb25zLnJhZGl1czsKICAgICAgdGhpcy5zdXNwZW5zaW9uU3RpZmZuZXNzID0gb3B0aW9ucy5zdXNwZW5zaW9uU3RpZmZuZXNzOwogICAgICB0aGlzLmRhbXBpbmdDb21wcmVzc2lvbiA9IG9wdGlvbnMuZGFtcGluZ0NvbXByZXNzaW9uOwogICAgICB0aGlzLmRhbXBpbmdSZWxheGF0aW9uID0gb3B0aW9ucy5kYW1waW5nUmVsYXhhdGlvbjsKICAgICAgdGhpcy5mcmljdGlvblNsaXAgPSBvcHRpb25zLmZyaWN0aW9uU2xpcDsKICAgICAgdGhpcy5mb3J3YXJkQWNjZWxlcmF0aW9uID0gb3B0aW9ucy5mb3J3YXJkQWNjZWxlcmF0aW9uOwogICAgICB0aGlzLnNpZGVBY2NlbGVyYXRpb24gPSBvcHRpb25zLnNpZGVBY2NlbGVyYXRpb247CiAgICAgIHRoaXMuc3RlZXJpbmcgPSAwOwogICAgICB0aGlzLnJvdGF0aW9uID0gMDsKICAgICAgdGhpcy5kZWx0YVJvdGF0aW9uID0gMDsKICAgICAgdGhpcy5yb2xsSW5mbHVlbmNlID0gb3B0aW9ucy5yb2xsSW5mbHVlbmNlOwogICAgICB0aGlzLm1heFN1c3BlbnNpb25Gb3JjZSA9IG9wdGlvbnMubWF4U3VzcGVuc2lvbkZvcmNlOwogICAgICB0aGlzLmVuZ2luZUZvcmNlID0gMDsKICAgICAgdGhpcy5icmFrZSA9IDA7CiAgICAgIHRoaXMuaXNGcm9udFdoZWVsID0gb3B0aW9ucy5pc0Zyb250V2hlZWw7CiAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMTsKICAgICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDA7CiAgICAgIHRoaXMuc3VzcGVuc2lvbkZvcmNlID0gMDsKICAgICAgdGhpcy5zbGlwSW5mbyA9IDA7CiAgICAgIHRoaXMuc2tpZEluZm8gPSAwOwogICAgICB0aGlzLnN1c3BlbnNpb25MZW5ndGggPSAwOwogICAgICB0aGlzLnNpZGVJbXB1bHNlID0gMDsKICAgICAgdGhpcy5mb3J3YXJkSW1wdWxzZSA9IDA7CiAgICAgIHRoaXMucmF5Y2FzdFJlc3VsdCA9IG5ldyBSYXljYXN0UmVzdWx0KCk7CiAgICAgIHRoaXMud29ybGRUcmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtKCk7CiAgICAgIHRoaXMuaXNJbkNvbnRhY3QgPSBmYWxzZTsKICAgIH0KCiAgICB1cGRhdGVXaGVlbChjaGFzc2lzKSB7CiAgICAgIGNvbnN0IHJheWNhc3RSZXN1bHQgPSB0aGlzLnJheWNhc3RSZXN1bHQ7CgogICAgICBpZiAodGhpcy5pc0luQ29udGFjdCkgewogICAgICAgIGNvbnN0IHByb2plY3QgPSByYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdChyYXljYXN0UmVzdWx0LmRpcmVjdGlvbldvcmxkKTsKICAgICAgICByYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1YihjaGFzc2lzLnBvc2l0aW9uLCByZWxwb3MpOwogICAgICAgIGNoYXNzaXMuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQocmVscG9zLCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7CiAgICAgICAgY29uc3QgcHJvalZlbCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQuZG90KGNoYXNzaXNfdmVsb2NpdHlfYXRfY29udGFjdFBvaW50KTsKCiAgICAgICAgaWYgKHByb2plY3QgPj0gLTAuMSkgewogICAgICAgICAgdGhpcy5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDAuMDsKICAgICAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wIC8gMC4xOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBpbnYgPSAtMSAvIHByb2plY3Q7CiAgICAgICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gcHJvalZlbCAqIGludjsKICAgICAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gaW52OwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBOb3QgaW4gY29udGFjdCA6IHBvc2l0aW9uIHdoZWVsIGluIGEgbmljZSAocmVzdCBsZW5ndGgpIHBvc2l0aW9uCiAgICAgICAgcmF5Y2FzdFJlc3VsdC5zdXNwZW5zaW9uTGVuZ3RoID0gdGhpcy5zdXNwZW5zaW9uUmVzdExlbmd0aDsKICAgICAgICB0aGlzLnN1c3BlbnNpb25SZWxhdGl2ZVZlbG9jaXR5ID0gMC4wOwogICAgICAgIHJheWNhc3RSZXN1bHQuZGlyZWN0aW9uV29ybGQuc2NhbGUoLTEsIHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQpOwogICAgICAgIHRoaXMuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wOwogICAgICB9CiAgICB9CgogIH0KICBjb25zdCBjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcmVscG9zID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogVmVoaWNsZSBoZWxwZXIgY2xhc3MgdGhhdCBjYXN0cyByYXlzIGZyb20gdGhlIHdoZWVsIHBvc2l0aW9ucyB0b3dhcmRzIHRoZSBncm91bmQgYW5kIGFwcGxpZXMgZm9yY2VzLgogICAqLwogIGNsYXNzIFJheWNhc3RWZWhpY2xlIHsKICAgIC8qKiBUaGUgY2FyIGNoYXNzaXMgYm9keS4gKi8KCiAgICAvKiogVGhlIHdoZWVscy4gKi8KCiAgICAvKiogV2lsbCBiZSBzZXQgdG8gdHJ1ZSBpZiB0aGUgY2FyIGlzIHNsaWRpbmcuICovCgogICAgLyoqIEluZGV4IG9mIHRoZSByaWdodCBheGlzLiB4PTAsIHk9MSwgej0yICovCgogICAgLyoqIEluZGV4IG9mIHRoZSBmb3J3YXJkIGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogSW5kZXggb2YgdGhlIHVwIGF4aXMuIHg9MCwgeT0xLCB6PTIgKi8KCiAgICAvKiogVGhlIGNvbnN0cmFpbnRzLiAqLwoKICAgIC8qKiBPcHRpb25hbCBwcmUtc3RlcCBjYWxsYmFjay4gKi8KCiAgICAvKiogTnVtYmVyIG9mIHdoZWVscyBvbiB0aGUgZ3JvdW5kLiAqLwogICAgY29uc3RydWN0b3Iob3B0aW9ucykgewogICAgICB0aGlzLmNoYXNzaXNCb2R5ID0gb3B0aW9ucy5jaGFzc2lzQm9keTsKICAgICAgdGhpcy53aGVlbEluZm9zID0gW107CiAgICAgIHRoaXMuc2xpZGluZyA9IGZhbHNlOwogICAgICB0aGlzLndvcmxkID0gbnVsbDsKICAgICAgdGhpcy5pbmRleFJpZ2h0QXhpcyA9IHR5cGVvZiBvcHRpb25zLmluZGV4UmlnaHRBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhSaWdodEF4aXMgOiAyOwogICAgICB0aGlzLmluZGV4Rm9yd2FyZEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleEZvcndhcmRBeGlzICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMuaW5kZXhGb3J3YXJkQXhpcyA6IDA7CiAgICAgIHRoaXMuaW5kZXhVcEF4aXMgPSB0eXBlb2Ygb3B0aW9ucy5pbmRleFVwQXhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBvcHRpb25zLmluZGV4VXBBeGlzIDogMTsKICAgICAgdGhpcy5jb25zdHJhaW50cyA9IFtdOwoKICAgICAgdGhpcy5wcmVTdGVwQ2FsbGJhY2sgPSAoKSA9PiB7fTsKCiAgICAgIHRoaXMuY3VycmVudFZlaGljbGVTcGVlZEttSG91ciA9IDA7CiAgICAgIHRoaXMubnVtV2hlZWxzT25Hcm91bmQgPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBBZGQgYSB3aGVlbC4gRm9yIGluZm9ybWF0aW9uIGFib3V0IHRoZSBvcHRpb25zLCBzZWUgYFdoZWVsSW5mb2AuCiAgICAgKi8KCgogICAgYWRkV2hlZWwob3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBjb25zdCBpbmZvID0gbmV3IFdoZWVsSW5mbyhvcHRpb25zKTsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLndoZWVsSW5mb3MubGVuZ3RoOwogICAgICB0aGlzLndoZWVsSW5mb3MucHVzaChpbmZvKTsKICAgICAgcmV0dXJuIGluZGV4OwogICAgfQogICAgLyoqCiAgICAgKiBTZXQgdGhlIHN0ZWVyaW5nIHZhbHVlIG9mIGEgd2hlZWwuCiAgICAgKi8KCgogICAgc2V0U3RlZXJpbmdWYWx1ZSh2YWx1ZSwgd2hlZWxJbmRleCkgewogICAgICBjb25zdCB3aGVlbCA9IHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XTsKICAgICAgd2hlZWwuc3RlZXJpbmcgPSB2YWx1ZTsKICAgIH0KICAgIC8qKgogICAgICogU2V0IHRoZSB3aGVlbCBmb3JjZSB0byBhcHBseSBvbiBvbmUgb2YgdGhlIHdoZWVscyBlYWNoIHRpbWUgc3RlcAogICAgICovCgoKICAgIGFwcGx5RW5naW5lRm9yY2UodmFsdWUsIHdoZWVsSW5kZXgpIHsKICAgICAgdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdLmVuZ2luZUZvcmNlID0gdmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgYnJha2luZyBmb3JjZSBvZiBhIHdoZWVsCiAgICAgKi8KCgogICAgc2V0QnJha2UoYnJha2UsIHdoZWVsSW5kZXgpIHsKICAgICAgdGhpcy53aGVlbEluZm9zW3doZWVsSW5kZXhdLmJyYWtlID0gYnJha2U7CiAgICB9CiAgICAvKioKICAgICAqIEFkZCB0aGUgdmVoaWNsZSBpbmNsdWRpbmcgaXRzIGNvbnN0cmFpbnRzIHRvIHRoZSB3b3JsZC4KICAgICAqLwoKCiAgICBhZGRUb1dvcmxkKHdvcmxkKSB7CiAgICAgIHdvcmxkLmFkZEJvZHkodGhpcy5jaGFzc2lzQm9keSk7CiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwoKICAgICAgdGhpcy5wcmVTdGVwQ2FsbGJhY2sgPSAoKSA9PiB7CiAgICAgICAgdGhhdC51cGRhdGVWZWhpY2xlKHdvcmxkLmR0KTsKICAgICAgfTsKCiAgICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLnByZVN0ZXBDYWxsYmFjayk7CiAgICAgIHRoaXMud29ybGQgPSB3b3JsZDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IG9uZSBvZiB0aGUgd2hlZWwgYXhsZXMsIHdvcmxkLW9yaWVudGVkLgogICAgICovCgoKICAgIGdldFZlaGljbGVBeGlzV29ybGQoYXhpc0luZGV4LCByZXN1bHQpIHsKICAgICAgcmVzdWx0LnNldChheGlzSW5kZXggPT09IDAgPyAxIDogMCwgYXhpc0luZGV4ID09PSAxID8gMSA6IDAsIGF4aXNJbmRleCA9PT0gMiA/IDEgOiAwKTsKICAgICAgdGhpcy5jaGFzc2lzQm9keS52ZWN0b3JUb1dvcmxkRnJhbWUocmVzdWx0LCByZXN1bHQpOwogICAgfQoKICAgIHVwZGF0ZVZlaGljbGUodGltZVN0ZXApIHsKICAgICAgY29uc3Qgd2hlZWxJbmZvcyA9IHRoaXMud2hlZWxJbmZvczsKICAgICAgY29uc3QgbnVtV2hlZWxzID0gd2hlZWxJbmZvcy5sZW5ndGg7CiAgICAgIGNvbnN0IGNoYXNzaXNCb2R5ID0gdGhpcy5jaGFzc2lzQm9keTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtKGkpOwogICAgICB9CgogICAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgPSAzLjYgKiBjaGFzc2lzQm9keS52ZWxvY2l0eS5sZW5ndGgoKTsKICAgICAgY29uc3QgZm9yd2FyZFdvcmxkID0gbmV3IFZlYzMoKTsKICAgICAgdGhpcy5nZXRWZWhpY2xlQXhpc1dvcmxkKHRoaXMuaW5kZXhGb3J3YXJkQXhpcywgZm9yd2FyZFdvcmxkKTsKCiAgICAgIGlmIChmb3J3YXJkV29ybGQuZG90KGNoYXNzaXNCb2R5LnZlbG9jaXR5KSA8IDApIHsKICAgICAgICB0aGlzLmN1cnJlbnRWZWhpY2xlU3BlZWRLbUhvdXIgKj0gLTE7CiAgICAgIH0gLy8gc2ltdWxhdGUgc3VzcGVuc2lvbgoKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICB0aGlzLmNhc3RSYXkod2hlZWxJbmZvc1tpXSk7CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlU3VzcGVuc2lvbih0aW1lU3RlcCk7CiAgICAgIGNvbnN0IGltcHVsc2UgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCByZWxwb3MgPSBuZXcgVmVjMygpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIC8vYXBwbHkgc3VzcGVuc2lvbiBmb3JjZQogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsKICAgICAgICBsZXQgc3VzcGVuc2lvbkZvcmNlID0gd2hlZWwuc3VzcGVuc2lvbkZvcmNlOwoKICAgICAgICBpZiAoc3VzcGVuc2lvbkZvcmNlID4gd2hlZWwubWF4U3VzcGVuc2lvbkZvcmNlKSB7CiAgICAgICAgICBzdXNwZW5zaW9uRm9yY2UgPSB3aGVlbC5tYXhTdXNwZW5zaW9uRm9yY2U7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHN1c3BlbnNpb25Gb3JjZSAqIHRpbWVTdGVwLCBpbXB1bHNlKTsKICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1YihjaGFzc2lzQm9keS5wb3NpdGlvbiwgcmVscG9zKTsKICAgICAgICBjaGFzc2lzQm9keS5hcHBseUltcHVsc2UoaW1wdWxzZSwgcmVscG9zKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVGcmljdGlvbih0aW1lU3RlcCk7CiAgICAgIGNvbnN0IGhpdE5vcm1hbFdvcmxkU2NhbGVkV2l0aFByb2ogPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBmd2QgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCB2ZWwgPSBuZXcgVmVjMygpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1XaGVlbHM7IGkrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1tpXTsgLy9jb25zdCByZWxwb3MgPSBuZXcgVmVjMygpOwogICAgICAgIC8vd2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkLnZzdWIoY2hhc3Npc0JvZHkucG9zaXRpb24sIHJlbHBvcyk7CgogICAgICAgIGNoYXNzaXNCb2R5LmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCwgdmVsKTsgLy8gSGFjayB0byBnZXQgdGhlIHJvdGF0aW9uIGluIHRoZSBjb3JyZWN0IGRpcmVjdGlvbgoKICAgICAgICBsZXQgbSA9IDE7CgogICAgICAgIHN3aXRjaCAodGhpcy5pbmRleFVwQXhpcykgewogICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBtID0gLTE7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7CiAgICAgICAgICB0aGlzLmdldFZlaGljbGVBeGlzV29ybGQodGhpcy5pbmRleEZvcndhcmRBeGlzLCBmd2QpOwogICAgICAgICAgY29uc3QgcHJvaiA9IGZ3ZC5kb3Qod2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLnNjYWxlKHByb2osIGhpdE5vcm1hbFdvcmxkU2NhbGVkV2l0aFByb2opOwogICAgICAgICAgZndkLnZzdWIoaGl0Tm9ybWFsV29ybGRTY2FsZWRXaXRoUHJvaiwgZndkKTsKICAgICAgICAgIGNvbnN0IHByb2oyID0gZndkLmRvdCh2ZWwpOwogICAgICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiA9IG0gKiBwcm9qMiAqIHRpbWVTdGVwIC8gd2hlZWwucmFkaXVzOwogICAgICAgIH0KCiAgICAgICAgaWYgKCh3aGVlbC5zbGlkaW5nIHx8ICF3aGVlbC5pc0luQ29udGFjdCkgJiYgd2hlZWwuZW5naW5lRm9yY2UgIT09IDAgJiYgd2hlZWwudXNlQ3VzdG9tU2xpZGluZ1JvdGF0aW9uYWxTcGVlZCkgewogICAgICAgICAgLy8gQXBwbHkgY3VzdG9tIHJvdGF0aW9uIHdoZW4gYWNjZWxlcmF0aW5nIGFuZCBzbGlkaW5nCiAgICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uID0gKHdoZWVsLmVuZ2luZUZvcmNlID4gMCA/IDEgOiAtMSkgKiB3aGVlbC5jdXN0b21TbGlkaW5nUm90YXRpb25hbFNwZWVkICogdGltZVN0ZXA7CiAgICAgICAgfSAvLyBMb2NrIHdoZWVscwoKCiAgICAgICAgaWYgKE1hdGguYWJzKHdoZWVsLmJyYWtlKSA+IE1hdGguYWJzKHdoZWVsLmVuZ2luZUZvcmNlKSkgewogICAgICAgICAgd2hlZWwuZGVsdGFSb3RhdGlvbiA9IDA7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5yb3RhdGlvbiArPSB3aGVlbC5kZWx0YVJvdGF0aW9uOyAvLyBVc2UgdGhlIG9sZCB2YWx1ZQoKICAgICAgICB3aGVlbC5kZWx0YVJvdGF0aW9uICo9IDAuOTk7IC8vIGRhbXBpbmcgb2Ygcm90YXRpb24gd2hlbiBub3QgaW4gY29udGFjdAogICAgICB9CiAgICB9CgogICAgdXBkYXRlU3VzcGVuc2lvbihkZWx0YVRpbWUpIHsKICAgICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5OwogICAgICBjb25zdCBjaGFzc2lzTWFzcyA9IGNoYXNzaXNCb2R5Lm1hc3M7CiAgICAgIGNvbnN0IHdoZWVsSW5mb3MgPSB0aGlzLndoZWVsSW5mb3M7CiAgICAgIGNvbnN0IG51bVdoZWVscyA9IHdoZWVsSW5mb3MubGVuZ3RoOwoKICAgICAgZm9yIChsZXQgd19pdCA9IDA7IHdfaXQgPCBudW1XaGVlbHM7IHdfaXQrKykgewogICAgICAgIGNvbnN0IHdoZWVsID0gd2hlZWxJbmZvc1t3X2l0XTsKCiAgICAgICAgaWYgKHdoZWVsLmlzSW5Db250YWN0KSB7CiAgICAgICAgICBsZXQgZm9yY2U7IC8vIFNwcmluZwoKICAgICAgICAgIGNvbnN0IHN1c3BfbGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGg7CiAgICAgICAgICBjb25zdCBjdXJyZW50X2xlbmd0aCA9IHdoZWVsLnN1c3BlbnNpb25MZW5ndGg7CiAgICAgICAgICBjb25zdCBsZW5ndGhfZGlmZiA9IHN1c3BfbGVuZ3RoIC0gY3VycmVudF9sZW5ndGg7CiAgICAgICAgICBmb3JjZSA9IHdoZWVsLnN1c3BlbnNpb25TdGlmZm5lc3MgKiBsZW5ndGhfZGlmZiAqIHdoZWVsLmNsaXBwZWRJbnZDb250YWN0RG90U3VzcGVuc2lvbjsgLy8gRGFtcGVyCgogICAgICAgICAgY29uc3QgcHJvamVjdGVkX3JlbF92ZWwgPSB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eTsKICAgICAgICAgIGxldCBzdXNwX2RhbXBpbmc7CgogICAgICAgICAgaWYgKHByb2plY3RlZF9yZWxfdmVsIDwgMCkgewogICAgICAgICAgICBzdXNwX2RhbXBpbmcgPSB3aGVlbC5kYW1waW5nQ29tcHJlc3Npb247CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzdXNwX2RhbXBpbmcgPSB3aGVlbC5kYW1waW5nUmVsYXhhdGlvbjsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3JjZSAtPSBzdXNwX2RhbXBpbmcgKiBwcm9qZWN0ZWRfcmVsX3ZlbDsKICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA9IGZvcmNlICogY2hhc3Npc01hc3M7CgogICAgICAgICAgaWYgKHdoZWVsLnN1c3BlbnNpb25Gb3JjZSA8IDApIHsKICAgICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gMDsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkZvcmNlID0gMDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIHRoZSB2ZWhpY2xlIGluY2x1ZGluZyBpdHMgY29uc3RyYWludHMgZnJvbSB0aGUgd29ybGQuCiAgICAgKi8KCgogICAgcmVtb3ZlRnJvbVdvcmxkKHdvcmxkKSB7CiAgICAgIHRoaXMuY29uc3RyYWludHM7CiAgICAgIHdvcmxkLnJlbW92ZUJvZHkodGhpcy5jaGFzc2lzQm9keSk7CiAgICAgIHdvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCB0aGlzLnByZVN0ZXBDYWxsYmFjayk7CiAgICAgIHRoaXMud29ybGQgPSBudWxsOwogICAgfQoKICAgIGNhc3RSYXkod2hlZWwpIHsKICAgICAgY29uc3QgcmF5dmVjdG9yID0gY2FzdFJheV9yYXl2ZWN0b3I7CiAgICAgIGNvbnN0IHRhcmdldCA9IGNhc3RSYXlfdGFyZ2V0OwogICAgICB0aGlzLnVwZGF0ZVdoZWVsVHJhbnNmb3JtV29ybGQod2hlZWwpOwogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGxldCBkZXB0aCA9IC0xOwogICAgICBjb25zdCByYXlsZW4gPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLnJhZGl1czsKICAgICAgd2hlZWwuZGlyZWN0aW9uV29ybGQuc2NhbGUocmF5bGVuLCByYXl2ZWN0b3IpOwogICAgICBjb25zdCBzb3VyY2UgPSB3aGVlbC5jaGFzc2lzQ29ubmVjdGlvblBvaW50V29ybGQ7CiAgICAgIHNvdXJjZS52YWRkKHJheXZlY3RvciwgdGFyZ2V0KTsKICAgICAgY29uc3QgcmF5Y2FzdFJlc3VsdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQ7CiAgICAgIHJheWNhc3RSZXN1bHQucmVzZXQoKTsgLy8gVHVybiBvZmYgcmF5IGNvbGxpc2lvbiB3aXRoIHRoZSBjaGFzc2lzIHRlbXBvcmFyaWx5CgogICAgICBjb25zdCBvbGRTdGF0ZSA9IGNoYXNzaXNCb2R5LmNvbGxpc2lvblJlc3BvbnNlOwogICAgICBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZSA9IGZhbHNlOyAvLyBDYXN0IHJheSBhZ2FpbnN0IHdvcmxkCgogICAgICB0aGlzLndvcmxkLnJheVRlc3Qoc291cmNlLCB0YXJnZXQsIHJheWNhc3RSZXN1bHQpOwogICAgICBjaGFzc2lzQm9keS5jb2xsaXNpb25SZXNwb25zZSA9IG9sZFN0YXRlOwogICAgICBjb25zdCBvYmplY3QgPSByYXljYXN0UmVzdWx0LmJvZHk7CiAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuZ3JvdW5kT2JqZWN0ID0gMDsKCiAgICAgIGlmIChvYmplY3QpIHsKICAgICAgICBkZXB0aCA9IHJheWNhc3RSZXN1bHQuZGlzdGFuY2U7CiAgICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCA9IHJheWNhc3RSZXN1bHQuaGl0Tm9ybWFsV29ybGQ7CiAgICAgICAgd2hlZWwuaXNJbkNvbnRhY3QgPSB0cnVlOwogICAgICAgIGNvbnN0IGhpdERpc3RhbmNlID0gcmF5Y2FzdFJlc3VsdC5kaXN0YW5jZTsKICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gaGl0RGlzdGFuY2UgLSB3aGVlbC5yYWRpdXM7IC8vIGNsYW1wIG9uIG1heCBzdXNwZW5zaW9uIHRyYXZlbAoKICAgICAgICBjb25zdCBtaW5TdXNwZW5zaW9uTGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGggLSB3aGVlbC5tYXhTdXNwZW5zaW9uVHJhdmVsOwogICAgICAgIGNvbnN0IG1heFN1c3BlbnNpb25MZW5ndGggPSB3aGVlbC5zdXNwZW5zaW9uUmVzdExlbmd0aCArIHdoZWVsLm1heFN1c3BlbnNpb25UcmF2ZWw7CgogICAgICAgIGlmICh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoIDwgbWluU3VzcGVuc2lvbkxlbmd0aCkgewogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA9IG1pblN1c3BlbnNpb25MZW5ndGg7CiAgICAgICAgfQoKICAgICAgICBpZiAod2hlZWwuc3VzcGVuc2lvbkxlbmd0aCA+IG1heFN1c3BlbnNpb25MZW5ndGgpIHsKICAgICAgICAgIHdoZWVsLnN1c3BlbnNpb25MZW5ndGggPSBtYXhTdXNwZW5zaW9uTGVuZ3RoOwogICAgICAgICAgd2hlZWwucmF5Y2FzdFJlc3VsdC5yZXNldCgpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgZGVub21pbmF0b3IgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdCh3aGVlbC5kaXJlY3Rpb25Xb3JsZCk7CiAgICAgICAgY29uc3QgY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQgPSBuZXcgVmVjMygpOwogICAgICAgIGNoYXNzaXNCb2R5LmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgY2hhc3Npc192ZWxvY2l0eV9hdF9jb250YWN0UG9pbnQpOwogICAgICAgIGNvbnN0IHByb2pWZWwgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkLmRvdChjaGFzc2lzX3ZlbG9jaXR5X2F0X2NvbnRhY3RQb2ludCk7CgogICAgICAgIGlmIChkZW5vbWluYXRvciA+PSAtMC4xKSB7CiAgICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDA7CiAgICAgICAgICB3aGVlbC5jbGlwcGVkSW52Q29udGFjdERvdFN1c3BlbnNpb24gPSAxIC8gMC4xOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCBpbnYgPSAtMSAvIGRlbm9taW5hdG9yOwogICAgICAgICAgd2hlZWwuc3VzcGVuc2lvblJlbGF0aXZlVmVsb2NpdHkgPSBwcm9qVmVsICogaW52OwogICAgICAgICAgd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gaW52OwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvL3B1dCB3aGVlbCBpbmZvIGFzIGluIHJlc3QgcG9zaXRpb24KICAgICAgICB3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoID0gd2hlZWwuc3VzcGVuc2lvblJlc3RMZW5ndGggKyAwICogd2hlZWwubWF4U3VzcGVuc2lvblRyYXZlbDsKICAgICAgICB3aGVlbC5zdXNwZW5zaW9uUmVsYXRpdmVWZWxvY2l0eSA9IDAuMDsKICAgICAgICB3aGVlbC5kaXJlY3Rpb25Xb3JsZC5zY2FsZSgtMSwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXROb3JtYWxXb3JsZCk7CiAgICAgICAgd2hlZWwuY2xpcHBlZEludkNvbnRhY3REb3RTdXNwZW5zaW9uID0gMS4wOwogICAgICB9CgogICAgICByZXR1cm4gZGVwdGg7CiAgICB9CgogICAgdXBkYXRlV2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbCkgewogICAgICB3aGVlbC5pc0luQ29udGFjdCA9IGZhbHNlOwogICAgICBjb25zdCBjaGFzc2lzQm9keSA9IHRoaXMuY2hhc3Npc0JvZHk7CiAgICAgIGNoYXNzaXNCb2R5LnBvaW50VG9Xb3JsZEZyYW1lKHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCwgd2hlZWwuY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludFdvcmxkKTsKICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHdoZWVsLmRpcmVjdGlvbkxvY2FsLCB3aGVlbC5kaXJlY3Rpb25Xb3JsZCk7CiAgICAgIGNoYXNzaXNCb2R5LnZlY3RvclRvV29ybGRGcmFtZSh3aGVlbC5heGxlTG9jYWwsIHdoZWVsLmF4bGVXb3JsZCk7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSBvbmUgb2YgdGhlIHdoZWVsIHRyYW5zZm9ybS4KICAgICAqIE5vdGUgd2hlbiByZW5kZXJpbmcgd2hlZWxzOiBkdXJpbmcgZWFjaCBzdGVwLCB3aGVlbCB0cmFuc2Zvcm1zIGFyZSB1cGRhdGVkIEJFRk9SRSB0aGUgY2hhc3NpczsgaWUuIHRoZWlyIHBvc2l0aW9uIGJlY29tZXMgaW52YWxpZCBhZnRlciB0aGUgc3RlcC4gVGh1cyB3aGVuIHlvdSByZW5kZXIgd2hlZWxzLCB5b3UgbXVzdCB1cGRhdGUgd2hlZWwgdHJhbnNmb3JtcyBiZWZvcmUgcmVuZGVyaW5nIHRoZW0uIFNlZSByYXljYXN0VmVoaWNsZSBkZW1vIGZvciBhbiBleGFtcGxlLgogICAgICogQHBhcmFtIHdoZWVsSW5kZXggVGhlIHdoZWVsIGluZGV4IHRvIHVwZGF0ZS4KICAgICAqLwoKCiAgICB1cGRhdGVXaGVlbFRyYW5zZm9ybSh3aGVlbEluZGV4KSB7CiAgICAgIGNvbnN0IHVwID0gdG1wVmVjNDsKICAgICAgY29uc3QgcmlnaHQgPSB0bXBWZWM1OwogICAgICBjb25zdCBmd2QgPSB0bXBWZWM2OwogICAgICBjb25zdCB3aGVlbCA9IHRoaXMud2hlZWxJbmZvc1t3aGVlbEluZGV4XTsKICAgICAgdGhpcy51cGRhdGVXaGVlbFRyYW5zZm9ybVdvcmxkKHdoZWVsKTsKICAgICAgd2hlZWwuZGlyZWN0aW9uTG9jYWwuc2NhbGUoLTEsIHVwKTsKICAgICAgcmlnaHQuY29weSh3aGVlbC5heGxlTG9jYWwpOwogICAgICB1cC5jcm9zcyhyaWdodCwgZndkKTsKICAgICAgZndkLm5vcm1hbGl6ZSgpOwogICAgICByaWdodC5ub3JtYWxpemUoKTsgLy8gUm90YXRlIGFyb3VuZCBzdGVlcmluZyBvdmVyIHRoZSB3aGVlbEF4bGUKCiAgICAgIGNvbnN0IHN0ZWVyaW5nID0gd2hlZWwuc3RlZXJpbmc7CiAgICAgIGNvbnN0IHN0ZWVyaW5nT3JuID0gbmV3IFF1YXRlcm5pb24oKTsKICAgICAgc3RlZXJpbmdPcm4uc2V0RnJvbUF4aXNBbmdsZSh1cCwgc3RlZXJpbmcpOwogICAgICBjb25zdCByb3RhdGluZ09ybiA9IG5ldyBRdWF0ZXJuaW9uKCk7CiAgICAgIHJvdGF0aW5nT3JuLnNldEZyb21BeGlzQW5nbGUocmlnaHQsIHdoZWVsLnJvdGF0aW9uKTsgLy8gV29ybGQgcm90YXRpb24gb2YgdGhlIHdoZWVsCgogICAgICBjb25zdCBxID0gd2hlZWwud29ybGRUcmFuc2Zvcm0ucXVhdGVybmlvbjsKICAgICAgdGhpcy5jaGFzc2lzQm9keS5xdWF0ZXJuaW9uLm11bHQoc3RlZXJpbmdPcm4sIHEpOwogICAgICBxLm11bHQocm90YXRpbmdPcm4sIHEpOwogICAgICBxLm5vcm1hbGl6ZSgpOyAvLyB3b3JsZCBwb3NpdGlvbiBvZiB0aGUgd2hlZWwKCiAgICAgIGNvbnN0IHAgPSB3aGVlbC53b3JsZFRyYW5zZm9ybS5wb3NpdGlvbjsKICAgICAgcC5jb3B5KHdoZWVsLmRpcmVjdGlvbldvcmxkKTsKICAgICAgcC5zY2FsZSh3aGVlbC5zdXNwZW5zaW9uTGVuZ3RoLCBwKTsKICAgICAgcC52YWRkKHdoZWVsLmNoYXNzaXNDb25uZWN0aW9uUG9pbnRXb3JsZCwgcCk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgd29ybGQgdHJhbnNmb3JtIG9mIG9uZSBvZiB0aGUgd2hlZWxzCiAgICAgKi8KCgogICAgZ2V0V2hlZWxUcmFuc2Zvcm1Xb3JsZCh3aGVlbEluZGV4KSB7CiAgICAgIHJldHVybiB0aGlzLndoZWVsSW5mb3Nbd2hlZWxJbmRleF0ud29ybGRUcmFuc2Zvcm07CiAgICB9CgogICAgdXBkYXRlRnJpY3Rpb24odGltZVN0ZXApIHsKICAgICAgY29uc3Qgc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qID0gdXBkYXRlRnJpY3Rpb25fc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qOyAvL2NhbGN1bGF0ZSB0aGUgaW1wdWxzZSwgc28gdGhhdCB0aGUgd2hlZWxzIGRvbid0IG1vdmUgc2lkZXdhcmRzCgogICAgICBjb25zdCB3aGVlbEluZm9zID0gdGhpcy53aGVlbEluZm9zOwogICAgICBjb25zdCBudW1XaGVlbHMgPSB3aGVlbEluZm9zLmxlbmd0aDsKICAgICAgY29uc3QgY2hhc3Npc0JvZHkgPSB0aGlzLmNoYXNzaXNCb2R5OwogICAgICBjb25zdCBmb3J3YXJkV1MgPSB1cGRhdGVGcmljdGlvbl9mb3J3YXJkV1M7CiAgICAgIGNvbnN0IGF4bGUgPSB1cGRhdGVGcmljdGlvbl9heGxlOwogICAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kID0gMDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5OwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICB0aGlzLm51bVdoZWVsc09uR3JvdW5kKys7CiAgICAgICAgfQoKICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSA9IDA7CiAgICAgICAgd2hlZWwuZm9yd2FyZEltcHVsc2UgPSAwOwoKICAgICAgICBpZiAoIWZvcndhcmRXU1tpXSkgewogICAgICAgICAgZm9yd2FyZFdTW2ldID0gbmV3IFZlYzMoKTsKICAgICAgICB9CgogICAgICAgIGlmICghYXhsZVtpXSkgewogICAgICAgICAgYXhsZVtpXSA9IG5ldyBWZWMzKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOwogICAgICAgIGNvbnN0IGdyb3VuZE9iamVjdCA9IHdoZWVsLnJheWNhc3RSZXN1bHQuYm9keTsKCiAgICAgICAgaWYgKGdyb3VuZE9iamVjdCkgewogICAgICAgICAgY29uc3QgYXhsZWkgPSBheGxlW2ldOwogICAgICAgICAgY29uc3Qgd2hlZWxUcmFucyA9IHRoaXMuZ2V0V2hlZWxUcmFuc2Zvcm1Xb3JsZChpKTsgLy8gR2V0IHdvcmxkIGF4bGUKCiAgICAgICAgICB3aGVlbFRyYW5zLnZlY3RvclRvV29ybGRGcmFtZShkaXJlY3Rpb25zW3RoaXMuaW5kZXhSaWdodEF4aXNdLCBheGxlaSk7CiAgICAgICAgICBjb25zdCBzdXJmTm9ybWFsV1MgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdE5vcm1hbFdvcmxkOwogICAgICAgICAgY29uc3QgcHJvaiA9IGF4bGVpLmRvdChzdXJmTm9ybWFsV1MpOwogICAgICAgICAgc3VyZk5vcm1hbFdTLnNjYWxlKHByb2osIHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaik7CiAgICAgICAgICBheGxlaS52c3ViKHN1cmZOb3JtYWxXU19zY2FsZWRfcHJvaiwgYXhsZWkpOwogICAgICAgICAgYXhsZWkubm9ybWFsaXplKCk7CiAgICAgICAgICBzdXJmTm9ybWFsV1MuY3Jvc3MoYXhsZWksIGZvcndhcmRXU1tpXSk7CiAgICAgICAgICBmb3J3YXJkV1NbaV0ubm9ybWFsaXplKCk7CiAgICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSA9IHJlc29sdmVTaW5nbGVCaWxhdGVyYWwoY2hhc3Npc0JvZHksIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCwgZ3JvdW5kT2JqZWN0LCB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQsIGF4bGVpKTsKICAgICAgICAgIHdoZWVsLnNpZGVJbXB1bHNlICo9IHNpZGVGcmljdGlvblN0aWZmbmVzczI7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCBzaWRlRmFjdG9yID0gMTsKICAgICAgY29uc3QgZndkRmFjdG9yID0gMC41OwogICAgICB0aGlzLnNsaWRpbmcgPSBmYWxzZTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV2hlZWxzOyBpKyspIHsKICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CiAgICAgICAgY29uc3QgZ3JvdW5kT2JqZWN0ID0gd2hlZWwucmF5Y2FzdFJlc3VsdC5ib2R5OwogICAgICAgIGxldCByb2xsaW5nRnJpY3Rpb24gPSAwOwogICAgICAgIHdoZWVsLnNsaXBJbmZvID0gMTsKCiAgICAgICAgaWYgKGdyb3VuZE9iamVjdCkgewogICAgICAgICAgY29uc3QgZGVmYXVsdFJvbGxpbmdGcmljdGlvbkltcHVsc2UgPSAwOwogICAgICAgICAgY29uc3QgbWF4SW1wdWxzZSA9IHdoZWVsLmJyYWtlID8gd2hlZWwuYnJha2UgOiBkZWZhdWx0Um9sbGluZ0ZyaWN0aW9uSW1wdWxzZTsgLy8gYnRXaGVlbENvbnRhY3RQb2ludCBjb250YWN0UHQoY2hhc3Npc0JvZHksZ3JvdW5kT2JqZWN0LHdoZWVsSW5mcmF5Y2FzdEluZm8uaGl0UG9pbnRXb3JsZCxmb3J3YXJkV1Nbd2hlZWxdLG1heEltcHVsc2UpOwogICAgICAgICAgLy8gcm9sbGluZ0ZyaWN0aW9uID0gY2FsY1JvbGxpbmdGcmljdGlvbihjb250YWN0UHQpOwoKICAgICAgICAgIHJvbGxpbmdGcmljdGlvbiA9IGNhbGNSb2xsaW5nRnJpY3Rpb24oY2hhc3Npc0JvZHksIGdyb3VuZE9iamVjdCwgd2hlZWwucmF5Y2FzdFJlc3VsdC5oaXRQb2ludFdvcmxkLCBmb3J3YXJkV1NbaV0sIG1heEltcHVsc2UpOwogICAgICAgICAgcm9sbGluZ0ZyaWN0aW9uICs9IHdoZWVsLmVuZ2luZUZvcmNlICogdGltZVN0ZXA7IC8vIHJvbGxpbmdGcmljdGlvbiA9IDA7CgogICAgICAgICAgY29uc3QgZmFjdG9yID0gbWF4SW1wdWxzZSAvIHJvbGxpbmdGcmljdGlvbjsKICAgICAgICAgIHdoZWVsLnNsaXBJbmZvICo9IGZhY3RvcjsKICAgICAgICB9IC8vc3dpdGNoIGJldHdlZW4gYWN0aXZlIHJvbGxpbmcgKHRocm90dGxlKSwgYnJha2luZyBhbmQgbm9uLWFjdGl2ZSByb2xsaW5nIGZyaWN0aW9uIChudGhyb3R0bGUvYnJlYWspCgoKICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSA9IDA7CiAgICAgICAgd2hlZWwuc2tpZEluZm8gPSAxOwoKICAgICAgICBpZiAoZ3JvdW5kT2JqZWN0KSB7CiAgICAgICAgICB3aGVlbC5za2lkSW5mbyA9IDE7CiAgICAgICAgICBjb25zdCBtYXhpbXAgPSB3aGVlbC5zdXNwZW5zaW9uRm9yY2UgKiB0aW1lU3RlcCAqIHdoZWVsLmZyaWN0aW9uU2xpcDsKICAgICAgICAgIGNvbnN0IG1heGltcFNpZGUgPSBtYXhpbXA7CiAgICAgICAgICBjb25zdCBtYXhpbXBTcXVhcmVkID0gbWF4aW1wICogbWF4aW1wU2lkZTsKICAgICAgICAgIHdoZWVsLmZvcndhcmRJbXB1bHNlID0gcm9sbGluZ0ZyaWN0aW9uOyAvL3doZWVsSW5mby5lbmdpbmVGb3JjZSogdGltZVN0ZXA7CgogICAgICAgICAgY29uc3QgeCA9IHdoZWVsLmZvcndhcmRJbXB1bHNlICogZndkRmFjdG9yIC8gd2hlZWwuZm9yd2FyZEFjY2VsZXJhdGlvbjsKICAgICAgICAgIGNvbnN0IHkgPSB3aGVlbC5zaWRlSW1wdWxzZSAqIHNpZGVGYWN0b3IgLyB3aGVlbC5zaWRlQWNjZWxlcmF0aW9uOwogICAgICAgICAgY29uc3QgaW1wdWxzZVNxdWFyZWQgPSB4ICogeCArIHkgKiB5OwogICAgICAgICAgd2hlZWwuc2xpZGluZyA9IGZhbHNlOwoKICAgICAgICAgIGlmIChpbXB1bHNlU3F1YXJlZCA+IG1heGltcFNxdWFyZWQpIHsKICAgICAgICAgICAgdGhpcy5zbGlkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgd2hlZWwuc2xpZGluZyA9IHRydWU7CiAgICAgICAgICAgIGNvbnN0IGZhY3RvciA9IG1heGltcCAvIE1hdGguc3FydChpbXB1bHNlU3F1YXJlZCk7CiAgICAgICAgICAgIHdoZWVsLnNraWRJbmZvICo9IGZhY3RvcjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnNsaWRpbmcpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgICBjb25zdCB3aGVlbCA9IHdoZWVsSW5mb3NbaV07CgogICAgICAgICAgaWYgKHdoZWVsLnNpZGVJbXB1bHNlICE9PSAwKSB7CiAgICAgICAgICAgIGlmICh3aGVlbC5za2lkSW5mbyA8IDEpIHsKICAgICAgICAgICAgICB3aGVlbC5mb3J3YXJkSW1wdWxzZSAqPSB3aGVlbC5za2lkSW5mbzsKICAgICAgICAgICAgICB3aGVlbC5zaWRlSW1wdWxzZSAqPSB3aGVlbC5za2lkSW5mbzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBhcHBseSB0aGUgaW1wdWxzZXMKCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVdoZWVsczsgaSsrKSB7CiAgICAgICAgY29uc3Qgd2hlZWwgPSB3aGVlbEluZm9zW2ldOwogICAgICAgIGNvbnN0IHJlbF9wb3MgPSBuZXcgVmVjMygpOwogICAgICAgIHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZC52c3ViKGNoYXNzaXNCb2R5LnBvc2l0aW9uLCByZWxfcG9zKTsgLy8gY2Fubm9ucyBhcHBseWltcHVsc2UgaXMgdXNpbmcgd29ybGQgY29vcmQgZm9yIHRoZSBwb3NpdGlvbgogICAgICAgIC8vcmVsX3Bvcy5jb3B5KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCk7CgogICAgICAgIGlmICh3aGVlbC5mb3J3YXJkSW1wdWxzZSAhPT0gMCkgewogICAgICAgICAgY29uc3QgaW1wdWxzZSA9IG5ldyBWZWMzKCk7CiAgICAgICAgICBmb3J3YXJkV1NbaV0uc2NhbGUod2hlZWwuZm9yd2FyZEltcHVsc2UsIGltcHVsc2UpOwogICAgICAgICAgY2hhc3Npc0JvZHkuYXBwbHlJbXB1bHNlKGltcHVsc2UsIHJlbF9wb3MpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHdoZWVsLnNpZGVJbXB1bHNlICE9PSAwKSB7CiAgICAgICAgICBjb25zdCBncm91bmRPYmplY3QgPSB3aGVlbC5yYXljYXN0UmVzdWx0LmJvZHk7CiAgICAgICAgICBjb25zdCByZWxfcG9zMiA9IG5ldyBWZWMzKCk7CiAgICAgICAgICB3aGVlbC5yYXljYXN0UmVzdWx0LmhpdFBvaW50V29ybGQudnN1Yihncm91bmRPYmplY3QucG9zaXRpb24sIHJlbF9wb3MyKTsgLy9yZWxfcG9zMi5jb3B5KHdoZWVsLnJheWNhc3RSZXN1bHQuaGl0UG9pbnRXb3JsZCk7CgogICAgICAgICAgY29uc3Qgc2lkZUltcCA9IG5ldyBWZWMzKCk7CiAgICAgICAgICBheGxlW2ldLnNjYWxlKHdoZWVsLnNpZGVJbXB1bHNlLCBzaWRlSW1wKTsgLy8gU2NhbGUgdGhlIHJlbGF0aXZlIHBvc2l0aW9uIGluIHRoZSB1cCBkaXJlY3Rpb24gd2l0aCByb2xsSW5mbHVlbmNlLgogICAgICAgICAgLy8gSWYgcm9sbEluZmx1ZW5jZSBpcyAxLCB0aGUgaW1wdWxzZSB3aWxsIGJlIGFwcGxpZWQgb24gdGhlIGhpdFBvaW50IChlYXN5IHRvIHJvbGwgb3ZlciksIGlmIGl0IGlzIHplcm8gaXQgd2lsbCBiZSBhcHBsaWVkIGluIHRoZSBzYW1lIHBsYW5lIGFzIHRoZSBjZW50ZXIgb2YgbWFzcyAobm90IGVhc3kgdG8gcm9sbCBvdmVyKS4KCiAgICAgICAgICBjaGFzc2lzQm9keS52ZWN0b3JUb0xvY2FsRnJhbWUocmVsX3BvcywgcmVsX3Bvcyk7CiAgICAgICAgICByZWxfcG9zWyd4eXonW3RoaXMuaW5kZXhVcEF4aXNdXSAqPSB3aGVlbC5yb2xsSW5mbHVlbmNlOwogICAgICAgICAgY2hhc3Npc0JvZHkudmVjdG9yVG9Xb3JsZEZyYW1lKHJlbF9wb3MsIHJlbF9wb3MpOwogICAgICAgICAgY2hhc3Npc0JvZHkuYXBwbHlJbXB1bHNlKHNpZGVJbXAsIHJlbF9wb3MpOyAvL2FwcGx5IGZyaWN0aW9uIGltcHVsc2Ugb24gdGhlIGdyb3VuZAoKICAgICAgICAgIHNpZGVJbXAuc2NhbGUoLTEsIHNpZGVJbXApOwogICAgICAgICAgZ3JvdW5kT2JqZWN0LmFwcGx5SW1wdWxzZShzaWRlSW1wLCByZWxfcG9zMik7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0KICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWM0ID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWM1ID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBWZWM2ID0gbmV3IFZlYzMoKTsKICBuZXcgUmF5KCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBjYXN0UmF5X3JheXZlY3RvciA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2FzdFJheV90YXJnZXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IGRpcmVjdGlvbnMgPSBbbmV3IFZlYzMoMSwgMCwgMCksIG5ldyBWZWMzKDAsIDEsIDApLCBuZXcgVmVjMygwLCAwLCAxKV07CiAgY29uc3QgdXBkYXRlRnJpY3Rpb25fc3VyZk5vcm1hbFdTX3NjYWxlZF9wcm9qID0gbmV3IFZlYzMoKTsKICBjb25zdCB1cGRhdGVGcmljdGlvbl9heGxlID0gW107CiAgY29uc3QgdXBkYXRlRnJpY3Rpb25fZm9yd2FyZFdTID0gW107CiAgY29uc3Qgc2lkZUZyaWN0aW9uU3RpZmZuZXNzMiA9IDE7CiAgY29uc3QgY2FsY1JvbGxpbmdGcmljdGlvbl92ZWwxID0gbmV3IFZlYzMoKTsKICBjb25zdCBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gY2FsY1JvbGxpbmdGcmljdGlvbihib2R5MCwgYm9keTEsIGZyaWN0aW9uUG9zV29ybGQsIGZyaWN0aW9uRGlyZWN0aW9uV29ybGQsIG1heEltcHVsc2UpIHsKICAgIGxldCBqMSA9IDA7CiAgICBjb25zdCBjb250YWN0UG9zV29ybGQgPSBmcmljdGlvblBvc1dvcmxkOyAvLyBjb25zdCByZWxfcG9zMSA9IG5ldyBWZWMzKCk7CiAgICAvLyBjb25zdCByZWxfcG9zMiA9IG5ldyBWZWMzKCk7CgogICAgY29uc3QgdmVsMSA9IGNhbGNSb2xsaW5nRnJpY3Rpb25fdmVsMTsKICAgIGNvbnN0IHZlbDIgPSBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDI7CiAgICBjb25zdCB2ZWwgPSBjYWxjUm9sbGluZ0ZyaWN0aW9uX3ZlbDsgLy8gY29udGFjdFBvc1dvcmxkLnZzdWIoYm9keTAucG9zaXRpb24sIHJlbF9wb3MxKTsKICAgIC8vIGNvbnRhY3RQb3NXb3JsZC52c3ViKGJvZHkxLnBvc2l0aW9uLCByZWxfcG9zMik7CgogICAgYm9keTAuZ2V0VmVsb2NpdHlBdFdvcmxkUG9pbnQoY29udGFjdFBvc1dvcmxkLCB2ZWwxKTsKICAgIGJvZHkxLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KGNvbnRhY3RQb3NXb3JsZCwgdmVsMik7CiAgICB2ZWwxLnZzdWIodmVsMiwgdmVsKTsKICAgIGNvbnN0IHZyZWwgPSBmcmljdGlvbkRpcmVjdGlvbldvcmxkLmRvdCh2ZWwpOwogICAgY29uc3QgZGVub20wID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcihib2R5MCwgZnJpY3Rpb25Qb3NXb3JsZCwgZnJpY3Rpb25EaXJlY3Rpb25Xb3JsZCk7CiAgICBjb25zdCBkZW5vbTEgPSBjb21wdXRlSW1wdWxzZURlbm9taW5hdG9yKGJvZHkxLCBmcmljdGlvblBvc1dvcmxkLCBmcmljdGlvbkRpcmVjdGlvbldvcmxkKTsKICAgIGNvbnN0IHJlbGF4YXRpb24gPSAxOwogICAgY29uc3QgamFjRGlhZ0FCSW52ID0gcmVsYXhhdGlvbiAvIChkZW5vbTAgKyBkZW5vbTEpOyAvLyBjYWxjdWxhdGUgaiB0aGF0IG1vdmVzIHVzIHRvIHplcm8gcmVsYXRpdmUgdmVsb2NpdHkKCiAgICBqMSA9IC12cmVsICogamFjRGlhZ0FCSW52OwoKICAgIGlmIChtYXhJbXB1bHNlIDwgajEpIHsKICAgICAgajEgPSBtYXhJbXB1bHNlOwogICAgfQoKICAgIGlmIChqMSA8IC1tYXhJbXB1bHNlKSB7CiAgICAgIGoxID0gLW1heEltcHVsc2U7CiAgICB9CgogICAgcmV0dXJuIGoxOwogIH0KCiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9yMCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9jMCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl92ZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfbSA9IG5ldyBWZWMzKCk7CgogIGZ1bmN0aW9uIGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3IoYm9keSwgcG9zLCBub3JtYWwpIHsKICAgIGNvbnN0IHIwID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9yMDsKICAgIGNvbnN0IGMwID0gY29tcHV0ZUltcHVsc2VEZW5vbWluYXRvcl9jMDsKICAgIGNvbnN0IHZlYyA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfdmVjOwogICAgY29uc3QgbSA9IGNvbXB1dGVJbXB1bHNlRGVub21pbmF0b3JfbTsKICAgIHBvcy52c3ViKGJvZHkucG9zaXRpb24sIHIwKTsKICAgIHIwLmNyb3NzKG5vcm1hbCwgYzApOwogICAgYm9keS5pbnZJbmVydGlhV29ybGQudm11bHQoYzAsIG0pOwogICAgbS5jcm9zcyhyMCwgdmVjKTsKICAgIHJldHVybiBib2R5Lmludk1hc3MgKyBub3JtYWwuZG90KHZlYyk7CiAgfQoKICBjb25zdCByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHJlc29sdmVTaW5nbGVCaWxhdGVyYWxfdmVsMiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwgPSBuZXcgVmVjMygpOyAvLyBiaWxhdGVyYWwgY29uc3RyYWludCBiZXR3ZWVuIHR3byBkeW5hbWljIG9iamVjdHMKCiAgZnVuY3Rpb24gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbChib2R5MSwgcG9zMSwgYm9keTIsIHBvczIsIG5vcm1hbCkgewogICAgY29uc3Qgbm9ybWFsTGVuU3FyID0gbm9ybWFsLmxlbmd0aFNxdWFyZWQoKTsKCiAgICBpZiAobm9ybWFsTGVuU3FyID4gMS4xKSB7CiAgICAgIHJldHVybiAwOyAvLyBubyBpbXB1bHNlCiAgICB9IC8vIGNvbnN0IHJlbF9wb3MxID0gbmV3IFZlYzMoKTsKICAgIC8vIGNvbnN0IHJlbF9wb3MyID0gbmV3IFZlYzMoKTsKICAgIC8vIHBvczEudnN1Yihib2R5MS5wb3NpdGlvbiwgcmVsX3BvczEpOwogICAgLy8gcG9zMi52c3ViKGJvZHkyLnBvc2l0aW9uLCByZWxfcG9zMik7CgoKICAgIGNvbnN0IHZlbDEgPSByZXNvbHZlU2luZ2xlQmlsYXRlcmFsX3ZlbDE7CiAgICBjb25zdCB2ZWwyID0gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWwyOwogICAgY29uc3QgdmVsID0gcmVzb2x2ZVNpbmdsZUJpbGF0ZXJhbF92ZWw7CiAgICBib2R5MS5nZXRWZWxvY2l0eUF0V29ybGRQb2ludChwb3MxLCB2ZWwxKTsKICAgIGJvZHkyLmdldFZlbG9jaXR5QXRXb3JsZFBvaW50KHBvczIsIHZlbDIpOwogICAgdmVsMS52c3ViKHZlbDIsIHZlbCk7CiAgICBjb25zdCByZWxfdmVsID0gbm9ybWFsLmRvdCh2ZWwpOwogICAgY29uc3QgY29udGFjdERhbXBpbmcgPSAwLjI7CiAgICBjb25zdCBtYXNzVGVybSA9IDEgLyAoYm9keTEuaW52TWFzcyArIGJvZHkyLmludk1hc3MpOwogICAgY29uc3QgaW1wdWxzZSA9IC1jb250YWN0RGFtcGluZyAqIHJlbF92ZWwgKiBtYXNzVGVybTsKICAgIHJldHVybiBpbXB1bHNlOwogIH0KCiAgLyoqCiAgICogU3BoZXJpY2FsIHNoYXBlCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcmFkaXVzID0gMQogICAqICAgICBjb25zdCBzcGhlcmVTaGFwZSA9IG5ldyBDQU5OT04uU3BoZXJlKHJhZGl1cykKICAgKiAgICAgY29uc3Qgc3BoZXJlQm9keSA9IG5ldyBDQU5OT04uQm9keSh7IG1hc3M6IDEsIHNoYXBlOiBzcGhlcmVTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KHNwaGVyZUJvZHkpCiAgICovCiAgY2xhc3MgU3BoZXJlIGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiBUaGUgcmFkaXVzIG9mIHRoZSBzcGhlcmUuCiAgICAgKi8KCiAgICAvKioKICAgICAqCiAgICAgKiBAcGFyYW0gcmFkaXVzIFRoZSByYWRpdXMgb2YgdGhlIHNwaGVyZSwgYSBub24tbmVnYXRpdmUgbnVtYmVyLgogICAgICovCiAgICBjb25zdHJ1Y3RvcihyYWRpdXMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlNQSEVSRQogICAgICB9KTsKICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXMgIT09IHVuZGVmaW5lZCA/IHJhZGl1cyA6IDEuMDsKCiAgICAgIGlmICh0aGlzLnJhZGl1cyA8IDApIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzcGhlcmUgcmFkaXVzIGNhbm5vdCBiZSBuZWdhdGl2ZS4nKTsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgfQogICAgLyoqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYSAqLwoKCiAgICBjYWxjdWxhdGVMb2NhbEluZXJ0aWEobWFzcywgdGFyZ2V0KSB7CiAgICAgIGlmICh0YXJnZXQgPT09IHZvaWQgMCkgewogICAgICAgIHRhcmdldCA9IG5ldyBWZWMzKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IEkgPSAyLjAgKiBtYXNzICogdGhpcy5yYWRpdXMgKiB0aGlzLnJhZGl1cyAvIDUuMDsKICAgICAgdGFyZ2V0LnggPSBJOwogICAgICB0YXJnZXQueSA9IEk7CiAgICAgIHRhcmdldC56ID0gSTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIC8qKiB2b2x1bWUgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIE1hdGgucG93KHRoaXMucmFkaXVzLCAzKSAvIDMuMDsKICAgIH0KCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IHRoaXMucmFkaXVzOwogICAgfQoKICAgIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7CiAgICAgIGNvbnN0IHIgPSB0aGlzLnJhZGl1czsKICAgICAgY29uc3QgYXhlcyA9IFsneCcsICd5JywgJ3onXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXhlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGF4ID0gYXhlc1tpXTsKICAgICAgICBtaW5bYXhdID0gcG9zW2F4XSAtIHI7CiAgICAgICAgbWF4W2F4XSA9IHBvc1theF0gKyByOwogICAgICB9CiAgICB9CgogIH0KICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsgLy8gVGVtcCB2ZWN0b3JzIGZvciBjYWxjdWxhdGlvbgoKICBuZXcgVmVjMygpOyAvLyBSZWxhdGl2ZSB2ZWxvY2l0eQoKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CgogIC8qKgogICAqIEN5bGluZGVyIGNsYXNzLgogICAqIEBleGFtcGxlCiAgICogICAgIGNvbnN0IHJhZGl1c1RvcCA9IDAuNQogICAqICAgICBjb25zdCByYWRpdXNCb3R0b20gPSAwLjUKICAgKiAgICAgY29uc3QgaGVpZ2h0ID0gMgogICAqICAgICBjb25zdCBudW1TZWdtZW50cyA9IDEyCiAgICogICAgIGNvbnN0IGN5bGluZGVyU2hhcGUgPSBuZXcgQ0FOTk9OLkN5bGluZGVyKHJhZGl1c1RvcCwgcmFkaXVzQm90dG9tLCBoZWlnaHQsIG51bVNlZ21lbnRzKQogICAqICAgICBjb25zdCBjeWxpbmRlckJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogY3lsaW5kZXJTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGN5bGluZGVyQm9keSkKICAgKi8KCiAgY2xhc3MgQ3lsaW5kZXIgZXh0ZW5kcyBDb252ZXhQb2x5aGVkcm9uIHsKICAgIC8qKiBUaGUgcmFkaXVzIG9mIHRoZSB0b3Agb2YgdGhlIEN5bGluZGVyLiAqLwoKICAgIC8qKiBUaGUgcmFkaXVzIG9mIHRoZSBib3R0b20gb2YgdGhlIEN5bGluZGVyLiAqLwoKICAgIC8qKiBUaGUgaGVpZ2h0IG9mIHRoZSBDeWxpbmRlci4gKi8KCiAgICAvKiogVGhlIG51bWJlciBvZiBzZWdtZW50cyB0byBidWlsZCB0aGUgY3lsaW5kZXIgb3V0IG9mLiAqLwoKICAgIC8qKgogICAgICogQHBhcmFtIHJhZGl1c1RvcCBUaGUgcmFkaXVzIG9mIHRoZSB0b3Agb2YgdGhlIEN5bGluZGVyLgogICAgICogQHBhcmFtIHJhZGl1c0JvdHRvbSBUaGUgcmFkaXVzIG9mIHRoZSBib3R0b20gb2YgdGhlIEN5bGluZGVyLgogICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSBDeWxpbmRlci4KICAgICAqIEBwYXJhbSBudW1TZWdtZW50cyBUaGUgbnVtYmVyIG9mIHNlZ21lbnRzIHRvIGJ1aWxkIHRoZSBjeWxpbmRlciBvdXQgb2YuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKHJhZGl1c1RvcCwgcmFkaXVzQm90dG9tLCBoZWlnaHQsIG51bVNlZ21lbnRzKSB7CiAgICAgIGlmIChyYWRpdXNUb3AgPT09IHZvaWQgMCkgewogICAgICAgIHJhZGl1c1RvcCA9IDE7CiAgICAgIH0KCiAgICAgIGlmIChyYWRpdXNCb3R0b20gPT09IHZvaWQgMCkgewogICAgICAgIHJhZGl1c0JvdHRvbSA9IDE7CiAgICAgIH0KCiAgICAgIGlmIChoZWlnaHQgPT09IHZvaWQgMCkgewogICAgICAgIGhlaWdodCA9IDE7CiAgICAgIH0KCiAgICAgIGlmIChudW1TZWdtZW50cyA9PT0gdm9pZCAwKSB7CiAgICAgICAgbnVtU2VnbWVudHMgPSA4OwogICAgICB9CgogICAgICBpZiAocmFkaXVzVG9wIDwgMCkgewogICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGN5bGluZGVyIHJhZGl1c1RvcCBjYW5ub3QgYmUgbmVnYXRpdmUuJyk7CiAgICAgIH0KCiAgICAgIGlmIChyYWRpdXNCb3R0b20gPCAwKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgY3lsaW5kZXIgcmFkaXVzQm90dG9tIGNhbm5vdCBiZSBuZWdhdGl2ZS4nKTsKICAgICAgfQoKICAgICAgY29uc3QgTiA9IG51bVNlZ21lbnRzOwogICAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdOwogICAgICBjb25zdCBheGVzID0gW107CiAgICAgIGNvbnN0IGZhY2VzID0gW107CiAgICAgIGNvbnN0IGJvdHRvbWZhY2UgPSBbXTsKICAgICAgY29uc3QgdG9wZmFjZSA9IFtdOwogICAgICBjb25zdCBjb3MgPSBNYXRoLmNvczsKICAgICAgY29uc3Qgc2luID0gTWF0aC5zaW47IC8vIEZpcnN0IGJvdHRvbSBwb2ludAoKICAgICAgdmVydGljZXMucHVzaChuZXcgVmVjMygtcmFkaXVzQm90dG9tICogc2luKDApLCAtaGVpZ2h0ICogMC41LCByYWRpdXNCb3R0b20gKiBjb3MoMCkpKTsKICAgICAgYm90dG9tZmFjZS5wdXNoKDApOyAvLyBGaXJzdCB0b3AgcG9pbnQKCiAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c1RvcCAqIHNpbigwKSwgaGVpZ2h0ICogMC41LCByYWRpdXNUb3AgKiBjb3MoMCkpKTsKICAgICAgdG9wZmFjZS5wdXNoKDEpOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBOOyBpKyspIHsKICAgICAgICBjb25zdCB0aGV0YSA9IDIgKiBNYXRoLlBJIC8gTiAqIChpICsgMSk7CiAgICAgICAgY29uc3QgdGhldGFOID0gMiAqIE1hdGguUEkgLyBOICogKGkgKyAwLjUpOwoKICAgICAgICBpZiAoaSA8IE4gLSAxKSB7CiAgICAgICAgICAvLyBCb3R0b20KICAgICAgICAgIHZlcnRpY2VzLnB1c2gobmV3IFZlYzMoLXJhZGl1c0JvdHRvbSAqIHNpbih0aGV0YSksIC1oZWlnaHQgKiAwLjUsIHJhZGl1c0JvdHRvbSAqIGNvcyh0aGV0YSkpKTsKICAgICAgICAgIGJvdHRvbWZhY2UucHVzaCgyICogaSArIDIpOyAvLyBUb3AKCiAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKG5ldyBWZWMzKC1yYWRpdXNUb3AgKiBzaW4odGhldGEpLCBoZWlnaHQgKiAwLjUsIHJhZGl1c1RvcCAqIGNvcyh0aGV0YSkpKTsKICAgICAgICAgIHRvcGZhY2UucHVzaCgyICogaSArIDMpOyAvLyBGYWNlCgogICAgICAgICAgZmFjZXMucHVzaChbMiAqIGksIDIgKiBpICsgMSwgMiAqIGkgKyAzLCAyICogaSArIDJdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZmFjZXMucHVzaChbMiAqIGksIDIgKiBpICsgMSwgMSwgMF0pOyAvLyBDb25uZWN0CiAgICAgICAgfSAvLyBBeGlzOiB3ZSBjYW4gY3V0IG9mZiBoYWxmIG9mIHRoZW0gaWYgd2UgaGF2ZSBldmVuIG51bWJlciBvZiBzZWdtZW50cwoKCiAgICAgICAgaWYgKE4gJSAyID09PSAxIHx8IGkgPCBOIC8gMikgewogICAgICAgICAgYXhlcy5wdXNoKG5ldyBWZWMzKC1zaW4odGhldGFOKSwgMCwgY29zKHRoZXRhTikpKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGZhY2VzLnB1c2goYm90dG9tZmFjZSk7CiAgICAgIGF4ZXMucHVzaChuZXcgVmVjMygwLCAxLCAwKSk7IC8vIFJlb3JkZXIgdG9wIGZhY2UKCiAgICAgIGNvbnN0IHRlbXAgPSBbXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9wZmFjZS5sZW5ndGg7IGkrKykgewogICAgICAgIHRlbXAucHVzaCh0b3BmYWNlW3RvcGZhY2UubGVuZ3RoIC0gaSAtIDFdKTsKICAgICAgfQoKICAgICAgZmFjZXMucHVzaCh0ZW1wKTsKICAgICAgc3VwZXIoewogICAgICAgIHZlcnRpY2VzLAogICAgICAgIGZhY2VzLAogICAgICAgIGF4ZXMKICAgICAgfSk7CiAgICAgIHRoaXMudHlwZSA9IFNoYXBlLnR5cGVzLkNZTElOREVSOwogICAgICB0aGlzLnJhZGl1c1RvcCA9IHJhZGl1c1RvcDsKICAgICAgdGhpcy5yYWRpdXNCb3R0b20gPSByYWRpdXNCb3R0b207CiAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwogICAgICB0aGlzLm51bVNlZ21lbnRzID0gbnVtU2VnbWVudHM7CiAgICB9CgogIH0KCiAgLyoqCiAgICogUGFydGljbGUgc2hhcGUuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcGFydGljbGVTaGFwZSA9IG5ldyBDQU5OT04uUGFydGljbGUoKQogICAqICAgICBjb25zdCBwYXJ0aWNsZUJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAxLCBzaGFwZTogcGFydGljbGVTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KHBhcnRpY2xlQm9keSkKICAgKi8KICBjbGFzcyBQYXJ0aWNsZSBleHRlbmRzIFNoYXBlIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuUEFSVElDTEUKICAgICAgfSk7CiAgICB9CiAgICAvKioKICAgICAqIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYQogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNldCgwLCAwLCAwKTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiAwOwogICAgfQoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICB0aGlzLmJvdW5kaW5nU3BoZXJlUmFkaXVzID0gMDsKICAgIH0KCiAgICBjYWxjdWxhdGVXb3JsZEFBQkIocG9zLCBxdWF0LCBtaW4sIG1heCkgewogICAgICAvLyBHZXQgZWFjaCBheGlzIG1heAogICAgICBtaW4uY29weShwb3MpOwogICAgICBtYXguY29weShwb3MpOwogICAgfQoKICB9CgogIC8qKgogICAqIEEgcGxhbmUsIGZhY2luZyBpbiB0aGUgWiBkaXJlY3Rpb24uIFRoZSBwbGFuZSBoYXMgaXRzIHN1cmZhY2UgYXQgej0wIGFuZCBldmVyeXRoaW5nIGJlbG93IHo9MCBpcyBhc3N1bWVkIHRvIGJlIHNvbGlkIHBsYW5lLiBUbyBtYWtlIHRoZSBwbGFuZSBmYWNlIGluIHNvbWUgb3RoZXIgZGlyZWN0aW9uIHRoYW4geiwgeW91IG11c3QgcHV0IGl0IGluc2lkZSBhIEJvZHkgYW5kIHJvdGF0ZSB0aGF0IGJvZHkuIFNlZSB0aGUgZGVtb3MuCiAgICogQGV4YW1wbGUKICAgKiAgICAgY29uc3QgcGxhbmVTaGFwZSA9IG5ldyBDQU5OT04uUGxhbmUoKQogICAqICAgICBjb25zdCBwbGFuZUJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBtYXNzOiAwLCBzaGFwZTogIHBsYW5lU2hhcGUgfSkKICAgKiAgICAgcGxhbmVCb2R5LnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKC1NYXRoLlBJIC8gMiwgMCwgMCkgLy8gbWFrZSBpdCBmYWNlIHVwCiAgICogICAgIHdvcmxkLmFkZEJvZHkocGxhbmVCb2R5KQogICAqLwogIGNsYXNzIFBsYW5lIGV4dGVuZHMgU2hhcGUgewogICAgLyoqIHdvcmxkTm9ybWFsICovCgogICAgLyoqIHdvcmxkTm9ybWFsTmVlZHNVcGRhdGUgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuUExBTkUKICAgICAgfSk7IC8vIFdvcmxkIG9yaWVudGVkIG5vcm1hbAoKICAgICAgdGhpcy53b3JsZE5vcm1hbCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMud29ybGROb3JtYWxOZWVkc1VwZGF0ZSA9IHRydWU7CiAgICAgIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgPSBOdW1iZXIuTUFYX1ZBTFVFOwogICAgfQogICAgLyoqIGNvbXB1dGVXb3JsZE5vcm1hbCAqLwoKCiAgICBjb21wdXRlV29ybGROb3JtYWwocXVhdCkgewogICAgICBjb25zdCBuID0gdGhpcy53b3JsZE5vcm1hbDsKICAgICAgbi5zZXQoMCwgMCwgMSk7CiAgICAgIHF1YXQudm11bHQobiwgbik7CiAgICAgIHRoaXMud29ybGROb3JtYWxOZWVkc1VwZGF0ZSA9IGZhbHNlOwogICAgfQoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiAoLy8gVGhlIHBsYW5lIGlzIGluZmluaXRlLi4uCiAgICAgICAgTnVtYmVyLk1BWF9WQUxVRQogICAgICApOwogICAgfQoKICAgIGNhbGN1bGF0ZVdvcmxkQUFCQihwb3MsIHF1YXQsIG1pbiwgbWF4KSB7CiAgICAgIC8vIFRoZSBwbGFuZSBBQUJCIGlzIGluZmluaXRlLCBleGNlcHQgaWYgdGhlIG5vcm1hbCBpcyBwb2ludGluZyBhbG9uZyBhbnkgYXhpcwogICAgICB0ZW1wTm9ybWFsLnNldCgwLCAwLCAxKTsgLy8gRGVmYXVsdCBwbGFuZSBub3JtYWwgaXMgegoKICAgICAgcXVhdC52bXVsdCh0ZW1wTm9ybWFsLCB0ZW1wTm9ybWFsKTsKICAgICAgY29uc3QgbWF4VmFsID0gTnVtYmVyLk1BWF9WQUxVRTsKICAgICAgbWluLnNldCgtbWF4VmFsLCAtbWF4VmFsLCAtbWF4VmFsKTsKICAgICAgbWF4LnNldChtYXhWYWwsIG1heFZhbCwgbWF4VmFsKTsKCiAgICAgIGlmICh0ZW1wTm9ybWFsLnggPT09IDEpIHsKICAgICAgICBtYXgueCA9IHBvcy54OwogICAgICB9IGVsc2UgaWYgKHRlbXBOb3JtYWwueCA9PT0gLTEpIHsKICAgICAgICBtaW4ueCA9IHBvcy54OwogICAgICB9CgogICAgICBpZiAodGVtcE5vcm1hbC55ID09PSAxKSB7CiAgICAgICAgbWF4LnkgPSBwb3MueTsKICAgICAgfSBlbHNlIGlmICh0ZW1wTm9ybWFsLnkgPT09IC0xKSB7CiAgICAgICAgbWluLnkgPSBwb3MueTsKICAgICAgfQoKICAgICAgaWYgKHRlbXBOb3JtYWwueiA9PT0gMSkgewogICAgICAgIG1heC56ID0gcG9zLno7CiAgICAgIH0gZWxzZSBpZiAodGVtcE5vcm1hbC56ID09PSAtMSkgewogICAgICAgIG1pbi56ID0gcG9zLno7CiAgICAgIH0KICAgIH0KCiAgICB1cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpIHsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE51bWJlci5NQVhfVkFMVUU7CiAgICB9CgogIH0KICBjb25zdCB0ZW1wTm9ybWFsID0gbmV3IFZlYzMoKTsKCiAgLyoqCiAgICogSGVpZ2h0ZmllbGQgc2hhcGUgY2xhc3MuIEhlaWdodCBkYXRhIGlzIGdpdmVuIGFzIGFuIGFycmF5LiBUaGVzZSBkYXRhIHBvaW50cyBhcmUgc3ByZWFkIG91dCBldmVubHkgd2l0aCBhIGdpdmVuIGRpc3RhbmNlLgogICAqIEB0b2RvIFNob3VsZCBiZSBwb3NzaWJsZSB0byB1c2UgYWxvbmcgYWxsIGF4ZXMsIG5vdCBqdXN0IHkKICAgKiBAdG9kbyBzaG91bGQgYmUgcG9zc2libGUgdG8gc2NhbGUgYWxvbmcgYWxsIGF4ZXMKICAgKiBAdG9kbyBSZWZhY3RvciBlbGVtZW50U2l6ZSB0byBlbGVtZW50U2l6ZVggYW5kIGVsZW1lbnRTaXplWQogICAqCiAgICogQGV4YW1wbGUKICAgKiAgICAgLy8gR2VuZXJhdGUgc29tZSBoZWlnaHQgZGF0YSAoeS12YWx1ZXMpLgogICAqICAgICBjb25zdCBkYXRhID0gW10KICAgKiAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDAwOyBpKyspIHsKICAgKiAgICAgICAgIGNvbnN0IHkgPSAwLjUgKiBNYXRoLmNvcygwLjIgKiBpKQogICAqICAgICAgICAgZGF0YS5wdXNoKHkpCiAgICogICAgIH0KICAgKgogICAqICAgICAvLyBDcmVhdGUgdGhlIGhlaWdodGZpZWxkIHNoYXBlCiAgICogICAgIGNvbnN0IGhlaWdodGZpZWxkU2hhcGUgPSBuZXcgQ0FOTk9OLkhlaWdodGZpZWxkKGRhdGEsIHsKICAgKiAgICAgICAgIGVsZW1lbnRTaXplOiAxIC8vIERpc3RhbmNlIGJldHdlZW4gdGhlIGRhdGEgcG9pbnRzIGluIFggYW5kIFkgZGlyZWN0aW9ucwogICAqICAgICB9KQogICAqICAgICBjb25zdCBoZWlnaHRmaWVsZEJvZHkgPSBuZXcgQ0FOTk9OLkJvZHkoeyBzaGFwZTogaGVpZ2h0ZmllbGRTaGFwZSB9KQogICAqICAgICB3b3JsZC5hZGRCb2R5KGhlaWdodGZpZWxkQm9keSkKICAgKi8KICBjbGFzcyBIZWlnaHRmaWVsZCBleHRlbmRzIFNoYXBlIHsKICAgIC8qKgogICAgICogQW4gYXJyYXkgb2YgbnVtYmVycywgb3IgaGVpZ2h0IHZhbHVlcywgdGhhdCBhcmUgc3ByZWFkIG91dCBhbG9uZyB0aGUgeCBheGlzLgogICAgICovCgogICAgLyoqCiAgICAgKiBNYXggdmFsdWUgb2YgdGhlIGRhdGEgcG9pbnRzIGluIHRoZSBkYXRhIGFycmF5LgogICAgICovCgogICAgLyoqCiAgICAgKiBNaW5pbXVtIHZhbHVlIG9mIHRoZSBkYXRhIHBvaW50cyBpbiB0aGUgZGF0YSBhcnJheS4KICAgICAqLwoKICAgIC8qKgogICAgICogV29ybGQgc3BhY2luZyBiZXR3ZWVuIHRoZSBkYXRhIHBvaW50cyBpbiBYIGFuZCBZIGRpcmVjdGlvbi4KICAgICAqIEB0b2RvIGVsZW1lbnRTaXplWCBhbmQgWQogICAgICogQGRlZmF1bHQgMQogICAgICovCgogICAgLyoqCiAgICAgKiBAZGVmYXVsdCB0cnVlCiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBkYXRhIEFuIGFycmF5IG9mIG51bWJlcnMsIG9yIGhlaWdodCB2YWx1ZXMsIHRoYXQgYXJlIHNwcmVhZCBvdXQgYWxvbmcgdGhlIHggYXhpcy4KICAgICAqLwogICAgY29uc3RydWN0b3IoZGF0YSwgb3B0aW9ucykgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zID0gVXRpbHMuZGVmYXVsdHMob3B0aW9ucywgewogICAgICAgIG1heFZhbHVlOiBudWxsLAogICAgICAgIG1pblZhbHVlOiBudWxsLAogICAgICAgIGVsZW1lbnRTaXplOiAxCiAgICAgIH0pOwogICAgICBzdXBlcih7CiAgICAgICAgdHlwZTogU2hhcGUudHlwZXMuSEVJR0hURklFTEQKICAgICAgfSk7CiAgICAgIHRoaXMuZGF0YSA9IGRhdGE7CiAgICAgIHRoaXMubWF4VmFsdWUgPSBvcHRpb25zLm1heFZhbHVlOwogICAgICB0aGlzLm1pblZhbHVlID0gb3B0aW9ucy5taW5WYWx1ZTsKICAgICAgdGhpcy5lbGVtZW50U2l6ZSA9IG9wdGlvbnMuZWxlbWVudFNpemU7CgogICAgICBpZiAob3B0aW9ucy5taW5WYWx1ZSA9PT0gbnVsbCkgewogICAgICAgIHRoaXMudXBkYXRlTWluVmFsdWUoKTsKICAgICAgfQoKICAgICAgaWYgKG9wdGlvbnMubWF4VmFsdWUgPT09IG51bGwpIHsKICAgICAgICB0aGlzLnVwZGF0ZU1heFZhbHVlKCk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2FjaGVFbmFibGVkID0gdHJ1ZTsKICAgICAgdGhpcy5waWxsYXJDb252ZXggPSBuZXcgQ29udmV4UG9seWhlZHJvbigpOwogICAgICB0aGlzLnBpbGxhck9mZnNldCA9IG5ldyBWZWMzKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsgLy8gImlfal9pc1VwcGVyIiA9PiB7IGNvbnZleDogLi4uLCBvZmZzZXQ6IC4uLiB9CiAgICAgIC8vIGZvciBleGFtcGxlOgogICAgICAvLyBfY2FjaGVkUGlsbGFyc1siMF8yXzEiXQoKICAgICAgdGhpcy5fY2FjaGVkUGlsbGFycyA9IHt9OwogICAgfQogICAgLyoqCiAgICAgKiBDYWxsIHdoZW5ldmVyIHlvdSBjaGFuZ2UgdGhlIGRhdGEgYXJyYXkuCiAgICAgKi8KCgogICAgdXBkYXRlKCkgewogICAgICB0aGlzLl9jYWNoZWRQaWxsYXJzID0ge307CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYG1pblZhbHVlYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZU1pblZhbHVlKCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBsZXQgbWluVmFsdWUgPSBkYXRhWzBdWzBdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZGF0YVtpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgdiA9IGRhdGFbaV1bal07CgogICAgICAgICAgaWYgKHYgPCBtaW5WYWx1ZSkgewogICAgICAgICAgICBtaW5WYWx1ZSA9IHY7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLm1pblZhbHVlID0gbWluVmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgYG1heFZhbHVlYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZU1heFZhbHVlKCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBsZXQgbWF4VmFsdWUgPSBkYXRhWzBdWzBdOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZGF0YVtpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgdiA9IGRhdGFbaV1bal07CgogICAgICAgICAgaWYgKHYgPiBtYXhWYWx1ZSkgewogICAgICAgICAgICBtYXhWYWx1ZSA9IHY7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLm1heFZhbHVlID0gbWF4VmFsdWU7CiAgICB9CiAgICAvKioKICAgICAqIFNldCB0aGUgaGVpZ2h0IHZhbHVlIGF0IGFuIGluZGV4LiBEb24ndCBmb3JnZXQgdG8gdXBkYXRlIG1heFZhbHVlIGFuZCBtaW5WYWx1ZSBhZnRlciB5b3UncmUgZG9uZS4KICAgICAqLwoKCiAgICBzZXRIZWlnaHRWYWx1ZUF0SW5kZXgoeGksIHlpLCB2YWx1ZSkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBkYXRhW3hpXVt5aV0gPSB2YWx1ZTsgLy8gSW52YWxpZGF0ZSBjYWNoZQoKICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZmFsc2UpOwoKICAgICAgaWYgKHhpID4gMCkgewogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSAtIDEsIHlpLCB0cnVlKTsKICAgICAgICB0aGlzLmNsZWFyQ2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGkgLSAxLCB5aSwgZmFsc2UpOwogICAgICB9CgogICAgICBpZiAoeWkgPiAwKSB7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSAtIDEsIHRydWUpOwogICAgICAgIHRoaXMuY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWkgLSAxLCBmYWxzZSk7CiAgICAgIH0KCiAgICAgIGlmICh5aSA+IDAgJiYgeGkgPiAwKSB7CiAgICAgICAgdGhpcy5jbGVhckNhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpIC0gMSwgeWkgLSAxLCB0cnVlKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgbWF4L21pbiBpbiBhIHJlY3RhbmdsZSBpbiB0aGUgbWF0cml4IGRhdGEKICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgdG8gc3RvcmUgdGhlIHJlc3VsdHMgaW4uCiAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHQgYXJyYXksIGlmIGl0IHdhcyBwYXNzZWQgaW4uIE1pbmltdW0gd2lsbCBiZSBhdCBwb3NpdGlvbiAwIGFuZCBtYXggYXQgMS4KICAgICAqLwoKCiAgICBnZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCByZXN1bHQpIHsKICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgcmVzdWx0ID0gW107CiAgICAgIH0KCiAgICAgIC8vIEdldCBtYXggYW5kIG1pbiBvZiB0aGUgZGF0YQogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOyAvLyBTZXQgZmlyc3QgdmFsdWUKCiAgICAgIGxldCBtYXggPSB0aGlzLm1pblZhbHVlOwoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDw9IGlNYXhYOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPD0gaU1heFk7IGorKykgewogICAgICAgICAgY29uc3QgaGVpZ2h0ID0gZGF0YVtpXVtqXTsKCiAgICAgICAgICBpZiAoaGVpZ2h0ID4gbWF4KSB7CiAgICAgICAgICAgIG1heCA9IGhlaWdodDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJlc3VsdFswXSA9IHRoaXMubWluVmFsdWU7CiAgICAgIHJlc3VsdFsxXSA9IG1heDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBpbmRleCBvZiBhIGxvY2FsIHBvc2l0aW9uIG9uIHRoZSBoZWlnaHRmaWVsZC4gVGhlIGluZGV4ZXMgaW5kaWNhdGUgdGhlIHJlY3RhbmdsZXMsIHNvIGlmIHlvdXIgdGVycmFpbiBpcyBtYWRlIG9mIE4geCBOIGhlaWdodCBkYXRhIHBvaW50cywgeW91IHdpbGwgaGF2ZSByZWN0YW5nbGUgaW5kZXhlcyByYW5naW5nIGZyb20gMCB0byBOLTEuCiAgICAgKiBAcGFyYW0gcmVzdWx0IFR3by1lbGVtZW50IGFycmF5CiAgICAgKiBAcGFyYW0gY2xhbXAgSWYgdGhlIHBvc2l0aW9uIHNob3VsZCBiZSBjbGFtcGVkIHRvIHRoZSBoZWlnaHRmaWVsZCBlZGdlLgogICAgICovCgoKICAgIGdldEluZGV4T2ZQb3NpdGlvbih4LCB5LCByZXN1bHQsIGNsYW1wKSB7CiAgICAgIC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdAogICAgICBjb25zdCB3ID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgbGV0IHhpID0gTWF0aC5mbG9vcih4IC8gdyk7CiAgICAgIGxldCB5aSA9IE1hdGguZmxvb3IoeSAvIHcpOwogICAgICByZXN1bHRbMF0gPSB4aTsKICAgICAgcmVzdWx0WzFdID0geWk7CgogICAgICBpZiAoY2xhbXApIHsKICAgICAgICAvLyBDbGFtcCBpbmRleCB0byBlZGdlcwogICAgICAgIGlmICh4aSA8IDApIHsKICAgICAgICAgIHhpID0gMDsKICAgICAgICB9CgogICAgICAgIGlmICh5aSA8IDApIHsKICAgICAgICAgIHlpID0gMDsKICAgICAgICB9CgogICAgICAgIGlmICh4aSA+PSBkYXRhLmxlbmd0aCAtIDEpIHsKICAgICAgICAgIHhpID0gZGF0YS5sZW5ndGggLSAxOwogICAgICAgIH0KCiAgICAgICAgaWYgKHlpID49IGRhdGFbMF0ubGVuZ3RoIC0gMSkgewogICAgICAgICAgeWkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgICAgfQogICAgICB9IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW4KCgogICAgICBpZiAoeGkgPCAwIHx8IHlpIDwgMCB8fCB4aSA+PSBkYXRhLmxlbmd0aCAtIDEgfHwgeWkgPj0gZGF0YVswXS5sZW5ndGggLSAxKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBnZXRUcmlhbmdsZUF0KHgsIHksIGVkZ2VDbGFtcCwgYSwgYiwgYykgewogICAgICBjb25zdCBpZHggPSBnZXRIZWlnaHRBdF9pZHg7CiAgICAgIHRoaXMuZ2V0SW5kZXhPZlBvc2l0aW9uKHgsIHksIGlkeCwgZWRnZUNsYW1wKTsKICAgICAgbGV0IHhpID0gaWR4WzBdOwogICAgICBsZXQgeWkgPSBpZHhbMV07CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CgogICAgICBpZiAoZWRnZUNsYW1wKSB7CiAgICAgICAgeGkgPSBNYXRoLm1pbihkYXRhLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHhpKSk7CiAgICAgICAgeWkgPSBNYXRoLm1pbihkYXRhWzBdLmxlbmd0aCAtIDIsIE1hdGgubWF4KDAsIHlpKSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgbG93ZXJEaXN0MiA9ICh4IC8gZWxlbWVudFNpemUgLSB4aSkgKiogMiArICh5IC8gZWxlbWVudFNpemUgLSB5aSkgKiogMjsKICAgICAgY29uc3QgdXBwZXJEaXN0MiA9ICh4IC8gZWxlbWVudFNpemUgLSAoeGkgKyAxKSkgKiogMiArICh5IC8gZWxlbWVudFNpemUgLSAoeWkgKyAxKSkgKiogMjsKICAgICAgY29uc3QgdXBwZXIgPSBsb3dlckRpc3QyID4gdXBwZXJEaXN0MjsKICAgICAgdGhpcy5nZXRUcmlhbmdsZSh4aSwgeWksIHVwcGVyLCBhLCBiLCBjKTsKICAgICAgcmV0dXJuIHVwcGVyOwogICAgfQoKICAgIGdldE5vcm1hbEF0KHgsIHksIGVkZ2VDbGFtcCwgcmVzdWx0KSB7CiAgICAgIGNvbnN0IGEgPSBnZXROb3JtYWxBdF9hOwogICAgICBjb25zdCBiID0gZ2V0Tm9ybWFsQXRfYjsKICAgICAgY29uc3QgYyA9IGdldE5vcm1hbEF0X2M7CiAgICAgIGNvbnN0IGUwID0gZ2V0Tm9ybWFsQXRfZTA7CiAgICAgIGNvbnN0IGUxID0gZ2V0Tm9ybWFsQXRfZTE7CiAgICAgIHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpOwogICAgICBiLnZzdWIoYSwgZTApOwogICAgICBjLnZzdWIoYSwgZTEpOwogICAgICBlMC5jcm9zcyhlMSwgcmVzdWx0KTsKICAgICAgcmVzdWx0Lm5vcm1hbGl6ZSgpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYW4gQUFCQiBvZiBhIHNxdWFyZSBpbiB0aGUgaGVpZ2h0ZmllbGQKICAgICAqIEBwYXJhbSB4aQogICAgICogQHBhcmFtIHlpCiAgICAgKiBAcGFyYW0gcmVzdWx0CiAgICAgKi8KCgogICAgZ2V0QWFiYkF0SW5kZXgoeGksIHlpLCBfcmVmKSB7CiAgICAgIGxldCB7CiAgICAgICAgbG93ZXJCb3VuZCwKICAgICAgICB1cHBlckJvdW5kCiAgICAgIH0gPSBfcmVmOwogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBlbGVtZW50U2l6ZSA9IHRoaXMuZWxlbWVudFNpemU7CiAgICAgIGxvd2VyQm91bmQuc2V0KHhpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSk7CiAgICAgIHVwcGVyQm91bmQuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aSArIDFdKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRoZSBoZWlnaHQgaW4gdGhlIGhlaWdodGZpZWxkIGF0IGEgZ2l2ZW4gcG9zaXRpb24KICAgICAqLwoKCiAgICBnZXRIZWlnaHRBdCh4LCB5LCBlZGdlQ2xhbXApIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3QgYSA9IGdldEhlaWdodEF0X2E7CiAgICAgIGNvbnN0IGIgPSBnZXRIZWlnaHRBdF9iOwogICAgICBjb25zdCBjID0gZ2V0SGVpZ2h0QXRfYzsKICAgICAgY29uc3QgaWR4ID0gZ2V0SGVpZ2h0QXRfaWR4OwogICAgICB0aGlzLmdldEluZGV4T2ZQb3NpdGlvbih4LCB5LCBpZHgsIGVkZ2VDbGFtcCk7CiAgICAgIGxldCB4aSA9IGlkeFswXTsKICAgICAgbGV0IHlpID0gaWR4WzFdOwoKICAgICAgaWYgKGVkZ2VDbGFtcCkgewogICAgICAgIHhpID0gTWF0aC5taW4oZGF0YS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB4aSkpOwogICAgICAgIHlpID0gTWF0aC5taW4oZGF0YVswXS5sZW5ndGggLSAyLCBNYXRoLm1heCgwLCB5aSkpOwogICAgICB9CgogICAgICBjb25zdCB1cHBlciA9IHRoaXMuZ2V0VHJpYW5nbGVBdCh4LCB5LCBlZGdlQ2xhbXAsIGEsIGIsIGMpOwogICAgICBiYXJ5Y2VudHJpY1dlaWdodHMoeCwgeSwgYS54LCBhLnksIGIueCwgYi55LCBjLngsIGMueSwgZ2V0SGVpZ2h0QXRfd2VpZ2h0cyk7CiAgICAgIGNvbnN0IHcgPSBnZXRIZWlnaHRBdF93ZWlnaHRzOwoKICAgICAgaWYgKHVwcGVyKSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgcmV0dXJuIGRhdGFbeGkgKyAxXVt5aSArIDFdICogdy54ICsgZGF0YVt4aV1beWkgKyAxXSAqIHcueSArIGRhdGFbeGkgKyAxXVt5aV0gKiB3Lno7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgcmV0dXJuIGRhdGFbeGldW3lpXSAqIHcueCArIGRhdGFbeGkgKyAxXVt5aV0gKiB3LnkgKyBkYXRhW3hpXVt5aSArIDFdICogdy56OwogICAgICB9CiAgICB9CgogICAgZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgcmV0dXJuIGAke3hpfV8ke3lpfV8ke2dldFVwcGVyVHJpYW5nbGUgPyAxIDogMH1gOwogICAgfQoKICAgIGdldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSkgewogICAgICByZXR1cm4gdGhpcy5fY2FjaGVkUGlsbGFyc1t0aGlzLmdldENhY2hlQ29udmV4VHJpYW5nbGVQaWxsYXJLZXkoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlKV07CiAgICB9CgogICAgc2V0Q2FjaGVkQ29udmV4VHJpYW5nbGVQaWxsYXIoeGksIHlpLCBnZXRVcHBlclRyaWFuZ2xlLCBjb252ZXgsIG9mZnNldCkgewogICAgICB0aGlzLl9jYWNoZWRQaWxsYXJzW3RoaXMuZ2V0Q2FjaGVDb252ZXhUcmlhbmdsZVBpbGxhcktleSh4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpXSA9IHsKICAgICAgICBjb252ZXgsCiAgICAgICAgb2Zmc2V0CiAgICAgIH07CiAgICB9CgogICAgY2xlYXJDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgZGVsZXRlIHRoaXMuX2NhY2hlZFBpbGxhcnNbdGhpcy5nZXRDYWNoZUNvbnZleFRyaWFuZ2xlUGlsbGFyS2V5KHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSldOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB0cmlhbmdsZSBmcm9tIHRoZSBoZWlnaHRmaWVsZAogICAgICovCgoKICAgIGdldFRyaWFuZ2xlKHhpLCB5aSwgdXBwZXIsIGEsIGIsIGMpIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTsKICAgICAgY29uc3QgZWxlbWVudFNpemUgPSB0aGlzLmVsZW1lbnRTaXplOwoKICAgICAgaWYgKHVwcGVyKSB7CiAgICAgICAgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCiAgICAgICAgYS5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpICsgMV0pOwogICAgICAgIGIuc2V0KHhpICogZWxlbWVudFNpemUsICh5aSArIDEpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0pOwogICAgICAgIGMuc2V0KCh4aSArIDEpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGkgKyAxXVt5aV0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFRvcCB0cmlhbmdsZSB2ZXJ0cwogICAgICAgIGEuc2V0KHhpICogZWxlbWVudFNpemUsIHlpICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpXSk7CiAgICAgICAgYi5zZXQoKHhpICsgMSkgKiBlbGVtZW50U2l6ZSwgeWkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aSArIDFdW3lpXSk7CiAgICAgICAgYy5zZXQoeGkgKiBlbGVtZW50U2l6ZSwgKHlpICsgMSkgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgdHJpYW5nbGUgaW4gdGhlIHRlcnJhaW4gaW4gdGhlIGZvcm0gb2YgYSB0cmlhbmd1bGFyIGNvbnZleCBzaGFwZS4KICAgICAqLwoKCiAgICBnZXRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpIHsKICAgICAgbGV0IHJlc3VsdCA9IHRoaXMucGlsbGFyQ29udmV4OwogICAgICBsZXQgb2Zmc2V0UmVzdWx0ID0gdGhpcy5waWxsYXJPZmZzZXQ7CgogICAgICBpZiAodGhpcy5jYWNoZUVuYWJsZWQpIHsKICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5nZXRDYWNoZWRDb252ZXhUcmlhbmdsZVBpbGxhcih4aSwgeWksIGdldFVwcGVyVHJpYW5nbGUpOwoKICAgICAgICBpZiAoZGF0YSkgewogICAgICAgICAgdGhpcy5waWxsYXJDb252ZXggPSBkYXRhLmNvbnZleDsKICAgICAgICAgIHRoaXMucGlsbGFyT2Zmc2V0ID0gZGF0YS5vZmZzZXQ7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICByZXN1bHQgPSBuZXcgQ29udmV4UG9seWhlZHJvbigpOwogICAgICAgIG9mZnNldFJlc3VsdCA9IG5ldyBWZWMzKCk7CiAgICAgICAgdGhpcy5waWxsYXJDb252ZXggPSByZXN1bHQ7CiAgICAgICAgdGhpcy5waWxsYXJPZmZzZXQgPSBvZmZzZXRSZXN1bHQ7CiAgICAgIH0KCiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmRhdGE7CiAgICAgIGNvbnN0IGVsZW1lbnRTaXplID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgY29uc3QgZmFjZXMgPSByZXN1bHQuZmFjZXM7IC8vIFJldXNlIHZlcnRzIGlmIHBvc3NpYmxlCgogICAgICByZXN1bHQudmVydGljZXMubGVuZ3RoID0gNjsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7CiAgICAgICAgaWYgKCFyZXN1bHQudmVydGljZXNbaV0pIHsKICAgICAgICAgIHJlc3VsdC52ZXJ0aWNlc1tpXSA9IG5ldyBWZWMzKCk7CiAgICAgICAgfQogICAgICB9IC8vIFJldXNlIGZhY2VzIGlmIHBvc3NpYmxlCgoKICAgICAgZmFjZXMubGVuZ3RoID0gNTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7CiAgICAgICAgaWYgKCFmYWNlc1tpXSkgewogICAgICAgICAgZmFjZXNbaV0gPSBbXTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IHZlcnRzID0gcmVzdWx0LnZlcnRpY2VzOwogICAgICBjb25zdCBoID0gKE1hdGgubWluKGRhdGFbeGldW3lpXSwgZGF0YVt4aSArIDFdW3lpXSwgZGF0YVt4aV1beWkgKyAxXSwgZGF0YVt4aSArIDFdW3lpICsgMV0pIC0gdGhpcy5taW5WYWx1ZSkgLyAyICsgdGhpcy5taW5WYWx1ZTsKCiAgICAgIGlmICghZ2V0VXBwZXJUcmlhbmdsZSkgewogICAgICAgIC8vIENlbnRlciBvZiB0aGUgdHJpYW5nbGUgcGlsbGFyIC0gYWxsIHBvbHlnb25zIGFyZSBnaXZlbiByZWxhdGl2ZSB0byB0aGlzIG9uZQogICAgICAgIG9mZnNldFJlc3VsdC5zZXQoKHhpICsgMC4yNSkgKiBlbGVtZW50U2l6ZSwgLy8gc29ydCBvZiBjZW50ZXIgb2YgYSB0cmlhbmdsZQogICAgICAgICh5aSArIDAuMjUpICogZWxlbWVudFNpemUsIGggLy8gdmVydGljYWwgY2VudGVyCiAgICAgICAgKTsgLy8gVG9wIHRyaWFuZ2xlIHZlcnRzCgogICAgICAgIHZlcnRzWzBdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpXVt5aV0gLSBoKTsKICAgICAgICB2ZXJ0c1sxXS5zZXQoMC43NSAqIGVsZW1lbnRTaXplLCAtMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldIC0gaCk7CiAgICAgICAgdmVydHNbMl0uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIDAuNzUgKiBlbGVtZW50U2l6ZSwgZGF0YVt4aV1beWkgKyAxXSAtIGgpOyAvLyBib3R0b20gdHJpYW5nbGUgdmVydHMKCiAgICAgICAgdmVydHNbM10uc2V0KC0wLjI1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzRdLnNldCgwLjc1ICogZWxlbWVudFNpemUsIC0wLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzVdLnNldCgtMC4yNSAqIGVsZW1lbnRTaXplLCAwLjc1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOyAvLyB0b3AgdHJpYW5nbGUKCiAgICAgICAgZmFjZXNbMF1bMF0gPSAwOwogICAgICAgIGZhY2VzWzBdWzFdID0gMTsKICAgICAgICBmYWNlc1swXVsyXSA9IDI7IC8vIGJvdHRvbSB0cmlhbmdsZQoKICAgICAgICBmYWNlc1sxXVswXSA9IDU7CiAgICAgICAgZmFjZXNbMV1bMV0gPSA0OwogICAgICAgIGZhY2VzWzFdWzJdID0gMzsgLy8gLXggZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbMl1bMF0gPSAwOwogICAgICAgIGZhY2VzWzJdWzFdID0gMjsKICAgICAgICBmYWNlc1syXVsyXSA9IDU7CiAgICAgICAgZmFjZXNbMl1bM10gPSAzOyAvLyAteSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1szXVswXSA9IDE7CiAgICAgICAgZmFjZXNbM11bMV0gPSAwOwogICAgICAgIGZhY2VzWzNdWzJdID0gMzsKICAgICAgICBmYWNlc1szXVszXSA9IDQ7IC8vICt4eSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1s0XVswXSA9IDQ7CiAgICAgICAgZmFjZXNbNF1bMV0gPSA1OwogICAgICAgIGZhY2VzWzRdWzJdID0gMjsKICAgICAgICBmYWNlc1s0XVszXSA9IDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gQ2VudGVyIG9mIHRoZSB0cmlhbmdsZSBwaWxsYXIgLSBhbGwgcG9seWdvbnMgYXJlIGdpdmVuIHJlbGF0aXZlIHRvIHRoaXMgb25lCiAgICAgICAgb2Zmc2V0UmVzdWx0LnNldCgoeGkgKyAwLjc1KSAqIGVsZW1lbnRTaXplLCAvLyBzb3J0IG9mIGNlbnRlciBvZiBhIHRyaWFuZ2xlCiAgICAgICAgKHlpICsgMC43NSkgKiBlbGVtZW50U2l6ZSwgaCAvLyB2ZXJ0aWNhbCBjZW50ZXIKICAgICAgICApOyAvLyBUb3AgdHJpYW5nbGUgdmVydHMKCiAgICAgICAgdmVydHNbMF0uc2V0KDAuMjUgKiBlbGVtZW50U2l6ZSwgMC4yNSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWkgKyAxXSAtIGgpOwogICAgICAgIHZlcnRzWzFdLnNldCgtMC43NSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIGRhdGFbeGldW3lpICsgMV0gLSBoKTsKICAgICAgICB2ZXJ0c1syXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAtMC43NSAqIGVsZW1lbnRTaXplLCBkYXRhW3hpICsgMV1beWldIC0gaCk7IC8vIGJvdHRvbSB0cmlhbmdsZSB2ZXJ0cwoKICAgICAgICB2ZXJ0c1szXS5zZXQoMC4yNSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzRdLnNldCgtMC43NSAqIGVsZW1lbnRTaXplLCAwLjI1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOwogICAgICAgIHZlcnRzWzVdLnNldCgwLjI1ICogZWxlbWVudFNpemUsIC0wLjc1ICogZWxlbWVudFNpemUsIC1NYXRoLmFicyhoKSAtIDEpOyAvLyBUb3AgdHJpYW5nbGUKCiAgICAgICAgZmFjZXNbMF1bMF0gPSAwOwogICAgICAgIGZhY2VzWzBdWzFdID0gMTsKICAgICAgICBmYWNlc1swXVsyXSA9IDI7IC8vIGJvdHRvbSB0cmlhbmdsZQoKICAgICAgICBmYWNlc1sxXVswXSA9IDU7CiAgICAgICAgZmFjZXNbMV1bMV0gPSA0OwogICAgICAgIGZhY2VzWzFdWzJdID0gMzsgLy8gK3ggZmFjaW5nIHF1YWQKCiAgICAgICAgZmFjZXNbMl1bMF0gPSAyOwogICAgICAgIGZhY2VzWzJdWzFdID0gNTsKICAgICAgICBmYWNlc1syXVsyXSA9IDM7CiAgICAgICAgZmFjZXNbMl1bM10gPSAwOyAvLyAreSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1szXVswXSA9IDM7CiAgICAgICAgZmFjZXNbM11bMV0gPSA0OwogICAgICAgIGZhY2VzWzNdWzJdID0gMTsKICAgICAgICBmYWNlc1szXVszXSA9IDA7IC8vIC14eSBmYWNpbmcgcXVhZAoKICAgICAgICBmYWNlc1s0XVswXSA9IDE7CiAgICAgICAgZmFjZXNbNF1bMV0gPSA0OwogICAgICAgIGZhY2VzWzRdWzJdID0gNTsKICAgICAgICBmYWNlc1s0XVszXSA9IDI7CiAgICAgIH0KCiAgICAgIHJlc3VsdC5jb21wdXRlTm9ybWFscygpOwogICAgICByZXN1bHQuY29tcHV0ZUVkZ2VzKCk7CiAgICAgIHJlc3VsdC51cGRhdGVCb3VuZGluZ1NwaGVyZVJhZGl1cygpOwogICAgICB0aGlzLnNldENhY2hlZENvbnZleFRyaWFuZ2xlUGlsbGFyKHhpLCB5aSwgZ2V0VXBwZXJUcmlhbmdsZSwgcmVzdWx0LCBvZmZzZXRSZXN1bHQpOwogICAgfQoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgaWYgKHRhcmdldCA9PT0gdm9pZCAwKSB7CiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlYzMoKTsKICAgICAgfQoKICAgICAgdGFyZ2V0LnNldCgwLCAwLCAwKTsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KCiAgICB2b2x1bWUoKSB7CiAgICAgIHJldHVybiAoLy8gVGhlIHRlcnJhaW4gaXMgaW5maW5pdGUKICAgICAgICBOdW1iZXIuTUFYX1ZBTFVFCiAgICAgICk7CiAgICB9CgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgLyoqIEBUT0RPIGRvIGl0IHByb3Blcmx5ICovCiAgICAgIG1pbi5zZXQoLU51bWJlci5NQVhfVkFMVUUsIC1OdW1iZXIuTUFYX1ZBTFVFLCAtTnVtYmVyLk1BWF9WQUxVRSk7CiAgICAgIG1heC5zZXQoTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSwgTnVtYmVyLk1BWF9WQUxVRSk7CiAgICB9CgogICAgdXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKSB7CiAgICAgIC8vIFVzZSB0aGUgYm91bmRpbmcgYm94IG9mIHRoZSBtaW4vbWF4IHZhbHVlcwogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBzID0gdGhpcy5lbGVtZW50U2l6ZTsKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IG5ldyBWZWMzKGRhdGEubGVuZ3RoICogcywgZGF0YVswXS5sZW5ndGggKiBzLCBNYXRoLm1heChNYXRoLmFicyh0aGlzLm1heFZhbHVlKSwgTWF0aC5hYnModGhpcy5taW5WYWx1ZSkpKS5sZW5ndGgoKTsKICAgIH0KICAgIC8qKgogICAgICogU2V0cyB0aGUgaGVpZ2h0IHZhbHVlcyBmcm9tIGFuIGltYWdlLiBDdXJyZW50bHkgb25seSBzdXBwb3J0ZWQgaW4gYnJvd3Nlci4KICAgICAqLwoKCiAgICBzZXRIZWlnaHRzRnJvbUltYWdlKGltYWdlLCBzY2FsZSkgewogICAgICBjb25zdCB7CiAgICAgICAgeCwKICAgICAgICB6LAogICAgICAgIHkKICAgICAgfSA9IHNjYWxlOwogICAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTsKICAgICAgY2FudmFzLndpZHRoID0gaW1hZ2Uud2lkdGg7CiAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWFnZS5oZWlnaHQ7CiAgICAgIGNvbnN0IGNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgICAgY29udGV4dC5kcmF3SW1hZ2UoaW1hZ2UsIDAsIDApOwogICAgICBjb25zdCBpbWFnZURhdGEgPSBjb250ZXh0LmdldEltYWdlRGF0YSgwLCAwLCBpbWFnZS53aWR0aCwgaW1hZ2UuaGVpZ2h0KTsKICAgICAgY29uc3QgbWF0cml4ID0gdGhpcy5kYXRhOwogICAgICBtYXRyaXgubGVuZ3RoID0gMDsKICAgICAgdGhpcy5lbGVtZW50U2l6ZSA9IE1hdGguYWJzKHgpIC8gaW1hZ2VEYXRhLndpZHRoOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbWFnZURhdGEuaGVpZ2h0OyBpKyspIHsKICAgICAgICBjb25zdCByb3cgPSBbXTsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbWFnZURhdGEud2lkdGg7IGorKykgewogICAgICAgICAgY29uc3QgYSA9IGltYWdlRGF0YS5kYXRhWyhpICogaW1hZ2VEYXRhLmhlaWdodCArIGopICogNF07CiAgICAgICAgICBjb25zdCBiID0gaW1hZ2VEYXRhLmRhdGFbKGkgKiBpbWFnZURhdGEuaGVpZ2h0ICsgaikgKiA0ICsgMV07CiAgICAgICAgICBjb25zdCBjID0gaW1hZ2VEYXRhLmRhdGFbKGkgKiBpbWFnZURhdGEuaGVpZ2h0ICsgaikgKiA0ICsgMl07CiAgICAgICAgICBjb25zdCBoZWlnaHQgPSAoYSArIGIgKyBjKSAvIDQgLyAyNTUgKiB6OwoKICAgICAgICAgIGlmICh4IDwgMCkgewogICAgICAgICAgICByb3cucHVzaChoZWlnaHQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcm93LnVuc2hpZnQoaGVpZ2h0KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmICh5IDwgMCkgewogICAgICAgICAgbWF0cml4LnVuc2hpZnQocm93KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbWF0cml4LnB1c2gocm93KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlTWF4VmFsdWUoKTsKICAgICAgdGhpcy51cGRhdGVNaW5WYWx1ZSgpOwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfQoKICB9CiAgY29uc3QgZ2V0SGVpZ2h0QXRfaWR4ID0gW107CiAgY29uc3QgZ2V0SGVpZ2h0QXRfd2VpZ2h0cyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0SGVpZ2h0QXRfYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfYyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgZ2V0Tm9ybWFsQXRfZTAgPSBuZXcgVmVjMygpOwogIGNvbnN0IGdldE5vcm1hbEF0X2UxID0gbmV3IFZlYzMoKTsgLy8gZnJvbSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXJ5Y2VudHJpY19jb29yZGluYXRlX3N5c3RlbQoKICBmdW5jdGlvbiBiYXJ5Y2VudHJpY1dlaWdodHMoeCwgeSwgYXgsIGF5LCBieCwgYnksIGN4LCBjeSwgcmVzdWx0KSB7CiAgICByZXN1bHQueCA9ICgoYnkgLSBjeSkgKiAoeCAtIGN4KSArIChjeCAtIGJ4KSAqICh5IC0gY3kpKSAvICgoYnkgLSBjeSkgKiAoYXggLSBjeCkgKyAoY3ggLSBieCkgKiAoYXkgLSBjeSkpOwogICAgcmVzdWx0LnkgPSAoKGN5IC0gYXkpICogKHggLSBjeCkgKyAoYXggLSBjeCkgKiAoeSAtIGN5KSkgLyAoKGJ5IC0gY3kpICogKGF4IC0gY3gpICsgKGN4IC0gYngpICogKGF5IC0gY3kpKTsKICAgIHJlc3VsdC56ID0gMSAtIHJlc3VsdC54IC0gcmVzdWx0Lnk7CiAgfQoKICAvKioKICAgKiBPY3RyZWVOb2RlCiAgICovCiAgY2xhc3MgT2N0cmVlTm9kZSB7CiAgICAvKiogVGhlIHJvb3Qgbm9kZSAqLwoKICAgIC8qKiBCb3VuZGFyeSBvZiB0aGlzIG5vZGUgKi8KCiAgICAvKiogQ29udGFpbmVkIGRhdGEgYXQgdGhlIGN1cnJlbnQgbm9kZSBsZXZlbCAqLwoKICAgIC8qKiBDaGlsZHJlbiB0byB0aGlzIG5vZGUgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgdGhpcy5yb290ID0gb3B0aW9ucy5yb290IHx8IG51bGw7CiAgICAgIHRoaXMuYWFiYiA9IG9wdGlvbnMuYWFiYiA/IG9wdGlvbnMuYWFiYi5jbG9uZSgpIDogbmV3IEFBQkIoKTsKICAgICAgdGhpcy5kYXRhID0gW107CiAgICAgIHRoaXMuY2hpbGRyZW4gPSBbXTsKICAgIH0KICAgIC8qKgogICAgICogcmVzZXQKICAgICAqLwoKCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5jaGlsZHJlbi5sZW5ndGggPSB0aGlzLmRhdGEubGVuZ3RoID0gMDsKICAgIH0KICAgIC8qKgogICAgICogSW5zZXJ0IGRhdGEgaW50byB0aGlzIG5vZGUKICAgICAqIEByZXR1cm4gVHJ1ZSBpZiBzdWNjZXNzZnVsLCBvdGhlcndpc2UgZmFsc2UKICAgICAqLwoKCiAgICBpbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsKSB7CiAgICAgIGlmIChsZXZlbCA9PT0gdm9pZCAwKSB7CiAgICAgICAgbGV2ZWwgPSAwOwogICAgICB9CgogICAgICBjb25zdCBub2RlRGF0YSA9IHRoaXMuZGF0YTsgLy8gSWdub3JlIG9iamVjdHMgdGhhdCBkbyBub3QgYmVsb25nIGluIHRoaXMgbm9kZQoKICAgICAgaWYgKCF0aGlzLmFhYmIuY29udGFpbnMoYWFiYikpIHsKICAgICAgICByZXR1cm4gZmFsc2U7IC8vIG9iamVjdCBjYW5ub3QgYmUgYWRkZWQKICAgICAgfQoKICAgICAgY29uc3QgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuOwogICAgICBjb25zdCBtYXhEZXB0aCA9IHRoaXMubWF4RGVwdGggfHwgdGhpcy5yb290Lm1heERlcHRoOwoKICAgICAgaWYgKGxldmVsIDwgbWF4RGVwdGgpIHsKICAgICAgICAvLyBTdWJkaXZpZGUgaWYgdGhlcmUgYXJlIG5vIGNoaWxkcmVuIHlldAogICAgICAgIGxldCBzdWJkaXZpZGVkID0gZmFsc2U7CgogICAgICAgIGlmICghY2hpbGRyZW4ubGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLnN1YmRpdmlkZSgpOwogICAgICAgICAgc3ViZGl2aWRlZCA9IHRydWU7CiAgICAgICAgfSAvLyBhZGQgdG8gd2hpY2hldmVyIG5vZGUgd2lsbCBhY2NlcHQgaXQKCgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSA4OyBpKyspIHsKICAgICAgICAgIGlmIChjaGlsZHJlbltpXS5pbnNlcnQoYWFiYiwgZWxlbWVudERhdGEsIGxldmVsICsgMSkpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoc3ViZGl2aWRlZCkgewogICAgICAgICAgLy8gTm8gY2hpbGRyZW4gYWNjZXB0ZWQhIE1pZ2h0IGFzIHdlbGwganVzdCByZW1vdmUgZW0gc2luY2UgdGhleSBjb250YWluIG5vbmUKICAgICAgICAgIGNoaWxkcmVuLmxlbmd0aCA9IDA7CiAgICAgICAgfQogICAgICB9IC8vIFRvbyBkZWVwLCBvciBjaGlsZHJlbiBkaWRudCB3YW50IGl0LiBhZGQgaXQgaW4gY3VycmVudCBub2RlCgoKICAgICAgbm9kZURhdGEucHVzaChlbGVtZW50RGF0YSk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgLyoqCiAgICAgKiBDcmVhdGUgOCBlcXVhbGx5IHNpemVkIGNoaWxkcmVuIG5vZGVzIGFuZCBwdXQgdGhlbSBpbiB0aGUgYGNoaWxkcmVuYCBhcnJheS4KICAgICAqLwoKCiAgICBzdWJkaXZpZGUoKSB7CiAgICAgIGNvbnN0IGFhYmIgPSB0aGlzLmFhYmI7CiAgICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSBhYWJiLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IGNoaWxkcmVuID0gdGhpcy5jaGlsZHJlbjsKICAgICAgY2hpbGRyZW4ucHVzaChuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMCwgMCwgMCkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDEsIDAsIDApCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygxLCAxLCAwKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMSwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDEpCiAgICAgICAgfSkKICAgICAgfSksIG5ldyBPY3RyZWVOb2RlKHsKICAgICAgICBhYWJiOiBuZXcgQUFCQih7CiAgICAgICAgICBsb3dlckJvdW5kOiBuZXcgVmVjMygwLCAwLCAxKQogICAgICAgIH0pCiAgICAgIH0pLCBuZXcgT2N0cmVlTm9kZSh7CiAgICAgICAgYWFiYjogbmV3IEFBQkIoewogICAgICAgICAgbG93ZXJCb3VuZDogbmV3IFZlYzMoMSwgMCwgMSkKICAgICAgICB9KQogICAgICB9KSwgbmV3IE9jdHJlZU5vZGUoewogICAgICAgIGFhYmI6IG5ldyBBQUJCKHsKICAgICAgICAgIGxvd2VyQm91bmQ6IG5ldyBWZWMzKDAsIDEsIDApCiAgICAgICAgfSkKICAgICAgfSkpOwogICAgICB1LnZzdWIobCwgaGFsZkRpYWdvbmFsKTsKICAgICAgaGFsZkRpYWdvbmFsLnNjYWxlKDAuNSwgaGFsZkRpYWdvbmFsKTsKICAgICAgY29uc3Qgcm9vdCA9IHRoaXMucm9vdCB8fCB0aGlzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IDg7IGkrKykgewogICAgICAgIGNvbnN0IGNoaWxkID0gY2hpbGRyZW5baV07IC8vIFNldCBjdXJyZW50IG5vZGUgYXMgcm9vdAoKICAgICAgICBjaGlsZC5yb290ID0gcm9vdDsgLy8gQ29tcHV0ZSBib3VuZHMKCiAgICAgICAgY29uc3QgbG93ZXJCb3VuZCA9IGNoaWxkLmFhYmIubG93ZXJCb3VuZDsKICAgICAgICBsb3dlckJvdW5kLnggKj0gaGFsZkRpYWdvbmFsLng7CiAgICAgICAgbG93ZXJCb3VuZC55ICo9IGhhbGZEaWFnb25hbC55OwogICAgICAgIGxvd2VyQm91bmQueiAqPSBoYWxmRGlhZ29uYWwuejsKICAgICAgICBsb3dlckJvdW5kLnZhZGQobCwgbG93ZXJCb3VuZCk7IC8vIFVwcGVyIGJvdW5kIGlzIGFsd2F5cyBsb3dlciBib3VuZCArIGhhbGZEaWFnb25hbAoKICAgICAgICBsb3dlckJvdW5kLnZhZGQoaGFsZkRpYWdvbmFsLCBjaGlsZC5hYWJiLnVwcGVyQm91bmQpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgd2l0aGluIGFuIEFBQkIKICAgICAqIEByZXR1cm4gVGhlICJyZXN1bHQiIG9iamVjdAogICAgICovCgoKICAgIGFhYmJRdWVyeShhYWJiLCByZXN1bHQpIHsKICAgICAgdGhpcy5kYXRhOyAvLyBhYm9ydCBpZiB0aGUgcmFuZ2UgZG9lcyBub3QgaW50ZXJzZWN0IHRoaXMgbm9kZQogICAgICAvLyBpZiAoIXRoaXMuYWFiYi5vdmVybGFwcyhhYWJiKSl7CiAgICAgIC8vICAgICByZXR1cm4gcmVzdWx0OwogICAgICAvLyB9CiAgICAgIC8vIEFkZCBvYmplY3RzIGF0IHRoaXMgbGV2ZWwKICAgICAgLy8gQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkocmVzdWx0LCBub2RlRGF0YSk7CiAgICAgIC8vIEFkZCBjaGlsZCBkYXRhCiAgICAgIC8vIEB0b2RvIHVud3JhcCByZWN1cnNpb24gaW50byBhIHF1ZXVlIC8gbG9vcCwgdGhhdCdzIGZhc3RlciBpbiBKUwoKICAgICAgdGhpcy5jaGlsZHJlbjsgLy8gZm9yIChsZXQgaSA9IDAsIE4gPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgIC8vICAgICBjaGlsZHJlbltpXS5hYWJiUXVlcnkoYWFiYiwgcmVzdWx0KTsKICAgICAgLy8gfQoKICAgICAgY29uc3QgcXVldWUgPSBbdGhpc107CgogICAgICB3aGlsZSAocXVldWUubGVuZ3RoKSB7CiAgICAgICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpOwoKICAgICAgICBpZiAobm9kZS5hYWJiLm92ZXJsYXBzKGFhYmIpKSB7CiAgICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShyZXN1bHQsIG5vZGUuZGF0YSk7CiAgICAgICAgfQoKICAgICAgICBBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShxdWV1ZSwgbm9kZS5jaGlsZHJlbik7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbGwgZGF0YSwgcG90ZW50aWFsbHkgaW50ZXJzZWN0ZWQgYnkgYSByYXkuCiAgICAgKiBAcmV0dXJuIFRoZSAicmVzdWx0IiBvYmplY3QKICAgICAqLwoKCiAgICByYXlRdWVyeShyYXksIHRyZWVUcmFuc2Zvcm0sIHJlc3VsdCkgewogICAgICAvLyBVc2UgYWFiYiBxdWVyeSBmb3Igbm93LgoKICAgICAgLyoqIEB0b2RvIGltcGxlbWVudCByZWFsIHJheSBxdWVyeSB3aGljaCBuZWVkcyBsZXNzIGxvb2t1cHMgKi8KICAgICAgcmF5LmdldEFBQkIodG1wQUFCQik7CiAgICAgIHRtcEFBQkIudG9Mb2NhbEZyYW1lKHRyZWVUcmFuc2Zvcm0sIHRtcEFBQkIpOwogICAgICB0aGlzLmFhYmJRdWVyeSh0bXBBQUJCLCByZXN1bHQpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfQogICAgLyoqCiAgICAgKiByZW1vdmVFbXB0eU5vZGVzCiAgICAgKi8KCgogICAgcmVtb3ZlRW1wdHlOb2RlcygpIHsKICAgICAgZm9yIChsZXQgaSA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICB0aGlzLmNoaWxkcmVuW2ldLnJlbW92ZUVtcHR5Tm9kZXMoKTsKCiAgICAgICAgaWYgKCF0aGlzLmNoaWxkcmVuW2ldLmNoaWxkcmVuLmxlbmd0aCAmJiAhdGhpcy5jaGlsZHJlbltpXS5kYXRhLmxlbmd0aCkgewogICAgICAgICAgdGhpcy5jaGlsZHJlbi5zcGxpY2UoaSwgMSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogIH0KICAvKioKICAgKiBPY3RyZWUKICAgKi8KCgogIGNsYXNzIE9jdHJlZSBleHRlbmRzIE9jdHJlZU5vZGUgewogICAgLyoqCiAgICAgKiBNYXhpbXVtIHN1YmRpdmlzaW9uIGRlcHRoCiAgICAgKiBAZGVmYXVsdCA4CiAgICAgKi8KCiAgICAvKioKICAgICAqIEBwYXJhbSBhYWJiIFRoZSB0b3RhbCBBQUJCIG9mIHRoZSB0cmVlCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKGFhYmIsIG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgc3VwZXIoewogICAgICAgIHJvb3Q6IG51bGwsCiAgICAgICAgYWFiYgogICAgICB9KTsKICAgICAgdGhpcy5tYXhEZXB0aCA9IHR5cGVvZiBvcHRpb25zLm1heERlcHRoICE9PSAndW5kZWZpbmVkJyA/IG9wdGlvbnMubWF4RGVwdGggOiA4OwogICAgfQoKICB9CiAgY29uc3QgaGFsZkRpYWdvbmFsID0gbmV3IFZlYzMoKTsKICBjb25zdCB0bXBBQUJCID0gbmV3IEFBQkIoKTsKCiAgLyoqCiAgICogVHJpbWVzaC4KICAgKiBAZXhhbXBsZQogICAqICAgICAvLyBIb3cgdG8gbWFrZSBhIG1lc2ggd2l0aCBhIHNpbmdsZSB0cmlhbmdsZQogICAqICAgICBjb25zdCB2ZXJ0aWNlcyA9IFsKICAgKiAgICAgICAgIDAsIDAsIDAsIC8vIHZlcnRleCAwCiAgICogICAgICAgICAxLCAwLCAwLCAvLyB2ZXJ0ZXggMQogICAqICAgICAgICAgMCwgMSwgMCAgLy8gdmVydGV4IDIKICAgKiAgICAgXQogICAqICAgICBjb25zdCBpbmRpY2VzID0gWwogICAqICAgICAgICAgMCwgMSwgMiAgLy8gdHJpYW5nbGUgMAogICAqICAgICBdCiAgICogICAgIGNvbnN0IHRyaW1lc2hTaGFwZSA9IG5ldyBDQU5OT04uVHJpbWVzaCh2ZXJ0aWNlcywgaW5kaWNlcykKICAgKi8KICBjbGFzcyBUcmltZXNoIGV4dGVuZHMgU2hhcGUgewogICAgLyoqCiAgICAgKiB2ZXJ0aWNlcwogICAgICovCgogICAgLyoqCiAgICAgKiBBcnJheSBvZiBpbnRlZ2VycywgaW5kaWNhdGluZyB3aGljaCB2ZXJ0aWNlcyBlYWNoIHRyaWFuZ2xlIGNvbnNpc3RzIG9mLiBUaGUgbGVuZ3RoIG9mIHRoaXMgYXJyYXkgaXMgdGh1cyAzIHRpbWVzIHRoZSBudW1iZXIgb2YgdHJpYW5nbGVzLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgbm9ybWFscyBkYXRhLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgbG9jYWwgQUFCQiBvZiB0aGUgbWVzaC4KICAgICAqLwoKICAgIC8qKgogICAgICogUmVmZXJlbmNlcyB0byB2ZXJ0ZXggcGFpcnMsIG1ha2luZyB1cCBhbGwgdW5pcXVlIGVkZ2VzIGluIHRoZSB0cmltZXNoLgogICAgICovCgogICAgLyoqCiAgICAgKiBMb2NhbCBzY2FsaW5nIG9mIHRoZSBtZXNoLiBVc2UgLnNldFNjYWxlKCkgdG8gc2V0IGl0LgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgaW5kZXhlZCB0cmlhbmdsZXMuIFVzZSAudXBkYXRlVHJlZSgpIHRvIHVwZGF0ZSBpdC4KICAgICAqLwogICAgY29uc3RydWN0b3IodmVydGljZXMsIGluZGljZXMpIHsKICAgICAgc3VwZXIoewogICAgICAgIHR5cGU6IFNoYXBlLnR5cGVzLlRSSU1FU0gKICAgICAgfSk7CiAgICAgIHRoaXMudmVydGljZXMgPSBuZXcgRmxvYXQzMkFycmF5KHZlcnRpY2VzKTsKICAgICAgdGhpcy5pbmRpY2VzID0gbmV3IEludDE2QXJyYXkoaW5kaWNlcyk7CiAgICAgIHRoaXMubm9ybWFscyA9IG5ldyBGbG9hdDMyQXJyYXkoaW5kaWNlcy5sZW5ndGgpOwogICAgICB0aGlzLmFhYmIgPSBuZXcgQUFCQigpOwogICAgICB0aGlzLmVkZ2VzID0gbnVsbDsKICAgICAgdGhpcy5zY2FsZSA9IG5ldyBWZWMzKDEsIDEsIDEpOwogICAgICB0aGlzLnRyZWUgPSBuZXcgT2N0cmVlKCk7CiAgICAgIHRoaXMudXBkYXRlRWRnZXMoKTsKICAgICAgdGhpcy51cGRhdGVOb3JtYWxzKCk7CiAgICAgIHRoaXMudXBkYXRlQUFCQigpOwogICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCk7CiAgICAgIHRoaXMudXBkYXRlVHJlZSgpOwogICAgfQogICAgLyoqCiAgICAgKiB1cGRhdGVUcmVlCiAgICAgKi8KCgogICAgdXBkYXRlVHJlZSgpIHsKICAgICAgY29uc3QgdHJlZSA9IHRoaXMudHJlZTsKICAgICAgdHJlZS5yZXNldCgpOwogICAgICB0cmVlLmFhYmIuY29weSh0aGlzLmFhYmIpOwogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7IC8vIFRoZSBsb2NhbCBtZXNoIEFBQkIgaXMgc2NhbGVkLCBidXQgdGhlIG9jdHJlZSBBQUJCIHNob3VsZCBiZSB1bnNjYWxlZAoKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueCAqPSAxIC8gc2NhbGUueDsKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueSAqPSAxIC8gc2NhbGUueTsKICAgICAgdHJlZS5hYWJiLmxvd2VyQm91bmQueiAqPSAxIC8gc2NhbGUuejsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueCAqPSAxIC8gc2NhbGUueDsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueSAqPSAxIC8gc2NhbGUueTsKICAgICAgdHJlZS5hYWJiLnVwcGVyQm91bmQueiAqPSAxIC8gc2NhbGUuejsgLy8gSW5zZXJ0IGFsbCB0cmlhbmdsZXMKCiAgICAgIGNvbnN0IHRyaWFuZ2xlQUFCQiA9IG5ldyBBQUJCKCk7CiAgICAgIGNvbnN0IGEgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBiID0gbmV3IFZlYzMoKTsKICAgICAgY29uc3QgYyA9IG5ldyBWZWMzKCk7CiAgICAgIGNvbnN0IHBvaW50cyA9IFthLCBiLCBjXTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIC8vdGhpcy5nZXRUcmlhbmdsZVZlcnRpY2VzKGksIGEsIGIsIGMpOwogICAgICAgIC8vIEdldCB1bnNjYWxlZCB0cmlhbmdsZSB2ZXJ0cwogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CgogICAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpM10sIGEpOwoKICAgICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAxXSwgYik7CgogICAgICAgIHRoaXMuX2dldFVuc2NhbGVkVmVydGV4KHRoaXMuaW5kaWNlc1tpMyArIDJdLCBjKTsKCiAgICAgICAgdHJpYW5nbGVBQUJCLnNldEZyb21Qb2ludHMocG9pbnRzKTsKICAgICAgICB0cmVlLmluc2VydCh0cmlhbmdsZUFBQkIsIGkpOwogICAgICB9CgogICAgICB0cmVlLnJlbW92ZUVtcHR5Tm9kZXMoKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHRyaWFuZ2xlcyBpbiBhIGxvY2FsIEFBQkIgZnJvbSB0aGUgdHJpbWVzaC4KICAgICAqIEBwYXJhbSByZXN1bHQgQW4gYXJyYXkgb2YgaW50ZWdlcnMsIHJlZmVyZW5jaW5nIHRoZSBxdWVyaWVkIHRyaWFuZ2xlcy4KICAgICAqLwoKCiAgICBnZXRUcmlhbmdsZXNJbkFBQkIoYWFiYiwgcmVzdWx0KSB7CiAgICAgIHVuc2NhbGVkQUFCQi5jb3B5KGFhYmIpOyAvLyBTY2FsZSBpdCB0byBsb2NhbAoKICAgICAgY29uc3Qgc2NhbGUgPSB0aGlzLnNjYWxlOwogICAgICBjb25zdCBpc3ggPSBzY2FsZS54OwogICAgICBjb25zdCBpc3kgPSBzY2FsZS55OwogICAgICBjb25zdCBpc3ogPSBzY2FsZS56OwogICAgICBjb25zdCBsID0gdW5zY2FsZWRBQUJCLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSB1bnNjYWxlZEFBQkIudXBwZXJCb3VuZDsKICAgICAgbC54IC89IGlzeDsKICAgICAgbC55IC89IGlzeTsKICAgICAgbC56IC89IGlzejsKICAgICAgdS54IC89IGlzeDsKICAgICAgdS55IC89IGlzeTsKICAgICAgdS56IC89IGlzejsKICAgICAgcmV0dXJuIHRoaXMudHJlZS5hYWJiUXVlcnkodW5zY2FsZWRBQUJCLCByZXN1bHQpOwogICAgfQogICAgLyoqCiAgICAgKiBzZXRTY2FsZQogICAgICovCgoKICAgIHNldFNjYWxlKHNjYWxlKSB7CiAgICAgIGNvbnN0IHdhc1VuaWZvcm0gPSB0aGlzLnNjYWxlLnggPT09IHRoaXMuc2NhbGUueSAmJiB0aGlzLnNjYWxlLnkgPT09IHRoaXMuc2NhbGUuejsKICAgICAgY29uc3QgaXNVbmlmb3JtID0gc2NhbGUueCA9PT0gc2NhbGUueSAmJiBzY2FsZS55ID09PSBzY2FsZS56OwoKICAgICAgaWYgKCEod2FzVW5pZm9ybSAmJiBpc1VuaWZvcm0pKSB7CiAgICAgICAgLy8gTm9uLXVuaWZvcm0gc2NhbGluZy4gTmVlZCB0byB1cGRhdGUgbm9ybWFscy4KICAgICAgICB0aGlzLnVwZGF0ZU5vcm1hbHMoKTsKICAgICAgfQoKICAgICAgdGhpcy5zY2FsZS5jb3B5KHNjYWxlKTsKICAgICAgdGhpcy51cGRhdGVBQUJCKCk7CiAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdTcGhlcmVSYWRpdXMoKTsKICAgIH0KICAgIC8qKgogICAgICogQ29tcHV0ZSB0aGUgbm9ybWFscyBvZiB0aGUgZmFjZXMuIFdpbGwgc2F2ZSBpbiB0aGUgYC5ub3JtYWxzYCBhcnJheS4KICAgICAqLwoKCiAgICB1cGRhdGVOb3JtYWxzKCkgewogICAgICBjb25zdCBuID0gY29tcHV0ZU5vcm1hbHNfbjsgLy8gR2VuZXJhdGUgbm9ybWFscwoKICAgICAgY29uc3Qgbm9ybWFscyA9IHRoaXMubm9ybWFsczsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgICAgY29uc3QgYSA9IHRoaXMuaW5kaWNlc1tpM107CiAgICAgICAgY29uc3QgYiA9IHRoaXMuaW5kaWNlc1tpMyArIDFdOwogICAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTsKICAgICAgICB0aGlzLmdldFZlcnRleChhLCB2YSk7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoYiwgdmIpOwogICAgICAgIHRoaXMuZ2V0VmVydGV4KGMsIHZjKTsKICAgICAgICBUcmltZXNoLmNvbXB1dGVOb3JtYWwodmIsIHZhLCB2Yywgbik7CiAgICAgICAgbm9ybWFsc1tpM10gPSBuLng7CiAgICAgICAgbm9ybWFsc1tpMyArIDFdID0gbi55OwogICAgICAgIG5vcm1hbHNbaTMgKyAyXSA9IG4uejsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIGAuZWRnZXNgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlRWRnZXMoKSB7CiAgICAgIGNvbnN0IGVkZ2VzID0ge307CgogICAgICBjb25zdCBhZGQgPSAoYSwgYikgPT4gewogICAgICAgIGNvbnN0IGtleSA9IGEgPCBiID8gYCR7YX1fJHtifWAgOiBgJHtifV8ke2F9YDsKICAgICAgICBlZGdlc1trZXldID0gdHJ1ZTsKICAgICAgfTsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIGNvbnN0IGkzID0gaSAqIDM7CiAgICAgICAgY29uc3QgYSA9IHRoaXMuaW5kaWNlc1tpM107CiAgICAgICAgY29uc3QgYiA9IHRoaXMuaW5kaWNlc1tpMyArIDFdOwogICAgICAgIGNvbnN0IGMgPSB0aGlzLmluZGljZXNbaTMgKyAyXTsKICAgICAgICBhZGQoYSwgYik7CiAgICAgICAgYWRkKGIsIGMpOwogICAgICAgIGFkZChjLCBhKTsKICAgICAgfQoKICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGVkZ2VzKTsKICAgICAgdGhpcy5lZGdlcyA9IG5ldyBJbnQxNkFycmF5KGtleXMubGVuZ3RoICogMik7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBjb25zdCBpbmRpY2VzID0ga2V5c1tpXS5zcGxpdCgnXycpOwogICAgICAgIHRoaXMuZWRnZXNbMiAqIGldID0gcGFyc2VJbnQoaW5kaWNlc1swXSwgMTApOwogICAgICAgIHRoaXMuZWRnZXNbMiAqIGkgKyAxXSA9IHBhcnNlSW50KGluZGljZXNbMV0sIDEwKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYW4gZWRnZSB2ZXJ0ZXgKICAgICAqIEBwYXJhbSBmaXJzdE9yU2Vjb25kIDAgb3IgMSwgZGVwZW5kaW5nIG9uIHdoaWNoIG9uZSBvZiB0aGUgdmVydGljZXMgeW91IG5lZWQuCiAgICAgKiBAcGFyYW0gdmVydGV4U3RvcmUgV2hlcmUgdG8gc3RvcmUgdGhlIHJlc3VsdAogICAgICovCgoKICAgIGdldEVkZ2VWZXJ0ZXgoZWRnZUluZGV4LCBmaXJzdE9yU2Vjb25kLCB2ZXJ0ZXhTdG9yZSkgewogICAgICBjb25zdCB2ZXJ0ZXhJbmRleCA9IHRoaXMuZWRnZXNbZWRnZUluZGV4ICogMiArIChmaXJzdE9yU2Vjb25kID8gMSA6IDApXTsKICAgICAgdGhpcy5nZXRWZXJ0ZXgodmVydGV4SW5kZXgsIHZlcnRleFN0b3JlKTsKICAgIH0KICAgIC8qKgogICAgICogR2V0IGEgdmVjdG9yIGFsb25nIGFuIGVkZ2UuCiAgICAgKi8KCgogICAgZ2V0RWRnZVZlY3RvcihlZGdlSW5kZXgsIHZlY3RvclN0b3JlKSB7CiAgICAgIGNvbnN0IHZhID0gZ2V0RWRnZVZlY3Rvcl92YTsKICAgICAgY29uc3QgdmIgPSBnZXRFZGdlVmVjdG9yX3ZiOwogICAgICB0aGlzLmdldEVkZ2VWZXJ0ZXgoZWRnZUluZGV4LCAwLCB2YSk7CiAgICAgIHRoaXMuZ2V0RWRnZVZlcnRleChlZGdlSW5kZXgsIDEsIHZiKTsKICAgICAgdmIudnN1Yih2YSwgdmVjdG9yU3RvcmUpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgZmFjZSBub3JtYWwgZ2l2ZW4gMyB2ZXJ0aWNlcwogICAgICovCgoKICAgIHN0YXRpYyBjb21wdXRlTm9ybWFsKHZhLCB2YiwgdmMsIHRhcmdldCkgewogICAgICB2Yi52c3ViKHZhLCBhYik7CiAgICAgIHZjLnZzdWIodmIsIGNiKTsKICAgICAgY2IuY3Jvc3MoYWIsIHRhcmdldCk7CgogICAgICBpZiAoIXRhcmdldC5pc1plcm8oKSkgewogICAgICAgIHRhcmdldC5ub3JtYWxpemUoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdmVydGV4IGkuCiAgICAgKiBAcmV0dXJuIFRoZSAib3V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgZ2V0VmVydGV4KGksIG91dCkgewogICAgICBjb25zdCBzY2FsZSA9IHRoaXMuc2NhbGU7CgogICAgICB0aGlzLl9nZXRVbnNjYWxlZFZlcnRleChpLCBvdXQpOwoKICAgICAgb3V0LnggKj0gc2NhbGUueDsKICAgICAgb3V0LnkgKj0gc2NhbGUueTsKICAgICAgb3V0LnogKj0gc2NhbGUuejsKICAgICAgcmV0dXJuIG91dDsKICAgIH0KICAgIC8qKgogICAgICogR2V0IHJhdyB2ZXJ0ZXggaQogICAgICogQHJldHVybiBUaGUgIm91dCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIF9nZXRVbnNjYWxlZFZlcnRleChpLCBvdXQpIHsKICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICByZXR1cm4gb3V0LnNldCh2ZXJ0aWNlc1tpM10sIHZlcnRpY2VzW2kzICsgMV0sIHZlcnRpY2VzW2kzICsgMl0pOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYSB2ZXJ0ZXggZnJvbSB0aGUgdHJpbWVzaCx0cmFuc2Zvcm1lZCBieSB0aGUgZ2l2ZW4gcG9zaXRpb24gYW5kIHF1YXRlcm5pb24uCiAgICAgKiBAcmV0dXJuIFRoZSAib3V0IiB2ZWN0b3Igb2JqZWN0CiAgICAgKi8KCgogICAgZ2V0V29ybGRWZXJ0ZXgoaSwgcG9zLCBxdWF0LCBvdXQpIHsKICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgb3V0KTsKICAgICAgVHJhbnNmb3JtLnBvaW50VG9Xb3JsZEZyYW1lKHBvcywgcXVhdCwgb3V0LCBvdXQpOwogICAgICByZXR1cm4gb3V0OwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgdGhlIHRocmVlIHZlcnRpY2VzIGZvciB0cmlhbmdsZSBpLgogICAgICovCgoKICAgIGdldFRyaWFuZ2xlVmVydGljZXMoaSwgYSwgYiwgYykgewogICAgICBjb25zdCBpMyA9IGkgKiAzOwogICAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTNdLCBhKTsKICAgICAgdGhpcy5nZXRWZXJ0ZXgodGhpcy5pbmRpY2VzW2kzICsgMV0sIGIpOwogICAgICB0aGlzLmdldFZlcnRleCh0aGlzLmluZGljZXNbaTMgKyAyXSwgYyk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIG5vcm1hbCBvZiB0cmlhbmdsZSBpLgogICAgICogQHJldHVybiBUaGUgInRhcmdldCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIGdldE5vcm1hbChpLCB0YXJnZXQpIHsKICAgICAgY29uc3QgaTMgPSBpICogMzsKICAgICAgcmV0dXJuIHRhcmdldC5zZXQodGhpcy5ub3JtYWxzW2kzXSwgdGhpcy5ub3JtYWxzW2kzICsgMV0sIHRoaXMubm9ybWFsc1tpMyArIDJdKTsKICAgIH0KICAgIC8qKgogICAgICogQHJldHVybiBUaGUgInRhcmdldCIgdmVjdG9yIG9iamVjdAogICAgICovCgoKICAgIGNhbGN1bGF0ZUxvY2FsSW5lcnRpYShtYXNzLCB0YXJnZXQpIHsKICAgICAgLy8gQXBwcm94aW1hdGUgd2l0aCBib3ggaW5lcnRpYQogICAgICAvLyBFeGFjdCBpbmVydGlhIGNhbGN1bGF0aW9uIGlzIG92ZXJraWxsLCBidXQgc2VlIGh0dHA6Ly9nZW9tZXRyaWN0b29scy5jb20vRG9jdW1lbnRhdGlvbi9Qb2x5aGVkcmFsTWFzc1Byb3BlcnRpZXMucGRmIGZvciB0aGUgY29ycmVjdCB3YXkgdG8gZG8gaXQKICAgICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKGNsaV9hYWJiKTsKICAgICAgY29uc3QgeCA9IGNsaV9hYWJiLnVwcGVyQm91bmQueCAtIGNsaV9hYWJiLmxvd2VyQm91bmQueDsKICAgICAgY29uc3QgeSA9IGNsaV9hYWJiLnVwcGVyQm91bmQueSAtIGNsaV9hYWJiLmxvd2VyQm91bmQueTsKICAgICAgY29uc3QgeiA9IGNsaV9hYWJiLnVwcGVyQm91bmQueiAtIGNsaV9hYWJiLmxvd2VyQm91bmQuejsKICAgICAgcmV0dXJuIHRhcmdldC5zZXQoMS4wIC8gMTIuMCAqIG1hc3MgKiAoMiAqIHkgKiAyICogeSArIDIgKiB6ICogMiAqIHopLCAxLjAgLyAxMi4wICogbWFzcyAqICgyICogeCAqIDIgKiB4ICsgMiAqIHogKiAyICogeiksIDEuMCAvIDEyLjAgKiBtYXNzICogKDIgKiB5ICogMiAqIHkgKyAyICogeCAqIDIgKiB4KSk7CiAgICB9CiAgICAvKioKICAgICAqIENvbXB1dGUgdGhlIGxvY2FsIEFBQkIgZm9yIHRoZSB0cmltZXNoCiAgICAgKi8KCgogICAgY29tcHV0ZUxvY2FsQUFCQihhYWJiKSB7CiAgICAgIGNvbnN0IGwgPSBhYWJiLmxvd2VyQm91bmQ7CiAgICAgIGNvbnN0IHUgPSBhYWJiLnVwcGVyQm91bmQ7CiAgICAgIGNvbnN0IG4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aDsKICAgICAgdGhpcy52ZXJ0aWNlczsKICAgICAgY29uc3QgdiA9IGNvbXB1dGVMb2NhbEFBQkJfd29ybGRWZXJ0OwogICAgICB0aGlzLmdldFZlcnRleCgwLCB2KTsKICAgICAgbC5jb3B5KHYpOwogICAgICB1LmNvcHkodik7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gbjsgaSsrKSB7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CgogICAgICAgIGlmICh2LnggPCBsLngpIHsKICAgICAgICAgIGwueCA9IHYueDsKICAgICAgICB9IGVsc2UgaWYgKHYueCA+IHUueCkgewogICAgICAgICAgdS54ID0gdi54OwogICAgICAgIH0KCiAgICAgICAgaWYgKHYueSA8IGwueSkgewogICAgICAgICAgbC55ID0gdi55OwogICAgICAgIH0gZWxzZSBpZiAodi55ID4gdS55KSB7CiAgICAgICAgICB1LnkgPSB2Lnk7CiAgICAgICAgfQoKICAgICAgICBpZiAodi56IDwgbC56KSB7CiAgICAgICAgICBsLnogPSB2Lno7CiAgICAgICAgfSBlbHNlIGlmICh2LnogPiB1LnopIHsKICAgICAgICAgIHUueiA9IHYuejsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogVXBkYXRlIHRoZSBgLmFhYmJgIHByb3BlcnR5CiAgICAgKi8KCgogICAgdXBkYXRlQUFCQigpIHsKICAgICAgdGhpcy5jb21wdXRlTG9jYWxBQUJCKHRoaXMuYWFiYik7CiAgICB9CiAgICAvKioKICAgICAqIFdpbGwgdXBkYXRlIHRoZSBgLmJvdW5kaW5nU3BoZXJlUmFkaXVzYCBwcm9wZXJ0eQogICAgICovCgoKICAgIHVwZGF0ZUJvdW5kaW5nU3BoZXJlUmFkaXVzKCkgewogICAgICAvLyBBc3N1bWUgcG9pbnRzIGFyZSBkaXN0cmlidXRlZCB3aXRoIGxvY2FsICgwLDAsMCkgYXMgY2VudGVyCiAgICAgIGxldCBtYXgyID0gMDsKICAgICAgY29uc3QgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzOwogICAgICBjb25zdCB2ID0gbmV3IFZlYzMoKTsKCiAgICAgIGZvciAobGV0IGkgPSAwLCBOID0gdmVydGljZXMubGVuZ3RoIC8gMzsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CiAgICAgICAgY29uc3Qgbm9ybTIgPSB2Lmxlbmd0aFNxdWFyZWQoKTsKCiAgICAgICAgaWYgKG5vcm0yID4gbWF4MikgewogICAgICAgICAgbWF4MiA9IG5vcm0yOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5ib3VuZGluZ1NwaGVyZVJhZGl1cyA9IE1hdGguc3FydChtYXgyKTsKICAgIH0KICAgIC8qKgogICAgICogY2FsY3VsYXRlV29ybGRBQUJCCiAgICAgKi8KCgogICAgY2FsY3VsYXRlV29ybGRBQUJCKHBvcywgcXVhdCwgbWluLCBtYXgpIHsKICAgICAgLyoKICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnZlcnRpY2VzLmxlbmd0aCAvIDMsCiAgICAgICAgICAgICAgdmVydHMgPSB0aGlzLnZlcnRpY2VzOwogICAgICAgICAgY29uc3QgbWlueCxtaW55LG1pbnosbWF4eCxtYXh5LG1heHo7CiAgICAgICAgICAgY29uc3QgdiA9IHRlbXBXb3JsZFZlcnRleDsKICAgICAgICAgIGZvcihsZXQgaT0wOyBpPG47IGkrKyl7CiAgICAgICAgICAgICAgdGhpcy5nZXRWZXJ0ZXgoaSwgdik7CiAgICAgICAgICAgICAgcXVhdC52bXVsdCh2LCB2KTsKICAgICAgICAgICAgICBwb3MudmFkZCh2LCB2KTsKICAgICAgICAgICAgICBpZiAodi54IDwgbWlueCB8fCBtaW54PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWlueCA9IHYueDsKICAgICAgICAgICAgICB9IGVsc2UgaWYodi54ID4gbWF4eCB8fCBtYXh4PT09dW5kZWZpbmVkKXsKICAgICAgICAgICAgICAgICAgbWF4eCA9IHYueDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIGlmICh2LnkgPCBtaW55IHx8IG1pbnk9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtaW55ID0gdi55OwogICAgICAgICAgICAgIH0gZWxzZSBpZih2LnkgPiBtYXh5IHx8IG1heHk9PT11bmRlZmluZWQpewogICAgICAgICAgICAgICAgICBtYXh5ID0gdi55OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgaWYgKHYueiA8IG1pbnogfHwgbWluej09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1pbnogPSB2Lno7CiAgICAgICAgICAgICAgfSBlbHNlIGlmKHYueiA+IG1heHogfHwgbWF4ej09PXVuZGVmaW5lZCl7CiAgICAgICAgICAgICAgICAgIG1heHogPSB2Lno7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgbWluLnNldChtaW54LG1pbnksbWlueik7CiAgICAgICAgICBtYXguc2V0KG1heHgsbWF4eSxtYXh6KTsKICAgICAgICAgICovCiAgICAgIC8vIEZhc3RlciBhcHByb3hpbWF0aW9uIHVzaW5nIGxvY2FsIEFBQkIKICAgICAgY29uc3QgZnJhbWUgPSBjYWxjdWxhdGVXb3JsZEFBQkJfZnJhbWU7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGNhbGN1bGF0ZVdvcmxkQUFCQl9hYWJiOwogICAgICBmcmFtZS5wb3NpdGlvbiA9IHBvczsKICAgICAgZnJhbWUucXVhdGVybmlvbiA9IHF1YXQ7CiAgICAgIHRoaXMuYWFiYi50b1dvcmxkRnJhbWUoZnJhbWUsIHJlc3VsdCk7CiAgICAgIG1pbi5jb3B5KHJlc3VsdC5sb3dlckJvdW5kKTsKICAgICAgbWF4LmNvcHkocmVzdWx0LnVwcGVyQm91bmQpOwogICAgfQogICAgLyoqCiAgICAgKiBHZXQgYXBwcm94aW1hdGUgdm9sdW1lCiAgICAgKi8KCgogICAgdm9sdW1lKCkgewogICAgICByZXR1cm4gNC4wICogTWF0aC5QSSAqIHRoaXMuYm91bmRpbmdTcGhlcmVSYWRpdXMgLyAzLjA7CiAgICB9CiAgICAvKioKICAgICAqIENyZWF0ZSBhIFRyaW1lc2ggaW5zdGFuY2UsIHNoYXBlZCBhcyBhIHRvcnVzLgogICAgICovCgoKICAgIHN0YXRpYyBjcmVhdGVUb3J1cyhyYWRpdXMsIHR1YmUsIHJhZGlhbFNlZ21lbnRzLCB0dWJ1bGFyU2VnbWVudHMsIGFyYykgewogICAgICBpZiAocmFkaXVzID09PSB2b2lkIDApIHsKICAgICAgICByYWRpdXMgPSAxOwogICAgICB9CgogICAgICBpZiAodHViZSA9PT0gdm9pZCAwKSB7CiAgICAgICAgdHViZSA9IDAuNTsKICAgICAgfQoKICAgICAgaWYgKHJhZGlhbFNlZ21lbnRzID09PSB2b2lkIDApIHsKICAgICAgICByYWRpYWxTZWdtZW50cyA9IDg7CiAgICAgIH0KCiAgICAgIGlmICh0dWJ1bGFyU2VnbWVudHMgPT09IHZvaWQgMCkgewogICAgICAgIHR1YnVsYXJTZWdtZW50cyA9IDY7CiAgICAgIH0KCiAgICAgIGlmIChhcmMgPT09IHZvaWQgMCkgewogICAgICAgIGFyYyA9IE1hdGguUEkgKiAyOwogICAgICB9CgogICAgICBjb25zdCB2ZXJ0aWNlcyA9IFtdOwogICAgICBjb25zdCBpbmRpY2VzID0gW107CgogICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSByYWRpYWxTZWdtZW50czsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdHVidWxhclNlZ21lbnRzOyBpKyspIHsKICAgICAgICAgIGNvbnN0IHUgPSBpIC8gdHVidWxhclNlZ21lbnRzICogYXJjOwogICAgICAgICAgY29uc3QgdiA9IGogLyByYWRpYWxTZWdtZW50cyAqIE1hdGguUEkgKiAyOwogICAgICAgICAgY29uc3QgeCA9IChyYWRpdXMgKyB0dWJlICogTWF0aC5jb3ModikpICogTWF0aC5jb3ModSk7CiAgICAgICAgICBjb25zdCB5ID0gKHJhZGl1cyArIHR1YmUgKiBNYXRoLmNvcyh2KSkgKiBNYXRoLnNpbih1KTsKICAgICAgICAgIGNvbnN0IHogPSB0dWJlICogTWF0aC5zaW4odik7CiAgICAgICAgICB2ZXJ0aWNlcy5wdXNoKHgsIHksIHopOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZm9yIChsZXQgaiA9IDE7IGogPD0gcmFkaWFsU2VnbWVudHM7IGorKykgewogICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHR1YnVsYXJTZWdtZW50czsgaSsrKSB7CiAgICAgICAgICBjb25zdCBhID0gKHR1YnVsYXJTZWdtZW50cyArIDEpICogaiArIGkgLSAxOwogICAgICAgICAgY29uc3QgYiA9ICh0dWJ1bGFyU2VnbWVudHMgKyAxKSAqIChqIC0gMSkgKyBpIC0gMTsKICAgICAgICAgIGNvbnN0IGMgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiAoaiAtIDEpICsgaTsKICAgICAgICAgIGNvbnN0IGQgPSAodHVidWxhclNlZ21lbnRzICsgMSkgKiBqICsgaTsKICAgICAgICAgIGluZGljZXMucHVzaChhLCBiLCBkKTsKICAgICAgICAgIGluZGljZXMucHVzaChiLCBjLCBkKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgVHJpbWVzaCh2ZXJ0aWNlcywgaW5kaWNlcyk7CiAgICB9CgogIH0KICBjb25zdCBjb21wdXRlTm9ybWFsc19uID0gbmV3IFZlYzMoKTsKICBjb25zdCB1bnNjYWxlZEFBQkIgPSBuZXcgQUFCQigpOwogIGNvbnN0IGdldEVkZ2VWZWN0b3JfdmEgPSBuZXcgVmVjMygpOwogIGNvbnN0IGdldEVkZ2VWZWN0b3JfdmIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNiID0gbmV3IFZlYzMoKTsKICBjb25zdCBhYiA9IG5ldyBWZWMzKCk7CiAgY29uc3QgdmEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHZiID0gbmV3IFZlYzMoKTsKICBjb25zdCB2YyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY2xpX2FhYmIgPSBuZXcgQUFCQigpOwogIGNvbnN0IGNvbXB1dGVMb2NhbEFBQkJfd29ybGRWZXJ0ID0gbmV3IFZlYzMoKTsKICBjb25zdCBjYWxjdWxhdGVXb3JsZEFBQkJfZnJhbWUgPSBuZXcgVHJhbnNmb3JtKCk7CiAgY29uc3QgY2FsY3VsYXRlV29ybGRBQUJCX2FhYmIgPSBuZXcgQUFCQigpOwoKICAvKioKICAgKiBDb25zdHJhaW50IGVxdWF0aW9uIHNvbHZlciBiYXNlIGNsYXNzLgogICAqLwogIGNsYXNzIFNvbHZlciB7CiAgICAvKioKICAgICAqIEFsbCBlcXVhdGlvbnMgdG8gYmUgc29sdmVkCiAgICAgKi8KCiAgICAvKioKICAgICAqIEB0b2RvIHJlbW92ZSB1c2VsZXNzIGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmVxdWF0aW9ucyA9IFtdOwogICAgfQogICAgLyoqCiAgICAgKiBTaG91bGQgYmUgaW1wbGVtZW50ZWQgaW4gc3ViY2xhc3NlcyEKICAgICAqIEB0b2RvIHVzZSBhYnN0cmFjdAogICAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWQKICAgICAqLwoKCiAgICBzb2x2ZShkdCwgd29ybGQpIHsKICAgICAgcmV0dXJuICgvLyBTaG91bGQgcmV0dXJuIHRoZSBudW1iZXIgb2YgaXRlcmF0aW9ucyBkb25lIQogICAgICAgIDAKICAgICAgKTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGFuIGVxdWF0aW9uCiAgICAgKi8KCgogICAgYWRkRXF1YXRpb24oZXEpIHsKICAgICAgaWYgKGVxLmVuYWJsZWQgJiYgIWVxLmJpLmlzVHJpZ2dlciAmJiAhZXEuYmouaXNUcmlnZ2VyKSB7CiAgICAgICAgdGhpcy5lcXVhdGlvbnMucHVzaChlcSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIGFuIGVxdWF0aW9uCiAgICAgKi8KCgogICAgcmVtb3ZlRXF1YXRpb24oZXEpIHsKICAgICAgY29uc3QgZXFzID0gdGhpcy5lcXVhdGlvbnM7CiAgICAgIGNvbnN0IGkgPSBlcXMuaW5kZXhPZihlcSk7CgogICAgICBpZiAoaSAhPT0gLTEpIHsKICAgICAgICBlcXMuc3BsaWNlKGksIDEpOwogICAgICB9CiAgICB9CiAgICAvKioKICAgICAqIEFkZCBhbGwgZXF1YXRpb25zCiAgICAgKi8KCgogICAgcmVtb3ZlQWxsRXF1YXRpb25zKCkgewogICAgICB0aGlzLmVxdWF0aW9ucy5sZW5ndGggPSAwOwogICAgfQoKICB9CgogIC8qKgogICAqIENvbnN0cmFpbnQgZXF1YXRpb24gR2F1c3MtU2VpZGVsIHNvbHZlci4KICAgKiBAdG9kbyBUaGUgc3Bvb2sgcGFyYW1ldGVycyBzaG91bGQgYmUgc3BlY2lmaWVkIGZvciBlYWNoIGNvbnN0cmFpbnQsIG5vdCBnbG9iYWxseS4KICAgKiBAc2VlIGh0dHBzOi8vd3d3OC5jcy51bXUuc2Uva3Vyc2VyLzVEVjA1OC9WVDA5L2xlY3R1cmVzL3Nwb29rbm90ZXMucGRmCiAgICovCiAgY2xhc3MgR1NTb2x2ZXIgZXh0ZW5kcyBTb2x2ZXIgewogICAgLyoqCiAgICAgKiBUaGUgbnVtYmVyIG9mIHNvbHZlciBpdGVyYXRpb25zIGRldGVybWluZXMgcXVhbGl0eSBvZiB0aGUgY29uc3RyYWludHMgaW4gdGhlIHdvcmxkLgogICAgICogVGhlIG1vcmUgaXRlcmF0aW9ucywgdGhlIG1vcmUgY29ycmVjdCBzaW11bGF0aW9uLiBNb3JlIGl0ZXJhdGlvbnMgbmVlZCBtb3JlIGNvbXB1dGF0aW9ucyB0aG91Z2guIElmIHlvdSBoYXZlIGEgbGFyZ2UgZ3Jhdml0eSBmb3JjZSBpbiB5b3VyIHdvcmxkLCB5b3Ugd2lsbCBuZWVkIG1vcmUgaXRlcmF0aW9ucy4KICAgICAqLwoKICAgIC8qKgogICAgICogV2hlbiB0b2xlcmFuY2UgaXMgcmVhY2hlZCwgdGhlIHN5c3RlbSBpcyBhc3N1bWVkIHRvIGJlIGNvbnZlcmdlZC4KICAgICAqLwoKICAgIC8qKgogICAgICogQHRvZG8gcmVtb3ZlIHVzZWxlc3MgY29uc3RydWN0b3IKICAgICAqLwogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuaXRlcmF0aW9ucyA9IDEwOwogICAgICB0aGlzLnRvbGVyYW5jZSA9IDFlLTc7CiAgICB9CiAgICAvKioKICAgICAqIFNvbHZlCiAgICAgKiBAcmV0dXJuIG51bWJlciBvZiBpdGVyYXRpb25zIHBlcmZvcm1lZAogICAgICovCgoKICAgIHNvbHZlKGR0LCB3b3JsZCkgewogICAgICBsZXQgaXRlciA9IDA7CiAgICAgIGNvbnN0IG1heEl0ZXIgPSB0aGlzLml0ZXJhdGlvbnM7CiAgICAgIGNvbnN0IHRvbFNxdWFyZWQgPSB0aGlzLnRvbGVyYW5jZSAqIHRoaXMudG9sZXJhbmNlOwogICAgICBjb25zdCBlcXVhdGlvbnMgPSB0aGlzLmVxdWF0aW9uczsKICAgICAgY29uc3QgTmVxID0gZXF1YXRpb25zLmxlbmd0aDsKICAgICAgY29uc3QgYm9kaWVzID0gd29ybGQuYm9kaWVzOwogICAgICBjb25zdCBOYm9kaWVzID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgaCA9IGR0OwogICAgICBsZXQgQjsKICAgICAgbGV0IGludkM7CiAgICAgIGxldCBkZWx0YWxhbWJkYTsKICAgICAgbGV0IGRlbHRhbGFtYmRhVG90OwogICAgICBsZXQgR1dsYW1iZGE7CiAgICAgIGxldCBsYW1iZGFqOyAvLyBVcGRhdGUgc29sdmUgbWFzcwoKICAgICAgaWYgKE5lcSAhPT0gMCkgewogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYm9kaWVzOyBpKyspIHsKICAgICAgICAgIGJvZGllc1tpXS51cGRhdGVTb2x2ZU1hc3NQcm9wZXJ0aWVzKCk7CiAgICAgICAgfQogICAgICB9IC8vIFRoaW5ncyB0aGF0IGRvIG5vdCBjaGFuZ2UgZHVyaW5nIGl0ZXJhdGlvbiBjYW4gYmUgY29tcHV0ZWQgb25jZQoKCiAgICAgIGNvbnN0IGludkNzID0gR1NTb2x2ZXJfc29sdmVfaW52Q3M7CiAgICAgIGNvbnN0IEJzID0gR1NTb2x2ZXJfc29sdmVfQnM7CiAgICAgIGNvbnN0IGxhbWJkYSA9IEdTU29sdmVyX3NvbHZlX2xhbWJkYTsKICAgICAgaW52Q3MubGVuZ3RoID0gTmVxOwogICAgICBCcy5sZW5ndGggPSBOZXE7CiAgICAgIGxhbWJkYS5sZW5ndGggPSBOZXE7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gTmVxOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gZXF1YXRpb25zW2ldOwogICAgICAgIGxhbWJkYVtpXSA9IDAuMDsKICAgICAgICBCc1tpXSA9IGMuY29tcHV0ZUIoaCk7CiAgICAgICAgaW52Q3NbaV0gPSAxLjAgLyBjLmNvbXB1dGVDKCk7CiAgICAgIH0KCiAgICAgIGlmIChOZXEgIT09IDApIHsKICAgICAgICAvLyBSZXNldCB2bGFtYmRhCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICAgIGNvbnN0IHZsYW1iZGEgPSBiLnZsYW1iZGE7CiAgICAgICAgICBjb25zdCB3bGFtYmRhID0gYi53bGFtYmRhOwogICAgICAgICAgdmxhbWJkYS5zZXQoMCwgMCwgMCk7CiAgICAgICAgICB3bGFtYmRhLnNldCgwLCAwLCAwKTsKICAgICAgICB9IC8vIEl0ZXJhdGUgb3ZlciBlcXVhdGlvbnMKCgogICAgICAgIGZvciAoaXRlciA9IDA7IGl0ZXIgIT09IG1heEl0ZXI7IGl0ZXIrKykgewogICAgICAgICAgLy8gQWNjdW11bGF0ZSB0aGUgdG90YWwgZXJyb3IgZm9yIGVhY2ggaXRlcmF0aW9uLgogICAgICAgICAgZGVsdGFsYW1iZGFUb3QgPSAwLjA7CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IE5lcTsgaisrKSB7CiAgICAgICAgICAgIGNvbnN0IGMgPSBlcXVhdGlvbnNbal07IC8vIENvbXB1dGUgaXRlcmF0aW9uCgogICAgICAgICAgICBCID0gQnNbal07CiAgICAgICAgICAgIGludkMgPSBpbnZDc1tqXTsKICAgICAgICAgICAgbGFtYmRhaiA9IGxhbWJkYVtqXTsKICAgICAgICAgICAgR1dsYW1iZGEgPSBjLmNvbXB1dGVHV2xhbWJkYSgpOwogICAgICAgICAgICBkZWx0YWxhbWJkYSA9IGludkMgKiAoQiAtIEdXbGFtYmRhIC0gYy5lcHMgKiBsYW1iZGFqKTsgLy8gQ2xhbXAgaWYgd2UgYXJlIG5vdCB3aXRoaW4gdGhlIG1pbi9tYXggaW50ZXJ2YWwKCiAgICAgICAgICAgIGlmIChsYW1iZGFqICsgZGVsdGFsYW1iZGEgPCBjLm1pbkZvcmNlKSB7CiAgICAgICAgICAgICAgZGVsdGFsYW1iZGEgPSBjLm1pbkZvcmNlIC0gbGFtYmRhajsKICAgICAgICAgICAgfSBlbHNlIGlmIChsYW1iZGFqICsgZGVsdGFsYW1iZGEgPiBjLm1heEZvcmNlKSB7CiAgICAgICAgICAgICAgZGVsdGFsYW1iZGEgPSBjLm1heEZvcmNlIC0gbGFtYmRhajsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGFtYmRhW2pdICs9IGRlbHRhbGFtYmRhOwogICAgICAgICAgICBkZWx0YWxhbWJkYVRvdCArPSBkZWx0YWxhbWJkYSA+IDAuMCA/IGRlbHRhbGFtYmRhIDogLWRlbHRhbGFtYmRhOyAvLyBhYnMoZGVsdGFsYW1iZGEpCgogICAgICAgICAgICBjLmFkZFRvV2xhbWJkYShkZWx0YWxhbWJkYSk7CiAgICAgICAgICB9IC8vIElmIHRoZSB0b3RhbCBlcnJvciBpcyBzbWFsbCBlbm91Z2ggLSBzdG9wIGl0ZXJhdGUKCgogICAgICAgICAgaWYgKGRlbHRhbGFtYmRhVG90ICogZGVsdGFsYW1iZGFUb3QgPCB0b2xTcXVhcmVkKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0gLy8gQWRkIHJlc3VsdCB0byB2ZWxvY2l0eQoKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgICAgY29uc3QgYiA9IGJvZGllc1tpXTsKICAgICAgICAgIGNvbnN0IHYgPSBiLnZlbG9jaXR5OwogICAgICAgICAgY29uc3QgdyA9IGIuYW5ndWxhclZlbG9jaXR5OwogICAgICAgICAgYi52bGFtYmRhLnZtdWwoYi5saW5lYXJGYWN0b3IsIGIudmxhbWJkYSk7CiAgICAgICAgICB2LnZhZGQoYi52bGFtYmRhLCB2KTsKICAgICAgICAgIGIud2xhbWJkYS52bXVsKGIuYW5ndWxhckZhY3RvciwgYi53bGFtYmRhKTsKICAgICAgICAgIHcudmFkZChiLndsYW1iZGEsIHcpOwogICAgICAgIH0gLy8gU2V0IHRoZSBgLm11bHRpcGxpZXJgIHByb3BlcnR5IG9mIGVhY2ggZXF1YXRpb24KCgogICAgICAgIGxldCBsID0gZXF1YXRpb25zLmxlbmd0aDsKICAgICAgICBjb25zdCBpbnZEdCA9IDEgLyBoOwoKICAgICAgICB3aGlsZSAobC0tKSB7CiAgICAgICAgICBlcXVhdGlvbnNbbF0ubXVsdGlwbGllciA9IGxhbWJkYVtsXSAqIGludkR0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGl0ZXI7CiAgICB9CgogIH0gLy8gSnVzdCB0ZW1wb3JhcnkgbnVtYmVyIGhvbGRlcnMgdGhhdCB3ZSB3YW50IHRvIHJldXNlIGVhY2ggaXRlcmF0aW9uLgoKICBjb25zdCBHU1NvbHZlcl9zb2x2ZV9sYW1iZGEgPSBbXTsKICBjb25zdCBHU1NvbHZlcl9zb2x2ZV9pbnZDcyA9IFtdOwogIGNvbnN0IEdTU29sdmVyX3NvbHZlX0JzID0gW107CgogIC8qKgogICAqIFNwbGl0cyB0aGUgZXF1YXRpb25zIGludG8gaXNsYW5kcyBhbmQgc29sdmVzIHRoZW0gaW5kZXBlbmRlbnRseS4gQ2FuIGltcHJvdmUgcGVyZm9ybWFuY2UuCiAgICovCiAgY2xhc3MgU3BsaXRTb2x2ZXIgZXh0ZW5kcyBTb2x2ZXIgewogICAgLyoqCiAgICAgKiBUaGUgbnVtYmVyIG9mIHNvbHZlciBpdGVyYXRpb25zIGRldGVybWluZXMgcXVhbGl0eSBvZiB0aGUgY29uc3RyYWludHMgaW4gdGhlIHdvcmxkLiBUaGUgbW9yZSBpdGVyYXRpb25zLCB0aGUgbW9yZSBjb3JyZWN0IHNpbXVsYXRpb24uIE1vcmUgaXRlcmF0aW9ucyBuZWVkIG1vcmUgY29tcHV0YXRpb25zIHRob3VnaC4gSWYgeW91IGhhdmUgYSBsYXJnZSBncmF2aXR5IGZvcmNlIGluIHlvdXIgd29ybGQsIHlvdSB3aWxsIG5lZWQgbW9yZSBpdGVyYXRpb25zLgogICAgICovCgogICAgLyoqCiAgICAgKiBXaGVuIHRvbGVyYW5jZSBpcyByZWFjaGVkLCB0aGUgc3lzdGVtIGlzIGFzc3VtZWQgdG8gYmUgY29udmVyZ2VkLgogICAgICovCgogICAgLyoqIHN1YnNvbHZlciAqLwogICAgY29uc3RydWN0b3Ioc3Vic29sdmVyKSB7CiAgICAgIHN1cGVyKCk7CiAgICAgIHRoaXMuaXRlcmF0aW9ucyA9IDEwOwogICAgICB0aGlzLnRvbGVyYW5jZSA9IDFlLTc7CiAgICAgIHRoaXMuc3Vic29sdmVyID0gc3Vic29sdmVyOwogICAgICB0aGlzLm5vZGVzID0gW107CiAgICAgIHRoaXMubm9kZVBvb2wgPSBbXTsgLy8gQ3JlYXRlIG5lZWRlZCBub2RlcywgcmV1c2UgaWYgcG9zc2libGUKCiAgICAgIHdoaWxlICh0aGlzLm5vZGVQb29sLmxlbmd0aCA8IDEyOCkgewogICAgICAgIHRoaXMubm9kZVBvb2wucHVzaCh0aGlzLmNyZWF0ZU5vZGUoKSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogY3JlYXRlTm9kZQogICAgICovCgoKICAgIGNyZWF0ZU5vZGUoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgYm9keTogbnVsbCwKICAgICAgICBjaGlsZHJlbjogW10sCiAgICAgICAgZXFzOiBbXSwKICAgICAgICB2aXNpdGVkOiBmYWxzZQogICAgICB9OwogICAgfQogICAgLyoqCiAgICAgKiBTb2x2ZSB0aGUgc3Vic3lzdGVtcwogICAgICogQHJldHVybiBudW1iZXIgb2YgaXRlcmF0aW9ucyBwZXJmb3JtZWQKICAgICAqLwoKCiAgICBzb2x2ZShkdCwgd29ybGQpIHsKICAgICAgY29uc3Qgbm9kZXMgPSBTcGxpdFNvbHZlcl9zb2x2ZV9ub2RlczsKICAgICAgY29uc3Qgbm9kZVBvb2wgPSB0aGlzLm5vZGVQb29sOwogICAgICBjb25zdCBib2RpZXMgPSB3b3JsZC5ib2RpZXM7CiAgICAgIGNvbnN0IGVxdWF0aW9ucyA9IHRoaXMuZXF1YXRpb25zOwogICAgICBjb25zdCBOZXEgPSBlcXVhdGlvbnMubGVuZ3RoOwogICAgICBjb25zdCBOYm9kaWVzID0gYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3Qgc3Vic29sdmVyID0gdGhpcy5zdWJzb2x2ZXI7IC8vIENyZWF0ZSBuZWVkZWQgbm9kZXMsIHJldXNlIGlmIHBvc3NpYmxlCgogICAgICB3aGlsZSAobm9kZVBvb2wubGVuZ3RoIDwgTmJvZGllcykgewogICAgICAgIG5vZGVQb29sLnB1c2godGhpcy5jcmVhdGVOb2RlKCkpOwogICAgICB9CgogICAgICBub2Rlcy5sZW5ndGggPSBOYm9kaWVzOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBOYm9kaWVzOyBpKyspIHsKICAgICAgICBub2Rlc1tpXSA9IG5vZGVQb29sW2ldOwogICAgICB9IC8vIFJlc2V0IG5vZGUgdmFsdWVzCgoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ib2RpZXM7IGkrKykgewogICAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTsKICAgICAgICBub2RlLmJvZHkgPSBib2RpZXNbaV07CiAgICAgICAgbm9kZS5jaGlsZHJlbi5sZW5ndGggPSAwOwogICAgICAgIG5vZGUuZXFzLmxlbmd0aCA9IDA7CiAgICAgICAgbm9kZS52aXNpdGVkID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSBOZXE7IGsrKykgewogICAgICAgIGNvbnN0IGVxID0gZXF1YXRpb25zW2tdOwogICAgICAgIGNvbnN0IGkgPSBib2RpZXMuaW5kZXhPZihlcS5iaSk7CiAgICAgICAgY29uc3QgaiA9IGJvZGllcy5pbmRleE9mKGVxLmJqKTsKICAgICAgICBjb25zdCBuaSA9IG5vZGVzW2ldOwogICAgICAgIGNvbnN0IG5qID0gbm9kZXNbal07CiAgICAgICAgbmkuY2hpbGRyZW4ucHVzaChuaik7CiAgICAgICAgbmkuZXFzLnB1c2goZXEpOwogICAgICAgIG5qLmNoaWxkcmVuLnB1c2gobmkpOwogICAgICAgIG5qLmVxcy5wdXNoKGVxKTsKICAgICAgfQoKICAgICAgbGV0IGNoaWxkOwogICAgICBsZXQgbiA9IDA7CiAgICAgIGxldCBlcXMgPSBTcGxpdFNvbHZlcl9zb2x2ZV9lcXM7CiAgICAgIHN1YnNvbHZlci50b2xlcmFuY2UgPSB0aGlzLnRvbGVyYW5jZTsKICAgICAgc3Vic29sdmVyLml0ZXJhdGlvbnMgPSB0aGlzLml0ZXJhdGlvbnM7CiAgICAgIGNvbnN0IGR1bW15V29ybGQgPSBTcGxpdFNvbHZlcl9zb2x2ZV9kdW1teVdvcmxkOwoKICAgICAgd2hpbGUgKGNoaWxkID0gZ2V0VW52aXNpdGVkTm9kZShub2RlcykpIHsKICAgICAgICBlcXMubGVuZ3RoID0gMDsKICAgICAgICBkdW1teVdvcmxkLmJvZGllcy5sZW5ndGggPSAwOwogICAgICAgIGJmcyhjaGlsZCwgdmlzaXRGdW5jLCBkdW1teVdvcmxkLmJvZGllcywgZXFzKTsKICAgICAgICBjb25zdCBOZXFzID0gZXFzLmxlbmd0aDsKICAgICAgICBlcXMgPSBlcXMuc29ydChzb3J0QnlJZCk7CgogICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOZXFzOyBpKyspIHsKICAgICAgICAgIHN1YnNvbHZlci5hZGRFcXVhdGlvbihlcXNbaV0pOwogICAgICAgIH0KCiAgICAgICAgc3Vic29sdmVyLnNvbHZlKGR0LCBkdW1teVdvcmxkKTsKICAgICAgICBzdWJzb2x2ZXIucmVtb3ZlQWxsRXF1YXRpb25zKCk7CiAgICAgICAgbisrOwogICAgICB9CgogICAgICByZXR1cm4gbjsKICAgIH0KCiAgfSAvLyBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygc3Vic3lzdGVtcwoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9ub2RlcyA9IFtdOyAvLyBBbGwgYWxsb2NhdGVkIG5vZGUgb2JqZWN0cwoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9lcXMgPSBbXTsgLy8gVGVtcCBhcnJheQoKICBjb25zdCBTcGxpdFNvbHZlcl9zb2x2ZV9kdW1teVdvcmxkID0gewogICAgYm9kaWVzOiBbXQogIH07IC8vIFRlbXAgb2JqZWN0CgogIGNvbnN0IFNUQVRJQyA9IEJvZHkuU1RBVElDOwoKICBmdW5jdGlvbiBnZXRVbnZpc2l0ZWROb2RlKG5vZGVzKSB7CiAgICBjb25zdCBObm9kZXMgPSBub2Rlcy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5ub2RlczsgaSsrKSB7CiAgICAgIGNvbnN0IG5vZGUgPSBub2Rlc1tpXTsKCiAgICAgIGlmICghbm9kZS52aXNpdGVkICYmICEobm9kZS5ib2R5LnR5cGUgJiBTVEFUSUMpKSB7CiAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBjb25zdCBxdWV1ZSA9IFtdOwoKICBmdW5jdGlvbiBiZnMocm9vdCwgdmlzaXRGdW5jLCBiZHMsIGVxcykgewogICAgcXVldWUucHVzaChyb290KTsKICAgIHJvb3QudmlzaXRlZCA9IHRydWU7CiAgICB2aXNpdEZ1bmMocm9vdCwgYmRzLCBlcXMpOwoKICAgIHdoaWxlIChxdWV1ZS5sZW5ndGgpIHsKICAgICAgY29uc3Qgbm9kZSA9IHF1ZXVlLnBvcCgpOyAvLyBMb29wIG92ZXIgdW52aXNpdGVkIGNoaWxkIG5vZGVzCgogICAgICBsZXQgY2hpbGQ7CgogICAgICB3aGlsZSAoY2hpbGQgPSBnZXRVbnZpc2l0ZWROb2RlKG5vZGUuY2hpbGRyZW4pKSB7CiAgICAgICAgY2hpbGQudmlzaXRlZCA9IHRydWU7CiAgICAgICAgdmlzaXRGdW5jKGNoaWxkLCBiZHMsIGVxcyk7CiAgICAgICAgcXVldWUucHVzaChjaGlsZCk7CiAgICAgIH0KICAgIH0KICB9CgogIGZ1bmN0aW9uIHZpc2l0RnVuYyhub2RlLCBiZHMsIGVxcykgewogICAgYmRzLnB1c2gobm9kZS5ib2R5KTsKICAgIGNvbnN0IE5lcXMgPSBub2RlLmVxcy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE5lcXM7IGkrKykgewogICAgICBjb25zdCBlcSA9IG5vZGUuZXFzW2ldOwoKICAgICAgaWYgKCFlcXMuaW5jbHVkZXMoZXEpKSB7CiAgICAgICAgZXFzLnB1c2goZXEpOwogICAgICB9CiAgICB9CiAgfQoKICBmdW5jdGlvbiBzb3J0QnlJZChhLCBiKSB7CiAgICByZXR1cm4gYi5pZCAtIGEuaWQ7CiAgfQoKICAvKioKICAgKiBGb3IgcG9vbGluZyBvYmplY3RzIHRoYXQgY2FuIGJlIHJldXNlZC4KICAgKi8KICBjbGFzcyBQb29sIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLm9iamVjdHMgPSBbXTsKICAgICAgdGhpcy50eXBlID0gT2JqZWN0OwogICAgfQoKICAgIC8qKgogICAgICogUmVsZWFzZSBhbiBvYmplY3QgYWZ0ZXIgdXNlCiAgICAgKi8KICAgIHJlbGVhc2UoKSB7CiAgICAgIGNvbnN0IE5hcmdzID0gYXJndW1lbnRzLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOYXJnczsgaSsrKSB7CiAgICAgICAgdGhpcy5vYmplY3RzLnB1c2goaSA8IDAgfHwgYXJndW1lbnRzLmxlbmd0aCA8PSBpID8gdW5kZWZpbmVkIDogYXJndW1lbnRzW2ldKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgICAvKioKICAgICAqIEdldCBhbiBvYmplY3QKICAgICAqLwoKCiAgICBnZXQoKSB7CiAgICAgIGlmICh0aGlzLm9iamVjdHMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0T2JqZWN0KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMub2JqZWN0cy5wb3AoKTsKICAgICAgfQogICAgfQogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgYW4gb2JqZWN0LiBTaG91bGQgYmUgaW1wbGVtZW50ZWQgaW4gZWFjaCBzdWJjbGFzcy4KICAgICAqLwoKCiAgICBjb25zdHJ1Y3RPYmplY3QoKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignY29uc3RydWN0T2JqZWN0KCkgbm90IGltcGxlbWVudGVkIGluIHRoaXMgUG9vbCBzdWJjbGFzcyB5ZXQhJyk7CiAgICB9CiAgICAvKioKICAgICAqIEByZXR1cm4gU2VsZiwgZm9yIGNoYWluaW5nCiAgICAgKi8KCgogICAgcmVzaXplKHNpemUpIHsKICAgICAgY29uc3Qgb2JqZWN0cyA9IHRoaXMub2JqZWN0czsKCiAgICAgIHdoaWxlIChvYmplY3RzLmxlbmd0aCA+IHNpemUpIHsKICAgICAgICBvYmplY3RzLnBvcCgpOwogICAgICB9CgogICAgICB3aGlsZSAob2JqZWN0cy5sZW5ndGggPCBzaXplKSB7CiAgICAgICAgb2JqZWN0cy5wdXNoKHRoaXMuY29uc3RydWN0T2JqZWN0KCkpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpczsKICAgIH0KCiAgfQoKICAvKioKICAgKiBWZWMzUG9vbAogICAqLwoKICBjbGFzcyBWZWMzUG9vbCBleHRlbmRzIFBvb2wgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7CiAgICAgIHRoaXMudHlwZSA9IFZlYzM7CiAgICB9CgogICAgLyoqCiAgICAgKiBDb25zdHJ1Y3QgYSB2ZWN0b3IKICAgICAqLwogICAgY29uc3RydWN0T2JqZWN0KCkgewogICAgICByZXR1cm4gbmV3IFZlYzMoKTsKICAgIH0KCiAgfQoKICAvLyBOYW1pbmcgcnVsZTogYmFzZWQgb2YgdGhlIG9yZGVyIGluIFNIQVBFX1RZUEVTLAogIC8vIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSBtZXRob2QgaXMgZm9ybWVkIGJ5IHRoZQogIC8vIHNoYXBlIHR5cGUgdGhhdCBjb21lcyBiZWZvcmUsIGluIHRoZSBzZWNvbmQgcGFydAogIC8vIHRoZXJlIGlzIHRoZSBzaGFwZSB0eXBlIHRoYXQgY29tZXMgYWZ0ZXIgaW4gdGhlIFNIQVBFX1RZUEVTIGxpc3QKICBjb25zdCBDT0xMSVNJT05fVFlQRVMgPSB7CiAgICBzcGhlcmVTcGhlcmU6IFNoYXBlLnR5cGVzLlNQSEVSRSwKICAgIHNwaGVyZVBsYW5lOiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5QTEFORSwKICAgIGJveEJveDogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuQk9YLAogICAgc3BoZXJlQm94OiBTaGFwZS50eXBlcy5TUEhFUkUgfCBTaGFwZS50eXBlcy5CT1gsCiAgICBwbGFuZUJveDogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5CT1gsCiAgICBjb252ZXhDb252ZXg6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBzcGhlcmVDb252ZXg6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04sCiAgICBwbGFuZUNvbnZleDogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLAogICAgYm94Q29udmV4OiBTaGFwZS50eXBlcy5CT1ggfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLAogICAgc3BoZXJlSGVpZ2h0ZmllbGQ6IFNoYXBlLnR5cGVzLlNQSEVSRSB8IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxELAogICAgYm94SGVpZ2h0ZmllbGQ6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxELAogICAgY29udmV4SGVpZ2h0ZmllbGQ6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04gfCBTaGFwZS50eXBlcy5IRUlHSFRGSUVMRCwKICAgIHNwaGVyZVBhcnRpY2xlOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLlNQSEVSRSwKICAgIHBsYW5lUGFydGljbGU6IFNoYXBlLnR5cGVzLlBMQU5FIHwgU2hhcGUudHlwZXMuUEFSVElDTEUsCiAgICBib3hQYXJ0aWNsZTogU2hhcGUudHlwZXMuQk9YIHwgU2hhcGUudHlwZXMuUEFSVElDTEUsCiAgICBjb252ZXhQYXJ0aWNsZTogU2hhcGUudHlwZXMuUEFSVElDTEUgfCBTaGFwZS50eXBlcy5DT05WRVhQT0xZSEVEUk9OLAogICAgY3lsaW5kZXJDeWxpbmRlcjogU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBzcGhlcmVDeWxpbmRlcjogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBwbGFuZUN5bGluZGVyOiBTaGFwZS50eXBlcy5QTEFORSB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgYm94Q3lsaW5kZXI6IFNoYXBlLnR5cGVzLkJPWCB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgY29udmV4Q3lsaW5kZXI6IFNoYXBlLnR5cGVzLkNPTlZFWFBPTFlIRURST04gfCBTaGFwZS50eXBlcy5DWUxJTkRFUiwKICAgIGhlaWdodGZpZWxkQ3lsaW5kZXI6IFNoYXBlLnR5cGVzLkhFSUdIVEZJRUxEIHwgU2hhcGUudHlwZXMuQ1lMSU5ERVIsCiAgICBwYXJ0aWNsZUN5bGluZGVyOiBTaGFwZS50eXBlcy5QQVJUSUNMRSB8IFNoYXBlLnR5cGVzLkNZTElOREVSLAogICAgc3BoZXJlVHJpbWVzaDogU2hhcGUudHlwZXMuU1BIRVJFIHwgU2hhcGUudHlwZXMuVFJJTUVTSCwKICAgIHBsYW5lVHJpbWVzaDogU2hhcGUudHlwZXMuUExBTkUgfCBTaGFwZS50eXBlcy5UUklNRVNICiAgfTsKCiAgLyoqCiAgICogSGVscGVyIGNsYXNzIGZvciB0aGUgV29ybGQuIEdlbmVyYXRlcyBDb250YWN0RXF1YXRpb25zLgogICAqIEB0b2RvIFNwaGVyZS1Db252ZXhQb2x5aGVkcm9uIGNvbnRhY3RzCiAgICogQHRvZG8gQ29udGFjdCByZWR1Y3Rpb24KICAgKiBAdG9kbyBzaG91bGQgbW92ZSBtZXRob2RzIHRvIHByb3RvdHlwZQogICAqLwogIGNsYXNzIE5hcnJvd3BoYXNlIHsKICAgIC8qKgogICAgICogSW50ZXJuYWwgc3RvcmFnZSBvZiBwb29sZWQgY29udGFjdCBwb2ludHMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFBvb2xlZCB2ZWN0b3JzLgogICAgICovCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVTcGhlcmVdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVTcGhlcmU7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuc3BoZXJlUGxhbmVdKCkgewogICAgICByZXR1cm4gdGhpcy5zcGhlcmVQbGFuZTsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5ib3hCb3hdKCkgewogICAgICByZXR1cm4gdGhpcy5ib3hCb3g7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuc3BoZXJlQm94XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQm94OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lQm94XSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGxhbmVCb3g7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4Q29udmV4XSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZUNvbnZleF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZUNvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5wbGFuZUNvbnZleF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveENvbnZleF0oKSB7CiAgICAgIHJldHVybiB0aGlzLmJveENvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVIZWlnaHRmaWVsZF0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZUhlaWdodGZpZWxkOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveEhlaWdodGZpZWxkXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94SGVpZ2h0ZmllbGQ7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4SGVpZ2h0ZmllbGRdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhIZWlnaHRmaWVsZDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVQYXJ0aWNsZV0oKSB7CiAgICAgIHJldHVybiB0aGlzLnNwaGVyZVBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lUGFydGljbGVdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZVBhcnRpY2xlOwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLmJveFBhcnRpY2xlXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuYm94UGFydGljbGU7CiAgICB9CgogICAgZ2V0IFtDT0xMSVNJT05fVFlQRVMuY29udmV4UGFydGljbGVdKCkgewogICAgICByZXR1cm4gdGhpcy5jb252ZXhQYXJ0aWNsZTsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5jeWxpbmRlckN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4Q29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnNwaGVyZUN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlQ29udmV4OwogICAgfQoKICAgIGdldCBbQ09MTElTSU9OX1RZUEVTLnBsYW5lQ3lsaW5kZXJdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZUNvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5ib3hDeWxpbmRlcl0oKSB7CiAgICAgIHJldHVybiB0aGlzLmJveENvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5jb252ZXhDeWxpbmRlcl0oKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnZleENvbnZleDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5oZWlnaHRmaWVsZEN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaGVpZ2h0ZmllbGRDeWxpbmRlcjsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5wYXJ0aWNsZUN5bGluZGVyXSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGFydGljbGVDeWxpbmRlcjsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5zcGhlcmVUcmltZXNoXSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3BoZXJlVHJpbWVzaDsKICAgIH0KCiAgICBnZXQgW0NPTExJU0lPTl9UWVBFUy5wbGFuZVRyaW1lc2hdKCkgewogICAgICByZXR1cm4gdGhpcy5wbGFuZVRyaW1lc2g7CiAgICB9IC8vIGdldCBbQ09MTElTSU9OX1RZUEVTLmNvbnZleFRyaW1lc2hdKCkgewogICAgLy8gICByZXR1cm4gdGhpcy5jb252ZXhUcmltZXNoCiAgICAvLyB9CgoKICAgIGNvbnN0cnVjdG9yKHdvcmxkKSB7CiAgICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IFtdOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gW107CiAgICAgIHRoaXMucmVzdWx0ID0gW107CiAgICAgIHRoaXMuZnJpY3Rpb25SZXN1bHQgPSBbXTsKICAgICAgdGhpcy52M3Bvb2wgPSBuZXcgVmVjM1Bvb2woKTsKICAgICAgdGhpcy53b3JsZCA9IHdvcmxkOwogICAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICB0aGlzLmVuYWJsZUZyaWN0aW9uUmVkdWN0aW9uID0gZmFsc2U7CiAgICB9CiAgICAvKioKICAgICAqIE1ha2UgYSBjb250YWN0IG9iamVjdCwgYnkgdXNpbmcgdGhlIGludGVybmFsIHBvb2wgb3IgY3JlYXRpbmcgYSBuZXcgb25lLgogICAgICovCgoKICAgIGNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgb3ZlcnJpZGVTaGFwZUEsIG92ZXJyaWRlU2hhcGVCKSB7CiAgICAgIGxldCBjOwoKICAgICAgaWYgKHRoaXMuY29udGFjdFBvaW50UG9vbC5sZW5ndGgpIHsKICAgICAgICBjID0gdGhpcy5jb250YWN0UG9pbnRQb29sLnBvcCgpOwogICAgICAgIGMuYmkgPSBiaTsKICAgICAgICBjLmJqID0gYmo7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYyA9IG5ldyBDb250YWN0RXF1YXRpb24oYmksIGJqKTsKICAgICAgfQoKICAgICAgYy5lbmFibGVkID0gYmkuY29sbGlzaW9uUmVzcG9uc2UgJiYgYmouY29sbGlzaW9uUmVzcG9uc2UgJiYgc2kuY29sbGlzaW9uUmVzcG9uc2UgJiYgc2ouY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIGNvbnN0IGNtID0gdGhpcy5jdXJyZW50Q29udGFjdE1hdGVyaWFsOwogICAgICBjLnJlc3RpdHV0aW9uID0gY20ucmVzdGl0dXRpb247CiAgICAgIGMuc2V0U3Bvb2tQYXJhbXMoY20uY29udGFjdEVxdWF0aW9uU3RpZmZuZXNzLCBjbS5jb250YWN0RXF1YXRpb25SZWxheGF0aW9uLCB0aGlzLndvcmxkLmR0KTsKICAgICAgY29uc3QgbWF0QSA9IHNpLm1hdGVyaWFsIHx8IGJpLm1hdGVyaWFsOwogICAgICBjb25zdCBtYXRCID0gc2oubWF0ZXJpYWwgfHwgYmoubWF0ZXJpYWw7CgogICAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEucmVzdGl0dXRpb24gPj0gMCAmJiBtYXRCLnJlc3RpdHV0aW9uID49IDApIHsKICAgICAgICBjLnJlc3RpdHV0aW9uID0gbWF0QS5yZXN0aXR1dGlvbiAqIG1hdEIucmVzdGl0dXRpb247CiAgICAgIH0KCiAgICAgIGMuc2kgPSBvdmVycmlkZVNoYXBlQSB8fCBzaTsKICAgICAgYy5zaiA9IG92ZXJyaWRlU2hhcGVCIHx8IHNqOwogICAgICByZXR1cm4gYzsKICAgIH0KCiAgICBjcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGNvbnRhY3RFcXVhdGlvbiwgb3V0QXJyYXkpIHsKICAgICAgY29uc3QgYm9keUEgPSBjb250YWN0RXF1YXRpb24uYmk7CiAgICAgIGNvbnN0IGJvZHlCID0gY29udGFjdEVxdWF0aW9uLmJqOwogICAgICBjb25zdCBzaGFwZUEgPSBjb250YWN0RXF1YXRpb24uc2k7CiAgICAgIGNvbnN0IHNoYXBlQiA9IGNvbnRhY3RFcXVhdGlvbi5zajsKICAgICAgY29uc3Qgd29ybGQgPSB0aGlzLndvcmxkOwogICAgICBjb25zdCBjbSA9IHRoaXMuY3VycmVudENvbnRhY3RNYXRlcmlhbDsgLy8gSWYgZnJpY3Rpb24gb3IgcmVzdGl0dXRpb24gd2VyZSBzcGVjaWZpZWQgaW4gdGhlIG1hdGVyaWFsLCB1c2UgdGhlbQoKICAgICAgbGV0IGZyaWN0aW9uID0gY20uZnJpY3Rpb247CiAgICAgIGNvbnN0IG1hdEEgPSBzaGFwZUEubWF0ZXJpYWwgfHwgYm9keUEubWF0ZXJpYWw7CiAgICAgIGNvbnN0IG1hdEIgPSBzaGFwZUIubWF0ZXJpYWwgfHwgYm9keUIubWF0ZXJpYWw7CgogICAgICBpZiAobWF0QSAmJiBtYXRCICYmIG1hdEEuZnJpY3Rpb24gPj0gMCAmJiBtYXRCLmZyaWN0aW9uID49IDApIHsKICAgICAgICBmcmljdGlvbiA9IG1hdEEuZnJpY3Rpb24gKiBtYXRCLmZyaWN0aW9uOwogICAgICB9CgogICAgICBpZiAoZnJpY3Rpb24gPiAwKSB7CiAgICAgICAgLy8gQ3JlYXRlIDIgdGFuZ2VudCBlcXVhdGlvbnMKICAgICAgICAvLyBVc2VycyBtYXkgcHJvdmlkZSBhIGZvcmNlIGRpZmZlcmVudCBmcm9tIGdsb2JhbCBncmF2aXR5IHRvIHVzZSB3aGVuIGNvbXB1dGluZyBjb250YWN0IGZyaWN0aW9uLgogICAgICAgIGNvbnN0IG11ZyA9IGZyaWN0aW9uICogKHdvcmxkLmZyaWN0aW9uR3Jhdml0eSB8fCB3b3JsZC5ncmF2aXR5KS5sZW5ndGgoKTsKICAgICAgICBsZXQgcmVkdWNlZE1hc3MgPSBib2R5QS5pbnZNYXNzICsgYm9keUIuaW52TWFzczsKCiAgICAgICAgaWYgKHJlZHVjZWRNYXNzID4gMCkgewogICAgICAgICAgcmVkdWNlZE1hc3MgPSAxIC8gcmVkdWNlZE1hc3M7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBwb29sID0gdGhpcy5mcmljdGlvbkVxdWF0aW9uUG9vbDsKICAgICAgICBjb25zdCBjMSA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJvZHlBLCBib2R5QiwgbXVnICogcmVkdWNlZE1hc3MpOwogICAgICAgIGNvbnN0IGMyID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYm9keUEsIGJvZHlCLCBtdWcgKiByZWR1Y2VkTWFzcyk7CiAgICAgICAgYzEuYmkgPSBjMi5iaSA9IGJvZHlBOwogICAgICAgIGMxLmJqID0gYzIuYmogPSBib2R5QjsKICAgICAgICBjMS5taW5Gb3JjZSA9IGMyLm1pbkZvcmNlID0gLW11ZyAqIHJlZHVjZWRNYXNzOwogICAgICAgIGMxLm1heEZvcmNlID0gYzIubWF4Rm9yY2UgPSBtdWcgKiByZWR1Y2VkTWFzczsgLy8gQ29weSBvdmVyIHRoZSByZWxhdGl2ZSB2ZWN0b3JzCgogICAgICAgIGMxLnJpLmNvcHkoY29udGFjdEVxdWF0aW9uLnJpKTsKICAgICAgICBjMS5yai5jb3B5KGNvbnRhY3RFcXVhdGlvbi5yaik7CiAgICAgICAgYzIucmkuY29weShjb250YWN0RXF1YXRpb24ucmkpOwogICAgICAgIGMyLnJqLmNvcHkoY29udGFjdEVxdWF0aW9uLnJqKTsgLy8gQ29uc3RydWN0IHRhbmdlbnRzCgogICAgICAgIGNvbnRhY3RFcXVhdGlvbi5uaS50YW5nZW50cyhjMS50LCBjMi50KTsgLy8gU2V0IHNwb29rIHBhcmFtcwoKICAgICAgICBjMS5zZXRTcG9va1BhcmFtcyhjbS5mcmljdGlvbkVxdWF0aW9uU3RpZmZuZXNzLCBjbS5mcmljdGlvbkVxdWF0aW9uUmVsYXhhdGlvbiwgd29ybGQuZHQpOwogICAgICAgIGMyLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCB3b3JsZC5kdCk7CiAgICAgICAgYzEuZW5hYmxlZCA9IGMyLmVuYWJsZWQgPSBjb250YWN0RXF1YXRpb24uZW5hYmxlZDsKICAgICAgICBvdXRBcnJheS5wdXNoKGMxLCBjMik7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIC8qKgogICAgICogVGFrZSB0aGUgYXZlcmFnZSBOIGxhdGVzdCBjb250YWN0IHBvaW50IG9uIHRoZSBwbGFuZS4KICAgICAqLwoKCiAgICBjcmVhdGVGcmljdGlvbkZyb21BdmVyYWdlKG51bUNvbnRhY3RzKSB7CiAgICAgIC8vIFRoZSBsYXN0IGNvbnRhY3RFcXVhdGlvbgogICAgICBsZXQgYyA9IHRoaXMucmVzdWx0W3RoaXMucmVzdWx0Lmxlbmd0aCAtIDFdOyAvLyBDcmVhdGUgdGhlIHJlc3VsdDogdHdvICJhdmVyYWdlIiBmcmljdGlvbiBlcXVhdGlvbnMKCiAgICAgIGlmICghdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KGMsIHRoaXMuZnJpY3Rpb25SZXN1bHQpIHx8IG51bUNvbnRhY3RzID09PSAxKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCBmMSA9IHRoaXMuZnJpY3Rpb25SZXN1bHRbdGhpcy5mcmljdGlvblJlc3VsdC5sZW5ndGggLSAyXTsKICAgICAgY29uc3QgZjIgPSB0aGlzLmZyaWN0aW9uUmVzdWx0W3RoaXMuZnJpY3Rpb25SZXN1bHQubGVuZ3RoIC0gMV07CiAgICAgIGF2ZXJhZ2VOb3JtYWwuc2V0WmVybygpOwogICAgICBhdmVyYWdlQ29udGFjdFBvaW50QS5zZXRaZXJvKCk7CiAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRCLnNldFplcm8oKTsKICAgICAgY29uc3QgYm9keUEgPSBjLmJpOwogICAgICBjLmJqOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IG51bUNvbnRhY3RzOyBpKyspIHsKICAgICAgICBjID0gdGhpcy5yZXN1bHRbdGhpcy5yZXN1bHQubGVuZ3RoIC0gMSAtIGldOwoKICAgICAgICBpZiAoYy5iaSAhPT0gYm9keUEpIHsKICAgICAgICAgIGF2ZXJhZ2VOb3JtYWwudmFkZChjLm5pLCBhdmVyYWdlTm9ybWFsKTsKICAgICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnZhZGQoYy5yaSwgYXZlcmFnZUNvbnRhY3RQb2ludEEpOwogICAgICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEIudmFkZChjLnJqLCBhdmVyYWdlQ29udGFjdFBvaW50Qik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGF2ZXJhZ2VOb3JtYWwudnN1YihjLm5pLCBhdmVyYWdlTm9ybWFsKTsKICAgICAgICAgIGF2ZXJhZ2VDb250YWN0UG9pbnRBLnZhZGQoYy5yaiwgYXZlcmFnZUNvbnRhY3RQb2ludEEpOwogICAgICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEIudmFkZChjLnJpLCBhdmVyYWdlQ29udGFjdFBvaW50Qik7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCBpbnZOdW1Db250YWN0cyA9IDEgLyBudW1Db250YWN0czsKICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEEuc2NhbGUoaW52TnVtQ29udGFjdHMsIGYxLnJpKTsKICAgICAgYXZlcmFnZUNvbnRhY3RQb2ludEIuc2NhbGUoaW52TnVtQ29udGFjdHMsIGYxLnJqKTsKICAgICAgZjIucmkuY29weShmMS5yaSk7IC8vIFNob3VsZCBiZSB0aGUgc2FtZQoKICAgICAgZjIucmouY29weShmMS5yaik7CiAgICAgIGF2ZXJhZ2VOb3JtYWwubm9ybWFsaXplKCk7CiAgICAgIGF2ZXJhZ2VOb3JtYWwudGFuZ2VudHMoZjEudCwgZjIudCk7IC8vIHJldHVybiBlcTsKICAgIH0KICAgIC8qKgogICAgICogR2VuZXJhdGUgYWxsIGNvbnRhY3RzIGJldHdlZW4gYSBsaXN0IG9mIGJvZHkgcGFpcnMKICAgICAqIEBwYXJhbSBwMSBBcnJheSBvZiBib2R5IGluZGljZXMKICAgICAqIEBwYXJhbSBwMiBBcnJheSBvZiBib2R5IGluZGljZXMKICAgICAqIEBwYXJhbSByZXN1bHQgQXJyYXkgdG8gc3RvcmUgZ2VuZXJhdGVkIGNvbnRhY3RzCiAgICAgKiBAcGFyYW0gb2xkY29udGFjdHMgT3B0aW9uYWwuIEFycmF5IG9mIHJldXNhYmxlIGNvbnRhY3Qgb2JqZWN0cwogICAgICovCgoKICAgIGdldENvbnRhY3RzKHAxLCBwMiwgd29ybGQsIHJlc3VsdCwgb2xkY29udGFjdHMsIGZyaWN0aW9uUmVzdWx0LCBmcmljdGlvblBvb2wpIHsKICAgICAgLy8gU2F2ZSBvbGQgY29udGFjdCBvYmplY3RzCiAgICAgIHRoaXMuY29udGFjdFBvaW50UG9vbCA9IG9sZGNvbnRhY3RzOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25Qb29sID0gZnJpY3Rpb25Qb29sOwogICAgICB0aGlzLnJlc3VsdCA9IHJlc3VsdDsKICAgICAgdGhpcy5mcmljdGlvblJlc3VsdCA9IGZyaWN0aW9uUmVzdWx0OwogICAgICBjb25zdCBxaSA9IHRtcFF1YXQxOwogICAgICBjb25zdCBxaiA9IHRtcFF1YXQyOwogICAgICBjb25zdCB4aSA9IHRtcFZlYzE7CiAgICAgIGNvbnN0IHhqID0gdG1wVmVjMjsKCiAgICAgIGZvciAobGV0IGsgPSAwLCBOID0gcDEubGVuZ3RoOyBrICE9PSBOOyBrKyspIHsKICAgICAgICAvLyBHZXQgY3VycmVudCBjb2xsaXNpb24gYm9kaWVzCiAgICAgICAgY29uc3QgYmkgPSBwMVtrXTsKICAgICAgICBjb25zdCBiaiA9IHAyW2tdOyAvLyBHZXQgY29udGFjdCBtYXRlcmlhbAoKICAgICAgICBsZXQgYm9keUNvbnRhY3RNYXRlcmlhbCA9IG51bGw7CgogICAgICAgIGlmIChiaS5tYXRlcmlhbCAmJiBiai5tYXRlcmlhbCkgewogICAgICAgICAgYm9keUNvbnRhY3RNYXRlcmlhbCA9IHdvcmxkLmdldENvbnRhY3RNYXRlcmlhbChiaS5tYXRlcmlhbCwgYmoubWF0ZXJpYWwpIHx8IG51bGw7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBqdXN0VGVzdCA9IGJpLnR5cGUgJiBCb2R5LktJTkVNQVRJQyAmJiBiai50eXBlICYgQm9keS5TVEFUSUMgfHwgYmkudHlwZSAmIEJvZHkuU1RBVElDICYmIGJqLnR5cGUgJiBCb2R5LktJTkVNQVRJQyB8fCBiaS50eXBlICYgQm9keS5LSU5FTUFUSUMgJiYgYmoudHlwZSAmIEJvZHkuS0lORU1BVElDOwoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJpLnNoYXBlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgYmkucXVhdGVybmlvbi5tdWx0KGJpLnNoYXBlT3JpZW50YXRpb25zW2ldLCBxaSk7CiAgICAgICAgICBiaS5xdWF0ZXJuaW9uLnZtdWx0KGJpLnNoYXBlT2Zmc2V0c1tpXSwgeGkpOwogICAgICAgICAgeGkudmFkZChiaS5wb3NpdGlvbiwgeGkpOwogICAgICAgICAgY29uc3Qgc2kgPSBiaS5zaGFwZXNbaV07CgogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBiai5zaGFwZXMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgLy8gQ29tcHV0ZSB3b3JsZCB0cmFuc2Zvcm0gb2Ygc2hhcGVzCiAgICAgICAgICAgIGJqLnF1YXRlcm5pb24ubXVsdChiai5zaGFwZU9yaWVudGF0aW9uc1tqXSwgcWopOwogICAgICAgICAgICBiai5xdWF0ZXJuaW9uLnZtdWx0KGJqLnNoYXBlT2Zmc2V0c1tqXSwgeGopOwogICAgICAgICAgICB4ai52YWRkKGJqLnBvc2l0aW9uLCB4aik7CiAgICAgICAgICAgIGNvbnN0IHNqID0gYmouc2hhcGVzW2pdOwoKICAgICAgICAgICAgaWYgKCEoc2kuY29sbGlzaW9uRmlsdGVyTWFzayAmIHNqLmNvbGxpc2lvbkZpbHRlckdyb3VwICYmIHNqLmNvbGxpc2lvbkZpbHRlck1hc2sgJiBzaS5jb2xsaXNpb25GaWx0ZXJHcm91cCkpIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHhpLmRpc3RhbmNlVG8oeGopID4gc2kuYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzai5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9IC8vIEdldCBjb2xsaXNpb24gbWF0ZXJpYWwKCgogICAgICAgICAgICBsZXQgc2hhcGVDb250YWN0TWF0ZXJpYWwgPSBudWxsOwoKICAgICAgICAgICAgaWYgKHNpLm1hdGVyaWFsICYmIHNqLm1hdGVyaWFsKSB7CiAgICAgICAgICAgICAgc2hhcGVDb250YWN0TWF0ZXJpYWwgPSB3b3JsZC5nZXRDb250YWN0TWF0ZXJpYWwoc2kubWF0ZXJpYWwsIHNqLm1hdGVyaWFsKSB8fCBudWxsOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLmN1cnJlbnRDb250YWN0TWF0ZXJpYWwgPSBzaGFwZUNvbnRhY3RNYXRlcmlhbCB8fCBib2R5Q29udGFjdE1hdGVyaWFsIHx8IHdvcmxkLmRlZmF1bHRDb250YWN0TWF0ZXJpYWw7IC8vIEdldCBjb250YWN0cwoKICAgICAgICAgICAgY29uc3QgcmVzb2x2ZXJJbmRleCA9IHNpLnR5cGUgfCBzai50eXBlOwogICAgICAgICAgICBjb25zdCByZXNvbHZlciA9IHRoaXNbcmVzb2x2ZXJJbmRleF07CgogICAgICAgICAgICBpZiAocmVzb2x2ZXIpIHsKICAgICAgICAgICAgICBsZXQgcmV0dmFsID0gZmFsc2U7IC8vIFRPIERPOiBpbnZlc3RpZ2F0ZSB3aHkgc3BoZXJlUGFydGljbGUgYW5kIGNvbnZleFBhcnRpY2xlCiAgICAgICAgICAgICAgLy8gcmVzb2x2ZXJzIGV4cGVjdCBzaSBhbmQgc2ogc2hhcGVzIHRvIGJlIGluIHJldmVyc2Ugb3JkZXIKICAgICAgICAgICAgICAvLyAoaS5lLiBsYXJnZXIgaW50ZWdlciB2YWx1ZSB0eXBlIGZpcnN0IGluc3RlYWQgb2Ygc21hbGxlciBmaXJzdCkKCiAgICAgICAgICAgICAgaWYgKHNpLnR5cGUgPCBzai50eXBlKSB7CiAgICAgICAgICAgICAgICByZXR2YWwgPSByZXNvbHZlci5jYWxsKHRoaXMsIHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHZhbCA9IHJlc29sdmVyLmNhbGwodGhpcywgc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCBzaSwgc2osIGp1c3RUZXN0KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmIChyZXR2YWwgJiYganVzdFRlc3QpIHsKICAgICAgICAgICAgICAgIC8vIFJlZ2lzdGVyIG92ZXJsYXAKICAgICAgICAgICAgICAgIHdvcmxkLnNoYXBlT3ZlcmxhcEtlZXBlci5zZXQoc2kuaWQsIHNqLmlkKTsKICAgICAgICAgICAgICAgIHdvcmxkLmJvZHlPdmVybGFwS2VlcGVyLnNldChiaS5pZCwgYmouaWQpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIHNwaGVyZVNwaGVyZShzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICByZXR1cm4geGkuZGlzdGFuY2VTcXVhcmVkKHhqKSA8IChzaS5yYWRpdXMgKyBzai5yYWRpdXMpICoqIDI7CiAgICAgIH0gLy8gV2Ugd2lsbCBoYXZlIG9ubHkgb25lIGNvbnRhY3QgaW4gdGhpcyBjYXNlCgoKICAgICAgY29uc3QgY29udGFjdEVxID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgIHhqLnZzdWIoeGksIGNvbnRhY3RFcS5uaSk7CiAgICAgIGNvbnRhY3RFcS5uaS5ub3JtYWxpemUoKTsgLy8gQ29udGFjdCBwb2ludCBsb2NhdGlvbnMKCiAgICAgIGNvbnRhY3RFcS5yaS5jb3B5KGNvbnRhY3RFcS5uaSk7CiAgICAgIGNvbnRhY3RFcS5yai5jb3B5KGNvbnRhY3RFcS5uaSk7CiAgICAgIGNvbnRhY3RFcS5yaS5zY2FsZShzaS5yYWRpdXMsIGNvbnRhY3RFcS5yaSk7CiAgICAgIGNvbnRhY3RFcS5yai5zY2FsZSgtc2oucmFkaXVzLCBjb250YWN0RXEucmopOwogICAgICBjb250YWN0RXEucmkudmFkZCh4aSwgY29udGFjdEVxLnJpKTsKICAgICAgY29udGFjdEVxLnJpLnZzdWIoYmkucG9zaXRpb24sIGNvbnRhY3RFcS5yaSk7CiAgICAgIGNvbnRhY3RFcS5yai52YWRkKHhqLCBjb250YWN0RXEucmopOwogICAgICBjb250YWN0RXEucmoudnN1Yihiai5wb3NpdGlvbiwgY29udGFjdEVxLnJqKTsKICAgICAgdGhpcy5yZXN1bHQucHVzaChjb250YWN0RXEpOwogICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QoY29udGFjdEVxLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgIH0KCiAgICBzcGhlcmVQbGFuZShzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICAvLyBXZSB3aWxsIGhhdmUgb25lIGNvbnRhY3QgaW4gdGhpcyBjYXNlCiAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOyAvLyBDb250YWN0IG5vcm1hbAoKICAgICAgci5uaS5zZXQoMCwgMCwgMSk7CiAgICAgIHFqLnZtdWx0KHIubmksIHIubmkpOwogICAgICByLm5pLm5lZ2F0ZShyLm5pKTsgLy8gYm9keSBpIGlzIHRoZSBzcGhlcmUsIGZsaXAgbm9ybWFsCgogICAgICByLm5pLm5vcm1hbGl6ZSgpOyAvLyBOZWVkZWQ/CiAgICAgIC8vIFZlY3RvciBmcm9tIHNwaGVyZSBjZW50ZXIgdG8gY29udGFjdCBwb2ludAoKICAgICAgci5uaS5zY2FsZShzaS5yYWRpdXMsIHIucmkpOyAvLyBQcm9qZWN0IGRvd24gc3BoZXJlIG9uIHBsYW5lCgogICAgICB4aS52c3ViKHhqLCBwb2ludF9vbl9wbGFuZV90b19zcGhlcmUpOwogICAgICByLm5pLnNjYWxlKHIubmkuZG90KHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZSksIHBsYW5lX3RvX3NwaGVyZV9vcnRobyk7CiAgICAgIHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZS52c3ViKHBsYW5lX3RvX3NwaGVyZV9vcnRobywgci5yaik7IC8vIFRoZSBzcGhlcmUgcG9zaXRpb24gcHJvamVjdGVkIHRvIHBsYW5lCgogICAgICBpZiAoLXBvaW50X29uX3BsYW5lX3RvX3NwaGVyZS5kb3Qoci5uaSkgPD0gc2kucmFkaXVzKSB7CiAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9IC8vIE1ha2UgaXQgcmVsYXRpdmUgdG8gdGhlIGJvZHkKCgogICAgICAgIGNvbnN0IHJpID0gci5yaTsKICAgICAgICBjb25zdCByaiA9IHIucmo7CiAgICAgICAgcmkudmFkZCh4aSwgcmkpOwogICAgICAgIHJpLnZzdWIoYmkucG9zaXRpb24sIHJpKTsKICAgICAgICByai52YWRkKHhqLCByaik7CiAgICAgICAgcmoudnN1Yihiai5wb3NpdGlvbiwgcmopOwogICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICB9CiAgICB9CgogICAgYm94Qm94KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24ubWF0ZXJpYWwgPSBzai5tYXRlcmlhbDsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmNvbGxpc2lvblJlc3BvbnNlID0gc2kuY29sbGlzaW9uUmVzcG9uc2U7CiAgICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNqLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXgoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgfQoKICAgIHNwaGVyZUJveChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBjb25zdCB2M3Bvb2wgPSB0aGlzLnYzcG9vbDsgLy8gd2UgcmVmZXIgdG8gdGhlIGJveCBhcyBib2R5IGoKCiAgICAgIGNvbnN0IHNpZGVzID0gc3BoZXJlQm94X3NpZGVzOwogICAgICB4aS52c3ViKHhqLCBib3hfdG9fc3BoZXJlKTsKICAgICAgc2ouZ2V0U2lkZU5vcm1hbHMoc2lkZXMsIHFqKTsKICAgICAgY29uc3QgUiA9IHNpLnJhZGl1czsKCiAgICAgIGxldCBmb3VuZCA9IGZhbHNlOyAvLyBTdG9yZSB0aGUgcmVzdWx0aW5nIHNpZGUgcGVuZXRyYXRpb24gaW5mbwoKICAgICAgY29uc3Qgc2lkZV9ucyA9IHNwaGVyZUJveF9zaWRlX25zOwogICAgICBjb25zdCBzaWRlX25zMSA9IHNwaGVyZUJveF9zaWRlX25zMTsKICAgICAgY29uc3Qgc2lkZV9uczIgPSBzcGhlcmVCb3hfc2lkZV9uczI7CiAgICAgIGxldCBzaWRlX2ggPSBudWxsOwogICAgICBsZXQgc2lkZV9wZW5ldHJhdGlvbnMgPSAwOwogICAgICBsZXQgc2lkZV9kb3QxID0gMDsKICAgICAgbGV0IHNpZGVfZG90MiA9IDA7CiAgICAgIGxldCBzaWRlX2Rpc3RhbmNlID0gbnVsbDsKCiAgICAgIGZvciAobGV0IGlkeCA9IDAsIG5zaWRlcyA9IHNpZGVzLmxlbmd0aDsgaWR4ICE9PSBuc2lkZXMgJiYgZm91bmQgPT09IGZhbHNlOyBpZHgrKykgewogICAgICAgIC8vIEdldCB0aGUgcGxhbmUgc2lkZSBub3JtYWwgKG5zKQogICAgICAgIGNvbnN0IG5zID0gc3BoZXJlQm94X25zOwogICAgICAgIG5zLmNvcHkoc2lkZXNbaWR4XSk7CiAgICAgICAgY29uc3QgaCA9IG5zLmxlbmd0aCgpOwogICAgICAgIG5zLm5vcm1hbGl6ZSgpOyAvLyBUaGUgbm9ybWFsL2Rpc3RhbmNlIGRvdCBwcm9kdWN0IHRlbGxzIHdoaWNoIHNpZGUgb2YgdGhlIHBsYW5lIHdlIGFyZQoKICAgICAgICBjb25zdCBkb3QgPSBib3hfdG9fc3BoZXJlLmRvdChucyk7CgogICAgICAgIGlmIChkb3QgPCBoICsgUiAmJiBkb3QgPiAwKSB7CiAgICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgdGhlIG90aGVyIHR3byBkaW1lbnNpb25zCiAgICAgICAgICBjb25zdCBuczEgPSBzcGhlcmVCb3hfbnMxOwogICAgICAgICAgY29uc3QgbnMyID0gc3BoZXJlQm94X25zMjsKICAgICAgICAgIG5zMS5jb3B5KHNpZGVzWyhpZHggKyAxKSAlIDNdKTsKICAgICAgICAgIG5zMi5jb3B5KHNpZGVzWyhpZHggKyAyKSAlIDNdKTsKICAgICAgICAgIGNvbnN0IGgxID0gbnMxLmxlbmd0aCgpOwogICAgICAgICAgY29uc3QgaDIgPSBuczIubGVuZ3RoKCk7CiAgICAgICAgICBuczEubm9ybWFsaXplKCk7CiAgICAgICAgICBuczIubm9ybWFsaXplKCk7CiAgICAgICAgICBjb25zdCBkb3QxID0gYm94X3RvX3NwaGVyZS5kb3QobnMxKTsKICAgICAgICAgIGNvbnN0IGRvdDIgPSBib3hfdG9fc3BoZXJlLmRvdChuczIpOwoKICAgICAgICAgIGlmIChkb3QxIDwgaDEgJiYgZG90MSA+IC1oMSAmJiBkb3QyIDwgaDIgJiYgZG90MiA+IC1oMikgewogICAgICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5hYnMoZG90IC0gaCAtIFIpOwoKICAgICAgICAgICAgaWYgKHNpZGVfZGlzdGFuY2UgPT09IG51bGwgfHwgZGlzdCA8IHNpZGVfZGlzdGFuY2UpIHsKICAgICAgICAgICAgICBzaWRlX2Rpc3RhbmNlID0gZGlzdDsKICAgICAgICAgICAgICBzaWRlX2RvdDEgPSBkb3QxOwogICAgICAgICAgICAgIHNpZGVfZG90MiA9IGRvdDI7CiAgICAgICAgICAgICAgc2lkZV9oID0gaDsKICAgICAgICAgICAgICBzaWRlX25zLmNvcHkobnMpOwogICAgICAgICAgICAgIHNpZGVfbnMxLmNvcHkobnMxKTsKICAgICAgICAgICAgICBzaWRlX25zMi5jb3B5KG5zMik7CiAgICAgICAgICAgICAgc2lkZV9wZW5ldHJhdGlvbnMrKzsKCiAgICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChzaWRlX3BlbmV0cmF0aW9ucykgewogICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICBzaWRlX25zLnNjYWxlKC1SLCByLnJpKTsgLy8gU3BoZXJlIHIKCiAgICAgICAgci5uaS5jb3B5KHNpZGVfbnMpOwogICAgICAgIHIubmkubmVnYXRlKHIubmkpOyAvLyBOb3JtYWwgc2hvdWxkIGJlIG91dCBvZiBzcGhlcmUKCiAgICAgICAgc2lkZV9ucy5zY2FsZShzaWRlX2gsIHNpZGVfbnMpOwogICAgICAgIHNpZGVfbnMxLnNjYWxlKHNpZGVfZG90MSwgc2lkZV9uczEpOwogICAgICAgIHNpZGVfbnMudmFkZChzaWRlX25zMSwgc2lkZV9ucyk7CiAgICAgICAgc2lkZV9uczIuc2NhbGUoc2lkZV9kb3QyLCBzaWRlX25zMik7CiAgICAgICAgc2lkZV9ucy52YWRkKHNpZGVfbnMyLCByLnJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgci5yaS52YWRkKHhpLCByLnJpKTsKICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgIHIucmoudmFkZCh4aiwgci5yaik7CiAgICAgICAgci5yai52c3ViKGJqLnBvc2l0aW9uLCByLnJqKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfSAvLyBDaGVjayBjb3JuZXJzCgoKICAgICAgbGV0IHJqID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQm94X3NwaGVyZV90b19jb3JuZXI7CgogICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gMiAmJiAhZm91bmQ7IGorKykgewogICAgICAgIGZvciAobGV0IGsgPSAwOyBrICE9PSAyICYmICFmb3VuZDsgaysrKSB7CiAgICAgICAgICBmb3IgKGxldCBsID0gMDsgbCAhPT0gMiAmJiAhZm91bmQ7IGwrKykgewogICAgICAgICAgICByai5zZXQoMCwgMCwgMCk7CgogICAgICAgICAgICBpZiAoaikgewogICAgICAgICAgICAgIHJqLnZhZGQoc2lkZXNbMF0sIHJqKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByai52c3ViKHNpZGVzWzBdLCByaik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChrKSB7CiAgICAgICAgICAgICAgcmoudmFkZChzaWRlc1sxXSwgcmopOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHJqLnZzdWIoc2lkZXNbMV0sIHJqKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGwpIHsKICAgICAgICAgICAgICByai52YWRkKHNpZGVzWzJdLCByaik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmoudnN1YihzaWRlc1syXSwgcmopOwogICAgICAgICAgICB9IC8vIFdvcmxkIHBvc2l0aW9uIG9mIGNvcm5lcgoKCiAgICAgICAgICAgIHhqLnZhZGQocmosIHNwaGVyZV90b19jb3JuZXIpOwogICAgICAgICAgICBzcGhlcmVfdG9fY29ybmVyLnZzdWIoeGksIHNwaGVyZV90b19jb3JuZXIpOwoKICAgICAgICAgICAgaWYgKHNwaGVyZV90b19jb3JuZXIubGVuZ3RoU3F1YXJlZCgpIDwgUiAqIFIpIHsKICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgICAgIHIucmkuY29weShzcGhlcmVfdG9fY29ybmVyKTsKICAgICAgICAgICAgICByLnJpLm5vcm1hbGl6ZSgpOwogICAgICAgICAgICAgIHIubmkuY29weShyLnJpKTsKICAgICAgICAgICAgICByLnJpLnNjYWxlKFIsIHIucmkpOwogICAgICAgICAgICAgIHIucmouY29weShyaik7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHYzcG9vbC5yZWxlYXNlKHJqKTsKICAgICAgcmogPSBudWxsOyAvLyBDaGVjayBlZGdlcwoKICAgICAgY29uc3QgZWRnZVRhbmdlbnQgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IGVkZ2VDZW50ZXIgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgIGNvbnN0IHIgPSB2M3Bvb2wuZ2V0KCk7IC8vIHIgPSBlZGdlIGNlbnRlciB0byBzcGhlcmUgY2VudGVyCgogICAgICBjb25zdCBvcnRob2dvbmFsID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBkaXN0ID0gdjNwb29sLmdldCgpOwogICAgICBjb25zdCBOc2lkZXMgPSBzaWRlcy5sZW5ndGg7CgogICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gTnNpZGVzICYmICFmb3VuZDsgaisrKSB7CiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgIT09IE5zaWRlcyAmJiAhZm91bmQ7IGsrKykgewogICAgICAgICAgaWYgKGogJSAzICE9PSBrICUgMykgewogICAgICAgICAgICAvLyBHZXQgZWRnZSB0YW5nZW50CiAgICAgICAgICAgIHNpZGVzW2tdLmNyb3NzKHNpZGVzW2pdLCBlZGdlVGFuZ2VudCk7CiAgICAgICAgICAgIGVkZ2VUYW5nZW50Lm5vcm1hbGl6ZSgpOwogICAgICAgICAgICBzaWRlc1tqXS52YWRkKHNpZGVzW2tdLCBlZGdlQ2VudGVyKTsKICAgICAgICAgICAgci5jb3B5KHhpKTsKICAgICAgICAgICAgci52c3ViKGVkZ2VDZW50ZXIsIHIpOwogICAgICAgICAgICByLnZzdWIoeGosIHIpOwogICAgICAgICAgICBjb25zdCBvcnRob25vcm0gPSByLmRvdChlZGdlVGFuZ2VudCk7IC8vIGRpc3RhbmNlIGZyb20gZWRnZSBjZW50ZXIgdG8gc3BoZXJlIGNlbnRlciBpbiB0aGUgdGFuZ2VudCBkaXJlY3Rpb24KCiAgICAgICAgICAgIGVkZ2VUYW5nZW50LnNjYWxlKG9ydGhvbm9ybSwgb3J0aG9nb25hbCk7IC8vIFZlY3RvciBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBjZW50ZXIgaW4gdGhlIHRhbmdlbnQgZGlyZWN0aW9uCiAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRoaXJkIHNpZGUgb3J0aG9nb25hbCB0byB0aGlzIG9uZQoKICAgICAgICAgICAgbGV0IGwgPSAwOwoKICAgICAgICAgICAgd2hpbGUgKGwgPT09IGogJSAzIHx8IGwgPT09IGsgJSAzKSB7CiAgICAgICAgICAgICAgbCsrOwogICAgICAgICAgICB9IC8vIHZlYyBmcm9tIGVkZ2UgY2VudGVyIHRvIHNwaGVyZSBwcm9qZWN0ZWQgdG8gdGhlIHBsYW5lIG9ydGhvZ29uYWwgdG8gdGhlIGVkZ2UgdGFuZ2VudAoKCiAgICAgICAgICAgIGRpc3QuY29weSh4aSk7CiAgICAgICAgICAgIGRpc3QudnN1YihvcnRob2dvbmFsLCBkaXN0KTsKICAgICAgICAgICAgZGlzdC52c3ViKGVkZ2VDZW50ZXIsIGRpc3QpOwogICAgICAgICAgICBkaXN0LnZzdWIoeGosIGRpc3QpOyAvLyBEaXN0YW5jZXMgaW4gdGFuZ2VudCBkaXJlY3Rpb24gYW5kIGRpc3RhbmNlIGluIHRoZSBwbGFuZSBvcnRob2dvbmFsIHRvIGl0CgogICAgICAgICAgICBjb25zdCB0ZGlzdCA9IE1hdGguYWJzKG9ydGhvbm9ybSk7CiAgICAgICAgICAgIGNvbnN0IG5kaXN0ID0gZGlzdC5sZW5ndGgoKTsKCiAgICAgICAgICAgIGlmICh0ZGlzdCA8IHNpZGVzW2xdLmxlbmd0aCgpICYmIG5kaXN0IDwgUikgewogICAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgICAgY29uc3QgcmVzID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgICAgICBlZGdlQ2VudGVyLnZhZGQob3J0aG9nb25hbCwgcmVzLnJqKTsgLy8gYm94IHJqCgogICAgICAgICAgICAgIHJlcy5yai5jb3B5KHJlcy5yaik7CiAgICAgICAgICAgICAgZGlzdC5uZWdhdGUocmVzLm5pKTsKICAgICAgICAgICAgICByZXMubmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgcmVzLnJpLmNvcHkocmVzLnJqKTsKICAgICAgICAgICAgICByZXMucmkudmFkZCh4aiwgcmVzLnJpKTsKICAgICAgICAgICAgICByZXMucmkudnN1Yih4aSwgcmVzLnJpKTsKICAgICAgICAgICAgICByZXMucmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgcmVzLnJpLnNjYWxlKFIsIHJlcy5yaSk7IC8vIE1ha2UgcmVsYXRpdmUgdG8gYm9kaWVzCgogICAgICAgICAgICAgIHJlcy5yaS52YWRkKHhpLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yaS52c3ViKGJpLnBvc2l0aW9uLCByZXMucmkpOwogICAgICAgICAgICAgIHJlcy5yai52YWRkKHhqLCByZXMucmopOwogICAgICAgICAgICAgIHJlcy5yai52c3ViKGJqLnBvc2l0aW9uLCByZXMucmopOwogICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocmVzKTsKICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QocmVzLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdjNwb29sLnJlbGVhc2UoZWRnZVRhbmdlbnQsIGVkZ2VDZW50ZXIsIHIsIG9ydGhvZ29uYWwsIGRpc3QpOwogICAgfQoKICAgIHBsYW5lQm94KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNqLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNqLm1hdGVyaWFsOwogICAgICBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzai5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgc2ouY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLmlkID0gc2ouaWQ7CiAgICAgIHJldHVybiB0aGlzLnBsYW5lQ29udmV4KHNpLCBzai5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24sIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHNpLCBzaiwganVzdFRlc3QpOwogICAgfQoKICAgIGNvbnZleENvbnZleChzaSwgc2osIHhpLCB4aiwgcWksIHFqLCBiaSwgYmosIHJzaSwgcnNqLCBqdXN0VGVzdCwgZmFjZUxpc3RBLCBmYWNlTGlzdEIpIHsKICAgICAgY29uc3Qgc2VwQXhpcyA9IGNvbnZleENvbnZleF9zZXBBeGlzOwoKICAgICAgaWYgKHhpLmRpc3RhbmNlVG8oeGopID4gc2kuYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzai5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHNpLmZpbmRTZXBhcmF0aW5nQXhpcyhzaiwgeGksIHFpLCB4aiwgcWosIHNlcEF4aXMsIGZhY2VMaXN0QSwgZmFjZUxpc3RCKSkgewogICAgICAgIGNvbnN0IHJlcyA9IFtdOwogICAgICAgIGNvbnN0IHEgPSBjb252ZXhDb252ZXhfcTsKICAgICAgICBzaS5jbGlwQWdhaW5zdEh1bGwoeGksIHFpLCBzaiwgeGosIHFqLCBzZXBBeGlzLCAtMTAwLCAxMDAsIHJlcyk7CiAgICAgICAgbGV0IG51bUNvbnRhY3RzID0gMDsKCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogIT09IHJlcy5sZW5ndGg7IGorKykgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgY29uc3QgcmkgPSByLnJpOwogICAgICAgICAgY29uc3QgcmogPSByLnJqOwogICAgICAgICAgc2VwQXhpcy5uZWdhdGUoci5uaSk7CiAgICAgICAgICByZXNbal0ubm9ybWFsLm5lZ2F0ZShxKTsKICAgICAgICAgIHEuc2NhbGUocmVzW2pdLmRlcHRoLCBxKTsKICAgICAgICAgIHJlc1tqXS5wb2ludC52YWRkKHEsIHJpKTsKICAgICAgICAgIHJqLmNvcHkocmVzW2pdLnBvaW50KTsgLy8gQ29udGFjdCBwb2ludHMgYXJlIGluIHdvcmxkIGNvb3JkaW5hdGVzLiBUcmFuc2Zvcm0gYmFjayB0byByZWxhdGl2ZQoKICAgICAgICAgIHJpLnZzdWIoeGksIHJpKTsKICAgICAgICAgIHJqLnZzdWIoeGosIHJqKTsgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKCiAgICAgICAgICByaS52YWRkKHhpLCByaSk7CiAgICAgICAgICByaS52c3ViKGJpLnBvc2l0aW9uLCByaSk7CiAgICAgICAgICByai52YWRkKHhqLCByaik7CiAgICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7CiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgbnVtQ29udGFjdHMrKzsKCiAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24pIHsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuZW5hYmxlRnJpY3Rpb25SZWR1Y3Rpb24gJiYgbnVtQ29udGFjdHMpIHsKICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgc3BoZXJlQ29udmV4KHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIGNvbnN0IHYzcG9vbCA9IHRoaXMudjNwb29sOwogICAgICB4aS52c3ViKHhqLCBjb252ZXhfdG9fc3BoZXJlKTsKICAgICAgY29uc3Qgbm9ybWFscyA9IHNqLmZhY2VOb3JtYWxzOwogICAgICBjb25zdCBmYWNlcyA9IHNqLmZhY2VzOwogICAgICBjb25zdCB2ZXJ0cyA9IHNqLnZlcnRpY2VzOwogICAgICBjb25zdCBSID0gc2kucmFkaXVzOwogICAgICAvLyAgICAgcmV0dXJuOwogICAgICAvLyB9CgogICAgICBsZXQgZm91bmQgPSBmYWxzZTsgLy8gQ2hlY2sgY29ybmVycwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IHZlcnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IHZlcnRzW2ldOyAvLyBXb3JsZCBwb3NpdGlvbiBvZiBjb3JuZXIKCiAgICAgICAgY29uc3Qgd29ybGRDb3JuZXIgPSBzcGhlcmVDb252ZXhfd29ybGRDb3JuZXI7CiAgICAgICAgcWoudm11bHQodiwgd29ybGRDb3JuZXIpOwogICAgICAgIHhqLnZhZGQod29ybGRDb3JuZXIsIHdvcmxkQ29ybmVyKTsKICAgICAgICBjb25zdCBzcGhlcmVfdG9fY29ybmVyID0gc3BoZXJlQ29udmV4X3NwaGVyZVRvQ29ybmVyOwogICAgICAgIHdvcmxkQ29ybmVyLnZzdWIoeGksIHNwaGVyZV90b19jb3JuZXIpOwoKICAgICAgICBpZiAoc3BoZXJlX3RvX2Nvcm5lci5sZW5ndGhTcXVhcmVkKCkgPCBSICogUikgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihiaSwgYmosIHNpLCBzaiwgcnNpLCByc2opOwogICAgICAgICAgci5yaS5jb3B5KHNwaGVyZV90b19jb3JuZXIpOwogICAgICAgICAgci5yaS5ub3JtYWxpemUoKTsKICAgICAgICAgIHIubmkuY29weShyLnJpKTsKICAgICAgICAgIHIucmkuc2NhbGUoUiwgci5yaSk7CiAgICAgICAgICB3b3JsZENvcm5lci52c3ViKHhqLCByLnJqKTsgLy8gU2hvdWxkIGJlIHJlbGF0aXZlIHRvIHRoZSBib2R5LgoKICAgICAgICAgIHIucmkudmFkZCh4aSwgci5yaSk7CiAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7CiAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfSAvLyBDaGVjayBzaWRlIChwbGFuZSkgaW50ZXJzZWN0aW9ucwoKCiAgICAgIGZvciAobGV0IGkgPSAwLCBuZmFjZXMgPSBmYWNlcy5sZW5ndGg7IGkgIT09IG5mYWNlcyAmJiBmb3VuZCA9PT0gZmFsc2U7IGkrKykgewogICAgICAgIGNvbnN0IG5vcm1hbCA9IG5vcm1hbHNbaV07CiAgICAgICAgY29uc3QgZmFjZSA9IGZhY2VzW2ldOyAvLyBHZXQgd29ybGQtdHJhbnNmb3JtZWQgbm9ybWFsIG9mIHRoZSBmYWNlCgogICAgICAgIGNvbnN0IHdvcmxkTm9ybWFsID0gc3BoZXJlQ29udmV4X3dvcmxkTm9ybWFsOwogICAgICAgIHFqLnZtdWx0KG5vcm1hbCwgd29ybGROb3JtYWwpOyAvLyBHZXQgYSB3b3JsZCB2ZXJ0ZXggZnJvbSB0aGUgZmFjZQoKICAgICAgICBjb25zdCB3b3JsZFBvaW50ID0gc3BoZXJlQ29udmV4X3dvcmxkUG9pbnQ7CiAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVswXV0sIHdvcmxkUG9pbnQpOwogICAgICAgIHdvcmxkUG9pbnQudmFkZCh4aiwgd29ybGRQb2ludCk7IC8vIEdldCBhIHBvaW50IG9uIHRoZSBzcGhlcmUsIGNsb3Nlc3QgdG8gdGhlIGZhY2Ugbm9ybWFsCgogICAgICAgIGNvbnN0IHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSA9IHNwaGVyZUNvbnZleF93b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmU7CiAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSk7CiAgICAgICAgeGkudmFkZCh3b3JsZFNwaGVyZVBvaW50Q2xvc2VzdFRvUGxhbmUsIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZSk7IC8vIFZlY3RvciBmcm9tIGEgZmFjZSBwb2ludCB0byB0aGUgY2xvc2VzdCBwb2ludCBvbiB0aGUgc3BoZXJlCgogICAgICAgIGNvbnN0IHBlbmV0cmF0aW9uVmVjID0gc3BoZXJlQ29udmV4X3BlbmV0cmF0aW9uVmVjOwogICAgICAgIHdvcmxkU3BoZXJlUG9pbnRDbG9zZXN0VG9QbGFuZS52c3ViKHdvcmxkUG9pbnQsIHBlbmV0cmF0aW9uVmVjKTsgLy8gVGhlIHBlbmV0cmF0aW9uLiBOZWdhdGl2ZSB2YWx1ZSBtZWFucyBvdmVybGFwLgoKICAgICAgICBjb25zdCBwZW5ldHJhdGlvbiA9IHBlbmV0cmF0aW9uVmVjLmRvdCh3b3JsZE5vcm1hbCk7CiAgICAgICAgY29uc3Qgd29ybGRQb2ludFRvU3BoZXJlID0gc3BoZXJlQ29udmV4X3NwaGVyZVRvV29ybGRQb2ludDsKICAgICAgICB4aS52c3ViKHdvcmxkUG9pbnQsIHdvcmxkUG9pbnRUb1NwaGVyZSk7CgogICAgICAgIGlmIChwZW5ldHJhdGlvbiA8IDAgJiYgd29ybGRQb2ludFRvU3BoZXJlLmRvdCh3b3JsZE5vcm1hbCkgPiAwKSB7CiAgICAgICAgICAvLyBJbnRlcnNlY3RzIHBsYW5lLiBOb3cgY2hlY2sgaWYgdGhlIHNwaGVyZSBpcyBpbnNpZGUgdGhlIGZhY2UgcG9seWdvbgogICAgICAgICAgY29uc3QgZmFjZVZlcnRzID0gW107IC8vIEZhY2UgdmVydGljZXMsIGluIHdvcmxkIGNvb3JkcwoKICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOdmVydHMgPSBmYWNlLmxlbmd0aDsgaiAhPT0gTnZlcnRzOyBqKyspIHsKICAgICAgICAgICAgY29uc3Qgd29ybGRWZXJ0ZXggPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgIHFqLnZtdWx0KHZlcnRzW2ZhY2Vbal1dLCB3b3JsZFZlcnRleCk7CiAgICAgICAgICAgIHhqLnZhZGQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTsKICAgICAgICAgICAgZmFjZVZlcnRzLnB1c2god29ybGRWZXJ0ZXgpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChwb2ludEluUG9seWdvbihmYWNlVmVydHMsIHdvcmxkTm9ybWFsLCB4aSkpIHsKICAgICAgICAgICAgLy8gSXMgdGhlIHNwaGVyZSBjZW50ZXIgaW4gdGhlIGZhY2UgcG9seWdvbj8KICAgICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTsKICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1SLCByLnJpKTsgLy8gQ29udGFjdCBvZmZzZXQsIGZyb20gc3BoZXJlIGNlbnRlciB0byBjb250YWN0CgogICAgICAgICAgICB3b3JsZE5vcm1hbC5uZWdhdGUoci5uaSk7IC8vIE5vcm1hbCBwb2ludGluZyBvdXQgb2Ygc3BoZXJlCgogICAgICAgICAgICBjb25zdCBwZW5ldHJhdGlvblZlYzIgPSB2M3Bvb2wuZ2V0KCk7CiAgICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKC1wZW5ldHJhdGlvbiwgcGVuZXRyYXRpb25WZWMyKTsKICAgICAgICAgICAgY29uc3QgcGVuZXRyYXRpb25TcGhlcmVQb2ludCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgd29ybGROb3JtYWwuc2NhbGUoLVIsIHBlbmV0cmF0aW9uU3BoZXJlUG9pbnQpOyAvL3hpLnZzdWIoeGopLnZhZGQocGVuZXRyYXRpb25TcGhlcmVQb2ludCkudmFkZChwZW5ldHJhdGlvblZlYzIgLCByLnJqKTsKCiAgICAgICAgICAgIHhpLnZzdWIoeGosIHIucmopOwogICAgICAgICAgICByLnJqLnZhZGQocGVuZXRyYXRpb25TcGhlcmVQb2ludCwgci5yaik7CiAgICAgICAgICAgIHIucmoudmFkZChwZW5ldHJhdGlvblZlYzIsIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICByLnJqLnZhZGQoeGosIHIucmopOwogICAgICAgICAgICByLnJqLnZzdWIoYmoucG9zaXRpb24sIHIucmopOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgICAgICByLnJpLnZzdWIoYmkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblZlYzIpOwogICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShwZW5ldHJhdGlvblNwaGVyZVBvaW50KTsKICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOyAvLyBSZWxlYXNlIHdvcmxkIHZlcnRpY2VzCgogICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykgewogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybjsgLy8gV2Ugb25seSBleHBlY3QgKm9uZSogZmFjZSBjb250YWN0CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBFZGdlPwogICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiAhPT0gZmFjZS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgIC8vIEdldCB0d28gd29ybGQgdHJhbnNmb3JtZWQgdmVydGljZXMKICAgICAgICAgICAgICBjb25zdCB2MSA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBjb25zdCB2MiA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBxai52bXVsdCh2ZXJ0c1tmYWNlWyhqICsgMSkgJSBmYWNlLmxlbmd0aF1dLCB2MSk7CiAgICAgICAgICAgICAgcWoudm11bHQodmVydHNbZmFjZVsoaiArIDIpICUgZmFjZS5sZW5ndGhdXSwgdjIpOwogICAgICAgICAgICAgIHhqLnZhZGQodjEsIHYxKTsKICAgICAgICAgICAgICB4ai52YWRkKHYyLCB2Mik7IC8vIENvbnN0cnVjdCBlZGdlIHZlY3RvcgoKICAgICAgICAgICAgICBjb25zdCBlZGdlID0gc3BoZXJlQ29udmV4X2VkZ2U7CiAgICAgICAgICAgICAgdjIudnN1Yih2MSwgZWRnZSk7IC8vIENvbnN0cnVjdCB0aGUgc2FtZSB2ZWN0b3IsIGJ1dCBub3JtYWxpemVkCgogICAgICAgICAgICAgIGNvbnN0IGVkZ2VVbml0ID0gc3BoZXJlQ29udmV4X2VkZ2VVbml0OwogICAgICAgICAgICAgIGVkZ2UudW5pdChlZGdlVW5pdCk7IC8vIHAgaXMgeGkgcHJvamVjdGVkIG9udG8gdGhlIGVkZ2UKCiAgICAgICAgICAgICAgY29uc3QgcCA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICBjb25zdCB2MV90b194aSA9IHYzcG9vbC5nZXQoKTsKICAgICAgICAgICAgICB4aS52c3ViKHYxLCB2MV90b194aSk7CiAgICAgICAgICAgICAgY29uc3QgZG90ID0gdjFfdG9feGkuZG90KGVkZ2VVbml0KTsKICAgICAgICAgICAgICBlZGdlVW5pdC5zY2FsZShkb3QsIHApOwogICAgICAgICAgICAgIHAudmFkZCh2MSwgcCk7IC8vIENvbXB1dGUgYSB2ZWN0b3IgZnJvbSBwIHRvIHRoZSBjZW50ZXIgb2YgdGhlIHNwaGVyZQoKICAgICAgICAgICAgICBjb25zdCB4aV90b19wID0gdjNwb29sLmdldCgpOwogICAgICAgICAgICAgIHAudnN1Yih4aSwgeGlfdG9fcCk7IC8vIENvbGxpc2lvbiBpZiB0aGUgZWRnZS1zcGhlcmUgZGlzdGFuY2UgaXMgbGVzcyB0aGFuIHRoZSByYWRpdXMKICAgICAgICAgICAgICAvLyBBTkQgaWYgcCBpcyBpbiBiZXR3ZWVuIHYxIGFuZCB2MgoKICAgICAgICAgICAgICBpZiAoZG90ID4gMCAmJiBkb3QgKiBkb3QgPCBlZGdlLmxlbmd0aFNxdWFyZWQoKSAmJiB4aV90b19wLmxlbmd0aFNxdWFyZWQoKSA8IFIgKiBSKSB7CiAgICAgICAgICAgICAgICAvLyBDb2xsaXNpb24gaWYgdGhlIGVkZ2Utc3BoZXJlIGRpc3RhbmNlIGlzIGxlc3MgdGhhbiB0aGUgcmFkaXVzCiAgICAgICAgICAgICAgICAvLyBFZGdlIGNvbnRhY3QhCiAgICAgICAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgICAgICAgICBwLnZzdWIoeGosIHIucmopOwogICAgICAgICAgICAgICAgcC52c3ViKHhpLCByLm5pKTsKICAgICAgICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7CiAgICAgICAgICAgICAgICByLm5pLnNjYWxlKFIsIHIucmkpOyAvLyBTaG91bGQgYmUgcmVsYXRpdmUgdG8gdGhlIGJvZHkuCgogICAgICAgICAgICAgICAgci5yai52YWRkKHhqLCByLnJqKTsKICAgICAgICAgICAgICAgIHIucmoudnN1Yihiai5wb3NpdGlvbiwgci5yaik7IC8vIFNob3VsZCBiZSByZWxhdGl2ZSB0byB0aGUgYm9keS4KCiAgICAgICAgICAgICAgICByLnJpLnZhZGQoeGksIHIucmkpOwogICAgICAgICAgICAgICAgci5yaS52c3ViKGJpLnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7IC8vIFJlbGVhc2Ugd29ybGQgdmVydGljZXMKCiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgTmZhY2V2ZXJ0cyA9IGZhY2VWZXJ0cy5sZW5ndGg7IGogIT09IE5mYWNldmVydHM7IGorKykgewogICAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZShmYWNlVmVydHNbal0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYyKTsKICAgICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHApOwogICAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UoeGlfdG9fcCk7CiAgICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MV90b194aSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICB2M3Bvb2wucmVsZWFzZSh2MSk7CiAgICAgICAgICAgICAgdjNwb29sLnJlbGVhc2UodjIpOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHApOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHhpX3RvX3ApOwogICAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKHYxX3RvX3hpKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyBSZWxlYXNlIHdvcmxkIHZlcnRpY2VzCgoKICAgICAgICAgIGZvciAobGV0IGogPSAwLCBOZmFjZXZlcnRzID0gZmFjZVZlcnRzLmxlbmd0aDsgaiAhPT0gTmZhY2V2ZXJ0czsgaisrKSB7CiAgICAgICAgICAgIHYzcG9vbC5yZWxlYXNlKGZhY2VWZXJ0c1tqXSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgcGxhbmVDb252ZXgocGxhbmVTaGFwZSwgY29udmV4U2hhcGUsIHBsYW5lUG9zaXRpb24sIGNvbnZleFBvc2l0aW9uLCBwbGFuZVF1YXQsIGNvbnZleFF1YXQsIHBsYW5lQm9keSwgY29udmV4Qm9keSwgc2ksIHNqLCBqdXN0VGVzdCkgewogICAgICAvLyBTaW1wbHkgcmV0dXJuIHRoZSBwb2ludHMgYmVoaW5kIHRoZSBwbGFuZS4KICAgICAgY29uc3Qgd29ybGRWZXJ0ZXggPSBwbGFuZUNvbnZleF92OwogICAgICBjb25zdCB3b3JsZE5vcm1hbCA9IHBsYW5lQ29udmV4X25vcm1hbDsKICAgICAgd29ybGROb3JtYWwuc2V0KDAsIDAsIDEpOwogICAgICBwbGFuZVF1YXQudm11bHQod29ybGROb3JtYWwsIHdvcmxkTm9ybWFsKTsgLy8gVHVybiBub3JtYWwgYWNjb3JkaW5nIHRvIHBsYW5lIG9yaWVudGF0aW9uCgogICAgICBsZXQgbnVtQ29udGFjdHMgPSAwOwogICAgICBjb25zdCByZWxwb3MgPSBwbGFuZUNvbnZleF9yZWxwb3M7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSAhPT0gY29udmV4U2hhcGUudmVydGljZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAvLyBHZXQgd29ybGQgY29udmV4IHZlcnRleAogICAgICAgIHdvcmxkVmVydGV4LmNvcHkoY29udmV4U2hhcGUudmVydGljZXNbaV0pOwogICAgICAgIGNvbnZleFF1YXQudm11bHQod29ybGRWZXJ0ZXgsIHdvcmxkVmVydGV4KTsKICAgICAgICBjb252ZXhQb3NpdGlvbi52YWRkKHdvcmxkVmVydGV4LCB3b3JsZFZlcnRleCk7CiAgICAgICAgd29ybGRWZXJ0ZXgudnN1YihwbGFuZVBvc2l0aW9uLCByZWxwb3MpOwogICAgICAgIGNvbnN0IGRvdCA9IHdvcmxkTm9ybWFsLmRvdChyZWxwb3MpOwoKICAgICAgICBpZiAoZG90IDw9IDAuMCkgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmNyZWF0ZUNvbnRhY3RFcXVhdGlvbihwbGFuZUJvZHksIGNvbnZleEJvZHksIHBsYW5lU2hhcGUsIGNvbnZleFNoYXBlLCBzaSwgc2opOyAvLyBHZXQgdmVydGV4IHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZQoKICAgICAgICAgIGNvbnN0IHByb2plY3RlZCA9IHBsYW5lQ29udmV4X3Byb2plY3RlZDsKICAgICAgICAgIHdvcmxkTm9ybWFsLnNjYWxlKHdvcmxkTm9ybWFsLmRvdChyZWxwb3MpLCBwcm9qZWN0ZWQpOwogICAgICAgICAgd29ybGRWZXJ0ZXgudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7CiAgICAgICAgICBwcm9qZWN0ZWQudnN1YihwbGFuZVBvc2l0aW9uLCByLnJpKTsgLy8gRnJvbSBwbGFuZSB0byB2ZXJ0ZXggcHJvamVjdGVkIG9uIHBsYW5lCgogICAgICAgICAgci5uaS5jb3B5KHdvcmxkTm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbCBvdXQgZnJvbSBwbGFuZQogICAgICAgICAgLy8gcmogaXMgbm93IGp1c3QgdGhlIHZlY3RvciBmcm9tIHRoZSBjb252ZXggY2VudGVyIHRvIHRoZSB2ZXJ0ZXgKCiAgICAgICAgICB3b3JsZFZlcnRleC52c3ViKGNvbnZleFBvc2l0aW9uLCByLnJqKTsgLy8gTWFrZSBpdCByZWxhdGl2ZSB0byB0aGUgYm9keQoKICAgICAgICAgIHIucmkudmFkZChwbGFuZVBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgIHIucmkudnN1YihwbGFuZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgci5yai52YWRkKGNvbnZleFBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIHIucmoudnN1Yihjb252ZXhCb2R5LnBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICBudW1Db250YWN0cysrOwoKICAgICAgICAgIGlmICghdGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbikgewogICAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5lbmFibGVGcmljdGlvblJlZHVjdGlvbiAmJiBudW1Db250YWN0cykgewogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25Gcm9tQXZlcmFnZShudW1Db250YWN0cyk7CiAgICAgIH0KICAgIH0KCiAgICBib3hDb252ZXgoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLm1hdGVyaWFsID0gc2kubWF0ZXJpYWw7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5jb2xsaXNpb25SZXNwb25zZSA9IHNpLmNvbGxpc2lvblJlc3BvbnNlOwogICAgICByZXR1cm4gdGhpcy5jb252ZXhDb252ZXgoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgc3BoZXJlSGVpZ2h0ZmllbGQoc3BoZXJlU2hhcGUsIGhmU2hhcGUsIHNwaGVyZVBvcywgaGZQb3MsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTsKICAgICAgY29uc3QgcmFkaXVzID0gc3BoZXJlU2hhcGUucmFkaXVzOwogICAgICBjb25zdCB3ID0gaGZTaGFwZS5lbGVtZW50U2l6ZTsKICAgICAgY29uc3Qgd29ybGRQaWxsYXJPZmZzZXQgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAyOyAvLyBHZXQgc3BoZXJlIHBvc2l0aW9uIHRvIGhlaWdodGZpZWxkIGxvY2FsIQoKICAgICAgY29uc3QgbG9jYWxTcGhlcmVQb3MgPSBzcGhlcmVIZWlnaHRmaWVsZF90bXAxOwogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUoaGZQb3MsIGhmUXVhdCwgc3BoZXJlUG9zLCBsb2NhbFNwaGVyZVBvcyk7IC8vIEdldCB0aGUgaW5kZXggb2YgdGhlIGRhdGEgcG9pbnRzIHRvIHRlc3QgYWdhaW5zdAoKICAgICAgbGV0IGlNaW5YID0gTWF0aC5mbG9vcigobG9jYWxTcGhlcmVQb3MueCAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WCA9IE1hdGguY2VpbCgobG9jYWxTcGhlcmVQb3MueCArIHJhZGl1cykgLyB3KSArIDE7CiAgICAgIGxldCBpTWluWSA9IE1hdGguZmxvb3IoKGxvY2FsU3BoZXJlUG9zLnkgLSByYWRpdXMpIC8gdykgLSAxOwogICAgICBsZXQgaU1heFkgPSBNYXRoLmNlaWwoKGxvY2FsU3BoZXJlUG9zLnkgKyByYWRpdXMpIC8gdykgKyAxOyAvLyBCYWlsIG91dCBpZiB3ZSBhcmUgb3V0IG9mIHRoZSB0ZXJyYWluCgogICAgICBpZiAoaU1heFggPCAwIHx8IGlNYXhZIDwgMCB8fCBpTWluWCA+IGRhdGEubGVuZ3RoIHx8IGlNaW5ZID4gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gQ2xhbXAgaW5kZXggdG8gZWRnZXMKCgogICAgICBpZiAoaU1pblggPCAwKSB7CiAgICAgICAgaU1pblggPSAwOwogICAgICB9CgogICAgICBpZiAoaU1heFggPCAwKSB7CiAgICAgICAgaU1heFggPSAwOwogICAgICB9CgogICAgICBpZiAoaU1pblkgPCAwKSB7CiAgICAgICAgaU1pblkgPSAwOwogICAgICB9CgogICAgICBpZiAoaU1heFkgPCAwKSB7CiAgICAgICAgaU1heFkgPSAwOwogICAgICB9CgogICAgICBpZiAoaU1pblggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWluWCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhYID49IGRhdGEubGVuZ3RoKSB7CiAgICAgICAgaU1heFggPSBkYXRhLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNYXhZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1pblkgPj0gZGF0YVswXS5sZW5ndGgpIHsKICAgICAgICBpTWluWSA9IGRhdGFbMF0ubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgY29uc3QgbWluTWF4ID0gW107CiAgICAgIGhmU2hhcGUuZ2V0UmVjdE1pbk1heChpTWluWCwgaU1pblksIGlNYXhYLCBpTWF4WSwgbWluTWF4KTsKICAgICAgY29uc3QgbWluID0gbWluTWF4WzBdOwogICAgICBjb25zdCBtYXggPSBtaW5NYXhbMV07IC8vIEJhaWwgb3V0IGlmIHdlIGNhbid0IHRvdWNoIHRoZSBib3VuZGluZyBoZWlnaHQgYm94CgogICAgICBpZiAobG9jYWxTcGhlcmVQb3MueiAtIHJhZGl1cyA+IG1heCB8fCBsb2NhbFNwaGVyZVBvcy56ICsgcmFkaXVzIDwgbWluKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnJlc3VsdDsKCiAgICAgIGZvciAobGV0IGkgPSBpTWluWDsgaSA8IGlNYXhYOyBpKyspIHsKICAgICAgICBmb3IgKGxldCBqID0gaU1pblk7IGogPCBpTWF4WTsgaisrKSB7CiAgICAgICAgICBjb25zdCBudW1Db250YWN0c0JlZm9yZSA9IHJlc3VsdC5sZW5ndGg7CiAgICAgICAgICBsZXQgaW50ZXJzZWN0aW5nID0gZmFsc2U7IC8vIExvd2VyIHRyaWFuZ2xlCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCBmYWxzZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICBpZiAoc3BoZXJlUG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzcGhlcmVTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLnNwaGVyZUNvbnZleChzcGhlcmVTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIHNwaGVyZVBvcywgd29ybGRQaWxsYXJPZmZzZXQsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCBzcGhlcmVTaGFwZSwgaGZTaGFwZSwganVzdFRlc3QpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9IC8vIFVwcGVyIHRyaWFuZ2xlCgoKICAgICAgICAgIGhmU2hhcGUuZ2V0Q29udmV4VHJpYW5nbGVQaWxsYXIoaSwgaiwgdHJ1ZSk7CiAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUoaGZQb3MsIGhmUXVhdCwgaGZTaGFwZS5waWxsYXJPZmZzZXQsIHdvcmxkUGlsbGFyT2Zmc2V0KTsKCiAgICAgICAgICBpZiAoc3BoZXJlUG9zLmRpc3RhbmNlVG8od29ybGRQaWxsYXJPZmZzZXQpIDwgaGZTaGFwZS5waWxsYXJDb252ZXguYm91bmRpbmdTcGhlcmVSYWRpdXMgKyBzcGhlcmVTaGFwZS5ib3VuZGluZ1NwaGVyZVJhZGl1cykgewogICAgICAgICAgICBpbnRlcnNlY3RpbmcgPSB0aGlzLnNwaGVyZUNvbnZleChzcGhlcmVTaGFwZSwgaGZTaGFwZS5waWxsYXJDb252ZXgsIHNwaGVyZVBvcywgd29ybGRQaWxsYXJPZmZzZXQsIHNwaGVyZVF1YXQsIGhmUXVhdCwgc3BoZXJlQm9keSwgaGZCb2R5LCBzcGhlcmVTaGFwZSwgaGZTaGFwZSwganVzdFRlc3QpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChqdXN0VGVzdCAmJiBpbnRlcnNlY3RpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgbnVtQ29udGFjdHMgPSByZXN1bHQubGVuZ3RoIC0gbnVtQ29udGFjdHNCZWZvcmU7CgogICAgICAgICAgaWYgKG51bUNvbnRhY3RzID4gMikgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICAvKgogICAgICAgICAgICAvLyBTa2lwIGFsbCBidXQgMQogICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IG51bUNvbnRhY3RzIC0gMTsgaysrKSB7CiAgICAgICAgICAgICAgICByZXN1bHQucG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICovCgogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGJveEhlaWdodGZpZWxkKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgY29udmV4SGVpZ2h0ZmllbGQoY29udmV4U2hhcGUsIGhmU2hhcGUsIGNvbnZleFBvcywgaGZQb3MsIGNvbnZleFF1YXQsIGhmUXVhdCwgY29udmV4Qm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3QgZGF0YSA9IGhmU2hhcGUuZGF0YTsKICAgICAgY29uc3QgdyA9IGhmU2hhcGUuZWxlbWVudFNpemU7CiAgICAgIGNvbnN0IHJhZGl1cyA9IGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzOwogICAgICBjb25zdCB3b3JsZFBpbGxhck9mZnNldCA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDI7CiAgICAgIGNvbnN0IGZhY2VMaXN0ID0gY29udmV4SGVpZ2h0ZmllbGRfZmFjZUxpc3Q7IC8vIEdldCBzcGhlcmUgcG9zaXRpb24gdG8gaGVpZ2h0ZmllbGQgbG9jYWwhCgogICAgICBjb25zdCBsb2NhbENvbnZleFBvcyA9IGNvbnZleEhlaWdodGZpZWxkX3RtcDE7CiAgICAgIFRyYW5zZm9ybS5wb2ludFRvTG9jYWxGcmFtZShoZlBvcywgaGZRdWF0LCBjb252ZXhQb3MsIGxvY2FsQ29udmV4UG9zKTsgLy8gR2V0IHRoZSBpbmRleCBvZiB0aGUgZGF0YSBwb2ludHMgdG8gdGVzdCBhZ2FpbnN0CgogICAgICBsZXQgaU1pblggPSBNYXRoLmZsb29yKChsb2NhbENvbnZleFBvcy54IC0gcmFkaXVzKSAvIHcpIC0gMTsKICAgICAgbGV0IGlNYXhYID0gTWF0aC5jZWlsKChsb2NhbENvbnZleFBvcy54ICsgcmFkaXVzKSAvIHcpICsgMTsKICAgICAgbGV0IGlNaW5ZID0gTWF0aC5mbG9vcigobG9jYWxDb252ZXhQb3MueSAtIHJhZGl1cykgLyB3KSAtIDE7CiAgICAgIGxldCBpTWF4WSA9IE1hdGguY2VpbCgobG9jYWxDb252ZXhQb3MueSArIHJhZGl1cykgLyB3KSArIDE7IC8vIEJhaWwgb3V0IGlmIHdlIGFyZSBvdXQgb2YgdGhlIHRlcnJhaW4KCiAgICAgIGlmIChpTWF4WCA8IDAgfHwgaU1heFkgPCAwIHx8IGlNaW5YID4gZGF0YS5sZW5ndGggfHwgaU1pblkgPiBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBDbGFtcCBpbmRleCB0byBlZGdlcwoKCiAgICAgIGlmIChpTWluWCA8IDApIHsKICAgICAgICBpTWluWCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WCA8IDApIHsKICAgICAgICBpTWF4WCA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA8IDApIHsKICAgICAgICBpTWluWSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWF4WSA8IDApIHsKICAgICAgICBpTWF4WSA9IDA7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWCA+PSBkYXRhLmxlbmd0aCkgewogICAgICAgIGlNaW5YID0gZGF0YS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBpZiAoaU1heFggPj0gZGF0YS5sZW5ndGgpIHsKICAgICAgICBpTWF4WCA9IGRhdGEubGVuZ3RoIC0gMTsKICAgICAgfQoKICAgICAgaWYgKGlNYXhZID49IGRhdGFbMF0ubGVuZ3RoKSB7CiAgICAgICAgaU1heFkgPSBkYXRhWzBdLmxlbmd0aCAtIDE7CiAgICAgIH0KCiAgICAgIGlmIChpTWluWSA+PSBkYXRhWzBdLmxlbmd0aCkgewogICAgICAgIGlNaW5ZID0gZGF0YVswXS5sZW5ndGggLSAxOwogICAgICB9CgogICAgICBjb25zdCBtaW5NYXggPSBbXTsKICAgICAgaGZTaGFwZS5nZXRSZWN0TWluTWF4KGlNaW5YLCBpTWluWSwgaU1heFgsIGlNYXhZLCBtaW5NYXgpOwogICAgICBjb25zdCBtaW4gPSBtaW5NYXhbMF07CiAgICAgIGNvbnN0IG1heCA9IG1pbk1heFsxXTsgLy8gQmFpbCBvdXQgaWYgd2UncmUgY2FudCB0b3VjaCB0aGUgYm91bmRpbmcgaGVpZ2h0IGJveAoKICAgICAgaWYgKGxvY2FsQ29udmV4UG9zLnogLSByYWRpdXMgPiBtYXggfHwgbG9jYWxDb252ZXhQb3MueiArIHJhZGl1cyA8IG1pbikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IGlNaW5YOyBpIDwgaU1heFg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSBpTWluWTsgaiA8IGlNYXhZOyBqKyspIHsKICAgICAgICAgIGxldCBpbnRlcnNlY3RpbmcgPSBmYWxzZTsgLy8gTG93ZXIgdHJpYW5nbGUKCiAgICAgICAgICBoZlNoYXBlLmdldENvbnZleFRyaWFuZ2xlUGlsbGFyKGksIGosIGZhbHNlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuY29udmV4Q29udmV4KGNvbnZleFNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgY29udmV4UG9zLCB3b3JsZFBpbGxhck9mZnNldCwgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIG51bGwsIG51bGwsIGp1c3RUZXN0LCBmYWNlTGlzdCwgbnVsbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0gLy8gVXBwZXIgdHJpYW5nbGUKCgogICAgICAgICAgaGZTaGFwZS5nZXRDb252ZXhUcmlhbmdsZVBpbGxhcihpLCBqLCB0cnVlKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZShoZlBvcywgaGZRdWF0LCBoZlNoYXBlLnBpbGxhck9mZnNldCwgd29ybGRQaWxsYXJPZmZzZXQpOwoKICAgICAgICAgIGlmIChjb252ZXhQb3MuZGlzdGFuY2VUbyh3b3JsZFBpbGxhck9mZnNldCkgPCBoZlNoYXBlLnBpbGxhckNvbnZleC5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIGNvbnZleFNoYXBlLmJvdW5kaW5nU3BoZXJlUmFkaXVzKSB7CiAgICAgICAgICAgIGludGVyc2VjdGluZyA9IHRoaXMuY29udmV4Q29udmV4KGNvbnZleFNoYXBlLCBoZlNoYXBlLnBpbGxhckNvbnZleCwgY29udmV4UG9zLCB3b3JsZFBpbGxhck9mZnNldCwgY29udmV4UXVhdCwgaGZRdWF0LCBjb252ZXhCb2R5LCBoZkJvZHksIG51bGwsIG51bGwsIGp1c3RUZXN0LCBmYWNlTGlzdCwgbnVsbCk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGp1c3RUZXN0ICYmIGludGVyc2VjdGluZykgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBzcGhlcmVQYXJ0aWNsZShzaiwgc2ksIHhqLCB4aSwgcWosIHFpLCBiaiwgYmksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICAvLyBUaGUgbm9ybWFsIGlzIHRoZSB1bml0IHZlY3RvciBmcm9tIHNwaGVyZSBjZW50ZXIgdG8gcGFydGljbGUgY2VudGVyCiAgICAgIGNvbnN0IG5vcm1hbCA9IHBhcnRpY2xlU3BoZXJlX25vcm1hbDsKICAgICAgbm9ybWFsLnNldCgwLCAwLCAxKTsKICAgICAgeGkudnN1Yih4aiwgbm9ybWFsKTsKICAgICAgY29uc3QgbGVuZ3RoU3F1YXJlZCA9IG5vcm1hbC5sZW5ndGhTcXVhcmVkKCk7CgogICAgICBpZiAobGVuZ3RoU3F1YXJlZCA8PSBzai5yYWRpdXMgKiBzai5yYWRpdXMpIHsKICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKGJpLCBiaiwgc2ksIHNqLCByc2ksIHJzaik7CiAgICAgICAgbm9ybWFsLm5vcm1hbGl6ZSgpOwogICAgICAgIHIucmouY29weShub3JtYWwpOwogICAgICAgIHIucmouc2NhbGUoc2oucmFkaXVzLCByLnJqKTsKICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgICAgci5uaS5uZWdhdGUoci5uaSk7CiAgICAgICAgci5yaS5zZXQoMCwgMCwgMCk7IC8vIENlbnRlciBvZiBwYXJ0aWNsZQoKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIHBsYW5lUGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgY29uc3Qgbm9ybWFsID0gcGFydGljbGVQbGFuZV9ub3JtYWw7CiAgICAgIG5vcm1hbC5zZXQoMCwgMCwgMSk7CiAgICAgIGJqLnF1YXRlcm5pb24udm11bHQobm9ybWFsLCBub3JtYWwpOyAvLyBUdXJuIG5vcm1hbCBhY2NvcmRpbmcgdG8gcGxhbmUgb3JpZW50YXRpb24KCiAgICAgIGNvbnN0IHJlbHBvcyA9IHBhcnRpY2xlUGxhbmVfcmVscG9zOwogICAgICB4aS52c3ViKGJqLnBvc2l0aW9uLCByZWxwb3MpOwogICAgICBjb25zdCBkb3QgPSBub3JtYWwuZG90KHJlbHBvcyk7CgogICAgICBpZiAoZG90IDw9IDAuMCkgewogICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICByLm5pLmNvcHkobm9ybWFsKTsgLy8gQ29udGFjdCBub3JtYWwgaXMgdGhlIHBsYW5lIG5vcm1hbAoKICAgICAgICByLm5pLm5lZ2F0ZShyLm5pKTsKICAgICAgICByLnJpLnNldCgwLCAwLCAwKTsgLy8gQ2VudGVyIG9mIHBhcnRpY2xlCiAgICAgICAgLy8gR2V0IHBhcnRpY2xlIHBvc2l0aW9uIHByb2plY3RlZCBvbiBwbGFuZQoKICAgICAgICBjb25zdCBwcm9qZWN0ZWQgPSBwYXJ0aWNsZVBsYW5lX3Byb2plY3RlZDsKICAgICAgICBub3JtYWwuc2NhbGUobm9ybWFsLmRvdCh4aSksIHByb2plY3RlZCk7CiAgICAgICAgeGkudnN1Yihwcm9qZWN0ZWQsIHByb2plY3RlZCk7IC8vcHJvamVjdGVkLnZhZGQoYmoucG9zaXRpb24scHJvamVjdGVkKTsKICAgICAgICAvLyByaiBpcyBub3cgdGhlIHByb2plY3RlZCB3b3JsZCBwb3NpdGlvbiBtaW51cyBwbGFuZSBwb3NpdGlvbgoKICAgICAgICByLnJqLmNvcHkocHJvamVjdGVkKTsKICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgfQogICAgfQoKICAgIGJveFBhcnRpY2xlKHNpLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIHNpLmNvbnZleFBvbHloZWRyb25SZXByZXNlbnRhdGlvbi5tYXRlcmlhbCA9IHNpLm1hdGVyaWFsOwogICAgICBzaS5jb252ZXhQb2x5aGVkcm9uUmVwcmVzZW50YXRpb24uY29sbGlzaW9uUmVzcG9uc2UgPSBzaS5jb2xsaXNpb25SZXNwb25zZTsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4UGFydGljbGUoc2kuY29udmV4UG9seWhlZHJvblJlcHJlc2VudGF0aW9uLCBzaiwgeGksIHhqLCBxaSwgcWosIGJpLCBiaiwgc2ksIHNqLCBqdXN0VGVzdCk7CiAgICB9CgogICAgY29udmV4UGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgbGV0IHBlbmV0cmF0ZWRGYWNlSW5kZXggPSAtMTsKICAgICAgY29uc3QgcGVuZXRyYXRlZEZhY2VOb3JtYWwgPSBjb252ZXhQYXJ0aWNsZV9wZW5ldHJhdGVkRmFjZU5vcm1hbDsKICAgICAgY29uc3Qgd29ybGRQZW5ldHJhdGlvblZlYyA9IGNvbnZleFBhcnRpY2xlX3dvcmxkUGVuZXRyYXRpb25WZWM7CiAgICAgIGxldCBtaW5QZW5ldHJhdGlvbiA9IG51bGw7CgogICAgICBjb25zdCBsb2NhbCA9IGNvbnZleFBhcnRpY2xlX2xvY2FsOwogICAgICBsb2NhbC5jb3B5KHhpKTsKICAgICAgbG9jYWwudnN1Yih4aiwgbG9jYWwpOyAvLyBDb252ZXJ0IHBvc2l0aW9uIHRvIHJlbGF0aXZlIHRoZSBjb252ZXggb3JpZ2luCgogICAgICBxai5jb25qdWdhdGUoY3FqKTsKICAgICAgY3FqLnZtdWx0KGxvY2FsLCBsb2NhbCk7CgogICAgICBpZiAoc2oucG9pbnRJc0luc2lkZShsb2NhbCkpIHsKICAgICAgICBpZiAoc2oud29ybGRWZXJ0aWNlc05lZWRzVXBkYXRlKSB7CiAgICAgICAgICBzai5jb21wdXRlV29ybGRWZXJ0aWNlcyh4aiwgcWopOwogICAgICAgIH0KCiAgICAgICAgaWYgKHNqLndvcmxkRmFjZU5vcm1hbHNOZWVkc1VwZGF0ZSkgewogICAgICAgICAgc2ouY29tcHV0ZVdvcmxkRmFjZU5vcm1hbHMocWopOwogICAgICAgIH0gLy8gRm9yIGVhY2ggd29ybGQgcG9seWdvbiBpbiB0aGUgcG9seWhlZHJhCgoKICAgICAgICBmb3IgKGxldCBpID0gMCwgbmZhY2VzID0gc2ouZmFjZXMubGVuZ3RoOyBpICE9PSBuZmFjZXM7IGkrKykgewogICAgICAgICAgLy8gQ29uc3RydWN0IHdvcmxkIGZhY2UgdmVydGljZXMKICAgICAgICAgIGNvbnN0IHZlcnRzID0gW3NqLndvcmxkVmVydGljZXNbc2ouZmFjZXNbaV1bMF1dXTsKICAgICAgICAgIGNvbnN0IG5vcm1hbCA9IHNqLndvcmxkRmFjZU5vcm1hbHNbaV07IC8vIENoZWNrIGhvdyBtdWNoIHRoZSBwYXJ0aWNsZSBwZW5ldHJhdGVzIHRoZSBwb2x5Z29uIHBsYW5lLgoKICAgICAgICAgIHhpLnZzdWIodmVydHNbMF0sIGNvbnZleFBhcnRpY2xlX3ZlcnRleFRvUGFydGljbGUpOwogICAgICAgICAgY29uc3QgcGVuZXRyYXRpb24gPSAtbm9ybWFsLmRvdChjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlKTsKCiAgICAgICAgICBpZiAobWluUGVuZXRyYXRpb24gPT09IG51bGwgfHwgTWF0aC5hYnMocGVuZXRyYXRpb24pIDwgTWF0aC5hYnMobWluUGVuZXRyYXRpb24pKSB7CiAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBtaW5QZW5ldHJhdGlvbiA9IHBlbmV0cmF0aW9uOwogICAgICAgICAgICBwZW5ldHJhdGVkRmFjZUluZGV4ID0gaTsKICAgICAgICAgICAgcGVuZXRyYXRlZEZhY2VOb3JtYWwuY29weShub3JtYWwpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKHBlbmV0cmF0ZWRGYWNlSW5kZXggIT09IC0xKSB7CiAgICAgICAgICAvLyBTZXR1cCBjb250YWN0CiAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksIGJqLCBzaSwgc2osIHJzaSwgcnNqKTsKICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlTm9ybWFsLnNjYWxlKG1pblBlbmV0cmF0aW9uLCB3b3JsZFBlbmV0cmF0aW9uVmVjKTsgLy8gcmogaXMgdGhlIHBhcnRpY2xlIHBvc2l0aW9uIHByb2plY3RlZCB0byB0aGUgZmFjZQoKICAgICAgICAgIHdvcmxkUGVuZXRyYXRpb25WZWMudmFkZCh4aSwgd29ybGRQZW5ldHJhdGlvblZlYyk7CiAgICAgICAgICB3b3JsZFBlbmV0cmF0aW9uVmVjLnZzdWIoeGosIHdvcmxkUGVuZXRyYXRpb25WZWMpOwogICAgICAgICAgci5yai5jb3B5KHdvcmxkUGVuZXRyYXRpb25WZWMpOyAvL2NvbnN0IHByb2plY3RlZFRvRmFjZSA9IHhpLnZzdWIoeGopLnZhZGQod29ybGRQZW5ldHJhdGlvblZlYyk7CiAgICAgICAgICAvL3Byb2plY3RlZFRvRmFjZS5jb3B5KHIucmopOwogICAgICAgICAgLy9xai52bXVsdChyLnJqLHIucmopOwoKICAgICAgICAgIHBlbmV0cmF0ZWRGYWNlTm9ybWFsLm5lZ2F0ZShyLm5pKTsgLy8gQ29udGFjdCBub3JtYWwKCiAgICAgICAgICByLnJpLnNldCgwLCAwLCAwKTsgLy8gQ2VudGVyIG9mIHBhcnRpY2xlCgogICAgICAgICAgY29uc3QgcmkgPSByLnJpOwogICAgICAgICAgY29uc3QgcmogPSByLnJqOyAvLyBNYWtlIHJlbGF0aXZlIHRvIGJvZGllcwoKICAgICAgICAgIHJpLnZhZGQoeGksIHJpKTsKICAgICAgICAgIHJpLnZzdWIoYmkucG9zaXRpb24sIHJpKTsKICAgICAgICAgIHJqLnZhZGQoeGosIHJqKTsKICAgICAgICAgIHJqLnZzdWIoYmoucG9zaXRpb24sIHJqKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUud2FybignUG9pbnQgZm91bmQgaW5zaWRlIGNvbnZleCwgYnV0IGRpZCBub3QgZmluZCBwZW5ldHJhdGluZyBmYWNlIScpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIGhlaWdodGZpZWxkQ3lsaW5kZXIoaGZTaGFwZSwgY29udmV4U2hhcGUsIGhmUG9zLCBjb252ZXhQb3MsIGhmUXVhdCwgY29udmV4UXVhdCwgaGZCb2R5LCBjb252ZXhCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4SGVpZ2h0ZmllbGQoY29udmV4U2hhcGUsIGhmU2hhcGUsIGNvbnZleFBvcywgaGZQb3MsIGNvbnZleFF1YXQsIGhmUXVhdCwgY29udmV4Qm9keSwgaGZCb2R5LCByc2ksIHJzaiwganVzdFRlc3QpOwogICAgfQoKICAgIHBhcnRpY2xlQ3lsaW5kZXIoc2ksIHNqLCB4aSwgeGosIHFpLCBxaiwgYmksIGJqLCByc2ksIHJzaiwganVzdFRlc3QpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udmV4UGFydGljbGUoc2osIHNpLCB4aiwgeGksIHFqLCBxaSwgYmosIGJpLCByc2ksIHJzaiwganVzdFRlc3QpOwogICAgfQoKICAgIHNwaGVyZVRyaW1lc2goc3BoZXJlU2hhcGUsIHRyaW1lc2hTaGFwZSwgc3BoZXJlUG9zLCB0cmltZXNoUG9zLCBzcGhlcmVRdWF0LCB0cmltZXNoUXVhdCwgc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHJzaSwgcnNqLCBqdXN0VGVzdCkgewogICAgICBjb25zdCBlZGdlVmVydGV4QSA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEE7CiAgICAgIGNvbnN0IGVkZ2VWZXJ0ZXhCID0gc3BoZXJlVHJpbWVzaF9lZGdlVmVydGV4QjsKICAgICAgY29uc3QgZWRnZVZlY3RvciA9IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvcjsKICAgICAgY29uc3QgZWRnZVZlY3RvclVuaXQgPSBzcGhlcmVUcmltZXNoX2VkZ2VWZWN0b3JVbml0OwogICAgICBjb25zdCBsb2NhbFNwaGVyZVBvcyA9IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVQb3M7CiAgICAgIGNvbnN0IHRtcCA9IHNwaGVyZVRyaW1lc2hfdG1wOwogICAgICBjb25zdCBsb2NhbFNwaGVyZUFBQkIgPSBzcGhlcmVUcmltZXNoX2xvY2FsU3BoZXJlQUFCQjsKICAgICAgY29uc3QgdjIgPSBzcGhlcmVUcmltZXNoX3YyOwogICAgICBjb25zdCByZWxwb3MgPSBzcGhlcmVUcmltZXNoX3JlbHBvczsKICAgICAgY29uc3QgdHJpYW5nbGVzID0gc3BoZXJlVHJpbWVzaF90cmlhbmdsZXM7IC8vIENvbnZlcnQgc3BoZXJlIHBvc2l0aW9uIHRvIGxvY2FsIGluIHRoZSB0cmltZXNoCgogICAgICBUcmFuc2Zvcm0ucG9pbnRUb0xvY2FsRnJhbWUodHJpbWVzaFBvcywgdHJpbWVzaFF1YXQsIHNwaGVyZVBvcywgbG9jYWxTcGhlcmVQb3MpOyAvLyBHZXQgdGhlIGFhYmIgb2YgdGhlIHNwaGVyZSBsb2NhbGx5IGluIHRoZSB0cmltZXNoCgogICAgICBjb25zdCBzcGhlcmVSYWRpdXMgPSBzcGhlcmVTaGFwZS5yYWRpdXM7CiAgICAgIGxvY2FsU3BoZXJlQUFCQi5sb3dlckJvdW5kLnNldChsb2NhbFNwaGVyZVBvcy54IC0gc3BoZXJlUmFkaXVzLCBsb2NhbFNwaGVyZVBvcy55IC0gc3BoZXJlUmFkaXVzLCBsb2NhbFNwaGVyZVBvcy56IC0gc3BoZXJlUmFkaXVzKTsKICAgICAgbG9jYWxTcGhlcmVBQUJCLnVwcGVyQm91bmQuc2V0KGxvY2FsU3BoZXJlUG9zLnggKyBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnkgKyBzcGhlcmVSYWRpdXMsIGxvY2FsU3BoZXJlUG9zLnogKyBzcGhlcmVSYWRpdXMpOwogICAgICB0cmltZXNoU2hhcGUuZ2V0VHJpYW5nbGVzSW5BQUJCKGxvY2FsU3BoZXJlQUFCQiwgdHJpYW5nbGVzKTsgLy9mb3IgKGxldCBpID0gMDsgaSA8IHRyaW1lc2hTaGFwZS5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgdHJpYW5nbGVzLnB1c2goaSk7IC8vIEFsbAogICAgICAvLyBWZXJ0aWNlcwoKICAgICAgY29uc3QgdiA9IHNwaGVyZVRyaW1lc2hfdjsKICAgICAgY29uc3QgcmFkaXVzU3F1YXJlZCA9IHNwaGVyZVNoYXBlLnJhZGl1cyAqIHNwaGVyZVNoYXBlLnJhZGl1czsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJpYW5nbGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCAzOyBqKyspIHsKICAgICAgICAgIHRyaW1lc2hTaGFwZS5nZXRWZXJ0ZXgodHJpbWVzaFNoYXBlLmluZGljZXNbdHJpYW5nbGVzW2ldICogMyArIGpdLCB2KTsgLy8gQ2hlY2sgdmVydGV4IG92ZXJsYXAgaW4gc3BoZXJlCgogICAgICAgICAgdi52c3ViKGxvY2FsU3BoZXJlUG9zLCByZWxwb3MpOwoKICAgICAgICAgIGlmIChyZWxwb3MubGVuZ3RoU3F1YXJlZCgpIDw9IHJhZGl1c1NxdWFyZWQpIHsKICAgICAgICAgICAgLy8gU2FmZSB1cAogICAgICAgICAgICB2Mi5jb3B5KHYpOwogICAgICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodHJpbWVzaFBvcywgdHJpbWVzaFF1YXQsIHYyLCB2KTsKICAgICAgICAgICAgdi52c3ViKHNwaGVyZVBvcywgcmVscG9zKTsKCiAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsZXQgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKHNwaGVyZUJvZHksIHRyaW1lc2hCb2R5LCBzcGhlcmVTaGFwZSwgdHJpbWVzaFNoYXBlLCByc2ksIHJzaik7CiAgICAgICAgICAgIHIubmkuY29weShyZWxwb3MpOwogICAgICAgICAgICByLm5pLm5vcm1hbGl6ZSgpOyAvLyByaSBpcyB0aGUgdmVjdG9yIGZyb20gc3BoZXJlIGNlbnRlciB0byB0aGUgc3BoZXJlIHN1cmZhY2UKCiAgICAgICAgICAgIHIucmkuY29weShyLm5pKTsKICAgICAgICAgICAgci5yaS5zY2FsZShzcGhlcmVTaGFwZS5yYWRpdXMsIHIucmkpOwogICAgICAgICAgICByLnJpLnZhZGQoc3BoZXJlUG9zLCByLnJpKTsKICAgICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICByLnJqLmNvcHkodik7CiAgICAgICAgICAgIHIucmoudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7IC8vIFN0b3JlIHJlc3VsdAoKICAgICAgICAgICAgdGhpcy5yZXN1bHQucHVzaChyKTsKICAgICAgICAgICAgdGhpcy5jcmVhdGVGcmljdGlvbkVxdWF0aW9uc0Zyb21Db250YWN0KHIsIHRoaXMuZnJpY3Rpb25SZXN1bHQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBDaGVjayBhbGwgZWRnZXMKCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRyaWFuZ2xlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMzsgaisrKSB7CiAgICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VmVydGV4KHRyaW1lc2hTaGFwZS5pbmRpY2VzW3RyaWFuZ2xlc1tpXSAqIDMgKyBqXSwgZWRnZVZlcnRleEEpOwogICAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleCh0cmltZXNoU2hhcGUuaW5kaWNlc1t0cmlhbmdsZXNbaV0gKiAzICsgKGogKyAxKSAlIDNdLCBlZGdlVmVydGV4Qik7CiAgICAgICAgICBlZGdlVmVydGV4Qi52c3ViKGVkZ2VWZXJ0ZXhBLCBlZGdlVmVjdG9yKTsgLy8gUHJvamVjdCBzcGhlcmUgcG9zaXRpb24gdG8gdGhlIGVkZ2UKCiAgICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKGVkZ2VWZXJ0ZXhCLCB0bXApOwogICAgICAgICAgY29uc3QgcG9zaXRpb25BbG9uZ0VkZ2VCID0gdG1wLmRvdChlZGdlVmVjdG9yKTsKICAgICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIoZWRnZVZlcnRleEEsIHRtcCk7CiAgICAgICAgICBsZXQgcG9zaXRpb25BbG9uZ0VkZ2VBID0gdG1wLmRvdChlZGdlVmVjdG9yKTsKCiAgICAgICAgICBpZiAocG9zaXRpb25BbG9uZ0VkZ2VBID4gMCAmJiBwb3NpdGlvbkFsb25nRWRnZUIgPCAwKSB7CiAgICAgICAgICAgIC8vIE5vdyBjaGVjayB0aGUgb3J0aG9nb25hbCBkaXN0YW5jZSBmcm9tIGVkZ2UgdG8gc3BoZXJlIGNlbnRlcgogICAgICAgICAgICBsb2NhbFNwaGVyZVBvcy52c3ViKGVkZ2VWZXJ0ZXhBLCB0bXApOwogICAgICAgICAgICBlZGdlVmVjdG9yVW5pdC5jb3B5KGVkZ2VWZWN0b3IpOwogICAgICAgICAgICBlZGdlVmVjdG9yVW5pdC5ub3JtYWxpemUoKTsKICAgICAgICAgICAgcG9zaXRpb25BbG9uZ0VkZ2VBID0gdG1wLmRvdChlZGdlVmVjdG9yVW5pdCk7CiAgICAgICAgICAgIGVkZ2VWZWN0b3JVbml0LnNjYWxlKHBvc2l0aW9uQWxvbmdFZGdlQSwgdG1wKTsKICAgICAgICAgICAgdG1wLnZhZGQoZWRnZVZlcnRleEEsIHRtcCk7IC8vIHRtcCBpcyBub3cgdGhlIHNwaGVyZSBjZW50ZXIgcG9zaXRpb24gcHJvamVjdGVkIHRvIHRoZSBlZGdlLCBkZWZpbmVkIGxvY2FsbHkgaW4gdGhlIHRyaW1lc2ggZnJhbWUKCiAgICAgICAgICAgIGNvbnN0IGRpc3QgPSB0bXAuZGlzdGFuY2VUbyhsb2NhbFNwaGVyZVBvcyk7CgogICAgICAgICAgICBpZiAoZGlzdCA8IHNwaGVyZVNoYXBlLnJhZGl1cykgewogICAgICAgICAgICAgIGlmIChqdXN0VGVzdCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTsKICAgICAgICAgICAgICB0bXAudnN1Yihsb2NhbFNwaGVyZVBvcywgci5uaSk7CiAgICAgICAgICAgICAgci5uaS5ub3JtYWxpemUoKTsKICAgICAgICAgICAgICByLm5pLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7CiAgICAgICAgICAgICAgci5yaS52YWRkKHNwaGVyZVBvcywgci5yaSk7CiAgICAgICAgICAgICAgci5yaS52c3ViKHNwaGVyZUJvZHkucG9zaXRpb24sIHIucmkpOwogICAgICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdG1wLCB0bXApOwogICAgICAgICAgICAgIHRtcC52c3ViKHRyaW1lc2hCb2R5LnBvc2l0aW9uLCByLnJqKTsKICAgICAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLm5pLCByLm5pKTsKICAgICAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLnJpLCByLnJpKTsKICAgICAgICAgICAgICB0aGlzLnJlc3VsdC5wdXNoKHIpOwogICAgICAgICAgICAgIHRoaXMuY3JlYXRlRnJpY3Rpb25FcXVhdGlvbnNGcm9tQ29udGFjdChyLCB0aGlzLmZyaWN0aW9uUmVzdWx0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSAvLyBUcmlhbmdsZSBmYWNlcwoKCiAgICAgIGNvbnN0IHZhID0gc3BoZXJlVHJpbWVzaF92YTsKICAgICAgY29uc3QgdmIgPSBzcGhlcmVUcmltZXNoX3ZiOwogICAgICBjb25zdCB2YyA9IHNwaGVyZVRyaW1lc2hfdmM7CiAgICAgIGNvbnN0IG5vcm1hbCA9IHNwaGVyZVRyaW1lc2hfbm9ybWFsOwoKICAgICAgZm9yIChsZXQgaSA9IDAsIE4gPSB0cmlhbmdsZXMubGVuZ3RoOyBpICE9PSBOOyBpKyspIHsKICAgICAgICB0cmltZXNoU2hhcGUuZ2V0VHJpYW5nbGVWZXJ0aWNlcyh0cmlhbmdsZXNbaV0sIHZhLCB2YiwgdmMpOwogICAgICAgIHRyaW1lc2hTaGFwZS5nZXROb3JtYWwodHJpYW5nbGVzW2ldLCBub3JtYWwpOwogICAgICAgIGxvY2FsU3BoZXJlUG9zLnZzdWIodmEsIHRtcCk7CiAgICAgICAgbGV0IGRpc3QgPSB0bXAuZG90KG5vcm1hbCk7CiAgICAgICAgbm9ybWFsLnNjYWxlKGRpc3QsIHRtcCk7CiAgICAgICAgbG9jYWxTcGhlcmVQb3MudnN1Yih0bXAsIHRtcCk7IC8vIHRtcCBpcyBub3cgdGhlIHNwaGVyZSBwb3NpdGlvbiBwcm9qZWN0ZWQgdG8gdGhlIHRyaWFuZ2xlIHBsYW5lCgogICAgICAgIGRpc3QgPSB0bXAuZGlzdGFuY2VUbyhsb2NhbFNwaGVyZVBvcyk7CgogICAgICAgIGlmIChSYXkucG9pbnRJblRyaWFuZ2xlKHRtcCwgdmEsIHZiLCB2YykgJiYgZGlzdCA8IHNwaGVyZVNoYXBlLnJhZGl1cykgewogICAgICAgICAgaWYgKGp1c3RUZXN0KSB7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGxldCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oc3BoZXJlQm9keSwgdHJpbWVzaEJvZHksIHNwaGVyZVNoYXBlLCB0cmltZXNoU2hhcGUsIHJzaSwgcnNqKTsKICAgICAgICAgIHRtcC52c3ViKGxvY2FsU3BoZXJlUG9zLCByLm5pKTsKICAgICAgICAgIHIubmkubm9ybWFsaXplKCk7CiAgICAgICAgICByLm5pLnNjYWxlKHNwaGVyZVNoYXBlLnJhZGl1cywgci5yaSk7CiAgICAgICAgICByLnJpLnZhZGQoc3BoZXJlUG9zLCByLnJpKTsKICAgICAgICAgIHIucmkudnN1YihzcGhlcmVCb2R5LnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgIFRyYW5zZm9ybS5wb2ludFRvV29ybGRGcmFtZSh0cmltZXNoUG9zLCB0cmltZXNoUXVhdCwgdG1wLCB0bXApOwogICAgICAgICAgdG1wLnZzdWIodHJpbWVzaEJvZHkucG9zaXRpb24sIHIucmopOwogICAgICAgICAgVHJhbnNmb3JtLnZlY3RvclRvV29ybGRGcmFtZSh0cmltZXNoUXVhdCwgci5uaSwgci5uaSk7CiAgICAgICAgICBUcmFuc2Zvcm0udmVjdG9yVG9Xb3JsZEZyYW1lKHRyaW1lc2hRdWF0LCByLnJpLCByLnJpKTsKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0cmlhbmdsZXMubGVuZ3RoID0gMDsKICAgIH0KCiAgICBwbGFuZVRyaW1lc2gocGxhbmVTaGFwZSwgdHJpbWVzaFNoYXBlLCBwbGFuZVBvcywgdHJpbWVzaFBvcywgcGxhbmVRdWF0LCB0cmltZXNoUXVhdCwgcGxhbmVCb2R5LCB0cmltZXNoQm9keSwgcnNpLCByc2osIGp1c3RUZXN0KSB7CiAgICAgIC8vIE1ha2UgY29udGFjdHMhCiAgICAgIGNvbnN0IHYgPSBuZXcgVmVjMygpOwogICAgICBjb25zdCBub3JtYWwgPSBwbGFuZVRyaW1lc2hfbm9ybWFsOwogICAgICBub3JtYWwuc2V0KDAsIDAsIDEpOwogICAgICBwbGFuZVF1YXQudm11bHQobm9ybWFsLCBub3JtYWwpOyAvLyBUdXJuIG5vcm1hbCBhY2NvcmRpbmcgdG8gcGxhbmUKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdHJpbWVzaFNoYXBlLnZlcnRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgICAgIC8vIEdldCB3b3JsZCB2ZXJ0ZXggZnJvbSB0cmltZXNoCiAgICAgICAgdHJpbWVzaFNoYXBlLmdldFZlcnRleChpLCB2KTsgLy8gU2FmZSB1cAoKICAgICAgICBjb25zdCB2MiA9IG5ldyBWZWMzKCk7CiAgICAgICAgdjIuY29weSh2KTsKICAgICAgICBUcmFuc2Zvcm0ucG9pbnRUb1dvcmxkRnJhbWUodHJpbWVzaFBvcywgdHJpbWVzaFF1YXQsIHYyLCB2KTsgLy8gQ2hlY2sgcGxhbmUgc2lkZQoKICAgICAgICBjb25zdCByZWxwb3MgPSBwbGFuZVRyaW1lc2hfcmVscG9zOwogICAgICAgIHYudnN1YihwbGFuZVBvcywgcmVscG9zKTsKICAgICAgICBjb25zdCBkb3QgPSBub3JtYWwuZG90KHJlbHBvcyk7CgogICAgICAgIGlmIChkb3QgPD0gMC4wKSB7CiAgICAgICAgICBpZiAoanVzdFRlc3QpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgY29uc3QgciA9IHRoaXMuY3JlYXRlQ29udGFjdEVxdWF0aW9uKHBsYW5lQm9keSwgdHJpbWVzaEJvZHksIHBsYW5lU2hhcGUsIHRyaW1lc2hTaGFwZSwgcnNpLCByc2opOwogICAgICAgICAgci5uaS5jb3B5KG5vcm1hbCk7IC8vIENvbnRhY3Qgbm9ybWFsIGlzIHRoZSBwbGFuZSBub3JtYWwKICAgICAgICAgIC8vIEdldCB2ZXJ0ZXggcG9zaXRpb24gcHJvamVjdGVkIG9uIHBsYW5lCgogICAgICAgICAgY29uc3QgcHJvamVjdGVkID0gcGxhbmVUcmltZXNoX3Byb2plY3RlZDsKICAgICAgICAgIG5vcm1hbC5zY2FsZShyZWxwb3MuZG90KG5vcm1hbCksIHByb2plY3RlZCk7CiAgICAgICAgICB2LnZzdWIocHJvamVjdGVkLCBwcm9qZWN0ZWQpOyAvLyByaSBpcyB0aGUgcHJvamVjdGVkIHdvcmxkIHBvc2l0aW9uIG1pbnVzIHBsYW5lIHBvc2l0aW9uCgogICAgICAgICAgci5yaS5jb3B5KHByb2plY3RlZCk7CiAgICAgICAgICByLnJpLnZzdWIocGxhbmVCb2R5LnBvc2l0aW9uLCByLnJpKTsKICAgICAgICAgIHIucmouY29weSh2KTsKICAgICAgICAgIHIucmoudnN1Yih0cmltZXNoQm9keS5wb3NpdGlvbiwgci5yaik7IC8vIFN0b3JlIHJlc3VsdAoKICAgICAgICAgIHRoaXMucmVzdWx0LnB1c2gocik7CiAgICAgICAgICB0aGlzLmNyZWF0ZUZyaWN0aW9uRXF1YXRpb25zRnJvbUNvbnRhY3QociwgdGhpcy5mcmljdGlvblJlc3VsdCk7CiAgICAgICAgfQogICAgICB9CiAgICB9IC8vIGNvbnZleFRyaW1lc2goCiAgICAvLyAgIHNpOiBDb252ZXhQb2x5aGVkcm9uLCBzajogVHJpbWVzaCwgeGk6IFZlYzMsIHhqOiBWZWMzLCBxaTogUXVhdGVybmlvbiwgcWo6IFF1YXRlcm5pb24sCiAgICAvLyAgIGJpOiBCb2R5LCBiajogQm9keSwgcnNpPzogU2hhcGUgfCBudWxsLCByc2o/OiBTaGFwZSB8IG51bGwsCiAgICAvLyAgIGZhY2VMaXN0QT86IG51bWJlcltdIHwgbnVsbCwgZmFjZUxpc3RCPzogbnVtYmVyW10gfCBudWxsLAogICAgLy8gKSB7CiAgICAvLyAgIGNvbnN0IHNlcEF4aXMgPSBjb252ZXhDb252ZXhfc2VwQXhpczsKICAgIC8vICAgaWYoeGkuZGlzdGFuY2VUbyh4aikgPiBzaS5ib3VuZGluZ1NwaGVyZVJhZGl1cyArIHNqLmJvdW5kaW5nU3BoZXJlUmFkaXVzKXsKICAgIC8vICAgICAgIHJldHVybjsKICAgIC8vICAgfQogICAgLy8gICAvLyBDb25zdHJ1Y3QgYSB0ZW1wIGh1bGwgZm9yIGVhY2ggdHJpYW5nbGUKICAgIC8vICAgY29uc3QgaHVsbEIgPSBuZXcgQ29udmV4UG9seWhlZHJvbigpOwogICAgLy8gICBodWxsQi5mYWNlcyA9IFtbMCwxLDJdXTsKICAgIC8vICAgY29uc3QgdmEgPSBuZXcgVmVjMygpOwogICAgLy8gICBjb25zdCB2YiA9IG5ldyBWZWMzKCk7CiAgICAvLyAgIGNvbnN0IHZjID0gbmV3IFZlYzMoKTsKICAgIC8vICAgaHVsbEIudmVydGljZXMgPSBbCiAgICAvLyAgICAgICB2YSwKICAgIC8vICAgICAgIHZiLAogICAgLy8gICAgICAgdmMKICAgIC8vICAgXTsKICAgIC8vICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzai5pbmRpY2VzLmxlbmd0aCAvIDM7IGkrKykgewogICAgLy8gICAgICAgY29uc3QgdHJpYW5nbGVOb3JtYWwgPSBuZXcgVmVjMygpOwogICAgLy8gICAgICAgc2ouZ2V0Tm9ybWFsKGksIHRyaWFuZ2xlTm9ybWFsKTsKICAgIC8vICAgICAgIGh1bGxCLmZhY2VOb3JtYWxzID0gW3RyaWFuZ2xlTm9ybWFsXTsKICAgIC8vICAgICAgIHNqLmdldFRyaWFuZ2xlVmVydGljZXMoaSwgdmEsIHZiLCB2Yyk7CiAgICAvLyAgICAgICBsZXQgZCA9IHNpLnRlc3RTZXBBeGlzKHRyaWFuZ2xlTm9ybWFsLCBodWxsQiwgeGksIHFpLCB4aiwgcWopOwogICAgLy8gICAgICAgaWYoIWQpewogICAgLy8gICAgICAgICAgIHRyaWFuZ2xlTm9ybWFsLnNjYWxlKC0xLCB0cmlhbmdsZU5vcm1hbCk7CiAgICAvLyAgICAgICAgICAgZCA9IHNpLnRlc3RTZXBBeGlzKHRyaWFuZ2xlTm9ybWFsLCBodWxsQiwgeGksIHFpLCB4aiwgcWopOwogICAgLy8gICAgICAgICAgIGlmKCFkKXsKICAgIC8vICAgICAgICAgICAgICAgY29udGludWU7CiAgICAvLyAgICAgICAgICAgfQogICAgLy8gICAgICAgfQogICAgLy8gICAgICAgY29uc3QgcmVzOiBDb252ZXhQb2x5aGVkcm9uQ29udGFjdFBvaW50W10gPSBbXTsKICAgIC8vICAgICAgIGNvbnN0IHEgPSBjb252ZXhDb252ZXhfcTsKICAgIC8vICAgICAgIHNpLmNsaXBBZ2FpbnN0SHVsbCh4aSxxaSxodWxsQix4aixxaix0cmlhbmdsZU5vcm1hbCwtMTAwLDEwMCxyZXMpOwogICAgLy8gICAgICAgZm9yKGxldCBqID0gMDsgaiAhPT0gcmVzLmxlbmd0aDsgaisrKXsKICAgIC8vICAgICAgICAgICBjb25zdCByID0gdGhpcy5jcmVhdGVDb250YWN0RXF1YXRpb24oYmksYmosc2ksc2oscnNpLHJzaiksCiAgICAvLyAgICAgICAgICAgICAgIHJpID0gci5yaSwKICAgIC8vICAgICAgICAgICAgICAgcmogPSByLnJqOwogICAgLy8gICAgICAgICAgIHIubmkuY29weSh0cmlhbmdsZU5vcm1hbCk7CiAgICAvLyAgICAgICAgICAgci5uaS5uZWdhdGUoci5uaSk7CiAgICAvLyAgICAgICAgICAgcmVzW2pdLm5vcm1hbC5uZWdhdGUocSk7CiAgICAvLyAgICAgICAgICAgcS5tdWx0KHJlc1tqXS5kZXB0aCwgcSk7CiAgICAvLyAgICAgICAgICAgcmVzW2pdLnBvaW50LnZhZGQocSwgcmkpOwogICAgLy8gICAgICAgICAgIHJqLmNvcHkocmVzW2pdLnBvaW50KTsKICAgIC8vICAgICAgICAgICAvLyBDb250YWN0IHBvaW50cyBhcmUgaW4gd29ybGQgY29vcmRpbmF0ZXMuIFRyYW5zZm9ybSBiYWNrIHRvIHJlbGF0aXZlCiAgICAvLyAgICAgICAgICAgcmkudnN1Yih4aSxyaSk7CiAgICAvLyAgICAgICAgICAgcmoudnN1Yih4aixyaik7CiAgICAvLyAgICAgICAgICAgLy8gTWFrZSByZWxhdGl2ZSB0byBib2RpZXMKICAgIC8vICAgICAgICAgICByaS52YWRkKHhpLCByaSk7CiAgICAvLyAgICAgICAgICAgcmkudnN1YihiaS5wb3NpdGlvbiwgcmkpOwogICAgLy8gICAgICAgICAgIHJqLnZhZGQoeGosIHJqKTsKICAgIC8vICAgICAgICAgICByai52c3ViKGJqLnBvc2l0aW9uLCByaik7CiAgICAvLyAgICAgICAgICAgcmVzdWx0LnB1c2gocik7CiAgICAvLyAgICAgICB9CiAgICAvLyAgIH0KICAgIC8vIH0KCgogIH0KICBjb25zdCBhdmVyYWdlTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBhdmVyYWdlQ29udGFjdFBvaW50QSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgYXZlcmFnZUNvbnRhY3RQb2ludEIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFZlYzIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHRtcFF1YXQxID0gbmV3IFF1YXRlcm5pb24oKTsKICBjb25zdCB0bXBRdWF0MiA9IG5ldyBRdWF0ZXJuaW9uKCk7CgogIGNvbnN0IHBsYW5lVHJpbWVzaF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lVHJpbWVzaF9yZWxwb3MgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lVHJpbWVzaF9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3JlbHBvcyA9IG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3YgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdjIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlcnRleEIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfZWRnZVZlY3RvciA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9lZGdlVmVjdG9yVW5pdCA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF9sb2NhbFNwaGVyZVBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlVHJpbWVzaF90bXAgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmEgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmIgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfdmMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZVRyaW1lc2hfbG9jYWxTcGhlcmVBQUJCID0gbmV3IEFBQkIoKTsKICBjb25zdCBzcGhlcmVUcmltZXNoX3RyaWFuZ2xlcyA9IFtdOwogIGNvbnN0IHBvaW50X29uX3BsYW5lX3RvX3NwaGVyZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVfdG9fc3BoZXJlX29ydGhvID0gbmV3IFZlYzMoKTsgLy8gU2VlIGh0dHA6Ly9idWxsZXRwaHlzaWNzLmNvbS9CdWxsZXQvQnVsbGV0RnVsbC9TcGhlcmVUcmlhbmdsZURldGVjdG9yXzhjcHBfc291cmNlLmh0bWwKCiAgY29uc3QgcG9pbnRJblBvbHlnb25fZWRnZSA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcG9pbnRJblBvbHlnb25fZWRnZV94X25vcm1hbCA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcG9pbnRJblBvbHlnb25fdnRwID0gbmV3IFZlYzMoKTsKCiAgZnVuY3Rpb24gcG9pbnRJblBvbHlnb24odmVydHMsIG5vcm1hbCwgcCkgewogICAgbGV0IHBvc2l0aXZlUmVzdWx0ID0gbnVsbDsKICAgIGNvbnN0IE4gPSB2ZXJ0cy5sZW5ndGg7CgogICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICBjb25zdCB2ID0gdmVydHNbaV07IC8vIEdldCBlZGdlIHRvIHRoZSBuZXh0IHZlcnRleAoKICAgICAgY29uc3QgZWRnZSA9IHBvaW50SW5Qb2x5Z29uX2VkZ2U7CiAgICAgIHZlcnRzWyhpICsgMSkgJSBOXS52c3ViKHYsIGVkZ2UpOyAvLyBHZXQgY3Jvc3MgcHJvZHVjdCBiZXR3ZWVuIHBvbHlnb24gbm9ybWFsIGFuZCB0aGUgZWRnZQoKICAgICAgY29uc3QgZWRnZV94X25vcm1hbCA9IHBvaW50SW5Qb2x5Z29uX2VkZ2VfeF9ub3JtYWw7IC8vY29uc3QgZWRnZV94X25vcm1hbCA9IG5ldyBWZWMzKCk7CgogICAgICBlZGdlLmNyb3NzKG5vcm1hbCwgZWRnZV94X25vcm1hbCk7IC8vIEdldCB2ZWN0b3IgYmV0d2VlbiBwb2ludCBhbmQgY3VycmVudCB2ZXJ0ZXgKCiAgICAgIGNvbnN0IHZlcnRleF90b19wID0gcG9pbnRJblBvbHlnb25fdnRwOwogICAgICBwLnZzdWIodiwgdmVydGV4X3RvX3ApOyAvLyBUaGlzIGRvdCBwcm9kdWN0IGRldGVybWluZXMgd2hpY2ggc2lkZSBvZiB0aGUgZWRnZSB0aGUgcG9pbnQgaXMKCiAgICAgIGNvbnN0IHIgPSBlZGdlX3hfbm9ybWFsLmRvdCh2ZXJ0ZXhfdG9fcCk7IC8vIElmIGFsbCBzdWNoIGRvdCBwcm9kdWN0cyBoYXZlIHNhbWUgc2lnbiwgd2UgYXJlIGluc2lkZSB0aGUgcG9seWdvbi4KCiAgICAgIGlmIChwb3NpdGl2ZVJlc3VsdCA9PT0gbnVsbCB8fCByID4gMCAmJiBwb3NpdGl2ZVJlc3VsdCA9PT0gdHJ1ZSB8fCByIDw9IDAgJiYgcG9zaXRpdmVSZXN1bHQgPT09IGZhbHNlKSB7CiAgICAgICAgaWYgKHBvc2l0aXZlUmVzdWx0ID09PSBudWxsKSB7CiAgICAgICAgICBwb3NpdGl2ZVJlc3VsdCA9IHIgPiAwOwogICAgICAgIH0KCiAgICAgICAgY29udGludWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBFbmNvdW50ZXJlZCBzb21lIG90aGVyIHNpZ24uIEV4aXQuCiAgICAgIH0KICAgIH0gLy8gSWYgd2UgZ290IGhlcmUsIGFsbCBkb3QgcHJvZHVjdHMgd2VyZSBvZiB0aGUgc2FtZSBzaWduLgoKCiAgICByZXR1cm4gdHJ1ZTsKICB9CgogIGNvbnN0IGJveF90b19zcGhlcmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUJveF9ucyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X25zMSA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X25zMiA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X3NpZGVzID0gW25ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCksIG5ldyBWZWMzKCldOwogIGNvbnN0IHNwaGVyZUJveF9zcGhlcmVfdG9fY29ybmVyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZV9ucyA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQm94X3NpZGVfbnMxID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVCb3hfc2lkZV9uczIgPSBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleF90b19zcGhlcmUgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9lZGdlID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfZWRnZVVuaXQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9zcGhlcmVUb0Nvcm5lciA9IG5ldyBWZWMzKCk7CiAgY29uc3Qgc3BoZXJlQ29udmV4X3dvcmxkQ29ybmVyID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGROb3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF93b3JsZFBvaW50ID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfd29ybGRTcGhlcmVQb2ludENsb3Nlc3RUb1BsYW5lID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVDb252ZXhfcGVuZXRyYXRpb25WZWMgPSBuZXcgVmVjMygpOwogIGNvbnN0IHNwaGVyZUNvbnZleF9zcGhlcmVUb1dvcmxkUG9pbnQgPSBuZXcgVmVjMygpOwogIG5ldyBWZWMzKCk7CiAgbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZUNvbnZleF92ID0gbmV3IFZlYzMoKTsKICBjb25zdCBwbGFuZUNvbnZleF9ub3JtYWwgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBsYW5lQ29udmV4X3JlbHBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGxhbmVDb252ZXhfcHJvamVjdGVkID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhDb252ZXhfc2VwQXhpcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgY29udmV4Q29udmV4X3EgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBhcnRpY2xlUGxhbmVfbm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBwYXJ0aWNsZVBsYW5lX3JlbHBvcyA9IG5ldyBWZWMzKCk7CiAgY29uc3QgcGFydGljbGVQbGFuZV9wcm9qZWN0ZWQgPSBuZXcgVmVjMygpOwogIGNvbnN0IHBhcnRpY2xlU3BoZXJlX25vcm1hbCA9IG5ldyBWZWMzKCk7IC8vIFdJUAoKICBjb25zdCBjcWogPSBuZXcgUXVhdGVybmlvbigpOwogIGNvbnN0IGNvbnZleFBhcnRpY2xlX2xvY2FsID0gbmV3IFZlYzMoKTsKICBuZXcgVmVjMygpOwogIGNvbnN0IGNvbnZleFBhcnRpY2xlX3BlbmV0cmF0ZWRGYWNlTm9ybWFsID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhQYXJ0aWNsZV92ZXJ0ZXhUb1BhcnRpY2xlID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhQYXJ0aWNsZV93b3JsZFBlbmV0cmF0aW9uVmVjID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTsKICBjb25zdCBjb252ZXhIZWlnaHRmaWVsZF9mYWNlTGlzdCA9IFswXTsKICBjb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAxID0gbmV3IFZlYzMoKTsKICBjb25zdCBzcGhlcmVIZWlnaHRmaWVsZF90bXAyID0gbmV3IFZlYzMoKTsKCiAgY2xhc3MgT3ZlcmxhcEtlZXBlciB7CiAgICAvKioKICAgICAqIEB0b2RvIFJlbW92ZSB1c2VsZXNzIGNvbnN0cnVjdG9yCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmN1cnJlbnQgPSBbXTsKICAgICAgdGhpcy5wcmV2aW91cyA9IFtdOwogICAgfQogICAgLyoqCiAgICAgKiBnZXRLZXkKICAgICAqLwoKCiAgICBnZXRLZXkoaSwgaikgewogICAgICBpZiAoaiA8IGkpIHsKICAgICAgICBjb25zdCB0ZW1wID0gajsKICAgICAgICBqID0gaTsKICAgICAgICBpID0gdGVtcDsKICAgICAgfQoKICAgICAgcmV0dXJuIGkgPDwgMTYgfCBqOwogICAgfQogICAgLyoqCiAgICAgKiBzZXQKICAgICAqLwoKCiAgICBzZXQoaSwgaikgewogICAgICAvLyBJbnNlcnRpb24gc29ydC4gVGhpcyB3YXkgdGhlIGRpZmYgd2lsbCBoYXZlIGxpbmVhciBjb21wbGV4aXR5LgogICAgICBjb25zdCBrZXkgPSB0aGlzLmdldEtleShpLCBqKTsKICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuY3VycmVudDsKICAgICAgbGV0IGluZGV4ID0gMDsKCiAgICAgIHdoaWxlIChrZXkgPiBjdXJyZW50W2luZGV4XSkgewogICAgICAgIGluZGV4Kys7CiAgICAgIH0KCiAgICAgIGlmIChrZXkgPT09IGN1cnJlbnRbaW5kZXhdKSB7CiAgICAgICAgcmV0dXJuOyAvLyBQYWlyIHdhcyBhbHJlYWR5IGFkZGVkCiAgICAgIH0KCiAgICAgIGZvciAobGV0IGogPSBjdXJyZW50Lmxlbmd0aCAtIDE7IGogPj0gaW5kZXg7IGotLSkgewogICAgICAgIGN1cnJlbnRbaiArIDFdID0gY3VycmVudFtqXTsKICAgICAgfQoKICAgICAgY3VycmVudFtpbmRleF0gPSBrZXk7CiAgICB9CiAgICAvKioKICAgICAqIHRpY2sKICAgICAqLwoKCiAgICB0aWNrKCkgewogICAgICBjb25zdCB0bXAgPSB0aGlzLmN1cnJlbnQ7CiAgICAgIHRoaXMuY3VycmVudCA9IHRoaXMucHJldmlvdXM7CiAgICAgIHRoaXMucHJldmlvdXMgPSB0bXA7CiAgICAgIHRoaXMuY3VycmVudC5sZW5ndGggPSAwOwogICAgfQogICAgLyoqCiAgICAgKiBnZXREaWZmCiAgICAgKi8KCgogICAgZ2V0RGlmZihhZGRpdGlvbnMsIHJlbW92YWxzKSB7CiAgICAgIGNvbnN0IGEgPSB0aGlzLmN1cnJlbnQ7CiAgICAgIGNvbnN0IGIgPSB0aGlzLnByZXZpb3VzOwogICAgICBjb25zdCBhbCA9IGEubGVuZ3RoOwogICAgICBjb25zdCBibCA9IGIubGVuZ3RoOwogICAgICBsZXQgaiA9IDA7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsOyBpKyspIHsKICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTsKICAgICAgICBjb25zdCBrZXlBID0gYVtpXTsKCiAgICAgICAgd2hpbGUgKGtleUEgPiBiW2pdKSB7CiAgICAgICAgICBqKys7CiAgICAgICAgfQoKICAgICAgICBmb3VuZCA9IGtleUEgPT09IGJbal07CgogICAgICAgIGlmICghZm91bmQpIHsKICAgICAgICAgIHVucGFja0FuZFB1c2goYWRkaXRpb25zLCBrZXlBKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGogPSAwOwoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBibDsgaSsrKSB7CiAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7CiAgICAgICAgY29uc3Qga2V5QiA9IGJbaV07CgogICAgICAgIHdoaWxlIChrZXlCID4gYVtqXSkgewogICAgICAgICAgaisrOwogICAgICAgIH0KCiAgICAgICAgZm91bmQgPSBhW2pdID09PSBrZXlCOwoKICAgICAgICBpZiAoIWZvdW5kKSB7CiAgICAgICAgICB1bnBhY2tBbmRQdXNoKHJlbW92YWxzLCBrZXlCKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgfQoKICBmdW5jdGlvbiB1bnBhY2tBbmRQdXNoKGFycmF5LCBrZXkpIHsKICAgIGFycmF5LnB1c2goKGtleSAmIDB4ZmZmZjAwMDApID4+IDE2LCBrZXkgJiAweDAwMDBmZmZmKTsKICB9CgogIGNvbnN0IGdldEtleSA9IChpLCBqKSA9PiBpIDwgaiA/IGAke2l9LSR7an1gIDogYCR7an0tJHtpfWA7CiAgLyoqCiAgICogVHVwbGVEaWN0aW9uYXJ5CiAgICovCgoKICBjbGFzcyBUdXBsZURpY3Rpb25hcnkgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIHRoaXMuZGF0YSA9IHsKICAgICAgICBrZXlzOiBbXQogICAgICB9OwogICAgfQoKICAgIC8qKiBnZXQgKi8KICAgIGdldChpLCBqKSB7CiAgICAgIGNvbnN0IGtleSA9IGdldEtleShpLCBqKTsKICAgICAgcmV0dXJuIHRoaXMuZGF0YVtrZXldOwogICAgfQogICAgLyoqIHNldCAqLwoKCiAgICBzZXQoaSwgaiwgdmFsdWUpIHsKICAgICAgY29uc3Qga2V5ID0gZ2V0S2V5KGksIGopOyAvLyBDaGVjayBpZiBrZXkgYWxyZWFkeSBleGlzdHMKCiAgICAgIGlmICghdGhpcy5nZXQoaSwgaikpIHsKICAgICAgICB0aGlzLmRhdGEua2V5cy5wdXNoKGtleSk7CiAgICAgIH0KCiAgICAgIHRoaXMuZGF0YVtrZXldID0gdmFsdWU7CiAgICB9CiAgICAvKiogZGVsZXRlICovCgoKICAgIGRlbGV0ZShpLCBqKSB7CiAgICAgIGNvbnN0IGtleSA9IGdldEtleShpLCBqKTsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmRhdGEua2V5cy5pbmRleE9mKGtleSk7CgogICAgICBpZiAoaW5kZXggIT09IC0xKSB7CiAgICAgICAgdGhpcy5kYXRhLmtleXMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfQoKICAgICAgZGVsZXRlIHRoaXMuZGF0YVtrZXldOwogICAgfQogICAgLyoqIHJlc2V0ICovCgoKICAgIHJlc2V0KCkgewogICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhOwogICAgICBjb25zdCBrZXlzID0gZGF0YS5rZXlzOwoKICAgICAgd2hpbGUgKGtleXMubGVuZ3RoID4gMCkgewogICAgICAgIGNvbnN0IGtleSA9IGtleXMucG9wKCk7CiAgICAgICAgZGVsZXRlIGRhdGFba2V5XTsKICAgICAgfQogICAgfQoKICB9CgogIC8qKgogICAqIFRoZSBwaHlzaWNzIHdvcmxkCiAgICovCiAgY2xhc3MgV29ybGQgZXh0ZW5kcyBFdmVudFRhcmdldCB7CiAgICAvKioKICAgICAqIEN1cnJlbnRseSAvIGxhc3QgdXNlZCB0aW1lc3RlcC4gSXMgc2V0IHRvIC0xIGlmIG5vdCBhdmFpbGFibGUuIFRoaXMgdmFsdWUgaXMgdXBkYXRlZCBiZWZvcmUgZWFjaCBpbnRlcm5hbCBzdGVwLCB3aGljaCBtZWFucyB0aGF0IGl0IGlzICJmcmVzaCIgaW5zaWRlIGV2ZW50IGNhbGxiYWNrcy4KICAgICAqLwoKICAgIC8qKgogICAgICogTWFrZXMgYm9kaWVzIGdvIHRvIHNsZWVwIHdoZW4gdGhleSd2ZSBiZWVuIGluYWN0aXZlLgogICAgICogQGRlZmF1bHQgZmFsc2UKICAgICAqLwoKICAgIC8qKgogICAgICogQWxsIHRoZSBjdXJyZW50IGNvbnRhY3RzIChpbnN0YW5jZXMgb2YgQ29udGFjdEVxdWF0aW9uKSBpbiB0aGUgd29ybGQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEhvdyBvZnRlbiB0byBub3JtYWxpemUgcXVhdGVybmlvbnMuIFNldCB0byAwIGZvciBldmVyeSBzdGVwLCAxIGZvciBldmVyeSBzZWNvbmQgZXRjLi4gQSBsYXJnZXIgdmFsdWUgaW5jcmVhc2VzIHBlcmZvcm1hbmNlLiBJZiBib2RpZXMgdGVuZCB0byBleHBsb2RlLCBzZXQgdG8gYSBzbWFsbGVyIHZhbHVlICh6ZXJvIHRvIGJlIHN1cmUgbm90aGluZyBjYW4gZ28gd3JvbmcpLgogICAgICogQGRlZmF1bHQgMAogICAgICovCgogICAgLyoqCiAgICAgKiBTZXQgdG8gdHJ1ZSB0byB1c2UgZmFzdCBxdWF0ZXJuaW9uIG5vcm1hbGl6YXRpb24uIEl0IGlzIG9mdGVuIGVub3VnaCBhY2N1cmF0ZSB0byB1c2UuCiAgICAgKiBJZiBib2RpZXMgdGVuZCB0byBleHBsb2RlLCBzZXQgdG8gZmFsc2UuCiAgICAgKiBAZGVmYXVsdCBmYWxzZQogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgd2FsbC1jbG9jayB0aW1lIHNpbmNlIHNpbXVsYXRpb24gc3RhcnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIE51bWJlciBvZiB0aW1lc3RlcHMgdGFrZW4gc2luY2Ugc3RhcnQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIERlZmF1bHQgYW5kIGxhc3QgdGltZXN0ZXAgc2l6ZXMuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBncmF2aXR5IG9mIHRoZSB3b3JsZC4KICAgICAqLwoKICAgIC8qKgogICAgICogR3Jhdml0eSB0byB1c2Ugd2hlbiBhcHByb3hpbWF0aW5nIHRoZSBmcmljdGlvbiBtYXggZm9yY2UgKG11Km1hc3MqZ3Jhdml0eSkuCiAgICAgKiBJZiB1bmRlZmluZWQsIGdsb2JhbCBncmF2aXR5IHdpbGwgYmUgdXNlZC4KICAgICAqIFVzZSB0byBlbmFibGUgZnJpY3Rpb24gaW4gYSBXb3JsZCB3aXRoIGEgbnVsbCBncmF2aXR5IHZlY3RvciAobm8gZ3Jhdml0eSkuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRoZSBicm9hZHBoYXNlIGFsZ29yaXRobSB0byB1c2UuCiAgICAgKiBAZGVmYXVsdCBOYWl2ZUJyb2FkcGhhc2UKICAgICAqLwoKICAgIC8qKgogICAgICogQWxsIGJvZGllcyBpbiB0aGlzIHdvcmxkCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRydWUgaWYgYW55IGJvZGllcyBhcmUgbm90IHNsZWVwaW5nLCBmYWxzZSBpZiBldmVyeSBib2R5IGlzIHNsZWVwaW5nLgogICAgICovCgogICAgLyoqCiAgICAgKiBUaGUgc29sdmVyIGFsZ29yaXRobSB0byB1c2UuCiAgICAgKiBAZGVmYXVsdCBHU1NvbHZlcgogICAgICovCgogICAgLyoqCiAgICAgKiBjb2xsaXNpb25NYXRyaXgKICAgICAqLwoKICAgIC8qKgogICAgICogQ29sbGlzaW9uTWF0cml4IGZyb20gdGhlIHByZXZpb3VzIHN0ZXAuCiAgICAgKi8KCiAgICAvKioKICAgICAqIEFsbCBhZGRlZCBjb250YWN0bWF0ZXJpYWxzLgogICAgICovCgogICAgLyoqCiAgICAgKiBVc2VkIHRvIGxvb2sgdXAgYSBDb250YWN0TWF0ZXJpYWwgZ2l2ZW4gdHdvIGluc3RhbmNlcyBvZiBNYXRlcmlhbC4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhlIGRlZmF1bHQgbWF0ZXJpYWwgb2YgdGhlIGJvZGllcy4KICAgICAqLwoKICAgIC8qKgogICAgICogVGhpcyBjb250YWN0IG1hdGVyaWFsIGlzIHVzZWQgaWYgbm8gc3VpdGFibGUgY29udGFjdG1hdGVyaWFsIGlzIGZvdW5kIGZvciBhIGNvbnRhY3QuCiAgICAgKi8KCiAgICAvKioKICAgICAqIFRpbWUgYWNjdW11bGF0b3IgZm9yIGludGVycG9sYXRpb24uCiAgICAgKiBAc2VlIGh0dHBzOi8vZ2FmZmVyb25nYW1lcy5jb20vZ2FtZS1waHlzaWNzL2ZpeC15b3VyLXRpbWVzdGVwLwogICAgICovCgogICAgLyoqCiAgICAgKiBEaXNwYXRjaGVkIGFmdGVyIGEgYm9keSBoYXMgYmVlbiBhZGRlZCB0byB0aGUgd29ybGQuCiAgICAgKi8KCiAgICAvKioKICAgICAqIERpc3BhdGNoZWQgYWZ0ZXIgYSBib2R5IGhhcyBiZWVuIHJlbW92ZWQgZnJvbSB0aGUgd29ybGQuCiAgICAgKi8KICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgc3VwZXIoKTsKICAgICAgdGhpcy5kdCA9IC0xOwogICAgICB0aGlzLmFsbG93U2xlZXAgPSAhIW9wdGlvbnMuYWxsb3dTbGVlcDsKICAgICAgdGhpcy5jb250YWN0cyA9IFtdOwogICAgICB0aGlzLmZyaWN0aW9uRXF1YXRpb25zID0gW107CiAgICAgIHRoaXMucXVhdE5vcm1hbGl6ZVNraXAgPSBvcHRpb25zLnF1YXROb3JtYWxpemVTa2lwICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnF1YXROb3JtYWxpemVTa2lwIDogMDsKICAgICAgdGhpcy5xdWF0Tm9ybWFsaXplRmFzdCA9IG9wdGlvbnMucXVhdE5vcm1hbGl6ZUZhc3QgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMucXVhdE5vcm1hbGl6ZUZhc3QgOiBmYWxzZTsKICAgICAgdGhpcy50aW1lID0gMC4wOwogICAgICB0aGlzLnN0ZXBudW1iZXIgPSAwOwogICAgICB0aGlzLmRlZmF1bHRfZHQgPSAxIC8gNjA7CiAgICAgIHRoaXMubmV4dElkID0gMDsKICAgICAgdGhpcy5ncmF2aXR5ID0gbmV3IFZlYzMoKTsKCiAgICAgIGlmIChvcHRpb25zLmdyYXZpdHkpIHsKICAgICAgICB0aGlzLmdyYXZpdHkuY29weShvcHRpb25zLmdyYXZpdHkpOwogICAgICB9CgogICAgICBpZiAob3B0aW9ucy5mcmljdGlvbkdyYXZpdHkpIHsKICAgICAgICB0aGlzLmZyaWN0aW9uR3Jhdml0eSA9IG5ldyBWZWMzKCk7CiAgICAgICAgdGhpcy5mcmljdGlvbkdyYXZpdHkuY29weShvcHRpb25zLmZyaWN0aW9uR3Jhdml0eSk7CiAgICAgIH0KCiAgICAgIHRoaXMuYnJvYWRwaGFzZSA9IG9wdGlvbnMuYnJvYWRwaGFzZSAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5icm9hZHBoYXNlIDogbmV3IE5haXZlQnJvYWRwaGFzZSgpOwogICAgICB0aGlzLmJvZGllcyA9IFtdOwogICAgICB0aGlzLmhhc0FjdGl2ZUJvZGllcyA9IGZhbHNlOwogICAgICB0aGlzLnNvbHZlciA9IG9wdGlvbnMuc29sdmVyICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLnNvbHZlciA6IG5ldyBHU1NvbHZlcigpOwogICAgICB0aGlzLmNvbnN0cmFpbnRzID0gW107CiAgICAgIHRoaXMubmFycm93cGhhc2UgPSBuZXcgTmFycm93cGhhc2UodGhpcyk7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4ID0gbmV3IEFycmF5Q29sbGlzaW9uTWF0cml4KCk7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4UHJldmlvdXMgPSBuZXcgQXJyYXlDb2xsaXNpb25NYXRyaXgoKTsKICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlciA9IG5ldyBPdmVybGFwS2VlcGVyKCk7CiAgICAgIHRoaXMuc2hhcGVPdmVybGFwS2VlcGVyID0gbmV3IE92ZXJsYXBLZWVwZXIoKTsKICAgICAgdGhpcy5jb250YWN0bWF0ZXJpYWxzID0gW107CiAgICAgIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUgPSBuZXcgVHVwbGVEaWN0aW9uYXJ5KCk7CiAgICAgIHRoaXMuZGVmYXVsdE1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKCdkZWZhdWx0Jyk7CiAgICAgIHRoaXMuZGVmYXVsdENvbnRhY3RNYXRlcmlhbCA9IG5ldyBDb250YWN0TWF0ZXJpYWwodGhpcy5kZWZhdWx0TWF0ZXJpYWwsIHRoaXMuZGVmYXVsdE1hdGVyaWFsLCB7CiAgICAgICAgZnJpY3Rpb246IDAuMywKICAgICAgICByZXN0aXR1dGlvbjogMC4wCiAgICAgIH0pOwogICAgICB0aGlzLmRvUHJvZmlsaW5nID0gZmFsc2U7CiAgICAgIHRoaXMucHJvZmlsZSA9IHsKICAgICAgICBzb2x2ZTogMCwKICAgICAgICBtYWtlQ29udGFjdENvbnN0cmFpbnRzOiAwLAogICAgICAgIGJyb2FkcGhhc2U6IDAsCiAgICAgICAgaW50ZWdyYXRlOiAwLAogICAgICAgIG5hcnJvd3BoYXNlOiAwCiAgICAgIH07CiAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSAwOwogICAgICB0aGlzLnN1YnN5c3RlbXMgPSBbXTsKICAgICAgdGhpcy5hZGRCb2R5RXZlbnQgPSB7CiAgICAgICAgdHlwZTogJ2FkZEJvZHknLAogICAgICAgIGJvZHk6IG51bGwKICAgICAgfTsKICAgICAgdGhpcy5yZW1vdmVCb2R5RXZlbnQgPSB7CiAgICAgICAgdHlwZTogJ3JlbW92ZUJvZHknLAogICAgICAgIGJvZHk6IG51bGwKICAgICAgfTsKICAgICAgdGhpcy5pZFRvQm9keU1hcCA9IHt9OwogICAgICB0aGlzLmJyb2FkcGhhc2Uuc2V0V29ybGQodGhpcyk7CiAgICB9CiAgICAvKioKICAgICAqIEdldCB0aGUgY29udGFjdCBtYXRlcmlhbCBiZXR3ZWVuIG1hdGVyaWFscyBtMSBhbmQgbTIKICAgICAqIEByZXR1cm4gVGhlIGNvbnRhY3QgbWF0ZXJpYWwgaWYgaXQgd2FzIGZvdW5kLgogICAgICovCgoKICAgIGdldENvbnRhY3RNYXRlcmlhbChtMSwgbTIpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUuZ2V0KG0xLmlkLCBtMi5pZCk7CiAgICB9CiAgICAvKioKICAgICAqIFN0b3JlIG9sZCBjb2xsaXNpb24gc3RhdGUgaW5mbwogICAgICovCgoKICAgIGNvbGxpc2lvbk1hdHJpeFRpY2soKSB7CiAgICAgIGNvbnN0IHRlbXAgPSB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzOwogICAgICB0aGlzLmNvbGxpc2lvbk1hdHJpeFByZXZpb3VzID0gdGhpcy5jb2xsaXNpb25NYXRyaXg7CiAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4ID0gdGVtcDsKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXgucmVzZXQoKTsKICAgICAgdGhpcy5ib2R5T3ZlcmxhcEtlZXBlci50aWNrKCk7CiAgICAgIHRoaXMuc2hhcGVPdmVybGFwS2VlcGVyLnRpY2soKTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGEgY29uc3RyYWludCB0byB0aGUgc2ltdWxhdGlvbi4KICAgICAqLwoKCiAgICBhZGRDb25zdHJhaW50KGMpIHsKICAgICAgdGhpcy5jb25zdHJhaW50cy5wdXNoKGMpOwogICAgfQogICAgLyoqCiAgICAgKiBSZW1vdmVzIGEgY29uc3RyYWludAogICAgICovCgoKICAgIHJlbW92ZUNvbnN0cmFpbnQoYykgewogICAgICBjb25zdCBpZHggPSB0aGlzLmNvbnN0cmFpbnRzLmluZGV4T2YoYyk7CgogICAgICBpZiAoaWR4ICE9PSAtMSkgewogICAgICAgIHRoaXMuY29uc3RyYWludHMuc3BsaWNlKGlkeCwgMSk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmF5Y2FzdCB0ZXN0CiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgLnJheWNhc3RBbGwsIC5yYXljYXN0Q2xvc2VzdCBvciAucmF5Y2FzdEFueSBpbnN0ZWFkLgogICAgICovCgoKICAgIHJheVRlc3QoZnJvbSwgdG8sIHJlc3VsdCkgewogICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUmF5Y2FzdFJlc3VsdCkgewogICAgICAgIC8vIERvIHJheWNhc3RDbG9zZXN0CiAgICAgICAgdGhpcy5yYXljYXN0Q2xvc2VzdChmcm9tLCB0bywgewogICAgICAgICAgc2tpcEJhY2tmYWNlczogdHJ1ZQogICAgICAgIH0sIHJlc3VsdCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gRG8gcmF5Y2FzdEFsbAogICAgICAgIHRoaXMucmF5Y2FzdEFsbChmcm9tLCB0bywgewogICAgICAgICAgc2tpcEJhY2tmYWNlczogdHJ1ZQogICAgICAgIH0sIHJlc3VsdCk7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogUmF5IGNhc3QgYWdhaW5zdCBhbGwgYm9kaWVzLiBUaGUgcHJvdmlkZWQgY2FsbGJhY2sgd2lsbCBiZSBleGVjdXRlZCBmb3IgZWFjaCBoaXQgd2l0aCBhIFJheWNhc3RSZXN1bHQgYXMgc2luZ2xlIGFyZ3VtZW50LgogICAgICogQHJldHVybiBUcnVlIGlmIGFueSBib2R5IHdhcyBoaXQuCiAgICAgKi8KCgogICAgcmF5Y2FzdEFsbChmcm9tLCB0bywgb3B0aW9ucywgY2FsbGJhY2spIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgb3B0aW9ucy5tb2RlID0gUmF5LkFMTDsKICAgICAgb3B0aW9ucy5mcm9tID0gZnJvbTsKICAgICAgb3B0aW9ucy50byA9IHRvOwogICAgICBvcHRpb25zLmNhbGxiYWNrID0gY2FsbGJhY2s7CiAgICAgIHJldHVybiB0bXBSYXkuaW50ZXJzZWN0V29ybGQodGhpcywgb3B0aW9ucyk7CiAgICB9CiAgICAvKioKICAgICAqIFJheSBjYXN0LCBhbmQgc3RvcCBhdCB0aGUgZmlyc3QgcmVzdWx0LiBOb3RlIHRoYXQgdGhlIG9yZGVyIGlzIHJhbmRvbSAtIGJ1dCB0aGUgbWV0aG9kIGlzIGZhc3QuCiAgICAgKiBAcmV0dXJuIFRydWUgaWYgYW55IGJvZHkgd2FzIGhpdC4KICAgICAqLwoKCiAgICByYXljYXN0QW55KGZyb20sIHRvLCBvcHRpb25zLCByZXN1bHQpIHsKICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgewogICAgICAgIG9wdGlvbnMgPSB7fTsKICAgICAgfQoKICAgICAgb3B0aW9ucy5tb2RlID0gUmF5LkFOWTsKICAgICAgb3B0aW9ucy5mcm9tID0gZnJvbTsKICAgICAgb3B0aW9ucy50byA9IHRvOwogICAgICBvcHRpb25zLnJlc3VsdCA9IHJlc3VsdDsKICAgICAgcmV0dXJuIHRtcFJheS5pbnRlcnNlY3RXb3JsZCh0aGlzLCBvcHRpb25zKTsKICAgIH0KICAgIC8qKgogICAgICogUmF5IGNhc3QsIGFuZCByZXR1cm4gaW5mb3JtYXRpb24gb2YgdGhlIGNsb3Nlc3QgaGl0LgogICAgICogQHJldHVybiBUcnVlIGlmIGFueSBib2R5IHdhcyBoaXQuCiAgICAgKi8KCgogICAgcmF5Y2FzdENsb3Nlc3QoZnJvbSwgdG8sIG9wdGlvbnMsIHJlc3VsdCkgewogICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgICAgb3B0aW9ucyA9IHt9OwogICAgICB9CgogICAgICBvcHRpb25zLm1vZGUgPSBSYXkuQ0xPU0VTVDsKICAgICAgb3B0aW9ucy5mcm9tID0gZnJvbTsKICAgICAgb3B0aW9ucy50byA9IHRvOwogICAgICBvcHRpb25zLnJlc3VsdCA9IHJlc3VsdDsKICAgICAgcmV0dXJuIHRtcFJheS5pbnRlcnNlY3RXb3JsZCh0aGlzLCBvcHRpb25zKTsKICAgIH0KICAgIC8qKgogICAgICogQWRkIGEgcmlnaWQgYm9keSB0byB0aGUgc2ltdWxhdGlvbi4KICAgICAqIEB0b2RvIElmIHRoZSBzaW11bGF0aW9uIGhhcyBub3QgeWV0IHN0YXJ0ZWQsIHdoeSByZWNyZXRlIGFuZCBjb3B5IGFycmF5cyBmb3IgZWFjaCBib2R5PyBBY2N1bXVsYXRlIGluIGR5bmFtaWMgYXJyYXlzIGluIHRoaXMgY2FzZS4KICAgICAqIEB0b2RvIEFkZGluZyBhbiBhcnJheSBvZiBib2RpZXMgc2hvdWxkIGJlIHBvc3NpYmxlLiBUaGlzIHdvdWxkIHNhdmUgc29tZSBsb29wcyB0b28KICAgICAqLwoKCiAgICBhZGRCb2R5KGJvZHkpIHsKICAgICAgaWYgKHRoaXMuYm9kaWVzLmluY2x1ZGVzKGJvZHkpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBib2R5LmluZGV4ID0gdGhpcy5ib2RpZXMubGVuZ3RoOwogICAgICB0aGlzLmJvZGllcy5wdXNoKGJvZHkpOwogICAgICBib2R5LndvcmxkID0gdGhpczsKICAgICAgYm9keS5pbml0UG9zaXRpb24uY29weShib2R5LnBvc2l0aW9uKTsKICAgICAgYm9keS5pbml0VmVsb2NpdHkuY29weShib2R5LnZlbG9jaXR5KTsKICAgICAgYm9keS50aW1lTGFzdFNsZWVweSA9IHRoaXMudGltZTsKCiAgICAgIGlmIChib2R5IGluc3RhbmNlb2YgQm9keSkgewogICAgICAgIGJvZHkuaW5pdEFuZ3VsYXJWZWxvY2l0eS5jb3B5KGJvZHkuYW5ndWxhclZlbG9jaXR5KTsKICAgICAgICBib2R5LmluaXRRdWF0ZXJuaW9uLmNvcHkoYm9keS5xdWF0ZXJuaW9uKTsKICAgICAgfQoKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXguc2V0TnVtT2JqZWN0cyh0aGlzLmJvZGllcy5sZW5ndGgpOwogICAgICB0aGlzLmFkZEJvZHlFdmVudC5ib2R5ID0gYm9keTsKICAgICAgdGhpcy5pZFRvQm9keU1hcFtib2R5LmlkXSA9IGJvZHk7CiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudCh0aGlzLmFkZEJvZHlFdmVudCk7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZSBhIHJpZ2lkIGJvZHkgZnJvbSB0aGUgc2ltdWxhdGlvbi4KICAgICAqLwoKCiAgICByZW1vdmVCb2R5KGJvZHkpIHsKICAgICAgYm9keS53b3JsZCA9IG51bGw7CiAgICAgIGNvbnN0IG4gPSB0aGlzLmJvZGllcy5sZW5ndGggLSAxOwogICAgICBjb25zdCBib2RpZXMgPSB0aGlzLmJvZGllczsKICAgICAgY29uc3QgaWR4ID0gYm9kaWVzLmluZGV4T2YoYm9keSk7CgogICAgICBpZiAoaWR4ICE9PSAtMSkgewogICAgICAgIGJvZGllcy5zcGxpY2UoaWR4LCAxKTsgLy8gVG9kbzogc2hvdWxkIHVzZSBhIGdhcmJhZ2UgZnJlZSBtZXRob2QKICAgICAgICAvLyBSZWNvbXB1dGUgaW5kZXgKCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGJvZGllcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgYm9kaWVzW2ldLmluZGV4ID0gaTsKICAgICAgICB9CgogICAgICAgIHRoaXMuY29sbGlzaW9uTWF0cml4LnNldE51bU9iamVjdHMobik7CiAgICAgICAgdGhpcy5yZW1vdmVCb2R5RXZlbnQuYm9keSA9IGJvZHk7CiAgICAgICAgZGVsZXRlIHRoaXMuaWRUb0JvZHlNYXBbYm9keS5pZF07CiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KHRoaXMucmVtb3ZlQm9keUV2ZW50KTsKICAgICAgfQogICAgfQoKICAgIGdldEJvZHlCeUlkKGlkKSB7CiAgICAgIHJldHVybiB0aGlzLmlkVG9Cb2R5TWFwW2lkXTsKICAgIH0KICAgIC8qKgogICAgICogQHRvZG8gTWFrZSBhIGZhc3RlciBtYXAKICAgICAqLwoKCiAgICBnZXRTaGFwZUJ5SWQoaWQpIHsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJvZGllcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IHNoYXBlcyA9IGJvZGllc1tpXS5zaGFwZXM7CgogICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc2hhcGVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICBjb25zdCBzaGFwZSA9IHNoYXBlc1tqXTsKCiAgICAgICAgICBpZiAoc2hhcGUuaWQgPT09IGlkKSB7CiAgICAgICAgICAgIHJldHVybiBzaGFwZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgLyoqCiAgICAgKiBBZGRzIGEgY29udGFjdCBtYXRlcmlhbCB0byB0aGUgV29ybGQKICAgICAqLwoKCiAgICBhZGRDb250YWN0TWF0ZXJpYWwoY21hdCkgewogICAgICAvLyBBZGQgY29udGFjdCBtYXRlcmlhbAogICAgICB0aGlzLmNvbnRhY3RtYXRlcmlhbHMucHVzaChjbWF0KTsgLy8gQWRkIGN1cnJlbnQgY29udGFjdCBtYXRlcmlhbCB0byB0aGUgbWF0ZXJpYWwgdGFibGUKCiAgICAgIHRoaXMuY29udGFjdE1hdGVyaWFsVGFibGUuc2V0KGNtYXQubWF0ZXJpYWxzWzBdLmlkLCBjbWF0Lm1hdGVyaWFsc1sxXS5pZCwgY21hdCk7CiAgICB9CiAgICAvKioKICAgICAqIFJlbW92ZXMgYSBjb250YWN0IG1hdGVyaWFsIGZyb20gdGhlIFdvcmxkLgogICAgICovCgoKICAgIHJlbW92ZUNvbnRhY3RNYXRlcmlhbChjbWF0KSB7CiAgICAgIGNvbnN0IGlkeCA9IHRoaXMuY29udGFjdG1hdGVyaWFscy5pbmRleE9mKGNtYXQpOwoKICAgICAgaWYgKGlkeCA9PT0gLTEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuY29udGFjdG1hdGVyaWFscy5zcGxpY2UoaWR4LCAxKTsKICAgICAgdGhpcy5jb250YWN0TWF0ZXJpYWxUYWJsZS5kZWxldGUoY21hdC5tYXRlcmlhbHNbMF0uaWQsIGNtYXQubWF0ZXJpYWxzWzFdLmlkKTsKICAgIH0KICAgIC8qKgogICAgICogU3RlcCB0aGUgc2ltdWxhdGlvbiBmb3J3YXJkIGtlZXBpbmcgdHJhY2sgb2YgbGFzdCBjYWxsZWQgdGltZQogICAgICogdG8gYmUgYWJsZSB0byBzdGVwIHRoZSB3b3JsZCBhdCBhIGZpeGVkIHJhdGUsIGluZGVwZW5kZW50bHkgb2YgZnJhbWVyYXRlLgogICAgICoKICAgICAqIEBwYXJhbSBkdCBUaGUgZml4ZWQgdGltZSBzdGVwIHNpemUgdG8gdXNlIChkZWZhdWx0OiAxIC8gNjApLgogICAgICogQHBhcmFtIG1heFN1YlN0ZXBzIE1heGltdW0gbnVtYmVyIG9mIGZpeGVkIHN0ZXBzIHRvIHRha2UgcGVyIGZ1bmN0aW9uIGNhbGwgKGRlZmF1bHQ6IDEwKS4KICAgICAqIEBzZWUgaHR0cHM6Ly9nYWZmZXJvbmdhbWVzLmNvbS9wb3N0L2ZpeF95b3VyX3RpbWVzdGVwLwogICAgICogQGV4YW1wbGUKICAgICAqICAgICAvLyBSdW4gdGhlIHNpbXVsYXRpb24gaW5kZXBlbmRlbnRseSBvZiBmcmFtZXJhdGUgZXZlcnkgMSAvIDYwIG1zCiAgICAgKiAgICAgd29ybGQuZml4ZWRTdGVwKCkKICAgICAqLwoKCiAgICBmaXhlZFN0ZXAoZHQsIG1heFN1YlN0ZXBzKSB7CiAgICAgIGlmIChkdCA9PT0gdm9pZCAwKSB7CiAgICAgICAgZHQgPSAxIC8gNjA7CiAgICAgIH0KCiAgICAgIGlmIChtYXhTdWJTdGVwcyA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4U3ViU3RlcHMgPSAxMDsKICAgICAgfQoKICAgICAgY29uc3QgdGltZSA9IHBlcmZvcm1hbmNlLm5vdygpIC8gMTAwMDsgLy8gc2Vjb25kcwoKICAgICAgaWYgKCF0aGlzLmxhc3RDYWxsVGltZSkgewogICAgICAgIHRoaXMuc3RlcChkdCwgdW5kZWZpbmVkLCBtYXhTdWJTdGVwcyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgdGltZVNpbmNlTGFzdENhbGxlZCA9IHRpbWUgLSB0aGlzLmxhc3RDYWxsVGltZTsKICAgICAgICB0aGlzLnN0ZXAoZHQsIHRpbWVTaW5jZUxhc3RDYWxsZWQsIG1heFN1YlN0ZXBzKTsKICAgICAgfQoKICAgICAgdGhpcy5sYXN0Q2FsbFRpbWUgPSB0aW1lOwogICAgfQogICAgLyoqCiAgICAgKiBTdGVwIHRoZSBwaHlzaWNzIHdvcmxkIGZvcndhcmQgaW4gdGltZS4KICAgICAqCiAgICAgKiBUaGVyZSBhcmUgdHdvIG1vZGVzLiBUaGUgc2ltcGxlIG1vZGUgaXMgZml4ZWQgdGltZXN0ZXBwaW5nIHdpdGhvdXQgaW50ZXJwb2xhdGlvbi4gSW4gdGhpcyBjYXNlIHlvdSBvbmx5IHVzZSB0aGUgZmlyc3QgYXJndW1lbnQuIFRoZSBzZWNvbmQgY2FzZSB1c2VzIGludGVycG9sYXRpb24uIEluIHRoYXQgeW91IGFsc28gcHJvdmlkZSB0aGUgdGltZSBzaW5jZSB0aGUgZnVuY3Rpb24gd2FzIGxhc3QgdXNlZCwgYXMgd2VsbCBhcyB0aGUgbWF4aW11bSBmaXhlZCB0aW1lc3RlcHMgdG8gdGFrZS4KICAgICAqCiAgICAgKiBAcGFyYW0gZHQgVGhlIGZpeGVkIHRpbWUgc3RlcCBzaXplIHRvIHVzZS4KICAgICAqIEBwYXJhbSB0aW1lU2luY2VMYXN0Q2FsbGVkIFRoZSB0aW1lIGVsYXBzZWQgc2luY2UgdGhlIGZ1bmN0aW9uIHdhcyBsYXN0IGNhbGxlZC4KICAgICAqIEBwYXJhbSBtYXhTdWJTdGVwcyBNYXhpbXVtIG51bWJlciBvZiBmaXhlZCBzdGVwcyB0byB0YWtlIHBlciBmdW5jdGlvbiBjYWxsIChkZWZhdWx0OiAxMCkuCiAgICAgKiBAc2VlIGh0dHBzOi8vd2ViLmFyY2hpdmUub3JnL3dlYi8yMDE4MDQyNjE1NDUzMS9odHRwOi8vYnVsbGV0cGh5c2ljcy5vcmcvbWVkaWF3aWtpLTEuNS44L2luZGV4LnBocC9TdGVwcGluZ19UaGVfV29ybGQjV2hhdF9kb190aGVfcGFyYW1ldGVyc190b19idER5bmFtaWNzV29ybGQ6OnN0ZXBTaW11bGF0aW9uX21lYW4uM0YKICAgICAqIEBleGFtcGxlCiAgICAgKiAgICAgLy8gZml4ZWQgdGltZXN0ZXBwaW5nIHdpdGhvdXQgaW50ZXJwb2xhdGlvbgogICAgICogICAgIHdvcmxkLnN0ZXAoMSAvIDYwKQogICAgICovCgoKICAgIHN0ZXAoZHQsIHRpbWVTaW5jZUxhc3RDYWxsZWQsIG1heFN1YlN0ZXBzKSB7CiAgICAgIGlmIChtYXhTdWJTdGVwcyA9PT0gdm9pZCAwKSB7CiAgICAgICAgbWF4U3ViU3RlcHMgPSAxMDsKICAgICAgfQoKICAgICAgaWYgKHRpbWVTaW5jZUxhc3RDYWxsZWQgPT09IHVuZGVmaW5lZCkgewogICAgICAgIC8vIEZpeGVkLCBzaW1wbGUgc3RlcHBpbmcKICAgICAgICB0aGlzLmludGVybmFsU3RlcChkdCk7IC8vIEluY3JlbWVudCB0aW1lCgogICAgICAgIHRoaXMudGltZSArPSBkdDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFjY3VtdWxhdG9yICs9IHRpbWVTaW5jZUxhc3RDYWxsZWQ7CiAgICAgICAgY29uc3QgdDAgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgICBsZXQgc3Vic3RlcHMgPSAwOwoKICAgICAgICB3aGlsZSAodGhpcy5hY2N1bXVsYXRvciA+PSBkdCAmJiBzdWJzdGVwcyA8IG1heFN1YlN0ZXBzKSB7CiAgICAgICAgICAvLyBEbyBmaXhlZCBzdGVwcyB0byBjYXRjaCB1cAogICAgICAgICAgdGhpcy5pbnRlcm5hbFN0ZXAoZHQpOwogICAgICAgICAgdGhpcy5hY2N1bXVsYXRvciAtPSBkdDsKICAgICAgICAgIHN1YnN0ZXBzKys7CgogICAgICAgICAgaWYgKHBlcmZvcm1hbmNlLm5vdygpIC0gdDAgPiBkdCAqIDEwMDApIHsKICAgICAgICAgICAgLy8gVGhlIGZyYW1lcmF0ZSBpcyBub3QgaW50ZXJhY3RpdmUgYW55bW9yZS4KICAgICAgICAgICAgLy8gV2UgYXJlIGJlbG93IHRoZSB0YXJnZXQgZnJhbWVyYXRlLgogICAgICAgICAgICAvLyBCZXR0ZXIgYmFpbCBvdXQuCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIH0gLy8gUmVtb3ZlIHRoZSBleGNlc3MgYWNjdW11bGF0b3IsIHNpbmNlIHdlIG1heSBub3QKICAgICAgICAvLyBoYXZlIGhhZCBlbm91Z2ggc3Vic3RlcHMgYXZhaWxhYmxlIHRvIGNhdGNoIHVwCgoKICAgICAgICB0aGlzLmFjY3VtdWxhdG9yID0gdGhpcy5hY2N1bXVsYXRvciAlIGR0OwogICAgICAgIGNvbnN0IHQgPSB0aGlzLmFjY3VtdWxhdG9yIC8gZHQ7CgogICAgICAgIGZvciAobGV0IGogPSAwOyBqICE9PSB0aGlzLmJvZGllcy5sZW5ndGg7IGorKykgewogICAgICAgICAgY29uc3QgYiA9IHRoaXMuYm9kaWVzW2pdOwogICAgICAgICAgYi5wcmV2aW91c1Bvc2l0aW9uLmxlcnAoYi5wb3NpdGlvbiwgdCwgYi5pbnRlcnBvbGF0ZWRQb3NpdGlvbik7CiAgICAgICAgICBiLnByZXZpb3VzUXVhdGVybmlvbi5zbGVycChiLnF1YXRlcm5pb24sIHQsIGIuaW50ZXJwb2xhdGVkUXVhdGVybmlvbik7CiAgICAgICAgICBiLnByZXZpb3VzUXVhdGVybmlvbi5ub3JtYWxpemUoKTsKICAgICAgICB9CgogICAgICAgIHRoaXMudGltZSArPSB0aW1lU2luY2VMYXN0Q2FsbGVkOwogICAgICB9CiAgICB9CgogICAgaW50ZXJuYWxTdGVwKGR0KSB7CiAgICAgIHRoaXMuZHQgPSBkdDsKICAgICAgY29uc3QgY29udGFjdHMgPSB0aGlzLmNvbnRhY3RzOwogICAgICBjb25zdCBwMSA9IFdvcmxkX3N0ZXBfcDE7CiAgICAgIGNvbnN0IHAyID0gV29ybGRfc3RlcF9wMjsKICAgICAgY29uc3QgTiA9IHRoaXMuYm9kaWVzLmxlbmd0aDsKICAgICAgY29uc3QgYm9kaWVzID0gdGhpcy5ib2RpZXM7CiAgICAgIGNvbnN0IHNvbHZlciA9IHRoaXMuc29sdmVyOwogICAgICBjb25zdCBncmF2aXR5ID0gdGhpcy5ncmF2aXR5OwogICAgICBjb25zdCBkb1Byb2ZpbGluZyA9IHRoaXMuZG9Qcm9maWxpbmc7CiAgICAgIGNvbnN0IHByb2ZpbGUgPSB0aGlzLnByb2ZpbGU7CiAgICAgIGNvbnN0IERZTkFNSUMgPSBCb2R5LkRZTkFNSUM7CiAgICAgIGxldCBwcm9maWxpbmdTdGFydCA9IC1JbmZpbml0eTsKICAgICAgY29uc3QgY29uc3RyYWludHMgPSB0aGlzLmNvbnN0cmFpbnRzOwogICAgICBjb25zdCBmcmljdGlvbkVxdWF0aW9uUG9vbCA9IFdvcmxkX3N0ZXBfZnJpY3Rpb25FcXVhdGlvblBvb2w7CiAgICAgIGdyYXZpdHkubGVuZ3RoKCk7CiAgICAgIGNvbnN0IGd4ID0gZ3Jhdml0eS54OwogICAgICBjb25zdCBneSA9IGdyYXZpdHkueTsKICAgICAgY29uc3QgZ3ogPSBncmF2aXR5Lno7CiAgICAgIGxldCBpID0gMDsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGluZ1N0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7CiAgICAgIH0gLy8gQWRkIGdyYXZpdHkgdG8gYWxsIG9iamVjdHMKCgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiaSA9IGJvZGllc1tpXTsKCiAgICAgICAgaWYgKGJpLnR5cGUgPT09IERZTkFNSUMpIHsKICAgICAgICAgIC8vIE9ubHkgZm9yIGR5bmFtaWMgYm9kaWVzCiAgICAgICAgICBjb25zdCBmID0gYmkuZm9yY2U7CiAgICAgICAgICBjb25zdCBtID0gYmkubWFzczsKICAgICAgICAgIGYueCArPSBtICogZ3g7CiAgICAgICAgICBmLnkgKz0gbSAqIGd5OwogICAgICAgICAgZi56ICs9IG0gKiBnejsKICAgICAgICB9CiAgICAgIH0gLy8gVXBkYXRlIHN1YnN5c3RlbXMKCgogICAgICBmb3IgKGxldCBpID0gMCwgTnN1YnN5c3RlbXMgPSB0aGlzLnN1YnN5c3RlbXMubGVuZ3RoOyBpICE9PSBOc3Vic3lzdGVtczsgaSsrKSB7CiAgICAgICAgdGhpcy5zdWJzeXN0ZW1zW2ldLnVwZGF0ZSgpOwogICAgICB9IC8vIENvbGxpc2lvbiBkZXRlY3Rpb24KCgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB9CgogICAgICBwMS5sZW5ndGggPSAwOyAvLyBDbGVhbiB1cCBwYWlyIGFycmF5cyBmcm9tIGxhc3Qgc3RlcAoKICAgICAgcDIubGVuZ3RoID0gMDsKICAgICAgdGhpcy5icm9hZHBoYXNlLmNvbGxpc2lvblBhaXJzKHRoaXMsIHAxLCBwMik7CgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxlLmJyb2FkcGhhc2UgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICB9IC8vIFJlbW92ZSBjb25zdHJhaW5lZCBwYWlycyB3aXRoIGNvbGxpZGVDb25uZWN0ZWQgPT0gZmFsc2UKCgogICAgICBsZXQgTmNvbnN0cmFpbnRzID0gY29uc3RyYWludHMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTmNvbnN0cmFpbnRzOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gY29uc3RyYWludHNbaV07CgogICAgICAgIGlmICghYy5jb2xsaWRlQ29ubmVjdGVkKSB7CiAgICAgICAgICBmb3IgKGxldCBqID0gcDEubGVuZ3RoIC0gMTsgaiA+PSAwOyBqIC09IDEpIHsKICAgICAgICAgICAgaWYgKGMuYm9keUEgPT09IHAxW2pdICYmIGMuYm9keUIgPT09IHAyW2pdIHx8IGMuYm9keUIgPT09IHAxW2pdICYmIGMuYm9keUEgPT09IHAyW2pdKSB7CiAgICAgICAgICAgICAgcDEuc3BsaWNlKGosIDEpOwogICAgICAgICAgICAgIHAyLnNwbGljZShqLCAxKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXhUaWNrKCk7IC8vIEdlbmVyYXRlIGNvbnRhY3RzCgogICAgICBpZiAoZG9Qcm9maWxpbmcpIHsKICAgICAgICBwcm9maWxpbmdTdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgICB9CgogICAgICBjb25zdCBvbGRjb250YWN0cyA9IFdvcmxkX3N0ZXBfb2xkQ29udGFjdHM7CiAgICAgIGNvbnN0IE5vbGRDb250YWN0cyA9IGNvbnRhY3RzLmxlbmd0aDsKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE5vbGRDb250YWN0czsgaSsrKSB7CiAgICAgICAgb2xkY29udGFjdHMucHVzaChjb250YWN0c1tpXSk7CiAgICAgIH0KCiAgICAgIGNvbnRhY3RzLmxlbmd0aCA9IDA7IC8vIFRyYW5zZmVyIEZyaWN0aW9uRXF1YXRpb24gZnJvbSBjdXJyZW50IGxpc3QgdG8gdGhlIHBvb2wgZm9yIHJldXNlCgogICAgICBjb25zdCBOb2xkRnJpY3Rpb25FcXVhdGlvbnMgPSB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aDsKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE5vbGRGcmljdGlvbkVxdWF0aW9uczsgaSsrKSB7CiAgICAgICAgZnJpY3Rpb25FcXVhdGlvblBvb2wucHVzaCh0aGlzLmZyaWN0aW9uRXF1YXRpb25zW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9ucy5sZW5ndGggPSAwOwogICAgICB0aGlzLm5hcnJvd3BoYXNlLmdldENvbnRhY3RzKHAxLCBwMiwgdGhpcywgY29udGFjdHMsIG9sZGNvbnRhY3RzLCAvLyBUbyBiZSByZXVzZWQKICAgICAgdGhpcy5mcmljdGlvbkVxdWF0aW9ucywgZnJpY3Rpb25FcXVhdGlvblBvb2wpOwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsZS5uYXJyb3dwaGFzZSA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgIH0gLy8gTG9vcCBvdmVyIGFsbCBjb2xsaXNpb25zCgoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgfSAvLyBBZGQgYWxsIGZyaWN0aW9uIGVxcwoKCiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLmZyaWN0aW9uRXF1YXRpb25zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgc29sdmVyLmFkZEVxdWF0aW9uKHRoaXMuZnJpY3Rpb25FcXVhdGlvbnNbaV0pOwogICAgICB9CgogICAgICBjb25zdCBuY29udGFjdHMgPSBjb250YWN0cy5sZW5ndGg7CgogICAgICBmb3IgKGxldCBrID0gMDsgayAhPT0gbmNvbnRhY3RzOyBrKyspIHsKICAgICAgICAvLyBDdXJyZW50IGNvbnRhY3QKICAgICAgICBjb25zdCBjID0gY29udGFjdHNba107IC8vIEdldCBjdXJyZW50IGNvbGxpc2lvbiBpbmRlY2VzCgogICAgICAgIGNvbnN0IGJpID0gYy5iaTsKICAgICAgICBjb25zdCBiaiA9IGMuYmo7CiAgICAgICAgY29uc3Qgc2kgPSBjLnNpOwogICAgICAgIGNvbnN0IHNqID0gYy5zajsgLy8gR2V0IGNvbGxpc2lvbiBwcm9wZXJ0aWVzCgogICAgICAgIGxldCBjbTsKCiAgICAgICAgaWYgKGJpLm1hdGVyaWFsICYmIGJqLm1hdGVyaWFsKSB7CiAgICAgICAgICBjbSA9IHRoaXMuZ2V0Q29udGFjdE1hdGVyaWFsKGJpLm1hdGVyaWFsLCBiai5tYXRlcmlhbCkgfHwgdGhpcy5kZWZhdWx0Q29udGFjdE1hdGVyaWFsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjbSA9IHRoaXMuZGVmYXVsdENvbnRhY3RNYXRlcmlhbDsKICAgICAgICB9IC8vIGMuZW5hYmxlZCA9IGJpLmNvbGxpc2lvblJlc3BvbnNlICYmIGJqLmNvbGxpc2lvblJlc3BvbnNlICYmIHNpLmNvbGxpc2lvblJlc3BvbnNlICYmIHNqLmNvbGxpc2lvblJlc3BvbnNlOwoKCiAgICAgICAgY20uZnJpY3Rpb247IC8vIGMucmVzdGl0dXRpb24gPSBjbS5yZXN0aXR1dGlvbjsKICAgICAgICAvLyBJZiBmcmljdGlvbiBvciByZXN0aXR1dGlvbiB3ZXJlIHNwZWNpZmllZCBpbiB0aGUgbWF0ZXJpYWwsIHVzZSB0aGVtCgogICAgICAgIGlmIChiaS5tYXRlcmlhbCAmJiBiai5tYXRlcmlhbCkgewogICAgICAgICAgaWYgKGJpLm1hdGVyaWFsLmZyaWN0aW9uID49IDAgJiYgYmoubWF0ZXJpYWwuZnJpY3Rpb24gPj0gMCkgewogICAgICAgICAgICBiaS5tYXRlcmlhbC5mcmljdGlvbiAqIGJqLm1hdGVyaWFsLmZyaWN0aW9uOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChiaS5tYXRlcmlhbC5yZXN0aXR1dGlvbiA+PSAwICYmIGJqLm1hdGVyaWFsLnJlc3RpdHV0aW9uID49IDApIHsKICAgICAgICAgICAgYy5yZXN0aXR1dGlvbiA9IGJpLm1hdGVyaWFsLnJlc3RpdHV0aW9uICogYmoubWF0ZXJpYWwucmVzdGl0dXRpb247CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBjLnNldFNwb29rUGFyYW1zKAogICAgICAgIC8vICAgICAgICAgICBjbS5jb250YWN0RXF1YXRpb25TdGlmZm5lc3MsCiAgICAgICAgLy8gICAgICAgICAgIGNtLmNvbnRhY3RFcXVhdGlvblJlbGF4YXRpb24sCiAgICAgICAgLy8gICAgICAgICAgIGR0CiAgICAgICAgLy8gICAgICAgKTsKCgogICAgICAgIHNvbHZlci5hZGRFcXVhdGlvbihjKTsgLy8gLy8gQWRkIGZyaWN0aW9uIGNvbnN0cmFpbnQgZXF1YXRpb24KICAgICAgICAvLyBpZihtdSA+IDApewogICAgICAgIC8vIAkvLyBDcmVhdGUgMiB0YW5nZW50IGVxdWF0aW9ucwogICAgICAgIC8vIAljb25zdCBtdWcgPSBtdSAqIGdub3JtOwogICAgICAgIC8vIAljb25zdCByZWR1Y2VkTWFzcyA9IChiaS5pbnZNYXNzICsgYmouaW52TWFzcyk7CiAgICAgICAgLy8gCWlmKHJlZHVjZWRNYXNzID4gMCl7CiAgICAgICAgLy8gCQlyZWR1Y2VkTWFzcyA9IDEvcmVkdWNlZE1hc3M7CiAgICAgICAgLy8gCX0KICAgICAgICAvLyAJY29uc3QgcG9vbCA9IGZyaWN0aW9uRXF1YXRpb25Qb29sOwogICAgICAgIC8vIAljb25zdCBjMSA9IHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBGcmljdGlvbkVxdWF0aW9uKGJpLGJqLG11ZypyZWR1Y2VkTWFzcyk7CiAgICAgICAgLy8gCWNvbnN0IGMyID0gcG9vbC5sZW5ndGggPyBwb29sLnBvcCgpIDogbmV3IEZyaWN0aW9uRXF1YXRpb24oYmksYmosbXVnKnJlZHVjZWRNYXNzKTsKICAgICAgICAvLyAJdGhpcy5mcmljdGlvbkVxdWF0aW9ucy5wdXNoKGMxLCBjMik7CiAgICAgICAgLy8gCWMxLmJpID0gYzIuYmkgPSBiaTsKICAgICAgICAvLyAJYzEuYmogPSBjMi5iaiA9IGJqOwogICAgICAgIC8vIAljMS5taW5Gb3JjZSA9IGMyLm1pbkZvcmNlID0gLW11ZypyZWR1Y2VkTWFzczsKICAgICAgICAvLyAJYzEubWF4Rm9yY2UgPSBjMi5tYXhGb3JjZSA9IG11ZypyZWR1Y2VkTWFzczsKICAgICAgICAvLyAJLy8gQ29weSBvdmVyIHRoZSByZWxhdGl2ZSB2ZWN0b3JzCiAgICAgICAgLy8gCWMxLnJpLmNvcHkoYy5yaSk7CiAgICAgICAgLy8gCWMxLnJqLmNvcHkoYy5yaik7CiAgICAgICAgLy8gCWMyLnJpLmNvcHkoYy5yaSk7CiAgICAgICAgLy8gCWMyLnJqLmNvcHkoYy5yaik7CiAgICAgICAgLy8gCS8vIENvbnN0cnVjdCB0YW5nZW50cwogICAgICAgIC8vIAljLm5pLnRhbmdlbnRzKGMxLnQsIGMyLnQpOwogICAgICAgIC8vICAgICAgICAgICAvLyBTZXQgc3Bvb2sgcGFyYW1zCiAgICAgICAgLy8gICAgICAgICAgIGMxLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCBkdCk7CiAgICAgICAgLy8gICAgICAgICAgIGMyLnNldFNwb29rUGFyYW1zKGNtLmZyaWN0aW9uRXF1YXRpb25TdGlmZm5lc3MsIGNtLmZyaWN0aW9uRXF1YXRpb25SZWxheGF0aW9uLCBkdCk7CiAgICAgICAgLy8gICAgICAgICAgIGMxLmVuYWJsZWQgPSBjMi5lbmFibGVkID0gYy5lbmFibGVkOwogICAgICAgIC8vIAkvLyBBZGQgZXF1YXRpb25zIHRvIHNvbHZlcgogICAgICAgIC8vIAlzb2x2ZXIuYWRkRXF1YXRpb24oYzEpOwogICAgICAgIC8vIAlzb2x2ZXIuYWRkRXF1YXRpb24oYzIpOwogICAgICAgIC8vIH0KCiAgICAgICAgaWYgKGJpLmFsbG93U2xlZXAgJiYgYmkudHlwZSA9PT0gQm9keS5EWU5BTUlDICYmIGJpLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgJiYgYmouc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBiai50eXBlICE9PSBCb2R5LlNUQVRJQykgewogICAgICAgICAgY29uc3Qgc3BlZWRTcXVhcmVkQiA9IGJqLnZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKSArIGJqLmFuZ3VsYXJWZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCk7CiAgICAgICAgICBjb25zdCBzcGVlZExpbWl0U3F1YXJlZEIgPSBiai5zbGVlcFNwZWVkTGltaXQgKiogMjsKCiAgICAgICAgICBpZiAoc3BlZWRTcXVhcmVkQiA+PSBzcGVlZExpbWl0U3F1YXJlZEIgKiAyKSB7CiAgICAgICAgICAgIGJpLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKGJqLmFsbG93U2xlZXAgJiYgYmoudHlwZSA9PT0gQm9keS5EWU5BTUlDICYmIGJqLnNsZWVwU3RhdGUgPT09IEJvZHkuU0xFRVBJTkcgJiYgYmkuc2xlZXBTdGF0ZSA9PT0gQm9keS5BV0FLRSAmJiBiaS50eXBlICE9PSBCb2R5LlNUQVRJQykgewogICAgICAgICAgY29uc3Qgc3BlZWRTcXVhcmVkQSA9IGJpLnZlbG9jaXR5Lmxlbmd0aFNxdWFyZWQoKSArIGJpLmFuZ3VsYXJWZWxvY2l0eS5sZW5ndGhTcXVhcmVkKCk7CiAgICAgICAgICBjb25zdCBzcGVlZExpbWl0U3F1YXJlZEEgPSBiaS5zbGVlcFNwZWVkTGltaXQgKiogMjsKCiAgICAgICAgICBpZiAoc3BlZWRTcXVhcmVkQSA+PSBzcGVlZExpbWl0U3F1YXJlZEEgKiAyKSB7CiAgICAgICAgICAgIGJqLndha2VVcEFmdGVyTmFycm93cGhhc2UgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0gLy8gTm93IHdlIGtub3cgdGhhdCBpIGFuZCBqIGFyZSBpbiBjb250YWN0LiBTZXQgY29sbGlzaW9uIG1hdHJpeCBzdGF0ZQoKCiAgICAgICAgdGhpcy5jb2xsaXNpb25NYXRyaXguc2V0KGJpLCBiaiwgdHJ1ZSk7CgogICAgICAgIGlmICghdGhpcy5jb2xsaXNpb25NYXRyaXhQcmV2aW91cy5nZXQoYmksIGJqKSkgewogICAgICAgICAgLy8gRmlyc3QgY29udGFjdCEKICAgICAgICAgIC8vIFdlIHJldXNlIHRoZSBjb2xsaWRlRXZlbnQgb2JqZWN0LCBvdGhlcndpc2Ugd2Ugd2lsbCBlbmQgdXAgY3JlYXRpbmcgbmV3IG9iamVjdHMgZm9yIGVhY2ggbmV3IGNvbnRhY3QsIGV2ZW4gaWYgdGhlcmUncyBubyBldmVudCBsaXN0ZW5lciBhdHRhY2hlZC4KICAgICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmJvZHkgPSBiajsKICAgICAgICAgIFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50LmNvbnRhY3QgPSBjOwogICAgICAgICAgYmkuZGlzcGF0Y2hFdmVudChXb3JsZF9zdGVwX2NvbGxpZGVFdmVudCk7CiAgICAgICAgICBXb3JsZF9zdGVwX2NvbGxpZGVFdmVudC5ib2R5ID0gYmk7CiAgICAgICAgICBiai5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfY29sbGlkZUV2ZW50KTsKICAgICAgICB9CgogICAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIuc2V0KGJpLmlkLCBiai5pZCk7CiAgICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIuc2V0KHNpLmlkLCBzai5pZCk7CiAgICAgIH0KCiAgICAgIHRoaXMuZW1pdENvbnRhY3RFdmVudHMoKTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUubWFrZUNvbnRhY3RDb25zdHJhaW50cyA9IHBlcmZvcm1hbmNlLm5vdygpIC0gcHJvZmlsaW5nU3RhcnQ7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgfSAvLyBXYWtlIHVwIGJvZGllcwoKCiAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgIGNvbnN0IGJpID0gYm9kaWVzW2ldOwoKICAgICAgICBpZiAoYmkud2FrZVVwQWZ0ZXJOYXJyb3dwaGFzZSkgewogICAgICAgICAgYmkud2FrZVVwKCk7CiAgICAgICAgICBiaS53YWtlVXBBZnRlck5hcnJvd3BoYXNlID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9IC8vIEFkZCB1c2VyLWFkZGVkIGNvbnN0cmFpbnRzCgoKICAgICAgTmNvbnN0cmFpbnRzID0gY29uc3RyYWludHMubGVuZ3RoOwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTmNvbnN0cmFpbnRzOyBpKyspIHsKICAgICAgICBjb25zdCBjID0gY29uc3RyYWludHNbaV07CiAgICAgICAgYy51cGRhdGUoKTsKCiAgICAgICAgZm9yIChsZXQgaiA9IDAsIE5lcSA9IGMuZXF1YXRpb25zLmxlbmd0aDsgaiAhPT0gTmVxOyBqKyspIHsKICAgICAgICAgIGNvbnN0IGVxID0gYy5lcXVhdGlvbnNbal07CiAgICAgICAgICBzb2x2ZXIuYWRkRXF1YXRpb24oZXEpOwogICAgICAgIH0KICAgICAgfSAvLyBTb2x2ZSB0aGUgY29uc3RyYWluZWQgc3lzdGVtCgoKICAgICAgc29sdmVyLnNvbHZlKGR0LCB0aGlzKTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUuc29sdmUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHByb2ZpbGluZ1N0YXJ0OwogICAgICB9IC8vIFJlbW92ZSBhbGwgY29udGFjdHMgZnJvbSBzb2x2ZXIKCgogICAgICBzb2x2ZXIucmVtb3ZlQWxsRXF1YXRpb25zKCk7IC8vIEFwcGx5IGRhbXBpbmcsIHNlZSBodHRwOi8vY29kZS5nb29nbGUuY29tL3AvYnVsbGV0L2lzc3Vlcy9kZXRhaWw/aWQ9NzQgZm9yIGRldGFpbHMKCiAgICAgIGNvbnN0IHBvdyA9IE1hdGgucG93OwoKICAgICAgZm9yIChpID0gMDsgaSAhPT0gTjsgaSsrKSB7CiAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CgogICAgICAgIGlmIChiaS50eXBlICYgRFlOQU1JQykgewogICAgICAgICAgLy8gT25seSBmb3IgZHluYW1pYyBib2RpZXMKICAgICAgICAgIGNvbnN0IGxkID0gcG93KDEuMCAtIGJpLmxpbmVhckRhbXBpbmcsIGR0KTsKICAgICAgICAgIGNvbnN0IHYgPSBiaS52ZWxvY2l0eTsKICAgICAgICAgIHYuc2NhbGUobGQsIHYpOwogICAgICAgICAgY29uc3QgYXYgPSBiaS5hbmd1bGFyVmVsb2NpdHk7CgogICAgICAgICAgaWYgKGF2KSB7CiAgICAgICAgICAgIGNvbnN0IGFkID0gcG93KDEuMCAtIGJpLmFuZ3VsYXJEYW1waW5nLCBkdCk7CiAgICAgICAgICAgIGF2LnNjYWxlKGFkLCBhdik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoV29ybGRfc3RlcF9wcmVTdGVwRXZlbnQpOyAvLyBMZWFwIGZyb2cKICAgICAgLy8gdm5ldyA9IHYgKyBoKmYvbQogICAgICAvLyB4bmV3ID0geCArIGgqdm5ldwoKICAgICAgaWYgKGRvUHJvZmlsaW5nKSB7CiAgICAgICAgcHJvZmlsaW5nU3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgfQoKICAgICAgY29uc3Qgc3RlcG51bWJlciA9IHRoaXMuc3RlcG51bWJlcjsKICAgICAgY29uc3QgcXVhdE5vcm1hbGl6ZSA9IHN0ZXBudW1iZXIgJSAodGhpcy5xdWF0Tm9ybWFsaXplU2tpcCArIDEpID09PSAwOwogICAgICBjb25zdCBxdWF0Tm9ybWFsaXplRmFzdCA9IHRoaXMucXVhdE5vcm1hbGl6ZUZhc3Q7CgogICAgICBmb3IgKGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBib2RpZXNbaV0uaW50ZWdyYXRlKGR0LCBxdWF0Tm9ybWFsaXplLCBxdWF0Tm9ybWFsaXplRmFzdCk7CiAgICAgIH0KCiAgICAgIHRoaXMuY2xlYXJGb3JjZXMoKTsKICAgICAgdGhpcy5icm9hZHBoYXNlLmRpcnR5ID0gdHJ1ZTsKCiAgICAgIGlmIChkb1Byb2ZpbGluZykgewogICAgICAgIHByb2ZpbGUuaW50ZWdyYXRlID0gcGVyZm9ybWFuY2Uubm93KCkgLSBwcm9maWxpbmdTdGFydDsKICAgICAgfSAvLyBVcGRhdGUgc3RlcCBudW1iZXIKCgogICAgICB0aGlzLnN0ZXBudW1iZXIgKz0gMTsKICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KFdvcmxkX3N0ZXBfcG9zdFN0ZXBFdmVudCk7IC8vIFNsZWVwaW5nIHVwZGF0ZQoKICAgICAgbGV0IGhhc0FjdGl2ZUJvZGllcyA9IHRydWU7CgogICAgICBpZiAodGhpcy5hbGxvd1NsZWVwKSB7CiAgICAgICAgaGFzQWN0aXZlQm9kaWVzID0gZmFsc2U7CgogICAgICAgIGZvciAoaSA9IDA7IGkgIT09IE47IGkrKykgewogICAgICAgICAgY29uc3QgYmkgPSBib2RpZXNbaV07CiAgICAgICAgICBiaS5zbGVlcFRpY2sodGhpcy50aW1lKTsKCiAgICAgICAgICBpZiAoYmkuc2xlZXBTdGF0ZSAhPT0gQm9keS5TTEVFUElORykgewogICAgICAgICAgICBoYXNBY3RpdmVCb2RpZXMgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5oYXNBY3RpdmVCb2RpZXMgPSBoYXNBY3RpdmVCb2RpZXM7CiAgICB9CgogICAgZW1pdENvbnRhY3RFdmVudHMoKSB7CiAgICAgIGNvbnN0IGhhc0JlZ2luQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignYmVnaW5Db250YWN0Jyk7CiAgICAgIGNvbnN0IGhhc0VuZENvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2VuZENvbnRhY3QnKTsKCiAgICAgIGlmIChoYXNCZWdpbkNvbnRhY3QgfHwgaGFzRW5kQ29udGFjdCkgewogICAgICAgIHRoaXMuYm9keU92ZXJsYXBLZWVwZXIuZ2V0RGlmZihhZGRpdGlvbnMsIHJlbW92YWxzKTsKICAgICAgfQoKICAgICAgaWYgKGhhc0JlZ2luQ29udGFjdCkgewogICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gYWRkaXRpb25zLmxlbmd0aDsgaSA8IGw7IGkgKz0gMikgewogICAgICAgICAgYmVnaW5Db250YWN0RXZlbnQuYm9keUEgPSB0aGlzLmdldEJvZHlCeUlkKGFkZGl0aW9uc1tpXSk7CiAgICAgICAgICBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QiA9IHRoaXMuZ2V0Qm9keUJ5SWQoYWRkaXRpb25zW2kgKyAxXSk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoYmVnaW5Db250YWN0RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgYmVnaW5Db250YWN0RXZlbnQuYm9keUEgPSBiZWdpbkNvbnRhY3RFdmVudC5ib2R5QiA9IG51bGw7CiAgICAgIH0KCiAgICAgIGlmIChoYXNFbmRDb250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSByZW1vdmFscy5sZW5ndGg7IGkgPCBsOyBpICs9IDIpIHsKICAgICAgICAgIGVuZENvbnRhY3RFdmVudC5ib2R5QSA9IHRoaXMuZ2V0Qm9keUJ5SWQocmVtb3ZhbHNbaV0pOwogICAgICAgICAgZW5kQ29udGFjdEV2ZW50LmJvZHlCID0gdGhpcy5nZXRCb2R5QnlJZChyZW1vdmFsc1tpICsgMV0pOwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGVuZENvbnRhY3RFdmVudCk7CiAgICAgICAgfQoKICAgICAgICBlbmRDb250YWN0RXZlbnQuYm9keUEgPSBlbmRDb250YWN0RXZlbnQuYm9keUIgPSBudWxsOwogICAgICB9CgogICAgICBhZGRpdGlvbnMubGVuZ3RoID0gcmVtb3ZhbHMubGVuZ3RoID0gMDsKICAgICAgY29uc3QgaGFzQmVnaW5TaGFwZUNvbnRhY3QgPSB0aGlzLmhhc0FueUV2ZW50TGlzdGVuZXIoJ2JlZ2luU2hhcGVDb250YWN0Jyk7CiAgICAgIGNvbnN0IGhhc0VuZFNoYXBlQ29udGFjdCA9IHRoaXMuaGFzQW55RXZlbnRMaXN0ZW5lcignZW5kU2hhcGVDb250YWN0Jyk7CgogICAgICBpZiAoaGFzQmVnaW5TaGFwZUNvbnRhY3QgfHwgaGFzRW5kU2hhcGVDb250YWN0KSB7CiAgICAgICAgdGhpcy5zaGFwZU92ZXJsYXBLZWVwZXIuZ2V0RGlmZihhZGRpdGlvbnMsIHJlbW92YWxzKTsKICAgICAgfQoKICAgICAgaWYgKGhhc0JlZ2luU2hhcGVDb250YWN0KSB7CiAgICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSBhZGRpdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBjb25zdCBzaGFwZUEgPSB0aGlzLmdldFNoYXBlQnlJZChhZGRpdGlvbnNbaV0pOwogICAgICAgICAgY29uc3Qgc2hhcGVCID0gdGhpcy5nZXRTaGFwZUJ5SWQoYWRkaXRpb25zW2kgKyAxXSk7CiAgICAgICAgICBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IHNoYXBlQTsKICAgICAgICAgIGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gc2hhcGVCOwogICAgICAgICAgaWYgKHNoYXBlQSkgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IHNoYXBlQS5ib2R5OwogICAgICAgICAgaWYgKHNoYXBlQikgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IHNoYXBlQi5ib2R5OwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KGJlZ2luU2hhcGVDb250YWN0RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgYmVnaW5TaGFwZUNvbnRhY3RFdmVudC5ib2R5QSA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuYm9keUIgPSBiZWdpblNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IGJlZ2luU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gbnVsbDsKICAgICAgfQoKICAgICAgaWYgKGhhc0VuZFNoYXBlQ29udGFjdCkgewogICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gcmVtb3ZhbHMubGVuZ3RoOyBpIDwgbDsgaSArPSAyKSB7CiAgICAgICAgICBjb25zdCBzaGFwZUEgPSB0aGlzLmdldFNoYXBlQnlJZChyZW1vdmFsc1tpXSk7CiAgICAgICAgICBjb25zdCBzaGFwZUIgPSB0aGlzLmdldFNoYXBlQnlJZChyZW1vdmFsc1tpICsgMV0pOwogICAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVBID0gc2hhcGVBOwogICAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuc2hhcGVCID0gc2hhcGVCOwogICAgICAgICAgaWYgKHNoYXBlQSkgZW5kU2hhcGVDb250YWN0RXZlbnQuYm9keUEgPSBzaGFwZUEuYm9keTsKICAgICAgICAgIGlmIChzaGFwZUIpIGVuZFNoYXBlQ29udGFjdEV2ZW50LmJvZHlCID0gc2hhcGVCLmJvZHk7CiAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoZW5kU2hhcGVDb250YWN0RXZlbnQpOwogICAgICAgIH0KCiAgICAgICAgZW5kU2hhcGVDb250YWN0RXZlbnQuYm9keUEgPSBlbmRTaGFwZUNvbnRhY3RFdmVudC5ib2R5QiA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQSA9IGVuZFNoYXBlQ29udGFjdEV2ZW50LnNoYXBlQiA9IG51bGw7CiAgICAgIH0KICAgIH0KICAgIC8qKgogICAgICogU2V0cyBhbGwgYm9keSBmb3JjZXMgaW4gdGhlIHdvcmxkIHRvIHplcm8uCiAgICAgKi8KCgogICAgY2xlYXJGb3JjZXMoKSB7CiAgICAgIGNvbnN0IGJvZGllcyA9IHRoaXMuYm9kaWVzOwogICAgICBjb25zdCBOID0gYm9kaWVzLmxlbmd0aDsKCiAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBOOyBpKyspIHsKICAgICAgICBjb25zdCBiID0gYm9kaWVzW2ldOwogICAgICAgIGIuZm9yY2U7CiAgICAgICAgYi50b3JxdWU7CiAgICAgICAgYi5mb3JjZS5zZXQoMCwgMCwgMCk7CiAgICAgICAgYi50b3JxdWUuc2V0KDAsIDAsIDApOwogICAgICB9CiAgICB9CgogIH0gLy8gVGVtcCBzdHVmZgoKICBuZXcgQUFCQigpOwogIGNvbnN0IHRtcFJheSA9IG5ldyBSYXkoKTsgLy8gcGVyZm9ybWFuY2Uubm93KCkgZmFsbGJhY2sgb24gRGF0ZS5ub3coKQoKICBjb25zdCBwZXJmb3JtYW5jZSA9IGdsb2JhbFRoaXMucGVyZm9ybWFuY2UgfHwge307CgogIGlmICghcGVyZm9ybWFuY2Uubm93KSB7CiAgICBsZXQgbm93T2Zmc2V0ID0gRGF0ZS5ub3coKTsKCiAgICBpZiAocGVyZm9ybWFuY2UudGltaW5nICYmIHBlcmZvcm1hbmNlLnRpbWluZy5uYXZpZ2F0aW9uU3RhcnQpIHsKICAgICAgbm93T2Zmc2V0ID0gcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydDsKICAgIH0KCiAgICBwZXJmb3JtYW5jZS5ub3cgPSAoKSA9PiBEYXRlLm5vdygpIC0gbm93T2Zmc2V0OwogIH0KCiAgbmV3IFZlYzMoKTsgLy8gRGlzcGF0Y2hlZCBhZnRlciB0aGUgd29ybGQgaGFzIHN0ZXBwZWQgZm9yd2FyZCBpbiB0aW1lLgogIC8vIFJldXNhYmxlIGV2ZW50IG9iamVjdHMgdG8gc2F2ZSBtZW1vcnkuCgogIGNvbnN0IFdvcmxkX3N0ZXBfcG9zdFN0ZXBFdmVudCA9IHsKICAgIHR5cGU6ICdwb3N0U3RlcCcKICB9OyAvLyBEaXNwYXRjaGVkIGJlZm9yZSB0aGUgd29ybGQgc3RlcHMgZm9yd2FyZCBpbiB0aW1lLgoKICBjb25zdCBXb3JsZF9zdGVwX3ByZVN0ZXBFdmVudCA9IHsKICAgIHR5cGU6ICdwcmVTdGVwJwogIH07CiAgY29uc3QgV29ybGRfc3RlcF9jb2xsaWRlRXZlbnQgPSB7CiAgICB0eXBlOiBCb2R5LkNPTExJREVfRVZFTlRfTkFNRSwKICAgIGJvZHk6IG51bGwsCiAgICBjb250YWN0OiBudWxsCiAgfTsgLy8gUG9vbHMgZm9yIHVudXNlZCBvYmplY3RzCgogIGNvbnN0IFdvcmxkX3N0ZXBfb2xkQ29udGFjdHMgPSBbXTsKICBjb25zdCBXb3JsZF9zdGVwX2ZyaWN0aW9uRXF1YXRpb25Qb29sID0gW107IC8vIFJldXNhYmxlIGFycmF5cyBmb3IgY29sbGlzaW9uIHBhaXJzCgogIGNvbnN0IFdvcmxkX3N0ZXBfcDEgPSBbXTsKICBjb25zdCBXb3JsZF9zdGVwX3AyID0gW107IC8vIFN0dWZmIGZvciBlbWl0Q29udGFjdEV2ZW50cwoKICBjb25zdCBhZGRpdGlvbnMgPSBbXTsKICBjb25zdCByZW1vdmFscyA9IFtdOwogIGNvbnN0IGJlZ2luQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2JlZ2luQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsCiAgfTsKICBjb25zdCBlbmRDb250YWN0RXZlbnQgPSB7CiAgICB0eXBlOiAnZW5kQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsCiAgfTsKICBjb25zdCBiZWdpblNoYXBlQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2JlZ2luU2hhcGVDb250YWN0JywKICAgIGJvZHlBOiBudWxsLAogICAgYm9keUI6IG51bGwsCiAgICBzaGFwZUE6IG51bGwsCiAgICBzaGFwZUI6IG51bGwKICB9OwogIGNvbnN0IGVuZFNoYXBlQ29udGFjdEV2ZW50ID0gewogICAgdHlwZTogJ2VuZFNoYXBlQ29udGFjdCcsCiAgICBib2R5QTogbnVsbCwKICAgIGJvZHlCOiBudWxsLAogICAgc2hhcGVBOiBudWxsLAogICAgc2hhcGVCOiBudWxsCiAgfTsKCiAgY29uc3QgYWRkQ29udGFjdE1hdGVyaWFsID0gKHdvcmxkLCBjcmVhdGVNYXRlcmlhbCwgX3JlZiwgdXVpZCkgPT4gewogICAgbGV0IFttYXRlcmlhbEEsIG1hdGVyaWFsQiwgb3B0aW9uc10gPSBfcmVmOwogICAgY29uc3QgbWF0QSA9IGNyZWF0ZU1hdGVyaWFsKG1hdGVyaWFsQSk7CiAgICBjb25zdCBtYXRCID0gY3JlYXRlTWF0ZXJpYWwobWF0ZXJpYWxCKTsKICAgIGNvbnN0IGNvbnRhY3RNYXRlcmlhbCA9IG5ldyBDb250YWN0TWF0ZXJpYWwobWF0QSwgbWF0Qiwgb3B0aW9ucyk7CiAgICBjb250YWN0TWF0ZXJpYWwudXVpZCA9IHV1aWQ7CiAgICB3b3JsZC5hZGRDb250YWN0TWF0ZXJpYWwoY29udGFjdE1hdGVyaWFsKTsKICB9OwogIGNvbnN0IHJlbW92ZUNvbnRhY3RNYXRlcmlhbCA9ICh3b3JsZCwgY21VVUlEKSA9PiB7CiAgICBjb25zdCBpbmRleCA9IHdvcmxkLmNvbnRhY3RtYXRlcmlhbHMuZmluZEluZGV4KF9yZWYyID0+IHsKICAgICAgbGV0IHsKICAgICAgICB1dWlkCiAgICAgIH0gPSBfcmVmMjsKICAgICAgcmV0dXJuIHV1aWQgPT09IGNtVVVJRDsKICAgIH0pOwogICAgY29uc3QgW3sKICAgICAgaWQ6IGkKICAgIH0sIHsKICAgICAgaWQ6IGoKICAgIH1dID0gd29ybGQuY29udGFjdG1hdGVyaWFsc1tpbmRleF0ubWF0ZXJpYWxzOwogICAgd29ybGQuY29udGFjdG1hdGVyaWFscy5zcGxpY2UoaW5kZXgsIDEpOwogICAgZGVsZXRlIHdvcmxkLmNvbnRhY3RNYXRlcmlhbFRhYmxlLmRhdGFbaSA8IGogPyBgJHtpfS0ke2p9YCA6IGAke2p9LSR7aX1gXTsKICB9OwoKICBsZXQgbWF0ZXJpYWxJZCA9IDA7CiAgY29uc3QgY3JlYXRlTWF0ZXJpYWxGYWN0b3J5ID0gbWF0ZXJpYWxzID0+IGZ1bmN0aW9uIChuYW1lT3JPcHRpb25zKSB7CiAgICBpZiAobmFtZU9yT3B0aW9ucyA9PT0gdm9pZCAwKSB7CiAgICAgIG5hbWVPck9wdGlvbnMgPSB7fTsKICAgIH0KCiAgICBjb25zdCBtYXRlcmlhbE9wdGlvbnMgPSB0eXBlb2YgbmFtZU9yT3B0aW9ucyA9PT0gJ3N0cmluZycgPyB7CiAgICAgIG5hbWU6IG5hbWVPck9wdGlvbnMKICAgIH0gOiB7CiAgICAgIG5hbWU6IFN5bWJvbC5mb3IoYE1hdGVyaWFsJHttYXRlcmlhbElkKyt9YCksCiAgICAgIC4uLm5hbWVPck9wdGlvbnMKICAgIH07CiAgICBjb25zdCB7CiAgICAgIG5hbWUKICAgIH0gPSBtYXRlcmlhbE9wdGlvbnM7CiAgICBtYXRlcmlhbHNbbmFtZV0gPSBtYXRlcmlhbHNbbmFtZV0gfHwgbmV3IE1hdGVyaWFsKG1hdGVyaWFsT3B0aW9ucyk7CiAgICByZXR1cm4gbWF0ZXJpYWxzW25hbWVdOwogIH07CgogIC8qKgogICAqIEB0eXBlZGVmIHsgaW1wb3J0KCdjYW5ub24tZXMnKS5NYXRlcmlhbE9wdGlvbnMgfSBNYXRlcmlhbE9wdGlvbnMKICAgKi8KCiAgY29uc3QgbWFrZVZlYzMgPSBfcmVmID0+IHsKICAgIGxldCBbeCwgeSwgel0gPSBfcmVmOwogICAgcmV0dXJuIG5ldyBWZWMzKHgsIHksIHopOwogIH07CgogIGNvbnN0IHByZXBhcmVTcGhlcmUgPSBhcmdzID0+IEFycmF5LmlzQXJyYXkoYXJncykgPyBhcmdzIDogW2FyZ3NdOwoKICBjb25zdCBwcmVwYXJlQ29udmV4UG9seWhlZHJvbiA9IF9yZWYyID0+IHsKICAgIGxldCBbdiwgZmFjZXMsIG4sIGEsIGJvdW5kaW5nU3BoZXJlUmFkaXVzXSA9IF9yZWYyOwogICAgcmV0dXJuIFt7CiAgICAgIGF4ZXM6IGEgPyBhLm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQsCiAgICAgIGJvdW5kaW5nU3BoZXJlUmFkaXVzLAogICAgICBmYWNlcywKICAgICAgbm9ybWFsczogbiA/IG4ubWFwKG1ha2VWZWMzKSA6IHVuZGVmaW5lZCwKICAgICAgdmVydGljZXM6IHYgPyB2Lm1hcChtYWtlVmVjMykgOiB1bmRlZmluZWQKICAgIH1dOwogIH07CgogIGZ1bmN0aW9uIGNyZWF0ZVNoYXBlKHR5cGUsIGFyZ3MpIHsKICAgIHN3aXRjaCAodHlwZSkgewogICAgICBjYXNlICdCb3gnOgogICAgICAgIHJldHVybiBuZXcgQm94KG5ldyBWZWMzKC4uLmFyZ3MubWFwKHYgPT4gdiAvIDIpKSk7CiAgICAgIC8vIGV4dGVudHMgPT4gaGFsZkV4dGVudHMKCiAgICAgIGNhc2UgJ0NvbnZleFBvbHloZWRyb24nOgogICAgICAgIHJldHVybiBuZXcgQ29udmV4UG9seWhlZHJvbiguLi5wcmVwYXJlQ29udmV4UG9seWhlZHJvbihhcmdzKSk7CgogICAgICBjYXNlICdDeWxpbmRlcic6CiAgICAgICAgcmV0dXJuIG5ldyBDeWxpbmRlciguLi5hcmdzKTsKICAgICAgLy8gWyByYWRpdXNUb3AsIHJhZGl1c0JvdHRvbSwgaGVpZ2h0LCBudW1TZWdtZW50cyBdID0gYXJncwoKICAgICAgY2FzZSAnSGVpZ2h0ZmllbGQnOgogICAgICAgIHJldHVybiBuZXcgSGVpZ2h0ZmllbGQoLi4uYXJncyk7CiAgICAgIC8vIFsgQXJyYXkgZGF0YSwgb3B0aW9uczoge21pblZhbHVlLCBtYXhWYWx1ZSwgZWxlbWVudFNpemV9ICBdID0gYXJncwoKICAgICAgY2FzZSAnUGFydGljbGUnOgogICAgICAgIHJldHVybiBuZXcgUGFydGljbGUoKTsKICAgICAgLy8gbm8gYXJncwoKICAgICAgY2FzZSAnUGxhbmUnOgogICAgICAgIHJldHVybiBuZXcgUGxhbmUoKTsKICAgICAgLy8gbm8gYXJncywgaW5maW5pdGUgeCBhbmQgeQoKICAgICAgY2FzZSAnU3BoZXJlJzoKICAgICAgICByZXR1cm4gbmV3IFNwaGVyZSguLi5wcmVwYXJlU3BoZXJlKGFyZ3MpKTsKICAgICAgLy8gcmFkaXVzID0gYXJncwoKICAgICAgY2FzZSAnVHJpbWVzaCc6CiAgICAgICAgcmV0dXJuIG5ldyBUcmltZXNoKC4uLmFyZ3MpOwogICAgICAvLyBbdmVydGljZXMsIGluZGljZXNdID0gYXJncwogICAgfQogIH0KICAvKioKICAgKiBAZnVuY3Rpb24KICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucwogICAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnV1aWQKICAgKiBAcGFyYW0ge0JvZHlQcm9wc30gb3B0aW9ucy5wcm9wcwogICAqIEBwYXJhbSB7Qm9keVNoYXBlVHlwZX0gb3B0aW9ucy50eXBlCiAgICogQHBhcmFtIHsobWF0ZXJpYWxPcHRpb25zOiBNYXRlcmlhbE9wdGlvbnMpID0+IE1hdGVyaWFsID19IG9wdGlvbnMuY3JlYXRlTWF0ZXJpYWwKICAgKiBAcmV0dXJucyB7Qm9keX0KICAgKi8KCgogIGNvbnN0IHByb3BzVG9Cb2R5ID0gb3B0aW9ucyA9PiB7CiAgICBjb25zdCB7CiAgICAgIHV1aWQsCiAgICAgIHByb3BzLAogICAgICB0eXBlLAogICAgICBjcmVhdGVNYXRlcmlhbCA9IG1hdGVyaWFsT3B0aW9ucyA9PiBuZXcgTWF0ZXJpYWwobWF0ZXJpYWxPcHRpb25zKQogICAgfSA9IG9wdGlvbnM7CiAgICBjb25zdCB7CiAgICAgIGFuZ3VsYXJGYWN0b3IgPSBbMSwgMSwgMV0sCiAgICAgIGFuZ3VsYXJWZWxvY2l0eSA9IFswLCAwLCAwXSwKICAgICAgYXJncyA9IFtdLAogICAgICBjb2xsaXNpb25SZXNwb25zZSwKICAgICAgbGluZWFyRmFjdG9yID0gWzEsIDEsIDFdLAogICAgICBtYXNzLAogICAgICBtYXRlcmlhbCwKICAgICAgb25Db2xsaWRlLAogICAgICBwb3NpdGlvbiA9IFswLCAwLCAwXSwKICAgICAgcm90YXRpb24gPSBbMCwgMCwgMF0sCiAgICAgIHNoYXBlcywKICAgICAgdHlwZTogYm9keVR5cGUsCiAgICAgIHZlbG9jaXR5ID0gWzAsIDAsIDBdLAogICAgICAuLi5leHRyYQogICAgfSA9IHByb3BzOwogICAgY29uc3QgYm9keSA9IG5ldyBCb2R5KHsgLi4uZXh0cmEsCiAgICAgIG1hc3M6IGJvZHlUeXBlID09PSAnU3RhdGljJyA/IDAgOiBtYXNzLAogICAgICBtYXRlcmlhbDogbWF0ZXJpYWwgPyBjcmVhdGVNYXRlcmlhbChtYXRlcmlhbCkgOiB1bmRlZmluZWQsCiAgICAgIHR5cGU6IGJvZHlUeXBlID8gQm9keVtib2R5VHlwZS50b1VwcGVyQ2FzZSgpXSA6IHVuZGVmaW5lZAogICAgfSk7CiAgICBib2R5LnV1aWQgPSB1dWlkOwoKICAgIGlmIChjb2xsaXNpb25SZXNwb25zZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGJvZHkuY29sbGlzaW9uUmVzcG9uc2UgPSBjb2xsaXNpb25SZXNwb25zZTsKICAgIH0KCiAgICBpZiAodHlwZSA9PT0gJ0NvbXBvdW5kJykgewogICAgICBzaGFwZXMuZm9yRWFjaChfcmVmMyA9PiB7CiAgICAgICAgbGV0IHsKICAgICAgICAgIHR5cGUsCiAgICAgICAgICBhcmdzLAogICAgICAgICAgcG9zaXRpb24sCiAgICAgICAgICByb3RhdGlvbiwKICAgICAgICAgIG1hdGVyaWFsLAogICAgICAgICAgLi4uZXh0cmEKICAgICAgICB9ID0gX3JlZjM7CiAgICAgICAgY29uc3Qgc2hhcGVCb2R5ID0gYm9keS5hZGRTaGFwZShjcmVhdGVTaGFwZSh0eXBlLCBhcmdzKSwgcG9zaXRpb24gPyBuZXcgVmVjMyguLi5wb3NpdGlvbikgOiB1bmRlZmluZWQsIHJvdGF0aW9uID8gbmV3IFF1YXRlcm5pb24oKS5zZXRGcm9tRXVsZXIoLi4ucm90YXRpb24pIDogdW5kZWZpbmVkKTsKICAgICAgICBpZiAobWF0ZXJpYWwpIHNoYXBlQm9keS5tYXRlcmlhbCA9IGNyZWF0ZU1hdGVyaWFsKG1hdGVyaWFsKTsKICAgICAgICBPYmplY3QuYXNzaWduKHNoYXBlQm9keSwgZXh0cmEpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIGJvZHkuYWRkU2hhcGUoY3JlYXRlU2hhcGUodHlwZSwgYXJncykpOwogICAgfQoKICAgIGJvZHkucG9zaXRpb24uc2V0KHBvc2l0aW9uWzBdLCBwb3NpdGlvblsxXSwgcG9zaXRpb25bMl0pOwogICAgYm9keS5xdWF0ZXJuaW9uLnNldEZyb21FdWxlcihyb3RhdGlvblswXSwgcm90YXRpb25bMV0sIHJvdGF0aW9uWzJdKTsKICAgIGJvZHkudmVsb2NpdHkuc2V0KHZlbG9jaXR5WzBdLCB2ZWxvY2l0eVsxXSwgdmVsb2NpdHlbMl0pOwogICAgYm9keS5hbmd1bGFyVmVsb2NpdHkuc2V0KGFuZ3VsYXJWZWxvY2l0eVswXSwgYW5ndWxhclZlbG9jaXR5WzFdLCBhbmd1bGFyVmVsb2NpdHlbMl0pOwogICAgYm9keS5saW5lYXJGYWN0b3Iuc2V0KGxpbmVhckZhY3RvclswXSwgbGluZWFyRmFjdG9yWzFdLCBsaW5lYXJGYWN0b3JbMl0pOwogICAgYm9keS5hbmd1bGFyRmFjdG9yLnNldChhbmd1bGFyRmFjdG9yWzBdLCBhbmd1bGFyRmFjdG9yWzFdLCBhbmd1bGFyRmFjdG9yWzJdKTsKICAgIHJldHVybiBib2R5OwogIH07CgogIGNvbnN0IGFkZEJvZGllcyA9IChzdGF0ZSwgY3JlYXRlTWF0ZXJpYWwsIF9yZWYpID0+IHsKICAgIGxldCB7CiAgICAgIHByb3BzLAogICAgICB0eXBlLAogICAgICB1dWlkCiAgICB9ID0gX3JlZjsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHV1aWQubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgYm9keSA9IHByb3BzVG9Cb2R5KHsKICAgICAgICBjcmVhdGVNYXRlcmlhbCwKICAgICAgICBwcm9wczogcHJvcHNbaV0sCiAgICAgICAgdHlwZSwKICAgICAgICB1dWlkOiB1dWlkW2ldCiAgICAgIH0pOwogICAgICBzdGF0ZS53b3JsZC5hZGRCb2R5KGJvZHkpOwogICAgICBpZiAocHJvcHNbaV0ub25Db2xsaWRlKSBib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbGxpZGUnLCBfcmVmMiA9PiB7CiAgICAgICAgbGV0IHsKICAgICAgICAgIHR5cGUsCiAgICAgICAgICBib2R5LAogICAgICAgICAgdGFyZ2V0LAogICAgICAgICAgY29udGFjdAogICAgICAgIH0gPSBfcmVmMjsKICAgICAgICBpZiAoIWJvZHkudXVpZCB8fCAhdGFyZ2V0LnV1aWQpIHJldHVybjsKICAgICAgICBjb25zdCB7CiAgICAgICAgICBuaSwKICAgICAgICAgIHJpLAogICAgICAgICAgcmosCiAgICAgICAgICBiaSwKICAgICAgICAgIGJqLAogICAgICAgICAgaWQKICAgICAgICB9ID0gY29udGFjdDsKICAgICAgICBjb25zdCBjb250YWN0UG9pbnQgPSBiaS5wb3NpdGlvbi52YWRkKHJpKTsKICAgICAgICBjb25zdCBjb250YWN0Tm9ybWFsID0gYmkgPT09IGJvZHkgPyBuaSA6IG5pLnNjYWxlKC0xKTsKICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICAgIGJvZHk6IGJvZHkudXVpZCwKICAgICAgICAgIGNvbGxpc2lvbkZpbHRlcnM6IHsKICAgICAgICAgICAgYm9keUZpbHRlckdyb3VwOiBib2R5LmNvbGxpc2lvbkZpbHRlckdyb3VwLAogICAgICAgICAgICBib2R5RmlsdGVyTWFzazogYm9keS5jb2xsaXNpb25GaWx0ZXJNYXNrLAogICAgICAgICAgICB0YXJnZXRGaWx0ZXJHcm91cDogdGFyZ2V0LmNvbGxpc2lvbkZpbHRlckdyb3VwLAogICAgICAgICAgICB0YXJnZXRGaWx0ZXJNYXNrOiB0YXJnZXQuY29sbGlzaW9uRmlsdGVyTWFzawogICAgICAgICAgfSwKICAgICAgICAgIGNvbnRhY3Q6IHsKICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPOiB1c2UgaWQgaW5zdGVhZCBvZiB1dWlkCiAgICAgICAgICAgIGJpOiBiaS51dWlkLAogICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE86IHVzZSBpZCBpbnN0ZWFkIG9mIHV1aWQKICAgICAgICAgICAgYmo6IGJqLnV1aWQsCiAgICAgICAgICAgIC8vIE5vcm1hbCBvZiB0aGUgY29udGFjdCwgcmVsYXRpdmUgdG8gdGhlIGNvbGxpZGluZyBib2R5CiAgICAgICAgICAgIGNvbnRhY3ROb3JtYWw6IGNvbnRhY3ROb3JtYWwudG9BcnJheSgpLAogICAgICAgICAgICAvLyBXb3JsZCBwb3NpdGlvbiBvZiB0aGUgY29udGFjdAogICAgICAgICAgICBjb250YWN0UG9pbnQ6IGNvbnRhY3RQb2ludC50b0FycmF5KCksCiAgICAgICAgICAgIGlkLAogICAgICAgICAgICBpbXBhY3RWZWxvY2l0eTogY29udGFjdC5nZXRJbXBhY3RWZWxvY2l0eUFsb25nTm9ybWFsKCksCiAgICAgICAgICAgIG5pOiBuaS50b0FycmF5KCksCiAgICAgICAgICAgIHJpOiByaS50b0FycmF5KCksCiAgICAgICAgICAgIHJqOiByai50b0FycmF5KCkKICAgICAgICAgIH0sCiAgICAgICAgICBvcDogJ2V2ZW50JywKICAgICAgICAgIHRhcmdldDogdGFyZ2V0LnV1aWQsCiAgICAgICAgICB0eXBlCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH07CgogIGNvbnN0IHRyaXBsZXRUb1ZlYzMgPSB0ID0+IHQgPyBuZXcgVmVjMyguLi50KSA6IHVuZGVmaW5lZDsKCiAgY29uc3QgYWRkQ29uc3RyYWludCA9IChzdGF0ZSwgX3JlZikgPT4gewogICAgbGV0IHsKICAgICAgcHJvcHM6IFtib2R5QSwgYm9keUIsIHsKICAgICAgICBhbmdsZSwKICAgICAgICBheGlzQSwKICAgICAgICBheGlzQiwKICAgICAgICBjb2xsaWRlQ29ubmVjdGVkLAogICAgICAgIGRpc3RhbmNlLAogICAgICAgIG1heEZvcmNlLAogICAgICAgIG1heE11bHRpcGxpZXIsCiAgICAgICAgcGl2b3RBLAogICAgICAgIHBpdm90QiwKICAgICAgICB0d2lzdEFuZ2xlLAogICAgICAgIHdha2VVcEJvZGllcwogICAgICB9XSwKICAgICAgdHlwZSwKICAgICAgdXVpZAogICAgfSA9IF9yZWY7CiAgICBsZXQgY29uc3RyYWludDsKCiAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgY2FzZSAnUG9pbnRUb1BvaW50JzoKICAgICAgICBjb25zdHJhaW50ID0gbmV3IFBvaW50VG9Qb2ludENvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgdHJpcGxldFRvVmVjMyhwaXZvdEEpLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB0cmlwbGV0VG9WZWMzKHBpdm90QiksIG1heEZvcmNlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ0NvbmVUd2lzdCc6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBDb25lVHdpc3RDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgICAgIGFuZ2xlLAogICAgICAgICAgYXhpc0E6IHRyaXBsZXRUb1ZlYzMoYXhpc0EpLAogICAgICAgICAgYXhpc0I6IHRyaXBsZXRUb1ZlYzMoYXhpc0IpLAogICAgICAgICAgY29sbGlkZUNvbm5lY3RlZCwKICAgICAgICAgIG1heEZvcmNlLAogICAgICAgICAgcGl2b3RBOiB0cmlwbGV0VG9WZWMzKHBpdm90QSksCiAgICAgICAgICBwaXZvdEI6IHRyaXBsZXRUb1ZlYzMocGl2b3RCKSwKICAgICAgICAgIHR3aXN0QW5nbGUKICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ0hpbmdlJzoKICAgICAgICBjb25zdHJhaW50ID0gbmV3IEhpbmdlQ29uc3RyYWludChzdGF0ZS5ib2RpZXNbYm9keUFdLCBzdGF0ZS5ib2RpZXNbYm9keUJdLCB7CiAgICAgICAgICBheGlzQTogdHJpcGxldFRvVmVjMyhheGlzQSksCiAgICAgICAgICBheGlzQjogdHJpcGxldFRvVmVjMyhheGlzQiksCiAgICAgICAgICBjb2xsaWRlQ29ubmVjdGVkLAogICAgICAgICAgbWF4Rm9yY2UsCiAgICAgICAgICBwaXZvdEE6IHRyaXBsZXRUb1ZlYzMocGl2b3RBKSwKICAgICAgICAgIHBpdm90QjogdHJpcGxldFRvVmVjMyhwaXZvdEIpCiAgICAgICAgfSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdEaXN0YW5jZSc6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBEaXN0YW5jZUNvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgZGlzdGFuY2UsIG1heEZvcmNlKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ0xvY2snOgogICAgICAgIGNvbnN0cmFpbnQgPSBuZXcgTG9ja0NvbnN0cmFpbnQoc3RhdGUuYm9kaWVzW2JvZHlBXSwgc3RhdGUuYm9kaWVzW2JvZHlCXSwgewogICAgICAgICAgbWF4Rm9yY2UKICAgICAgICB9KTsKICAgICAgICBicmVhazsKCiAgICAgIGRlZmF1bHQ6CiAgICAgICAgY29uc3RyYWludCA9IG5ldyBDb25zdHJhaW50KHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgICAgIGNvbGxpZGVDb25uZWN0ZWQsCiAgICAgICAgICB3YWtlVXBCb2RpZXMKICAgICAgICB9KTsKICAgICAgICBicmVhazsKICAgIH0KCiAgICBjb25zdHJhaW50LnV1aWQgPSB1dWlkOwogICAgc3RhdGUud29ybGQuYWRkQ29uc3RyYWludChjb25zdHJhaW50KTsKCiAgICBpZiAobWF4TXVsdGlwbGllciAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIGNvbnN0IHBvc3RTdGVwQ29uc3RyYWludCA9ICgpID0+IHsKICAgICAgICAvLyBUaGUgbXVsdGlwbGllciBpcyBwcm9wb3J0aW9uYWwgdG8gaG93IG11Y2ggZm9yY2UgaXMgYWRkZWQgdG8gdGhlIGJvZGllcyBieSB0aGUgY29uc3RyYWludC4KICAgICAgICAvLyBJZiB0aGlzIGV4Y2VlZHMgYSBsaW1pdCB0aGUgY29uc3RyYWludCBpcyBkaXNhYmxlZC4KICAgICAgICBjb25zdCBtdWx0aXBsaWVyID0gTWF0aC5hYnMoY29uc3RyYWludC5lcXVhdGlvbnNbMF0ubXVsdGlwbGllcik7CgogICAgICAgIGlmIChtdWx0aXBsaWVyID4gbWF4TXVsdGlwbGllcikgewogICAgICAgICAgY29uc3RyYWludC5kaXNhYmxlKCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgc3RhdGUuY29uc3RyYWludHNbdXVpZF0gPSBwb3N0U3RlcENvbnN0cmFpbnQ7CiAgICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgc3RhdGUuY29uc3RyYWludHNbdXVpZF0pOwogICAgfQogIH07CgogIGZ1bmN0aW9uIHRvVXBwZXJjYXNlKHN0cikgewogICAgcmV0dXJuIHN0ci50b1VwcGVyQ2FzZSgpOwogIH0KCiAgY29uc3QgYWRkUmF5ID0gKHN0YXRlLCBfcmVmKSA9PiB7CiAgICBsZXQgewogICAgICBwcm9wczogewogICAgICAgIGZyb20sCiAgICAgICAgbW9kZSwKICAgICAgICB0bywKICAgICAgICAuLi5yYXlPcHRpb25zCiAgICAgIH0sCiAgICAgIHV1aWQKICAgIH0gPSBfcmVmOwogICAgY29uc3QgcmF5ID0gbmV3IFJheSh0cmlwbGV0VG9WZWMzKGZyb20pLCB0cmlwbGV0VG9WZWMzKHRvKSk7CiAgICBjb25zdCBvcHRpb25zID0gewogICAgICBtb2RlOiBSQVlfTU9ERVNbdG9VcHBlcmNhc2UobW9kZSldLAogICAgICByZXN1bHQ6IG5ldyBSYXljYXN0UmVzdWx0KCksCiAgICAgIC4uLnJheU9wdGlvbnMKICAgIH07CgogICAgc3RhdGUucmF5c1t1dWlkXSA9ICgpID0+IHsKICAgICAgcmF5LmludGVyc2VjdFdvcmxkKHN0YXRlLndvcmxkLCBvcHRpb25zKTsKICAgICAgaWYgKCFvcHRpb25zLnJlc3VsdCB8fCAhb3B0aW9ucy5yZXN1bHQuYm9keSkgcmV0dXJuOwogICAgICBjb25zdCB7CiAgICAgICAgYm9keSwKICAgICAgICBzaGFwZSwKICAgICAgICByYXlGcm9tV29ybGQsCiAgICAgICAgcmF5VG9Xb3JsZCwKICAgICAgICBoaXROb3JtYWxXb3JsZCwKICAgICAgICBoaXRQb2ludFdvcmxkLAogICAgICAgIC4uLnJlc3QKICAgICAgfSA9IG9wdGlvbnMucmVzdWx0OwogICAgICBjb25zdCBib2R5VVVJRCA9IGJvZHkudXVpZDsKICAgICAgaWYgKCFib2R5VVVJRCkgcmV0dXJuOwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICBib2R5OiBib2R5VVVJRCwKICAgICAgICBoaXROb3JtYWxXb3JsZDogaGl0Tm9ybWFsV29ybGQudG9BcnJheSgpLAogICAgICAgIGhpdFBvaW50V29ybGQ6IGhpdFBvaW50V29ybGQudG9BcnJheSgpLAogICAgICAgIG9wOiAnZXZlbnQnLAogICAgICAgIHJheTogewogICAgICAgICAgY29sbGlzaW9uRmlsdGVyR3JvdXA6IHJheS5jb2xsaXNpb25GaWx0ZXJHcm91cCwKICAgICAgICAgIGNvbGxpc2lvbkZpbHRlck1hc2s6IHJheS5jb2xsaXNpb25GaWx0ZXJNYXNrLAogICAgICAgICAgZGlyZWN0aW9uOiByYXkuZGlyZWN0aW9uLnRvQXJyYXkoKSwKICAgICAgICAgIGZyb20sCiAgICAgICAgICB0bywKICAgICAgICAgIHV1aWQKICAgICAgICB9LAogICAgICAgIHJheUZyb21Xb3JsZDogcmF5RnJvbVdvcmxkLnRvQXJyYXkoKSwKICAgICAgICByYXlUb1dvcmxkOiByYXlUb1dvcmxkLnRvQXJyYXkoKSwKICAgICAgICBzaGFwZTogc2hhcGUgPyB7IC4uLnNoYXBlLAogICAgICAgICAgYm9keTogYm9keVVVSUQKICAgICAgICB9IDogbnVsbCwKICAgICAgICB0eXBlOiAncmF5aGl0JywKICAgICAgICAuLi5yZXN0CiAgICAgIH0pOwogICAgfTsKCiAgICBzdGF0ZS53b3JsZC5hZGRFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgc3RhdGUucmF5c1t1dWlkXSk7CiAgfTsKCiAgY29uc3QgYWRkUmF5Y2FzdFZlaGljbGUgPSAoc3RhdGUsIGRhdGEpID0+IHsKICAgIGNvbnN0IFtjaGFzc2lzQm9keSwgd2hlZWxzLCB3aGVlbEluZm9zLCBpbmRleEZvcndhcmRBeGlzLCBpbmRleFJpZ2h0QXhpcywgaW5kZXhVcEF4aXNdID0gZGF0YS5wcm9wczsKICAgIGNvbnN0IHZlaGljbGUgPSBuZXcgUmF5Y2FzdFZlaGljbGUoewogICAgICBjaGFzc2lzQm9keTogc3RhdGUuYm9kaWVzW2NoYXNzaXNCb2R5XSwKICAgICAgaW5kZXhGb3J3YXJkQXhpcywKICAgICAgaW5kZXhSaWdodEF4aXMsCiAgICAgIGluZGV4VXBBeGlzCiAgICB9KTsKICAgIHZlaGljbGUud29ybGQgPSBzdGF0ZS53b3JsZDsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHdoZWVsSW5mb3MubGVuZ3RoOyBpKyspIHsKICAgICAgY29uc3QgewogICAgICAgIGF4bGVMb2NhbCwKICAgICAgICBjaGFzc2lzQ29ubmVjdGlvblBvaW50TG9jYWwsCiAgICAgICAgZGlyZWN0aW9uTG9jYWwsCiAgICAgICAgLi4ucmVzdAogICAgICB9ID0gd2hlZWxJbmZvc1tpXTsKICAgICAgdmVoaWNsZS5hZGRXaGVlbCh7CiAgICAgICAgYXhsZUxvY2FsOiB0cmlwbGV0VG9WZWMzKGF4bGVMb2NhbCksCiAgICAgICAgY2hhc3Npc0Nvbm5lY3Rpb25Qb2ludExvY2FsOiB0cmlwbGV0VG9WZWMzKGNoYXNzaXNDb25uZWN0aW9uUG9pbnRMb2NhbCksCiAgICAgICAgZGlyZWN0aW9uTG9jYWw6IHRyaXBsZXRUb1ZlYzMoZGlyZWN0aW9uTG9jYWwpLAogICAgICAgIC4uLnJlc3QKICAgICAgfSk7CiAgICB9CgogICAgY29uc3QgcHJlU3RlcCA9ICgpID0+IHsKICAgICAgdmVoaWNsZS51cGRhdGVWZWhpY2xlKHN0YXRlLndvcmxkLmR0KTsKICAgIH07CgogICAgY29uc3QgcG9zdFN0ZXAgPSAoKSA9PiB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdmVoaWNsZS53aGVlbEluZm9zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmVoaWNsZS51cGRhdGVXaGVlbFRyYW5zZm9ybShpKTsKICAgICAgICBjb25zdCB0ID0gdmVoaWNsZS53aGVlbEluZm9zW2ldLndvcmxkVHJhbnNmb3JtOwogICAgICAgIGNvbnN0IHdoZWVsQm9keSA9IHN0YXRlLmJvZGllc1t3aGVlbHNbaV1dOwogICAgICAgIHdoZWVsQm9keS5wb3NpdGlvbi5jb3B5KHQucG9zaXRpb24pOwogICAgICAgIHdoZWVsQm9keS5xdWF0ZXJuaW9uLmNvcHkodC5xdWF0ZXJuaW9uKTsKICAgICAgfQogICAgfTsKCiAgICBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdID0gewogICAgICBwb3N0U3RlcCwKICAgICAgcHJlU3RlcCwKICAgICAgdmVoaWNsZQogICAgfTsKICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBwcmVTdGVwKTsKICAgIHN0YXRlLndvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ3Bvc3RTdGVwJywgcG9zdFN0ZXApOwogIH07CgogIGNvbnN0IGFkZFNwcmluZyA9IChzdGF0ZSwgX3JlZikgPT4gewogICAgbGV0IHsKICAgICAgcHJvcHM6IFtib2R5QSwgYm9keUIsIHsKICAgICAgICBkYW1waW5nLAogICAgICAgIGxvY2FsQW5jaG9yQSwKICAgICAgICBsb2NhbEFuY2hvckIsCiAgICAgICAgcmVzdExlbmd0aCwKICAgICAgICBzdGlmZm5lc3MsCiAgICAgICAgd29ybGRBbmNob3JBLAogICAgICAgIHdvcmxkQW5jaG9yQgogICAgICB9XSwKICAgICAgdXVpZAogICAgfSA9IF9yZWY7CiAgICBjb25zdCBzcHJpbmcgPSBuZXcgU3ByaW5nKHN0YXRlLmJvZGllc1tib2R5QV0sIHN0YXRlLmJvZGllc1tib2R5Ql0sIHsKICAgICAgZGFtcGluZywKICAgICAgbG9jYWxBbmNob3JBOiB0cmlwbGV0VG9WZWMzKGxvY2FsQW5jaG9yQSksCiAgICAgIGxvY2FsQW5jaG9yQjogdHJpcGxldFRvVmVjMyhsb2NhbEFuY2hvckIpLAogICAgICByZXN0TGVuZ3RoLAogICAgICBzdGlmZm5lc3MsCiAgICAgIHdvcmxkQW5jaG9yQTogdHJpcGxldFRvVmVjMyh3b3JsZEFuY2hvckEpLAogICAgICB3b3JsZEFuY2hvckI6IHRyaXBsZXRUb1ZlYzMod29ybGRBbmNob3JCKQogICAgfSk7CiAgICBzcHJpbmcudXVpZCA9IHV1aWQ7CgogICAgY29uc3QgcG9zdFN0ZXBTcHJpbmcgPSAoKSA9PiBzcHJpbmcuYXBwbHlGb3JjZSgpOwoKICAgIHN0YXRlLnNwcmluZ3NbdXVpZF0gPSBwb3N0U3RlcFNwcmluZzsKICAgIHN0YXRlLnNwcmluZ0luc3RhbmNlc1t1dWlkXSA9IHNwcmluZzsgLy8gQ29tcHV0ZSB0aGUgZm9yY2UgYWZ0ZXIgZWFjaCBzdGVwCgogICAgc3RhdGUud29ybGQuYWRkRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS5zcHJpbmdzW3V1aWRdKTsKICB9OwoKICBmdW5jdGlvbiBlbWl0QmVnaW5Db250YWN0KF9yZWYpIHsKICAgIGxldCB7CiAgICAgIGJvZHlBLAogICAgICBib2R5QgogICAgfSA9IF9yZWY7CiAgICBpZiAoIShib2R5QSAhPSBudWxsICYmIGJvZHlBLnV1aWQpIHx8ICEoYm9keUIgIT0gbnVsbCAmJiBib2R5Qi51dWlkKSkgcmV0dXJuOwogICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgIGJvZHlBOiBib2R5QS51dWlkLAogICAgICBib2R5QjogYm9keUIudXVpZCwKICAgICAgb3A6ICdldmVudCcsCiAgICAgIHR5cGU6ICdjb2xsaWRlQmVnaW4nCiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIGVtaXRFbmRDb250YWN0KF9yZWYyKSB7CiAgICBsZXQgewogICAgICBib2R5QSwKICAgICAgYm9keUIKICAgIH0gPSBfcmVmMjsKICAgIGlmICghKGJvZHlBICE9IG51bGwgJiYgYm9keUEudXVpZCkgfHwgIShib2R5QiAhPSBudWxsICYmIGJvZHlCLnV1aWQpKSByZXR1cm47CiAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgYm9keUE6IGJvZHlBLnV1aWQsCiAgICAgIGJvZHlCOiBib2R5Qi51dWlkLAogICAgICBvcDogJ2V2ZW50JywKICAgICAgdHlwZTogJ2NvbGxpZGVFbmQnCiAgICB9KTsKICB9CgogIGNvbnN0IGluaXQgPSAod29ybGQsIF9yZWYzKSA9PiB7CiAgICBsZXQgewogICAgICBhbGxvd1NsZWVwLAogICAgICBheGlzSW5kZXggPSAwLAogICAgICBicm9hZHBoYXNlLAogICAgICBkZWZhdWx0Q29udGFjdE1hdGVyaWFsLAogICAgICBmcmljdGlvbkdyYXZpdHksCiAgICAgIGdyYXZpdHksCiAgICAgIGl0ZXJhdGlvbnMsCiAgICAgIHF1YXROb3JtYWxpemVGYXN0LAogICAgICBxdWF0Tm9ybWFsaXplU2tpcCwKICAgICAgc29sdmVyLAogICAgICB0b2xlcmFuY2UKICAgIH0gPSBfcmVmMzsKICAgIHdvcmxkLmFsbG93U2xlZXAgPSBhbGxvd1NsZWVwOwogICAgd29ybGQuZ3Jhdml0eS5zZXQoLi4uZ3Jhdml0eSk7CiAgICB3b3JsZC5mcmljdGlvbkdyYXZpdHkgPSBmcmljdGlvbkdyYXZpdHkgPyBuZXcgVmVjMyguLi5mcmljdGlvbkdyYXZpdHkpIDogdW5kZWZpbmVkOwogICAgd29ybGQucXVhdE5vcm1hbGl6ZUZhc3QgPSBxdWF0Tm9ybWFsaXplRmFzdDsKICAgIHdvcmxkLnF1YXROb3JtYWxpemVTa2lwID0gcXVhdE5vcm1hbGl6ZVNraXA7CgogICAgaWYgKHNvbHZlciA9PT0gJ1NwbGl0JykgewogICAgICB3b3JsZC5zb2x2ZXIgPSBuZXcgU3BsaXRTb2x2ZXIobmV3IEdTU29sdmVyKCkpOwogICAgfQoKICAgIGlmICh3b3JsZC5zb2x2ZXIgaW5zdGFuY2VvZiBHU1NvbHZlcikgewogICAgICB3b3JsZC5zb2x2ZXIudG9sZXJhbmNlID0gdG9sZXJhbmNlOwogICAgICB3b3JsZC5zb2x2ZXIuaXRlcmF0aW9ucyA9IGl0ZXJhdGlvbnM7CiAgICB9CgogICAgd29ybGQuYnJvYWRwaGFzZSA9IGJyb2FkcGhhc2UgPT09ICdTQVAnID8gbmV3IFNBUEJyb2FkcGhhc2Uod29ybGQpIDogbmV3IE5haXZlQnJvYWRwaGFzZSgpOwoKICAgIGlmICh3b3JsZC5icm9hZHBoYXNlIGluc3RhbmNlb2YgU0FQQnJvYWRwaGFzZSkgewogICAgICB3b3JsZC5icm9hZHBoYXNlLmF4aXNJbmRleCA9IGF4aXNJbmRleDsKICAgIH0KCiAgICB3b3JsZC5hZGRFdmVudExpc3RlbmVyKCdiZWdpbkNvbnRhY3QnLCBlbWl0QmVnaW5Db250YWN0KTsKICAgIHdvcmxkLmFkZEV2ZW50TGlzdGVuZXIoJ2VuZENvbnRhY3QnLCBlbWl0RW5kQ29udGFjdCk7CiAgICBPYmplY3QuYXNzaWduKHdvcmxkLmRlZmF1bHRDb250YWN0TWF0ZXJpYWwsIGRlZmF1bHRDb250YWN0TWF0ZXJpYWwpOwogIH07CgogIGNvbnN0IGlzUW9yViA9IHYgPT4gdiBpbnN0YW5jZW9mIFF1YXRlcm5pb24gfHwgdiBpbnN0YW5jZW9mIFZlYzM7CgogIGNvbnN0IHN0ZXAgPSAoc3RhdGUsIF9yZWYpID0+IHsKICAgIGxldCB7CiAgICAgIHBvc2l0aW9ucywKICAgICAgcHJvcHM6IHsKICAgICAgICBtYXhTdWJTdGVwcywKICAgICAgICBzdGVwU2l6ZSwKICAgICAgICB0aW1lU2luY2VMYXN0Q2FsbGVkCiAgICAgIH0sCiAgICAgIHF1YXRlcm5pb25zCiAgICB9ID0gX3JlZjsKICAgIHN0YXRlLndvcmxkLnN0ZXAoc3RlcFNpemUsIHRpbWVTaW5jZUxhc3RDYWxsZWQsIG1heFN1YlN0ZXBzKTsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXRlLndvcmxkLmJvZGllcy5sZW5ndGg7IGkgKz0gMSkgewogICAgICBjb25zdCBwID0gc3RhdGUud29ybGQuYm9kaWVzW2ldLnBvc2l0aW9uOwogICAgICBjb25zdCBxID0gc3RhdGUud29ybGQuYm9kaWVzW2ldLnF1YXRlcm5pb247CiAgICAgIHBvc2l0aW9uc1szICogaSArIDBdID0gcC54OwogICAgICBwb3NpdGlvbnNbMyAqIGkgKyAxXSA9IHAueTsKICAgICAgcG9zaXRpb25zWzMgKiBpICsgMl0gPSBwLno7CiAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgMF0gPSBxLng7CiAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgMV0gPSBxLnk7CiAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgMl0gPSBxLno7CiAgICAgIHF1YXRlcm5pb25zWzQgKiBpICsgM10gPSBxLnc7CiAgICB9CgogICAgY29uc3Qgb2JzZXJ2YXRpb25zID0gW107CgogICAgZm9yIChjb25zdCBpZCBvZiBPYmplY3Qua2V5cyhzdGF0ZS5zdWJzY3JpcHRpb25zKSkgewogICAgICBjb25zdCBbdXVpZCwgdHlwZSwgdGFyZ2V0ID0gJ2JvZGllcyddID0gc3RhdGUuc3Vic2NyaXB0aW9uc1tpZF07CiAgICAgIGNvbnN0IHsKICAgICAgICBib2RpZXMsCiAgICAgICAgdmVoaWNsZXMKICAgICAgfSA9IHN0YXRlOwogICAgICBjb25zdCB2YWx1ZSA9IHRhcmdldCA9PT0gJ3ZlaGljbGVzJyA/IC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogRGlmZmVyZW50aWF0ZSB0aGVzZSAidHlwZXMiCiAgICAgIHZlaGljbGVzW3V1aWRdLnZlaGljbGVbdHlwZV0gOiAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE86IERpZmZlcmVudGlhdGUgdGhlc2UgInR5cGVzIgogICAgICBib2RpZXNbdXVpZF1bdHlwZV07CiAgICAgIGNvbnN0IHNlcmlhbGl6YWJsZVZhbHVlID0gaXNRb3JWKHZhbHVlKSA/IHZhbHVlLnRvQXJyYXkoKSA6IHZhbHVlOwogICAgICBvYnNlcnZhdGlvbnMucHVzaChbTnVtYmVyKGlkKSwgc2VyaWFsaXphYmxlVmFsdWUsIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogRGlmZmVyZW50aWF0ZSB0aGVzZSAidHlwZXMiCiAgICAgIHR5cGVdKTsKICAgIH0KCiAgICBjb25zdCBtZXNzYWdlID0gewogICAgICBhY3RpdmU6IHN0YXRlLndvcmxkLmhhc0FjdGl2ZUJvZGllcywKICAgICAgb2JzZXJ2YXRpb25zLAogICAgICBvcDogJ2ZyYW1lJywKICAgICAgcG9zaXRpb25zLAogICAgICBxdWF0ZXJuaW9ucwogICAgfTsKCiAgICBpZiAoc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcpIHsKICAgICAgbWVzc2FnZS5ib2RpZXMgPSBzdGF0ZS53b3JsZC5ib2RpZXMucmVkdWNlKChib2RpZXMsIGJvZHkpID0+IHsKICAgICAgICBpZiAoYm9keS51dWlkKSBib2RpZXMucHVzaChib2R5LnV1aWQpOwogICAgICAgIHJldHVybiBib2RpZXM7CiAgICAgIH0sIFtdKTsKICAgICAgc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcgPSBmYWxzZTsKICAgIH0KCiAgICBzZWxmLnBvc3RNZXNzYWdlKG1lc3NhZ2UsIFtwb3NpdGlvbnMuYnVmZmVyLCBxdWF0ZXJuaW9ucy5idWZmZXJdKTsKICB9OwoKICBjb25zdCBzdGF0ZSA9IHsKICAgIGJvZGllczoge30sCiAgICBib2RpZXNOZWVkU3luY2luZzogZmFsc2UsCiAgICBjb25zdHJhaW50czoge30sCiAgICBtYXRlcmlhbHM6IHt9LAogICAgcmF5czoge30sCiAgICBzcHJpbmdJbnN0YW5jZXM6IHt9LAogICAgc3ByaW5nczoge30sCiAgICBzdWJzY3JpcHRpb25zOiB7fSwKICAgIHZlaGljbGVzOiB7fSwKICAgIHdvcmxkOiBuZXcgV29ybGQoKQogIH07CgogIC8vLyA8cmVmZXJlbmNlIG5vLWRlZmF1bHQtbGliPSJ0cnVlIi8+CgogIGNvbnN0IGlzSGluZ2VDb25zdHJhaW50ID0gYyA9PiBjIGluc3RhbmNlb2YgSGluZ2VDb25zdHJhaW50OwoKICBmdW5jdGlvbiBzeW5jQm9kaWVzKCkgewogICAgc3RhdGUuYm9kaWVzTmVlZFN5bmNpbmcgPSB0cnVlOwogICAgc3RhdGUuYm9kaWVzID0gc3RhdGUud29ybGQuYm9kaWVzLnJlZHVjZSgoYm9kaWVzLCBib2R5KSA9PiBib2R5LnV1aWQgPyB7IC4uLmJvZGllcywKICAgICAgW2JvZHkudXVpZF06IGJvZHkKICAgIH0gOiBib2RpZXMsIHt9KTsKICB9CgogIGNvbnN0IGJyb2FkcGhhc2VzID0gewogICAgTmFpdmVCcm9hZHBoYXNlLAogICAgU0FQQnJvYWRwaGFzZQogIH07CiAgY29uc3QgY3JlYXRlTWF0ZXJpYWwgPSBjcmVhdGVNYXRlcmlhbEZhY3Rvcnkoc3RhdGUubWF0ZXJpYWxzKTsKCiAgc2VsZi5vbm1lc3NhZ2UgPSBfcmVmID0+IHsKICAgIGxldCB7CiAgICAgIGRhdGEKICAgIH0gPSBfcmVmOwoKICAgIHN3aXRjaCAoZGF0YS5vcCkgewogICAgICBjYXNlICdpbml0JzoKICAgICAgICB7CiAgICAgICAgICBpbml0KHN0YXRlLndvcmxkLCBkYXRhLnByb3BzKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3N0ZXAnOgogICAgICAgIHsKICAgICAgICAgIHN0ZXAoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnYWRkQm9kaWVzJzoKICAgICAgICB7CiAgICAgICAgICBhZGRCb2RpZXMoc3RhdGUsIGNyZWF0ZU1hdGVyaWFsLCBkYXRhKTsKICAgICAgICAgIHN5bmNCb2RpZXMoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3JlbW92ZUJvZGllcyc6CiAgICAgICAgewogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLnV1aWQubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlQm9keShzdGF0ZS5ib2RpZXNbZGF0YS51dWlkW2ldXSk7CiAgICAgICAgICB9CgogICAgICAgICAgc3luY0JvZGllcygpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc3Vic2NyaWJlJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgIGlkLAogICAgICAgICAgICB0YXJnZXQsCiAgICAgICAgICAgIHR5cGUKICAgICAgICAgIH0gPSBkYXRhLnByb3BzOwogICAgICAgICAgc3RhdGUuc3Vic2NyaXB0aW9uc1tpZF0gPSBbZGF0YS51dWlkLCB0eXBlLCB0YXJnZXRdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAndW5zdWJzY3JpYmUnOgogICAgICAgIHsKICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5zdWJzY3JpcHRpb25zW2RhdGEucHJvcHNdOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0UG9zaXRpb24nOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnBvc2l0aW9uLnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFF1YXRlcm5pb24nOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnF1YXRlcm5pb24uc2V0KGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0sIGRhdGEucHJvcHNbM10pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Um90YXRpb24nOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnF1YXRlcm5pb24uc2V0RnJvbUV1bGVyKGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0VmVsb2NpdHknOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnZlbG9jaXR5LnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJWZWxvY2l0eSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uYW5ndWxhclZlbG9jaXR5LnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldExpbmVhckZhY3Rvcic6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ubGluZWFyRmFjdG9yLnNldChkYXRhLnByb3BzWzBdLCBkYXRhLnByb3BzWzFdLCBkYXRhLnByb3BzWzJdKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJGYWN0b3InOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFuZ3VsYXJGYWN0b3Iuc2V0KGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0TWFzcyc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0ubWFzcyA9IGRhdGEucHJvcHM7CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0udXBkYXRlTWFzc1Byb3BlcnRpZXMoKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldE1hdGVyaWFsJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5tYXRlcmlhbCA9IGRhdGEucHJvcHMgPyBjcmVhdGVNYXRlcmlhbChkYXRhLnByb3BzKSA6IG51bGw7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRMaW5lYXJEYW1waW5nJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5saW5lYXJEYW1waW5nID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEFuZ3VsYXJEYW1waW5nJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hbmd1bGFyRGFtcGluZyA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRBbGxvd1NsZWVwJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hbGxvd1NsZWVwID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFNsZWVwU3BlZWRMaW1pdCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uc2xlZXBTcGVlZExpbWl0ID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldFNsZWVwVGltZUxpbWl0JzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5zbGVlcFRpbWVMaW1pdCA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRDb2xsaXNpb25GaWx0ZXJHcm91cCc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uY29sbGlzaW9uRmlsdGVyR3JvdXAgPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Q29sbGlzaW9uRmlsdGVyTWFzayc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uY29sbGlzaW9uRmlsdGVyTWFzayA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRDb2xsaXNpb25SZXNwb25zZSc6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uY29sbGlzaW9uUmVzcG9uc2UgPSBkYXRhLnByb3BzOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0Rml4ZWRSb3RhdGlvbic6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uZml4ZWRSb3RhdGlvbiA9IGRhdGEucHJvcHM7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRGcmljdGlvbkdyYXZpdHknOgogICAgICAgIHN0YXRlLndvcmxkLmZyaWN0aW9uR3Jhdml0eSA9IGRhdGEucHJvcHMgPyBuZXcgVmVjMyguLi5kYXRhLnByb3BzKSA6IHVuZGVmaW5lZDsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldElzVHJpZ2dlcic6CiAgICAgICAgc3RhdGUuYm9kaWVzW2RhdGEudXVpZF0uaXNUcmlnZ2VyID0gZGF0YS5wcm9wczsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldEdyYXZpdHknOgogICAgICAgIHN0YXRlLndvcmxkLmdyYXZpdHkuc2V0KGRhdGEucHJvcHNbMF0sIGRhdGEucHJvcHNbMV0sIGRhdGEucHJvcHNbMl0pOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0VG9sZXJhbmNlJzoKICAgICAgICBpZiAoc3RhdGUud29ybGQuc29sdmVyIGluc3RhbmNlb2YgR1NTb2x2ZXIpIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnNvbHZlci50b2xlcmFuY2UgPSBkYXRhLnByb3BzOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRJdGVyYXRpb25zJzoKICAgICAgICBpZiAoc3RhdGUud29ybGQuc29sdmVyIGluc3RhbmNlb2YgR1NTb2x2ZXIpIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnNvbHZlci5pdGVyYXRpb25zID0gZGF0YS5wcm9wczsKICAgICAgICB9CgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnc2V0QnJvYWRwaGFzZSc6CiAgICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZSA9IG5ldyAoYnJvYWRwaGFzZXNbYCR7ZGF0YS5wcm9wc31Ccm9hZHBoYXNlYF0gfHwgTmFpdmVCcm9hZHBoYXNlKShzdGF0ZS53b3JsZCk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRBeGlzSW5kZXgnOgogICAgICAgIGlmIChzdGF0ZS53b3JsZC5icm9hZHBoYXNlIGluc3RhbmNlb2YgU0FQQnJvYWRwaGFzZSkgewogICAgICAgICAgc3RhdGUud29ybGQuYnJvYWRwaGFzZS5heGlzSW5kZXggPSBkYXRhLnByb3BzID09PSB1bmRlZmluZWQgfHwgZGF0YS5wcm9wcyA9PT0gbnVsbCA/IDAgOiBkYXRhLnByb3BzOwogICAgICAgIH0KCiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdhcHBseUZvcmNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hcHBseUZvcmNlKG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMF0pLCBuZXcgVmVjMyguLi5kYXRhLnByb3BzWzFdKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdhcHBseUltcHVsc2UnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFwcGx5SW1wdWxzZShuZXcgVmVjMyguLi5kYXRhLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4uZGF0YS5wcm9wc1sxXSkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYXBwbHlMb2NhbEZvcmNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hcHBseUxvY2FsRm9yY2UobmV3IFZlYzMoLi4uZGF0YS5wcm9wc1swXSksIG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMV0pKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FwcGx5TG9jYWxJbXB1bHNlJzoKICAgICAgICBzdGF0ZS5ib2RpZXNbZGF0YS51dWlkXS5hcHBseUxvY2FsSW1wdWxzZShuZXcgVmVjMyguLi5kYXRhLnByb3BzWzBdKSwgbmV3IFZlYzMoLi4uZGF0YS5wcm9wc1sxXSkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYXBwbHlUb3JxdWUnOgogICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLmFwcGx5VG9ycXVlKG5ldyBWZWMzKC4uLmRhdGEucHJvcHNbMF0pKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2FkZENvbnN0cmFpbnQnOgogICAgICAgIHsKICAgICAgICAgIGFkZENvbnN0cmFpbnQoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlQ29uc3RyYWludCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKF9yZWYyID0+IHsKICAgICAgICAgIGxldCB7CiAgICAgICAgICAgIHV1aWQKICAgICAgICAgIH0gPSBfcmVmMjsKICAgICAgICAgIHJldHVybiB1dWlkID09PSBkYXRhLnV1aWQ7CiAgICAgICAgfSkubWFwKGMgPT4gc3RhdGUud29ybGQucmVtb3ZlQ29uc3RyYWludChjKSk7CgogICAgICAgIGlmIChzdGF0ZS5jb25zdHJhaW50c1tkYXRhLnV1aWRdKSB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3N0U3RlcCcsIHN0YXRlLmNvbnN0cmFpbnRzW2RhdGEudXVpZF0pOwogICAgICAgICAgZGVsZXRlIHN0YXRlLmNvbnN0cmFpbnRzW2RhdGEudXVpZF07CiAgICAgICAgfQoKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2VuYWJsZUNvbnN0cmFpbnQnOgogICAgICAgIHN0YXRlLndvcmxkLmNvbnN0cmFpbnRzLmZpbHRlcihjID0+IGMudXVpZCA9PT0gZGF0YS51dWlkKS5tYXAoYyA9PiBjLmVuYWJsZSgpKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ2Rpc2FibGVDb25zdHJhaW50JzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoYyA9PiBjLnV1aWQgPT09IGRhdGEudXVpZCkubWFwKGMgPT4gYy5kaXNhYmxlKCkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnZW5hYmxlQ29uc3RyYWludE1vdG9yJzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoYyA9PiBjLnV1aWQgPT09IGRhdGEudXVpZCkuZmlsdGVyKGlzSGluZ2VDb25zdHJhaW50KS5tYXAoYyA9PiBjLmVuYWJsZU1vdG9yKCkpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnZGlzYWJsZUNvbnN0cmFpbnRNb3Rvcic6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKGMgPT4gYy51dWlkID09PSBkYXRhLnV1aWQpLmZpbHRlcihpc0hpbmdlQ29uc3RyYWludCkubWFwKGMgPT4gYy5kaXNhYmxlTW90b3IoKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlICdzZXRDb25zdHJhaW50TW90b3JTcGVlZCc6CiAgICAgICAgc3RhdGUud29ybGQuY29uc3RyYWludHMuZmlsdGVyKGMgPT4gYy51dWlkID09PSBkYXRhLnV1aWQpLmZpbHRlcihpc0hpbmdlQ29uc3RyYWludCkubWFwKGMgPT4gYy5zZXRNb3RvclNwZWVkKGRhdGEucHJvcHMpKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgJ3NldENvbnN0cmFpbnRNb3Rvck1heEZvcmNlJzoKICAgICAgICBzdGF0ZS53b3JsZC5jb25zdHJhaW50cy5maWx0ZXIoYyA9PiBjLnV1aWQgPT09IGRhdGEudXVpZCkuZmlsdGVyKGlzSGluZ2VDb25zdHJhaW50KS5tYXAoYyA9PiBjLnNldE1vdG9yTWF4Rm9yY2UoZGF0YS5wcm9wcykpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAnYWRkU3ByaW5nJzoKICAgICAgICB7CiAgICAgICAgICBhZGRTcHJpbmcoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0U3ByaW5nU3RpZmZuZXNzJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbZGF0YS51dWlkXS5zdGlmZm5lc3MgPSBkYXRhLnByb3BzOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0U3ByaW5nUmVzdExlbmd0aCc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUuc3ByaW5nSW5zdGFuY2VzW2RhdGEudXVpZF0ucmVzdExlbmd0aCA9IGRhdGEucHJvcHM7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdzZXRTcHJpbmdEYW1waW5nJzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS5zcHJpbmdJbnN0YW5jZXNbZGF0YS51dWlkXS5kYW1waW5nID0gZGF0YS5wcm9wczsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3JlbW92ZVNwcmluZyc6CiAgICAgICAgewogICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS5zcHJpbmdzW2RhdGEudXVpZF0pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnYWRkUmF5JzoKICAgICAgICB7CiAgICAgICAgICBhZGRSYXkoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlUmF5JzoKICAgICAgICB7CiAgICAgICAgICBzdGF0ZS53b3JsZC5yZW1vdmVFdmVudExpc3RlbmVyKCdwcmVTdGVwJywgc3RhdGUucmF5c1tkYXRhLnV1aWRdKTsKICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5yYXlzW2RhdGEudXVpZF07CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdhZGRSYXljYXN0VmVoaWNsZSc6CiAgICAgICAgewogICAgICAgICAgYWRkUmF5Y2FzdFZlaGljbGUoc3RhdGUsIGRhdGEpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlUmF5Y2FzdFZlaGljbGUnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLndvcmxkLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3ByZVN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnByZVN0ZXApOwogICAgICAgICAgc3RhdGUud29ybGQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9zdFN0ZXAnLCBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnBvc3RTdGVwKTsKICAgICAgICAgIHN0YXRlLnZlaGljbGVzW2RhdGEudXVpZF0udmVoaWNsZS53b3JsZCA9IG51bGw7CiAgICAgICAgICBkZWxldGUgc3RhdGUudmVoaWNsZXNbZGF0YS51dWlkXTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgIGNhc2UgJ3NldFJheWNhc3RWZWhpY2xlU3RlZXJpbmdWYWx1ZSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgW3ZhbHVlLCB3aGVlbEluZGV4XSA9IGRhdGEucHJvcHM7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnZlaGljbGUuc2V0U3RlZXJpbmdWYWx1ZSh2YWx1ZSwgd2hlZWxJbmRleCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICdhcHBseVJheWNhc3RWZWhpY2xlRW5naW5lRm9yY2UnOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IFt2YWx1ZSwgd2hlZWxJbmRleF0gPSBkYXRhLnByb3BzOwogICAgICAgICAgc3RhdGUudmVoaWNsZXNbZGF0YS51dWlkXS52ZWhpY2xlLmFwcGx5RW5naW5lRm9yY2UodmFsdWUsIHdoZWVsSW5kZXgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2V0UmF5Y2FzdFZlaGljbGVCcmFrZSc6CiAgICAgICAgewogICAgICAgICAgY29uc3QgW2JyYWtlLCB3aGVlbEluZGV4XSA9IGRhdGEucHJvcHM7CiAgICAgICAgICBzdGF0ZS52ZWhpY2xlc1tkYXRhLnV1aWRdLnZlaGljbGUuc2V0QnJha2UoYnJha2UsIHdoZWVsSW5kZXgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnYWRkQ29udGFjdE1hdGVyaWFsJzoKICAgICAgICB7CiAgICAgICAgICBhZGRDb250YWN0TWF0ZXJpYWwoc3RhdGUud29ybGQsIGNyZWF0ZU1hdGVyaWFsLCBkYXRhLnByb3BzLCBkYXRhLnV1aWQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAncmVtb3ZlQ29udGFjdE1hdGVyaWFsJzoKICAgICAgICB7CiAgICAgICAgICByZW1vdmVDb250YWN0TWF0ZXJpYWwoc3RhdGUud29ybGQsIGRhdGEudXVpZCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICBjYXNlICd3YWtlVXAnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLndha2VVcCgpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQoKICAgICAgY2FzZSAnc2xlZXAnOgogICAgICAgIHsKICAgICAgICAgIHN0YXRlLmJvZGllc1tkYXRhLnV1aWRdLnNsZWVwKCk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9CiAgfTsKCn0pKCk7Cgo=",null,!1),fp=function(e){ne(n,e);var t=le(n);function n(e){var i;$(this,n);var r=e.allowSleep,a=void 0!==r&&r,o=e.axisIndex,l=void 0===o?0:o,g=e.broadphase,s=void 0===g?"Naive":g,c=e.defaultContactMaterial,u=void 0===c?{contactEquationStiffness:1e6}:c,I=e.frictionGravity,d=void 0===I?null:I,C=e.gravity,h=void 0===C?[0,-9.81,0]:C,A=e.iterations,p=void 0===A?5:A,m=e.quatNormalizeFast,f=void 0!==m&&m,v=e.quatNormalizeSkip,b=void 0===v?0:v,y=e.size,G=void 0===y?1e3:y,B=e.solver,Z=void 0===B?"GS":B,w=e.tolerance,x=void 0===w?.001:w;return(i=t.call(this)).messageQueue=[],i.worker=null,i.config={allowSleep:a,axisIndex:l,broadphase:s,defaultContactMaterial:u,frictionGravity:d,gravity:h,iterations:p,quatNormalizeFast:f,quatNormalizeSkip:b,size:G,solver:Z,tolerance:x},i.buffers={positions:new Float32Array(3*G),quaternions:new Float32Array(4*G)},i}return te(n,[{key:"axisIndex",get:function(){return this.config.axisIndex},set:function(e){this.config.axisIndex=e,this.postMessage({op:"setAxisIndex",props:e})}},{key:"broadphase",get:function(){return this.config.broadphase},set:function(e){this.config.broadphase=e,this.postMessage({op:"setBroadphase",props:e})}},{key:"frictionGravity",get:function(){return this.config.frictionGravity},set:function(e){this.config.frictionGravity=e,this.postMessage({op:"setFrictionGravity",props:e})}},{key:"gravity",get:function(){return this.config.gravity},set:function(e){this.config.gravity=e,this.postMessage({op:"setGravity",props:e})}},{key:"iterations",get:function(){return this.config.iterations},set:function(e){this.config.iterations=e,this.postMessage({op:"setIterations",props:e})}},{key:"tolerance",get:function(){return this.config.tolerance},set:function(e){this.config.tolerance=e,this.postMessage({op:"setTolerance",props:e})}},{key:"addBodies",value:function(e){var t=e.props,n=e.type,i=e.uuid;this.postMessage({op:"addBodies",props:t,type:n,uuid:i})}},{key:"addConstraint",value:function(e){var t=c(e.props,3),n=t[0],i=t[1],r=t[2],a=e.type,o=e.uuid;this.postMessage({op:"addConstraint",props:[n,i,r],type:a,uuid:o})}},{key:"addContactMaterial",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"addContactMaterial",props:t,uuid:n})}},{key:"addRay",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"addRay",props:t,uuid:n})}},{key:"addRaycastVehicle",value:function(e){var t=c(e.props,6),n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],l=t[5],g=e.uuid;this.postMessage({op:"addRaycastVehicle",props:[n,i,r,a,o,l],uuid:g})}},{key:"addSpring",value:function(e){var t=c(e.props,3),n=t[0],i=t[1],r=t[2],a=e.uuid;this.postMessage({op:"addSpring",props:[n,i,r],uuid:a})}},{key:"applyForce",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyForce",props:t,uuid:n})}},{key:"applyImpulse",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyImpulse",props:t,uuid:n})}},{key:"applyLocalForce",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyLocalForce",props:t,uuid:n})}},{key:"applyLocalImpulse",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyLocalImpulse",props:t,uuid:n})}},{key:"applyRaycastVehicleEngineForce",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyRaycastVehicleEngineForce",props:t,uuid:n})}},{key:"applyTorque",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"applyTorque",props:t,uuid:n})}},{key:"connect",value:function(){var e=this;this.worker=new mp,this.worker.onmessage=function(t){if("frame"===t.data.op)return e.buffers.positions=t.data.positions,e.buffers.quaternions=t.data.quaternions,void e.emit(t.data.op,t.data);e.emit(t.data.type,t.data)};var t,n=E(this.messageQueue);try{for(n.s();!(t=n.n()).done;){var i=t.value;this.worker.postMessage(i)}}catch(r){n.e(r)}finally{n.f()}this.messageQueue.length=0}},{key:"disableConstraint",value:function(e){var t=e.uuid;this.postMessage({op:"disableConstraint",uuid:t})}},{key:"disableConstraintMotor",value:function(e){var t=e.uuid;this.postMessage({op:"disableConstraintMotor",uuid:t})}},{key:"disconnect",value:function(){this.worker&&(this.worker.onmessage=null)}},{key:"enableConstraint",value:function(e){var t=e.uuid;this.postMessage({op:"enableConstraint",uuid:t})}},{key:"enableConstraintMotor",value:function(e){var t=e.uuid;this.postMessage({op:"enableConstraintMotor",uuid:t})}},{key:"init",value:function(){var e=this.config,t=e.allowSleep,n=e.axisIndex,i=e.broadphase,r=e.defaultContactMaterial,a=e.frictionGravity,o=e.gravity,l=e.iterations,g=e.quatNormalizeFast,s=e.quatNormalizeSkip,c=e.solver,u=e.tolerance;this.postMessage({op:"init",props:{allowSleep:t,axisIndex:n,broadphase:i,defaultContactMaterial:r,frictionGravity:a,gravity:o,iterations:l,quatNormalizeFast:g,quatNormalizeSkip:s,solver:c,tolerance:u}})}},{key:"removeBodies",value:function(e){var t=e.uuid;this.postMessage({op:"removeBodies",uuid:t})}},{key:"removeConstraint",value:function(e){var t=e.uuid;this.postMessage({op:"removeConstraint",uuid:t})}},{key:"removeContactMaterial",value:function(e){var t=e.uuid;this.postMessage({op:"removeContactMaterial",uuid:t})}},{key:"removeRay",value:function(e){var t=e.uuid;this.postMessage({op:"removeRay",uuid:t})}},{key:"removeRaycastVehicle",value:function(e){var t=e.uuid;this.postMessage({op:"removeRaycastVehicle",uuid:t})}},{key:"removeSpring",value:function(e){var t=e.uuid;this.postMessage({op:"removeSpring",uuid:t})}},{key:"setAllowSleep",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setAllowSleep",props:t,uuid:n})}},{key:"setAngularDamping",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setAngularDamping",props:t,uuid:n})}},{key:"setAngularFactor",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setAngularFactor",props:t,uuid:n})}},{key:"setAngularVelocity",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setAngularVelocity",props:t,uuid:n})}},{key:"setCollisionFilterGroup",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setCollisionFilterGroup",props:t,uuid:n})}},{key:"setCollisionFilterMask",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setCollisionFilterMask",props:t,uuid:n})}},{key:"setCollisionResponse",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setCollisionResponse",props:t,uuid:n})}},{key:"setConstraintMotorMaxForce",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setConstraintMotorMaxForce",props:t,uuid:n})}},{key:"setConstraintMotorSpeed",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setConstraintMotorSpeed",props:t,uuid:n})}},{key:"setFixedRotation",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setFixedRotation",props:t,uuid:n})}},{key:"setIsTrigger",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setIsTrigger",props:t,uuid:n})}},{key:"setLinearDamping",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setLinearDamping",props:t,uuid:n})}},{key:"setLinearFactor",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setLinearFactor",props:t,uuid:n})}},{key:"setMass",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setMass",props:t,uuid:n})}},{key:"setMaterial",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setMaterial",props:t,uuid:n})}},{key:"setPosition",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setPosition",props:t,uuid:n})}},{key:"setQuaternion",value:function(e){var t=c(e.props,4),n=t[0],i=t[1],r=t[2],a=t[3],o=e.uuid;this.postMessage({op:"setQuaternion",props:[n,i,r,a],uuid:o})}},{key:"setRaycastVehicleBrake",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setRaycastVehicleBrake",props:t,uuid:n})}},{key:"setRaycastVehicleSteeringValue",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setRaycastVehicleSteeringValue",props:t,uuid:n})}},{key:"setRotation",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setRotation",props:t,uuid:n})}},{key:"setSleepSpeedLimit",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSleepSpeedLimit",props:t,uuid:n})}},{key:"setSleepTimeLimit",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSleepTimeLimit",props:t,uuid:n})}},{key:"setSpringDamping",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSpringDamping",props:t,uuid:n})}},{key:"setSpringRestLength",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSpringRestLength",props:t,uuid:n})}},{key:"setSpringStiffness",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setSpringStiffness",props:t,uuid:n})}},{key:"setUserData",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setUserData",props:t,uuid:n})}},{key:"setVelocity",value:function(e){var t=e.props,n=e.uuid;this.postMessage({op:"setVelocity",props:t,uuid:n})}},{key:"sleep",value:function(e){var t=e.uuid;this.postMessage({op:"sleep",uuid:t})}},{key:"step",value:function(e){var t,n=this.buffers,i=n.positions,r=n.quaternions;(i.byteLength||r.byteLength)&&(null==(t=this.worker)||t.postMessage({op:"step",positions:i,props:e,quaternions:r},[i.buffer,r.buffer]))}},{key:"subscribe",value:function(e){var t=e.props,n=t.id,i=t.target,r=t.type,a=e.uuid;this.postMessage({op:"subscribe",props:{id:n,target:i,type:r},uuid:a})}},{key:"terminate",value:function(){var e;null==(e=this.worker)||e.terminate(),this.worker=null}},{key:"unsubscribe",value:function(e){var t=e.props;this.postMessage({op:"unsubscribe",props:t})}},{key:"wakeUp",value:function(e){var t=e.uuid;this.postMessage({op:"wakeUp",uuid:t})}},{key:"postMessage",value:function(e){if(this.worker)return this.worker.postMessage(e);this.messageQueue.push(e)}}]),n}(Ap),vp=function(){function e(t){$(this,e),void 0===t&&(t=[0,0,0,0,0,0,0,0,0]),this.elements=t}return te(e,[{key:"identity",value:function(){var e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}},{key:"setZero",value:function(){var e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}},{key:"setTrace",value:function(e){var t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}},{key:"getTrace",value:function(e){void 0===e&&(e=new yp);var t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}},{key:"vmult",value:function(e,t){void 0===t&&(t=new yp);var n=this.elements,i=e.x,r=e.y,a=e.z;return t.x=n[0]*i+n[1]*r+n[2]*a,t.y=n[3]*i+n[4]*r+n[5]*a,t.z=n[6]*i+n[7]*r+n[8]*a,t}},{key:"smult",value:function(e){for(var t=0;t<this.elements.length;t++)this.elements[t]*=e}},{key:"mmult",value:function(t,n){void 0===n&&(n=new e);var i=this.elements,r=t.elements,a=n.elements,o=i[0],l=i[1],g=i[2],s=i[3],c=i[4],u=i[5],I=i[6],d=i[7],C=i[8],h=r[0],A=r[1],p=r[2],m=r[3],f=r[4],v=r[5],b=r[6],y=r[7],G=r[8];return a[0]=o*h+l*m+g*b,a[1]=o*A+l*f+g*y,a[2]=o*p+l*v+g*G,a[3]=s*h+c*m+u*b,a[4]=s*A+c*f+u*y,a[5]=s*p+c*v+u*G,a[6]=I*h+d*m+C*b,a[7]=I*A+d*f+C*y,a[8]=I*p+d*v+C*G,n}},{key:"scale",value:function(t,n){void 0===n&&(n=new e);for(var i=this.elements,r=n.elements,a=0;3!==a;a++)r[3*a+0]=t.x*i[3*a+0],r[3*a+1]=t.y*i[3*a+1],r[3*a+2]=t.z*i[3*a+2];return n}},{key:"solve",value:function(e,t){void 0===t&&(t=new yp);var n,i,r=[];for(n=0;n<12;n++)r.push(0);for(n=0;n<3;n++)for(i=0;i<3;i++)r[n+4*i]=this.elements[n+3*i];r[3]=e.x,r[7]=e.y,r[11]=e.z;var a,o,l=3,g=l;do{if(0===r[(n=g-l)+4*n])for(i=n+1;i<g;i++)if(0!==r[n+4*i]){a=4;do{r[(o=4-a)+4*n]+=r[o+4*i]}while(--a);break}if(0!==r[n+4*n])for(i=n+1;i<g;i++){var s=r[n+4*i]/r[n+4*n];a=4;do{r[(o=4-a)+4*i]=o<=n?0:r[o+4*i]-r[o+4*n]*s}while(--a)}}while(--l);if(t.z=r[11]/r[10],t.y=(r[7]-r[6]*t.z)/r[5],t.x=(r[3]-r[2]*t.z-r[1]*t.y)/r[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw"Could not solve equation! Got x=[".concat(t.toString(),"], b=[").concat(e.toString(),"], A=[").concat(this.toString(),"]");return t}},{key:"e",value:function(e,t,n){if(void 0===n)return this.elements[t+3*e];this.elements[t+3*e]=n}},{key:"copy",value:function(e){for(var t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}},{key:"toString",value:function(){for(var e="",t=0;t<9;t++)e+=this.elements[t]+",";return e}},{key:"reverse",value:function(t){void 0===t&&(t=new e);var n,i,r=bp;for(n=0;n<3;n++)for(i=0;i<3;i++)r[n+6*i]=this.elements[n+3*i];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;var a,o,l=3,g=l;do{if(0===r[(n=g-l)+6*n])for(i=n+1;i<g;i++)if(0!==r[n+6*i]){a=6;do{r[(o=6-a)+6*n]+=r[o+6*i]}while(--a);break}if(0!==r[n+6*n])for(i=n+1;i<g;i++){var s=r[n+6*i]/r[n+6*n];a=6;do{r[(o=6-a)+6*i]=o<=n?0:r[o+6*i]-r[o+6*n]*s}while(--a)}}while(--l);n=2;do{i=n-1;do{var c=r[n+6*i]/r[n+6*n];a=6;do{r[(o=6-a)+6*i]=r[o+6*i]-r[o+6*n]*c}while(--a)}while(i--)}while(--n);n=2;do{var u=1/r[n+6*n];a=6;do{r[(o=6-a)+6*n]=r[o+6*n]*u}while(--a)}while(n--);n=2;do{i=2;do{if(o=r[3+i+6*n],isNaN(o)||o===1/0)throw"Could not reverse! A=[".concat(this.toString(),"]");t.e(n,i,o)}while(i--)}while(n--);return t}},{key:"setRotationFromQuaternion",value:function(e){var t=e.x,n=e.y,i=e.z,r=e.w,a=t+t,o=n+n,l=i+i,g=t*a,s=t*o,c=t*l,u=n*o,I=n*l,d=i*l,C=r*a,h=r*o,A=r*l,p=this.elements;return p[0]=1-(u+d),p[1]=s-A,p[2]=c+h,p[3]=s+A,p[4]=1-(g+d),p[5]=I-C,p[6]=c-h,p[7]=I+C,p[8]=1-(g+u),this}},{key:"transpose",value:function(t){void 0===t&&(t=new e);var n,i=this.elements,r=t.elements;return r[0]=i[0],r[4]=i[4],r[8]=i[8],n=i[1],r[1]=i[3],r[3]=n,n=i[2],r[2]=i[6],r[6]=n,n=i[5],r[5]=i[7],r[7]=n,t}}]),e}(),bp=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],yp=function(){function e(t,n,i){$(this,e),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=n,this.z=i}return te(e,[{key:"cross",value:function(t,n){void 0===n&&(n=new e);var i=t.x,r=t.y,a=t.z,o=this.x,l=this.y,g=this.z;return n.x=l*a-g*r,n.y=g*i-o*a,n.z=o*r-l*i,n}},{key:"set",value:function(e,t,n){return this.x=e,this.y=t,this.z=n,this}},{key:"setZero",value:function(){this.x=this.y=this.z=0}},{key:"vadd",value:function(t,n){if(!n)return new e(this.x+t.x,this.y+t.y,this.z+t.z);n.x=t.x+this.x,n.y=t.y+this.y,n.z=t.z+this.z}},{key:"vsub",value:function(t,n){if(!n)return new e(this.x-t.x,this.y-t.y,this.z-t.z);n.x=this.x-t.x,n.y=this.y-t.y,n.z=this.z-t.z}},{key:"crossmat",value:function(){return new vp([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}},{key:"normalize",value:function(){var e=this.x,t=this.y,n=this.z,i=Math.sqrt(e*e+t*t+n*n);if(i>0){var r=1/i;this.x*=r,this.y*=r,this.z*=r}else this.x=0,this.y=0,this.z=0;return i}},{key:"unit",value:function(t){void 0===t&&(t=new e);var n=this.x,i=this.y,r=this.z,a=Math.sqrt(n*n+i*i+r*r);return a>0?(a=1/a,t.x=n*a,t.y=i*a,t.z=r*a):(t.x=1,t.y=0,t.z=0),t}},{key:"length",value:function(){var e=this.x,t=this.y,n=this.z;return Math.sqrt(e*e+t*t+n*n)}},{key:"lengthSquared",value:function(){return this.dot(this)}},{key:"distanceTo",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z;return Math.sqrt((r-t)*(r-t)+(a-n)*(a-n)+(o-i)*(o-i))}},{key:"distanceSquared",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z;return(r-t)*(r-t)+(a-n)*(a-n)+(o-i)*(o-i)}},{key:"scale",value:function(t,n){void 0===n&&(n=new e);var i=this.x,r=this.y,a=this.z;return n.x=t*i,n.y=t*r,n.z=t*a,n}},{key:"vmul",value:function(t,n){return void 0===n&&(n=new e),n.x=t.x*this.x,n.y=t.y*this.y,n.z=t.z*this.z,n}},{key:"addScaledVector",value:function(t,n,i){return void 0===i&&(i=new e),i.x=this.x+t*n.x,i.y=this.y+t*n.y,i.z=this.z+t*n.z,i}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"isZero",value:function(){return 0===this.x&&0===this.y&&0===this.z}},{key:"negate",value:function(t){return void 0===t&&(t=new e),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}},{key:"tangents",value:function(e,t){var n=this.length();if(n>0){var i=Gp,r=1/n;i.set(this.x*r,this.y*r,this.z*r);var a=Bp;Math.abs(i.x)<.9?(a.set(1,0,0),i.cross(a,e)):(a.set(0,1,0),i.cross(a,e)),i.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y,",").concat(this.z)}},{key:"toArray",value:function(){return[this.x,this.y,this.z]}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"lerp",value:function(e,t,n){var i=this.x,r=this.y,a=this.z;n.x=i+(e.x-i)*t,n.y=r+(e.y-r)*t,n.z=a+(e.z-a)*t}},{key:"almostEquals",value:function(e,t){return void 0===t&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}},{key:"almostZero",value:function(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}},{key:"isAntiparallelTo",value:function(e,t){return this.negate(Zp),Zp.almostEquals(e,t)}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}}]),e}();yp.ZERO=new yp(0,0,0),yp.UNIT_X=new yp(1,0,0),yp.UNIT_Y=new yp(0,1,0),yp.UNIT_Z=new yp(0,0,1);var Gp=new yp,Bp=new yp,Zp=new yp,wp=function(){function e(t){$(this,e),void 0===t&&(t={}),this.lowerBound=new yp,this.upperBound=new yp,t.lowerBound&&this.lowerBound.copy(t.lowerBound),t.upperBound&&this.upperBound.copy(t.upperBound)}return te(e,[{key:"setFromPoints",value:function(e,t,n,i){var r=this.lowerBound,a=this.upperBound,o=n;r.copy(e[0]),o&&o.vmult(r,r),a.copy(r);for(var l=1;l<e.length;l++){var g=e[l];o&&(o.vmult(g,xp),g=xp),g.x>a.x&&(a.x=g.x),g.x<r.x&&(r.x=g.x),g.y>a.y&&(a.y=g.y),g.y<r.y&&(r.y=g.y),g.z>a.z&&(a.z=g.z),g.z<r.z&&(r.z=g.z)}return t&&(t.vadd(r,r),t.vadd(a,a)),i&&(r.x-=i,r.y-=i,r.z-=i,a.x+=i,a.y+=i,a.z+=i),this}},{key:"copy",value:function(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}},{key:"clone",value:function(){return(new e).copy(this)}},{key:"extend",value:function(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}},{key:"overlaps",value:function(e){var t=this.lowerBound,n=this.upperBound,i=e.lowerBound,r=e.upperBound,a=i.x<=n.x&&n.x<=r.x||t.x<=r.x&&r.x<=n.x,o=i.y<=n.y&&n.y<=r.y||t.y<=r.y&&r.y<=n.y,l=i.z<=n.z&&n.z<=r.z||t.z<=r.z&&r.z<=n.z;return a&&o&&l}},{key:"volume",value:function(){var e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}},{key:"contains",value:function(e){var t=this.lowerBound,n=this.upperBound,i=e.lowerBound,r=e.upperBound;return t.x<=i.x&&n.x>=r.x&&t.y<=i.y&&n.y>=r.y&&t.z<=i.z&&n.z>=r.z}},{key:"getCorners",value:function(e,t,n,i,r,a,o,l){var g=this.lowerBound,s=this.upperBound;e.copy(g),t.set(s.x,g.y,g.z),n.set(s.x,s.y,g.z),i.set(g.x,s.y,s.z),r.set(s.x,g.y,s.z),a.set(g.x,s.y,g.z),o.set(g.x,g.y,s.z),l.copy(s)}},{key:"toLocalFrame",value:function(e,t){var n=Sp,i=n[0],r=n[1],a=n[2],o=n[3],l=n[4],g=n[5],s=n[6],c=n[7];this.getCorners(i,r,a,o,l,g,s,c);for(var u=0;8!==u;u++){var I=n[u];e.pointToLocal(I,I)}return t.setFromPoints(n)}},{key:"toWorldFrame",value:function(e,t){var n=Sp,i=n[0],r=n[1],a=n[2],o=n[3],l=n[4],g=n[5],s=n[6],c=n[7];this.getCorners(i,r,a,o,l,g,s,c);for(var u=0;8!==u;u++){var I=n[u];e.pointToWorld(I,I)}return t.setFromPoints(n)}},{key:"overlapsRay",value:function(e){var t=e.direction,n=e.from,i=1/t.x,r=1/t.y,a=1/t.z,o=(this.lowerBound.x-n.x)*i,l=(this.upperBound.x-n.x)*i,g=(this.lowerBound.y-n.y)*r,s=(this.upperBound.y-n.y)*r,c=(this.lowerBound.z-n.z)*a,u=(this.upperBound.z-n.z)*a,I=Math.max(Math.max(Math.min(o,l),Math.min(g,s)),Math.min(c,u)),d=Math.min(Math.min(Math.max(o,l),Math.max(g,s)),Math.max(c,u));return!(d<0)&&!(I>d)}}]),e}(),xp=new yp,Sp=[new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp],Wp=function(){function e(){$(this,e)}return te(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;return void 0===n[e]&&(n[e]=[]),n[e].includes(t)||n[e].push(t),this}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return!(void 0===n[e]||!n[e].includes(t))}},{key:"hasAnyEventListener",value:function(e){return void 0!==this._listeners&&void 0!==this._listeners[e]}},{key:"removeEventListener",value:function(e,t){if(void 0===this._listeners)return this;var n=this._listeners;if(void 0===n[e])return this;var i=n[e].indexOf(t);return-1!==i&&n[e].splice(i,1),this}},{key:"dispatchEvent",value:function(e){if(void 0===this._listeners)return this;var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=0,i=t.length;n<i;n++)t[n].call(this,e)}return this}}]),e}(),Vp=function(){function e(t,n,i,r){$(this,e),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=t,this.y=n,this.z=i,this.w=r}return te(e,[{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y,",").concat(this.z,",").concat(this.w)}},{key:"toArray",value:function(){return[this.x,this.y,this.z,this.w]}},{key:"setFromAxisAngle",value:function(e,t){var n=Math.sin(.5*t);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(.5*t),this}},{key:"toAxisAngle",value:function(e){void 0===e&&(e=new yp),this.normalize();var t=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/n,e.y=this.y/n,e.z=this.z/n),[e,t]}},{key:"setFromVectors",value:function(e,t){if(e.isAntiparallelTo(t)){var n=Rp,i=qp;e.tangents(n,i),this.setFromAxisAngle(n,Math.PI)}else{var r=e.cross(t);this.x=r.x,this.y=r.y,this.z=r.z,this.w=Math.sqrt(Math.pow(e.length(),2)*Math.pow(t.length(),2))+e.dot(t),this.normalize()}return this}},{key:"mult",value:function(t,n){void 0===n&&(n=new e);var i=this.x,r=this.y,a=this.z,o=this.w,l=t.x,g=t.y,s=t.z,c=t.w;return n.x=i*c+o*l+r*s-a*g,n.y=r*c+o*g+a*l-i*s,n.z=a*c+o*s+i*g-r*l,n.w=o*c-i*l-r*g-a*s,n}},{key:"inverse",value:function(t){void 0===t&&(t=new e);var n=this.x,i=this.y,r=this.z,a=this.w;this.conjugate(t);var o=1/(n*n+i*i+r*r+a*a);return t.x*=o,t.y*=o,t.z*=o,t.w*=o,t}},{key:"conjugate",value:function(t){return void 0===t&&(t=new e),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t}},{key:"normalize",value:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:"normalizeFast",value:function(){var e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:"vmult",value:function(e,t){void 0===t&&(t=new yp);var n=e.x,i=e.y,r=e.z,a=this.x,o=this.y,l=this.z,g=this.w,s=g*n+o*r-l*i,c=g*i+l*n-a*r,u=g*r+a*i-o*n,I=-a*n-o*i-l*r;return t.x=s*g+I*-a+c*-l-u*-o,t.y=c*g+I*-o+u*-a-s*-l,t.z=u*g+I*-l+s*-o-c*-a,t}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:"toEuler",value:function(e,t){var n,i,r;void 0===t&&(t="YZX");var a=this.x,o=this.y,l=this.z,g=this.w;if("YZX"!==t)throw new Error("Euler order ".concat(t," not supported yet."));var s=a*o+l*g;if(s>.499&&(n=2*Math.atan2(a,g),i=Math.PI/2,r=0),s<-.499&&(n=-2*Math.atan2(a,g),i=-Math.PI/2,r=0),void 0===n){var c=a*a,u=o*o,I=l*l;n=Math.atan2(2*o*g-2*a*l,1-2*u-2*I),i=Math.asin(2*s),r=Math.atan2(2*a*g-2*o*l,1-2*c-2*I)}e.y=n,e.z=i,e.x=r}},{key:"setFromEuler",value:function(e,t,n,i){void 0===i&&(i="XYZ");var r=Math.cos(e/2),a=Math.cos(t/2),o=Math.cos(n/2),l=Math.sin(e/2),g=Math.sin(t/2),s=Math.sin(n/2);return"XYZ"===i?(this.x=l*a*o+r*g*s,this.y=r*g*o-l*a*s,this.z=r*a*s+l*g*o,this.w=r*a*o-l*g*s):"YXZ"===i?(this.x=l*a*o+r*g*s,this.y=r*g*o-l*a*s,this.z=r*a*s-l*g*o,this.w=r*a*o+l*g*s):"ZXY"===i?(this.x=l*a*o-r*g*s,this.y=r*g*o+l*a*s,this.z=r*a*s+l*g*o,this.w=r*a*o-l*g*s):"ZYX"===i?(this.x=l*a*o-r*g*s,this.y=r*g*o+l*a*s,this.z=r*a*s-l*g*o,this.w=r*a*o+l*g*s):"YZX"===i?(this.x=l*a*o+r*g*s,this.y=r*g*o+l*a*s,this.z=r*a*s-l*g*o,this.w=r*a*o-l*g*s):"XZY"===i&&(this.x=l*a*o-r*g*s,this.y=r*g*o-l*a*s,this.z=r*a*s+l*g*o,this.w=r*a*o+l*g*s),this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z,this.w)}},{key:"slerp",value:function(t,n,i){void 0===i&&(i=new e);var r,a,o,l,g,s=this.x,c=this.y,u=this.z,I=this.w,d=t.x,C=t.y,h=t.z,A=t.w;return(a=s*d+c*C+u*h+I*A)<0&&(a=-a,d=-d,C=-C,h=-h,A=-A),1-a>1e-6?(r=Math.acos(a),o=Math.sin(r),l=Math.sin((1-n)*r)/o,g=Math.sin(n*r)/o):(l=1-n,g=n),i.x=l*s+g*d,i.y=l*c+g*C,i.z=l*u+g*h,i.w=l*I+g*A,i}},{key:"integrate",value:function(t,n,i,r){void 0===r&&(r=new e);var a=t.x*i.x,o=t.y*i.y,l=t.z*i.z,g=this.x,s=this.y,c=this.z,u=this.w,I=.5*n;return r.x+=I*(a*u+o*c-l*s),r.y+=I*(o*u+l*g-a*c),r.z+=I*(l*u+a*s-o*g),r.w+=I*(-a*g-o*s-l*c),r}}]),e}(),Rp=new yp,qp=new yp,kp=function(){function e(t){$(this,e),void 0===t&&(t={}),this.id=e.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}return te(e,[{key:"updateBoundingSphereRadius",value:function(){throw"computeBoundingSphereRadius() not implemented for shape type ".concat(this.type)}},{key:"volume",value:function(){throw"volume() not implemented for shape type ".concat(this.type)}},{key:"calculateLocalInertia",value:function(e,t){throw"calculateLocalInertia() not implemented for shape type ".concat(this.type)}},{key:"calculateWorldAABB",value:function(e,t,n,i){throw"calculateWorldAABB() not implemented for shape type ".concat(this.type)}}]),e}();kp.idCounter=0,kp.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};var Xp=function(){function e(t){$(this,e),void 0===t&&(t={}),this.position=new yp,this.quaternion=new Vp,t.position&&this.position.copy(t.position),t.quaternion&&this.quaternion.copy(t.quaternion)}return te(e,[{key:"pointToLocal",value:function(t,n){return e.pointToLocalFrame(this.position,this.quaternion,t,n)}},{key:"pointToWorld",value:function(t,n){return e.pointToWorldFrame(this.position,this.quaternion,t,n)}},{key:"vectorToWorldFrame",value:function(e,t){return void 0===t&&(t=new yp),this.quaternion.vmult(e,t),t}}],[{key:"pointToLocalFrame",value:function(e,t,n,i){return void 0===i&&(i=new yp),n.vsub(e,i),t.conjugate(Yp),Yp.vmult(i,i),i}},{key:"pointToWorldFrame",value:function(e,t,n,i){return void 0===i&&(i=new yp),t.vmult(n,i),i.vadd(e,i),i}},{key:"vectorToWorldFrame",value:function(e,t,n){return void 0===n&&(n=new yp),e.vmult(t,n),n}},{key:"vectorToLocalFrame",value:function(e,t,n,i){return void 0===i&&(i=new yp),t.w*=-1,t.vmult(n,i),t.w*=-1,i}}]),e}(),Yp=new Vp,Np=function(e){ne(n,e);var t=le(n);function n(e){var i;$(this,n),void 0===e&&(e={});var r=e,a=r.vertices,o=void 0===a?[]:a,l=r.faces,g=void 0===l?[]:l,s=r.normals,c=void 0===s?[]:s,u=r.axes,I=r.boundingSphereRadius;return(i=t.call(this,{type:kp.types.CONVEXPOLYHEDRON})).vertices=o,i.faces=g,i.faceNormals=c,0===i.faceNormals.length&&i.computeNormals(),I?i.boundingSphereRadius=I:i.updateBoundingSphereRadius(),i.worldVertices=[],i.worldVerticesNeedsUpdate=!0,i.worldFaceNormals=[],i.worldFaceNormalsNeedsUpdate=!0,i.uniqueAxes=u?u.slice():null,i.uniqueEdges=[],i.computeEdges(),i}return te(n,[{key:"computeEdges",value:function(){var e=this.faces,t=this.vertices,n=this.uniqueEdges;n.length=0;for(var i=new yp,r=0;r!==e.length;r++)for(var a=e[r],o=a.length,l=0;l!==o;l++){var g=(l+1)%o;t[a[l]].vsub(t[a[g]],i),i.normalize();for(var s=!1,c=0;c!==n.length;c++)if(n[c].almostEquals(i)||n[c].almostEquals(i)){s=!0;break}s||n.push(i.clone())}}},{key:"computeNormals",value:function(){this.faceNormals.length=this.faces.length;for(var e=0;e<this.faces.length;e++){for(var t=0;t<this.faces[e].length;t++)if(!this.vertices[this.faces[e][t]])throw new Error("Vertex ".concat(this.faces[e][t]," not found!"));var n=this.faceNormals[e]||new yp;this.getFaceNormal(e,n),n.negate(n),this.faceNormals[e]=n;var i=this.vertices[this.faces[e][0]];if(n.dot(i)<0){console.error(".faceNormals[".concat(e,"] = Vec3(").concat(n.toString(),") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule."));for(var r=0;r<this.faces[e].length;r++)console.warn(".vertices[".concat(this.faces[e][r],"] = Vec3(").concat(this.vertices[this.faces[e][r]].toString(),")"))}}}},{key:"getFaceNormal",value:function(e,t){var i=this.faces[e],r=this.vertices[i[0]],a=this.vertices[i[1]],o=this.vertices[i[2]];n.computeNormal(r,a,o,t)}},{key:"clipAgainstHull",value:function(e,t,n,i,r,a,o,l,g){for(var s=new yp,c=-1,u=-Number.MAX_VALUE,I=0;I<n.faces.length;I++){s.copy(n.faceNormals[I]),r.vmult(s,s);var d=s.dot(a);d>u&&(u=d,c=I)}for(var C=[],h=0;h<n.faces[c].length;h++){var A=n.vertices[n.faces[c][h]],p=new yp;p.copy(A),r.vmult(p,p),i.vadd(p,p),C.push(p)}c>=0&&this.clipFaceAgainstHull(a,e,t,C,o,l,g)}},{key:"findSeparatingAxis",value:function(e,t,n,i,r,a,o,l){var g=new yp,s=new yp,c=new yp,u=new yp,I=new yp,d=new yp,C=Number.MAX_VALUE,h=this;if(h.uniqueAxes)for(var A=0;A!==h.uniqueAxes.length;A++){n.vmult(h.uniqueAxes[A],g);var p=h.testSepAxis(g,e,t,n,i,r);if(!1===p)return!1;p<C&&(C=p,a.copy(g))}else for(var m=o?o.length:h.faces.length,f=0;f<m;f++){var v=o?o[f]:f;g.copy(h.faceNormals[v]),n.vmult(g,g);var b=h.testSepAxis(g,e,t,n,i,r);if(!1===b)return!1;b<C&&(C=b,a.copy(g))}if(e.uniqueAxes)for(var y=0;y!==e.uniqueAxes.length;y++){r.vmult(e.uniqueAxes[y],s);var G=h.testSepAxis(s,e,t,n,i,r);if(!1===G)return!1;G<C&&(C=G,a.copy(s))}else for(var B=l?l.length:e.faces.length,Z=0;Z<B;Z++){var w=l?l[Z]:Z;s.copy(e.faceNormals[w]),r.vmult(s,s);var x=h.testSepAxis(s,e,t,n,i,r);if(!1===x)return!1;x<C&&(C=x,a.copy(s))}for(var S=0;S!==h.uniqueEdges.length;S++){n.vmult(h.uniqueEdges[S],u);for(var W=0;W!==e.uniqueEdges.length;W++)if(r.vmult(e.uniqueEdges[W],I),u.cross(I,d),!d.almostZero()){d.normalize();var V=h.testSepAxis(d,e,t,n,i,r);if(!1===V)return!1;V<C&&(C=V,a.copy(d))}}return i.vsub(t,c),c.dot(a)>0&&a.negate(a),!0}},{key:"testSepAxis",value:function(e,t,i,r,a,o){n.project(this,e,i,r,Kp),n.project(t,e,a,o,Hp);var l=Kp[0],g=Kp[1],s=Hp[0],c=Hp[1];if(l<c||s<g)return!1;var u=l-c,I=s-g;return u<I?u:I}},{key:"calculateLocalInertia",value:function(e,t){var n=new yp,i=new yp;this.computeLocalAABB(i,n);var r=n.x-i.x,a=n.y-i.y,o=n.z-i.z;t.x=1/12*e*(2*a*2*a+2*o*2*o),t.y=1/12*e*(2*r*2*r+2*o*2*o),t.z=1/12*e*(2*a*2*a+2*r*2*r)}},{key:"getPlaneConstantOfFace",value:function(e){var t=this.faces[e],n=this.faceNormals[e],i=this.vertices[t[0]];return-n.dot(i)}},{key:"clipFaceAgainstHull",value:function(e,t,n,i,r,a,o){for(var l=new yp,g=new yp,s=new yp,c=new yp,u=new yp,I=new yp,d=new yp,C=new yp,h=this,A=i,p=[],m=-1,f=Number.MAX_VALUE,v=0;v<h.faces.length;v++){l.copy(h.faceNormals[v]),n.vmult(l,l);var b=l.dot(e);b<f&&(f=b,m=v)}if(!(m<0)){var y=h.faces[m];y.connectedFaces=[];for(var G=0;G<h.faces.length;G++)for(var B=0;B<h.faces[G].length;B++)-1!==y.indexOf(h.faces[G][B])&&G!==m&&-1===y.connectedFaces.indexOf(G)&&y.connectedFaces.push(G);for(var Z=y.length,w=0;w<Z;w++){var x=h.vertices[y[w]],S=h.vertices[y[(w+1)%Z]];x.vsub(S,g),s.copy(g),n.vmult(s,s),t.vadd(s,s),c.copy(this.faceNormals[m]),n.vmult(c,c),t.vadd(c,c),s.cross(c,u),u.negate(u),I.copy(x),n.vmult(I,I),t.vadd(I,I);var W=y.connectedFaces[w];d.copy(this.faceNormals[W]);var V=this.getPlaneConstantOfFace(W);C.copy(d),n.vmult(C,C);var R=V-C.dot(t);for(this.clipFaceAgainstPlane(A,p,C,R);A.length;)A.shift();for(;p.length;)A.push(p.shift())}d.copy(this.faceNormals[m]);var q=this.getPlaneConstantOfFace(m);C.copy(d),n.vmult(C,C);for(var k=q-C.dot(t),X=0;X<A.length;X++){var Y=C.dot(A[X])+k;if(Y<=r&&(console.log("clamped: depth=".concat(Y," to minDist=").concat(r)),Y=r),Y<=a){var N=A[X];if(Y<=1e-6){var K={point:N,normal:C,depth:Y};o.push(K)}}}}}},{key:"clipFaceAgainstPlane",value:function(e,t,n,i){var r,a,o=e.length;if(o<2)return t;var l=e[e.length-1],g=e[0];r=n.dot(l)+i;for(var s=0;s<o;s++){if(g=e[s],a=n.dot(g)+i,r<0)if(a<0){var c=new yp;c.copy(g),t.push(c)}else{var u=new yp;l.lerp(g,r/(r-a),u),t.push(u)}else if(a<0){var I=new yp;l.lerp(g,r/(r-a),I),t.push(I),t.push(g)}l=g,r=a}return t}},{key:"computeWorldVertices",value:function(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new yp);for(var n=this.vertices,i=this.worldVertices,r=0;r!==this.vertices.length;r++)t.vmult(n[r],i[r]),e.vadd(i[r],i[r]);this.worldVerticesNeedsUpdate=!1}},{key:"computeLocalAABB",value:function(e,t){var n=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var i=0;i<this.vertices.length;i++){var r=n[i];r.x<e.x?e.x=r.x:r.x>t.x&&(t.x=r.x),r.y<e.y?e.y=r.y:r.y>t.y&&(t.y=r.y),r.z<e.z?e.z=r.z:r.z>t.z&&(t.z=r.z)}}},{key:"computeWorldFaceNormals",value:function(e){for(var t=this.faceNormals.length;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new yp);for(var n=this.faceNormals,i=this.worldFaceNormals,r=0;r!==t;r++)e.vmult(n[r],i[r]);this.worldFaceNormalsNeedsUpdate=!1}},{key:"updateBoundingSphereRadius",value:function(){for(var e=0,t=this.vertices,n=0;n!==t.length;n++){var i=t[n].lengthSquared();i>e&&(e=i)}this.boundingSphereRadius=Math.sqrt(e)}},{key:"calculateWorldAABB",value:function(e,t,n,i){for(var r,a,o,l,g,s,c=this.vertices,u=new yp,I=0;I<c.length;I++){u.copy(c[I]),t.vmult(u,u),e.vadd(u,u);var d=u;(void 0===r||d.x<r)&&(r=d.x),(void 0===l||d.x>l)&&(l=d.x),(void 0===a||d.y<a)&&(a=d.y),(void 0===g||d.y>g)&&(g=d.y),(void 0===o||d.z<o)&&(o=d.z),(void 0===s||d.z>s)&&(s=d.z)}n.set(r,a,o),i.set(l,g,s)}},{key:"volume",value:function(){return 4*Math.PI*this.boundingSphereRadius/3}},{key:"getAveragePointLocal",value:function(e){void 0===e&&(e=new yp);for(var t=this.vertices,n=0;n<t.length;n++)e.vadd(t[n],e);return e.scale(1/t.length,e),e}},{key:"transformAllPoints",value:function(e,t){var n=this.vertices.length,i=this.vertices;if(t){for(var r=0;r<n;r++){var a=i[r];t.vmult(a,a)}for(var o=0;o<this.faceNormals.length;o++){var l=this.faceNormals[o];t.vmult(l,l)}}if(e)for(var g=0;g<n;g++){var s=i[g];s.vadd(e,s)}}},{key:"pointIsInside",value:function(e){var t=this.vertices,n=this.faces,i=this.faceNormals,r=new yp;this.getAveragePointLocal(r);for(var a=0;a<this.faces.length;a++){var o=i[a],l=t[n[a][0]],g=new yp;e.vsub(l,g);var s=o.dot(g),c=new yp;r.vsub(l,c);var u=o.dot(c);if(s<0&&u>0||s>0&&u<0)return!1}return-1}}],[{key:"computeNormal",value:function(e,t,n,i){var r=new yp,a=new yp;t.vsub(e,a),n.vsub(t,r),r.cross(a,i),i.isZero()||i.normalize()}},{key:"project",value:function(e,t,n,i,r){var a=e.vertices.length,o=zp,l=0,g=0,s=Mp,c=e.vertices;s.setZero(),Xp.vectorToLocalFrame(n,i,t,o),Xp.pointToLocalFrame(n,i,s,s);var u=s.dot(o);g=l=c[0].dot(o);for(var I=1;I<a;I++){var d=c[I].dot(o);d>l&&(l=d),d<g&&(g=d)}if((g-=u)>(l-=u)){var C=g;g=l,l=C}r[0]=l,r[1]=g}}]),n}(kp),Kp=[],Hp=[];new yp;var zp=new yp,Mp=new yp,Fp=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this,{type:kp.types.BOX})).halfExtents=e,i.convexPolyhedronRepresentation=null,i.updateConvexPolyhedronRepresentation(),i.updateBoundingSphereRadius(),i}return te(n,[{key:"updateConvexPolyhedronRepresentation",value:function(){var e=this.halfExtents.x,t=this.halfExtents.y,n=this.halfExtents.z,i=yp,r=[new i(-e,-t,-n),new i(e,-t,-n),new i(e,t,-n),new i(-e,t,-n),new i(-e,-t,n),new i(e,-t,n),new i(e,t,n),new i(-e,t,n)],a=[new i(0,0,1),new i(0,1,0),new i(1,0,0)],o=new Np({vertices:r,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:a});this.convexPolyhedronRepresentation=o,o.material=this.material}},{key:"calculateLocalInertia",value:function(e,t){return void 0===t&&(t=new yp),n.calculateInertia(this.halfExtents,e,t),t}},{key:"getSideNormals",value:function(e,t){var n=e,i=this.halfExtents;if(n[0].set(i.x,0,0),n[1].set(0,i.y,0),n[2].set(0,0,i.z),n[3].set(-i.x,0,0),n[4].set(0,-i.y,0),n[5].set(0,0,-i.z),void 0!==t)for(var r=0;r!==n.length;r++)t.vmult(n[r],n[r]);return n}},{key:"volume",value:function(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}},{key:"updateBoundingSphereRadius",value:function(){this.boundingSphereRadius=this.halfExtents.length()}},{key:"forEachWorldCorner",value:function(e,t,n){for(var i=this.halfExtents,r=[[i.x,i.y,i.z],[-i.x,i.y,i.z],[-i.x,-i.y,i.z],[-i.x,-i.y,-i.z],[i.x,-i.y,-i.z],[i.x,i.y,-i.z],[-i.x,i.y,-i.z],[i.x,-i.y,i.z]],a=0;a<r.length;a++)Lp.set(r[a][0],r[a][1],r[a][2]),t.vmult(Lp,Lp),e.vadd(Lp,Lp),n(Lp.x,Lp.y,Lp.z)}},{key:"calculateWorldAABB",value:function(e,t,n,i){var r=this.halfExtents;_p[0].set(r.x,r.y,r.z),_p[1].set(-r.x,r.y,r.z),_p[2].set(-r.x,-r.y,r.z),_p[3].set(-r.x,-r.y,-r.z),_p[4].set(r.x,-r.y,-r.z),_p[5].set(r.x,r.y,-r.z),_p[6].set(-r.x,r.y,-r.z),_p[7].set(r.x,-r.y,r.z);var a=_p[0];t.vmult(a,a),e.vadd(a,a),i.copy(a),n.copy(a);for(var o=1;o<8;o++){var l=_p[o];t.vmult(l,l),e.vadd(l,l);var g=l.x,s=l.y,c=l.z;g>i.x&&(i.x=g),s>i.y&&(i.y=s),c>i.z&&(i.z=c),g<n.x&&(n.x=g),s<n.y&&(n.y=s),c<n.z&&(n.z=c)}}}],[{key:"calculateInertia",value:function(e,t,n){var i=e;n.x=1/12*t*(2*i.y*2*i.y+2*i.z*2*i.z),n.y=1/12*t*(2*i.x*2*i.x+2*i.z*2*i.z),n.z=1/12*t*(2*i.y*2*i.y+2*i.x*2*i.x)}}]),n}(kp),Lp=new yp,_p=[new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp],Tp=1,Ep=2,Jp=4,Up=0,Dp=1,Pp=2,Op=function(e){ne(n,e);var t=le(n);function n(e){var i;$(this,n),void 0===e&&(e={}),(i=t.call(this)).id=n.idCounter++,i.index=-1,i.world=null,i.vlambda=new yp,i.collisionFilterGroup="number"===typeof e.collisionFilterGroup?e.collisionFilterGroup:1,i.collisionFilterMask="number"===typeof e.collisionFilterMask?e.collisionFilterMask:-1,i.collisionResponse="boolean"!==typeof e.collisionResponse||e.collisionResponse,i.position=new yp,i.previousPosition=new yp,i.interpolatedPosition=new yp,i.initPosition=new yp,e.position&&(i.position.copy(e.position),i.previousPosition.copy(e.position),i.interpolatedPosition.copy(e.position),i.initPosition.copy(e.position)),i.velocity=new yp,e.velocity&&i.velocity.copy(e.velocity),i.initVelocity=new yp,i.force=new yp;var r="number"===typeof e.mass?e.mass:0;return i.mass=r,i.invMass=r>0?1/r:0,i.material=e.material||null,i.linearDamping="number"===typeof e.linearDamping?e.linearDamping:.01,i.type=r<=0?n.STATIC:n.DYNAMIC,typeof e.type===typeof n.STATIC&&(i.type=e.type),i.allowSleep="undefined"===typeof e.allowSleep||e.allowSleep,i.sleepState=n.AWAKE,i.sleepSpeedLimit="undefined"!==typeof e.sleepSpeedLimit?e.sleepSpeedLimit:.1,i.sleepTimeLimit="undefined"!==typeof e.sleepTimeLimit?e.sleepTimeLimit:1,i.timeLastSleepy=0,i.wakeUpAfterNarrowphase=!1,i.torque=new yp,i.quaternion=new Vp,i.initQuaternion=new Vp,i.previousQuaternion=new Vp,i.interpolatedQuaternion=new Vp,e.quaternion&&(i.quaternion.copy(e.quaternion),i.initQuaternion.copy(e.quaternion),i.previousQuaternion.copy(e.quaternion),i.interpolatedQuaternion.copy(e.quaternion)),i.angularVelocity=new yp,e.angularVelocity&&i.angularVelocity.copy(e.angularVelocity),i.initAngularVelocity=new yp,i.shapes=[],i.shapeOffsets=[],i.shapeOrientations=[],i.inertia=new yp,i.invInertia=new yp,i.invInertiaWorld=new vp,i.invMassSolve=0,i.invInertiaSolve=new yp,i.invInertiaWorldSolve=new vp,i.fixedRotation="undefined"!==typeof e.fixedRotation&&e.fixedRotation,i.angularDamping="undefined"!==typeof e.angularDamping?e.angularDamping:.01,i.linearFactor=new yp(1,1,1),e.linearFactor&&i.linearFactor.copy(e.linearFactor),i.angularFactor=new yp(1,1,1),e.angularFactor&&i.angularFactor.copy(e.angularFactor),i.aabb=new wp,i.aabbNeedsUpdate=!0,i.boundingRadius=0,i.wlambda=new yp,i.isTrigger=Boolean(e.isTrigger),e.shape&&i.addShape(e.shape),i.updateMassProperties(),i}return te(n,[{key:"wakeUp",value:function(){var e=this.sleepState;this.sleepState=n.AWAKE,this.wakeUpAfterNarrowphase=!1,e===n.SLEEPING&&this.dispatchEvent(n.wakeupEvent)}},{key:"sleep",value:function(){this.sleepState=n.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}},{key:"sleepTick",value:function(e){if(this.allowSleep){var t=this.sleepState,i=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=Math.pow(this.sleepSpeedLimit,2);t===n.AWAKE&&i<r?(this.sleepState=n.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(n.sleepyEvent)):t===n.SLEEPY&&i>r?this.wakeUp():t===n.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(n.sleepEvent))}}},{key:"updateSolveMassProperties",value:function(){this.sleepState===n.SLEEPING||this.type===n.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}},{key:"pointToLocalFrame",value:function(e,t){return void 0===t&&(t=new yp),e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}},{key:"vectorToLocalFrame",value:function(e,t){return void 0===t&&(t=new yp),this.quaternion.conjugate().vmult(e,t),t}},{key:"pointToWorldFrame",value:function(e,t){return void 0===t&&(t=new yp),this.quaternion.vmult(e,t),t.vadd(this.position,t),t}},{key:"vectorToWorldFrame",value:function(e,t){return void 0===t&&(t=new yp),this.quaternion.vmult(e,t),t}},{key:"addShape",value:function(e,t,n){var i=new yp,r=new Vp;return t&&i.copy(t),n&&r.copy(n),this.shapes.push(e),this.shapeOffsets.push(i),this.shapeOrientations.push(r),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}},{key:"removeShape",value:function(e){var t=this.shapes.indexOf(e);return-1===t?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}},{key:"updateBoundingRadius",value:function(){for(var e=this.shapes,t=this.shapeOffsets,n=e.length,i=0,r=0;r!==n;r++){var a=e[r];a.updateBoundingSphereRadius();var o=t[r].length(),l=a.boundingSphereRadius;o+l>i&&(i=o+l)}this.boundingRadius=i}},{key:"updateAABB",value:function(){for(var e=this.shapes,t=this.shapeOffsets,n=this.shapeOrientations,i=e.length,r=Qp,a=jp,o=this.quaternion,l=this.aabb,g=$p,s=0;s!==i;s++){var c=e[s];o.vmult(t[s],r),r.vadd(this.position,r),o.mult(n[s],a),c.calculateWorldAABB(r,a,g.lowerBound,g.upperBound),0===s?l.copy(g):l.extend(g)}this.aabbNeedsUpdate=!1}},{key:"updateInertiaWorld",value:function(e){var t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){var n=em,i=tm;n.setRotationFromQuaternion(this.quaternion),n.transpose(i),n.scale(t,n),n.mmult(i,this.invInertiaWorld)}else;}},{key:"applyForce",value:function(e,t){if(void 0===t&&(t=new yp),this.type===n.DYNAMIC){this.sleepState===n.SLEEPING&&this.wakeUp();var i=nm;t.cross(e,i),this.force.vadd(e,this.force),this.torque.vadd(i,this.torque)}}},{key:"applyLocalForce",value:function(e,t){if(void 0===t&&(t=new yp),this.type===n.DYNAMIC){var i=im,r=rm;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyForce(i,r)}}},{key:"applyTorque",value:function(e){this.type===n.DYNAMIC&&(this.sleepState===n.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}},{key:"applyImpulse",value:function(e,t){if(void 0===t&&(t=new yp),this.type===n.DYNAMIC){this.sleepState===n.SLEEPING&&this.wakeUp();var i=t,r=am;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);var a=om;i.cross(e,a),this.invInertiaWorld.vmult(a,a),this.angularVelocity.vadd(a,this.angularVelocity)}}},{key:"applyLocalImpulse",value:function(e,t){if(void 0===t&&(t=new yp),this.type===n.DYNAMIC){var i=lm,r=gm;this.vectorToWorldFrame(e,i),this.vectorToWorldFrame(t,r),this.applyImpulse(i,r)}}},{key:"updateMassProperties",value:function(){var e=sm;this.invMass=this.mass>0?1/this.mass:0;var t=this.inertia,n=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),Fp.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!n?1/t.x:0,t.y>0&&!n?1/t.y:0,t.z>0&&!n?1/t.z:0),this.updateInertiaWorld(!0)}},{key:"getVelocityAtWorldPoint",value:function(e,t){var n=new yp;return e.vsub(this.position,n),this.angularVelocity.cross(n,t),this.velocity.vadd(t,t),t}},{key:"integrate",value:function(e,t,i){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),(this.type===n.DYNAMIC||this.type===n.KINEMATIC)&&this.sleepState!==n.SLEEPING){var r=this.velocity,a=this.angularVelocity,o=this.position,l=this.force,g=this.torque,s=this.quaternion,c=this.invMass,u=this.invInertiaWorld,I=this.linearFactor,d=c*e;r.x+=l.x*d*I.x,r.y+=l.y*d*I.y,r.z+=l.z*d*I.z;var C=u.elements,h=this.angularFactor,A=g.x*h.x,p=g.y*h.y,m=g.z*h.z;a.x+=e*(C[0]*A+C[1]*p+C[2]*m),a.y+=e*(C[3]*A+C[4]*p+C[5]*m),a.z+=e*(C[6]*A+C[7]*p+C[8]*m),o.x+=r.x*e,o.y+=r.y*e,o.z+=r.z*e,s.integrate(this.angularVelocity,e,this.angularFactor,s),t&&(i?s.normalizeFast():s.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}}]),n}(Wp);Op.idCounter=0,Op.COLLIDE_EVENT_NAME="collide",Op.DYNAMIC=Tp,Op.STATIC=Ep,Op.KINEMATIC=Jp,Op.AWAKE=Up,Op.SLEEPY=Dp,Op.SLEEPING=Pp,Op.wakeupEvent={type:"wakeup"},Op.sleepyEvent={type:"sleepy"},Op.sleepEvent={type:"sleep"};var Qp=new yp,jp=new Vp,$p=new wp,em=new vp,tm=new vp;new vp;var nm=new yp,im=new yp,rm=new yp,am=new yp,om=new yp,lm=new yp,gm=new yp,sm=new yp;new yp,new yp,new Vp,new yp,new yp,new yp,new yp;var cm=function(){function e(){$(this,e),this.rayFromWorld=new yp,this.rayToWorld=new yp,this.hitNormalWorld=new yp,this.hitPointWorld=new yp,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}return te(e,[{key:"reset",value:function(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}},{key:"abort",value:function(){this.shouldStop=!0}},{key:"set",value:function(e,t,n,i,r,a,o){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(i),this.shape=r,this.body=a,this.distance=o}}]),e}(),um=1,Im=2,dm=4,Cm=function(e,t,n,i,r,a,o){function l(e,t){$(this,l),void 0===e&&(e=new yp),void 0===t&&(t=new yp),this.from=e.clone(),this.to=t.clone(),this.direction=new yp,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=l.ANY,this.result=new cm,this.hasHit=!1,this.callback=function(e){}}return te(l,[{key:e,get:function(){return this._intersectSphere}},{key:t,get:function(){return this._intersectPlane}},{key:n,get:function(){return this._intersectBox}},{key:i,get:function(){return this._intersectConvex}},{key:r,get:function(){return this._intersectConvex}},{key:a,get:function(){return this._intersectHeightfield}},{key:o,get:function(){return this._intersectTrimesh}},{key:"intersectWorld",value:function(e,t){return this.mode=t.mode||l.ANY,this.result=t.result||new cm,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask="undefined"!==typeof t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionFilterGroup="undefined"!==typeof t.collisionFilterGroup?t.collisionFilterGroup:-1,this.checkCollisionResponse="undefined"===typeof t.checkCollisionResponse||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||function(){},this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(hm),Am.length=0,e.broadphase.aabbQuery(e,hm,Am),this.intersectBodies(Am),this.hasHit}},{key:"intersectBody",value:function(e,t){t&&(this.result=t,this.updateDirection());var n=this.checkCollisionResponse;if((!n||e.collisionResponse)&&0!==(this.collisionFilterGroup&e.collisionFilterMask)&&0!==(e.collisionFilterGroup&this.collisionFilterMask))for(var i=fm,r=vm,a=0,o=e.shapes.length;a<o;a++){var l=e.shapes[a];if((!n||l.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[a],r),e.quaternion.vmult(e.shapeOffsets[a],i),i.vadd(e.position,i),this.intersectShape(l,r,i,e),this.result.shouldStop))break}}},{key:"intersectBodies",value:function(e,t){t&&(this.result=t,this.updateDirection());for(var n=0,i=e.length;!this.result.shouldStop&&n<i;n++)this.intersectBody(e[n])}},{key:"updateDirection",value:function(){this.to.vsub(this.from,this.direction),this.direction.normalize()}},{key:"intersectShape",value:function(e,t,n,i){var r=function(e,t,n){n.vsub(e,Fm);var i=Fm.dot(t);return t.scale(i,Lm),Lm.vadd(e,Lm),n.distanceTo(Lm)}(this.from,this.direction,n);if(!(r>e.boundingSphereRadius)){var a=this[e.type];a&&a.call(this,e,t,n,i,e)}}},{key:"_intersectBox",value:function(e,t,n,i,r){return this._intersectConvex(e.convexPolyhedronRepresentation,t,n,i,r)}},{key:"_intersectPlane",value:function(e,t,n,i,r){var a=this.from,o=this.to,l=this.direction,g=new yp(0,0,1);t.vmult(g,g);var s=new yp;a.vsub(n,s);var c=s.dot(g);if(o.vsub(n,s),!(c*s.dot(g)>0)&&!(a.distanceTo(o)<c)){var u=g.dot(l);if(!(Math.abs(u)<this.precision)){var I=new yp,d=new yp,C=new yp;a.vsub(n,I);var h=-g.dot(I)/u;l.scale(h,d),a.vadd(d,C),this.reportIntersection(g,C,r,i,-1)}}}},{key:"getAABB",value:function(e){var t=e.lowerBound,n=e.upperBound,i=this.to,r=this.from;t.x=Math.min(i.x,r.x),t.y=Math.min(i.y,r.y),t.z=Math.min(i.z,r.z),n.x=Math.max(i.x,r.x),n.y=Math.max(i.y,r.y),n.z=Math.max(i.z,r.z)}},{key:"_intersectHeightfield",value:function(e,t,n,i,r){e.data,e.elementSize;var a=xm;a.from.copy(this.from),a.to.copy(this.to),Xp.pointToLocalFrame(n,t,a.from,a.from),Xp.pointToLocalFrame(n,t,a.to,a.to),a.updateDirection();var o,l,g,s,c=Sm;o=l=0,g=s=e.data.length-1;var u=new wp;a.getAABB(u),e.getIndexOfPosition(u.lowerBound.x,u.lowerBound.y,c,!0),o=Math.max(o,c[0]),l=Math.max(l,c[1]),e.getIndexOfPosition(u.upperBound.x,u.upperBound.y,c,!0),g=Math.min(g,c[0]+1),s=Math.min(s,c[1]+1);for(var I=o;I<g;I++)for(var d=l;d<s;d++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(I,d,u),u.overlapsRay(a)){if(e.getConvexTrianglePillar(I,d,!1),Xp.pointToWorldFrame(n,t,e.pillarOffset,wm),this._intersectConvex(e.pillarConvex,t,wm,i,r,Zm),this.result.shouldStop)return;e.getConvexTrianglePillar(I,d,!0),Xp.pointToWorldFrame(n,t,e.pillarOffset,wm),this._intersectConvex(e.pillarConvex,t,wm,i,r,Zm)}}}},{key:"_intersectSphere",value:function(e,t,n,i,r){var a=this.from,o=this.to,l=e.radius,g=Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)+Math.pow(o.z-a.z,2),s=2*((o.x-a.x)*(a.x-n.x)+(o.y-a.y)*(a.y-n.y)+(o.z-a.z)*(a.z-n.z)),c=Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2)+Math.pow(a.z-n.z,2)-Math.pow(l,2),u=Math.pow(s,2)-4*g*c,I=Wm,d=Vm;if(!(u<0))if(0===u)a.lerp(o,u,I),I.vsub(n,d),d.normalize(),this.reportIntersection(d,I,r,i,-1);else{var C=(-s-Math.sqrt(u))/(2*g),h=(-s+Math.sqrt(u))/(2*g);if(C>=0&&C<=1&&(a.lerp(o,C,I),I.vsub(n,d),d.normalize(),this.reportIntersection(d,I,r,i,-1)),this.result.shouldStop)return;h>=0&&h<=1&&(a.lerp(o,h,I),I.vsub(n,d),d.normalize(),this.reportIntersection(d,I,r,i,-1))}}},{key:"_intersectConvex",value:function(e,t,n,i,r,a){for(var o=Rm,g=qm,s=a&&a.faceList||null,c=e.faces,u=e.vertices,I=e.faceNormals,d=this.direction,C=this.from,h=this.to,A=C.distanceTo(h),p=s?s.length:c.length,m=this.result,f=0;!m.shouldStop&&f<p;f++){var v=s?s[f]:f,b=c[v],y=I[v],G=t,B=n;g.copy(u[b[0]]),G.vmult(g,g),g.vadd(B,g),g.vsub(C,g),G.vmult(y,o);var Z=d.dot(o);if(!(Math.abs(Z)<this.precision)){var w=o.dot(g)/Z;if(!(w<0)){d.scale(w,bm),bm.vadd(C,bm),ym.copy(u[b[0]]),G.vmult(ym,ym),B.vadd(ym,ym);for(var x=1;!m.shouldStop&&x<b.length-1;x++){Gm.copy(u[b[x]]),Bm.copy(u[b[x+1]]),G.vmult(Gm,Gm),G.vmult(Bm,Bm),B.vadd(Gm,Gm),B.vadd(Bm,Bm);var S=bm.distanceTo(C);!l.pointInTriangle(bm,ym,Gm,Bm)&&!l.pointInTriangle(bm,Gm,ym,Bm)||S>A||this.reportIntersection(o,bm,r,i,v)}}}}}},{key:"_intersectTrimesh",value:function(e,t,n,i,r,a){var o=km,g=zm,s=Mm,c=qm,u=Xm,I=Ym,d=Nm,C=Hm,h=Km,A=e.indices;e.vertices;var p=this.from,m=this.to,f=this.direction;s.position.copy(n),s.quaternion.copy(t),Xp.vectorToLocalFrame(n,t,f,u),Xp.pointToLocalFrame(n,t,p,I),Xp.pointToLocalFrame(n,t,m,d),d.x*=e.scale.x,d.y*=e.scale.y,d.z*=e.scale.z,I.x*=e.scale.x,I.y*=e.scale.y,I.z*=e.scale.z,d.vsub(I,u),u.normalize();var v=I.distanceSquared(d);e.tree.rayQuery(this,s,g);for(var b=0,y=g.length;!this.result.shouldStop&&b!==y;b++){var G=g[b];e.getNormal(G,o),e.getVertex(A[3*G],ym),ym.vsub(I,c);var B=u.dot(o),Z=o.dot(c)/B;if(!(Z<0)){u.scale(Z,bm),bm.vadd(I,bm),e.getVertex(A[3*G+1],Gm),e.getVertex(A[3*G+2],Bm);var w=bm.distanceSquared(I);!l.pointInTriangle(bm,Gm,ym,Bm)&&!l.pointInTriangle(bm,ym,Gm,Bm)||w>v||(Xp.vectorToWorldFrame(t,o,h),Xp.pointToWorldFrame(n,t,bm,C),this.reportIntersection(h,C,r,i,G))}}g.length=0}},{key:"reportIntersection",value:function(e,t,n,i,r){var a=this.from,o=this.to,g=a.distanceTo(t),s=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(s.hitFaceIndex="undefined"!==typeof r?r:-1,this.mode){case l.ALL:this.hasHit=!0,s.set(a,o,e,t,n,i,g),s.hasHit=!0,this.callback(s);break;case l.CLOSEST:(g<s.distance||!s.hasHit)&&(this.hasHit=!0,s.hasHit=!0,s.set(a,o,e,t,n,i,g));break;case l.ANY:this.hasHit=!0,s.hasHit=!0,s.set(a,o,e,t,n,i,g),s.shouldStop=!0}}}],[{key:"pointInTriangle",value:function(e,t,n,i){i.vsub(t,Fm),n.vsub(t,pm),e.vsub(t,mm);var r,a,o=Fm.dot(Fm),l=Fm.dot(pm),g=Fm.dot(mm),s=pm.dot(pm),c=pm.dot(mm);return(r=s*g-l*c)>=0&&(a=o*c-l*g)>=0&&r+a<o*s-l*l}}]),l}(kp.types.SPHERE,kp.types.PLANE,kp.types.BOX,kp.types.CYLINDER,kp.types.CONVEXPOLYHEDRON,kp.types.HEIGHTFIELD,kp.types.TRIMESH);Cm.CLOSEST=um,Cm.ANY=Im,Cm.ALL=dm;var hm=new wp,Am=[],pm=new yp,mm=new yp,fm=new yp,vm=new Vp,bm=new yp,ym=new yp,Gm=new yp,Bm=new yp;new yp,new cm;var Zm={faceList:[0]},wm=new yp,xm=new Cm,Sm=[],Wm=new yp,Vm=new yp,Rm=new yp;new yp,new yp;var qm=new yp,km=new yp,Xm=new yp,Ym=new yp,Nm=new yp,Km=new yp,Hm=new yp;new wp;var zm=[],Mm=new Xp,Fm=new yp,Lm=new yp;new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp;var _m=te((function e(t){$(this,e),void 0===t&&(t={});var n="";"string"===typeof t&&(n=t,t={}),this.name=n,this.id=e.idCounter++,this.friction="undefined"!==typeof t.friction?t.friction:-1,this.restitution="undefined"!==typeof t.restitution?t.restitution:-1}));_m.idCounter=0,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new Cm,new yp,new yp,new yp,new yp(1,0,0),new yp(0,1,0),new yp(0,0,1),new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp;new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp;new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp;new yp,new wp,new yp,new wp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new wp,new yp,new Xp,new wp;kp.types.SPHERE,kp.types.SPHERE,kp.types.PLANE,kp.types.BOX,kp.types.BOX,kp.types.SPHERE,kp.types.BOX,kp.types.PLANE,kp.types.BOX,kp.types.CONVEXPOLYHEDRON,kp.types.SPHERE,kp.types.CONVEXPOLYHEDRON,kp.types.PLANE,kp.types.CONVEXPOLYHEDRON,kp.types.BOX,kp.types.CONVEXPOLYHEDRON,kp.types.SPHERE,kp.types.HEIGHTFIELD,kp.types.BOX,kp.types.HEIGHTFIELD,kp.types.CONVEXPOLYHEDRON,kp.types.HEIGHTFIELD,kp.types.PARTICLE,kp.types.SPHERE,kp.types.PLANE,kp.types.PARTICLE,kp.types.BOX,kp.types.PARTICLE,kp.types.PARTICLE,kp.types.CONVEXPOLYHEDRON,kp.types.CYLINDER,kp.types.SPHERE,kp.types.CYLINDER,kp.types.PLANE,kp.types.CYLINDER,kp.types.BOX,kp.types.CYLINDER,kp.types.CONVEXPOLYHEDRON,kp.types.CYLINDER,kp.types.HEIGHTFIELD,kp.types.CYLINDER,kp.types.PARTICLE,kp.types.CYLINDER,kp.types.SPHERE,kp.types.TRIMESH,kp.types.PLANE,kp.types.TRIMESH,new yp,new yp,new yp,new yp,new yp,new Vp,new Vp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new wp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new Vp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new yp,new wp,new Cm;var Tm=globalThis.performance||{};if(!Tm.now){var Em=Date.now();Tm.timing&&Tm.timing.navigationStart&&(Em=Tm.timing.navigationStart),Tm.now=function(){return Date.now()-Em}}new yp;var Jm=function(){function e(t){$(this,e),void 0===t&&(t=[0,0,0,0,0,0,0,0,0]),this.elements=t}return te(e,[{key:"identity",value:function(){var e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}},{key:"setZero",value:function(){var e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}},{key:"setTrace",value:function(e){var t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}},{key:"getTrace",value:function(e){void 0===e&&(e=new Dm);var t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}},{key:"vmult",value:function(e,t){void 0===t&&(t=new Dm);var n=this.elements,i=e.x,r=e.y,a=e.z;return t.x=n[0]*i+n[1]*r+n[2]*a,t.y=n[3]*i+n[4]*r+n[5]*a,t.z=n[6]*i+n[7]*r+n[8]*a,t}},{key:"smult",value:function(e){for(var t=0;t<this.elements.length;t++)this.elements[t]*=e}},{key:"mmult",value:function(t,n){void 0===n&&(n=new e);var i=this.elements,r=t.elements,a=n.elements,o=i[0],l=i[1],g=i[2],s=i[3],c=i[4],u=i[5],I=i[6],d=i[7],C=i[8],h=r[0],A=r[1],p=r[2],m=r[3],f=r[4],v=r[5],b=r[6],y=r[7],G=r[8];return a[0]=o*h+l*m+g*b,a[1]=o*A+l*f+g*y,a[2]=o*p+l*v+g*G,a[3]=s*h+c*m+u*b,a[4]=s*A+c*f+u*y,a[5]=s*p+c*v+u*G,a[6]=I*h+d*m+C*b,a[7]=I*A+d*f+C*y,a[8]=I*p+d*v+C*G,n}},{key:"scale",value:function(t,n){void 0===n&&(n=new e);for(var i=this.elements,r=n.elements,a=0;3!==a;a++)r[3*a+0]=t.x*i[3*a+0],r[3*a+1]=t.y*i[3*a+1],r[3*a+2]=t.z*i[3*a+2];return n}},{key:"solve",value:function(e,t){void 0===t&&(t=new Dm);var n,i,r=[];for(n=0;n<12;n++)r.push(0);for(n=0;n<3;n++)for(i=0;i<3;i++)r[n+4*i]=this.elements[n+3*i];r[3]=e.x,r[7]=e.y,r[11]=e.z;var a,o,l=3,g=l;do{if(0===r[(n=g-l)+4*n])for(i=n+1;i<g;i++)if(0!==r[n+4*i]){a=4;do{r[(o=4-a)+4*n]+=r[o+4*i]}while(--a);break}if(0!==r[n+4*n])for(i=n+1;i<g;i++){var s=r[n+4*i]/r[n+4*n];a=4;do{r[(o=4-a)+4*i]=o<=n?0:r[o+4*i]-r[o+4*n]*s}while(--a)}}while(--l);if(t.z=r[11]/r[10],t.y=(r[7]-r[6]*t.z)/r[5],t.x=(r[3]-r[2]*t.z-r[1]*t.y)/r[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw"Could not solve equation! Got x=[".concat(t.toString(),"], b=[").concat(e.toString(),"], A=[").concat(this.toString(),"]");return t}},{key:"e",value:function(e,t,n){if(void 0===n)return this.elements[t+3*e];this.elements[t+3*e]=n}},{key:"copy",value:function(e){for(var t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}},{key:"toString",value:function(){for(var e="",t=0;t<9;t++)e+=this.elements[t]+",";return e}},{key:"reverse",value:function(t){void 0===t&&(t=new e);var n,i,r=Um;for(n=0;n<3;n++)for(i=0;i<3;i++)r[n+6*i]=this.elements[n+3*i];r[3]=1,r[9]=0,r[15]=0,r[4]=0,r[10]=1,r[16]=0,r[5]=0,r[11]=0,r[17]=1;var a,o,l=3,g=l;do{if(0===r[(n=g-l)+6*n])for(i=n+1;i<g;i++)if(0!==r[n+6*i]){a=6;do{r[(o=6-a)+6*n]+=r[o+6*i]}while(--a);break}if(0!==r[n+6*n])for(i=n+1;i<g;i++){var s=r[n+6*i]/r[n+6*n];a=6;do{r[(o=6-a)+6*i]=o<=n?0:r[o+6*i]-r[o+6*n]*s}while(--a)}}while(--l);n=2;do{i=n-1;do{var c=r[n+6*i]/r[n+6*n];a=6;do{r[(o=6-a)+6*i]=r[o+6*i]-r[o+6*n]*c}while(--a)}while(i--)}while(--n);n=2;do{var u=1/r[n+6*n];a=6;do{r[(o=6-a)+6*n]=r[o+6*n]*u}while(--a)}while(n--);n=2;do{i=2;do{if(o=r[3+i+6*n],isNaN(o)||o===1/0)throw"Could not reverse! A=[".concat(this.toString(),"]");t.e(n,i,o)}while(i--)}while(n--);return t}},{key:"setRotationFromQuaternion",value:function(e){var t=e.x,n=e.y,i=e.z,r=e.w,a=t+t,o=n+n,l=i+i,g=t*a,s=t*o,c=t*l,u=n*o,I=n*l,d=i*l,C=r*a,h=r*o,A=r*l,p=this.elements;return p[0]=1-(u+d),p[1]=s-A,p[2]=c+h,p[3]=s+A,p[4]=1-(g+d),p[5]=I-C,p[6]=c-h,p[7]=I+C,p[8]=1-(g+u),this}},{key:"transpose",value:function(t){void 0===t&&(t=new e);var n,i=this.elements,r=t.elements;return r[0]=i[0],r[4]=i[4],r[8]=i[8],n=i[1],r[1]=i[3],r[3]=n,n=i[2],r[2]=i[6],r[6]=n,n=i[5],r[5]=i[7],r[7]=n,t}}]),e}(),Um=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Dm=function(){function e(t,n,i){$(this,e),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),this.x=t,this.y=n,this.z=i}return te(e,[{key:"cross",value:function(t,n){void 0===n&&(n=new e);var i=t.x,r=t.y,a=t.z,o=this.x,l=this.y,g=this.z;return n.x=l*a-g*r,n.y=g*i-o*a,n.z=o*r-l*i,n}},{key:"set",value:function(e,t,n){return this.x=e,this.y=t,this.z=n,this}},{key:"setZero",value:function(){this.x=this.y=this.z=0}},{key:"vadd",value:function(t,n){if(!n)return new e(this.x+t.x,this.y+t.y,this.z+t.z);n.x=t.x+this.x,n.y=t.y+this.y,n.z=t.z+this.z}},{key:"vsub",value:function(t,n){if(!n)return new e(this.x-t.x,this.y-t.y,this.z-t.z);n.x=this.x-t.x,n.y=this.y-t.y,n.z=this.z-t.z}},{key:"crossmat",value:function(){return new Jm([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}},{key:"normalize",value:function(){var e=this.x,t=this.y,n=this.z,i=Math.sqrt(e*e+t*t+n*n);if(i>0){var r=1/i;this.x*=r,this.y*=r,this.z*=r}else this.x=0,this.y=0,this.z=0;return i}},{key:"unit",value:function(t){void 0===t&&(t=new e);var n=this.x,i=this.y,r=this.z,a=Math.sqrt(n*n+i*i+r*r);return a>0?(a=1/a,t.x=n*a,t.y=i*a,t.z=r*a):(t.x=1,t.y=0,t.z=0),t}},{key:"length",value:function(){var e=this.x,t=this.y,n=this.z;return Math.sqrt(e*e+t*t+n*n)}},{key:"lengthSquared",value:function(){return this.dot(this)}},{key:"distanceTo",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z;return Math.sqrt((r-t)*(r-t)+(a-n)*(a-n)+(o-i)*(o-i))}},{key:"distanceSquared",value:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z;return(r-t)*(r-t)+(a-n)*(a-n)+(o-i)*(o-i)}},{key:"scale",value:function(t,n){void 0===n&&(n=new e);var i=this.x,r=this.y,a=this.z;return n.x=t*i,n.y=t*r,n.z=t*a,n}},{key:"vmul",value:function(t,n){return void 0===n&&(n=new e),n.x=t.x*this.x,n.y=t.y*this.y,n.z=t.z*this.z,n}},{key:"addScaledVector",value:function(t,n,i){return void 0===i&&(i=new e),i.x=this.x+t*n.x,i.y=this.y+t*n.y,i.z=this.z+t*n.z,i}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"isZero",value:function(){return 0===this.x&&0===this.y&&0===this.z}},{key:"negate",value:function(t){return void 0===t&&(t=new e),t.x=-this.x,t.y=-this.y,t.z=-this.z,t}},{key:"tangents",value:function(e,t){var n=this.length();if(n>0){var i=Pm,r=1/n;i.set(this.x*r,this.y*r,this.z*r);var a=Om;Math.abs(i.x)<.9?(a.set(1,0,0),i.cross(a,e)):(a.set(0,1,0),i.cross(a,e)),i.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y,",").concat(this.z)}},{key:"toArray",value:function(){return[this.x,this.y,this.z]}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"lerp",value:function(e,t,n){var i=this.x,r=this.y,a=this.z;n.x=i+(e.x-i)*t,n.y=r+(e.y-r)*t,n.z=a+(e.z-a)*t}},{key:"almostEquals",value:function(e,t){return void 0===t&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}},{key:"almostZero",value:function(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}},{key:"isAntiparallelTo",value:function(e,t){return this.negate(Qm),Qm.almostEquals(e,t)}},{key:"clone",value:function(){return new e(this.x,this.y,this.z)}}]),e}();Dm.ZERO=new Dm(0,0,0),Dm.UNIT_X=new Dm(1,0,0),Dm.UNIT_Y=new Dm(0,1,0),Dm.UNIT_Z=new Dm(0,0,1);var Pm=new Dm,Om=new Dm,Qm=new Dm,jm=function(){function e(t){$(this,e),void 0===t&&(t={}),this.lowerBound=new Dm,this.upperBound=new Dm,t.lowerBound&&this.lowerBound.copy(t.lowerBound),t.upperBound&&this.upperBound.copy(t.upperBound)}return te(e,[{key:"setFromPoints",value:function(e,t,n,i){var r=this.lowerBound,a=this.upperBound,o=n;r.copy(e[0]),o&&o.vmult(r,r),a.copy(r);for(var l=1;l<e.length;l++){var g=e[l];o&&(o.vmult(g,$m),g=$m),g.x>a.x&&(a.x=g.x),g.x<r.x&&(r.x=g.x),g.y>a.y&&(a.y=g.y),g.y<r.y&&(r.y=g.y),g.z>a.z&&(a.z=g.z),g.z<r.z&&(r.z=g.z)}return t&&(t.vadd(r,r),t.vadd(a,a)),i&&(r.x-=i,r.y-=i,r.z-=i,a.x+=i,a.y+=i,a.z+=i),this}},{key:"copy",value:function(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}},{key:"clone",value:function(){return(new e).copy(this)}},{key:"extend",value:function(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}},{key:"overlaps",value:function(e){var t=this.lowerBound,n=this.upperBound,i=e.lowerBound,r=e.upperBound,a=i.x<=n.x&&n.x<=r.x||t.x<=r.x&&r.x<=n.x,o=i.y<=n.y&&n.y<=r.y||t.y<=r.y&&r.y<=n.y,l=i.z<=n.z&&n.z<=r.z||t.z<=r.z&&r.z<=n.z;return a&&o&&l}},{key:"volume",value:function(){var e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}},{key:"contains",value:function(e){var t=this.lowerBound,n=this.upperBound,i=e.lowerBound,r=e.upperBound;return t.x<=i.x&&n.x>=r.x&&t.y<=i.y&&n.y>=r.y&&t.z<=i.z&&n.z>=r.z}},{key:"getCorners",value:function(e,t,n,i,r,a,o,l){var g=this.lowerBound,s=this.upperBound;e.copy(g),t.set(s.x,g.y,g.z),n.set(s.x,s.y,g.z),i.set(g.x,s.y,s.z),r.set(s.x,g.y,s.z),a.set(g.x,s.y,g.z),o.set(g.x,g.y,s.z),l.copy(s)}},{key:"toLocalFrame",value:function(e,t){var n=ef,i=n[0],r=n[1],a=n[2],o=n[3],l=n[4],g=n[5],s=n[6],c=n[7];this.getCorners(i,r,a,o,l,g,s,c);for(var u=0;8!==u;u++){var I=n[u];e.pointToLocal(I,I)}return t.setFromPoints(n)}},{key:"toWorldFrame",value:function(e,t){var n=ef,i=n[0],r=n[1],a=n[2],o=n[3],l=n[4],g=n[5],s=n[6],c=n[7];this.getCorners(i,r,a,o,l,g,s,c);for(var u=0;8!==u;u++){var I=n[u];e.pointToWorld(I,I)}return t.setFromPoints(n)}},{key:"overlapsRay",value:function(e){var t=e.direction,n=e.from,i=1/t.x,r=1/t.y,a=1/t.z,o=(this.lowerBound.x-n.x)*i,l=(this.upperBound.x-n.x)*i,g=(this.lowerBound.y-n.y)*r,s=(this.upperBound.y-n.y)*r,c=(this.lowerBound.z-n.z)*a,u=(this.upperBound.z-n.z)*a,I=Math.max(Math.max(Math.min(o,l),Math.min(g,s)),Math.min(c,u)),d=Math.min(Math.min(Math.max(o,l),Math.max(g,s)),Math.max(c,u));return!(d<0)&&!(I>d)}}]),e}(),$m=new Dm,ef=[new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm],tf=function(){function e(t,n,i,r){$(this,e),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=1),this.x=t,this.y=n,this.z=i,this.w=r}return te(e,[{key:"set",value:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}},{key:"toString",value:function(){return"".concat(this.x,",").concat(this.y,",").concat(this.z,",").concat(this.w)}},{key:"toArray",value:function(){return[this.x,this.y,this.z,this.w]}},{key:"setFromAxisAngle",value:function(e,t){var n=Math.sin(.5*t);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(.5*t),this}},{key:"toAxisAngle",value:function(e){void 0===e&&(e=new Dm),this.normalize();var t=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/n,e.y=this.y/n,e.z=this.z/n),[e,t]}},{key:"setFromVectors",value:function(e,t){if(e.isAntiparallelTo(t)){var n=nf,i=rf;e.tangents(n,i),this.setFromAxisAngle(n,Math.PI)}else{var r=e.cross(t);this.x=r.x,this.y=r.y,this.z=r.z,this.w=Math.sqrt(Math.pow(e.length(),2)*Math.pow(t.length(),2))+e.dot(t),this.normalize()}return this}},{key:"mult",value:function(t,n){void 0===n&&(n=new e);var i=this.x,r=this.y,a=this.z,o=this.w,l=t.x,g=t.y,s=t.z,c=t.w;return n.x=i*c+o*l+r*s-a*g,n.y=r*c+o*g+a*l-i*s,n.z=a*c+o*s+i*g-r*l,n.w=o*c-i*l-r*g-a*s,n}},{key:"inverse",value:function(t){void 0===t&&(t=new e);var n=this.x,i=this.y,r=this.z,a=this.w;this.conjugate(t);var o=1/(n*n+i*i+r*r+a*a);return t.x*=o,t.y*=o,t.z*=o,t.w*=o,t}},{key:"conjugate",value:function(t){return void 0===t&&(t=new e),t.x=-this.x,t.y=-this.y,t.z=-this.z,t.w=this.w,t}},{key:"normalize",value:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:"normalizeFast",value:function(){var e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}},{key:"vmult",value:function(e,t){void 0===t&&(t=new Dm);var n=e.x,i=e.y,r=e.z,a=this.x,o=this.y,l=this.z,g=this.w,s=g*n+o*r-l*i,c=g*i+l*n-a*r,u=g*r+a*i-o*n,I=-a*n-o*i-l*r;return t.x=s*g+I*-a+c*-l-u*-o,t.y=c*g+I*-o+u*-a-s*-l,t.z=u*g+I*-l+s*-o-c*-a,t}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}},{key:"toEuler",value:function(e,t){var n,i,r;void 0===t&&(t="YZX");var a=this.x,o=this.y,l=this.z,g=this.w;if("YZX"!==t)throw new Error("Euler order ".concat(t," not supported yet."));var s=a*o+l*g;if(s>.499&&(n=2*Math.atan2(a,g),i=Math.PI/2,r=0),s<-.499&&(n=-2*Math.atan2(a,g),i=-Math.PI/2,r=0),void 0===n){var c=a*a,u=o*o,I=l*l;n=Math.atan2(2*o*g-2*a*l,1-2*u-2*I),i=Math.asin(2*s),r=Math.atan2(2*a*g-2*o*l,1-2*c-2*I)}e.y=n,e.z=i,e.x=r}},{key:"setFromEuler",value:function(e,t,n,i){void 0===i&&(i="XYZ");var r=Math.cos(e/2),a=Math.cos(t/2),o=Math.cos(n/2),l=Math.sin(e/2),g=Math.sin(t/2),s=Math.sin(n/2);return"XYZ"===i?(this.x=l*a*o+r*g*s,this.y=r*g*o-l*a*s,this.z=r*a*s+l*g*o,this.w=r*a*o-l*g*s):"YXZ"===i?(this.x=l*a*o+r*g*s,this.y=r*g*o-l*a*s,this.z=r*a*s-l*g*o,this.w=r*a*o+l*g*s):"ZXY"===i?(this.x=l*a*o-r*g*s,this.y=r*g*o+l*a*s,this.z=r*a*s+l*g*o,this.w=r*a*o-l*g*s):"ZYX"===i?(this.x=l*a*o-r*g*s,this.y=r*g*o+l*a*s,this.z=r*a*s-l*g*o,this.w=r*a*o+l*g*s):"YZX"===i?(this.x=l*a*o+r*g*s,this.y=r*g*o+l*a*s,this.z=r*a*s-l*g*o,this.w=r*a*o-l*g*s):"XZY"===i&&(this.x=l*a*o-r*g*s,this.y=r*g*o-l*a*s,this.z=r*a*s+l*g*o,this.w=r*a*o+l*g*s),this}},{key:"clone",value:function(){return new e(this.x,this.y,this.z,this.w)}},{key:"slerp",value:function(t,n,i){void 0===i&&(i=new e);var r,a,o,l,g,s=this.x,c=this.y,u=this.z,I=this.w,d=t.x,C=t.y,h=t.z,A=t.w;return(a=s*d+c*C+u*h+I*A)<0&&(a=-a,d=-d,C=-C,h=-h,A=-A),1-a>1e-6?(r=Math.acos(a),o=Math.sin(r),l=Math.sin((1-n)*r)/o,g=Math.sin(n*r)/o):(l=1-n,g=n),i.x=l*s+g*d,i.y=l*c+g*C,i.z=l*u+g*h,i.w=l*I+g*A,i}},{key:"integrate",value:function(t,n,i,r){void 0===r&&(r=new e);var a=t.x*i.x,o=t.y*i.y,l=t.z*i.z,g=this.x,s=this.y,c=this.z,u=this.w,I=.5*n;return r.x+=I*(a*u+o*c-l*s),r.y+=I*(o*u+l*g-a*c),r.z+=I*(l*u+a*s-o*g),r.w+=I*(-a*g-o*s-l*c),r}}]),e}(),nf=new Dm,rf=new Dm,af=function(){function e(t){$(this,e),void 0===t&&(t={}),this.id=e.idCounter++,this.type=t.type||0,this.boundingSphereRadius=0,this.collisionResponse=!t.collisionResponse||t.collisionResponse,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:1,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.material=t.material?t.material:null,this.body=null}return te(e,[{key:"updateBoundingSphereRadius",value:function(){throw"computeBoundingSphereRadius() not implemented for shape type ".concat(this.type)}},{key:"volume",value:function(){throw"volume() not implemented for shape type ".concat(this.type)}},{key:"calculateLocalInertia",value:function(e,t){throw"calculateLocalInertia() not implemented for shape type ".concat(this.type)}},{key:"calculateWorldAABB",value:function(e,t,n,i){throw"calculateWorldAABB() not implemented for shape type ".concat(this.type)}}]),e}();af.idCounter=0,af.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};var of=function(){function e(t){$(this,e),void 0===t&&(t={}),this.position=new Dm,this.quaternion=new tf,t.position&&this.position.copy(t.position),t.quaternion&&this.quaternion.copy(t.quaternion)}return te(e,[{key:"pointToLocal",value:function(t,n){return e.pointToLocalFrame(this.position,this.quaternion,t,n)}},{key:"pointToWorld",value:function(t,n){return e.pointToWorldFrame(this.position,this.quaternion,t,n)}},{key:"vectorToWorldFrame",value:function(e,t){return void 0===t&&(t=new Dm),this.quaternion.vmult(e,t),t}}],[{key:"pointToLocalFrame",value:function(e,t,n,i){return void 0===i&&(i=new Dm),n.vsub(e,i),t.conjugate(lf),lf.vmult(i,i),i}},{key:"pointToWorldFrame",value:function(e,t,n,i){return void 0===i&&(i=new Dm),t.vmult(n,i),i.vadd(e,i),i}},{key:"vectorToWorldFrame",value:function(e,t,n){return void 0===n&&(n=new Dm),e.vmult(t,n),n}},{key:"vectorToLocalFrame",value:function(e,t,n,i){return void 0===i&&(i=new Dm),t.w*=-1,t.vmult(n,i),t.w*=-1,i}}]),e}(),lf=new tf;new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new tf,new jm,new Jm,new Jm,new Jm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new tf,new Dm,new Dm,new Dm,new Dm;var gf=function(){function e(){$(this,e),this.rayFromWorld=new Dm,this.rayToWorld=new Dm,this.hitNormalWorld=new Dm,this.hitPointWorld=new Dm,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}return te(e,[{key:"reset",value:function(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}},{key:"abort",value:function(){this.shouldStop=!0}},{key:"set",value:function(e,t,n,i,r,a,o){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(i),this.shape=r,this.body=a,this.distance=o}}]),e}(),sf=1,cf=2,uf=4,If=function(e,t,n,i,r,a,o){function l(e,t){$(this,l),void 0===e&&(e=new Dm),void 0===t&&(t=new Dm),this.from=e.clone(),this.to=t.clone(),this.direction=new Dm,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=l.ANY,this.result=new gf,this.hasHit=!1,this.callback=function(e){}}return te(l,[{key:e,get:function(){return this._intersectSphere}},{key:t,get:function(){return this._intersectPlane}},{key:n,get:function(){return this._intersectBox}},{key:i,get:function(){return this._intersectConvex}},{key:r,get:function(){return this._intersectConvex}},{key:a,get:function(){return this._intersectHeightfield}},{key:o,get:function(){return this._intersectTrimesh}},{key:"intersectWorld",value:function(e,t){return this.mode=t.mode||l.ANY,this.result=t.result||new gf,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask="undefined"!==typeof t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionFilterGroup="undefined"!==typeof t.collisionFilterGroup?t.collisionFilterGroup:-1,this.checkCollisionResponse="undefined"===typeof t.checkCollisionResponse||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||function(){},this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(df),Cf.length=0,e.broadphase.aabbQuery(e,df,Cf),this.intersectBodies(Cf),this.hasHit}},{key:"intersectBody",value:function(e,t){t&&(this.result=t,this.updateDirection());var n=this.checkCollisionResponse;if((!n||e.collisionResponse)&&0!==(this.collisionFilterGroup&e.collisionFilterMask)&&0!==(e.collisionFilterGroup&this.collisionFilterMask))for(var i=pf,r=mf,a=0,o=e.shapes.length;a<o;a++){var l=e.shapes[a];if((!n||l.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[a],r),e.quaternion.vmult(e.shapeOffsets[a],i),i.vadd(e.position,i),this.intersectShape(l,r,i,e),this.result.shouldStop))break}}},{key:"intersectBodies",value:function(e,t){t&&(this.result=t,this.updateDirection());for(var n=0,i=e.length;!this.result.shouldStop&&n<i;n++)this.intersectBody(e[n])}},{key:"updateDirection",value:function(){this.to.vsub(this.from,this.direction),this.direction.normalize()}},{key:"intersectShape",value:function(e,t,n,i){var r=function(e,t,n){n.vsub(e,zf);var i=zf.dot(t);return t.scale(i,Mf),Mf.vadd(e,Mf),n.distanceTo(Mf)}(this.from,this.direction,n);if(!(r>e.boundingSphereRadius)){var a=this[e.type];a&&a.call(this,e,t,n,i,e)}}},{key:"_intersectBox",value:function(e,t,n,i,r){return this._intersectConvex(e.convexPolyhedronRepresentation,t,n,i,r)}},{key:"_intersectPlane",value:function(e,t,n,i,r){var a=this.from,o=this.to,l=this.direction,g=new Dm(0,0,1);t.vmult(g,g);var s=new Dm;a.vsub(n,s);var c=s.dot(g);if(o.vsub(n,s),!(c*s.dot(g)>0)&&!(a.distanceTo(o)<c)){var u=g.dot(l);if(!(Math.abs(u)<this.precision)){var I=new Dm,d=new Dm,C=new Dm;a.vsub(n,I);var h=-g.dot(I)/u;l.scale(h,d),a.vadd(d,C),this.reportIntersection(g,C,r,i,-1)}}}},{key:"getAABB",value:function(e){var t=e.lowerBound,n=e.upperBound,i=this.to,r=this.from;t.x=Math.min(i.x,r.x),t.y=Math.min(i.y,r.y),t.z=Math.min(i.z,r.z),n.x=Math.max(i.x,r.x),n.y=Math.max(i.y,r.y),n.z=Math.max(i.z,r.z)}},{key:"_intersectHeightfield",value:function(e,t,n,i,r){e.data,e.elementSize;var a=Zf;a.from.copy(this.from),a.to.copy(this.to),of.pointToLocalFrame(n,t,a.from,a.from),of.pointToLocalFrame(n,t,a.to,a.to),a.updateDirection();var o,l,g,s,c=wf;o=l=0,g=s=e.data.length-1;var u=new jm;a.getAABB(u),e.getIndexOfPosition(u.lowerBound.x,u.lowerBound.y,c,!0),o=Math.max(o,c[0]),l=Math.max(l,c[1]),e.getIndexOfPosition(u.upperBound.x,u.upperBound.y,c,!0),g=Math.min(g,c[0]+1),s=Math.min(s,c[1]+1);for(var I=o;I<g;I++)for(var d=l;d<s;d++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(I,d,u),u.overlapsRay(a)){if(e.getConvexTrianglePillar(I,d,!1),of.pointToWorldFrame(n,t,e.pillarOffset,Bf),this._intersectConvex(e.pillarConvex,t,Bf,i,r,Gf),this.result.shouldStop)return;e.getConvexTrianglePillar(I,d,!0),of.pointToWorldFrame(n,t,e.pillarOffset,Bf),this._intersectConvex(e.pillarConvex,t,Bf,i,r,Gf)}}}},{key:"_intersectSphere",value:function(e,t,n,i,r){var a=this.from,o=this.to,l=e.radius,g=Math.pow(o.x-a.x,2)+Math.pow(o.y-a.y,2)+Math.pow(o.z-a.z,2),s=2*((o.x-a.x)*(a.x-n.x)+(o.y-a.y)*(a.y-n.y)+(o.z-a.z)*(a.z-n.z)),c=Math.pow(a.x-n.x,2)+Math.pow(a.y-n.y,2)+Math.pow(a.z-n.z,2)-Math.pow(l,2),u=Math.pow(s,2)-4*g*c,I=xf,d=Sf;if(!(u<0))if(0===u)a.lerp(o,u,I),I.vsub(n,d),d.normalize(),this.reportIntersection(d,I,r,i,-1);else{var C=(-s-Math.sqrt(u))/(2*g),h=(-s+Math.sqrt(u))/(2*g);if(C>=0&&C<=1&&(a.lerp(o,C,I),I.vsub(n,d),d.normalize(),this.reportIntersection(d,I,r,i,-1)),this.result.shouldStop)return;h>=0&&h<=1&&(a.lerp(o,h,I),I.vsub(n,d),d.normalize(),this.reportIntersection(d,I,r,i,-1))}}},{key:"_intersectConvex",value:function(e,t,n,i,r,a){for(var o=Wf,g=Vf,s=a&&a.faceList||null,c=e.faces,u=e.vertices,I=e.faceNormals,d=this.direction,C=this.from,h=this.to,A=C.distanceTo(h),p=s?s.length:c.length,m=this.result,f=0;!m.shouldStop&&f<p;f++){var v=s?s[f]:f,b=c[v],y=I[v],G=t,B=n;g.copy(u[b[0]]),G.vmult(g,g),g.vadd(B,g),g.vsub(C,g),G.vmult(y,o);var Z=d.dot(o);if(!(Math.abs(Z)<this.precision)){var w=o.dot(g)/Z;if(!(w<0)){d.scale(w,ff),ff.vadd(C,ff),vf.copy(u[b[0]]),G.vmult(vf,vf),B.vadd(vf,vf);for(var x=1;!m.shouldStop&&x<b.length-1;x++){bf.copy(u[b[x]]),yf.copy(u[b[x+1]]),G.vmult(bf,bf),G.vmult(yf,yf),B.vadd(bf,bf),B.vadd(yf,yf);var S=ff.distanceTo(C);!l.pointInTriangle(ff,vf,bf,yf)&&!l.pointInTriangle(ff,bf,vf,yf)||S>A||this.reportIntersection(o,ff,r,i,v)}}}}}},{key:"_intersectTrimesh",value:function(e,t,n,i,r,a){var o=Rf,g=Kf,s=Hf,c=Vf,u=qf,I=kf,d=Xf,C=Nf,h=Yf,A=e.indices;e.vertices;var p=this.from,m=this.to,f=this.direction;s.position.copy(n),s.quaternion.copy(t),of.vectorToLocalFrame(n,t,f,u),of.pointToLocalFrame(n,t,p,I),of.pointToLocalFrame(n,t,m,d),d.x*=e.scale.x,d.y*=e.scale.y,d.z*=e.scale.z,I.x*=e.scale.x,I.y*=e.scale.y,I.z*=e.scale.z,d.vsub(I,u),u.normalize();var v=I.distanceSquared(d);e.tree.rayQuery(this,s,g);for(var b=0,y=g.length;!this.result.shouldStop&&b!==y;b++){var G=g[b];e.getNormal(G,o),e.getVertex(A[3*G],vf),vf.vsub(I,c);var B=u.dot(o),Z=o.dot(c)/B;if(!(Z<0)){u.scale(Z,ff),ff.vadd(I,ff),e.getVertex(A[3*G+1],bf),e.getVertex(A[3*G+2],yf);var w=ff.distanceSquared(I);!l.pointInTriangle(ff,bf,vf,yf)&&!l.pointInTriangle(ff,vf,bf,yf)||w>v||(of.vectorToWorldFrame(t,o,h),of.pointToWorldFrame(n,t,ff,C),this.reportIntersection(h,C,r,i,G))}}g.length=0}},{key:"reportIntersection",value:function(e,t,n,i,r){var a=this.from,o=this.to,g=a.distanceTo(t),s=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(s.hitFaceIndex="undefined"!==typeof r?r:-1,this.mode){case l.ALL:this.hasHit=!0,s.set(a,o,e,t,n,i,g),s.hasHit=!0,this.callback(s);break;case l.CLOSEST:(g<s.distance||!s.hasHit)&&(this.hasHit=!0,s.hasHit=!0,s.set(a,o,e,t,n,i,g));break;case l.ANY:this.hasHit=!0,s.hasHit=!0,s.set(a,o,e,t,n,i,g),s.shouldStop=!0}}}],[{key:"pointInTriangle",value:function(e,t,n,i){i.vsub(t,zf),n.vsub(t,hf),e.vsub(t,Af);var r,a,o=zf.dot(zf),l=zf.dot(hf),g=zf.dot(Af),s=hf.dot(hf),c=hf.dot(Af);return(r=s*g-l*c)>=0&&(a=o*c-l*g)>=0&&r+a<o*s-l*l}}]),l}(af.types.SPHERE,af.types.PLANE,af.types.BOX,af.types.CYLINDER,af.types.CONVEXPOLYHEDRON,af.types.HEIGHTFIELD,af.types.TRIMESH);If.CLOSEST=sf,If.ANY=cf,If.ALL=uf;var df=new jm,Cf=[],hf=new Dm,Af=new Dm,pf=new Dm,mf=new tf,ff=new Dm,vf=new Dm,bf=new Dm,yf=new Dm;new Dm,new gf;var Gf={faceList:[0]},Bf=new Dm,Zf=new If,wf=[],xf=new Dm,Sf=new Dm,Wf=new Dm;new Dm,new Dm;var Vf=new Dm,Rf=new Dm,qf=new Dm,kf=new Dm,Xf=new Dm,Yf=new Dm,Nf=new Dm;new jm;var Kf=[],Hf=new of,zf=new Dm,Mf=new Dm;new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new If,new Dm,new Dm,new Dm,new Dm(1,0,0),new Dm(0,1,0),new Dm(0,0,1),new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new jm,new Dm,new jm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new jm,new Dm,new of,new jm,af.types.SPHERE,af.types.SPHERE,af.types.PLANE,af.types.BOX,af.types.BOX,af.types.SPHERE,af.types.BOX,af.types.PLANE,af.types.BOX,af.types.CONVEXPOLYHEDRON,af.types.SPHERE,af.types.CONVEXPOLYHEDRON,af.types.PLANE,af.types.CONVEXPOLYHEDRON,af.types.BOX,af.types.CONVEXPOLYHEDRON,af.types.SPHERE,af.types.HEIGHTFIELD,af.types.BOX,af.types.HEIGHTFIELD,af.types.CONVEXPOLYHEDRON,af.types.HEIGHTFIELD,af.types.PARTICLE,af.types.SPHERE,af.types.PLANE,af.types.PARTICLE,af.types.BOX,af.types.PARTICLE,af.types.PARTICLE,af.types.CONVEXPOLYHEDRON,af.types.CYLINDER,af.types.SPHERE,af.types.CYLINDER,af.types.PLANE,af.types.CYLINDER,af.types.BOX,af.types.CYLINDER,af.types.CONVEXPOLYHEDRON,af.types.CYLINDER,af.types.HEIGHTFIELD,af.types.CYLINDER,af.types.PARTICLE,af.types.CYLINDER,af.types.SPHERE,af.types.TRIMESH,af.types.PLANE,af.types.TRIMESH,new Dm,new Dm,new Dm,new Dm,new Dm,new tf,new tf,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new jm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new tf,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new Dm,new jm,new If;var Ff=globalThis.performance||{};if(!Ff.now){var Lf=Date.now();Ff.timing&&Ff.timing.navigationStart&&(Lf=Ff.timing.navigationStart),Ff.now=function(){return Date.now()-Lf}}new Dm;var _f=(0,i.createContext)(null);new Ar,new pr(1,1,1),new pr,new Dr;new fa;new ra,new Ar;var Tf=new pr,Ef=new pr(1,1,1),Jf=new Ar,Uf=new Dr;function Df(e,t,n,i,r){return void 0===i&&(i=Ef),void 0!==e?(Uf.compose(Tf.fromArray(t,3*e),Jf.fromArray(n,4*e),i),r&&(r.matrixAutoUpdate=!1,r.matrix.copy(Uf)),Uf):Uf.identity()}function Pf(e){var t=e.allowSleep,n=void 0!==t&&t,r=e.axisIndex,a=void 0===r?0:r,o=e.broadphase,l=void 0===o?"Naive":o,g=e.children,s=e.defaultContactMaterial,u=void 0===s?{contactEquationStiffness:1e6}:s,I=e.frictionGravity,d=void 0===I?null:I,C=e.gravity,h=void 0===C?[0,-9.81,0]:C,A=e.isPaused,p=void 0!==A&&A,m=e.iterations,f=void 0===m?5:m,v=e.maxSubSteps,b=void 0===v?10:v,y=e.quatNormalizeFast,G=void 0!==y&&y,B=e.quatNormalizeSkip,Z=void 0===B?0:B,w=e.shouldInvalidate,x=void 0===w||w,S=e.size,W=void 0===S?1e3:S,V=e.solver,R=void 0===V?"GS":V,q=e.stepSize,k=void 0===q?1/60:q,X=e.tolerance,Y=void 0===X?.001:X,N=fA().invalidate,K=c((0,i.useState)((function(){return{bodies:{},events:{},refs:{},scaleOverrides:{},subscriptions:{},worker:new fp({allowSleep:n,axisIndex:a,broadphase:l,defaultContactMaterial:u,frictionGravity:d,gravity:h,iterations:f,quatNormalizeFast:G,quatNormalizeSkip:Z,size:W,solver:R,tolerance:Y})}})),1)[0],H=K.bodies,z=K.events,M=K.refs,F=K.scaleOverrides,L=K.subscriptions,_=K.worker,E=0,J=(0,i.useCallback)((function(e,t){p||(E+=t,_.step({maxSubSteps:b,stepSize:k,timeSinceLastCalled:E}),E=0)}),[p,b,k]),U=function(e){var t,n=e.body,i=e.contact,r=i.bi,a=i.bj,o=j(i,QA),l=e.target,g=j(e,jA),s=null==(t=z[l])?void 0:t.collide;s&&s(T({body:M[n],contact:T({bi:M[r],bj:M[a]},o),target:M[l]},g))},D=function(e){var t,n,i=e.bodyA,r=e.bodyB,a=null==(t=z[i])?void 0:t.collideBegin;a&&a({body:M[r],op:"event",target:M[i],type:"collideBegin"});var o=null==(n=z[r])?void 0:n.collideBegin;o&&o({body:M[i],op:"event",target:M[r],type:"collideBegin"})},P=function(e){var t,n,i=e.bodyA,r=e.bodyB,a=null==(t=z[i])?void 0:t.collideEnd;a&&a({body:M[r],op:"event",target:M[i],type:"collideEnd"});var o=null==(n=z[r])?void 0:n.collideEnd;o&&o({body:M[i],op:"event",target:M[r],type:"collideEnd"})},O=function(e){for(var t=e.active,n=e.bodies,i=void 0===n?[]:n,r=e.observations,a=e.positions,o=e.quaternions,l=0;l<i.length;l++)H[i[l]]=l;if(r.forEach((function(e){var t=c(e,3),n=t[0],i=t[1],r=t[2],a=(L[n]||{})[r];a&&a(i)})),t){for(var g=0,s=Object.values(M);g<s.length;g++){var u=s[g];if(u instanceof ac)for(var I=0;I<u.count;I++){var d="".concat(u.uuid,"/").concat(I),C=H[d];void 0!==C&&(u.setMatrixAt(I,Df(C,a,o,F[d])),u.instanceMatrix.needsUpdate=!0)}else{var h=F[u.uuid]||u.scale;Df(H[u.uuid],a,o,h,u)}}x&&N()}},Q=function(e){var t,n=e.body,i=e.ray,r=i.uuid,a=j(i,$A),o=j(e,ep),l=null==(t=z[r])?void 0:t.rayhit;l&&l(T({body:n?M[n]:null,ray:T({uuid:r},a)},o))};vA(J),(0,i.useEffect)((function(){return _.connect(),_.init(),_.on("collide",U),_.on("collideBegin",D),_.on("collideEnd",P),_.on("frame",O),_.on("rayhit",Q),function(){_.terminate(),_.removeAllListeners()}}),[]),(0,i.useEffect)((function(){_.axisIndex=a}),[a]),(0,i.useEffect)((function(){_.broadphase=l}),[l]),(0,i.useEffect)((function(){_.gravity=h}),[h]),(0,i.useEffect)((function(){_.iterations=f}),[f]),(0,i.useEffect)((function(){_.tolerance=Y}),[Y]);var $=(0,i.useMemo)((function(){return{bodies:H,events:z,refs:M,scaleOverrides:F,subscriptions:L,worker:_}}),[H,z,M,L,_]);return(0,OA.jsx)(_f.Provider,{value:$,children:g})}var Of=function(e){return e===Object(e)&&!Array.isArray(e)&&"function"!==typeof e};function Qf(e,t){var n=fA((function(e){return e.gl})),r=yA(LI,Of(e)?Object.values(e):e);if((0,i.useLayoutEffect)((function(){null==t||t(r)}),[t]),(0,i.useEffect)((function(){(Array.isArray(r)?r:[r]).forEach(n.initTexture)}),[n,r]),Of(e)){var a=Object.keys(e),o={};return a.forEach((function(e){return Object.assign(o,L({},e,r[a.indexOf(e)]))})),o}return r}Qf.preload=function(e){return yA.preload(LI,e)},Qf.clear=function(e){return yA.clear(LI,e)};var jf=function(e){void 0===e&&(e={});var n=e.window,i=void 0===n?document.defaultView:n,r=i.history;function a(){var e=i.location,t=e.pathname,n=e.search,a=e.hash,o=r.state||{};return[o.idx,I({pathname:t,search:n,hash:a,state:o.usr||null,key:o.key||"default"})]}var o=null;i.addEventListener(C,(function(){if(o)b.call(o),o=null;else{var e=t.Pop,n=a(),i=n[0],r=n[1];if(b.length){if(null!=i){var l=s-i;l&&(o={action:e,location:r,retry:function(){x(-1*l)}},x(l))}}else w(e)}}));var l=t.Pop,g=a(),s=g[0],c=g[1],v=A(),b=A();function y(e){return"string"===typeof e?e:m(e)}function G(e,t){return void 0===t&&(t=null),I(u({pathname:c.pathname,hash:"",search:""},"string"===typeof e?f(e):e,{state:t,key:p()}))}function B(e,t){return[{usr:e.state,key:e.key,idx:t},y(e)]}function Z(e,t,n){return!b.length||(b.call({action:e,location:t,retry:n}),!1)}function w(e){l=e;var t=a();s=t[0],c=t[1],v.call({action:l,location:c})}function x(e){r.go(e)}null==s&&(s=0,r.replaceState(u({},r.state,{idx:s}),""));var S={get action(){return l},get location(){return c},createHref:y,push:function e(n,a){var o=t.Push,l=G(n,a);if(Z(o,l,(function(){e(n,a)}))){var g=B(l,s+1),c=g[0],u=g[1];try{r.pushState(c,"",u)}catch(I){i.location.assign(u)}w(o)}},replace:function e(n,i){var a=t.Replace,o=G(n,i);if(Z(a,o,(function(){e(n,i)}))){var l=B(o,s),g=l[0],c=l[1];r.replaceState(g,"",c),w(a)}},go:x,back:function(){x(-1)},forward:function(){x(1)},listen:function(e){return v.push(e)},block:function(e){var t=b.push(e);return 1===b.length&&i.addEventListener(d,h),function(){t(),b.length||i.removeEventListener(d,h)}}};return S}(),$f=function(e){ne(n,e);var t=le(n);function n(e){return $(this,n),t.call(this,e)}return te(n,[{key:"load",value:function(e,t,n,i){var r=this,a=new NI(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){var n=r.parse(JSON.parse(e));t&&t(n)}),n,i)}},{key:"parse",value:function(e){return new ev(e)}}]),n}(kI),ev=function(){function e(t){$(this,e),this.isFont=!0,this.type="Font",this.data=t}return te(e,[{key:"generateShapes",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=[],i=tv(e,t,this.data),r=0,a=i.length;r<a;r++)n.push.apply(n,O(i[r].toShapes()));return n}}]),e}();function tv(e,t,n){for(var i=Array.from(e),r=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,o=[],l=0,g=0,s=0;s<i.length;s++){var c=i[s];if("\n"===c)l=0,g-=a;else{var u=nv(c,r,l,g,n);l+=u.offsetX,o.push(u.path)}}return o}function nv(e,t,n,i,r){var a=r.glyphs[e]||r.glyphs["?"];if(a){var o,l,g,s,c,u,I,d,C=new TC;if(a.o)for(var h=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),A=0,p=h.length;A<p;){switch(h[A++]){case"m":o=h[A++]*t+n,l=h[A++]*t+i,C.moveTo(o,l);break;case"l":o=h[A++]*t+n,l=h[A++]*t+i,C.lineTo(o,l);break;case"q":g=h[A++]*t+n,s=h[A++]*t+i,c=h[A++]*t+n,u=h[A++]*t+i,C.quadraticCurveTo(c,u,g,s);break;case"b":g=h[A++]*t+n,s=h[A++]*t+i,c=h[A++]*t+n,u=h[A++]*t+i,I=h[A++]*t+n,d=h[A++]*t+i,C.bezierCurveTo(c,u,I,d,g,s)}}return{offsetX:a.ha*t,path:C}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+r.familyName+".")}var iv=function(e){ne(n,e);var t=le(n);function n(e){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$(this,n);var a=r.font;if(void 0===a)i=t.call(this);else{var o=a.generateShapes(e,r.size);r.depth=void 0!==r.height?r.height:50,void 0===r.bevelThickness&&(r.bevelThickness=10),void 0===r.bevelSize&&(r.bevelSize=8),void 0===r.bevelEnabled&&(r.bevelEnabled=!1),i=t.call(this,o,r)}return i.type="TextGeometry",oe(i)}return te(n)}(Hu),rv=JSON.parse('{"glyphs":{"0":{"ha":914,"x_min":86,"x_max":828,"o":"m 725 843 q 776 768 725 843 q 828 486 828 693 q 725 129 828 279 q 457 -21 622 -21 q 189 129 292 -21 q 86 486 86 279 q 189 843 86 693 q 457 993 292 993 q 725 843 622 993 m 651 195 q 689 257 651 195 q 728 486 728 319 q 651 777 728 653 q 457 901 574 901 q 263 777 340 901 q 186 486 186 653 q 263 195 186 319 q 457 71 340 71 q 651 195 574 71 z "},"1":{"ha":551,"x_min":32,"x_max":415,"o":"m 410 285 q 410 235 410 285 q 413 126 411 186 q 415 46 415 67 q 400 6 415 25 q 361 -14 385 -14 q 322 6 338 -14 q 307 46 307 25 q 308 126 307 67 q 314 488 314 265 l 314 836 l 247 753 q 209 703 231 732 q 176 661 188 675 q 151 629 165 647 q 128 603 136 611 q 111 586 121 594 q 75 572 93 572 q 44 586 57 572 q 32 615 32 600 q 35 638 32 629 q 51 663 39 647 q 76 693 64 679 q 117 738 89 707 q 174 803 146 769 q 237 880 203 836 q 286 942 271 924 q 352 986 321 986 q 399 967 383 986 q 415 926 415 947 q 414 844 415 906 q 408 542 408 701 q 410 285 408 383 z "},"2":{"ha":761,"x_min":64,"x_max":704,"o":"m 371 89 l 635 96 q 685 81 665 96 q 704 44 704 65 q 635 -7 704 -7 l 371 0 l 133 -7 q 64 57 64 -7 q 103 158 64 108 q 167 235 142 207 q 250 326 192 263 q 331 413 308 389 q 379 466 353 438 q 417 508 406 494 q 452 550 428 521 q 489 599 476 579 q 517 646 501 619 q 546 739 546 696 q 496 855 546 808 q 383 901 446 901 q 280 878 319 901 q 222 828 240 856 q 140 754 176 754 q 108 767 121 754 q 94 800 94 781 q 175 924 94 854 q 378 993 256 993 q 573 917 500 993 q 646 749 646 840 q 592 575 646 657 q 492 451 549 513 q 410 360 436 390 q 324 267 385 331 q 226 161 263 203 q 178 89 190 119 l 371 89 z "},"3":{"ha":789,"x_min":79,"x_max":703,"o":"m 371 972 l 582 978 q 665 914 665 978 q 639 852 665 885 q 544 751 613 819 q 421 615 476 683 q 629 504 556 588 q 703 299 703 421 q 615 78 703 176 q 372 -21 526 -21 q 167 43 256 -21 q 79 163 79 107 q 89 190 79 178 q 113 203 99 203 q 138 195 128 203 q 162 172 149 188 q 192 140 175 156 q 226 112 208 125 q 288 85 244 99 q 383 71 331 71 q 541 138 479 71 q 603 304 603 204 q 532 467 603 404 q 365 536 461 531 q 294 476 322 493 q 238 460 267 460 q 192 476 208 460 q 176 520 176 492 q 211 580 176 549 q 315 625 246 611 q 532 878 436 758 l 371 883 l 160 876 q 111 890 129 876 q 93 928 93 904 q 111 965 93 951 q 160 979 129 979 q 371 972 160 979 z "},"4":{"ha":803,"x_min":35,"x_max":749,"o":"m 600 317 l 607 56 q 592 5 607 24 q 553 -14 578 -14 q 513 5 528 -14 q 499 56 499 24 l 504 319 l 401 321 l 97 315 q 51 331 68 315 q 35 365 35 347 q 37 394 35 383 q 48 419 39 404 q 66 449 57 435 q 97 491 75 463 q 140 544 119 519 q 275 714 163 571 l 438 921 q 535 986 488 986 q 607 903 607 986 q 606 832 607 894 q 600 413 600 686 l 679 417 q 729 403 710 417 q 749 365 749 389 q 729 328 749 342 q 691 314 710 314 q 600 317 672 314 m 160 410 l 506 410 q 508 658 508 511 l 506 853 q 326 629 444 782 q 160 410 207 476 z "},"5":{"ha":799,"x_min":86,"x_max":725,"o":"m 600 876 l 403 883 q 281 881 328 883 q 217 878 233 878 q 225 756 225 807 q 217 596 225 671 l 214 571 q 418 646 313 646 q 645 554 565 646 q 725 323 725 463 q 634 81 725 183 q 389 -21 543 -21 q 176 53 267 -21 q 86 193 86 128 q 98 227 86 214 q 128 240 110 240 q 156 231 146 240 q 179 201 167 222 q 200 169 192 179 q 389 71 283 71 q 560 149 494 71 q 625 325 625 226 q 567 489 625 424 q 413 554 510 554 q 218 478 318 554 q 167 451 185 451 q 113 510 113 451 q 122 603 113 525 q 131 738 131 682 q 123 844 131 793 q 115 914 115 896 q 192 979 115 979 l 403 972 l 600 979 q 649 965 631 979 q 667 928 667 951 q 649 890 667 904 q 600 876 631 876 z "},"6":{"ha":801,"x_min":86,"x_max":728,"o":"m 436 629 q 650 535 572 629 q 728 310 728 440 q 645 79 728 179 q 411 -21 563 -21 q 173 90 260 -21 q 86 369 86 200 q 228 806 86 626 q 589 986 371 986 q 678 938 678 986 q 601 886 678 886 q 329 772 442 886 q 196 501 217 658 q 294 591 231 553 q 436 629 358 629 m 417 68 q 463 68 417 68 q 568 136 508 68 q 628 304 628 204 q 571 472 628 404 q 417 540 514 540 q 258 465 321 540 q 196 296 196 390 q 260 135 196 201 q 417 68 325 68 z "},"7":{"ha":681,"x_min":43,"x_max":646,"o":"m 338 972 l 563 979 q 646 914 646 979 q 622 833 646 886 q 542 669 597 779 q 436 444 486 558 q 303 89 342 226 l 288 33 q 231 -14 269 -14 q 197 2 210 -14 q 183 36 183 18 q 185 69 183 54 q 193 103 188 83 q 203 140 199 122 q 219 184 208 157 q 239 232 231 211 q 263 290 247 253 q 289 351 278 326 q 319 423 300 376 q 366 531 339 469 q 449 718 393 593 q 519 878 506 843 l 338 883 l 113 876 q 43 928 43 876 q 113 979 43 979 l 338 972 z "},"8":{"ha":800,"x_min":82,"x_max":718,"o":"m 501 547 q 656 430 594 501 q 718 251 718 358 q 629 61 718 143 q 400 -21 540 -21 q 171 61 260 -21 q 82 251 82 143 q 147 431 82 358 q 310 547 211 503 q 181 648 226 594 q 135 783 135 701 q 210 929 135 865 q 399 993 285 993 q 590 928 514 993 q 665 783 665 864 q 622 649 665 703 q 501 547 578 596 m 618 261 q 400 493 618 400 q 182 261 182 400 q 244 123 182 175 q 400 71 307 71 q 556 123 493 71 q 618 261 618 175 m 403 597 q 525 682 482 640 q 568 776 568 724 q 518 865 568 829 q 401 901 468 901 q 283 865 335 901 q 232 776 232 829 q 276 683 232 724 q 403 597 321 642 z "},"9":{"ha":799,"x_min":71,"x_max":713,"o":"m 363 343 q 149 442 226 343 q 71 669 71 540 q 158 896 71 799 q 392 993 244 993 q 626 883 539 993 q 713 603 713 772 q 572 162 713 338 q 210 -14 431 -14 q 121 35 121 -14 q 197 86 121 86 q 471 196 360 86 q 603 471 582 306 q 504 381 568 419 q 363 343 440 343 m 386 904 q 340 904 386 904 q 233 836 294 904 q 171 668 171 768 q 228 500 171 568 q 381 432 285 432 q 540 507 478 432 q 603 676 603 582 q 540 838 603 771 q 386 904 478 904 z "}," ":{"ha":331,"x_min":0,"x_max":0,"o":""},"!":{"ha":336,"x_min":104,"x_max":232,"o":"m 173 139 q 187 139 173 139 q 217 118 201 139 q 232 65 232 97 q 212 6 232 32 q 163 -21 192 -21 q 119 1 135 -21 q 104 55 104 24 q 124 113 104 86 q 173 139 144 139 m 214 650 l 218 356 q 168 286 218 286 q 118 356 118 286 l 122 650 q 117 855 122 732 q 113 986 113 978 q 168 1056 113 1056 q 224 986 224 1056 q 219 855 224 978 q 214 650 214 732 z "},"\\"":{"ha":475,"x_min":76,"x_max":399,"o":"m 343 1007 q 356 1007 343 1007 q 384 988 369 1007 q 399 950 399 969 q 390 869 399 931 q 380 766 382 808 q 371 702 378 724 q 344 681 364 681 q 316 703 324 681 q 306 767 308 725 q 296 869 304 808 q 288 949 288 929 q 302 988 288 969 q 343 1007 317 1007 m 132 1007 q 145 1007 132 1007 q 173 988 158 1007 q 188 950 188 969 q 179 869 188 931 q 169 766 171 808 q 160 702 167 724 q 133 681 153 681 q 105 703 113 681 q 95 767 97 725 q 85 869 93 808 q 76 949 76 929 q 91 988 76 969 q 132 1007 106 1007 z "},"#":{"ha":1115,"x_min":67,"x_max":1049,"o":"m 656 381 l 700 613 l 456 613 l 411 381 l 656 381 m 924 294 l 728 297 q 682 38 710 200 q 625 -19 671 -19 q 596 -7 607 -19 q 585 24 585 6 q 592 75 585 43 q 636 300 619 207 l 396 300 q 367 137 381 221 q 350 36 353 53 q 293 -21 339 -21 q 264 -8 275 -21 q 253 23 253 4 q 260 74 253 42 q 281 171 267 106 q 307 299 296 236 l 131 294 q 67 340 67 294 q 131 386 67 386 l 325 382 l 369 611 l 190 607 q 126 653 126 607 q 190 699 126 699 l 383 694 q 412 842 399 765 q 428 933 425 918 q 485 990 439 990 q 514 977 503 990 q 525 947 525 964 q 518 898 525 929 q 498 808 511 867 q 474 693 485 749 l 714 693 q 743 842 729 764 q 760 935 757 919 q 817 992 771 992 q 846 978 835 992 q 857 948 857 965 q 850 899 857 931 q 830 809 843 868 q 806 694 817 750 l 985 699 q 1049 653 1049 699 q 985 607 1049 607 l 788 611 l 743 382 l 924 386 q 988 340 988 386 q 924 294 988 294 z "},"$":{"ha":769,"x_min":72,"x_max":699,"o":"m 699 258 q 629 78 699 154 q 443 -15 560 3 q 446 -82 446 -50 q 397 -153 446 -153 q 349 -82 349 -153 l 350 -18 q 158 37 243 -11 q 72 129 72 85 q 83 160 72 149 q 113 172 94 172 q 158 150 131 172 q 353 71 249 78 q 356 497 356 265 q 178 625 243 561 q 114 772 114 689 q 179 915 114 854 q 350 986 244 975 l 350 1040 q 397 1111 350 1111 q 444 1040 444 1111 l 444 986 q 593 944 533 978 q 653 871 653 911 q 642 844 653 856 q 612 832 632 832 q 540 863 592 832 q 442 896 488 894 q 439 561 439 729 q 604 446 551 494 q 678 353 657 397 q 699 258 699 308 m 440 75 q 550 137 506 86 q 594 251 594 188 q 554 358 594 314 q 439 449 514 403 q 440 75 439 168 m 215 771 q 356 608 215 697 q 353 896 356 797 q 254 857 293 889 q 215 771 215 825 z "},"%":{"ha":1117,"x_min":67,"x_max":1051,"o":"m 813 981 q 735 836 813 921 q 446 14 460 49 q 396 -21 432 -21 q 365 -8 378 -21 q 353 26 353 4 q 388 132 353 47 q 635 801 528 475 q 572 790 611 790 q 467 810 532 790 q 474 753 474 785 q 417 582 474 651 q 270 513 361 513 q 123 580 179 513 q 67 751 67 647 q 125 924 67 854 q 265 993 183 993 q 421 933 347 993 q 560 872 494 872 q 656 897 626 872 l 667 936 q 718 1046 692 1026 q 753 1056 731 1056 q 794 1034 776 1056 q 813 981 813 1013 m 272 592 q 299 592 272 592 q 358 637 326 592 q 389 751 389 682 q 358 867 389 821 q 272 914 328 914 q 185 869 217 914 q 154 754 154 824 q 185 638 154 685 q 272 592 217 592 m 848 460 q 893 460 848 460 q 995 392 939 460 q 1051 222 1051 325 q 993 49 1051 118 q 844 -21 935 -21 q 697 47 753 -21 q 640 217 640 114 q 699 390 640 321 q 848 460 757 460 m 845 58 q 873 58 845 58 q 931 103 900 58 q 963 218 963 149 q 932 334 963 288 q 847 381 901 381 q 760 335 792 381 q 729 221 729 290 q 760 105 729 151 q 845 58 790 58 z "},"&":{"ha":1063,"x_min":65,"x_max":1032,"o":"m 569 492 l 743 485 q 876 521 815 485 q 938 625 938 557 q 832 764 938 728 q 774 790 792 778 q 757 824 757 803 q 772 858 757 846 q 810 869 786 869 q 959 794 886 869 q 1032 634 1032 719 q 981 494 1032 549 q 706 397 892 397 q 743 246 743 335 q 655 68 743 157 q 413 -21 567 -21 q 163 78 260 -21 q 65 322 65 176 q 113 485 65 406 q 242 617 161 564 q 168 708 200 654 q 136 819 136 763 q 200 972 136 908 q 375 1035 264 1035 q 508 1003 447 1035 q 569 933 569 971 q 556 899 569 911 q 526 888 543 888 q 468 916 510 888 q 369 944 426 944 q 272 911 311 944 q 233 827 233 878 q 258 731 233 776 q 317 663 282 686 q 383 671 346 671 q 446 653 419 671 q 472 606 472 636 q 444 559 472 576 q 378 542 417 542 q 308 557 339 542 q 203 464 240 524 q 165 326 165 404 q 235 146 165 218 q 411 74 306 74 q 581 132 517 74 q 646 269 646 190 q 576 390 646 390 q 531 378 558 390 q 482 365 503 365 q 448 380 461 365 q 435 415 435 394 q 474 471 435 450 q 569 492 514 492 z "},"\'":{"ha":264,"x_min":76,"x_max":188,"o":"m 132 1007 q 145 1007 132 1007 q 173 988 158 1007 q 188 950 188 969 q 179 869 188 931 q 169 766 171 808 q 160 702 167 724 q 133 681 153 681 q 105 703 113 681 q 95 767 97 725 q 85 869 93 808 q 76 949 76 929 q 91 988 76 969 q 132 1007 106 1007 z "},"(":{"ha":419,"x_min":64,"x_max":392,"o":"m 333 1056 q 349 1056 333 1056 q 378 1040 365 1056 q 392 1005 392 1025 q 378 964 392 985 q 336 906 365 943 q 285 829 307 869 q 168 332 168 622 q 246 -72 168 106 q 356 -256 288 -171 q 372 -290 372 -276 q 346 -319 372 -319 q 246 -244 303 -319 q 153 -82 189 -168 q 64 394 64 126 q 93 633 64 510 q 164 847 122 756 q 253 997 206 938 q 333 1056 301 1056 z "},")":{"ha":421,"x_min":28,"x_max":356,"o":"m 356 394 q 267 -82 356 126 q 174 -244 231 -168 q 74 -319 117 -319 q 47 -290 47 -319 q 64 -256 47 -276 q 251 332 251 -21 q 135 829 251 622 q 83 906 113 869 q 41 964 54 943 q 28 1005 28 985 q 41 1040 28 1025 q 86 1056 54 1056 q 166 997 118 1056 q 256 847 214 938 q 326 633 297 756 q 356 394 356 510 z "},"*":{"ha":589,"x_min":88,"x_max":501,"o":"m 325 771 l 340 646 q 328 605 340 621 q 294 589 315 589 q 261 605 274 589 q 249 638 249 621 q 255 697 249 654 q 264 771 261 740 q 208 728 239 754 q 161 694 176 703 q 130 685 146 685 q 101 697 114 685 q 88 726 88 708 q 98 756 88 744 q 123 774 108 768 q 172 792 138 779 q 236 821 207 806 q 172 849 207 836 q 123 868 138 863 q 98 885 108 874 q 88 915 88 897 q 101 945 88 933 q 130 957 114 957 q 161 948 146 957 q 208 913 176 939 q 264 871 239 888 q 249 999 264 871 q 261 1040 249 1024 q 294 1056 274 1056 q 328 1040 315 1056 q 340 1006 340 1024 q 334 945 340 989 q 325 871 328 901 q 381 913 350 888 q 428 948 413 939 q 459 957 443 957 q 488 945 475 957 q 501 915 501 933 q 491 885 501 897 q 466 868 481 874 q 417 849 451 863 q 353 821 382 836 q 417 792 382 806 q 466 774 451 779 q 491 756 481 768 q 501 726 501 744 q 488 697 501 708 q 459 685 475 685 q 428 694 443 685 q 381 728 413 703 q 325 771 350 754 z "},"+":{"ha":735,"x_min":65,"x_max":671,"o":"m 411 404 l 614 408 q 655 396 639 408 q 671 363 671 383 q 655 329 671 342 q 614 317 639 317 q 411 321 544 317 l 417 103 q 403 61 417 76 q 368 46 390 46 q 322 103 322 46 q 328 321 322 110 q 142 317 186 317 q 81 329 97 317 q 65 363 65 342 q 81 396 65 383 q 122 408 97 408 l 328 404 q 322 603 322 599 q 368 660 322 660 q 403 644 390 660 q 417 614 417 629 q 411 404 417 599 z "},",":{"ha":292,"x_min":39,"x_max":210,"o":"m 210 68 q 162 -119 210 -26 q 67 -212 114 -212 q 47 -205 56 -212 q 39 -187 39 -197 q 65 -133 39 -176 q 90 -53 90 -89 q 85 8 90 -18 q 79 61 79 33 q 99 115 79 89 q 149 142 119 142 q 194 120 179 142 q 210 68 210 99 z "},"-":{"ha":594,"x_min":92,"x_max":503,"o":"m 297 404 l 446 408 q 487 396 471 408 q 503 363 503 383 q 487 329 503 342 q 446 317 471 317 l 297 321 l 149 317 q 108 329 124 317 q 92 363 92 342 q 108 396 92 383 q 149 408 124 408 l 297 404 z "},".":{"ha":288,"x_min":78,"x_max":208,"o":"m 148 149 q 163 149 148 149 q 193 127 178 149 q 208 73 208 106 q 188 13 208 40 q 139 -14 168 -14 q 94 8 110 -14 q 78 63 78 31 q 98 122 78 96 q 148 149 118 149 z "},"/":{"ha":504,"x_min":78,"x_max":425,"o":"m 128 -211 q 78 -156 78 -211 q 128 85 78 -132 q 207 433 179 303 q 260 692 235 563 q 301 901 286 822 q 319 997 315 981 q 375 1056 332 1056 q 425 997 425 1056 q 408 904 425 978 q 203 -57 278 351 q 183 -153 188 -136 q 128 -211 172 -211 z "},":":{"ha":314,"x_min":92,"x_max":222,"o":"m 162 708 q 177 708 162 708 q 207 687 192 708 q 222 633 222 665 q 202 573 222 600 q 153 546 182 546 q 108 568 124 546 q 92 623 92 590 q 112 682 92 656 q 162 708 132 708 m 162 149 q 177 149 162 149 q 207 127 192 149 q 222 73 222 106 q 202 13 222 40 q 153 -14 182 -14 q 108 8 124 -14 q 92 63 92 31 q 112 122 92 96 q 162 149 132 149 z "},";":{"ha":336,"x_min":65,"x_max":238,"o":"m 236 68 q 188 -119 236 -26 q 93 -212 140 -212 q 74 -205 82 -212 q 65 -187 65 -197 q 91 -133 65 -176 q 117 -53 117 -89 q 111 8 117 -18 q 106 61 106 33 q 126 115 106 89 q 176 142 146 142 q 221 120 206 142 q 236 68 236 99 m 177 708 q 192 708 177 708 q 222 687 207 708 q 238 633 238 665 q 217 573 238 600 q 168 546 197 546 q 123 568 139 546 q 107 623 107 590 q 127 682 107 656 q 177 708 147 708 z "},"<":{"ha":754,"x_min":63,"x_max":657,"o":"m 108 340 q 95 349 108 340 q 72 372 82 357 q 63 404 63 388 q 67 431 63 421 q 83 451 71 440 q 108 471 94 463 q 147 492 121 479 q 197 517 174 506 q 261 548 219 528 q 341 588 303 568 q 427 631 379 607 q 496 667 475 656 q 542 689 517 678 q 604 707 582 707 q 641 694 626 707 q 656 662 656 681 q 646 631 656 643 q 611 607 636 619 q 558 583 586 594 q 415 522 456 542 q 353 493 374 503 q 319 478 332 483 q 288 463 307 472 q 258 447 269 453 q 233 433 246 440 q 210 408 210 418 q 481 267 210 386 q 560 232 533 243 q 611 207 586 221 q 657 156 657 182 q 642 115 657 131 q 611 100 628 100 q 577 106 594 100 q 533 124 560 111 q 483 150 507 136 q 260 265 332 231 q 161 311 188 299 q 108 340 135 324 z "},"=":{"ha":822,"x_min":108,"x_max":714,"o":"m 411 504 l 657 508 q 698 496 682 508 q 714 463 714 483 q 698 429 714 442 q 657 417 682 417 l 411 421 l 165 417 q 124 429 140 417 q 108 463 108 442 q 124 496 108 483 q 165 508 140 508 q 411 504 165 508 m 411 304 l 657 308 q 698 296 682 308 q 714 263 714 283 q 698 229 714 242 q 657 217 682 217 l 411 221 l 165 217 q 124 229 140 217 q 108 263 108 242 q 124 296 108 283 q 165 308 140 308 l 411 304 z "},">":{"ha":754,"x_min":97,"x_max":692,"o":"m 672 451 q 677 446 672 451 q 688 431 683 440 q 692 404 692 421 q 682 372 692 388 q 646 340 672 357 q 593 311 619 324 q 513 274 567 299 q 421 228 460 249 q 339 185 382 208 q 272 149 296 163 q 221 124 247 136 q 149 100 171 100 q 112 115 126 100 q 97 150 97 131 q 107 181 97 169 q 142 207 117 193 q 194 232 168 221 q 403 326 263 261 q 544 408 544 390 q 467 463 544 422 q 435 478 447 472 q 356 514 386 499 q 275 551 326 529 q 196 583 224 572 q 143 607 168 594 q 108 631 118 619 q 99 662 99 643 q 113 694 99 681 q 143 707 128 707 q 173 703 158 707 q 213 689 188 700 q 258 667 238 678 q 327 631 279 656 q 413 588 375 607 q 493 548 451 568 q 558 517 535 528 q 607 492 581 506 q 647 471 633 479 q 672 451 660 463 z "},"?":{"ha":626,"x_min":68,"x_max":557,"o":"m 471 606 q 399 531 435 567 q 313 363 313 444 q 264 282 313 282 q 213 360 213 282 q 299 558 213 465 q 371 633 335 597 q 457 807 457 722 q 409 920 457 874 q 310 967 361 967 q 226 950 260 967 q 178 914 193 933 q 115 861 139 861 q 80 874 92 861 q 68 906 68 888 q 140 1005 68 954 q 299 1056 211 1056 q 485 984 414 1056 q 557 804 557 913 q 471 606 557 696 m 267 139 q 282 139 267 139 q 311 118 296 139 q 326 65 326 97 q 306 6 326 32 q 258 -21 286 -21 q 214 1 229 -21 q 199 55 199 24 q 219 113 199 86 q 267 139 239 139 z "},"@":{"ha":1393,"x_min":82,"x_max":1325,"o":"m 986 574 q 958 338 986 553 l 958 276 q 1064 81 958 81 q 1173 151 1125 81 q 1221 380 1221 222 q 1148 658 1221 538 q 959 836 1075 778 q 704 894 843 894 q 338 721 490 894 q 186 308 186 547 q 318 -80 186 68 q 631 -228 450 -228 q 769 -210 706 -228 q 865 -173 832 -193 q 928 -135 899 -153 q 972 -118 957 -118 q 997 -130 986 -118 q 1008 -160 1008 -142 q 980 -204 1008 -178 q 903 -256 951 -231 q 781 -301 856 -282 q 624 -319 706 -319 q 238 -145 394 -319 q 82 303 82 29 q 162 644 82 488 q 385 894 242 801 q 706 986 529 986 q 1150 821 975 986 q 1325 371 1325 656 q 1249 97 1325 206 q 1065 -12 1174 -12 q 883 163 910 -12 q 789 38 850 88 q 642 -12 728 -12 q 499 43 557 -12 q 396 314 396 140 q 481 563 396 457 q 701 669 567 669 q 874 607 786 669 q 932 669 885 669 q 986 574 986 669 m 875 300 l 875 507 q 710 578 801 578 q 556 503 618 578 q 493 325 493 429 q 533 148 493 221 q 647 75 574 75 q 780 140 719 75 q 875 300 840 206 z "},"A":{"ha":892,"x_min":54,"x_max":839,"o":"m 708 442 l 769 443 q 819 428 800 443 q 839 389 839 413 q 742 336 839 336 q 774 236 764 268 q 803 156 785 204 q 839 36 839 56 q 826 1 839 17 q 792 -14 814 -14 q 731 35 751 -14 q 683 182 711 88 q 633 342 654 276 q 401 346 467 346 q 246 342 336 346 q 154 38 160 53 q 100 -14 135 -14 q 67 0 79 -14 q 54 34 54 14 q 67 97 54 54 q 105 214 79 139 q 146 339 131 289 l 121 339 q 54 390 54 339 q 121 442 54 442 q 178 440 153 442 q 360 972 182 451 q 440 1056 389 1056 q 494 1035 475 1056 q 525 984 513 1015 q 567 864 538 953 q 708 442 658 585 m 276 438 q 442 433 354 433 q 603 438 531 433 q 443 897 460 897 q 314 553 424 897 l 276 438 z "},"B":{"ha":910,"x_min":78,"x_max":843,"o":"m 153 115 l 157 511 q 156 734 157 589 q 154 897 154 879 q 132 894 138 894 q 90 940 90 894 q 126 997 90 971 q 214 1036 163 1022 q 406 1063 321 1063 q 566 1038 492 1063 q 683 974 640 1013 q 767 807 767 896 q 617 567 767 646 q 779 460 715 539 q 843 286 843 382 q 722 59 843 139 q 400 -21 601 -21 q 169 9 260 -21 q 78 86 78 39 q 88 114 78 103 q 117 125 99 125 q 153 115 135 125 m 396 72 q 642 130 550 72 q 733 294 733 188 q 660 438 733 382 q 504 508 588 494 q 340 488 383 488 q 257 497 296 488 q 263 85 257 192 q 396 72 328 72 m 396 968 q 261 949 335 968 q 257 600 257 875 q 352 614 283 614 q 479 603 421 614 q 549 624 508 604 q 628 693 590 644 q 665 805 665 742 q 599 918 665 868 q 396 968 533 968 z "},"C":{"ha":914,"x_min":79,"x_max":861,"o":"m 861 132 q 762 33 861 88 q 529 -21 663 -21 q 207 137 335 -21 q 79 522 79 294 q 208 906 79 749 q 532 1063 338 1063 q 739 1019 647 1063 q 831 922 831 976 q 817 888 831 900 q 781 875 804 875 q 727 897 758 875 q 648 942 696 919 q 532 965 600 965 q 288 834 383 965 q 192 524 192 703 q 288 211 192 346 q 531 76 383 76 q 653 91 599 76 q 736 122 708 106 q 788 153 764 139 q 824 168 811 168 q 861 132 861 168 z "},"D":{"ha":985,"x_min":79,"x_max":906,"o":"m 158 511 l 151 908 q 85 961 85 908 q 176 1032 85 1008 q 383 1056 268 1056 q 603 1008 499 1056 q 772 883 707 961 q 906 506 906 722 q 776 144 906 297 q 613 24 714 69 q 383 -21 513 -21 q 166 9 253 -21 q 79 86 79 39 q 90 114 79 103 q 118 125 100 125 q 154 115 136 125 l 158 511 m 692 818 q 557 918 640 881 q 369 956 474 956 q 265 943 318 956 q 258 544 258 836 q 267 85 258 251 q 383 78 300 78 q 689 204 581 78 q 797 510 797 331 q 692 818 797 690 z "},"E":{"ha":817,"x_min":64,"x_max":751,"o":"m 457 92 l 682 99 q 751 46 751 99 q 682 -7 751 -7 l 457 0 q 214 -7 457 0 q 151 46 151 -7 q 155 210 151 94 q 158 504 158 325 q 131 503 146 503 q 64 554 64 503 q 82 593 64 578 q 123 608 100 608 q 158 607 146 608 q 149 944 156 886 q 132 996 132 968 q 206 1049 132 1049 l 474 1042 l 682 1049 q 751 996 751 1049 q 682 943 751 943 l 474 950 q 265 944 315 950 q 258 604 258 763 q 356 601 319 601 l 606 608 q 656 594 638 608 q 675 554 675 579 q 606 503 675 503 l 356 510 q 258 507 317 510 l 258 369 q 265 97 258 163 q 457 92 363 92 z "},"F":{"ha":786,"x_min":63,"x_max":750,"o":"m 354 601 l 589 608 q 640 593 621 608 q 660 554 660 578 q 640 517 660 531 q 589 503 621 503 l 354 510 q 257 507 315 510 l 264 67 q 207 -14 264 -14 q 150 67 150 -14 q 153 257 150 121 q 157 504 157 393 q 129 503 144 503 q 63 554 63 503 q 81 593 63 578 q 122 608 99 608 q 157 607 144 608 q 147 944 154 886 q 131 996 131 968 q 208 1049 131 1049 l 472 1042 l 675 1049 q 750 996 750 1049 q 675 943 750 943 l 472 950 q 264 944 314 950 q 257 604 257 763 q 354 601 318 601 z "},"G":{"ha":1003,"x_min":79,"x_max":940,"o":"m 507 549 l 690 542 q 800 546 738 542 q 869 550 863 550 q 940 489 940 550 q 825 116 940 254 q 523 -22 710 -22 q 208 136 336 -22 q 79 522 79 294 q 212 906 79 749 q 546 1063 344 1063 q 772 1014 671 1063 q 872 908 872 965 q 859 874 872 886 q 824 861 846 861 q 774 877 801 861 q 723 913 747 893 q 651 949 699 933 q 546 965 604 965 q 292 834 392 965 q 192 524 192 703 q 288 211 192 346 q 531 76 383 76 q 738 173 656 76 q 824 444 821 269 q 690 450 754 450 l 507 443 q 440 494 440 443 q 458 534 440 519 q 507 549 476 549 z "},"H":{"ha":997,"x_min":61,"x_max":936,"o":"m 850 985 l 843 606 l 865 606 q 916 590 896 606 q 936 550 936 574 q 917 512 936 526 q 865 497 897 497 l 843 497 l 850 57 q 833 6 850 26 q 793 -14 817 -14 q 753 6 769 -14 q 736 57 736 26 l 743 501 q 448 506 539 506 q 253 501 357 506 q 256 172 253 276 q 260 47 260 68 q 243 6 260 26 q 203 -14 226 -14 q 163 6 179 -14 q 146 47 146 26 q 147 131 146 68 q 153 499 153 274 l 128 499 q 61 550 61 499 q 79 590 61 575 q 128 604 97 604 l 153 604 l 146 985 q 163 1035 146 1015 q 203 1056 179 1056 q 243 1035 226 1056 q 260 985 260 1015 l 253 600 q 517 597 392 597 q 743 601 642 597 l 736 985 q 753 1035 736 1015 q 793 1056 769 1056 q 833 1035 817 1056 q 850 985 850 1015 z "},"I":{"ha":606,"x_min":51,"x_max":554,"o":"m 361 92 l 483 99 q 534 84 515 99 q 553 46 553 69 q 533 7 553 22 q 483 -8 514 -8 l 304 0 l 121 -7 q 51 46 51 -7 q 121 99 51 99 q 247 92 136 99 q 254 520 254 404 q 247 949 254 636 q 121 943 125 943 q 54 994 54 943 q 72 1034 54 1019 q 121 1049 90 1049 l 304 1042 q 414 1046 351 1042 q 495 1050 476 1050 q 534 1034 514 1050 q 554 994 554 1018 q 535 956 554 971 q 494 942 515 942 q 361 949 472 942 q 354 517 354 629 q 361 92 354 404 z "},"J":{"ha":726,"x_min":43,"x_max":669,"o":"m 571 519 l 572 353 q 485 75 572 164 q 288 -14 397 -14 q 110 35 178 -14 q 43 126 43 85 q 56 162 43 149 q 88 175 69 175 q 124 160 106 175 q 157 126 142 144 q 204 93 172 108 q 278 78 236 78 q 413 151 357 78 q 469 383 469 224 q 471 519 469 383 q 468 950 471 831 q 424 951 453 951 l 236 944 q 169 996 169 944 q 188 1035 169 1019 q 236 1050 206 1050 l 419 1043 q 529 1047 467 1043 q 610 1051 592 1051 q 649 1035 629 1051 q 669 996 669 1019 q 648 958 669 972 q 594 943 626 943 l 574 943 q 571 519 571 815 z "},"K":{"ha":858,"x_min":136,"x_max":839,"o":"m 243 479 l 250 57 q 233 6 250 26 q 193 -14 217 -14 q 153 6 169 -14 q 136 57 136 26 l 143 517 l 136 983 q 153 1034 136 1014 q 193 1054 169 1054 q 233 1034 217 1054 q 250 994 250 1014 q 249 921 250 974 q 243 589 243 710 q 363 606 285 606 q 428 601 365 606 q 552 774 496 660 q 629 994 608 888 q 686 1056 643 1056 q 719 1042 706 1056 q 733 1004 733 1028 q 658 760 733 911 q 508 536 583 610 q 617 326 546 450 q 724 153 688 203 q 787 99 757 113 q 828 87 817 86 q 839 79 839 88 q 817 13 839 39 q 764 -14 796 -14 q 643 81 711 -14 q 413 485 575 176 q 311 472 344 472 q 243 479 278 472 z "},"L":{"ha":756,"x_min":136,"x_max":711,"o":"m 250 985 l 243 517 q 249 99 243 376 q 395 92 306 92 q 559 97 485 92 q 653 101 633 101 q 692 87 674 101 q 711 47 711 72 q 692 8 711 22 q 642 -7 674 -7 l 432 0 l 207 -7 q 156 11 175 -7 q 136 64 136 29 l 143 517 l 136 985 q 151 1036 136 1017 q 193 1056 167 1056 q 235 1036 219 1056 q 250 985 250 1017 z "},"M":{"ha":1128,"x_min":136,"x_max":993,"o":"m 143 517 l 136 978 q 152 1031 136 1014 q 199 1049 168 1049 q 250 1000 229 1049 q 392 683 363 746 q 483 488 422 619 q 565 315 544 357 q 815 857 701 578 q 879 1007 860 965 q 936 1049 899 1049 q 993 978 993 1049 q 991 902 993 967 q 988 732 989 838 q 986 517 986 626 q 988 302 986 407 q 991 133 989 197 q 993 47 993 68 q 976 6 993 26 q 936 -14 960 -14 q 896 6 913 -14 q 879 47 879 26 q 881 133 879 68 q 889 517 889 369 l 889 786 l 621 197 q 567 154 601 154 q 514 201 533 154 q 243 792 346 576 l 243 517 l 250 57 q 233 6 250 26 q 193 -14 217 -14 q 153 6 169 -14 q 136 57 136 26 l 143 517 z "},"N":{"ha":960,"x_min":136,"x_max":826,"o":"m 143 517 l 136 983 q 153 1035 136 1014 q 194 1056 169 1056 q 261 1018 239 1056 q 466 653 274 999 q 719 210 658 308 l 719 517 q 716 863 719 751 q 713 994 713 974 q 729 1035 713 1015 q 769 1056 746 1056 q 810 1035 793 1056 q 826 994 826 1015 q 825 907 826 974 q 819 517 819 751 l 822 57 q 805 6 822 25 q 757 -14 788 -14 q 704 24 726 -14 q 653 114 697 35 q 452 473 518 361 q 326 694 386 585 q 243 840 267 803 l 243 517 l 250 57 q 233 6 250 26 q 193 -14 217 -14 q 153 6 169 -14 q 136 57 136 26 l 143 517 z "},"O":{"ha":1075,"x_min":79,"x_max":996,"o":"m 538 81 q 611 81 538 81 q 784 214 685 81 q 883 524 883 347 q 785 831 883 701 q 538 961 686 961 q 290 831 389 961 q 192 524 192 701 q 291 214 192 347 q 538 81 390 81 m 865 906 q 931 827 865 906 q 996 522 996 749 q 864 138 996 296 q 537 -21 732 -21 q 210 138 342 -21 q 79 522 79 296 q 211 905 79 747 q 539 1063 343 1063 q 865 906 735 1063 z "},"P":{"ha":835,"x_min":79,"x_max":790,"o":"m 393 967 q 250 942 293 967 q 246 732 246 879 q 249 522 246 585 q 429 499 326 499 q 610 565 532 499 q 688 721 688 632 q 610 899 688 831 q 393 967 533 967 m 249 428 l 256 57 q 239 6 256 26 q 199 -14 222 -14 q 158 6 175 -14 q 142 48 142 26 q 144 136 142 69 q 150 480 150 333 q 149 709 150 626 q 145 840 147 792 q 143 897 143 888 q 121 894 126 894 q 79 940 79 894 q 189 1030 79 997 q 385 1063 299 1063 q 686 963 582 1063 q 790 731 790 864 q 687 503 790 599 q 422 407 583 407 q 249 428 325 407 z "},"Q":{"ha":1047,"x_min":79,"x_max":968,"o":"m 856 522 q 761 831 856 701 q 524 961 667 961 q 286 831 381 961 q 192 524 192 701 q 287 214 192 347 q 524 81 382 81 q 622 97 583 81 q 565 190 594 144 q 525 253 535 236 q 515 289 515 269 q 532 324 515 308 q 574 339 549 339 q 621 300 599 339 l 701 147 q 815 306 775 207 q 856 522 856 406 m 968 522 q 911 251 968 374 q 753 57 854 128 q 859 -119 850 -103 q 868 -155 868 -135 q 856 -190 868 -175 q 818 -206 844 -206 q 768 -164 792 -206 q 727 -89 760 -150 q 672 11 694 -28 q 522 -21 603 -21 q 206 138 333 -21 q 79 522 79 296 q 208 905 79 747 q 525 1063 336 1063 q 841 906 714 1063 q 968 522 968 749 z "},"R":{"ha":883,"x_min":79,"x_max":846,"o":"m 249 426 l 256 57 q 239 6 256 26 q 199 -14 222 -14 q 158 6 175 -14 q 142 48 142 26 q 144 136 142 69 q 150 480 150 333 q 149 709 150 626 q 145 840 147 792 q 143 897 143 888 q 121 894 126 894 q 79 940 79 894 q 189 1030 79 997 q 385 1063 299 1063 q 672 973 575 1063 q 769 753 769 883 q 713 583 769 664 q 560 461 657 501 q 778 103 690 151 q 817 92 803 89 q 846 75 846 96 q 821 11 846 36 q 764 -14 796 -14 q 653 64 711 -14 q 460 429 569 183 q 328 417 393 417 l 249 426 m 667 744 q 596 905 667 843 q 409 967 525 967 q 250 942 293 967 q 246 718 246 869 q 247 535 246 567 q 375 551 310 551 q 494 538 440 551 q 612 610 557 550 q 667 744 667 671 z "},"S":{"ha":772,"x_min":58,"x_max":711,"o":"m 711 278 q 617 65 711 151 q 374 -21 522 -21 q 158 34 258 -21 q 58 143 58 89 q 72 178 58 164 q 106 192 85 192 q 152 174 126 192 q 201 134 178 156 q 270 94 224 113 q 374 76 317 76 q 535 131 471 76 q 600 278 600 186 q 548 392 600 339 q 422 488 496 446 q 273 575 347 531 q 147 682 199 619 q 94 819 94 744 q 180 990 94 918 q 379 1063 265 1063 q 574 1024 493 1063 q 654 936 654 985 q 641 901 654 914 q 607 889 628 889 q 565 901 586 889 q 527 927 544 913 q 474 953 510 942 q 377 965 438 965 q 261 924 317 965 q 206 826 206 883 q 258 720 206 768 q 384 630 310 672 q 533 541 458 588 q 659 426 607 494 q 711 278 711 358 z "},"T":{"ha":726,"x_min":38,"x_max":693,"o":"m 371 1042 l 622 1050 q 674 1035 654 1050 q 693 996 693 1021 q 674 956 693 971 q 622 942 654 942 l 428 949 q 421 517 421 636 l 428 57 q 413 6 428 25 q 371 -14 397 -14 q 329 6 344 -14 q 314 57 314 25 l 321 517 q 314 950 321 638 l 104 943 q 38 996 38 943 q 104 1049 38 1049 l 371 1042 z "},"U":{"ha":949,"x_min":126,"x_max":822,"o":"m 724 85 q 680 32 724 85 q 474 -21 636 -21 q 224 85 311 -21 q 135 343 138 192 q 126 998 126 979 q 142 1036 126 1017 q 183 1056 157 1056 q 225 1036 210 1056 q 240 994 240 1017 q 239 900 240 972 q 233 568 233 729 q 238 356 233 407 q 258 249 243 304 q 297 158 272 193 q 474 76 357 76 q 671 192 619 76 q 715 456 715 292 q 712 801 715 621 q 708 985 708 982 q 724 1036 708 1017 q 765 1056 739 1056 q 807 1036 792 1056 q 822 985 822 1017 q 814 342 822 724 q 724 85 811 190 z "},"V":{"ha":868,"x_min":35,"x_max":833,"o":"m 515 42 q 444 -14 494 -14 q 374 38 394 -14 q 237 406 307 211 q 135 685 167 600 q 89 812 104 771 q 58 894 74 853 q 35 994 35 964 q 49 1040 35 1024 q 88 1056 64 1056 q 149 1004 128 1056 q 180 910 150 1001 q 251 694 210 818 q 335 444 292 569 q 447 147 438 147 q 517 333 457 147 q 651 759 578 519 q 724 1000 724 999 q 782 1056 740 1056 q 820 1040 807 1056 q 833 1004 833 1025 q 815 924 833 983 q 751 730 796 864 q 637 383 706 596 q 515 42 568 171 z "},"W":{"ha":1263,"x_min":38,"x_max":1221,"o":"m 946 47 q 873 -14 924 -14 q 800 43 822 -14 q 754 196 794 58 q 676 455 714 333 q 632 576 638 576 q 589 454 626 576 q 513 195 551 332 q 469 47 474 58 q 397 -14 446 -14 q 326 43 349 -14 q 223 382 303 117 q 103 767 143 647 q 38 996 38 968 q 51 1040 38 1024 q 86 1056 65 1056 q 147 1006 128 1056 q 210 783 149 1003 q 404 147 388 147 q 521 518 421 147 q 567 688 561 668 q 637 758 586 758 q 707 692 688 758 q 753 531 710 683 q 876 147 864 147 q 974 465 886 147 q 1118 1000 1061 783 q 1175 1056 1133 1056 q 1221 1000 1221 1056 q 1188 853 1221 967 q 1126 646 1154 740 q 946 47 988 175 z "},"X":{"ha":868,"x_min":46,"x_max":851,"o":"m 713 1056 q 726 1056 713 1056 q 753 1040 739 1056 q 767 1009 767 1025 q 753 968 767 993 q 704 886 740 943 q 486 539 585 697 q 738 146 676 221 q 788 99 764 113 q 825 86 813 85 q 844 85 838 88 q 851 68 851 82 q 829 6 851 29 q 776 -18 807 -18 q 661 69 724 -18 q 425 446 593 169 q 235 137 299 244 q 165 19 172 29 q 111 -14 142 -14 q 56 35 56 -14 q 68 77 56 57 q 126 167 81 97 q 242 342 172 236 q 367 533 313 449 q 160 899 238 769 q 115 942 138 929 q 78 954 92 956 q 46 975 46 951 q 67 1037 46 1014 q 119 1060 89 1060 q 174 1043 150 1060 q 235 974 199 1026 q 428 622 271 913 q 574 870 497 738 q 668 1029 650 1003 q 713 1056 686 1056 z "},"Y":{"ha":769,"x_min":21,"x_max":749,"o":"m 329 56 q 331 119 329 65 q 336 436 336 246 l 183 704 q 128 799 157 750 l 82 875 q 28 972 36 953 q 21 1008 21 992 q 33 1040 21 1025 q 67 1056 46 1056 q 101 1044 88 1056 q 132 1006 115 1033 q 164 947 149 978 q 390 543 268 733 q 603 919 518 744 q 624 962 613 940 q 642 996 636 983 q 656 1020 649 1008 q 669 1038 664 1032 q 681 1047 674 1043 q 708 1056 690 1056 q 737 1043 725 1056 q 749 1015 749 1031 q 744 984 749 999 q 726 943 740 969 q 699 894 713 917 q 655 818 686 871 q 599 721 624 765 l 436 436 q 440 153 436 243 q 443 56 443 63 q 386 -14 443 -14 q 329 56 329 -14 z "},"Z":{"ha":789,"x_min":47,"x_max":743,"o":"m 389 1042 l 651 1050 q 701 1037 681 1050 q 722 997 722 1024 q 711 952 722 971 q 667 881 700 933 q 334 337 457 549 q 193 96 211 125 q 396 92 276 92 l 674 100 q 724 85 706 100 q 743 44 743 71 q 674 -8 743 -8 l 396 0 l 115 -7 q 47 49 47 -7 q 58 85 47 67 q 111 169 69 103 q 382 610 228 353 q 576 944 536 868 l 389 950 l 136 943 q 85 958 104 943 q 65 997 65 972 q 136 1049 65 1049 l 389 1042 z "},"[":{"ha":483,"x_min":106,"x_max":447,"o":"m 269 -222 l 390 -218 q 431 -231 415 -218 q 447 -264 447 -243 q 431 -297 447 -285 q 390 -310 415 -310 l 269 -306 l 163 -311 q 122 -299 138 -311 q 106 -270 106 -286 q 110 -47 106 -254 q 114 368 114 160 q 110 783 114 576 q 106 1006 106 990 q 122 1035 106 1022 q 163 1047 138 1047 l 269 1042 l 390 1046 q 431 1033 415 1046 q 447 1000 447 1021 q 431 967 447 979 q 390 954 415 954 l 269 958 l 208 958 q 200 368 200 483 q 208 -222 200 253 l 269 -222 z "},"\\\\":{"ha":504,"x_min":79,"x_max":426,"o":"m 426 -156 q 376 -211 426 -211 q 321 -153 332 -211 q 303 -57 317 -136 q 171 590 228 350 q 97 904 114 831 q 79 997 79 978 q 129 1056 79 1056 q 185 997 172 1056 q 203 901 189 981 q 333 272 272 532 q 410 -62 393 11 q 426 -156 426 -135 z "},"]":{"ha":483,"x_min":36,"x_max":378,"o":"m 214 1042 l 321 1047 q 362 1035 346 1047 q 378 1006 378 1022 q 374 783 378 990 q 369 368 369 576 q 374 -47 369 160 q 378 -270 378 -254 q 362 -299 378 -286 q 321 -311 346 -311 l 214 -306 l 93 -310 q 52 -297 68 -310 q 36 -264 36 -285 q 52 -231 36 -243 q 93 -218 68 -218 l 214 -222 l 275 -222 q 283 368 283 253 q 275 958 283 483 l 214 958 l 93 954 q 52 967 68 954 q 36 1000 36 979 q 52 1033 36 1021 q 93 1046 68 1046 q 214 1042 93 1046 z "},"^":{"ha":724,"x_min":58,"x_max":668,"o":"m 561 758 q 608 677 561 758 q 662 579 656 596 q 668 549 668 563 q 655 524 668 536 q 618 511 642 511 q 576 544 594 511 q 524 647 576 549 q 442 802 472 744 q 389 897 411 860 q 361 933 367 933 q 333 897 356 933 q 281 802 311 860 q 222 692 250 744 q 146 544 146 549 q 104 511 128 511 q 69 523 81 511 q 58 551 58 535 q 76 601 58 568 q 134 703 93 635 q 196 808 175 772 q 242 892 217 844 q 313 1024 307 1013 q 363 1056 331 1056 q 414 1025 396 1056 q 561 758 467 919 z "},"_":{"ha":800,"x_min":69,"x_max":731,"o":"m 400 -222 l 674 -218 q 715 -231 699 -218 q 731 -264 731 -243 q 715 -297 731 -285 q 674 -310 699 -310 l 400 -306 l 126 -310 q 85 -297 101 -310 q 69 -264 69 -285 q 85 -231 69 -243 q 126 -218 101 -218 q 400 -222 126 -218 z "},"`":{"ha":396,"x_min":97,"x_max":299,"o":"m 299 853 q 261 824 299 824 q 160 883 224 824 q 97 1003 97 943 q 110 1040 97 1024 q 147 1056 122 1056 q 188 1036 172 1056 q 219 981 204 1017 q 244 933 233 946 q 269 901 254 919 q 299 853 299 869 z "},"a":{"ha":793,"x_min":67,"x_max":742,"o":"m 649 336 q 664 166 649 232 q 700 92 679 100 q 720 86 708 88 q 737 82 732 85 q 742 71 742 79 q 722 10 742 33 q 661 -14 701 -14 q 599 38 621 -14 q 576 169 576 89 q 474 39 542 92 q 323 -14 407 -14 q 178 42 239 -14 q 67 332 67 143 q 154 596 67 483 q 379 708 242 708 q 560 638 483 708 q 613 708 560 708 q 676 610 676 708 q 649 336 676 513 m 568 324 l 561 538 q 387 618 478 618 q 231 536 296 618 q 165 340 165 454 q 208 151 165 225 q 328 76 250 76 q 469 146 406 76 q 568 324 533 215 z "},"b":{"ha":767,"x_min":92,"x_max":701,"o":"m 701 363 q 614 99 701 211 q 389 -14 526 -14 q 208 57 285 -14 q 156 -14 208 -14 q 92 84 92 -14 q 119 358 92 182 q 107 715 119 453 q 94 997 94 976 q 109 1037 94 1018 q 149 1056 124 1056 q 188 1037 174 1056 q 203 986 203 1018 l 203 547 q 303 663 240 618 q 448 708 367 708 q 589 653 529 708 q 701 363 701 551 m 381 76 q 427 76 381 76 q 538 158 472 76 q 603 355 603 240 q 560 544 603 469 q 440 618 518 618 q 299 549 363 618 q 200 371 235 479 l 207 157 q 381 76 290 76 z "},"c":{"ha":707,"x_min":64,"x_max":654,"o":"m 619 143 q 654 106 654 143 q 574 24 654 69 q 404 -21 493 -21 q 161 87 258 -21 q 64 347 64 194 q 162 608 64 500 q 419 715 260 715 q 574 676 507 715 q 642 594 642 636 q 628 558 642 572 q 596 543 614 543 q 554 564 578 543 q 407 625 482 625 q 240 544 311 625 q 168 349 168 464 q 240 151 168 233 q 419 69 313 69 q 579 125 501 69 q 619 143 606 143 z "},"d":{"ha":817,"x_min":65,"x_max":772,"o":"m 589 317 l 589 538 q 392 618 506 618 q 235 536 303 618 q 168 344 168 454 q 217 155 168 233 q 349 76 265 76 q 589 317 494 76 m 736 89 q 772 68 772 89 q 753 14 772 42 q 694 -14 735 -14 q 631 31 654 -14 q 599 172 608 75 q 342 -14 497 -14 q 186 44 251 -14 q 93 179 121 103 q 65 332 65 256 q 157 596 65 483 q 392 708 249 708 q 589 640 496 708 q 592 923 592 833 q 605 1034 592 1013 q 648 1056 618 1056 q 697 1031 678 1056 q 715 960 715 1007 q 710 844 715 913 q 693 662 704 775 q 675 457 682 549 q 688 192 675 288 q 736 89 700 96 z "},"e":{"ha":749,"x_min":33,"x_max":681,"o":"m 376 374 q 423 374 376 374 q 526 406 469 374 q 582 492 582 438 q 545 585 582 546 q 440 625 508 625 q 286 556 349 625 q 206 396 224 488 q 376 374 282 374 m 428 715 q 484 715 428 715 q 610 653 540 715 q 681 490 681 590 q 594 338 681 390 q 381 286 507 286 q 204 307 308 286 q 277 140 213 210 q 421 69 342 69 q 508 83 468 69 q 569 111 549 96 q 642 154 625 154 q 670 144 660 154 q 681 118 681 133 q 601 29 681 79 q 428 -21 521 -21 q 199 81 283 -21 q 107 325 114 182 q 33 397 33 347 q 45 430 33 418 q 74 442 57 442 q 115 429 90 442 q 231 635 146 554 q 428 715 317 715 z "},"f":{"ha":454,"x_min":28,"x_max":472,"o":"m 243 694 l 378 697 q 415 686 400 697 q 431 653 431 675 q 378 611 431 611 l 243 614 l 243 521 q 247 199 243 329 q 251 47 251 68 q 237 6 251 25 q 197 -14 222 -14 q 158 6 172 -14 q 143 47 143 25 q 144 133 143 68 q 151 521 151 329 l 151 614 l 81 611 q 28 653 28 611 q 43 686 28 675 q 81 697 58 697 l 150 694 l 150 813 q 201 999 150 942 q 318 1056 251 1056 q 428 1030 385 1056 q 472 975 472 1004 q 433 929 472 929 q 386 946 415 929 q 329 963 357 963 q 243 800 243 963 l 243 694 z "},"g":{"ha":775,"x_min":65,"x_max":681,"o":"m 567 325 l 567 538 q 398 618 490 618 q 237 535 306 618 q 168 340 168 453 q 211 151 168 226 q 330 76 254 76 q 469 147 406 76 q 567 325 533 218 m 564 643 q 617 708 567 708 q 681 610 681 708 q 653 336 681 513 q 669 83 669 167 q 584 -209 669 -99 q 344 -319 499 -319 q 182 -284 258 -319 q 106 -213 106 -249 q 138 -178 106 -178 q 209 -203 150 -178 q 344 -229 268 -229 q 519 -146 456 -229 q 583 69 583 -62 q 576 169 583 124 q 477 40 546 94 q 335 -14 408 -14 q 211 18 263 -14 q 128 101 160 50 q 65 344 65 206 q 159 595 65 482 q 390 708 253 708 q 564 643 486 708 z "},"h":{"ha":801,"x_min":92,"x_max":751,"o":"m 686 438 l 679 219 q 680 160 679 181 q 688 119 681 140 q 707 92 696 97 q 730 86 718 88 q 747 82 742 85 q 751 71 751 79 q 728 10 751 35 q 675 -14 706 -14 q 602 28 622 -14 q 582 150 582 69 l 588 406 q 547 558 588 500 q 435 617 507 617 q 297 538 364 617 q 204 358 231 458 l 208 57 q 156 -14 208 -14 q 92 84 92 -14 q 119 358 92 182 q 107 715 119 453 q 94 997 94 976 q 109 1037 94 1018 q 149 1056 124 1056 q 188 1037 174 1056 q 203 986 203 1018 l 203 532 q 453 708 304 708 q 625 629 564 708 q 686 438 686 550 z "},"i":{"ha":311,"x_min":93,"x_max":219,"o":"m 163 1007 q 177 1007 163 1007 q 206 988 192 1007 q 219 941 219 969 q 200 884 219 913 q 151 856 181 856 q 108 875 122 856 q 93 926 93 894 q 113 983 93 958 q 163 1007 133 1007 m 201 347 l 208 56 q 156 -14 208 -14 q 103 56 103 -14 l 110 347 l 103 639 q 156 708 103 708 q 208 639 208 708 l 201 347 z "},"j":{"ha":310,"x_min":-10,"x_max":219,"o":"m 163 1007 q 177 1007 163 1007 q 206 988 192 1007 q 219 941 219 969 q 200 884 219 913 q 151 856 181 856 q 108 875 122 856 q 93 926 93 894 q 113 983 93 958 q 163 1007 133 1007 m 201 319 l 200 14 q 140 -184 200 -106 q 28 -262 79 -262 q -10 -236 -10 -262 q 50 -158 -10 -217 q 92 -87 74 -136 q 111 28 111 -37 l 110 319 l 103 639 q 156 708 103 708 q 208 639 208 708 l 201 319 z "},"k":{"ha":708,"x_min":92,"x_max":661,"o":"m 204 358 l 208 57 q 156 -14 208 -14 q 92 84 92 -14 q 119 358 92 182 q 107 715 119 453 q 94 997 94 976 q 109 1037 94 1018 q 149 1056 124 1056 q 188 1037 174 1056 q 203 986 203 1018 l 203 532 q 453 708 304 708 q 582 661 533 708 q 631 546 631 614 q 513 351 631 432 q 444 307 486 333 l 547 149 q 603 96 574 108 q 647 83 632 83 q 661 71 661 83 q 640 12 661 38 q 590 -14 619 -14 q 545 -5 561 -14 q 510 30 529 4 q 475 83 492 56 q 351 276 394 215 q 292 297 315 276 q 268 344 268 317 q 287 390 268 372 q 336 408 306 408 q 399 374 367 408 q 492 446 451 397 q 533 533 533 494 q 512 594 533 572 q 447 617 490 617 q 300 538 369 617 q 204 358 231 460 z "},"l":{"ha":311,"x_min":103,"x_max":208,"o":"m 201 521 l 208 56 q 156 -14 208 -14 q 103 56 103 -14 l 110 521 l 103 986 q 156 1056 103 1056 q 208 986 208 1056 l 201 521 z "},"m":{"ha":1218,"x_min":94,"x_max":1168,"o":"m 1103 438 l 1096 219 q 1097 160 1096 181 q 1105 119 1097 140 q 1124 92 1113 97 q 1147 86 1135 88 q 1163 82 1158 85 q 1168 71 1168 79 q 1145 10 1168 35 q 1092 -14 1122 -14 q 1019 28 1039 -14 q 999 150 999 69 l 1004 406 q 967 558 1004 500 q 865 617 931 617 q 736 538 799 617 q 649 358 674 458 l 653 57 q 600 -14 653 -14 q 536 84 536 -14 q 564 358 536 182 q 422 617 564 617 q 294 538 357 617 q 207 358 232 458 l 211 57 q 158 -14 211 -14 q 94 84 94 -14 q 122 358 94 182 q 110 519 122 417 q 99 647 99 622 q 113 690 99 671 q 153 708 128 708 q 192 690 178 708 q 207 647 207 671 q 206 590 207 624 q 206 532 206 556 q 442 708 300 708 q 576 660 524 708 q 647 532 628 613 q 883 708 742 708 q 1045 629 988 708 q 1103 438 1103 550 z "},"n":{"ha":804,"x_min":94,"x_max":754,"o":"m 689 438 l 682 219 q 683 160 682 181 q 691 119 683 140 q 710 92 699 97 q 733 86 721 88 q 749 82 744 85 q 754 71 754 79 q 731 10 754 35 q 678 -14 708 -14 q 605 28 625 -14 q 585 150 585 69 l 590 406 q 550 558 590 500 q 438 617 510 617 q 300 538 367 617 q 207 358 233 458 l 211 57 q 158 -14 211 -14 q 94 84 94 -14 q 122 358 94 182 q 110 519 122 417 q 99 647 99 622 q 113 690 99 671 q 153 708 128 708 q 192 690 178 708 q 207 647 207 671 q 206 590 207 624 q 206 532 206 556 q 456 708 307 708 q 628 629 567 708 q 689 438 689 550 z "},"o":{"ha":781,"x_min":64,"x_max":717,"o":"m 551 151 q 584 192 551 151 q 618 349 618 233 q 553 544 618 464 q 393 625 489 625 q 230 543 297 625 q 163 346 163 461 q 227 150 163 231 q 388 69 292 69 q 551 151 483 69 m 391 715 q 462 715 391 715 q 625 609 533 715 q 717 349 717 503 q 624 87 717 194 q 389 -21 531 -21 q 156 85 247 -21 q 64 346 64 192 q 156 608 64 500 q 391 715 249 715 z "},"p":{"ha":792,"x_min":76,"x_max":726,"o":"m 400 76 q 556 158 489 76 q 624 351 624 240 q 575 540 624 461 q 443 618 526 618 q 203 378 297 618 l 203 157 q 400 76 286 76 m 117 264 l 118 317 l 118 339 q 106 510 118 397 q 93 647 93 622 q 108 690 93 671 q 147 708 122 708 q 187 690 172 708 q 201 647 201 671 q 201 588 201 624 q 200 529 200 553 q 303 661 246 614 q 450 708 360 708 q 606 650 540 708 q 699 515 671 592 q 726 363 726 439 q 635 99 726 211 q 400 -14 543 -14 q 203 54 296 -14 q 200 -195 200 -114 q 186 -298 200 -276 q 143 -319 172 -319 q 95 -295 114 -319 q 76 -225 76 -271 q 82 -116 76 -179 q 99 51 88 -53 q 117 238 110 154 l 117 264 z "},"q":{"ha":768,"x_min":67,"x_max":676,"o":"m 67 332 q 154 596 67 483 q 379 708 242 708 q 560 638 483 708 q 613 708 560 708 q 676 610 676 708 q 649 336 676 513 q 661 4 649 249 q 674 -261 674 -240 q 659 -301 674 -282 q 619 -319 644 -319 q 580 -301 594 -319 q 565 -250 565 -282 l 565 147 q 465 31 528 76 q 320 -14 401 -14 q 178 42 239 -14 q 67 332 67 143 m 387 618 q 341 618 387 618 q 231 536 296 618 q 165 340 165 454 q 208 151 165 225 q 328 76 250 76 q 469 146 406 76 q 568 324 533 215 l 561 538 q 387 618 478 618 z "},"r":{"ha":567,"x_min":94,"x_max":544,"o":"m 207 318 l 211 57 q 158 -14 211 -14 q 94 84 94 -14 q 122 358 94 182 q 110 518 122 417 q 99 644 99 619 q 113 689 99 669 q 153 708 128 708 q 192 689 178 708 q 207 647 207 669 q 206 588 207 624 q 206 529 206 553 q 292 654 233 600 q 414 708 351 708 q 510 683 476 708 q 544 628 544 657 q 529 582 544 599 q 490 565 514 565 q 437 591 465 565 q 392 617 408 617 q 285 518 346 617 q 207 318 224 419 z "},"s":{"ha":632,"x_min":50,"x_max":578,"o":"m 578 200 q 501 46 578 106 q 316 -14 424 -14 q 129 35 208 -14 q 50 133 50 85 q 63 167 50 154 q 91 181 75 181 q 117 174 107 181 q 143 150 126 168 q 173 119 160 132 q 227 92 186 107 q 303 76 268 76 q 428 108 379 76 q 478 199 478 139 q 339 319 478 271 q 224 362 282 339 q 126 425 167 385 q 86 521 86 465 q 154 652 86 596 q 321 708 222 708 q 477 674 419 708 q 535 603 535 640 q 486 557 535 557 q 444 572 465 557 q 319 618 379 618 q 222 591 260 618 q 185 528 185 564 q 225 468 185 493 q 323 422 265 443 q 439 376 381 401 q 538 305 497 350 q 578 200 578 260 z "},"t":{"ha":468,"x_min":28,"x_max":439,"o":"m 254 610 l 251 281 q 262 115 251 154 q 317 76 272 76 q 367 91 338 76 q 407 106 397 106 q 436 77 436 106 q 385 17 436 49 q 283 -14 333 -14 q 163 164 163 -14 l 161 610 q 97 606 115 606 q 28 651 28 606 q 97 697 28 697 q 158 694 103 697 l 156 850 q 208 919 156 919 q 261 850 261 919 l 257 693 l 369 699 q 439 651 439 699 q 369 607 439 607 q 254 610 357 607 z "},"u":{"ha":811,"x_min":86,"x_max":760,"o":"m 210 594 l 199 289 q 239 135 199 194 q 351 76 279 76 q 489 156 422 76 q 582 336 556 236 l 578 638 q 631 708 578 708 q 694 610 694 708 q 667 336 694 513 q 682 166 667 232 q 718 92 697 100 q 738 86 726 88 q 755 82 750 85 q 760 71 760 79 q 737 10 760 33 q 679 -14 714 -14 q 592 164 592 -14 q 333 -14 489 -14 q 161 69 222 -14 q 100 271 100 151 l 108 481 q 97 584 108 536 q 86 653 86 632 q 103 691 86 674 q 146 708 119 708 q 210 594 210 708 z "},"v":{"ha":674,"x_min":32,"x_max":643,"o":"m 327 126 q 331 118 327 126 q 339 111 335 111 q 351 126 343 111 q 371 172 358 140 q 392 229 383 204 q 419 303 401 254 l 443 371 q 499 537 465 432 q 539 658 532 642 q 593 708 558 708 q 628 695 614 708 q 643 663 643 682 q 631 613 643 644 q 588 502 619 582 q 499 261 557 422 q 413 43 442 100 q 335 -14 383 -14 q 263 36 288 -14 q 190 220 253 56 q 107 438 128 385 q 74 519 86 490 q 53 578 63 549 q 32 659 32 636 q 46 695 32 682 q 81 708 60 708 q 138 660 118 708 q 178 538 144 643 q 228 392 213 433 q 260 304 243 351 q 285 231 276 257 q 307 172 294 204 q 327 126 319 140 z "},"w":{"ha":1092,"x_min":35,"x_max":1057,"o":"m 318 111 q 408 375 331 111 q 494 658 486 639 q 556 708 514 708 q 615 660 599 708 q 657 514 631 613 q 696 372 683 415 q 785 111 772 111 q 876 371 799 111 q 922 533 894 431 q 956 654 950 636 q 1007 708 972 708 q 1042 696 1028 708 q 1057 666 1057 683 q 1053 634 1057 649 q 1041 592 1050 619 q 1022 535 1032 565 q 994 449 1013 504 q 929 250 975 394 q 857 39 883 106 q 781 -14 836 -14 q 700 58 725 -14 q 604 363 650 203 q 547 524 558 524 q 522 469 538 524 q 497 383 506 414 q 485 340 488 351 q 385 35 411 85 q 308 -14 361 -14 q 229 63 256 -14 q 190 182 219 90 q 141 330 160 274 q 103 439 122 386 q 74 522 85 492 q 53 582 63 553 q 35 658 35 636 q 49 694 35 681 q 85 708 64 708 q 140 660 125 708 q 177 538 146 643 q 222 391 208 433 q 249 304 235 349 q 272 232 263 260 q 292 172 281 204 q 318 111 311 111 z "},"x":{"ha":683,"x_min":39,"x_max":660,"o":"m 535 151 q 602 88 571 104 q 647 71 633 71 q 660 64 660 71 q 640 4 660 29 q 598 -21 619 -21 q 564 -16 576 -21 q 538 3 551 -11 q 511 31 524 17 q 478 75 499 46 q 441 130 458 104 q 393 201 424 156 q 336 286 363 247 q 217 110 278 201 q 142 3 157 19 q 110 -14 128 -14 q 78 -1 93 -14 q 64 29 64 13 q 68 57 64 46 q 89 91 72 68 q 126 142 106 114 q 285 363 185 217 l 165 540 q 110 597 136 578 q 69 618 83 617 q 39 633 39 621 q 58 692 39 668 q 110 715 76 715 q 174 679 143 715 q 254 567 204 643 q 310 483 304 492 q 324 461 315 475 q 342 435 333 447 q 501 675 497 669 q 545 708 525 708 q 579 694 565 708 q 593 662 593 679 q 576 617 593 644 q 499 508 560 590 q 393 364 438 425 l 535 151 z "},"y":{"ha":789,"x_min":86,"x_max":694,"o":"m 582 336 l 578 638 q 631 708 578 708 q 694 604 694 708 q 665 336 694 522 q 682 83 682 167 q 593 -209 682 -99 q 343 -319 504 -319 q 181 -284 257 -319 q 104 -213 104 -249 q 136 -178 104 -178 q 213 -203 150 -178 q 343 -229 276 -229 q 528 -146 460 -229 q 596 69 596 -62 q 592 164 596 118 q 333 -14 489 -14 q 161 69 222 -14 q 100 271 100 151 l 108 481 q 97 584 108 536 q 86 653 86 632 q 103 691 86 674 q 146 708 119 708 q 210 594 210 708 l 199 289 q 239 135 199 194 q 351 76 279 76 q 489 156 422 76 q 582 336 556 236 z "},"z":{"ha":664,"x_min":49,"x_max":618,"o":"m 340 83 l 549 90 q 618 42 618 90 q 549 -7 618 -7 l 340 0 q 115 -7 340 0 q 49 42 49 -7 q 97 133 49 78 q 247 320 182 232 q 344 452 311 408 q 394 518 378 496 q 453 607 439 581 q 335 611 349 611 l 132 604 q 63 653 63 604 q 132 701 63 701 l 335 694 l 532 701 q 599 653 599 701 q 573 589 599 622 q 524 528 547 556 q 358 316 461 454 q 193 86 256 178 q 340 83 276 83 z "},"{":{"ha":426,"x_min":19,"x_max":369,"o":"m 317 -218 q 353 -233 338 -218 q 368 -269 368 -247 q 354 -305 368 -290 q 317 -319 340 -319 q 212 -281 257 -319 q 167 -169 167 -242 q 177 -41 167 -133 q 188 113 188 51 q 177 231 188 174 q 144 299 167 288 q 90 286 117 286 q 41 304 63 286 q 19 356 19 322 q 42 413 19 390 q 96 435 64 435 q 144 426 128 435 q 175 508 161 447 q 189 626 189 569 q 178 774 189 682 q 168 903 168 867 q 213 1015 168 975 q 318 1056 258 1056 q 356 1041 342 1056 q 369 1005 369 1026 q 354 969 369 983 q 318 954 339 954 q 265 889 265 954 q 276 781 265 868 q 286 622 286 693 q 218 374 286 463 q 253 323 242 343 q 274 249 264 303 q 285 117 285 194 q 274 -47 285 40 q 264 -156 264 -135 q 317 -218 264 -218 z "},"|":{"ha":306,"x_min":104,"x_max":201,"o":"m 200 1042 l 194 354 q 198 -130 194 28 q 201 -306 201 -287 q 153 -375 201 -375 q 104 -306 104 -375 q 106 -193 104 -287 q 111 354 111 28 l 106 1042 q 153 1111 106 1111 q 200 1042 200 1111 z "},"}":{"ha":426,"x_min":57,"x_max":407,"o":"m 331 435 q 347 435 331 435 q 385 413 363 435 q 407 356 407 390 q 385 304 407 322 q 337 286 364 286 q 282 299 310 286 q 249 231 260 288 q 239 113 239 174 q 249 -41 239 51 q 260 -169 260 -133 q 215 -281 260 -242 q 110 -319 169 -319 q 72 -305 86 -319 q 58 -269 58 -290 q 74 -233 58 -247 q 110 -218 89 -218 q 163 -156 163 -218 q 152 -47 163 -135 q 142 117 142 40 q 152 249 142 194 q 174 323 163 303 q 208 374 185 343 q 140 622 140 463 q 151 781 140 693 q 161 889 161 868 q 108 954 161 954 q 72 969 88 954 q 57 1005 57 983 q 71 1041 57 1026 q 108 1056 85 1056 q 213 1015 168 1056 q 258 903 258 975 q 248 774 258 867 q 238 626 238 682 q 251 508 238 569 q 282 426 265 447 q 331 435 299 435 z "},"~":{"ha":767,"x_min":82,"x_max":686,"o":"m 686 408 q 686 390 686 408 q 636 331 686 372 q 533 289 586 289 q 405 329 479 289 q 290 369 331 369 q 205 327 249 369 q 135 285 161 285 q 96 298 110 285 q 82 331 82 311 q 142 415 82 375 q 272 456 201 456 q 417 415 342 456 q 526 375 493 375 q 582 392 558 375 q 622 427 606 410 q 654 444 639 444 q 686 408 686 444 z "},"\xa0":{"ha":331,"x_min":0,"x_max":0,"o":""},"\xa1":{"ha":306,"x_min":89,"x_max":217,"o":"m 158 757 q 172 757 158 757 q 201 735 186 757 q 217 681 217 713 q 197 624 217 650 q 148 597 176 597 q 104 618 119 597 q 89 672 89 639 q 109 731 89 704 q 158 757 129 757 m 203 381 l 199 86 q 203 -119 199 4 q 208 -250 208 -242 q 153 -319 208 -319 q 97 -250 97 -319 q 102 -119 97 -242 q 107 86 107 4 l 103 381 q 153 450 103 450 q 203 381 203 450 z "},"\xa2":{"ha":742,"x_min":79,"x_max":669,"o":"m 453 825 l 450 714 q 595 672 533 710 q 657 594 657 633 q 643 558 657 572 q 611 543 629 543 q 547 580 593 543 q 449 624 500 617 q 447 388 447 551 q 450 69 447 225 q 567 108 510 74 q 635 143 624 143 q 669 108 669 143 q 601 31 669 74 q 451 -19 533 -11 l 454 -117 q 406 -187 454 -187 q 357 -117 357 -187 q 358 -15 357 -65 q 157 109 235 7 q 79 346 79 211 q 155 582 79 481 q 360 708 231 683 q 358 831 358 767 q 406 896 358 896 q 453 825 453 896 m 361 81 q 364 323 364 233 q 363 498 364 413 q 363 615 363 583 q 235 518 286 592 q 183 350 183 444 q 233 181 183 256 q 361 81 282 107 z "},"\xa3":{"ha":744,"x_min":83,"x_max":672,"o":"m 507 446 l 299 450 q 301 351 301 394 q 285 256 300 308 q 256 174 271 204 q 213 90 242 143 q 352 89 258 89 q 520 94 446 89 q 615 99 594 99 q 653 85 635 99 q 672 46 672 71 q 653 7 672 21 q 603 -7 635 -7 l 393 0 l 168 -7 q 117 11 136 -7 q 97 59 97 29 q 124 131 97 89 q 179 234 151 174 q 208 346 207 294 q 206 447 208 397 l 140 446 q 99 458 115 446 q 83 492 83 471 q 99 525 83 513 q 129 538 115 538 q 160 537 143 538 q 192 536 178 536 q 175 611 188 556 q 151 763 151 714 q 222 926 151 860 q 418 993 292 993 q 563 954 493 993 q 635 874 633 915 q 624 844 635 858 q 591 831 613 831 q 517 866 569 831 q 400 901 464 901 q 294 865 336 901 q 251 768 251 829 q 286 533 251 707 l 507 538 q 548 525 532 538 q 564 492 564 513 q 548 458 564 471 q 507 446 532 446 z "},"\xa4":{"ha":890,"x_min":86,"x_max":803,"o":"m 692 574 q 735 406 735 499 q 692 239 735 314 l 775 160 q 803 112 803 135 q 788 74 803 89 q 752 58 772 58 q 710 78 732 58 q 629 161 688 99 q 444 94 551 94 q 261 163 338 94 l 188 86 q 136 60 157 60 q 101 74 115 60 q 86 112 86 89 q 114 160 86 135 l 199 242 q 158 404 158 314 q 200 569 158 494 q 114 654 122 644 q 86 705 86 685 q 101 740 86 725 q 140 756 117 756 q 188 728 163 756 l 264 649 q 445 715 342 715 q 628 650 549 715 l 701 728 q 753 754 732 754 q 788 740 774 754 q 803 702 803 725 q 775 654 803 679 q 692 574 735 614 m 444 186 q 485 186 444 186 q 583 251 525 186 q 640 408 640 317 q 585 562 640 499 q 450 625 531 625 q 312 560 369 625 q 254 403 254 494 q 309 249 254 313 q 444 186 364 186 z "},"\xa5":{"ha":813,"x_min":74,"x_max":735,"o":"m 453 313 l 656 317 q 697 305 681 317 q 713 272 713 293 q 697 240 713 251 q 635 228 681 228 q 453 232 590 228 l 457 56 q 403 -14 457 -14 q 349 56 349 -14 l 354 232 q 182 228 225 228 q 123 240 139 228 q 107 272 107 251 q 123 305 107 293 q 164 317 139 317 l 354 313 l 354 422 q 182 418 225 418 q 123 430 139 418 q 107 463 107 442 q 123 495 107 483 q 157 507 139 507 q 314 503 210 507 l 200 704 q 120 841 140 807 q 89 894 100 875 q 74 947 74 926 q 88 980 74 967 q 117 993 101 993 q 142 990 133 993 q 160 976 151 986 q 176 956 169 965 q 194 926 183 946 q 213 892 206 907 q 234 847 219 876 q 307 701 249 818 q 407 518 365 583 q 536 761 443 572 q 644 972 629 950 q 683 993 660 993 q 720 980 706 993 q 735 955 735 967 q 734 938 735 943 q 732 928 733 933 q 726 913 731 922 q 716 895 721 904 q 701 869 711 886 q 680 833 690 851 q 651 784 669 815 q 615 721 633 753 l 492 503 q 642 507 604 507 q 697 495 681 507 q 713 463 713 483 q 697 430 713 442 q 633 418 681 418 q 453 422 586 418 l 453 313 z "},"\xa6":{"ha":322,"x_min":113,"x_max":210,"o":"m 203 740 l 210 535 q 197 488 210 506 q 160 471 183 471 q 113 535 113 471 l 119 740 q 114 950 119 740 q 160 1010 114 1010 q 208 950 208 1010 l 203 740 m 203 -50 l 210 -256 q 197 -302 210 -285 q 160 -319 183 -319 q 113 -256 113 -319 l 119 -50 l 114 160 q 160 219 114 219 q 208 160 208 219 l 203 -50 z "},"\xa7":{"ha":744,"x_min":75,"x_max":674,"o":"m 524 576 q 555 556 524 576 q 630 477 586 535 q 674 349 674 419 q 635 218 674 279 q 532 122 596 157 q 624 -67 624 38 q 540 -249 624 -171 q 328 -326 456 -326 q 156 -281 238 -326 q 75 -189 75 -235 q 87 -158 75 -169 q 117 -147 99 -147 q 154 -161 135 -147 q 191 -191 174 -175 q 245 -221 208 -207 q 328 -235 282 -235 q 459 -187 406 -235 q 513 -65 513 -140 q 469 35 513 -14 q 363 123 425 83 q 240 203 301 163 q 134 299 178 244 q 90 423 90 353 q 142 550 90 493 q 279 626 193 607 q 140 835 140 738 q 213 997 140 932 q 385 1063 286 1063 q 550 1031 483 1063 q 617 956 617 999 q 606 928 617 939 q 578 917 594 917 q 539 931 561 917 q 405 971 472 971 q 294 935 338 971 q 251 846 251 900 q 295 744 251 792 q 401 658 339 697 q 524 576 463 618 m 451 181 q 538 247 506 200 q 571 356 571 293 q 494 481 571 418 q 350 543 418 543 q 238 508 282 543 q 193 419 193 474 q 250 321 193 369 q 358 243 290 288 q 451 181 425 199 z "},"\xa8":{"ha":543,"x_min":97,"x_max":446,"o":"m 167 1007 q 181 1007 167 1007 q 210 988 196 1007 q 224 941 224 969 q 204 884 224 913 q 156 856 185 856 q 112 875 126 856 q 97 926 97 894 q 117 983 97 958 q 167 1007 138 1007 m 389 1007 q 403 1007 389 1007 q 432 988 418 1007 q 446 941 446 969 q 426 884 446 913 q 378 856 407 856 q 334 875 349 856 q 319 926 319 894 q 340 983 319 958 q 389 1007 360 1007 z "},"\xa9":{"ha":1050,"x_min":89,"x_max":961,"o":"m 532 882 q 639 859 590 882 q 688 806 688 836 q 650 767 688 767 q 605 786 639 767 q 539 806 571 806 q 413 748 458 806 q 368 611 368 690 q 417 476 368 532 q 539 421 467 421 q 619 438 578 421 q 669 456 661 456 q 700 424 700 456 q 651 373 700 401 q 532 344 603 344 q 355 424 426 344 q 283 614 283 503 q 353 803 283 725 q 532 882 422 882 m 833 926 q 897 862 833 926 q 961 614 961 797 q 833 301 961 431 q 525 172 706 172 q 217 301 344 172 q 89 614 89 431 q 217 926 89 797 q 525 1056 344 1056 q 833 926 706 1056 m 773 353 q 825 407 773 353 q 876 614 876 461 q 773 874 876 767 q 524 982 669 982 q 275 874 378 982 q 172 614 172 767 q 275 353 172 461 q 524 246 378 246 q 773 353 669 246 z "},"\xaa":{"ha":569,"x_min":65,"x_max":503,"o":"m 442 758 q 450 681 442 728 q 483 619 458 625 q 493 617 489 618 q 503 610 503 615 q 485 563 503 581 q 439 544 468 544 q 374 656 385 544 q 315 577 356 610 q 225 544 274 544 q 108 610 150 544 q 65 762 65 675 q 121 917 65 849 q 261 986 176 986 q 367 942 322 986 q 413 986 374 986 q 458 907 458 986 q 442 758 458 894 m 369 764 l 365 865 q 268 910 321 910 q 181 866 215 910 q 146 760 146 822 q 169 658 146 699 q 231 618 192 618 q 311 662 271 618 q 369 764 351 706 z "},"\xab":{"ha":704,"x_min":61,"x_max":618,"o":"m 92 428 q 86 433 92 428 q 71 454 81 439 q 61 487 61 469 q 72 519 61 504 q 119 567 83 535 q 171 615 156 600 q 206 653 186 631 q 236 683 226 675 q 281 708 260 708 q 315 695 303 708 q 328 663 328 682 q 315 631 328 644 q 273 597 301 617 q 231 564 244 576 q 164 485 164 504 q 231 406 164 465 q 273 373 244 393 q 315 339 301 353 q 328 306 328 325 q 315 274 328 288 q 287 261 303 261 q 258 269 271 261 q 235 285 244 276 q 206 317 226 294 q 170 355 186 339 q 129 394 154 371 q 92 428 104 417 m 383 428 q 377 433 383 428 q 361 454 371 439 q 351 487 351 469 q 363 519 351 504 q 410 567 374 535 q 461 615 446 600 q 497 653 476 631 q 525 683 517 675 q 572 708 550 708 q 606 695 593 708 q 618 663 618 682 q 605 631 618 644 q 563 597 592 617 q 521 564 535 576 q 454 485 454 504 q 521 406 454 465 q 563 373 535 393 q 605 339 592 353 q 618 306 618 325 q 606 274 618 288 q 577 261 593 261 q 548 269 561 261 q 526 285 535 276 q 497 317 517 294 q 460 355 476 339 q 419 394 444 371 q 383 428 394 417 z "},"\xac":{"ha":881,"x_min":108,"x_max":772,"o":"m 769 265 l 772 182 q 758 141 772 157 q 724 125 744 125 q 689 141 703 125 q 675 182 675 157 l 679 265 l 679 318 q 439 321 571 321 l 165 317 q 124 329 139 317 q 108 363 108 342 q 124 396 108 383 q 165 408 139 408 l 439 404 l 713 408 q 772 349 772 408 l 769 265 z "},"\xad":{"ha":594,"x_min":92,"x_max":503,"o":"m 297 404 l 446 408 q 487 396 471 408 q 503 363 503 383 q 487 329 503 342 q 446 317 471 317 l 297 321 l 149 317 q 108 329 124 317 q 92 363 92 342 q 108 396 92 383 q 149 408 124 408 l 297 404 z "},"\xae":{"ha":1050,"x_min":89,"x_max":961,"o":"m 833 926 q 897 862 833 926 q 961 614 961 797 q 833 301 961 431 q 525 172 706 172 q 217 301 344 172 q 89 614 89 431 q 217 926 89 797 q 525 1056 344 1056 q 833 926 706 1056 m 773 353 q 825 407 773 353 q 876 614 876 461 q 773 874 876 767 q 524 982 669 982 q 275 874 378 982 q 172 614 172 767 q 275 353 172 461 q 524 246 378 246 q 773 353 669 246 m 342 638 l 335 828 q 506 893 335 893 q 658 843 606 893 q 710 731 710 793 q 597 578 710 631 q 622 533 611 556 q 663 472 646 493 q 721 438 686 438 q 731 431 731 438 q 713 385 731 404 q 673 367 696 367 q 630 385 650 367 q 597 426 610 404 q 560 491 583 449 q 519 560 536 533 q 469 554 486 554 q 418 560 451 554 q 422 428 422 460 q 410 381 422 397 q 378 365 397 365 q 336 418 336 365 l 342 638 m 550 640 q 602 667 576 640 q 628 729 628 693 q 599 792 628 765 q 515 818 571 818 q 418 806 458 818 q 416 732 418 789 q 414 643 414 675 q 474 656 442 656 q 550 640 506 656 z "},"\xaf":{"ha":606,"x_min":69,"x_max":536,"o":"m 303 972 l 479 976 q 520 964 504 976 q 536 931 536 951 q 520 897 536 910 q 479 885 504 885 l 303 889 l 126 885 q 85 897 101 885 q 69 931 69 910 q 85 964 69 951 q 126 976 101 976 l 303 972 z "},"\xb0":{"ha":464,"x_min":68,"x_max":396,"o":"m 351 935 q 373 906 351 935 q 396 790 396 876 q 351 646 396 704 q 232 588 306 588 q 113 646 158 588 q 68 790 68 704 q 113 935 68 876 q 232 993 158 993 q 351 935 306 993 m 292 699 q 302 717 292 699 q 313 790 313 735 q 292 881 313 846 q 233 917 271 917 q 173 881 194 917 q 151 790 151 844 q 173 700 151 736 q 233 664 194 664 q 292 699 271 664 z "},"\xb1":{"ha":792,"x_min":93,"x_max":699,"o":"m 396 83 l 642 88 q 683 75 667 88 q 699 42 699 63 q 683 8 699 21 q 642 -4 667 -4 l 396 0 l 150 -4 q 109 8 125 -4 q 93 42 93 21 q 109 75 93 63 q 150 88 125 88 q 396 83 150 88 m 439 494 l 642 499 q 683 486 667 499 q 699 453 699 474 q 683 419 699 432 q 642 407 667 407 q 439 411 572 407 l 444 235 q 431 193 444 208 q 396 178 418 178 q 350 235 350 178 q 356 411 350 239 q 169 407 214 407 q 109 419 125 407 q 93 453 93 432 q 109 486 93 474 q 150 499 125 499 l 356 494 q 350 651 350 644 q 396 708 350 708 q 431 693 418 708 q 444 661 444 678 q 439 494 444 644 z "},"\xb2":{"ha":519,"x_min":68,"x_max":453,"o":"m 251 546 l 394 553 q 453 508 453 553 q 394 464 453 464 l 253 469 q 124 464 253 469 q 85 477 101 464 q 68 513 68 490 q 80 556 68 535 q 108 597 92 578 q 326 911 326 842 q 306 961 326 942 q 249 981 286 981 q 178 949 211 981 q 126 918 146 918 q 97 929 107 918 q 86 958 86 940 q 135 1026 86 989 q 257 1063 183 1063 q 374 1019 331 1063 q 417 922 417 976 q 404 859 417 885 q 385 820 392 833 q 365 785 379 807 q 344 756 350 764 q 320 724 338 747 q 290 684 303 701 q 234 614 278 667 q 181 546 190 561 l 251 546 z "},"\xb3":{"ha":514,"x_min":67,"x_max":450,"o":"m 244 1060 l 346 1063 q 421 1011 421 1063 q 406 976 421 994 q 355 921 392 958 q 288 846 318 883 q 407 778 364 829 q 450 656 450 728 q 394 524 450 583 q 244 464 339 464 q 122 506 178 464 q 67 583 67 547 q 100 618 67 618 q 135 600 117 618 q 246 547 190 547 q 332 579 301 547 q 363 663 363 611 q 327 748 363 714 q 240 785 292 782 q 164 739 196 739 q 114 786 114 739 q 135 824 114 806 q 197 851 156 843 q 313 978 250 907 q 231 982 250 982 l 132 978 q 78 1018 78 978 q 92 1050 78 1038 q 132 1063 107 1063 l 244 1060 z "},"\xb4":{"ha":396,"x_min":97,"x_max":299,"o":"m 299 1003 q 235 883 299 943 q 135 824 172 824 q 97 853 97 824 q 119 894 97 869 q 152 933 142 919 q 177 981 163 946 q 208 1036 192 1017 q 249 1056 224 1056 q 286 1040 274 1056 q 299 1003 299 1024 z "},"\xb5":{"ha":849,"x_min":115,"x_max":788,"o":"m 226 56 l 236 -249 q 222 -300 236 -281 q 182 -319 207 -319 q 142 -300 157 -319 q 128 -249 128 -281 l 136 236 q 115 603 115 522 q 179 707 115 707 q 235 622 235 707 q 233 565 235 608 q 228 263 228 465 q 269 129 228 181 q 381 78 311 78 q 517 157 450 78 q 610 336 583 236 l 606 638 q 658 708 606 708 q 722 610 722 708 q 694 336 722 513 q 710 166 694 232 q 746 92 725 100 q 766 86 754 88 q 783 82 778 85 q 788 71 788 79 q 765 10 788 33 q 707 -14 742 -14 q 619 164 619 -14 q 517 42 581 97 q 374 -14 453 -14 q 226 56 296 -14 z "},"\xb6":{"ha":872,"x_min":61,"x_max":732,"o":"m 731 985 l 724 368 q 728 -57 724 118 q 732 -256 732 -232 q 717 -300 732 -281 q 678 -319 703 -319 q 638 -300 653 -319 q 624 -256 624 -281 q 625 -144 624 -232 q 632 368 632 118 l 625 965 q 543 968 578 968 q 461 965 508 968 q 454 401 454 576 q 456 84 454 225 q 460 -144 458 -57 q 463 -249 463 -232 q 408 -319 463 -319 q 354 -249 354 -319 q 356 -144 354 -232 q 363 368 363 118 l 363 456 q 146 542 231 461 q 61 740 61 624 q 152 970 61 888 q 403 1056 243 1053 l 543 1051 l 664 1056 q 713 1036 694 1056 q 731 985 731 1017 z "},"\xb7":{"ha":308,"x_min":89,"x_max":219,"o":"m 159 438 q 174 438 159 438 q 204 416 189 438 q 219 362 219 394 q 199 302 219 329 q 150 275 179 275 q 105 297 121 275 q 89 352 89 319 q 109 411 89 385 q 159 438 129 438 z "},"\xb8":{"ha":460,"x_min":60,"x_max":376,"o":"m 376 -190 q 328 -283 376 -246 q 211 -319 279 -319 q 101 -287 143 -319 q 60 -222 60 -256 q 67 -204 60 -212 q 85 -196 74 -196 q 133 -213 96 -196 q 201 -231 169 -231 q 253 -218 232 -231 q 275 -189 275 -206 q 254 -156 275 -172 q 208 -127 233 -140 q 163 -90 183 -114 q 142 -36 142 -65 l 142 17 l 231 17 l 231 -14 q 303 -94 231 -56 q 353 -135 331 -110 q 376 -190 376 -160 z "},"\xb9":{"ha":413,"x_min":36,"x_max":318,"o":"m 314 764 l 318 525 q 306 485 318 500 q 273 469 293 469 q 240 485 253 469 q 228 525 228 500 q 232 764 228 525 l 232 931 l 189 882 q 157 842 183 875 q 79 776 107 776 q 36 818 36 776 q 83 888 36 842 q 169 982 129 933 q 227 1047 210 1031 q 268 1063 244 1063 q 318 992 318 1063 l 314 764 z "},"\xba":{"ha":497,"x_min":67,"x_max":431,"o":"m 249 993 q 289 993 249 993 q 380 929 329 993 q 431 768 431 865 q 380 608 431 671 q 249 546 329 546 q 117 608 168 546 q 67 768 67 671 q 117 929 67 865 q 249 993 168 993 m 249 622 q 273 622 249 622 q 322 662 296 622 q 347 768 347 701 q 321 876 347 835 q 249 917 294 917 q 176 875 203 917 q 150 767 150 833 q 176 662 150 701 q 249 622 203 622 z "},"\xbb":{"ha":703,"x_min":86,"x_max":643,"o":"m 612 542 q 618 536 612 542 q 633 515 624 531 q 643 483 643 500 q 632 450 643 465 q 585 402 621 435 q 533 354 549 369 q 498 317 518 339 q 469 286 478 294 q 423 261 444 261 q 389 274 401 261 q 376 306 376 288 q 390 339 376 325 q 431 373 403 353 q 474 406 460 393 q 540 485 540 465 q 474 564 540 504 q 431 597 460 576 q 390 631 403 617 q 376 663 376 644 q 389 695 376 682 q 417 708 401 708 q 447 701 433 708 q 469 684 460 693 q 498 653 478 675 q 534 615 518 631 q 575 576 550 599 q 612 542 600 553 m 322 542 q 327 536 322 542 q 343 515 333 531 q 353 483 353 500 q 342 450 353 465 q 294 402 331 435 q 243 354 258 369 q 208 317 228 339 q 178 286 188 294 q 133 261 154 261 q 99 274 111 261 q 86 306 86 288 q 99 339 86 325 q 141 373 113 353 q 183 406 169 393 q 250 485 250 465 q 183 564 250 504 q 141 597 169 576 q 99 631 113 617 q 86 663 86 644 q 99 695 86 682 q 127 708 111 708 q 156 701 143 708 q 178 684 169 693 q 208 653 188 675 q 244 615 228 631 q 285 576 260 599 q 322 542 310 553 z "},"\xbc":{"ha":1172,"x_min":57,"x_max":1108,"o":"m 335 764 l 339 525 q 326 485 339 500 q 294 469 314 469 q 261 485 274 469 q 249 525 249 500 q 253 764 249 525 l 253 931 l 210 882 q 178 842 204 875 q 100 776 128 776 q 57 818 57 776 q 103 888 57 842 q 190 982 150 933 q 248 1047 231 1031 q 289 1063 265 1063 q 339 992 339 1063 l 335 764 m 763 936 q 751 908 763 936 q 692 760 740 879 q 602 526 643 642 q 525 303 561 411 q 448 67 467 122 q 413 -4 429 11 q 379 -19 397 -19 q 347 -8 361 -19 q 333 27 333 3 q 355 108 333 51 q 425 285 376 165 q 513 520 474 406 q 590 742 553 635 q 649 915 626 850 q 681 1006 671 979 q 743 1064 699 1064 q 771 1053 757 1064 q 785 1017 785 1042 q 763 936 785 993 m 1019 181 l 1024 46 q 981 -14 1024 -14 q 939 46 939 -14 l 943 183 l 889 185 l 707 181 q 672 193 683 181 q 661 224 661 206 q 683 276 661 243 q 781 408 704 308 l 885 543 q 960 600 929 600 q 1008 577 992 600 q 1024 521 1024 554 l 1019 253 q 1073 256 1061 256 q 1097 244 1085 256 q 1108 218 1108 232 q 1097 192 1108 204 q 1063 179 1085 179 q 1019 181 1042 179 m 760 253 l 942 253 q 943 386 943 307 l 942 494 q 760 253 917 467 z "},"\xbd":{"ha":1186,"x_min":57,"x_max":1115,"o":"m 335 764 l 339 525 q 326 485 339 500 q 294 469 314 469 q 261 485 274 469 q 249 525 249 500 q 253 764 249 525 l 253 931 l 210 882 q 178 842 204 875 q 100 776 128 776 q 57 818 57 776 q 103 888 57 842 q 190 982 150 933 q 248 1047 231 1031 q 289 1063 265 1063 q 339 992 339 1063 l 335 764 m 914 78 l 1057 85 q 1115 40 1115 85 q 1057 -4 1115 -4 l 915 1 l 786 -4 q 747 9 764 -4 q 731 44 731 22 q 742 88 731 67 q 771 128 754 110 q 989 443 989 374 q 969 493 989 474 q 911 513 949 513 q 841 481 874 513 q 789 450 808 450 q 759 461 769 450 q 749 490 749 472 q 797 558 749 521 q 919 594 846 594 q 1036 551 993 594 q 1079 454 1079 508 q 1067 391 1079 417 q 1048 352 1054 365 q 1027 317 1042 339 q 1006 288 1013 296 q 983 256 1000 279 q 953 216 965 233 q 897 146 940 199 q 843 78 853 93 l 914 78 m 763 936 q 751 908 763 936 q 692 760 740 879 q 602 526 643 642 q 525 303 561 411 q 448 67 467 122 q 413 -4 429 11 q 379 -19 397 -19 q 347 -8 361 -19 q 333 27 333 3 q 355 108 333 51 q 425 285 376 165 q 513 520 474 406 q 590 742 553 635 q 649 915 626 850 q 681 1006 671 979 q 743 1064 699 1064 q 771 1053 757 1064 q 785 1017 785 1042 q 763 936 785 993 z "},"\xbe":{"ha":1242,"x_min":75,"x_max":1181,"o":"m 835 936 q 824 908 835 936 q 764 760 813 879 q 674 526 715 642 q 597 303 633 411 q 520 67 539 122 q 485 -4 501 11 q 451 -19 469 -19 q 419 -8 433 -19 q 406 27 406 3 q 427 108 406 51 q 497 285 449 165 q 585 520 546 406 q 662 742 625 635 q 721 915 699 850 q 753 1006 743 979 q 815 1064 771 1064 q 843 1053 829 1064 q 857 1017 857 1042 q 835 936 857 993 m 1092 181 l 1096 46 q 1053 -14 1096 -14 q 1011 46 1011 -14 l 1015 183 l 961 185 l 779 181 q 744 193 756 181 q 733 224 733 206 q 755 276 733 243 q 853 408 776 308 l 957 543 q 1033 600 1001 600 q 1080 577 1064 600 q 1096 521 1096 554 l 1092 253 q 1145 256 1133 256 q 1169 244 1157 256 q 1181 218 1181 232 q 1169 192 1181 204 q 1135 179 1157 179 q 1092 181 1114 179 m 832 253 l 1014 253 q 1015 386 1015 307 l 1014 494 q 832 253 989 467 m 253 1060 l 354 1063 q 429 1011 429 1063 q 415 976 429 994 q 363 921 400 958 q 296 846 326 883 q 415 778 372 829 q 458 656 458 728 q 403 524 458 583 q 253 464 347 464 q 131 506 186 464 q 75 583 75 547 q 108 618 75 618 q 143 600 125 618 q 254 547 199 547 q 340 579 310 547 q 371 663 371 611 q 335 748 371 714 q 249 785 300 782 q 172 739 204 739 q 122 786 122 739 q 143 824 122 806 q 206 851 164 843 q 321 978 258 907 q 239 982 258 982 l 140 978 q 86 1018 86 978 q 101 1050 86 1038 q 140 1063 115 1063 l 253 1060 z "},"\xbf":{"ha":615,"x_min":65,"x_max":554,"o":"m 410 376 q 324 178 410 271 q 251 103 288 139 q 165 -71 165 14 q 213 -184 165 -137 q 312 -231 261 -231 q 396 -214 363 -231 q 444 -178 429 -197 q 507 -125 483 -125 q 542 -138 531 -125 q 554 -169 554 -151 q 483 -269 554 -218 q 324 -319 411 -319 q 137 -248 208 -319 q 65 -71 65 -176 q 151 131 65 40 q 224 206 188 169 q 310 373 310 292 q 358 454 310 454 q 410 376 410 454 m 365 757 q 379 757 365 757 q 408 735 393 757 q 424 681 424 713 q 403 624 424 650 q 355 597 383 597 q 311 618 326 597 q 296 672 296 639 q 316 731 296 704 q 365 757 336 757 z "},"\xc0":{"ha":892,"x_min":54,"x_max":839,"o":"m 708 442 l 769 443 q 819 428 800 443 q 839 389 839 413 q 742 336 839 336 q 774 236 764 268 q 803 156 785 204 q 839 36 839 56 q 826 1 839 17 q 792 -14 814 -14 q 731 35 751 -14 q 683 182 711 88 q 633 342 654 276 q 401 346 467 346 q 246 342 336 346 q 154 38 160 53 q 100 -14 135 -14 q 67 0 79 -14 q 54 34 54 14 q 67 97 54 54 q 105 214 79 139 q 146 339 131 289 l 121 339 q 54 390 54 339 q 121 442 54 442 q 178 440 153 442 q 360 972 182 451 q 440 1056 389 1056 q 494 1035 475 1056 q 525 984 513 1015 q 567 864 538 953 q 708 442 658 585 m 276 438 q 442 433 354 433 q 603 438 531 433 q 443 897 460 897 q 314 553 424 897 l 276 438 m 506 1144 q 468 1115 506 1115 q 367 1175 431 1115 q 304 1294 304 1235 q 317 1331 304 1315 q 354 1347 329 1347 q 395 1328 379 1347 q 426 1273 411 1308 q 451 1224 440 1238 q 478 1193 461 1211 q 506 1144 506 1161 z "},"\xc1":{"ha":892,"x_min":54,"x_max":839,"o":"m 708 442 l 769 443 q 819 428 800 443 q 839 389 839 413 q 742 336 839 336 q 774 236 764 268 q 803 156 785 204 q 839 36 839 56 q 826 1 839 17 q 792 -14 814 -14 q 731 35 751 -14 q 683 182 711 88 q 633 342 654 276 q 401 346 467 346 q 246 342 336 346 q 154 38 160 53 q 100 -14 135 -14 q 67 0 79 -14 q 54 34 54 14 q 67 97 54 54 q 105 214 79 139 q 146 339 131 289 l 121 339 q 54 390 54 339 q 121 442 54 442 q 178 440 153 442 q 360 972 182 451 q 440 1056 389 1056 q 494 1035 475 1056 q 525 984 513 1015 q 567 864 538 953 q 708 442 658 585 m 276 438 q 442 433 354 433 q 603 438 531 433 q 443 897 460 897 q 314 553 424 897 l 276 438 m 575 1294 q 512 1175 575 1235 q 411 1115 449 1115 q 374 1144 374 1115 q 396 1186 374 1161 q 428 1224 418 1211 q 453 1273 439 1238 q 484 1328 468 1308 q 525 1347 500 1347 q 563 1331 550 1347 q 575 1294 575 1315 z "},"\xc2":{"ha":892,"x_min":54,"x_max":839,"o":"m 708 442 l 769 443 q 819 428 800 443 q 839 389 839 413 q 742 336 839 336 q 774 236 764 268 q 803 156 785 204 q 839 36 839 56 q 826 1 839 17 q 792 -14 814 -14 q 731 35 751 -14 q 683 182 711 88 q 633 342 654 276 q 401 346 467 346 q 246 342 336 346 q 154 38 160 53 q 100 -14 135 -14 q 67 0 79 -14 q 54 34 54 14 q 67 97 54 54 q 105 214 79 139 q 146 339 131 289 l 121 339 q 54 390 54 339 q 121 442 54 442 q 178 440 153 442 q 360 972 182 451 q 440 1056 389 1056 q 494 1035 475 1056 q 525 984 513 1015 q 567 864 538 953 q 708 442 658 585 m 276 438 q 442 433 354 433 q 603 438 531 433 q 443 897 460 897 q 314 553 424 897 l 276 438 m 631 1208 q 634 1205 631 1208 q 643 1191 638 1201 q 649 1166 649 1181 q 636 1140 649 1151 q 606 1128 624 1128 q 574 1140 589 1128 q 544 1173 558 1153 q 524 1197 529 1193 q 447 1264 468 1264 q 369 1197 425 1264 q 350 1172 364 1193 q 293 1128 317 1128 q 257 1140 269 1128 q 244 1166 244 1151 q 251 1191 244 1181 q 263 1208 257 1201 q 288 1230 269 1214 q 324 1262 307 1246 q 365 1310 340 1278 q 405 1354 389 1342 q 446 1367 421 1367 q 488 1354 471 1367 q 529 1310 504 1342 q 571 1262 554 1278 q 606 1230 588 1246 q 631 1208 624 1214 z "},"\xc3":{"ha":892,"x_min":54,"x_max":839,"o":"m 708 442 l 769 443 q 819 428 800 443 q 839 389 839 413 q 742 336 839 336 q 774 236 764 268 q 803 156 785 204 q 839 36 839 56 q 826 1 839 17 q 792 -14 814 -14 q 731 35 751 -14 q 683 182 711 88 q 633 342 654 276 q 401 346 467 346 q 246 342 336 346 q 154 38 160 53 q 100 -14 135 -14 q 67 0 79 -14 q 54 34 54 14 q 67 97 54 54 q 105 214 79 139 q 146 339 131 289 l 121 339 q 54 390 54 339 q 121 442 54 442 q 178 440 153 442 q 360 972 182 451 q 440 1056 389 1056 q 494 1035 475 1056 q 525 984 513 1015 q 567 864 538 953 q 708 442 658 585 m 276 438 q 442 433 354 433 q 603 438 531 433 q 443 897 460 897 q 314 553 424 897 l 276 438 m 694 1267 q 659 1184 694 1219 q 576 1149 624 1149 q 461 1187 528 1149 q 366 1225 394 1225 q 319 1204 338 1225 q 283 1162 300 1183 q 247 1140 267 1140 q 213 1156 226 1140 q 199 1190 199 1171 q 243 1276 199 1239 q 345 1313 288 1313 q 474 1274 403 1313 q 576 1235 546 1235 q 629 1270 606 1235 q 665 1306 653 1306 q 686 1294 678 1306 q 694 1267 694 1282 z "},"\xc4":{"ha":892,"x_min":54,"x_max":839,"o":"m 708 442 l 769 443 q 819 428 800 443 q 839 389 839 413 q 742 336 839 336 q 774 236 764 268 q 803 156 785 204 q 839 36 839 56 q 826 1 839 17 q 792 -14 814 -14 q 731 35 751 -14 q 683 182 711 88 q 633 342 654 276 q 401 346 467 346 q 246 342 336 346 q 154 38 160 53 q 100 -14 135 -14 q 67 0 79 -14 q 54 34 54 14 q 67 97 54 54 q 105 214 79 139 q 146 339 131 289 l 121 339 q 54 390 54 339 q 121 442 54 442 q 178 440 153 442 q 360 972 182 451 q 440 1056 389 1056 q 494 1035 475 1056 q 525 984 513 1015 q 567 864 538 953 q 708 442 658 585 m 276 438 q 442 433 354 433 q 603 438 531 433 q 443 897 460 897 q 314 553 424 897 l 276 438 m 349 1326 q 363 1326 349 1326 q 392 1308 378 1326 q 406 1260 406 1289 q 386 1203 406 1232 q 338 1175 367 1175 q 294 1194 308 1175 q 279 1246 279 1214 q 299 1302 279 1278 q 349 1326 319 1326 m 571 1326 q 585 1326 571 1326 q 614 1308 600 1326 q 628 1260 628 1289 q 608 1203 628 1232 q 560 1175 589 1175 q 516 1194 531 1175 q 501 1246 501 1214 q 522 1302 501 1278 q 571 1326 542 1326 z "},"\xc5":{"ha":892,"x_min":54,"x_max":839,"o":"m 708 442 l 769 443 q 819 428 800 443 q 839 389 839 413 q 742 336 839 336 q 774 236 764 268 q 803 156 785 204 q 839 36 839 56 q 826 1 839 17 q 792 -14 814 -14 q 731 35 751 -14 q 683 182 711 88 q 633 342 654 276 q 401 346 467 346 q 246 342 336 346 q 154 38 160 53 q 100 -14 135 -14 q 67 0 79 -14 q 54 34 54 14 q 67 97 54 54 q 105 214 79 139 q 146 339 131 289 l 121 339 q 54 390 54 339 q 121 442 54 442 q 178 440 153 442 q 360 972 182 451 q 440 1056 389 1056 q 494 1035 475 1056 q 525 984 513 1015 q 567 864 538 953 q 708 442 658 585 m 276 438 q 442 433 354 433 q 603 438 531 433 q 443 897 460 897 q 314 553 424 897 l 276 438 m 532 1331 q 550 1312 532 1331 q 568 1238 568 1293 q 533 1144 568 1182 q 442 1107 499 1107 q 350 1144 385 1107 q 315 1237 315 1181 q 351 1331 315 1293 q 442 1369 388 1369 q 532 1331 496 1369 m 442 1172 q 454 1172 442 1172 q 485 1192 467 1172 q 503 1238 503 1213 q 484 1284 503 1264 q 442 1304 465 1304 q 399 1284 418 1304 q 381 1238 381 1264 q 399 1192 381 1213 q 442 1172 417 1172 z "},"\xc6":{"ha":1168,"x_min":54,"x_max":1153,"o":"m 532 435 q 443 897 479 768 q 314 553 424 897 l 276 438 q 409 433 354 433 q 493 434 464 433 q 532 435 522 435 m 872 0 l 665 -7 q 589 53 599 -7 q 542 347 571 156 q 246 342 361 347 q 146 18 157 43 q 106 -11 125 -10 q 54 40 54 -11 q 92 175 54 63 q 146 339 131 288 l 121 339 q 54 390 54 339 q 121 442 54 442 q 178 440 153 442 q 358 965 194 488 q 440 1049 388 1049 l 735 1042 l 929 1049 q 999 996 999 1049 q 929 943 999 943 l 735 950 q 540 944 588 950 q 596 611 568 769 q 697 608 657 608 l 933 615 q 984 601 965 615 q 1003 561 1003 586 q 933 510 1003 510 l 697 517 q 614 514 664 517 q 694 97 685 132 q 872 92 783 92 q 1083 99 872 92 q 1153 46 1153 99 q 1083 -7 1153 -7 l 872 0 z "},"\xc7":{"ha":885,"x_min":79,"x_max":833,"o":"m 676 -190 q 628 -283 676 -246 q 511 -319 579 -319 q 401 -287 443 -319 q 360 -222 360 -256 q 367 -204 360 -212 q 385 -196 374 -196 q 433 -213 396 -196 q 501 -231 469 -231 q 553 -218 532 -231 q 575 -189 575 -206 q 554 -156 575 -172 q 508 -124 533 -139 q 463 -80 483 -110 q 442 -14 442 -50 q 180 168 281 17 q 79 534 79 319 q 204 906 79 749 q 518 1063 329 1063 q 715 1019 628 1063 q 803 922 803 976 q 790 888 803 900 q 754 875 776 875 q 703 897 732 875 q 518 965 614 965 q 284 834 376 965 q 192 524 192 703 q 284 211 192 346 q 517 76 376 76 q 660 99 600 76 q 751 145 719 122 q 796 168 782 168 q 833 128 833 168 q 743 36 833 89 q 531 -21 653 -17 q 607 -97 535 -60 q 655 -135 633 -111 q 676 -190 676 -160 z "},"\xc8":{"ha":817,"x_min":64,"x_max":751,"o":"m 457 92 l 682 99 q 751 46 751 99 q 682 -7 751 -7 l 457 0 q 214 -7 457 0 q 151 46 151 -7 q 155 210 151 94 q 158 504 158 325 q 131 503 146 503 q 64 554 64 503 q 82 593 64 578 q 123 608 100 608 q 158 607 146 608 q 149 944 156 886 q 132 996 132 968 q 206 1049 132 1049 l 474 1042 l 682 1049 q 751 996 751 1049 q 682 943 751 943 l 474 950 q 265 944 315 950 q 258 604 258 763 q 356 601 319 601 l 606 608 q 656 594 638 608 q 675 554 675 579 q 606 503 675 503 l 356 510 q 258 507 317 510 l 258 369 q 265 97 258 163 q 457 92 363 92 m 481 1144 q 443 1115 481 1115 q 342 1175 406 1115 q 279 1294 279 1235 q 292 1331 279 1315 q 329 1347 304 1347 q 370 1328 354 1347 q 401 1273 386 1308 q 426 1224 415 1238 q 453 1193 436 1211 q 481 1144 481 1161 z "},"\xc9":{"ha":817,"x_min":64,"x_max":751,"o":"m 457 92 l 682 99 q 751 46 751 99 q 682 -7 751 -7 l 457 0 q 214 -7 457 0 q 151 46 151 -7 q 155 210 151 94 q 158 504 158 325 q 131 503 146 503 q 64 554 64 503 q 82 593 64 578 q 123 608 100 608 q 158 607 146 608 q 149 944 156 886 q 132 996 132 968 q 206 1049 132 1049 l 474 1042 l 682 1049 q 751 996 751 1049 q 682 943 751 943 l 474 950 q 265 944 315 950 q 258 604 258 763 q 356 601 319 601 l 606 608 q 656 594 638 608 q 675 554 675 579 q 606 503 675 503 l 356 510 q 258 507 317 510 l 258 369 q 265 97 258 163 q 457 92 363 92 m 578 1294 q 515 1175 578 1235 q 414 1115 451 1115 q 376 1144 376 1115 q 399 1186 376 1161 q 431 1224 421 1211 q 456 1273 442 1238 q 487 1328 471 1308 q 528 1347 503 1347 q 565 1331 553 1347 q 578 1294 578 1315 z "},"\xca":{"ha":817,"x_min":64,"x_max":751,"o":"m 457 92 l 682 99 q 751 46 751 99 q 682 -7 751 -7 l 457 0 q 214 -7 457 0 q 151 46 151 -7 q 155 210 151 94 q 158 504 158 325 q 131 503 146 503 q 64 554 64 503 q 82 593 64 578 q 123 608 100 608 q 158 607 146 608 q 149 944 156 886 q 132 996 132 968 q 206 1049 132 1049 l 474 1042 l 682 1049 q 751 996 751 1049 q 682 943 751 943 l 474 950 q 265 944 315 950 q 258 604 258 763 q 356 601 319 601 l 606 608 q 656 594 638 608 q 675 554 675 579 q 606 503 675 503 l 356 510 q 258 507 317 510 l 258 369 q 265 97 258 163 q 457 92 363 92 m 619 1208 q 623 1205 619 1208 q 632 1191 626 1201 q 638 1166 638 1181 q 625 1140 638 1151 q 595 1128 613 1128 q 563 1140 578 1128 q 533 1173 547 1153 q 513 1197 518 1193 q 435 1264 457 1264 q 358 1197 414 1264 q 339 1172 353 1193 q 282 1128 306 1128 q 246 1140 258 1128 q 233 1166 233 1151 q 240 1191 233 1181 q 252 1208 246 1201 q 277 1230 258 1214 q 313 1262 296 1246 q 353 1310 329 1278 q 394 1354 378 1342 q 435 1367 410 1367 q 476 1354 460 1367 q 518 1310 493 1342 q 560 1262 543 1278 q 594 1230 576 1246 q 619 1208 613 1214 z "},"\xcb":{"ha":817,"x_min":64,"x_max":751,"o":"m 457 92 l 682 99 q 751 46 751 99 q 682 -7 751 -7 l 457 0 q 214 -7 457 0 q 151 46 151 -7 q 155 210 151 94 q 158 504 158 325 q 131 503 146 503 q 64 554 64 503 q 82 593 64 578 q 123 608 100 608 q 158 607 146 608 q 149 944 156 886 q 132 996 132 968 q 206 1049 132 1049 l 474 1042 l 682 1049 q 751 996 751 1049 q 682 943 751 943 l 474 950 q 265 944 315 950 q 258 604 258 763 q 356 601 319 601 l 606 608 q 656 594 638 608 q 675 554 675 579 q 606 503 675 503 l 356 510 q 258 507 317 510 l 258 369 q 265 97 258 163 q 457 92 363 92 m 344 1326 q 359 1326 344 1326 q 388 1308 374 1326 q 401 1260 401 1289 q 382 1203 401 1232 q 333 1175 363 1175 q 290 1194 304 1175 q 275 1246 275 1214 q 295 1302 275 1278 q 344 1326 315 1326 m 567 1326 q 581 1326 567 1326 q 610 1308 596 1326 q 624 1260 624 1289 q 604 1203 624 1232 q 556 1175 585 1175 q 512 1194 526 1175 q 497 1246 497 1214 q 517 1302 497 1278 q 567 1326 538 1326 z "},"\xcc":{"ha":606,"x_min":51,"x_max":554,"o":"m 361 92 l 483 99 q 534 84 515 99 q 553 46 553 69 q 533 7 553 22 q 483 -8 514 -8 l 304 0 l 121 -7 q 51 46 51 -7 q 121 99 51 99 q 247 92 136 99 q 254 520 254 404 q 247 949 254 636 q 121 943 125 943 q 54 994 54 943 q 72 1034 54 1019 q 121 1049 90 1049 l 304 1042 q 414 1046 351 1042 q 495 1050 476 1050 q 534 1034 514 1050 q 554 994 554 1018 q 535 956 554 971 q 494 942 515 942 q 361 949 472 942 q 354 517 354 629 q 361 92 354 404 m 363 1144 q 325 1115 363 1115 q 224 1175 288 1115 q 161 1294 161 1235 q 174 1331 161 1315 q 211 1347 186 1347 q 252 1328 236 1347 q 283 1273 268 1308 q 308 1224 297 1238 q 333 1193 318 1211 q 363 1144 363 1161 z "},"\xcd":{"ha":606,"x_min":51,"x_max":554,"o":"m 361 92 l 483 99 q 534 84 515 99 q 553 46 553 69 q 533 7 553 22 q 483 -8 514 -8 l 304 0 l 121 -7 q 51 46 51 -7 q 121 99 51 99 q 247 92 136 99 q 254 520 254 404 q 247 949 254 636 q 121 943 125 943 q 54 994 54 943 q 72 1034 54 1019 q 121 1049 90 1049 l 304 1042 q 414 1046 351 1042 q 495 1050 476 1050 q 534 1034 514 1050 q 554 994 554 1018 q 535 956 554 971 q 494 942 515 942 q 361 949 472 942 q 354 517 354 629 q 361 92 354 404 m 446 1294 q 383 1175 446 1235 q 282 1115 319 1115 q 244 1144 244 1115 q 267 1186 244 1161 q 299 1224 289 1211 q 324 1273 310 1238 q 355 1328 339 1308 q 396 1347 371 1347 q 433 1331 421 1347 q 446 1294 446 1315 z "},"\xce":{"ha":606,"x_min":51,"x_max":554,"o":"m 361 92 l 483 99 q 534 84 515 99 q 553 46 553 69 q 533 7 553 22 q 483 -8 514 -8 l 304 0 l 121 -7 q 51 46 51 -7 q 121 99 51 99 q 247 92 136 99 q 254 520 254 404 q 247 949 254 636 q 121 943 125 943 q 54 994 54 943 q 72 1034 54 1019 q 121 1049 90 1049 l 304 1042 q 414 1046 351 1042 q 495 1050 476 1050 q 534 1034 514 1050 q 554 994 554 1018 q 535 956 554 971 q 494 942 515 942 q 361 949 472 942 q 354 517 354 629 q 361 92 354 404 m 489 1208 q 492 1205 489 1208 q 501 1191 496 1201 q 507 1166 507 1181 q 494 1140 507 1151 q 465 1128 482 1128 q 432 1140 447 1128 q 402 1173 417 1153 q 382 1197 388 1193 q 305 1264 326 1264 q 228 1197 283 1264 q 208 1172 222 1193 q 151 1128 175 1128 q 115 1140 128 1128 q 103 1166 103 1151 q 109 1191 103 1181 q 122 1208 115 1201 q 147 1230 128 1214 q 182 1262 165 1246 q 223 1310 199 1278 q 263 1354 247 1342 q 304 1367 279 1367 q 346 1354 329 1367 q 388 1310 363 1342 q 429 1262 413 1278 q 464 1230 446 1246 q 489 1208 482 1214 z "},"\xcf":{"ha":606,"x_min":51,"x_max":554,"o":"m 361 92 l 483 99 q 534 84 515 99 q 553 46 553 69 q 533 7 553 22 q 483 -8 514 -8 l 304 0 l 121 -7 q 51 46 51 -7 q 121 99 51 99 q 247 92 136 99 q 254 520 254 404 q 247 949 254 636 q 121 943 125 943 q 54 994 54 943 q 72 1034 54 1019 q 121 1049 90 1049 l 304 1042 q 414 1046 351 1042 q 495 1050 476 1050 q 534 1034 514 1050 q 554 994 554 1018 q 535 956 554 971 q 494 942 515 942 q 361 949 472 942 q 354 517 354 629 q 361 92 354 404 m 199 1326 q 213 1326 199 1326 q 242 1308 228 1326 q 256 1260 256 1289 q 236 1203 256 1232 q 188 1175 217 1175 q 144 1194 158 1175 q 129 1246 129 1214 q 149 1302 129 1278 q 199 1326 169 1326 m 421 1326 q 435 1326 421 1326 q 464 1308 450 1326 q 478 1260 478 1289 q 458 1203 478 1232 q 410 1175 439 1175 q 366 1194 381 1175 q 351 1246 351 1214 q 372 1302 351 1278 q 421 1326 392 1326 z "},"\xd0":{"ha":1011,"x_min":10,"x_max":933,"o":"m 186 557 l 179 908 q 113 961 113 908 q 204 1032 113 1008 q 411 1056 296 1056 q 631 1008 526 1056 q 800 883 735 961 q 933 506 933 722 q 804 144 933 297 q 641 24 742 69 q 410 -21 540 -21 q 194 9 281 -21 q 107 86 107 39 q 117 114 107 103 q 146 125 128 125 q 182 115 164 125 l 186 472 q 58 469 75 469 q 26 482 42 469 q 10 515 10 494 q 26 549 10 536 q 70 561 42 561 q 186 557 99 561 m 518 515 q 518 505 518 515 q 502 482 518 494 q 447 469 486 469 q 286 474 407 469 q 294 86 286 239 q 411 78 333 78 q 717 204 608 78 q 825 513 825 331 q 719 818 825 690 q 585 918 668 881 q 397 956 501 956 q 293 943 346 956 q 286 557 286 846 q 461 561 286 557 q 502 549 486 561 q 518 515 518 536 z "},"\xd1":{"ha":960,"x_min":135,"x_max":825,"o":"m 825 985 l 818 517 l 821 57 q 803 6 821 25 q 756 -14 786 -14 q 703 24 725 -14 q 653 114 696 35 q 451 473 517 361 q 325 694 385 585 q 242 840 265 803 l 242 517 q 245 176 242 283 q 249 47 249 68 q 232 6 249 26 q 192 -14 215 -14 q 151 6 168 -14 q 135 47 135 26 q 137 133 135 68 q 140 302 139 197 q 142 517 142 407 q 140 733 142 626 q 137 906 139 840 q 135 993 135 972 q 151 1035 135 1014 q 193 1056 168 1056 q 260 1018 238 1056 q 465 653 272 999 q 718 210 657 308 l 718 517 l 711 985 q 728 1035 711 1015 q 768 1056 744 1056 q 808 1035 792 1056 q 825 985 825 1015 m 732 1256 q 697 1173 732 1208 q 613 1138 661 1138 q 499 1176 565 1138 q 403 1214 432 1214 q 356 1193 375 1214 q 321 1151 338 1172 q 284 1129 304 1129 q 250 1144 264 1129 q 236 1179 236 1160 q 281 1265 236 1228 q 383 1301 325 1301 q 512 1263 440 1301 q 613 1224 583 1224 q 667 1259 643 1224 q 703 1294 690 1294 q 724 1283 715 1294 q 732 1256 732 1271 z "},"\xd2":{"ha":1075,"x_min":79,"x_max":996,"o":"m 538 81 q 611 81 538 81 q 784 214 685 81 q 883 524 883 347 q 785 831 883 701 q 538 961 686 961 q 290 831 389 961 q 192 524 192 701 q 291 214 192 347 q 538 81 390 81 m 865 906 q 931 827 865 906 q 996 522 996 749 q 864 138 996 296 q 537 -21 732 -21 q 210 138 342 -21 q 79 522 79 296 q 211 905 79 747 q 539 1063 343 1063 q 865 906 735 1063 m 596 1144 q 558 1115 596 1115 q 458 1175 521 1115 q 394 1294 394 1235 q 407 1331 394 1315 q 444 1347 419 1347 q 485 1328 469 1347 q 516 1273 501 1308 q 541 1224 531 1238 q 567 1193 551 1211 q 596 1144 596 1161 z "},"\xd3":{"ha":1075,"x_min":79,"x_max":996,"o":"m 538 81 q 611 81 538 81 q 784 214 685 81 q 883 524 883 347 q 785 831 883 701 q 538 961 686 961 q 290 831 389 961 q 192 524 192 701 q 291 214 192 347 q 538 81 390 81 m 865 906 q 931 827 865 906 q 996 522 996 749 q 864 138 996 296 q 537 -21 732 -21 q 210 138 342 -21 q 79 522 79 296 q 211 905 79 747 q 539 1063 343 1063 q 865 906 735 1063 m 679 1294 q 616 1175 679 1235 q 515 1115 553 1115 q 478 1144 478 1115 q 500 1186 478 1161 q 533 1224 522 1211 q 558 1273 543 1238 q 588 1328 572 1308 q 629 1347 604 1347 q 667 1331 654 1347 q 679 1294 679 1315 z "},"\xd4":{"ha":1075,"x_min":79,"x_max":996,"o":"m 538 81 q 611 81 538 81 q 784 214 685 81 q 883 524 883 347 q 785 831 883 701 q 538 961 686 961 q 290 831 389 961 q 192 524 192 701 q 291 214 192 347 q 538 81 390 81 m 865 906 q 931 827 865 906 q 996 522 996 749 q 864 138 996 296 q 537 -21 732 -21 q 210 138 342 -21 q 79 522 79 296 q 211 905 79 747 q 539 1063 343 1063 q 865 906 735 1063 m 721 1208 q 724 1205 721 1208 q 733 1191 728 1201 q 739 1166 739 1181 q 726 1140 739 1151 q 697 1128 714 1128 q 664 1140 679 1128 q 634 1173 649 1153 q 614 1197 619 1193 q 537 1264 558 1264 q 460 1197 515 1264 q 439 1172 454 1193 q 383 1128 407 1128 q 347 1140 360 1128 q 335 1166 335 1151 q 341 1191 335 1181 q 353 1208 347 1201 q 378 1230 360 1214 q 414 1262 397 1246 q 455 1310 431 1278 q 495 1354 479 1342 q 536 1367 511 1367 q 578 1354 561 1367 q 619 1310 594 1342 q 661 1262 644 1278 q 696 1230 678 1246 q 721 1208 714 1214 z "},"\xd5":{"ha":1075,"x_min":79,"x_max":996,"o":"m 538 81 q 611 81 538 81 q 784 214 685 81 q 883 524 883 347 q 785 831 883 701 q 538 961 686 961 q 290 831 389 961 q 192 524 192 701 q 291 214 192 347 q 538 81 390 81 m 865 906 q 931 827 865 906 q 996 522 996 749 q 864 138 996 296 q 537 -21 732 -21 q 210 138 342 -21 q 79 522 79 296 q 211 905 79 747 q 539 1063 343 1063 q 865 906 735 1063 m 785 1267 q 749 1184 785 1219 q 666 1149 714 1149 q 551 1187 618 1149 q 456 1225 485 1225 q 409 1204 428 1225 q 374 1162 390 1183 q 337 1140 357 1140 q 303 1156 317 1140 q 289 1190 289 1171 q 333 1276 289 1239 q 435 1313 378 1313 q 565 1274 493 1313 q 666 1235 636 1235 q 719 1270 696 1235 q 756 1306 743 1306 q 776 1294 768 1306 q 785 1267 785 1282 z "},"\xd6":{"ha":1075,"x_min":79,"x_max":996,"o":"m 538 81 q 611 81 538 81 q 784 214 685 81 q 883 524 883 347 q 785 831 883 701 q 538 961 686 961 q 290 831 389 961 q 192 524 192 701 q 291 214 192 347 q 538 81 390 81 m 865 906 q 931 827 865 906 q 996 522 996 749 q 864 138 996 296 q 537 -21 732 -21 q 210 138 342 -21 q 79 522 79 296 q 211 905 79 747 q 539 1063 343 1063 q 865 906 735 1063 m 432 1326 q 447 1326 432 1326 q 475 1308 461 1326 q 489 1260 489 1289 q 469 1203 489 1232 q 421 1175 450 1175 q 377 1194 392 1175 q 363 1246 363 1214 q 383 1302 363 1278 q 432 1326 403 1326 m 654 1326 q 669 1326 654 1326 q 697 1308 683 1326 q 711 1260 711 1289 q 692 1203 711 1232 q 643 1175 672 1175 q 599 1194 614 1175 q 585 1246 585 1214 q 605 1302 585 1278 q 654 1326 625 1326 z "},"\xd7":{"ha":700,"x_min":97,"x_max":603,"o":"m 551 614 q 561 614 551 614 q 585 601 571 614 q 599 569 599 588 q 585 535 599 550 q 542 492 572 521 q 407 357 443 396 q 511 253 446 317 q 590 176 576 189 q 603 144 603 163 q 590 111 603 125 q 557 97 576 97 q 522 113 538 97 q 481 156 506 128 q 350 296 422 219 q 181 113 199 131 q 143 96 163 96 q 110 110 124 96 q 97 142 97 124 q 110 174 97 161 q 154 217 124 188 q 293 356 254 315 q 192 457 257 394 q 115 534 128 519 q 101 567 101 549 q 115 599 101 586 q 149 613 129 613 q 184 597 168 613 q 256 519 200 581 q 350 418 313 457 q 510 592 489 571 q 551 614 532 614 z "},"\xd8":{"ha":1049,"x_min":81,"x_max":969,"o":"m 969 522 q 841 138 969 296 q 524 -21 713 -21 q 372 10 444 -21 q 350 -45 367 -1 q 296 -89 333 -89 q 261 -75 275 -89 q 247 -39 247 -61 q 281 64 247 -17 q 134 259 188 138 q 81 522 81 381 q 209 905 81 747 q 526 1063 338 1063 q 672 1033 600 1063 l 686 1068 q 743 1117 707 1117 q 779 1101 767 1117 q 792 1067 792 1086 q 765 981 792 1047 q 915 787 860 908 q 969 522 969 665 m 721 878 q 410 108 550 479 q 525 81 463 81 q 762 214 667 81 q 857 522 857 347 q 821 722 857 628 q 721 878 785 817 m 478 531 l 636 936 q 525 961 585 961 q 288 831 382 961 q 193 522 193 701 q 228 326 193 419 q 325 169 264 232 q 478 531 392 319 z "},"\xd9":{"ha":949,"x_min":126,"x_max":822,"o":"m 724 85 q 680 32 724 85 q 474 -21 636 -21 q 224 85 311 -21 q 135 343 138 192 q 126 998 126 979 q 142 1036 126 1017 q 183 1056 157 1056 q 225 1036 210 1056 q 240 994 240 1017 q 239 900 240 972 q 233 568 233 729 q 238 356 233 407 q 258 249 243 304 q 297 158 272 193 q 474 76 357 76 q 671 192 619 76 q 715 456 715 292 q 712 801 715 621 q 708 985 708 982 q 724 1036 708 1017 q 765 1056 739 1056 q 807 1036 792 1056 q 822 985 822 1017 q 814 342 822 724 q 724 85 811 190 m 547 1144 q 510 1115 547 1115 q 409 1175 472 1115 q 346 1294 346 1235 q 358 1331 346 1315 q 396 1347 371 1347 q 437 1328 421 1347 q 467 1273 453 1308 q 492 1224 482 1238 q 519 1193 503 1211 q 547 1144 547 1161 z "},"\xda":{"ha":949,"x_min":126,"x_max":822,"o":"m 724 85 q 680 32 724 85 q 474 -21 636 -21 q 224 85 311 -21 q 135 343 138 192 q 126 998 126 979 q 142 1036 126 1017 q 183 1056 157 1056 q 225 1036 210 1056 q 240 994 240 1017 q 239 900 240 972 q 233 568 233 729 q 238 356 233 407 q 258 249 243 304 q 297 158 272 193 q 474 76 357 76 q 671 192 619 76 q 715 456 715 292 q 712 801 715 621 q 708 985 708 982 q 724 1036 708 1017 q 765 1056 739 1056 q 807 1036 792 1056 q 822 985 822 1017 q 814 342 822 724 q 724 85 811 190 m 617 1294 q 553 1175 617 1235 q 453 1115 490 1115 q 415 1144 415 1115 q 438 1186 415 1161 q 470 1224 460 1211 q 495 1273 481 1238 q 526 1328 510 1308 q 567 1347 542 1347 q 604 1331 592 1347 q 617 1294 617 1315 z "},"\xdb":{"ha":949,"x_min":126,"x_max":822,"o":"m 724 85 q 680 32 724 85 q 474 -21 636 -21 q 224 85 311 -21 q 135 343 138 192 q 126 998 126 979 q 142 1036 126 1017 q 183 1056 157 1056 q 225 1036 210 1056 q 240 994 240 1017 q 239 900 240 972 q 233 568 233 729 q 238 356 233 407 q 258 249 243 304 q 297 158 272 193 q 474 76 357 76 q 671 192 619 76 q 715 456 715 292 q 712 801 715 621 q 708 985 708 982 q 724 1036 708 1017 q 765 1056 739 1056 q 807 1036 792 1056 q 822 985 822 1017 q 814 342 822 724 q 724 85 811 190 m 661 1208 q 665 1205 661 1208 q 674 1191 668 1201 q 679 1166 679 1181 q 667 1140 679 1151 q 637 1128 654 1128 q 604 1140 619 1128 q 574 1173 589 1153 q 554 1197 560 1193 q 477 1264 499 1264 q 400 1197 456 1264 q 381 1172 394 1193 q 324 1128 347 1128 q 288 1140 300 1128 q 275 1166 275 1151 q 281 1191 275 1181 q 294 1208 288 1201 q 319 1230 300 1214 q 354 1262 338 1246 q 395 1310 371 1278 q 435 1354 419 1342 q 476 1367 451 1367 q 518 1354 501 1367 q 560 1310 535 1342 q 601 1262 585 1278 q 636 1230 618 1246 q 661 1208 654 1214 z "},"\xdc":{"ha":949,"x_min":126,"x_max":822,"o":"m 724 85 q 680 32 724 85 q 474 -21 636 -21 q 224 85 311 -21 q 135 343 138 192 q 126 998 126 979 q 142 1036 126 1017 q 183 1056 157 1056 q 225 1036 210 1056 q 240 994 240 1017 q 239 900 240 972 q 233 568 233 729 q 238 356 233 407 q 258 249 243 304 q 297 158 272 193 q 474 76 357 76 q 671 192 619 76 q 715 456 715 292 q 712 801 715 621 q 708 985 708 982 q 724 1036 708 1017 q 765 1056 739 1056 q 807 1036 792 1056 q 822 985 822 1017 q 814 342 822 724 q 724 85 811 190 m 371 1326 q 385 1326 371 1326 q 414 1308 400 1326 q 428 1260 428 1289 q 408 1203 428 1232 q 360 1175 389 1175 q 316 1194 331 1175 q 301 1246 301 1214 q 322 1302 301 1278 q 371 1326 342 1326 m 593 1326 q 608 1326 593 1326 q 636 1308 622 1326 q 650 1260 650 1289 q 631 1203 650 1232 q 582 1175 611 1175 q 538 1194 553 1175 q 524 1246 524 1214 q 544 1302 524 1278 q 593 1326 564 1326 z "},"\xdd":{"ha":769,"x_min":21,"x_max":749,"o":"m 329 56 q 331 119 329 65 q 336 436 336 246 l 183 704 q 128 799 157 750 l 82 875 q 28 972 36 953 q 21 1008 21 992 q 33 1040 21 1025 q 67 1056 46 1056 q 101 1044 88 1056 q 132 1006 115 1033 q 164 947 149 978 q 390 543 268 733 q 603 919 518 744 q 624 962 613 940 q 642 996 636 983 q 656 1020 649 1008 q 669 1038 664 1032 q 681 1047 674 1043 q 708 1056 690 1056 q 737 1043 725 1056 q 749 1015 749 1031 q 744 984 749 999 q 726 943 740 969 q 699 894 713 917 q 655 818 686 871 q 599 721 624 765 l 436 436 q 440 153 436 243 q 443 56 443 63 q 386 -14 443 -14 q 329 56 329 -14 m 539 1294 q 476 1175 539 1235 q 375 1115 413 1115 q 338 1144 338 1115 q 360 1186 338 1161 q 392 1224 382 1211 q 417 1273 403 1238 q 448 1328 432 1308 q 489 1347 464 1347 q 526 1331 514 1347 q 539 1294 539 1315 z "},"\xde":{"ha":788,"x_min":136,"x_max":749,"o":"m 143 521 l 136 986 q 189 1056 136 1056 q 242 986 242 1056 q 238 840 242 961 q 401 864 304 864 q 653 781 557 864 q 749 572 749 697 q 653 363 749 446 q 400 279 557 279 q 236 303 303 279 l 242 56 q 189 -14 242 -14 q 136 56 136 -14 l 143 521 m 408 367 q 458 367 408 367 q 576 423 507 367 q 644 572 644 479 q 576 720 644 664 q 410 776 508 776 q 239 754 311 776 q 236 572 236 696 q 238 389 236 447 q 408 367 310 367 z "},"\xdf":{"ha":756,"x_min":28,"x_max":715,"o":"m 81 697 l 150 694 l 150 813 q 213 999 150 942 q 376 1056 275 1056 q 535 998 478 1056 q 592 854 592 940 q 568 749 592 799 q 515 669 544 699 q 439 551 439 596 q 467 472 439 506 q 537 413 496 439 q 618 359 578 388 q 687 285 658 331 q 715 182 715 240 q 657 42 715 97 q 519 -14 599 -14 q 383 18 439 -14 q 326 88 326 50 q 372 135 326 135 q 425 106 383 135 q 508 76 467 76 q 581 104 549 76 q 614 174 614 132 q 593 247 614 217 q 542 297 572 278 q 474 342 511 317 q 407 391 438 367 q 356 455 376 415 q 335 538 335 494 q 358 624 335 582 q 411 696 382 665 q 488 836 488 776 q 456 929 488 896 q 370 963 424 963 q 284 928 317 963 q 251 800 251 893 l 251 57 q 237 6 251 25 q 197 -14 222 -14 q 158 6 172 -14 q 143 47 143 25 q 144 133 143 68 q 151 521 151 329 l 151 614 l 81 611 q 28 653 28 611 q 43 686 28 675 q 81 697 58 697 z "},"\xe0":{"ha":793,"x_min":67,"x_max":742,"o":"m 649 336 q 664 166 649 232 q 700 92 679 100 q 720 86 708 88 q 737 82 732 85 q 742 71 742 79 q 722 10 742 33 q 661 -14 701 -14 q 599 38 621 -14 q 576 169 576 89 q 474 39 542 92 q 323 -14 407 -14 q 178 42 239 -14 q 67 332 67 143 q 154 596 67 483 q 379 708 242 708 q 560 638 483 708 q 613 708 560 708 q 676 610 676 708 q 649 336 676 513 m 568 324 l 561 538 q 387 618 478 618 q 231 536 296 618 q 165 340 165 454 q 208 151 165 225 q 328 76 250 76 q 469 146 406 76 q 568 324 533 215 m 469 853 q 432 824 469 824 q 331 883 394 824 q 268 1003 268 943 q 281 1040 268 1024 q 318 1056 293 1056 q 359 1036 343 1056 q 390 981 375 1017 q 415 933 404 946 q 440 901 425 919 q 469 853 469 869 z "},"\xe1":{"ha":793,"x_min":67,"x_max":742,"o":"m 649 336 q 664 166 649 232 q 700 92 679 100 q 720 86 708 88 q 737 82 732 85 q 742 71 742 79 q 722 10 742 33 q 661 -14 701 -14 q 599 38 621 -14 q 576 169 576 89 q 474 39 542 92 q 323 -14 407 -14 q 178 42 239 -14 q 67 332 67 143 q 154 596 67 483 q 379 708 242 708 q 560 638 483 708 q 613 708 560 708 q 676 610 676 708 q 649 336 676 513 m 568 324 l 561 538 q 387 618 478 618 q 231 536 296 618 q 165 340 165 454 q 208 151 165 225 q 328 76 250 76 q 469 146 406 76 q 568 324 533 215 m 539 1003 q 476 883 539 943 q 375 824 413 824 q 338 853 338 824 q 360 894 338 869 q 392 933 382 919 q 417 981 403 946 q 448 1036 432 1017 q 489 1056 464 1056 q 526 1040 514 1056 q 539 1003 539 1024 z "},"\xe2":{"ha":793,"x_min":67,"x_max":742,"o":"m 649 336 q 664 166 649 232 q 700 92 679 100 q 720 86 708 88 q 737 82 732 85 q 742 71 742 79 q 722 10 742 33 q 661 -14 701 -14 q 599 38 621 -14 q 576 169 576 89 q 474 39 542 92 q 323 -14 407 -14 q 178 42 239 -14 q 67 332 67 143 q 154 596 67 483 q 379 708 242 708 q 560 638 483 708 q 613 708 560 708 q 676 610 676 708 q 649 336 676 513 m 568 324 l 561 538 q 387 618 478 618 q 231 536 296 618 q 165 340 165 454 q 208 151 165 225 q 328 76 250 76 q 469 146 406 76 q 568 324 533 215 m 581 897 q 584 893 581 897 q 593 880 588 890 q 599 855 599 869 q 586 828 599 840 q 556 817 574 817 q 524 829 539 817 q 494 862 508 842 q 474 886 479 882 q 397 953 418 953 q 319 886 375 953 q 300 861 314 882 q 243 817 267 817 q 207 828 219 817 q 194 855 194 840 q 201 880 194 869 q 213 897 207 890 q 238 919 219 903 q 274 951 257 935 q 315 999 290 967 q 355 1043 339 1031 q 396 1056 371 1056 q 438 1043 421 1056 q 479 999 454 1031 q 521 951 504 967 q 556 919 538 935 q 581 897 574 903 z "},"\xe3":{"ha":793,"x_min":67,"x_max":742,"o":"m 649 336 q 664 166 649 232 q 700 92 679 100 q 720 86 708 88 q 737 82 732 85 q 742 71 742 79 q 722 10 742 33 q 661 -14 701 -14 q 599 38 621 -14 q 576 169 576 89 q 474 39 542 92 q 323 -14 407 -14 q 178 42 239 -14 q 67 332 67 143 q 154 596 67 483 q 379 708 242 708 q 560 638 483 708 q 613 708 560 708 q 676 610 676 708 q 649 336 676 513 m 568 324 l 561 538 q 387 618 478 618 q 231 536 296 618 q 165 340 165 454 q 208 151 165 225 q 328 76 250 76 q 469 146 406 76 q 568 324 533 215 m 672 947 q 637 865 672 900 q 553 829 601 829 q 439 867 506 829 q 344 906 372 906 q 297 885 315 906 q 261 842 278 864 q 224 821 244 821 q 190 836 204 821 q 176 871 176 851 q 221 956 176 919 q 323 993 265 993 q 452 954 381 993 q 553 915 524 915 q 607 951 583 915 q 643 986 631 986 q 664 974 656 986 q 672 947 672 963 z "},"\xe4":{"ha":793,"x_min":67,"x_max":742,"o":"m 649 336 q 664 166 649 232 q 700 92 679 100 q 720 86 708 88 q 737 82 732 85 q 742 71 742 79 q 722 10 742 33 q 661 -14 701 -14 q 599 38 621 -14 q 576 169 576 89 q 474 39 542 92 q 323 -14 407 -14 q 178 42 239 -14 q 67 332 67 143 q 154 596 67 483 q 379 708 242 708 q 560 638 483 708 q 613 708 560 708 q 676 610 676 708 q 649 336 676 513 m 568 324 l 561 538 q 387 618 478 618 q 231 536 296 618 q 165 340 165 454 q 208 151 165 225 q 328 76 250 76 q 469 146 406 76 q 568 324 533 215 m 292 1007 q 306 1007 292 1007 q 335 988 321 1007 q 349 941 349 969 q 329 884 349 913 q 281 856 310 856 q 237 875 251 856 q 222 926 222 894 q 242 983 222 958 q 292 1007 263 1007 m 514 1007 q 528 1007 514 1007 q 557 988 543 1007 q 571 941 571 969 q 551 884 571 913 q 503 856 532 856 q 459 875 474 856 q 444 926 444 894 q 465 983 444 958 q 514 1007 485 1007 z "},"\xe5":{"ha":793,"x_min":67,"x_max":742,"o":"m 649 336 q 664 166 649 232 q 700 92 679 100 q 720 86 708 88 q 737 82 732 85 q 742 71 742 79 q 722 10 742 33 q 661 -14 701 -14 q 599 38 621 -14 q 576 169 576 89 q 474 39 542 92 q 323 -14 407 -14 q 178 42 239 -14 q 67 332 67 143 q 154 596 67 483 q 379 708 242 708 q 560 638 483 708 q 613 708 560 708 q 676 610 676 708 q 649 336 676 513 m 568 324 l 561 538 q 387 618 478 618 q 231 536 296 618 q 165 340 165 454 q 208 151 165 225 q 328 76 250 76 q 469 146 406 76 q 568 324 533 215 m 481 1024 q 499 1005 481 1024 q 517 931 517 986 q 482 838 517 875 q 390 800 447 800 q 299 837 333 800 q 264 930 264 874 q 300 1024 264 986 q 390 1063 336 1063 q 481 1024 444 1063 m 390 865 q 403 865 390 865 q 433 885 415 865 q 451 931 451 906 q 433 977 451 957 q 390 997 414 997 q 348 977 367 997 q 329 931 329 957 q 347 885 329 906 q 390 865 365 865 z "},"\xe6":{"ha":1163,"x_min":54,"x_max":1094,"o":"m 331 349 q 288 349 331 349 q 199 306 244 349 q 153 206 153 264 q 199 110 153 149 q 316 71 244 71 q 449 135 388 71 q 511 315 511 200 q 331 349 418 349 m 854 715 q 1024 653 954 715 q 1094 490 1094 590 q 1008 338 1094 390 q 808 286 921 286 q 618 301 694 286 q 691 138 626 207 q 835 69 756 69 q 922 83 882 69 q 983 111 963 96 q 1056 154 1039 154 q 1084 144 1074 154 q 1094 118 1094 133 q 1015 29 1094 79 q 842 -21 935 -21 q 567 147 656 -21 q 301 -21 481 -21 q 126 44 197 -21 q 54 207 54 108 q 128 372 54 306 q 297 439 203 439 q 514 404 392 439 q 463 573 514 522 q 333 624 413 624 q 263 611 294 624 q 214 583 231 599 q 146 542 171 542 q 99 585 99 542 q 169 672 99 629 q 331 715 240 715 q 487 673 422 715 q 585 561 551 631 q 854 715 685 715 m 788 374 q 835 374 788 374 q 940 406 883 374 q 996 492 996 438 q 959 585 996 546 q 854 625 922 625 q 700 555 763 625 q 619 392 638 485 q 788 374 692 374 z "},"\xe7":{"ha":707,"x_min":64,"x_max":654,"o":"m 553 -190 q 504 -283 553 -246 q 388 -319 456 -319 q 278 -287 319 -319 q 236 -222 236 -256 q 243 -204 236 -212 q 261 -196 250 -196 q 309 -213 272 -196 q 377 -231 346 -231 q 430 -218 408 -231 q 451 -189 451 -206 q 431 -156 451 -172 q 385 -124 410 -139 q 339 -78 360 -108 q 318 -8 318 -47 q 134 119 204 21 q 64 359 64 218 q 162 608 64 500 q 419 715 260 715 q 574 676 507 715 q 642 594 642 636 q 628 558 642 572 q 596 543 614 543 q 554 564 578 543 q 407 625 482 625 q 240 544 311 625 q 168 349 168 464 q 240 151 168 233 q 419 69 313 69 q 579 125 501 69 q 619 143 606 143 q 654 106 654 143 q 575 25 654 69 q 407 -21 496 -19 q 483 -97 411 -60 q 531 -135 510 -111 q 553 -190 553 -160 z "},"\xe8":{"ha":749,"x_min":33,"x_max":681,"o":"m 376 374 q 423 374 376 374 q 526 406 469 374 q 582 492 582 438 q 545 585 582 546 q 440 625 508 625 q 286 556 349 625 q 206 396 224 488 q 376 374 282 374 m 428 715 q 484 715 428 715 q 610 653 540 715 q 681 490 681 590 q 594 338 681 390 q 381 286 507 286 q 204 307 308 286 q 277 140 213 210 q 421 69 342 69 q 508 83 468 69 q 569 111 549 96 q 642 154 625 154 q 670 144 660 154 q 681 118 681 133 q 601 29 681 79 q 428 -21 521 -21 q 199 81 283 -21 q 107 325 114 182 q 33 397 33 347 q 45 430 33 418 q 74 442 57 442 q 115 429 90 442 q 231 635 146 554 q 428 715 317 715 m 467 853 q 429 824 467 824 q 328 883 392 824 q 265 1003 265 943 q 278 1040 265 1024 q 315 1056 290 1056 q 356 1036 340 1056 q 387 981 372 1017 q 412 933 401 946 q 438 901 422 919 q 467 853 467 869 z "},"\xe9":{"ha":749,"x_min":33,"x_max":681,"o":"m 376 374 q 423 374 376 374 q 526 406 469 374 q 582 492 582 438 q 545 585 582 546 q 440 625 508 625 q 286 556 349 625 q 206 396 224 488 q 376 374 282 374 m 428 715 q 484 715 428 715 q 610 653 540 715 q 681 490 681 590 q 594 338 681 390 q 381 286 507 286 q 204 307 308 286 q 277 140 213 210 q 421 69 342 69 q 508 83 468 69 q 569 111 549 96 q 642 154 625 154 q 670 144 660 154 q 681 118 681 133 q 601 29 681 79 q 428 -21 521 -21 q 199 81 283 -21 q 107 325 114 182 q 33 397 33 347 q 45 430 33 418 q 74 442 57 442 q 115 429 90 442 q 231 635 146 554 q 428 715 317 715 m 554 1003 q 491 883 554 943 q 390 824 428 824 q 353 853 353 824 q 375 894 353 869 q 408 933 397 919 q 433 981 418 946 q 463 1036 447 1017 q 504 1056 479 1056 q 542 1040 529 1056 q 554 1003 554 1024 z "},"\xea":{"ha":749,"x_min":33,"x_max":681,"o":"m 376 374 q 423 374 376 374 q 526 406 469 374 q 582 492 582 438 q 545 585 582 546 q 440 625 508 625 q 286 556 349 625 q 206 396 224 488 q 376 374 282 374 m 428 715 q 484 715 428 715 q 610 653 540 715 q 681 490 681 590 q 594 338 681 390 q 381 286 507 286 q 204 307 308 286 q 277 140 213 210 q 421 69 342 69 q 508 83 468 69 q 569 111 549 96 q 642 154 625 154 q 670 144 660 154 q 681 118 681 133 q 601 29 681 79 q 428 -21 521 -21 q 199 81 283 -21 q 107 325 114 182 q 33 397 33 347 q 45 430 33 418 q 74 442 57 442 q 115 429 90 442 q 231 635 146 554 q 428 715 317 715 m 599 897 q 602 893 599 897 q 611 880 606 890 q 617 855 617 869 q 604 828 617 840 q 574 817 592 817 q 542 829 557 817 q 512 862 526 842 q 492 886 497 882 q 415 953 436 953 q 338 886 393 953 q 317 861 332 882 q 261 817 285 817 q 225 828 238 817 q 213 855 213 840 q 219 880 213 869 q 231 897 225 890 q 256 919 238 903 q 292 951 275 935 q 333 999 308 967 q 373 1043 357 1031 q 414 1056 389 1056 q 456 1043 439 1056 q 497 999 472 1031 q 539 951 522 967 q 574 919 556 935 q 599 897 592 903 z "},"\xeb":{"ha":749,"x_min":33,"x_max":681,"o":"m 376 374 q 423 374 376 374 q 526 406 469 374 q 582 492 582 438 q 545 585 582 546 q 440 625 508 625 q 286 556 349 625 q 206 396 224 488 q 376 374 282 374 m 428 715 q 484 715 428 715 q 610 653 540 715 q 681 490 681 590 q 594 338 681 390 q 381 286 507 286 q 204 307 308 286 q 277 140 213 210 q 421 69 342 69 q 508 83 468 69 q 569 111 549 96 q 642 154 625 154 q 670 144 660 154 q 681 118 681 133 q 601 29 681 79 q 428 -21 521 -21 q 199 81 283 -21 q 107 325 114 182 q 33 397 33 347 q 45 430 33 418 q 74 442 57 442 q 115 429 90 442 q 231 635 146 554 q 428 715 317 715 m 314 1007 q 328 1007 314 1007 q 357 988 343 1007 q 371 941 371 969 q 351 884 371 913 q 303 856 332 856 q 259 875 274 856 q 244 926 244 894 q 265 983 244 958 q 314 1007 285 1007 m 536 1007 q 551 1007 536 1007 q 579 988 565 1007 q 593 941 593 969 q 574 884 593 913 q 525 856 554 856 q 481 875 496 856 q 467 926 467 894 q 487 983 467 958 q 536 1007 507 1007 z "},"\xec":{"ha":311,"x_min":42,"x_max":243,"o":"m 201 347 l 208 56 q 156 -14 208 -14 q 103 56 103 -14 l 110 347 q 103 639 110 347 q 156 708 103 708 q 208 639 208 708 l 201 347 m 243 853 q 206 824 243 824 q 105 883 168 824 q 42 1003 42 943 q 54 1040 42 1024 q 92 1056 67 1056 q 133 1036 117 1056 q 163 981 149 1017 q 188 933 178 946 q 214 901 199 919 q 243 853 243 869 z "},"\xed":{"ha":311,"x_min":68,"x_max":269,"o":"m 201 347 l 208 56 q 156 -14 208 -14 q 103 56 103 -14 l 110 347 q 103 639 110 347 q 156 708 103 708 q 208 639 208 708 l 201 347 m 269 1003 q 206 883 269 943 q 106 824 143 824 q 68 853 68 824 q 90 894 68 869 q 123 933 113 919 q 148 981 133 946 q 178 1036 163 1017 q 219 1056 194 1056 q 257 1040 244 1056 q 269 1003 269 1024 z "},"\xee":{"ha":311,"x_min":-46,"x_max":358,"o":"m 201 347 l 208 56 q 156 -14 208 -14 q 103 56 103 -14 l 110 347 q 103 639 110 347 q 156 708 103 708 q 208 639 208 708 l 201 347 m 340 897 q 344 893 340 897 q 353 880 347 890 q 358 855 358 869 q 346 828 358 840 q 316 817 333 817 q 283 829 299 817 q 253 862 268 842 q 233 886 239 882 q 156 953 178 953 q 79 886 135 953 q 58 861 74 882 q 3 817 26 817 q -33 828 -21 817 q -46 855 -46 840 q -40 880 -46 869 q -27 897 -33 890 q -2 919 -21 903 q 33 951 17 935 q 74 999 50 967 q 115 1043 99 1031 q 156 1056 131 1056 q 197 1043 181 1056 q 239 999 214 1031 q 281 951 264 967 q 315 919 297 935 q 340 897 333 903 z "},"\xef":{"ha":311,"x_min":-18,"x_max":331,"o":"m 201 347 l 208 56 q 156 -14 208 -14 q 103 56 103 -14 l 110 347 q 103 639 110 347 q 156 708 103 708 q 208 639 208 708 l 201 347 m 51 1007 q 66 1007 51 1007 q 94 988 81 1007 q 108 941 108 969 q 89 884 108 913 q 40 856 69 856 q -3 875 11 856 q -18 926 -18 894 q 2 983 -18 958 q 51 1007 22 1007 m 274 1007 q 288 1007 274 1007 q 317 988 303 1007 q 331 941 331 969 q 311 884 331 913 q 263 856 292 856 q 219 875 233 856 q 204 926 204 894 q 224 983 204 958 q 274 1007 244 1007 z "},"\xf0":{"ha":794,"x_min":67,"x_max":708,"o":"m 708 418 q 626 106 708 225 q 379 -14 543 -14 q 153 92 240 -14 q 67 335 67 197 q 144 575 67 472 q 358 678 222 678 q 500 644 436 678 q 599 564 564 610 q 438 850 564 740 q 389 803 413 828 q 356 769 365 779 q 312 746 332 746 q 279 758 292 746 q 267 783 267 769 q 270 805 267 797 q 284 823 274 813 q 304 841 294 833 q 335 865 314 849 q 374 896 357 882 q 242 938 315 931 q 197 944 211 940 q 164 986 164 953 q 181 1016 164 1003 q 231 1029 199 1029 q 443 964 329 1029 q 487 1005 464 982 q 519 1036 510 1028 q 565 1060 544 1060 q 599 1048 586 1060 q 611 1022 611 1036 q 608 999 611 1007 q 596 981 606 992 q 578 964 586 971 q 549 940 569 957 q 511 910 528 924 q 657 692 606 824 q 708 418 708 561 m 382 75 q 428 75 382 75 q 536 149 474 75 q 599 327 599 224 q 536 510 599 431 q 377 589 474 589 q 224 517 281 589 q 167 335 167 444 q 228 151 167 226 q 382 75 290 75 z "},"\xf1":{"ha":804,"x_min":94,"x_max":754,"o":"m 689 438 l 682 219 q 683 160 682 181 q 691 119 683 140 q 710 92 699 97 q 733 86 721 88 q 749 82 744 85 q 754 71 754 79 q 731 10 754 35 q 678 -14 708 -14 q 605 28 625 -14 q 585 150 585 69 l 590 406 q 550 558 590 500 q 438 617 510 617 q 300 538 367 617 q 207 358 233 458 l 211 57 q 158 -14 211 -14 q 94 84 94 -14 q 122 358 94 182 q 110 519 122 417 q 99 647 99 622 q 113 690 99 671 q 153 708 128 708 q 192 690 178 708 q 207 647 207 671 q 206 590 207 624 q 206 532 206 556 q 456 708 307 708 q 628 629 567 708 q 689 438 689 550 m 640 947 q 605 865 640 900 q 522 829 569 829 q 407 867 474 829 q 312 906 340 906 q 265 885 283 906 q 229 842 246 864 q 192 821 213 821 q 158 836 172 821 q 144 871 144 851 q 189 956 144 919 q 291 993 233 993 q 420 954 349 993 q 522 915 492 915 q 575 951 551 915 q 611 986 599 986 q 632 974 624 986 q 640 947 640 963 z "},"\xf2":{"ha":781,"x_min":64,"x_max":717,"o":"m 551 151 q 584 192 551 151 q 618 349 618 233 q 553 544 618 464 q 393 625 489 625 q 230 543 297 625 q 163 346 163 461 q 227 150 163 231 q 388 69 292 69 q 551 151 483 69 m 391 715 q 462 715 391 715 q 625 609 533 715 q 717 349 717 503 q 624 87 717 194 q 389 -21 531 -21 q 156 85 247 -21 q 64 346 64 192 q 156 608 64 500 q 391 715 249 715 m 463 853 q 425 824 463 824 q 324 883 388 824 q 261 1003 261 943 q 274 1040 261 1024 q 311 1056 286 1056 q 352 1036 336 1056 q 383 981 368 1017 q 408 933 397 946 q 433 901 418 919 q 463 853 463 869 z "},"\xf3":{"ha":781,"x_min":64,"x_max":717,"o":"m 551 151 q 584 192 551 151 q 618 349 618 233 q 553 544 618 464 q 393 625 489 625 q 230 543 297 625 q 163 346 163 461 q 227 150 163 231 q 388 69 292 69 q 551 151 483 69 m 391 715 q 462 715 391 715 q 625 609 533 715 q 717 349 717 503 q 624 87 717 194 q 389 -21 531 -21 q 156 85 247 -21 q 64 346 64 192 q 156 608 64 500 q 391 715 249 715 m 532 1003 q 469 883 532 943 q 368 824 406 824 q 331 853 331 824 q 353 894 331 869 q 385 933 375 919 q 410 981 396 946 q 441 1036 425 1017 q 482 1056 457 1056 q 519 1040 507 1056 q 532 1003 532 1024 z "},"\xf4":{"ha":781,"x_min":64,"x_max":717,"o":"m 551 151 q 584 192 551 151 q 618 349 618 233 q 553 544 618 464 q 393 625 489 625 q 230 543 297 625 q 163 346 163 461 q 227 150 163 231 q 388 69 292 69 q 551 151 483 69 m 391 715 q 462 715 391 715 q 625 609 533 715 q 717 349 717 503 q 624 87 717 194 q 389 -21 531 -21 q 156 85 247 -21 q 64 346 64 192 q 156 608 64 500 q 391 715 249 715 m 574 897 q 577 893 574 897 q 586 880 581 890 q 592 855 592 869 q 579 828 592 840 q 549 817 567 817 q 517 829 532 817 q 487 862 501 842 q 467 886 472 882 q 390 953 411 953 q 313 886 368 953 q 293 861 307 882 q 236 817 260 817 q 200 828 213 817 q 188 855 188 840 q 194 880 188 869 q 206 897 200 890 q 231 919 213 903 q 267 951 250 935 q 308 999 283 967 q 348 1043 332 1031 q 389 1056 364 1056 q 431 1043 414 1056 q 472 999 447 1031 q 514 951 497 967 q 549 919 531 935 q 574 897 567 903 z "},"\xf5":{"ha":781,"x_min":64,"x_max":717,"o":"m 551 151 q 584 192 551 151 q 618 349 618 233 q 553 544 618 464 q 393 625 489 625 q 230 543 297 625 q 163 346 163 461 q 227 150 163 231 q 388 69 292 69 q 551 151 483 69 m 391 715 q 462 715 391 715 q 625 609 533 715 q 717 349 717 503 q 624 87 717 194 q 389 -21 531 -21 q 156 85 247 -21 q 64 346 64 192 q 156 608 64 500 q 391 715 249 715 m 638 947 q 602 865 638 900 q 519 829 567 829 q 404 867 471 829 q 309 906 338 906 q 262 885 281 906 q 226 842 243 864 q 190 821 210 821 q 156 836 169 821 q 142 871 142 851 q 186 956 142 919 q 288 993 231 993 q 417 954 346 993 q 519 915 489 915 q 572 951 549 915 q 608 986 596 986 q 629 974 621 986 q 638 947 638 963 z "},"\xf6":{"ha":781,"x_min":64,"x_max":717,"o":"m 551 151 q 584 192 551 151 q 618 349 618 233 q 553 544 618 464 q 393 625 489 625 q 230 543 297 625 q 163 346 163 461 q 227 150 163 231 q 388 69 292 69 q 551 151 483 69 m 391 715 q 462 715 391 715 q 625 609 533 715 q 717 349 717 503 q 624 87 717 194 q 389 -21 531 -21 q 156 85 247 -21 q 64 346 64 192 q 156 608 64 500 q 391 715 249 715 m 285 1007 q 299 1007 285 1007 q 328 988 314 1007 q 342 941 342 969 q 322 884 342 913 q 274 856 303 856 q 230 875 244 856 q 215 926 215 894 q 235 983 215 958 q 285 1007 256 1007 m 507 1007 q 522 1007 507 1007 q 550 988 536 1007 q 564 941 564 969 q 544 884 564 913 q 496 856 525 856 q 452 875 467 856 q 438 926 438 894 q 458 983 438 958 q 507 1007 478 1007 z "},"\xf7":{"ha":775,"x_min":85,"x_max":690,"o":"m 388 404 l 633 408 q 674 396 658 408 q 690 363 690 383 q 674 329 690 342 q 633 317 658 317 l 388 321 l 142 317 q 101 329 117 317 q 85 363 85 342 q 101 396 85 383 q 142 408 117 408 q 388 404 142 408 m 392 210 q 407 210 392 210 q 435 190 421 210 q 450 138 450 169 q 431 81 450 107 q 383 56 411 56 q 340 77 356 56 q 325 129 325 99 q 344 185 325 160 q 392 210 364 210 m 392 669 q 407 669 392 669 q 435 649 421 669 q 450 598 450 629 q 431 541 450 567 q 383 515 411 515 q 340 537 356 515 q 325 589 325 558 q 344 644 325 619 q 392 669 364 669 z "},"\xf8":{"ha":781,"x_min":64,"x_max":717,"o":"m 717 347 q 624 87 717 194 q 390 -21 531 -21 q 301 -8 351 -21 l 276 -78 q 219 -126 257 -126 q 185 -111 199 -126 q 171 -75 171 -96 q 208 36 171 -54 q 102 167 140 85 q 64 347 64 249 q 156 608 64 500 q 389 715 249 715 q 476 703 435 715 q 500 767 483 722 q 557 815 521 815 q 592 801 578 815 q 606 763 606 786 q 569 658 606 739 q 678 528 639 610 q 717 347 717 446 m 389 69 q 551 151 483 69 q 618 360 618 233 q 531 569 618 486 q 333 76 446 374 q 389 69 364 69 m 249 126 q 446 617 351 361 q 392 625 421 625 q 230 543 297 625 q 163 333 163 461 q 249 126 163 206 z "},"\xf9":{"ha":811,"x_min":86,"x_max":760,"o":"m 210 594 l 199 289 q 239 135 199 194 q 351 76 279 76 q 489 156 422 76 q 582 336 556 236 l 578 638 q 631 708 578 708 q 694 610 694 708 q 667 336 694 513 q 682 166 667 232 q 718 92 697 100 q 738 86 726 88 q 755 82 750 85 q 760 71 760 79 q 737 10 760 33 q 679 -14 714 -14 q 592 164 592 -14 q 333 -14 489 -14 q 161 69 222 -14 q 100 271 100 151 l 108 481 q 97 584 108 536 q 86 653 86 632 q 103 691 86 674 q 146 708 119 708 q 210 594 210 708 m 450 853 q 413 824 450 824 q 312 883 375 824 q 249 1003 249 943 q 261 1040 249 1024 q 299 1056 274 1056 q 340 1036 324 1056 q 370 981 356 1017 q 395 933 385 946 q 421 901 406 919 q 450 853 450 869 z "},"\xfa":{"ha":811,"x_min":86,"x_max":760,"o":"m 210 594 l 199 289 q 239 135 199 194 q 351 76 279 76 q 489 156 422 76 q 582 336 556 236 l 578 638 q 631 708 578 708 q 694 610 694 708 q 667 336 694 513 q 682 166 667 232 q 718 92 697 100 q 738 86 726 88 q 755 82 750 85 q 760 71 760 79 q 737 10 760 33 q 679 -14 714 -14 q 592 164 592 -14 q 333 -14 489 -14 q 161 69 222 -14 q 100 271 100 151 l 108 481 q 97 584 108 536 q 86 653 86 632 q 103 691 86 674 q 146 708 119 708 q 210 594 210 708 m 533 1003 q 470 883 533 943 q 369 824 407 824 q 332 853 332 824 q 354 894 332 869 q 387 933 376 919 q 412 981 397 946 q 442 1036 426 1017 q 483 1056 458 1056 q 521 1040 508 1056 q 533 1003 533 1024 z "},"\xfb":{"ha":811,"x_min":86,"x_max":760,"o":"m 210 594 l 199 289 q 239 135 199 194 q 351 76 279 76 q 489 156 422 76 q 582 336 556 236 l 578 638 q 631 708 578 708 q 694 610 694 708 q 667 336 694 513 q 682 166 667 232 q 718 92 697 100 q 738 86 726 88 q 755 82 750 85 q 760 71 760 79 q 737 10 760 33 q 679 -14 714 -14 q 592 164 592 -14 q 333 -14 489 -14 q 161 69 222 -14 q 100 271 100 151 l 108 481 q 97 584 108 536 q 86 653 86 632 q 103 691 86 674 q 146 708 119 708 q 210 594 210 708 m 578 897 q 581 893 578 897 q 590 880 585 890 q 596 855 596 869 q 583 828 596 840 q 553 817 571 817 q 521 829 536 817 q 491 862 506 842 q 471 886 476 882 q 394 953 415 953 q 317 886 372 953 q 297 861 311 882 q 240 817 264 817 q 204 828 217 817 q 192 855 192 840 q 198 880 192 869 q 210 897 204 890 q 235 919 217 903 q 271 951 254 935 q 312 999 288 967 q 352 1043 336 1031 q 393 1056 368 1056 q 435 1043 418 1056 q 476 999 451 1031 q 518 951 501 967 q 553 919 535 935 q 578 897 571 903 z "},"\xfc":{"ha":811,"x_min":86,"x_max":760,"o":"m 210 594 l 199 289 q 239 135 199 194 q 351 76 279 76 q 489 156 422 76 q 582 336 556 236 l 578 638 q 631 708 578 708 q 694 610 694 708 q 667 336 694 513 q 682 166 667 232 q 718 92 697 100 q 738 86 726 88 q 755 82 750 85 q 760 71 760 79 q 737 10 760 33 q 679 -14 714 -14 q 592 164 592 -14 q 333 -14 489 -14 q 161 69 222 -14 q 100 271 100 151 l 108 481 q 97 584 108 536 q 86 653 86 632 q 103 691 86 674 q 146 708 119 708 q 210 594 210 708 m 300 1007 q 315 1007 300 1007 q 343 988 329 1007 q 357 941 357 969 q 338 884 357 913 q 289 856 318 856 q 245 875 260 856 q 231 926 231 894 q 251 983 231 958 q 300 1007 271 1007 m 522 1007 q 537 1007 522 1007 q 565 988 551 1007 q 579 941 579 969 q 560 884 579 913 q 511 856 540 856 q 467 875 482 856 q 453 926 453 894 q 473 983 453 958 q 522 1007 493 1007 z "},"\xfd":{"ha":789,"x_min":86,"x_max":694,"o":"m 582 336 l 578 638 q 631 708 578 708 q 694 604 694 708 q 665 336 694 522 q 682 83 682 167 q 593 -209 682 -99 q 343 -319 504 -319 q 181 -284 257 -319 q 104 -213 104 -249 q 136 -178 104 -178 q 213 -203 150 -178 q 343 -229 276 -229 q 528 -146 460 -229 q 596 69 596 -62 q 592 164 596 118 q 333 -14 489 -14 q 161 69 222 -14 q 100 271 100 151 l 108 481 q 97 584 108 536 q 86 653 86 632 q 103 691 86 674 q 146 708 119 708 q 210 594 210 708 l 199 289 q 239 135 199 194 q 351 76 279 76 q 489 156 422 76 q 582 336 556 236 m 542 1003 q 478 883 542 943 q 378 824 415 824 q 340 853 340 824 q 363 894 340 869 q 395 933 385 919 q 420 981 406 946 q 451 1036 435 1017 q 492 1056 467 1056 q 529 1040 517 1056 q 542 1003 542 1024 z "},"\xfe":{"ha":789,"x_min":74,"x_max":724,"o":"m 397 76 q 553 158 486 76 q 621 351 621 240 q 572 540 621 461 q 440 618 524 618 q 200 378 294 618 l 200 157 q 397 76 283 76 m 114 264 l 115 317 l 115 339 q 102 705 115 433 q 89 997 89 976 q 103 1037 89 1018 q 143 1056 118 1056 q 183 1037 168 1056 q 197 986 197 1018 l 197 529 q 300 661 243 614 q 447 708 357 708 q 603 650 538 708 q 696 515 668 592 q 724 363 724 439 q 632 99 724 211 q 397 -14 540 -14 q 200 54 293 -14 q 197 -195 197 -114 q 183 -298 197 -276 q 140 -319 169 -319 q 92 -295 111 -319 q 74 -225 74 -271 q 79 -116 74 -179 q 96 51 85 -53 q 114 238 107 154 l 114 264 z "},"\xff":{"ha":789,"x_min":86,"x_max":694,"o":"m 582 336 l 578 638 q 631 708 578 708 q 694 604 694 708 q 665 336 694 522 q 682 83 682 167 q 593 -209 682 -99 q 343 -319 504 -319 q 181 -284 257 -319 q 104 -213 104 -249 q 136 -178 104 -178 q 213 -203 150 -178 q 343 -229 276 -229 q 528 -146 460 -229 q 596 69 596 -62 q 592 164 596 118 q 333 -14 489 -14 q 161 69 222 -14 q 100 271 100 151 l 108 481 q 97 584 108 536 q 86 653 86 632 q 103 691 86 674 q 146 708 119 708 q 210 594 210 708 l 199 289 q 239 135 199 194 q 351 76 279 76 q 489 156 422 76 q 582 336 556 236 m 303 1007 q 317 1007 303 1007 q 346 988 332 1007 q 360 941 360 969 q 340 884 360 913 q 292 856 321 856 q 248 875 263 856 q 233 926 233 894 q 253 983 233 958 q 303 1007 274 1007 m 525 1007 q 540 1007 525 1007 q 568 988 554 1007 q 582 941 582 969 q 563 884 582 913 q 514 856 543 856 q 470 875 485 856 q 456 926 456 894 q 476 983 456 958 q 525 1007 496 1007 z "},"\u0126":{"ha":1042,"x_min":24,"x_max":1018,"o":"m 758 57 l 765 501 q 470 506 561 506 q 275 501 379 506 q 278 172 275 276 q 282 47 282 68 q 265 6 282 26 q 225 -14 249 -14 q 185 6 201 -14 q 168 47 168 26 q 169 131 168 68 q 175 499 175 274 l 150 499 q 83 550 83 499 q 101 590 83 575 q 150 604 119 604 l 171 604 l 171 843 l 81 843 q 40 856 56 843 q 24 889 24 868 q 40 922 24 910 q 92 935 56 935 q 168 933 129 935 l 168 985 q 185 1035 168 1015 q 225 1056 201 1056 q 265 1035 249 1056 q 282 985 282 1015 q 281 932 282 956 q 520 931 356 931 q 758 932 685 931 l 758 985 q 775 1035 758 1015 q 815 1056 792 1056 q 856 1035 839 1056 q 872 986 872 1015 q 871 933 872 957 q 949 935 911 935 q 1002 922 986 935 q 1018 889 1018 910 q 1002 856 1018 868 q 961 843 986 843 l 868 843 q 865 606 865 718 l 888 606 q 938 590 918 606 q 958 550 958 574 q 939 512 958 526 q 888 497 919 497 l 865 497 l 872 57 q 856 6 872 26 q 815 -14 839 -14 q 775 6 792 -14 q 758 57 758 26 m 761 846 l 521 847 l 278 846 q 275 600 275 715 q 540 597 414 597 q 761 601 665 597 l 761 846 z "},"\u0127":{"ha":801,"x_min":-31,"x_max":751,"o":"m 203 918 l 379 922 q 420 910 404 922 q 436 876 436 897 q 420 843 436 856 q 379 831 404 831 l 203 835 l 203 532 q 453 708 304 708 q 625 629 564 708 q 686 438 686 550 l 679 219 q 680 160 679 181 q 688 119 681 140 q 707 92 696 97 q 730 86 718 88 q 747 82 742 85 q 751 71 751 79 q 728 10 751 35 q 675 -14 706 -14 q 602 28 622 -14 q 582 150 582 69 l 588 406 q 547 558 588 500 q 435 617 507 617 q 297 538 364 617 q 204 358 231 458 l 208 57 q 156 -14 208 -14 q 92 84 92 -14 q 119 358 92 182 q 100 833 119 483 q 17 831 33 831 q -15 843 1 831 q -31 876 -31 856 q -15 910 -31 897 q 17 922 1 922 q 96 919 32 922 q 94 984 94 950 q 109 1037 94 1018 q 149 1056 124 1056 q 188 1037 174 1056 q 203 986 203 1018 l 203 918 z "},"\u0128":{"ha":606,"x_min":51,"x_max":554,"o":"m 361 92 l 483 99 q 534 84 515 99 q 553 46 553 69 q 533 7 553 22 q 483 -8 514 -8 l 304 0 l 121 -7 q 51 46 51 -7 q 121 99 51 99 q 247 92 136 99 q 254 520 254 404 q 247 949 254 636 q 121 943 125 943 q 54 994 54 943 q 72 1034 54 1019 q 121 1049 90 1049 l 304 1042 q 414 1046 351 1042 q 495 1050 476 1050 q 534 1034 514 1050 q 554 994 554 1018 q 535 956 554 971 q 494 942 515 942 q 361 949 472 942 q 354 517 354 629 q 361 92 354 404 m 551 1253 q 516 1170 551 1206 q 433 1135 481 1135 q 318 1173 385 1135 q 223 1211 251 1211 q 176 1190 194 1211 q 140 1148 157 1169 q 103 1126 124 1126 q 69 1142 83 1126 q 56 1176 56 1157 q 100 1262 56 1225 q 202 1299 144 1299 q 331 1260 260 1299 q 433 1221 403 1221 q 486 1256 463 1221 q 522 1292 510 1292 q 543 1280 535 1292 q 551 1253 551 1268 z "},"\u0129":{"ha":311,"x_min":-92,"x_max":404,"o":"m 201 347 l 208 56 q 156 -14 208 -14 q 103 56 103 -14 l 110 347 q 103 639 110 347 q 156 708 103 708 q 208 639 208 708 l 201 347 m 404 947 q 369 865 404 900 q 285 829 333 829 q 171 867 238 829 q 76 906 104 906 q 28 885 47 906 q -7 842 10 864 q -44 821 -24 821 q -78 836 -64 821 q -92 871 -92 851 q -47 956 -92 919 q 55 993 -3 993 q 184 954 113 993 q 285 915 256 915 q 339 951 315 915 q 375 986 363 986 q 396 974 388 986 q 404 947 404 963 z "},"\u0130":{"ha":606,"x_min":51,"x_max":554,"o":"m 361 92 l 483 99 q 534 84 515 99 q 553 46 553 69 q 533 7 553 22 q 483 -8 514 -8 l 304 0 l 121 -7 q 51 46 51 -7 q 121 99 51 99 q 247 92 136 99 q 254 520 254 404 q 247 949 254 636 q 121 943 125 943 q 54 994 54 943 q 72 1034 54 1019 q 121 1049 90 1049 l 304 1042 q 414 1046 351 1042 q 495 1050 476 1050 q 534 1034 514 1050 q 554 994 554 1018 q 535 956 554 971 q 494 942 515 942 q 361 949 472 942 q 354 517 354 629 q 361 92 354 404 m 317 1326 q 331 1326 317 1326 q 360 1308 346 1326 q 374 1260 374 1289 q 354 1203 374 1232 q 306 1175 335 1175 q 262 1194 276 1175 q 247 1246 247 1214 q 267 1302 247 1278 q 317 1326 288 1326 z "},"\u0131":{"ha":311,"x_min":103,"x_max":208,"o":"m 201 347 l 208 56 q 156 -14 208 -14 q 103 56 103 -14 l 110 347 q 103 639 110 347 q 156 708 103 708 q 208 639 208 708 l 201 347 z "},"\u0132":{"ha":1279,"x_min":51,"x_max":1222,"o":"m 361 92 l 483 99 q 534 84 515 99 q 553 46 553 69 q 533 7 553 22 q 483 -8 514 -8 l 304 0 l 121 -7 q 51 46 51 -7 q 121 99 51 99 q 247 92 136 99 q 254 520 254 404 q 247 949 254 636 q 121 943 125 943 q 54 994 54 943 q 72 1034 54 1019 q 121 1049 90 1049 l 304 1042 q 414 1046 351 1042 q 495 1050 476 1050 q 534 1034 514 1050 q 554 994 554 1018 q 535 956 554 971 q 494 942 515 942 q 361 949 472 942 q 354 517 354 629 q 361 92 354 404 m 1124 519 l 1125 353 q 1038 75 1125 164 q 840 -14 950 -14 q 663 35 731 -14 q 596 126 596 85 q 609 162 596 149 q 640 175 622 175 q 676 160 658 175 q 710 126 694 144 q 757 93 725 108 q 831 78 789 78 q 966 151 910 78 q 1022 383 1022 224 l 1024 519 q 1021 950 1024 831 q 976 951 1006 951 l 789 944 q 722 996 722 944 q 740 1035 722 1019 q 789 1050 758 1050 l 972 1043 q 1082 1047 1019 1043 q 1163 1051 1144 1051 q 1202 1035 1182 1051 q 1222 996 1222 1019 q 1201 958 1222 972 q 1147 943 1179 943 l 1126 943 q 1124 519 1124 815 z "},"\u0133":{"ha":646,"x_min":93,"x_max":556,"o":"m 163 1007 q 177 1007 163 1007 q 206 988 192 1007 q 219 941 219 969 q 200 884 219 913 q 151 856 181 856 q 108 875 122 856 q 93 926 93 894 q 113 983 93 958 q 163 1007 133 1007 m 201 347 l 208 56 q 156 -14 208 -14 q 103 56 103 -14 l 110 347 l 103 639 q 156 708 103 708 q 208 639 208 708 l 201 347 m 499 1007 q 513 1007 499 1007 q 542 988 528 1007 q 556 941 556 969 q 536 884 556 913 q 488 856 517 856 q 444 875 458 856 q 429 926 429 894 q 449 983 429 958 q 499 1007 469 1007 m 538 319 l 536 14 q 476 -184 536 -106 q 364 -262 415 -262 q 326 -236 326 -262 q 386 -158 326 -217 q 428 -87 410 -136 q 447 28 447 -37 l 446 319 l 439 639 q 492 708 439 708 q 544 639 544 708 l 538 319 z "},"\u0134":{"ha":706,"x_min":22,"x_max":649,"o":"m 550 519 l 551 353 q 464 75 551 164 q 267 -14 376 -14 q 90 35 157 -14 q 22 126 22 85 q 35 162 22 149 q 67 175 49 175 q 103 160 85 175 q 136 126 121 144 q 183 93 151 108 q 257 78 215 78 q 392 151 336 78 q 449 383 449 224 q 450 519 449 383 q 447 950 450 831 q 403 951 432 951 l 215 944 q 149 996 149 944 q 167 1035 149 1019 q 215 1050 185 1050 l 399 1043 q 508 1047 446 1043 q 590 1051 571 1051 q 628 1035 608 1051 q 649 996 649 1019 q 627 958 649 972 q 574 943 606 943 l 553 943 q 550 519 550 815 m 586 1208 q 590 1205 586 1208 q 599 1191 593 1201 q 604 1166 604 1181 q 592 1140 604 1151 q 562 1128 579 1128 q 529 1140 544 1128 q 499 1173 514 1153 q 479 1197 485 1193 q 402 1264 424 1264 q 325 1197 381 1264 q 306 1172 319 1193 q 249 1128 272 1128 q 213 1140 225 1128 q 200 1166 200 1151 q 206 1191 200 1181 q 219 1208 213 1201 q 244 1230 225 1214 q 279 1262 263 1246 q 320 1310 296 1278 q 360 1354 344 1342 q 401 1367 376 1367 q 443 1354 426 1367 q 485 1310 460 1342 q 526 1262 510 1278 q 561 1230 543 1246 q 586 1208 579 1214 z "},"\u0135":{"ha":310,"x_min":-47,"x_max":357,"o":"m 201 319 l 200 14 q 140 -184 200 -106 q 28 -262 79 -262 q -10 -236 -10 -262 q 50 -158 -10 -217 q 92 -87 74 -136 q 111 28 111 -37 l 110 319 l 103 639 q 156 708 103 708 q 208 639 208 708 l 201 319 m 339 897 q 342 893 339 897 q 351 880 346 890 q 357 855 357 869 q 344 828 357 840 q 315 817 332 817 q 282 829 297 817 q 252 862 267 842 q 232 886 238 882 q 155 953 176 953 q 78 886 133 953 q 58 861 72 882 q 1 817 25 817 q -35 828 -22 817 q -47 855 -47 840 q -41 880 -47 869 q -28 897 -35 890 q -3 919 -22 903 q 32 951 15 935 q 73 999 49 967 q 113 1043 97 1031 q 154 1056 129 1056 q 196 1043 179 1056 q 238 999 213 1031 q 279 951 263 967 q 314 919 296 935 q 339 897 332 903 z "},"\u0136":{"ha":858,"x_min":136,"x_max":839,"o":"m 283 -160 q 287 -140 283 -160 q 306 -98 292 -119 q 347 -76 321 -76 q 386 -94 372 -76 q 400 -137 400 -112 q 347 -262 400 -197 q 258 -326 293 -326 q 235 -318 244 -326 q 226 -299 226 -310 q 231 -278 226 -289 q 248 -249 236 -267 q 267 -215 260 -231 q 283 -160 274 -200 m 243 479 l 250 57 q 233 6 250 26 q 193 -14 217 -14 q 153 6 169 -14 q 136 57 136 26 l 143 517 l 136 983 q 153 1034 136 1014 q 193 1054 169 1054 q 233 1034 217 1054 q 250 994 250 1014 q 249 921 250 974 q 243 589 243 710 q 363 606 285 606 q 428 601 365 606 q 552 774 496 660 q 629 994 608 888 q 686 1056 643 1056 q 719 1042 706 1056 q 733 1004 733 1028 q 658 763 733 917 q 508 536 582 608 q 617 326 546 450 q 724 153 688 203 q 787 99 757 113 q 828 87 817 86 q 839 79 839 88 q 817 13 839 39 q 764 -14 796 -14 q 643 81 711 -14 q 413 485 575 176 q 311 472 344 472 q 243 479 278 472 z "},"\u0137":{"ha":708,"x_min":92,"x_max":661,"o":"m 277 -160 q 282 -140 277 -160 q 301 -98 286 -119 q 341 -76 315 -76 q 381 -94 367 -76 q 394 -137 394 -112 q 341 -262 394 -197 q 253 -326 288 -326 q 230 -318 239 -326 q 221 -299 221 -310 q 226 -278 221 -289 q 243 -249 232 -268 q 261 -215 254 -231 q 277 -160 268 -200 m 204 358 l 208 57 q 156 -14 208 -14 q 92 84 92 -14 q 119 358 92 182 q 107 715 119 453 q 94 997 94 976 q 109 1037 94 1018 q 149 1056 124 1056 q 188 1037 174 1056 q 203 986 203 1018 l 203 532 q 453 708 304 708 q 582 661 533 708 q 631 546 631 614 q 513 351 631 432 q 444 307 486 333 l 547 149 q 603 96 574 108 q 647 83 632 83 q 661 71 661 83 q 640 12 661 38 q 590 -14 619 -14 q 545 -5 561 -14 q 510 30 529 4 q 475 83 492 56 q 351 276 394 215 q 292 297 315 276 q 268 344 268 317 q 287 390 268 372 q 336 408 306 408 q 399 374 367 408 q 492 446 451 397 q 533 533 533 494 q 512 594 533 572 q 447 617 490 617 q 300 538 369 617 q 204 358 231 460 z "},"\u0138":{"ha":701,"x_min":103,"x_max":669,"o":"m 110 347 l 103 639 q 156 708 103 708 q 208 639 208 708 q 205 551 208 631 q 201 413 201 471 q 297 432 260 432 q 361 429 333 432 q 453 531 411 463 q 515 660 494 599 q 569 708 531 708 q 601 694 588 708 q 614 663 614 681 q 556 516 614 607 q 429 364 499 425 l 556 150 q 611 98 582 111 q 655 84 640 85 q 669 72 669 83 q 649 13 669 39 q 598 -12 628 -12 q 551 -2 568 -12 q 512 38 533 8 q 472 99 490 68 q 347 311 413 206 q 258 297 313 297 l 201 303 q 208 56 208 67 q 156 -14 208 -14 q 103 56 103 -14 l 110 347 z "},"\u013f":{"ha":756,"x_min":136,"x_max":711,"o":"m 250 985 l 243 517 q 249 99 243 376 q 395 92 306 92 q 559 97 485 92 q 653 101 633 101 q 692 87 674 101 q 711 47 711 72 q 692 8 711 22 q 642 -7 674 -7 l 432 0 l 207 -7 q 156 11 175 -7 q 136 64 136 29 l 143 517 l 136 985 q 151 1036 136 1017 q 193 1056 167 1056 q 235 1036 219 1056 q 250 985 250 1017 m 478 611 q 493 611 478 611 q 524 590 508 611 q 539 535 539 568 q 519 476 539 503 q 469 449 499 449 q 424 471 440 449 q 408 526 408 493 q 428 585 408 558 q 478 611 449 611 z "},"\u0140":{"ha":469,"x_min":103,"x_max":450,"o":"m 201 521 l 208 56 q 156 -14 208 -14 q 103 56 103 -14 l 110 521 l 103 986 q 156 1056 103 1056 q 208 986 208 1056 l 201 521 m 390 611 q 405 611 390 611 q 435 590 419 611 q 450 535 450 568 q 430 476 450 503 q 381 449 410 449 q 335 471 351 449 q 319 526 319 493 q 340 585 319 558 q 390 611 360 611 z "},"\u0141":{"ha":767,"x_min":13,"x_max":722,"o":"m 154 624 l 147 985 q 163 1036 147 1017 q 204 1056 178 1056 q 246 1036 231 1056 q 261 995 261 1017 q 260 936 261 974 q 256 708 256 821 l 349 793 q 388 810 369 810 q 419 797 407 810 q 432 764 432 785 q 408 722 432 743 q 350 677 407 722 q 254 599 293 632 l 254 517 q 260 99 254 376 q 406 92 317 92 q 570 97 496 92 q 665 101 644 101 q 703 87 685 101 q 722 47 722 72 q 703 8 722 22 q 653 -7 685 -7 l 443 0 l 218 -7 q 167 11 186 -7 q 147 52 147 29 q 149 138 147 75 q 154 513 154 388 l 96 460 q 56 443 75 443 q 25 456 38 443 q 13 489 13 468 q 36 531 13 510 q 84 569 43 538 q 154 624 125 600 z "},"\u0142":{"ha":356,"x_min":1,"x_max":421,"o":"m 136 618 l 129 986 q 182 1056 129 1056 q 235 986 235 1056 q 233 935 235 974 q 231 828 232 896 q 228 696 229 761 q 293 753 256 719 q 344 799 331 788 q 377 810 358 810 q 408 797 396 810 q 421 764 421 785 q 397 722 421 743 q 336 674 394 719 q 228 586 261 615 l 228 521 q 231 176 228 286 q 235 56 235 67 q 182 -14 235 -14 q 129 56 129 -14 q 131 131 129 67 q 136 506 136 279 l 85 460 q 45 443 64 443 q 14 456 26 443 q 1 489 1 468 q 25 531 1 510 q 136 618 81 574 z "},"\u0143":{"ha":961,"x_min":136,"x_max":826,"o":"m 143 517 l 136 983 q 153 1035 136 1014 q 194 1056 169 1056 q 261 1018 239 1056 q 466 653 274 999 q 719 210 658 308 l 719 517 q 716 863 719 751 q 713 994 713 974 q 729 1035 713 1015 q 769 1056 746 1056 q 810 1035 793 1056 q 826 994 826 1015 q 825 907 826 974 q 819 517 819 751 l 822 57 q 805 6 822 25 q 757 -14 788 -14 q 704 24 726 -14 q 653 114 697 35 q 452 473 518 361 q 326 694 386 585 q 243 840 267 803 l 243 517 l 250 57 q 233 6 250 26 q 193 -14 217 -14 q 153 6 169 -14 q 136 57 136 26 l 143 517 m 638 1294 q 574 1175 638 1235 q 474 1115 511 1115 q 436 1144 436 1115 q 458 1186 436 1161 q 491 1224 481 1211 q 516 1273 501 1238 q 547 1328 531 1308 q 588 1347 563 1347 q 625 1331 613 1347 q 638 1294 638 1315 z "},"\u0144":{"ha":804,"x_min":94,"x_max":754,"o":"m 689 438 l 682 219 q 683 160 682 181 q 691 119 683 140 q 710 92 699 97 q 733 86 721 88 q 749 82 744 85 q 754 71 754 79 q 731 10 754 35 q 678 -14 708 -14 q 605 28 625 -14 q 585 150 585 69 l 590 406 q 550 558 590 500 q 438 617 510 617 q 300 538 367 617 q 207 358 233 458 l 211 57 q 158 -14 211 -14 q 94 84 94 -14 q 122 358 94 182 q 110 519 122 417 q 99 647 99 622 q 113 690 99 671 q 153 708 128 708 q 192 690 178 708 q 207 647 207 671 q 206 590 207 624 q 206 532 206 556 q 456 708 307 708 q 628 629 567 708 q 689 438 689 550 m 556 1003 q 492 883 556 943 q 392 824 429 824 q 354 853 354 824 q 376 894 354 869 q 409 933 399 919 q 434 981 419 946 q 465 1036 449 1017 q 506 1056 481 1056 q 543 1040 531 1056 q 556 1003 556 1024 z "},"\u0152":{"ha":1315,"x_min":79,"x_max":1253,"o":"m 921 601 q 1113 608 1088 608 q 1158 594 1139 608 q 1176 554 1176 579 q 1107 503 1176 503 q 926 508 1104 503 q 883 277 925 385 q 771 96 842 169 q 958 92 843 92 l 1183 99 q 1253 46 1253 99 q 1183 -7 1253 -7 l 958 0 l 715 -7 q 660 15 674 -7 q 508 -21 590 -21 q 202 138 325 -21 q 79 522 79 296 q 203 905 79 747 q 511 1063 328 1063 q 647 1033 585 1063 q 707 1049 665 1049 l 975 1042 l 1183 1049 q 1253 996 1253 1049 q 1183 943 1253 943 l 975 950 q 772 944 818 950 q 921 601 897 815 m 506 81 q 573 81 506 81 q 726 214 639 81 q 814 524 814 347 q 727 831 814 701 q 507 961 640 961 q 283 831 374 961 q 192 524 192 701 q 283 214 192 347 q 506 81 374 81 z "},"\u0153":{"ha":1261,"x_min":64,"x_max":1193,"o":"m 953 715 q 1123 653 1053 715 q 1193 490 1193 590 q 1106 338 1193 390 q 893 286 1019 286 q 717 307 821 286 q 790 140 725 210 q 933 69 854 69 q 1021 83 981 69 q 1082 111 1061 96 q 1155 154 1138 154 q 1183 144 1172 154 q 1193 118 1193 133 q 1113 29 1193 79 q 940 -21 1033 -21 q 665 147 754 -21 q 550 24 622 69 q 390 -21 478 -21 q 156 85 247 -21 q 64 346 64 192 q 156 608 64 500 q 389 715 249 715 q 556 668 482 715 q 671 540 629 621 q 953 715 769 715 m 551 151 q 584 192 551 151 q 618 349 618 233 q 553 544 618 464 q 393 625 489 625 q 230 543 297 625 q 163 346 163 461 q 227 150 163 231 q 388 69 292 69 q 551 151 483 69 m 888 374 q 935 374 888 374 q 1038 406 982 374 q 1094 492 1094 438 q 1058 585 1094 546 q 953 625 1021 625 q 799 556 861 625 q 718 396 736 488 q 888 374 794 374 z "},"\u0154":{"ha":883,"x_min":79,"x_max":846,"o":"m 249 426 l 256 57 q 239 6 256 26 q 199 -14 222 -14 q 158 6 175 -14 q 142 48 142 26 q 144 136 142 69 q 150 480 150 333 q 149 709 150 626 q 145 840 147 792 q 143 897 143 888 q 121 894 126 894 q 79 940 79 894 q 189 1030 79 997 q 385 1063 299 1063 q 672 973 575 1063 q 769 753 769 883 q 713 583 769 664 q 560 461 657 501 q 778 103 690 151 q 817 92 803 89 q 846 75 846 96 q 821 11 846 36 q 764 -14 796 -14 q 653 64 711 -14 q 460 429 569 183 q 328 417 393 417 l 249 426 m 667 744 q 596 905 667 843 q 409 967 525 967 q 250 942 293 967 q 246 718 246 869 q 247 535 246 567 q 375 551 310 551 q 494 538 440 551 q 612 610 557 550 q 667 744 667 671 m 557 1294 q 494 1175 557 1235 q 393 1115 431 1115 q 356 1144 356 1115 q 378 1186 356 1161 q 410 1224 400 1211 q 435 1273 421 1238 q 466 1328 450 1308 q 507 1347 482 1347 q 544 1331 532 1347 q 557 1294 557 1315 z "},"\u0156":{"ha":883,"x_min":81,"x_max":847,"o":"m 269 -160 q 273 -140 269 -160 q 292 -98 278 -119 q 333 -76 307 -76 q 372 -94 358 -76 q 386 -137 386 -112 q 333 -262 386 -197 q 244 -326 279 -326 q 222 -318 231 -326 q 213 -299 213 -310 q 218 -278 213 -289 q 235 -249 224 -268 q 253 -215 246 -231 q 269 -160 260 -200 m 771 753 q 715 583 771 664 q 561 461 658 501 q 779 103 692 151 q 817 92 804 89 q 847 75 847 96 q 822 11 847 36 q 765 -14 797 -14 q 654 64 713 -14 q 461 429 571 183 q 329 417 394 417 l 250 426 q 253 150 250 233 q 257 47 257 67 q 240 6 257 26 q 200 -14 224 -14 q 160 6 176 -14 q 143 48 143 26 q 144 136 143 69 q 151 480 151 333 q 149 709 151 626 q 146 840 147 792 q 144 897 144 888 q 122 894 128 894 q 81 940 81 894 q 190 1030 81 997 q 386 1063 300 1063 q 674 973 576 1063 q 771 753 771 883 m 668 744 q 597 905 668 843 q 410 967 526 967 q 251 942 294 967 q 247 718 247 869 q 249 535 247 567 q 376 551 311 551 q 496 538 442 551 q 613 610 558 550 q 668 744 668 671 z "},"\u0157":{"ha":567,"x_min":25,"x_max":544,"o":"m 81 -160 q 86 -140 81 -160 q 105 -98 90 -119 q 145 -76 119 -76 q 185 -94 171 -76 q 199 -137 199 -112 q 145 -262 199 -197 q 57 -326 92 -326 q 34 -318 43 -326 q 25 -299 25 -310 q 31 -278 25 -289 q 47 -249 36 -268 q 65 -215 58 -231 q 81 -160 72 -200 m 207 318 l 211 57 q 158 -14 211 -14 q 94 84 94 -14 q 122 358 94 182 q 110 518 122 417 q 99 644 99 619 q 113 689 99 669 q 153 708 128 708 q 192 689 178 708 q 207 647 207 669 q 206 588 207 624 q 206 529 206 553 q 292 654 233 600 q 414 708 351 708 q 510 683 476 708 q 544 628 544 657 q 529 582 544 599 q 490 565 514 565 q 437 591 465 565 q 392 617 408 617 q 285 518 346 617 q 207 318 224 419 z "},"\u0158":{"ha":883,"x_min":79,"x_max":846,"o":"m 249 426 l 256 57 q 239 6 256 26 q 199 -14 222 -14 q 158 6 175 -14 q 142 48 142 26 q 144 136 142 69 q 150 480 150 333 q 149 709 150 626 q 145 840 147 792 q 143 897 143 888 q 121 894 126 894 q 79 940 79 894 q 189 1030 79 997 q 385 1063 299 1063 q 672 973 575 1063 q 769 753 769 883 q 713 583 769 664 q 560 461 657 501 q 778 103 690 151 q 817 92 803 89 q 846 75 846 96 q 821 11 846 36 q 764 -14 796 -14 q 653 64 711 -14 q 460 429 569 183 q 328 417 393 417 l 249 426 m 667 744 q 596 905 667 843 q 409 967 525 967 q 250 942 293 967 q 246 718 246 869 q 247 535 246 567 q 375 551 310 551 q 494 538 440 551 q 612 610 557 550 q 667 744 667 671 m 540 1367 q 552 1367 540 1367 q 576 1355 564 1367 q 589 1328 589 1343 q 583 1303 589 1314 q 571 1287 578 1293 q 546 1265 564 1281 q 511 1233 528 1249 q 469 1185 494 1217 q 428 1140 444 1153 q 386 1128 411 1128 q 345 1140 361 1128 q 305 1185 329 1153 q 264 1233 281 1217 q 228 1265 247 1249 q 203 1286 210 1281 q 185 1324 185 1306 q 197 1355 185 1343 q 227 1367 210 1367 q 259 1356 244 1367 q 291 1322 274 1344 q 310 1297 308 1299 q 387 1231 372 1231 q 464 1297 401 1231 q 483 1322 465 1299 q 540 1367 517 1367 z "},"\u0159":{"ha":567,"x_min":94,"x_max":544,"o":"m 207 318 l 211 57 q 158 -14 211 -14 q 94 84 94 -14 q 122 358 94 182 q 110 518 122 417 q 99 644 99 619 q 113 689 99 669 q 153 708 128 708 q 192 689 178 708 q 207 647 207 669 q 206 588 207 624 q 206 529 206 553 q 292 654 233 600 q 414 708 351 708 q 510 683 476 708 q 544 628 544 657 q 529 582 544 599 q 490 565 514 565 q 437 591 465 565 q 392 617 408 617 q 285 518 346 617 q 207 318 224 419 m 464 1056 q 476 1056 464 1056 q 500 1044 488 1056 q 513 1017 513 1032 q 507 992 513 1003 q 494 976 501 982 q 469 953 488 969 q 435 922 451 938 q 393 874 418 906 q 351 829 368 842 q 310 817 335 817 q 269 829 285 817 q 228 874 253 842 q 188 922 204 906 q 152 953 171 938 q 128 975 133 969 q 108 1013 108 994 q 121 1044 108 1032 q 151 1056 133 1056 q 183 1044 168 1056 q 215 1010 197 1033 q 233 986 232 988 q 310 919 296 919 q 388 986 325 919 q 406 1011 389 988 q 464 1056 440 1056 z "},"\u0178":{"ha":769,"x_min":21,"x_max":749,"o":"m 329 56 q 331 119 329 65 q 336 436 336 246 l 183 704 q 128 799 157 750 l 82 875 q 28 972 36 953 q 21 1008 21 992 q 33 1040 21 1025 q 67 1056 46 1056 q 101 1044 88 1056 q 132 1006 115 1033 q 164 947 149 978 q 390 543 268 733 q 603 919 518 744 q 624 962 613 940 q 642 996 636 983 q 656 1020 649 1008 q 669 1038 664 1032 q 681 1047 674 1043 q 708 1056 690 1056 q 737 1043 725 1056 q 749 1015 749 1031 q 744 984 749 999 q 726 943 740 969 q 699 894 713 917 q 655 818 686 871 q 599 721 624 765 l 436 436 q 440 153 436 243 q 443 56 443 63 q 386 -14 443 -14 q 329 56 329 -14 m 292 1326 q 306 1326 292 1326 q 335 1308 321 1326 q 349 1260 349 1289 q 329 1203 349 1232 q 281 1175 310 1175 q 237 1194 251 1175 q 222 1246 222 1214 q 242 1302 222 1278 q 292 1326 263 1326 m 514 1326 q 528 1326 514 1326 q 557 1308 543 1326 q 571 1260 571 1289 q 551 1203 571 1232 q 503 1175 532 1175 q 459 1194 474 1175 q 444 1246 444 1214 q 465 1302 444 1278 q 514 1326 485 1326 z "},"\u02c6":{"ha":571,"x_min":83,"x_max":488,"o":"m 469 897 q 473 893 469 897 q 482 880 476 890 q 488 855 488 869 q 475 828 488 840 q 445 817 463 817 q 413 829 428 817 q 383 862 397 842 q 363 886 368 882 q 285 953 307 953 q 208 886 264 953 q 189 861 203 882 q 132 817 156 817 q 96 828 108 817 q 83 855 83 840 q 90 880 83 869 q 102 897 96 890 q 127 919 108 903 q 163 951 146 935 q 203 999 179 967 q 244 1043 228 1031 q 285 1056 260 1056 q 326 1043 310 1056 q 368 999 343 1031 q 410 951 393 967 q 444 919 426 935 q 469 897 463 903 z "},"\u02c7":{"ha":571,"x_min":83,"x_max":488,"o":"m 439 1056 q 451 1056 439 1056 q 475 1044 463 1056 q 488 1017 488 1032 q 482 992 488 1003 q 469 976 476 982 q 444 953 463 969 q 410 922 426 938 q 368 874 393 906 q 326 829 343 842 q 285 817 310 817 q 244 829 260 817 q 203 874 228 842 q 163 922 179 906 q 127 953 146 938 q 103 975 108 969 q 83 1013 83 994 q 96 1044 83 1032 q 126 1056 108 1056 q 158 1044 143 1056 q 190 1010 172 1033 q 208 986 207 988 q 285 919 271 919 q 363 986 300 919 q 381 1011 364 988 q 439 1056 415 1056 z "},"\u02d8":{"ha":576,"x_min":83,"x_max":493,"o":"m 451 1056 q 493 1002 493 1056 q 435 890 493 949 q 288 831 376 831 q 141 890 199 831 q 83 1002 83 949 q 125 1056 83 1056 q 189 986 160 1056 q 224 940 199 961 q 288 918 250 918 q 351 940 325 918 q 388 986 376 961 q 451 1056 417 1056 z "},"\u02d9":{"ha":265,"x_min":69,"x_max":196,"o":"m 139 1056 q 153 1056 139 1056 q 182 1037 168 1056 q 196 990 196 1018 q 176 933 196 961 q 128 904 157 904 q 84 924 99 904 q 69 975 69 943 q 90 1031 69 1007 q 139 1056 110 1056 z "},"\u02da":{"ha":253,"x_min":0,"x_max":253,"o":"m 217 1024 q 235 1005 217 1024 q 253 931 253 986 q 218 838 253 875 q 126 800 183 800 q 35 837 69 800 q 0 930 0 874 q 36 1024 0 986 q 126 1063 72 1063 q 217 1024 181 1063 m 126 865 q 139 865 126 865 q 169 885 151 865 q 188 931 188 906 q 169 977 188 957 q 126 997 150 997 q 84 977 103 997 q 65 931 65 957 q 83 885 65 906 q 126 865 101 865 z "},"\u02db":{"ha":493,"x_min":115,"x_max":432,"o":"m 432 -222 q 387 -288 432 -257 q 277 -319 342 -319 q 164 -281 213 -319 q 115 -176 115 -242 q 247 -8 115 -74 l 350 -8 q 208 -165 208 -79 q 233 -214 208 -197 q 290 -231 257 -231 q 359 -213 322 -231 q 407 -196 396 -196 q 425 -204 418 -196 q 432 -222 432 -212 z "},"\u02dc":{"ha":690,"x_min":97,"x_max":593,"o":"m 593 947 q 558 865 593 900 q 474 829 522 829 q 360 867 426 829 q 265 906 293 906 q 217 885 236 906 q 182 842 199 864 q 145 821 165 821 q 111 836 125 821 q 97 871 97 851 q 142 956 97 919 q 244 993 186 993 q 373 954 301 993 q 474 915 444 915 q 528 951 504 915 q 564 986 551 986 q 585 974 576 986 q 593 947 593 963 z "},"\u03a9":{"ha":1151,"x_min":39,"x_max":1114,"o":"m 106 99 l 261 92 q 325 93 304 92 q 136 525 136 282 q 267 855 136 717 q 578 993 399 993 q 887 857 757 993 q 1017 529 1017 721 q 828 92 1017 283 q 892 90 847 90 l 1047 97 q 1096 83 1078 97 q 1114 44 1114 68 q 1096 5 1114 19 q 1047 -10 1078 -10 l 892 -1 q 799 -6 851 -1 q 727 -10 746 -10 q 689 5 708 -10 q 669 47 669 19 q 703 92 669 74 q 850 267 792 139 q 908 538 908 396 q 815 788 908 681 q 578 896 721 896 q 340 787 435 896 q 244 535 244 678 q 303 267 244 393 q 450 93 361 142 q 483 47 483 74 q 464 6 483 21 q 426 -8 444 -8 q 354 -4 407 -8 q 261 0 301 0 l 106 -8 q 57 6 75 -8 q 39 44 39 21 q 57 83 39 68 q 106 99 75 99 z "},"\u2013":{"ha":789,"x_min":92,"x_max":697,"o":"m 394 404 l 640 408 q 681 396 665 408 q 697 363 697 383 q 681 329 697 342 q 640 317 665 317 l 394 321 l 149 317 q 108 329 124 317 q 92 363 92 342 q 108 396 92 383 q 149 408 124 408 q 394 404 149 408 z "},"\u2014":{"ha":1178,"x_min":92,"x_max":1086,"o":"m 589 404 l 1029 408 q 1070 396 1054 408 q 1086 363 1086 383 q 1070 329 1086 342 q 1029 317 1054 317 l 589 321 l 149 317 q 108 329 124 317 q 92 363 92 342 q 108 396 92 383 q 149 408 124 408 q 589 404 149 408 z "},"\u2018":{"ha":303,"x_min":69,"x_max":243,"o":"m 192 846 l 200 744 q 181 688 200 714 q 131 661 163 661 q 85 683 100 661 q 69 731 69 704 q 119 919 69 826 q 215 1011 168 1011 q 235 1003 226 1011 q 243 985 243 996 q 217 932 243 975 q 192 846 192 889 z "},"\u2019":{"ha":304,"x_min":67,"x_max":240,"o":"m 118 826 l 110 928 q 128 985 110 958 q 178 1011 147 1011 q 225 990 210 1011 q 240 942 240 968 q 191 753 240 846 q 94 661 142 661 q 75 669 83 661 q 67 686 67 676 q 92 740 67 696 q 118 826 118 783 z "},"\u201a":{"ha":292,"x_min":79,"x_max":210,"o":"m 86 -158 l 90 -47 q 85 8 90 -18 q 79 61 79 33 q 99 115 79 89 q 149 142 119 142 q 194 120 179 142 q 210 68 210 99 q 178 -103 210 -18 q 114 -187 147 -187 q 86 -158 86 -187 z "},"\u201c":{"ha":528,"x_min":69,"x_max":468,"o":"m 417 846 l 425 744 q 406 688 425 714 q 356 661 388 661 q 310 683 325 661 q 294 731 294 704 q 344 919 294 826 q 440 1011 393 1011 q 460 1003 451 1011 q 468 985 468 996 q 442 932 468 975 q 417 846 417 889 m 192 846 l 200 744 q 181 688 200 714 q 131 661 163 661 q 85 683 100 661 q 69 731 69 704 q 119 919 69 826 q 215 1011 168 1011 q 235 1003 226 1011 q 243 985 243 996 q 217 932 243 975 q 192 846 192 889 z "},"\u201d":{"ha":529,"x_min":67,"x_max":465,"o":"m 118 826 l 110 928 q 128 985 110 958 q 178 1011 147 1011 q 225 990 210 1011 q 240 942 240 968 q 191 753 240 846 q 94 661 142 661 q 75 669 83 661 q 67 686 67 676 q 92 740 67 696 q 118 826 118 783 m 343 826 l 335 928 q 353 985 335 958 q 403 1011 372 1011 q 450 990 435 1011 q 465 942 465 968 q 416 753 465 846 q 319 661 367 661 q 300 669 308 661 q 292 686 292 676 q 317 740 292 696 q 343 826 343 783 z "},"\u201e":{"ha":542,"x_min":79,"x_max":460,"o":"m 86 -158 l 90 -47 q 85 8 90 -18 q 79 61 79 33 q 99 115 79 89 q 149 142 119 142 q 194 120 179 142 q 210 68 210 99 q 178 -103 210 -18 q 114 -187 147 -187 q 86 -158 86 -187 m 336 -158 l 340 -47 q 335 8 340 -18 q 329 61 329 33 q 349 115 329 89 q 399 142 369 142 q 444 120 429 142 q 460 68 460 99 q 428 -103 460 -18 q 364 -187 397 -187 q 336 -158 336 -187 z "},"\u2020":{"ha":731,"x_min":56,"x_max":675,"o":"m 404 694 l 618 699 q 659 686 643 699 q 675 653 675 674 q 659 619 675 632 q 618 607 643 607 q 403 611 549 607 l 403 411 q 406 -3 403 131 q 410 -159 410 -136 q 396 -201 410 -182 q 360 -221 382 -221 q 324 -201 338 -221 q 310 -159 310 -182 q 311 -56 310 -136 q 317 340 317 131 q 315 611 317 550 q 133 607 178 607 q 72 619 88 607 q 56 653 56 632 q 72 686 56 674 q 113 699 88 699 l 314 694 l 310 985 q 324 1036 310 1017 q 360 1056 338 1056 q 396 1036 382 1056 q 410 975 410 1017 q 404 694 410 933 z "},"\u2021":{"ha":760,"x_min":69,"x_max":690,"o":"m 418 611 l 417 411 l 418 314 l 632 318 q 673 306 657 318 q 689 272 689 293 q 673 239 689 251 q 610 226 657 226 q 418 231 564 226 l 425 -164 q 411 -215 425 -196 q 375 -235 397 -235 q 339 -215 353 -235 q 325 -164 325 -196 l 331 231 q 147 226 193 226 q 85 239 101 226 q 69 272 69 251 q 85 306 69 293 q 126 318 101 318 l 332 314 l 332 411 q 331 611 332 550 q 148 607 193 607 q 87 619 103 607 q 71 653 71 632 q 87 686 71 674 q 128 699 103 699 l 329 694 l 325 985 q 339 1036 325 1017 q 375 1056 353 1056 q 411 1036 397 1056 q 425 975 425 1017 q 419 694 425 933 l 633 699 q 674 686 658 699 q 690 653 690 674 q 674 619 690 632 q 633 607 658 607 q 418 611 564 607 z "},"\u2022":{"ha":401,"x_min":71,"x_max":332,"o":"m 211 708 q 241 708 211 708 q 301 666 271 708 q 332 557 332 624 q 292 437 332 490 q 193 383 251 383 q 103 428 135 383 q 71 538 71 474 q 111 656 71 603 q 211 708 151 708 z "},"\u2026":{"ha":810,"x_min":78,"x_max":731,"o":"m 148 149 q 163 149 148 149 q 193 127 178 149 q 208 73 208 106 q 188 13 208 40 q 139 -14 168 -14 q 94 8 110 -14 q 78 63 78 31 q 98 122 78 96 q 148 149 118 149 m 409 149 q 424 149 409 149 q 454 127 439 149 q 469 73 469 106 q 449 13 469 40 q 400 -14 429 -14 q 355 8 371 -14 q 339 63 339 31 q 359 122 339 96 q 409 149 379 149 m 670 149 q 685 149 670 149 q 715 127 700 149 q 731 73 731 106 q 710 13 731 40 q 661 -14 690 -14 q 616 8 632 -14 q 600 63 600 31 q 620 122 600 96 q 670 149 640 149 z "},"\u2030":{"ha":1603,"x_min":68,"x_max":1539,"o":"m 1335 460 q 1381 460 1335 460 q 1483 392 1426 460 q 1539 222 1539 325 q 1481 49 1539 118 q 1331 -21 1422 -21 q 1184 47 1240 -21 q 1128 217 1128 114 q 1186 390 1128 321 q 1335 460 1244 460 m 1333 58 q 1360 58 1333 58 q 1419 103 1388 58 q 1450 218 1450 149 q 1419 334 1450 288 q 1334 381 1389 381 q 1248 335 1279 381 q 1217 221 1217 290 q 1247 105 1217 151 q 1333 58 1278 58 m 814 981 q 736 836 814 921 q 447 14 461 49 q 397 -21 433 -21 q 367 -8 379 -21 q 354 26 354 4 q 389 132 354 47 q 636 801 529 475 q 573 790 613 790 q 468 810 533 790 q 475 753 475 785 q 419 582 475 651 q 272 513 363 513 q 124 580 181 513 q 68 751 68 647 q 126 924 68 854 q 267 993 185 993 q 422 933 349 993 q 562 872 496 872 q 657 897 628 872 l 668 936 q 719 1046 693 1026 q 755 1056 732 1056 q 796 1034 778 1056 q 814 981 814 1013 m 273 592 q 300 592 273 592 q 359 637 328 592 q 390 751 390 682 q 360 867 390 821 q 274 914 329 914 q 187 869 218 914 q 156 754 156 824 q 187 638 156 685 q 273 592 218 592 m 849 460 q 895 460 849 460 q 997 392 940 460 q 1053 222 1053 325 q 994 49 1053 118 q 845 -21 936 -21 q 698 47 754 -21 q 642 217 642 114 q 700 390 642 321 q 849 460 758 460 m 847 58 q 874 58 847 58 q 933 103 901 58 q 964 218 964 149 q 933 334 964 288 q 848 381 903 381 q 762 335 793 381 q 731 221 731 290 q 761 105 731 151 q 847 58 792 58 z "},"\u2039":{"ha":414,"x_min":61,"x_max":328,"o":"m 92 428 q 86 433 92 428 q 71 454 81 439 q 61 487 61 469 q 72 519 61 504 q 119 567 83 535 q 171 615 156 600 q 206 653 186 631 q 236 683 226 675 q 281 708 260 708 q 315 695 303 708 q 328 663 328 682 q 315 631 328 644 q 273 597 301 617 q 231 564 244 576 q 164 485 164 504 q 231 406 164 465 q 273 373 244 393 q 315 339 301 353 q 328 306 328 325 q 315 274 328 288 q 287 261 303 261 q 258 269 271 261 q 235 285 244 276 q 206 317 226 294 q 170 355 186 339 q 129 394 154 371 q 92 428 104 417 z "},"\u203a":{"ha":413,"x_min":86,"x_max":353,"o":"m 322 542 q 327 536 322 542 q 343 515 333 531 q 353 483 353 500 q 342 450 353 465 q 294 402 331 435 q 243 354 258 369 q 208 317 228 339 q 178 286 188 294 q 133 261 154 261 q 99 274 111 261 q 86 306 86 288 q 99 339 86 325 q 141 373 113 353 q 183 406 169 393 q 250 485 250 465 q 183 564 250 504 q 141 597 169 576 q 99 631 113 617 q 86 663 86 644 q 99 695 86 682 q 127 708 111 708 q 156 701 143 708 q 178 684 169 693 q 208 653 188 675 q 244 615 228 631 q 285 576 260 599 q 322 542 310 553 z "},"\u2044":{"ha":492,"x_min":21,"x_max":472,"o":"m 450 935 q 439 906 450 935 q 379 759 428 878 q 290 525 331 640 q 214 301 249 410 q 135 65 154 121 q 101 -6 117 10 q 67 -21 85 -21 q 35 -10 49 -21 q 21 26 21 1 q 42 107 21 50 q 113 284 64 164 q 201 519 161 404 q 277 741 240 633 q 336 913 314 849 q 367 1006 358 978 q 431 1063 386 1063 q 458 1051 444 1063 q 472 1016 472 1040 q 450 935 472 992 z "},"\u20ac":{"ha":893,"x_min":71,"x_max":808,"o":"m 374 438 l 619 442 q 660 429 644 442 q 676 396 676 417 q 660 363 676 375 q 619 350 644 350 l 374 354 q 290 353 318 354 q 381 146 314 224 q 550 68 447 68 q 633 83 594 68 q 692 114 671 97 q 767 160 749 160 q 797 147 786 160 q 808 118 808 135 q 732 28 808 76 q 550 -21 656 -21 q 317 83 411 -21 q 193 351 222 186 q 133 350 164 350 q 87 363 103 350 q 71 396 71 375 q 87 429 71 417 q 128 442 103 442 l 374 438 m 374 610 l 619 614 q 660 601 644 614 q 676 568 676 589 q 660 535 676 547 q 619 522 644 522 l 374 526 l 128 522 q 87 535 103 522 q 71 568 71 547 q 87 601 71 589 q 128 614 103 614 l 192 613 q 313 888 218 782 q 550 993 408 993 q 719 949 649 993 q 789 857 789 906 q 778 828 789 842 q 749 815 768 815 q 710 829 729 815 q 675 860 692 843 q 625 892 658 878 q 550 906 592 906 q 378 824 446 906 q 288 610 310 743 l 374 610 z "},"\u2122":{"ha":1201,"x_min":93,"x_max":1075,"o":"m 293 1043 l 428 1049 q 472 1037 456 1049 q 488 1007 488 1025 q 428 965 488 965 l 335 968 q 331 760 331 872 l 335 518 q 293 465 335 465 q 251 518 251 465 l 256 760 q 251 969 256 919 l 150 965 q 93 1006 93 965 q 150 1047 93 1047 l 293 1043 m 569 872 l 568 996 q 581 1033 568 1018 q 614 1049 593 1049 q 686 997 661 1049 q 828 683 719 928 q 899 843 858 744 q 964 995 939 942 q 1026 1049 989 1049 q 1061 1033 1049 1049 q 1074 996 1074 1018 q 1072 872 1074 996 q 1072 757 1072 872 q 1075 517 1072 757 q 1035 465 1075 465 q 992 518 992 465 l 996 757 q 994 901 996 861 q 857 582 861 590 q 826 558 847 558 q 793 585 806 558 q 742 700 793 588 q 647 901 690 813 q 646 757 646 861 l 650 518 q 607 465 650 465 q 567 518 567 465 l 569 757 l 569 872 z "},"\u2190":{"ha":1131,"x_min":28,"x_max":1090,"o":"m 563 526 l 1019 533 q 1070 519 1050 533 q 1090 481 1090 504 q 1070 442 1090 457 q 1019 428 1050 428 l 563 435 l 169 435 l 282 340 q 350 283 311 315 q 458 190 438 211 q 479 149 479 169 q 465 114 479 128 q 428 100 451 100 q 379 122 406 100 q 247 247 317 178 q 119 369 178 317 q 56 426 61 421 q 28 481 28 454 q 56 535 28 507 q 119 592 61 540 q 247 714 178 644 q 379 839 317 783 q 428 861 406 861 q 465 847 451 861 q 479 813 479 833 q 461 774 479 792 q 417 733 443 756 q 351 678 390 711 q 282 621 311 646 l 169 526 l 563 526 z "},"\u2191":{"ha":797,"x_min":18,"x_max":779,"o":"m 448 174 q 450 121 448 174 q 451 47 451 68 q 437 6 451 26 q 399 -14 422 -14 q 360 6 375 -14 q 346 47 346 26 q 347 132 346 68 q 353 514 353 281 l 353 907 l 258 794 q 200 725 233 765 q 108 618 129 639 q 67 597 88 597 q 32 611 46 597 q 18 648 18 625 q 40 697 18 671 q 165 829 96 760 q 287 957 235 899 q 344 1021 339 1015 q 399 1049 372 1049 q 453 1021 425 1049 q 510 957 458 1015 q 632 829 563 899 q 757 697 701 760 q 779 648 779 671 q 765 611 779 625 q 731 597 751 597 q 692 615 710 597 q 651 660 674 633 q 597 726 629 686 q 539 794 564 765 l 444 907 l 444 514 q 448 174 444 281 z "},"\u2192":{"ha":1131,"x_min":40,"x_max":1103,"o":"m 111 533 l 568 526 l 961 526 l 849 621 q 781 678 819 646 q 672 771 693 750 q 651 813 651 792 q 665 847 651 833 q 702 861 679 861 q 751 839 725 861 q 883 714 814 783 q 1011 592 953 644 q 1075 535 1069 540 q 1103 481 1103 507 q 1075 426 1103 454 q 1011 369 1069 421 q 883 247 953 317 q 751 122 814 178 q 702 100 725 100 q 665 114 679 100 q 651 149 651 128 q 669 188 651 169 q 714 228 688 206 q 780 283 740 250 q 849 340 819 315 l 961 435 l 568 435 l 111 428 q 60 442 81 428 q 40 481 40 457 q 60 519 40 504 q 111 533 81 533 z "},"\u2193":{"ha":797,"x_min":18,"x_max":779,"o":"m 453 14 q 399 -14 425 -14 q 344 14 372 -14 q 287 78 339 19 q 165 206 235 136 q 40 338 96 275 q 18 387 18 364 q 32 424 18 410 q 67 438 46 438 q 106 419 88 438 q 146 375 124 401 q 201 309 168 349 q 258 240 233 269 l 353 128 l 353 521 q 349 860 353 754 q 346 988 346 967 q 360 1028 346 1008 q 399 1049 375 1049 q 437 1028 422 1049 q 451 988 451 1008 q 450 903 451 967 q 444 521 444 754 l 444 128 l 539 240 q 597 308 564 269 q 689 417 668 396 q 731 438 710 438 q 765 424 751 438 q 779 387 779 410 q 757 338 779 364 q 632 206 701 275 q 510 78 563 136 q 453 14 458 19 z "},"\u2212":{"ha":878,"x_min":108,"x_max":769,"o":"m 439 404 l 713 408 q 753 396 738 408 q 769 363 769 383 q 753 329 769 342 q 713 317 738 317 l 439 321 l 165 317 q 124 329 140 317 q 108 363 108 342 q 124 396 108 383 q 165 408 140 408 q 439 404 165 408 z "},"\u2248":{"ha":825,"x_min":108,"x_max":717,"o":"m 713 500 q 713 482 713 500 q 663 422 713 464 q 559 381 613 381 q 431 421 506 381 q 316 461 357 461 q 231 419 275 461 q 162 376 188 376 q 122 390 136 376 q 108 422 108 403 q 168 507 108 467 q 298 547 228 547 q 444 507 368 547 q 552 467 519 467 q 608 484 585 467 q 649 519 632 501 q 681 536 665 536 q 713 500 713 536 m 717 286 q 717 268 717 286 q 667 208 717 250 q 563 167 617 167 q 435 207 510 167 q 320 247 361 247 q 235 205 279 247 q 166 163 192 163 q 126 176 140 163 q 113 208 113 189 q 172 293 113 253 q 302 333 232 333 q 448 293 372 333 q 556 253 524 253 q 613 270 589 253 q 653 305 636 288 q 685 322 669 322 q 717 286 717 322 z "},"\u2260":{"ha":775,"x_min":85,"x_max":690,"o":"m 400 304 l 633 308 q 674 296 658 308 q 690 263 690 283 q 674 229 690 242 q 633 217 658 217 l 344 221 l 263 92 q 219 60 243 60 q 183 73 194 60 q 171 105 171 86 q 185 144 171 124 l 242 218 l 142 217 q 101 229 117 217 q 85 263 85 242 q 101 296 85 283 q 151 308 117 308 q 299 304 186 308 l 376 421 l 142 417 q 101 429 117 417 q 85 463 85 442 q 101 496 85 483 q 142 508 117 508 l 431 504 l 510 628 q 553 657 532 657 q 588 644 574 657 q 601 612 601 632 q 593 580 601 592 q 567 544 585 568 q 538 506 549 521 q 640 508 621 508 q 674 496 658 508 q 690 463 690 483 q 674 429 690 442 q 639 417 658 417 q 481 419 619 417 l 400 304 z "},"\u2264":{"ha":782,"x_min":83,"x_max":689,"o":"m 386 83 l 632 88 q 673 75 657 88 q 689 42 689 63 q 673 8 689 21 q 632 -4 657 -4 l 386 0 l 140 -4 q 99 8 115 -4 q 83 42 83 21 q 99 75 83 63 q 140 88 115 88 q 386 83 140 88 m 636 290 q 649 283 636 290 q 673 265 663 276 q 683 238 683 254 q 672 209 683 221 q 644 197 660 197 q 610 203 628 197 q 567 220 593 208 q 515 245 540 232 q 444 280 489 258 q 367 317 400 301 q 292 353 333 333 q 228 383 250 374 q 178 407 207 393 q 137 430 150 421 q 110 450 124 439 q 91 472 96 461 q 86 494 86 483 q 92 515 86 506 q 111 536 97 525 q 140 557 125 547 q 183 582 154 567 q 236 608 213 597 q 304 642 260 619 l 382 681 q 453 717 415 697 l 508 746 q 613 794 597 792 q 644 797 629 797 q 672 783 658 797 q 685 754 685 769 q 682 731 685 739 q 670 715 679 724 q 651 701 661 707 q 619 685 640 694 q 578 667 599 675 q 469 617 499 632 q 405 588 439 603 q 346 560 371 572 q 293 533 321 549 q 233 492 233 503 q 251 471 233 481 q 281 454 269 461 q 312 438 293 447 q 343 423 331 429 q 376 408 356 417 q 424 386 397 399 q 503 351 450 374 q 583 316 557 328 q 636 290 610 304 z "},"\u2265":{"ha":782,"x_min":93,"x_max":699,"o":"m 396 83 l 642 88 q 683 75 667 88 q 699 42 699 63 q 683 8 699 21 q 642 -4 667 -4 l 396 0 l 150 -4 q 109 8 125 -4 q 93 42 93 21 q 109 75 93 63 q 150 88 125 88 q 396 83 150 88 m 690 515 q 693 510 690 515 q 696 494 696 506 q 691 472 696 483 q 672 450 686 461 q 645 430 658 439 q 603 407 632 421 q 553 383 575 393 q 490 353 532 374 q 415 317 449 333 q 338 280 382 301 q 267 245 293 258 q 215 219 242 232 q 143 197 164 197 q 110 209 122 197 q 99 238 99 221 q 109 265 99 254 q 146 290 119 276 q 199 316 172 304 q 278 351 225 328 q 358 386 332 374 q 406 408 385 399 q 439 423 426 417 q 470 438 451 429 q 501 454 489 447 q 525 468 513 461 q 549 492 549 481 q 378 588 549 511 q 320 614 343 603 q 261 641 297 625 q 204 666 225 657 q 163 685 183 675 q 131 701 142 694 q 111 715 121 707 q 97 749 97 729 q 110 783 97 769 q 138 797 124 797 q 160 796 153 797 q 179 790 168 794 q 201 782 190 786 q 233 767 211 778 q 272 746 254 756 l 329 717 q 400 681 367 697 l 478 642 q 546 608 522 619 q 599 582 569 597 q 642 557 628 567 q 671 536 657 547 q 690 515 685 525 z "},"\ue062":{"ha":1407,"x_min":38,"x_max":1388,"o":"m 371 1042 l 775 1050 q 826 1035 807 1050 q 846 998 846 1021 q 842 820 846 975 q 839 531 839 665 q 1089 707 936 707 q 1261 628 1200 707 q 1322 436 1322 549 l 1315 218 q 1316 159 1315 179 q 1324 117 1317 139 q 1343 91 1332 96 q 1366 85 1354 86 q 1383 81 1378 83 q 1388 69 1388 78 q 1365 9 1388 33 q 1311 -15 1342 -15 q 1238 26 1257 -15 q 1218 149 1218 67 q 1224 404 1218 149 q 1183 556 1224 497 q 1071 615 1142 615 q 933 535 1000 615 q 840 357 865 456 l 844 56 q 792 -15 844 -15 q 728 83 728 -15 q 756 357 728 181 q 748 707 756 478 q 740 942 740 936 l 428 949 q 421 517 421 636 l 428 57 q 413 6 428 25 q 371 -14 397 -14 q 329 6 344 -14 q 314 57 314 25 l 321 517 q 314 950 321 638 l 104 943 q 38 996 38 943 q 104 1049 38 1049 l 371 1042 z "},"\ue092":{"ha":1235,"x_min":28,"x_max":1169,"o":"m 81 697 l 150 696 l 150 813 q 233 999 150 942 q 437 1056 315 1056 q 639 1015 558 1056 q 678 935 678 993 q 676 875 678 925 q 671 547 671 672 q 772 663 708 618 q 916 708 835 708 q 1058 653 997 708 q 1169 363 1169 551 q 1082 99 1169 211 q 857 -14 994 -14 q 676 57 753 -14 q 624 -14 676 -14 q 560 84 560 -14 q 588 357 560 182 q 580 707 588 478 q 572 942 572 936 q 440 963 504 963 q 243 800 243 963 l 243 694 l 378 697 q 415 686 400 697 q 431 653 431 675 q 378 611 431 611 l 243 614 l 243 521 q 247 199 243 329 q 251 47 251 68 q 237 6 251 25 q 197 -14 222 -14 q 158 6 172 -14 q 143 47 143 25 q 144 133 143 68 q 151 521 151 329 l 151 613 l 81 611 q 28 653 28 611 q 43 686 28 675 q 81 697 58 697 m 849 76 q 895 76 849 76 q 1006 158 940 76 q 1071 355 1071 240 q 1028 544 1071 469 q 908 618 986 618 q 767 549 831 618 q 668 371 703 479 l 675 157 q 849 76 758 76 z "},"\ue093":{"ha":1664,"x_min":28,"x_max":1599,"o":"m 582 611 l 458 613 q 242 608 438 613 l 242 521 q 246 199 242 329 q 250 57 250 68 q 197 -14 250 -14 q 143 57 143 -14 q 144 133 143 68 q 150 521 150 286 l 150 606 l 94 606 q 28 651 28 606 q 94 700 28 700 q 149 699 125 700 l 149 813 q 199 999 149 942 q 317 1056 250 1056 q 427 1030 383 1056 q 471 975 471 1004 q 432 929 471 929 q 383 946 414 929 q 328 963 353 963 q 242 800 242 963 l 242 696 q 456 693 372 693 q 579 694 539 693 l 579 818 q 662 1000 579 944 q 866 1056 744 1056 q 1068 1015 988 1056 q 1107 935 1107 993 q 1106 875 1107 925 q 1100 547 1100 756 q 1201 663 1138 618 q 1345 708 1264 708 q 1486 653 1426 708 q 1599 363 1599 551 q 1511 99 1599 211 q 1286 -14 1424 -14 q 1106 57 1182 -14 q 1053 -14 1106 -14 q 989 84 989 -14 q 1017 357 989 182 q 1009 707 1017 478 q 1001 942 1001 936 q 869 963 933 963 q 672 800 672 963 l 672 694 l 790 701 q 842 688 822 701 q 861 651 861 675 q 790 604 861 604 q 674 608 753 604 l 674 521 q 678 199 674 329 q 682 57 682 68 q 629 -14 682 -14 q 590 6 604 -14 q 575 57 575 25 l 582 521 l 582 611 m 1278 76 q 1324 76 1278 76 q 1435 158 1369 76 q 1500 355 1500 240 q 1458 544 1500 469 q 1338 618 1415 618 q 1196 549 1260 618 q 1097 371 1132 479 l 1104 157 q 1278 76 1188 76 z "},"\ue094":{"ha":1700,"x_min":28,"x_max":1649,"o":"m 582 611 l 458 613 q 242 608 438 613 l 242 521 q 246 199 242 329 q 250 57 250 68 q 197 -14 250 -14 q 143 57 143 -14 q 144 133 143 68 q 150 521 150 286 l 150 606 l 94 606 q 28 651 28 606 q 94 700 28 700 q 149 699 125 700 l 149 813 q 199 999 149 942 q 317 1056 250 1056 q 427 1030 383 1056 q 471 975 471 1004 q 432 929 471 929 q 383 946 414 929 q 328 963 353 963 q 242 800 242 963 l 242 696 q 456 693 372 693 q 579 694 539 693 l 579 818 q 662 1000 579 944 q 866 1056 744 1056 q 1068 1015 988 1056 q 1107 935 1107 993 q 1106 869 1107 925 q 1100 531 1100 742 q 1350 707 1201 707 q 1522 628 1461 707 q 1583 436 1583 549 l 1576 218 q 1577 159 1576 179 q 1585 117 1578 139 q 1604 91 1593 96 q 1627 85 1615 86 q 1644 81 1639 83 q 1649 69 1649 78 q 1626 9 1649 33 q 1572 -15 1603 -15 q 1499 26 1519 -15 q 1479 149 1479 68 l 1485 404 q 1444 557 1485 499 q 1333 615 1404 615 q 1194 536 1261 615 q 1101 357 1128 457 l 1106 56 q 1053 -15 1106 -15 q 989 83 989 -15 q 1017 357 989 181 q 1009 707 1017 478 q 1001 942 1001 936 q 869 963 933 963 q 672 800 672 963 l 672 694 l 790 701 q 842 688 822 701 q 861 651 861 675 q 790 604 861 604 q 674 608 753 604 l 674 521 q 678 199 674 329 q 682 57 682 68 q 629 -14 682 -14 q 590 6 604 -14 q 575 57 575 25 l 582 521 l 582 611 z "},"\ue095":{"ha":1200,"x_min":28,"x_max":1107,"o":"m 1042 860 q 1026 860 1042 860 q 996 879 1011 860 q 981 931 981 899 q 1001 987 981 963 q 1050 1011 1021 1011 q 1093 992 1079 1011 q 1107 944 1107 974 q 1090 888 1107 915 q 1042 860 1072 860 m 703 694 l 1043 703 q 1097 635 1097 703 l 1090 315 l 1089 10 q 1028 -188 1089 -110 q 917 -267 968 -267 q 879 -240 879 -267 q 939 -162 879 -221 q 981 -91 963 -140 q 1000 24 1000 -42 l 999 315 q 992 611 999 354 q 826 617 900 617 q 672 614 753 617 l 672 521 q 676 199 672 329 q 681 47 681 68 q 666 6 681 25 q 626 -14 651 -14 q 575 57 575 -14 l 582 521 l 582 611 l 458 613 q 242 608 438 613 l 242 521 q 246 199 242 329 q 250 57 250 68 q 197 -14 250 -14 q 143 57 143 -14 q 144 133 143 68 q 150 521 150 286 l 150 606 l 94 606 q 28 651 28 606 q 94 700 28 700 q 149 699 125 700 l 149 813 q 199 999 149 942 q 317 1056 250 1056 q 427 1030 383 1056 q 471 975 471 1004 q 432 929 471 929 q 383 946 414 929 q 328 963 353 963 q 242 800 242 963 l 242 696 q 456 693 372 693 q 581 694 540 693 l 581 813 q 631 999 581 942 q 749 1056 682 1056 q 859 1030 815 1056 q 903 975 903 1004 q 864 929 903 929 q 815 946 846 929 q 760 963 783 963 q 674 800 674 963 l 674 694 l 703 694 z "},"\ue096":{"ha":1608,"x_min":28,"x_max":1561,"o":"m 582 611 l 458 613 q 242 608 438 613 l 242 521 q 246 199 242 329 q 250 57 250 68 q 197 -14 250 -14 q 143 57 143 -14 q 144 133 143 68 q 150 521 150 286 l 150 606 l 94 606 q 28 651 28 606 q 94 700 28 700 q 149 699 125 700 l 149 813 q 199 999 149 942 q 317 1056 250 1056 q 427 1030 383 1056 q 471 975 471 1004 q 432 929 471 929 q 383 946 414 929 q 328 963 353 963 q 242 800 242 963 l 242 696 q 456 693 372 693 q 579 694 539 693 l 579 818 q 662 1000 579 944 q 867 1056 744 1056 q 1069 1015 989 1056 q 1108 935 1108 993 q 1107 869 1108 925 q 1103 532 1103 706 q 1353 708 1204 708 q 1482 661 1433 708 q 1531 546 1531 614 q 1413 351 1531 432 q 1344 307 1386 333 l 1447 149 q 1503 96 1474 108 q 1547 83 1532 83 q 1561 71 1561 83 q 1540 12 1561 38 q 1490 -14 1519 -14 q 1445 -5 1461 -14 q 1410 30 1429 4 q 1375 83 1392 56 q 1251 276 1294 215 q 1192 297 1215 276 q 1168 344 1168 317 q 1187 390 1168 372 q 1236 408 1206 408 q 1299 374 1267 408 q 1392 446 1351 397 q 1433 533 1433 494 q 1412 594 1433 572 q 1347 617 1390 617 q 1200 538 1269 617 q 1104 358 1131 460 l 1108 57 q 1056 -14 1108 -14 q 992 84 992 -14 q 1019 358 992 182 q 1011 708 1019 479 q 1003 942 1003 936 q 869 963 935 963 q 672 800 672 963 l 672 694 l 790 701 q 842 688 822 701 q 861 651 861 675 q 790 604 861 604 q 674 608 753 604 l 674 521 q 678 199 674 329 q 682 57 682 68 q 629 -14 682 -14 q 590 6 604 -14 q 575 57 575 25 l 582 521 l 582 611 z "},"\ue098":{"ha":1271,"x_min":28,"x_max":1219,"o":"m 672 357 l 676 56 q 624 -15 676 -15 q 560 83 560 -15 q 588 357 560 181 q 580 707 588 478 q 572 942 572 936 q 440 963 504 963 q 243 800 243 963 l 243 694 l 378 697 q 415 686 400 697 q 431 653 431 675 q 378 611 431 611 l 243 614 l 243 521 q 247 199 243 329 q 251 47 251 68 q 237 6 251 25 q 197 -14 222 -14 q 158 6 172 -14 q 143 47 143 25 q 144 133 143 68 q 151 521 151 329 l 151 613 l 81 611 q 28 653 28 611 q 43 686 28 675 q 81 697 58 697 l 150 696 l 150 813 q 233 999 150 942 q 437 1056 315 1056 q 639 1015 558 1056 q 678 935 678 993 q 676 869 678 925 q 671 531 671 650 q 921 707 772 707 q 1093 628 1032 707 q 1154 436 1154 549 l 1147 218 q 1148 159 1147 179 q 1156 117 1149 139 q 1175 91 1164 96 q 1198 85 1186 86 q 1215 81 1210 83 q 1219 69 1219 78 q 1197 9 1219 33 q 1143 -15 1174 -15 q 1070 26 1090 -15 q 1050 149 1050 68 l 1056 404 q 1015 557 1056 499 q 903 615 975 615 q 765 536 832 615 q 672 357 699 457 z "},"\ue09a":{"ha":771,"x_min":28,"x_max":678,"o":"m 613 860 q 597 860 613 860 q 567 879 582 860 q 551 931 551 899 q 572 987 551 963 q 621 1011 592 1011 q 664 992 650 1011 q 678 944 678 974 q 660 888 678 915 q 613 860 643 860 m 571 24 l 569 315 q 563 611 569 354 q 397 617 471 617 q 243 614 324 617 l 243 521 q 247 199 243 329 q 251 47 251 68 q 237 6 251 25 q 197 -14 222 -14 q 158 6 172 -14 q 143 47 143 25 q 144 133 143 68 q 151 521 151 329 l 151 614 l 81 611 q 28 653 28 611 q 43 686 28 675 q 81 697 58 697 l 150 694 l 150 813 q 201 999 150 942 q 318 1056 251 1056 q 428 1030 385 1056 q 472 975 472 1004 q 433 929 472 929 q 384 946 415 929 q 329 963 353 963 q 243 800 243 963 l 243 694 l 274 694 l 614 703 q 668 635 668 703 l 661 315 l 660 10 q 599 -188 660 -110 q 488 -267 539 -267 q 450 -240 450 -267 q 511 -162 450 -221 q 552 -91 533 -140 q 571 24 571 -42 z "},"\ue09b":{"ha":1178,"x_min":28,"x_max":1131,"o":"m 674 358 l 678 57 q 625 -14 678 -14 q 561 84 561 -14 q 589 358 561 182 q 581 708 589 479 q 572 942 572 936 q 440 963 504 963 q 243 800 243 963 l 243 694 l 378 697 q 415 686 400 697 q 431 653 431 675 q 378 611 431 611 l 243 614 l 243 521 q 247 199 243 329 q 251 47 251 68 q 237 6 251 25 q 197 -14 222 -14 q 158 6 172 -14 q 143 47 143 25 q 144 133 143 68 q 151 521 151 329 l 151 613 l 81 611 q 28 653 28 611 q 43 686 28 675 q 81 697 58 697 l 150 696 l 150 813 q 233 999 150 942 q 437 1056 315 1056 q 639 1015 558 1056 q 678 935 678 993 q 676 869 678 925 q 672 532 672 706 q 922 708 774 708 q 1051 661 1003 708 q 1100 546 1100 614 q 982 351 1100 432 q 914 307 956 333 l 1017 149 q 1072 96 1043 108 q 1116 83 1101 83 q 1131 71 1131 83 q 1110 12 1131 38 q 1060 -14 1089 -14 q 1015 -5 1031 -14 q 980 30 999 4 q 944 83 961 56 q 821 276 864 215 q 761 297 785 276 q 738 344 738 317 q 756 390 738 372 q 806 408 775 408 q 868 374 836 408 q 962 446 921 397 q 1003 533 1003 494 q 981 594 1003 572 q 917 617 960 617 q 769 538 839 617 q 674 358 700 460 z "},"\ue0b0":{"ha":1210,"x_min":28,"x_max":1108,"o":"m 582 611 l 458 613 q 242 608 438 613 l 242 521 q 246 199 242 329 q 250 57 250 68 q 197 -14 250 -14 q 143 57 143 -14 q 144 133 143 68 q 150 521 150 286 l 150 606 l 94 606 q 28 651 28 606 q 94 700 28 700 q 149 699 125 700 l 149 813 q 199 999 149 942 q 317 1056 250 1056 q 427 1030 383 1056 q 471 975 471 1004 q 432 929 471 929 q 383 946 414 929 q 328 963 353 963 q 242 800 242 963 l 242 696 q 456 693 372 693 q 579 694 539 693 l 579 818 q 662 1000 579 944 q 866 1056 744 1056 q 1068 1015 988 1056 q 1107 935 1107 993 q 1106 867 1107 925 q 1100 572 1100 733 q 1102 305 1100 411 q 1106 133 1104 199 q 1108 57 1108 68 q 1054 -14 1108 -14 q 1000 57 1000 -14 q 1003 133 1000 68 q 1008 521 1008 329 l 1001 942 q 869 963 933 963 q 672 800 672 963 l 672 694 l 790 701 q 842 688 822 701 q 861 651 861 675 q 790 604 861 604 q 674 608 753 604 l 674 521 q 678 199 674 329 q 682 57 682 68 q 629 -14 682 -14 q 590 6 604 -14 q 575 57 575 25 l 582 521 l 582 611 z "},"\uf6c3":{"ha":297,"x_min":49,"x_max":222,"o":"m 105 -160 q 109 -140 105 -160 q 128 -98 114 -119 q 169 -76 143 -76 q 208 -94 194 -76 q 222 -137 222 -112 q 169 -262 222 -197 q 81 -326 115 -326 q 58 -318 67 -326 q 49 -299 49 -310 q 54 -278 49 -289 q 71 -249 60 -268 q 89 -215 82 -231 q 105 -160 96 -200 z "},"\ufb01":{"ha":771,"x_min":28,"x_max":678,"o":"m 613 860 q 597 860 613 860 q 567 879 582 860 q 551 931 551 899 q 572 987 551 963 q 621 1011 592 1011 q 664 992 650 1011 q 678 944 678 974 q 660 888 678 915 q 613 860 643 860 m 81 697 l 150 694 l 150 813 q 201 999 150 942 q 318 1056 251 1056 q 428 1030 385 1056 q 472 975 472 1004 q 433 929 472 929 q 384 946 415 929 q 329 963 353 963 q 243 800 243 963 l 243 694 l 274 694 l 614 703 q 668 636 668 703 l 661 347 l 669 57 q 654 6 669 25 q 614 -14 639 -14 q 575 6 589 -14 q 561 57 561 25 l 569 347 q 563 611 569 354 q 397 617 471 617 q 243 614 324 617 l 243 521 q 247 199 243 329 q 251 47 251 68 q 237 6 251 25 q 197 -14 222 -14 q 158 6 172 -14 q 143 47 143 25 q 144 133 143 68 q 151 521 151 329 l 151 614 l 81 611 q 28 653 28 611 q 43 686 28 675 q 81 697 58 697 z "},"\ufb02":{"ha":781,"x_min":28,"x_max":679,"o":"m 678 935 l 671 521 q 675 199 671 329 q 679 57 679 68 q 625 -14 679 -14 q 571 57 571 -14 q 572 133 571 68 q 579 521 579 329 l 572 942 q 440 963 504 963 q 243 800 243 963 l 243 694 l 378 697 q 415 686 400 697 q 431 653 431 675 q 378 611 431 611 q 243 614 378 611 l 243 521 q 247 199 243 329 q 251 47 251 68 q 237 6 251 25 q 197 -14 222 -14 q 158 6 172 -14 q 143 47 143 25 q 144 133 143 68 q 151 521 151 329 l 151 613 l 81 611 q 28 653 28 611 q 43 686 28 675 q 81 697 58 697 l 150 696 l 150 813 q 233 999 150 942 q 437 1056 315 1056 q 639 1015 558 1056 q 678 935 678 993 z "},"\ufb03":{"ha":1200,"x_min":28,"x_max":1107,"o":"m 1042 860 q 1026 860 1042 860 q 996 879 1011 860 q 981 931 981 899 q 1001 987 981 963 q 1050 1011 1021 1011 q 1093 992 1079 1011 q 1107 944 1107 974 q 1090 888 1107 915 q 1042 860 1072 860 m 703 694 l 1043 703 q 1097 636 1097 703 l 1090 347 l 1099 57 q 1083 6 1099 25 q 1043 -14 1068 -14 q 1004 6 1018 -14 q 990 57 990 25 l 999 347 q 992 611 999 354 q 826 617 900 617 q 672 614 753 617 l 672 521 q 676 199 672 329 q 681 47 681 68 q 666 6 681 25 q 626 -14 651 -14 q 575 57 575 -14 l 582 521 l 582 611 l 458 613 q 242 608 438 613 l 242 521 q 246 199 242 329 q 250 57 250 68 q 197 -14 250 -14 q 143 57 143 -14 q 144 133 143 68 q 150 521 150 286 l 150 606 l 94 606 q 28 651 28 606 q 94 700 28 700 q 149 699 125 700 l 149 813 q 199 999 149 942 q 317 1056 250 1056 q 427 1030 383 1056 q 471 975 471 1004 q 432 929 471 929 q 383 946 414 929 q 328 963 353 963 q 242 800 242 963 l 242 696 q 456 693 372 693 q 581 694 540 693 l 581 813 q 631 999 581 942 q 749 1056 682 1056 q 859 1030 815 1056 q 903 975 903 1004 q 864 929 903 929 q 815 946 846 929 q 760 963 783 963 q 674 800 674 963 l 674 694 l 703 694 z "}},"familyName":"Delius","ascender":1369,"descender":-375,"underlinePosition":-243,"underlineThickness":69,"boundingBox":{"yMin":-375,"xMin":-92,"yMax":1369,"xMax":1649},"resolution":1000,"original_font_information":{"format":0,"copyright":"Copyright (c) 2010 by Natalia Raices. All rights reserved.","fontFamily":"Delius","fontSubfamily":"Regular","uniqueID":"NataliaRaices: Delius: 2010","fullName":"Delius-Regular","version":"Version 1.001","postScriptName":"Delius-Regular","trademark":"Delius is a trademark of Natalia Raices.","manufacturer":"Natalia Raices","designer":"Natalia Raices","description":"Delius is a high quality comic book lettering typeface.","licence":"This Font Software is licensed under the SIL Open Font License, Version 1.1. This license is available with a FAQ at: http://scripts.sil.org/OFL","licenceURL":"http://scripts.sil.org/OFL"},"cssFontWeight":"normal","cssFontStyle":"normal"}');function av(e){var t=e.texto,n=e.position,r=(new $f).parse(rv),a=(0,i.useRef)(),o=t;return(0,OA.jsxs)("mesh",{ref:a,position:n,rotation:[-1.5,0,0],children:[(0,OA.jsx)("textGeometry",{args:[o,{font:r,size:1,height:1}]}),(0,OA.jsx)("meshPhysicalMaterial",{attach:"material",color:"yellow"})]})}oA({TextGeometry:iv});var ov,lv,gv=function(e){var t=e.name,n=e.position,r=e.positionTexto,a=Qf(e.texturePath),o=(0,i.useRef)(),l=fA().viewport;return vA((function(e){var t=e.clock;o.current.rotation.z=t.getElapsedTime()})),(0,OA.jsxs)(OA.Fragment,{children:[(0,OA.jsxs)("mesh",{ref:o,scale:l.width/25,position:n,onClick:function(){jf.push("./".concat(t))},onPointerOver:function(){o.current.scale.x=l.width/20,o.current.scale.y=l.width/20,o.current.scale.z=l.width/20},onPointerOut:function(){o.current.scale.x=l.width/25,o.current.scale.y=l.width/25,o.current.scale.z=l.width/25},children:[(0,OA.jsx)("sphereGeometry",{attach:"geometry"}),(0,OA.jsx)("meshStandardMaterial",{map:a})]}),(0,OA.jsx)("mesh",{children:(0,OA.jsx)(av,{texto:t,position:r})})]})},sv=function(e,t){return(e%t+t)%t},cv=function(e){ne(n,e);var t=le(n);function n(e,i){var r;$(this,n),L(ae(r=t.call(this)),"object",void 0),L(ae(r),"domElement",void 0),L(ae(r),"enabled",!0),L(ae(r),"target",new pr),L(ae(r),"minDistance",0),L(ae(r),"maxDistance",1/0),L(ae(r),"minZoom",0),L(ae(r),"maxZoom",1/0),L(ae(r),"minPolarAngle",0),L(ae(r),"maxPolarAngle",Math.PI),L(ae(r),"minAzimuthAngle",-1/0),L(ae(r),"maxAzimuthAngle",1/0),L(ae(r),"enableDamping",!1),L(ae(r),"dampingFactor",.05),L(ae(r),"enableZoom",!0),L(ae(r),"zoomSpeed",1),L(ae(r),"enableRotate",!0),L(ae(r),"rotateSpeed",1),L(ae(r),"enablePan",!0),L(ae(r),"panSpeed",1),L(ae(r),"screenSpacePanning",!0),L(ae(r),"keyPanSpeed",7),L(ae(r),"autoRotate",!1),L(ae(r),"autoRotateSpeed",2),L(ae(r),"reverseOrbit",!1),L(ae(r),"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),L(ae(r),"mouseButtons",{LEFT:he.ROTATE,MIDDLE:he.DOLLY,RIGHT:he.PAN}),L(ae(r),"touches",{ONE:Ae.ROTATE,TWO:Ae.DOLLY_PAN}),L(ae(r),"target0",void 0),L(ae(r),"position0",void 0),L(ae(r),"zoom0",void 0),L(ae(r),"_domElementKeyEvents",null),L(ae(r),"getPolarAngle",void 0),L(ae(r),"getAzimuthalAngle",void 0),L(ae(r),"setPolarAngle",void 0),L(ae(r),"setAzimuthalAngle",void 0),L(ae(r),"getDistance",void 0),L(ae(r),"listenToKeyEvents",void 0),L(ae(r),"saveState",void 0),L(ae(r),"reset",void 0),L(ae(r),"update",void 0),L(ae(r),"connect",void 0),L(ae(r),"dispose",void 0),r.object=e,r.domElement=i,r.target0=r.target.clone(),r.position0=r.object.position.clone(),r.zoom0=r.object instanceof xo?r.object.zoom:1,r.getPolarAngle=function(){return I.phi},r.getAzimuthalAngle=function(){return I.theta},r.setPolarAngle=function(e){var t=sv(e,2*Math.PI),n=I.phi;n<0&&(n+=2*Math.PI),t<0&&(t+=2*Math.PI);var i=Math.abs(t-n);2*Math.PI-i<i&&(t<n?t+=2*Math.PI:n+=2*Math.PI),d.phi=t-n,a.update()},r.setAzimuthalAngle=function(e){var t=sv(e,2*Math.PI),n=I.theta;n<0&&(n+=2*Math.PI),t<0&&(t+=2*Math.PI);var i=Math.abs(t-n);2*Math.PI-i<i&&(t<n?t+=2*Math.PI:n+=2*Math.PI),d.theta=t-n,a.update()},r.getDistance=function(){return a.object.position.distanceTo(a.target)},r.listenToKeyEvents=function(e){e.addEventListener("keydown",O),r._domElementKeyEvents=e},r.saveState=function(){a.target0.copy(a.target),a.position0.copy(a.object.position),a.zoom0=a.object instanceof xo?a.object.zoom:1},r.reset=function(){a.target.copy(a.target0),a.object.position.copy(a.position0),a.object instanceof xo&&(a.object.zoom=a.zoom0,a.object.updateProjectionMatrix()),a.dispatchEvent(o),a.update(),c=s.NONE},r.update=function(){var t=new pr,n=(new Ar).setFromUnitVectors(e.up,new pr(0,1,0)),i=n.clone().invert(),r=new pr,l=new Ar,g=2*Math.PI;return function(){var e=a.object.position;t.copy(e).sub(a.target),t.applyQuaternion(n),I.setFromVector3(t),a.autoRotate&&c===s.NONE&&W(2*Math.PI/60/60*a.autoRotateSpeed),a.enableDamping?(I.theta+=d.theta*a.dampingFactor,I.phi+=d.phi*a.dampingFactor):(I.theta+=d.theta,I.phi+=d.phi);var p=a.minAzimuthAngle,m=a.maxAzimuthAngle;return isFinite(p)&&isFinite(m)&&(p<-Math.PI?p+=g:p>Math.PI&&(p-=g),m<-Math.PI?m+=g:m>Math.PI&&(m-=g),I.theta=p<=m?Math.max(p,Math.min(m,I.theta)):I.theta>(p+m)/2?Math.max(p,I.theta):Math.min(m,I.theta)),I.phi=Math.max(a.minPolarAngle,Math.min(a.maxPolarAngle,I.phi)),I.makeSafe(),I.radius*=C,I.radius=Math.max(a.minDistance,Math.min(a.maxDistance,I.radius)),!0===a.enableDamping?a.target.addScaledVector(h,a.dampingFactor):a.target.add(h),t.setFromSpherical(I),t.applyQuaternion(i),e.copy(a.target).add(t),a.object.lookAt(a.target),!0===a.enableDamping?(d.theta*=1-a.dampingFactor,d.phi*=1-a.dampingFactor,h.multiplyScalar(1-a.dampingFactor)):(d.set(0,0,0),h.set(0,0,0)),C=1,!!(A||r.distanceToSquared(a.object.position)>u||8*(1-l.dot(a.object.quaternion))>u)&&(a.dispatchEvent(o),r.copy(a.object.position),l.copy(a.object.quaternion),A=!1,!0)}}(),r.connect=function(e){e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),a.domElement=e,a.domElement.style.touchAction="none",a.domElement.addEventListener("contextmenu",Q),a.domElement.addEventListener("pointerdown",E),a.domElement.addEventListener("pointercancel",D),a.domElement.addEventListener("wheel",P)},r.dispose=function(){var e,t,n,i,r,o;null===(e=a.domElement)||void 0===e||e.removeEventListener("contextmenu",Q),null===(t=a.domElement)||void 0===t||t.removeEventListener("pointerdown",E),null===(n=a.domElement)||void 0===n||n.removeEventListener("pointercancel",D),null===(i=a.domElement)||void 0===i||i.removeEventListener("wheel",P),null===(r=a.domElement)||void 0===r||r.ownerDocument.removeEventListener("pointermove",J),null===(o=a.domElement)||void 0===o||o.ownerDocument.removeEventListener("pointerup",U),null!==a._domElementKeyEvents&&a._domElementKeyEvents.removeEventListener("keydown",O)};var a=ae(r),o={type:"change"},l={type:"start"},g={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},c=s.NONE,u=1e-6,I=new oC,d=new oC,C=1,h=new pr,A=!1,p=new Mi,m=new Mi,f=new Mi,v=new Mi,b=new Mi,y=new Mi,G=new Mi,B=new Mi,Z=new Mi,w=[],x={};function S(){return Math.pow(.95,a.zoomSpeed)}function W(e){a.reverseOrbit?d.theta+=e:d.theta-=e}function V(e){a.reverseOrbit?d.phi+=e:d.phi-=e}var R=function(){var e=new pr;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),h.add(e)}}(),q=function(){var e=new pr;return function(t,n){!0===a.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(a.object.up,e)),e.multiplyScalar(t),h.add(e)}}(),k=function(){var e=new pr;return function(t,n){var i=a.domElement;if(i&&a.object instanceof xo&&a.object.isPerspectiveCamera){var r=a.object.position;e.copy(r).sub(a.target);var o=e.length();o*=Math.tan(a.object.fov/2*Math.PI/180),R(2*t*o/i.clientHeight,a.object.matrix),q(2*n*o/i.clientHeight,a.object.matrix)}else i&&a.object instanceof Qo&&a.object.isOrthographicCamera?(R(t*(a.object.right-a.object.left)/a.object.zoom/i.clientWidth,a.object.matrix),q(n*(a.object.top-a.object.bottom)/a.object.zoom/i.clientHeight,a.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),a.enablePan=!1)}}();function X(e){a.object instanceof xo&&a.object.isPerspectiveCamera?C/=e:a.object instanceof Qo&&a.object.isOrthographicCamera?(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom*e)),a.object.updateProjectionMatrix(),A=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function Y(e){a.object instanceof xo&&a.object.isPerspectiveCamera?C*=e:a.object instanceof Qo&&a.object.isOrthographicCamera?(a.object.zoom=Math.max(a.minZoom,Math.min(a.maxZoom,a.object.zoom/e)),a.object.updateProjectionMatrix(),A=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),a.enableZoom=!1)}function N(e){p.set(e.clientX,e.clientY)}function K(e){v.set(e.clientX,e.clientY)}function H(){if(1==w.length)p.set(w[0].pageX,w[0].pageY);else{var e=.5*(w[0].pageX+w[1].pageX),t=.5*(w[0].pageY+w[1].pageY);p.set(e,t)}}function z(){if(1==w.length)v.set(w[0].pageX,w[0].pageY);else{var e=.5*(w[0].pageX+w[1].pageX),t=.5*(w[0].pageY+w[1].pageY);v.set(e,t)}}function M(){var e=w[0].pageX-w[1].pageX,t=w[0].pageY-w[1].pageY,n=Math.sqrt(e*e+t*t);G.set(0,n)}function F(e){if(1==w.length)m.set(e.pageX,e.pageY);else{var t=te(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);m.set(n,i)}f.subVectors(m,p).multiplyScalar(a.rotateSpeed);var r=a.domElement;r&&(W(2*Math.PI*f.x/r.clientHeight),V(2*Math.PI*f.y/r.clientHeight)),p.copy(m)}function _(e){if(1==w.length)b.set(e.pageX,e.pageY);else{var t=te(e),n=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);b.set(n,i)}y.subVectors(b,v).multiplyScalar(a.panSpeed),k(y.x,y.y),v.copy(b)}function T(e){var t=te(e),n=e.pageX-t.x,i=e.pageY-t.y,r=Math.sqrt(n*n+i*i);B.set(0,r),Z.set(0,Math.pow(B.y/G.y,a.zoomSpeed)),X(Z.y),G.copy(B)}function E(e){if(!1!==a.enabled){var t,n;if(0===w.length)null===(t=a.domElement)||void 0===t||t.ownerDocument.addEventListener("pointermove",J),null===(n=a.domElement)||void 0===n||n.ownerDocument.addEventListener("pointerup",U);!function(e){w.push(e)}(e),"touch"===e.pointerType?function(e){switch(ee(e),w.length){case 1:switch(a.touches.ONE){case Ae.ROTATE:if(!1===a.enableRotate)return;H(),c=s.TOUCH_ROTATE;break;case Ae.PAN:if(!1===a.enablePan)return;z(),c=s.TOUCH_PAN;break;default:c=s.NONE}break;case 2:switch(a.touches.TWO){case Ae.DOLLY_PAN:if(!1===a.enableZoom&&!1===a.enablePan)return;a.enableZoom&&M(),a.enablePan&&z(),c=s.TOUCH_DOLLY_PAN;break;case Ae.DOLLY_ROTATE:if(!1===a.enableZoom&&!1===a.enableRotate)return;a.enableZoom&&M(),a.enableRotate&&H(),c=s.TOUCH_DOLLY_ROTATE;break;default:c=s.NONE}break;default:c=s.NONE}c!==s.NONE&&a.dispatchEvent(l)}(e):function(e){var t;switch(e.button){case 0:t=a.mouseButtons.LEFT;break;case 1:t=a.mouseButtons.MIDDLE;break;case 2:t=a.mouseButtons.RIGHT;break;default:t=-1}switch(t){case he.DOLLY:if(!1===a.enableZoom)return;!function(e){G.set(e.clientX,e.clientY)}(e),c=s.DOLLY;break;case he.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===a.enablePan)return;K(e),c=s.PAN}else{if(!1===a.enableRotate)return;N(e),c=s.ROTATE}break;case he.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===a.enableRotate)return;N(e),c=s.ROTATE}else{if(!1===a.enablePan)return;K(e),c=s.PAN}break;default:c=s.NONE}c!==s.NONE&&a.dispatchEvent(l)}(e)}}function J(e){!1!==a.enabled&&("touch"===e.pointerType?function(e){switch(ee(e),c){case s.TOUCH_ROTATE:if(!1===a.enableRotate)return;F(e),a.update();break;case s.TOUCH_PAN:if(!1===a.enablePan)return;_(e),a.update();break;case s.TOUCH_DOLLY_PAN:if(!1===a.enableZoom&&!1===a.enablePan)return;!function(e){a.enableZoom&&T(e),a.enablePan&&_(e)}(e),a.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===a.enableZoom&&!1===a.enableRotate)return;!function(e){a.enableZoom&&T(e),a.enableRotate&&F(e)}(e),a.update();break;default:c=s.NONE}}(e):function(e){if(!1===a.enabled)return;switch(c){case s.ROTATE:if(!1===a.enableRotate)return;!function(e){m.set(e.clientX,e.clientY),f.subVectors(m,p).multiplyScalar(a.rotateSpeed);var t=a.domElement;t&&(W(2*Math.PI*f.x/t.clientHeight),V(2*Math.PI*f.y/t.clientHeight)),p.copy(m),a.update()}(e);break;case s.DOLLY:if(!1===a.enableZoom)return;!function(e){B.set(e.clientX,e.clientY),Z.subVectors(B,G),Z.y>0?X(S()):Z.y<0&&Y(S()),G.copy(B),a.update()}(e);break;case s.PAN:if(!1===a.enablePan)return;!function(e){b.set(e.clientX,e.clientY),y.subVectors(b,v).multiplyScalar(a.panSpeed),k(y.x,y.y),v.copy(b),a.update()}(e)}}(e))}function U(e){var t,n,i;(j(e),0===w.length)&&(null===(t=a.domElement)||void 0===t||t.releasePointerCapture(e.pointerId),null===(n=a.domElement)||void 0===n||n.ownerDocument.removeEventListener("pointermove",J),null===(i=a.domElement)||void 0===i||i.ownerDocument.removeEventListener("pointerup",U));a.dispatchEvent(g),c=s.NONE}function D(e){j(e)}function P(e){!1===a.enabled||!1===a.enableZoom||c!==s.NONE&&c!==s.ROTATE||(e.preventDefault(),a.dispatchEvent(l),function(e){e.deltaY<0?Y(S()):e.deltaY>0&&X(S()),a.update()}(e),a.dispatchEvent(g))}function O(e){!1!==a.enabled&&!1!==a.enablePan&&function(e){var t=!1;switch(e.code){case a.keys.UP:k(0,a.keyPanSpeed),t=!0;break;case a.keys.BOTTOM:k(0,-a.keyPanSpeed),t=!0;break;case a.keys.LEFT:k(a.keyPanSpeed,0),t=!0;break;case a.keys.RIGHT:k(-a.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),a.update())}(e)}function Q(e){!1!==a.enabled&&e.preventDefault()}function j(e){delete x[e.pointerId];for(var t=0;t<w.length;t++)if(w[t].pointerId==e.pointerId)return void w.splice(t,1)}function ee(e){var t=x[e.pointerId];void 0===t&&(t=new Mi,x[e.pointerId]=t),t.set(e.pageX,e.pageY)}function te(e){var t=e.pointerId===w[0].pointerId?w[1]:w[0];return x[t.pointerId]}return void 0!==i&&r.connect(i),r.update(),r}return te(n)}(Zi),uv=["makeDefault","camera","regress","domElement","enableDamping","onChange","onStart","onEnd"],Iv=i.forwardRef((function(e,t){var n=e.makeDefault,r=e.camera,a=e.regress,o=e.domElement,l=e.enableDamping,g=void 0===l||l,s=e.onChange,c=e.onStart,I=e.onEnd,d=j(e,uv),C=fA((function(e){return e.invalidate})),h=fA((function(e){return e.camera})),A=fA((function(e){return e.gl})),p=fA((function(e){return e.events})),m=fA((function(e){return e.set})),f=fA((function(e){return e.get})),v=fA((function(e){return e.performance})),b=r||h,y=o||p.connected||A.domElement,G=i.useMemo((function(){return new cv(b)}),[b]);return vA((function(){G.enabled&&G.update()}),-1),i.useEffect((function(){return G.connect(y),function(){G.dispose()}}),[y,a,G,C]),i.useEffect((function(){var e=function(e){C(),a&&v.regress(),s&&s(e)};return G.addEventListener("change",e),c&&G.addEventListener("start",c),I&&G.addEventListener("end",I),function(){c&&G.removeEventListener("start",c),I&&G.removeEventListener("end",I),G.removeEventListener("change",e)}}),[s,c,I,G,C]),i.useEffect((function(){if(n){var e=f().controls;return m({controls:G}),function(){return m({controls:e})}}}),[n,G]),i.createElement("primitive",u({ref:t,object:G,enableDamping:g},d))})),dv=n(1886),Cv=n.n(dv),hv=n(1188),Av=n.n(hv),pv=n(7215),mv=n.n(pv),fv=n(3496),vv=n.n(fv),bv=n(4101),yv=n.n(bv),Gv=["baseMaterial","fragmentShader","vertexShader","uniforms","patchMap","cacheKey"],Bv="csm_Position",Zv="csm_PositionRaw",wv="csm_PointSize",xv="csm_FragColor",Sv="csm_DiffuseColor",Wv="csm_Normal",Vv="csm_Roughness",Rv="csm_Metalness",qv="csm_Emissive",kv=(L(ov={},"".concat(Wv),{"#include <beginnormal_vertex>":"\n    vec3 objectNormal = ".concat(Wv,";\n    #ifdef USE_TANGENT\n\t    vec3 objectTangent = vec3( tangent.xyz );\n    #endif\n    ")}),L(ov,"".concat(Bv),{"#include <begin_vertex>":"\n    vec3 transformed = ".concat(Bv,";\n  ")}),L(ov,"".concat(Zv),{"#include <begin_vertex>":"\n    vec4 csm_positionUnprojected = ".concat(Zv,";\n    mat4x4 csm_unprojectMatrix = projectionMatrix * modelViewMatrix;\n    #ifdef USE_INSTANCING\n      csm_unprojectMatrix = csm_unprojectMatrix * instanceMatrix;\n    #endif\n    csm_positionUnprojected = inverse(csm_unprojectMatrix) * csm_positionUnprojected;\n    vec3 transformed = csm_positionUnprojected.xyz;\n  ")}),L(ov,"".concat(wv),{"gl_PointSize = size;":"\n    gl_PointSize = ".concat(wv,";\n    ")}),L(ov,"".concat(Sv),{"#include <color_fragment>":"\n    #include <color_fragment>\n    diffuseColor = ".concat(Sv,";\n  ")}),L(ov,"".concat(xv),{"#include <dithering_fragment>":"\n    #include <dithering_fragment>\n    gl_FragColor  = ".concat(xv,";\n  ")}),L(ov,"".concat(qv),{"vec3 totalEmissiveRadiance = emissive;":"\n    vec3 totalEmissiveRadiance = ".concat(qv,";\n    ")}),L(ov,"".concat(Vv),{"#include <roughnessmap_fragment>":"\n    #include <roughnessmap_fragment>\n    roughnessFactor = ".concat(Vv,";\n    ")}),L(ov,"".concat(Rv),{"#include <metalnessmap_fragment>":"\n    #include <metalnessmap_fragment>\n    metalnessFactor = ".concat(Rv,";\n    ")}),ov),Xv=(L(lv={},"".concat(Bv),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( ".concat(Bv,", 1.0 );\n  ")}),L(lv,"".concat(Zv),{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":"\n    gl_Position = ".concat(Bv,";\n  ")}),L(lv,"".concat(Sv),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = ".concat(Sv,";\n  ")}),L(lv,"".concat(xv),{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":"\n    gl_FragColor = ".concat(xv,";\n  ")}),lv);var Yv=function(e){ne(n,e);var t=le(n);function n(e){var i,r,a=e.baseMaterial,o=e.fragmentShader,l=e.vertexShader,g=e.uniforms,s=e.patchMap,c=e.cacheKey,u=j(e,Gv);if($(this,n),!function(e){try{new e}catch(t){if(t.message.indexOf("is not a constructor")>=0)return!1}return!0}(a)?(r=a,Object.assign(r,u)):r=new a(u),"RawShaderMaterial"===r.type)throw new Error("CustomShaderMaterial does not support RawShaderMaterial");for(var I in(i=t.call(this)).uniforms=g||{},i._customPatchMap=s||{},i._fs=o||"",i._vs=l||"",i._cacheKey=c,i._base=a,i._type=r.type,i._instanceID=zi.generateUUID(),r){var d=I;I.startsWith("_")&&(d=I.split("_")[1]),void 0===i[d]&&(i[d]=0),i[d]=r[d]}return i.update({fragmentShader:o,vertexShader:l,uniforms:g,cacheKey:c}),i}return te(n,[{key:"update",value:function(e){var t=(null==e?void 0:e.uniforms)||{},n=(null==e?void 0:e.fragmentShader)||this._fs,i=(null==e?void 0:e.vertexShader)||this._vs,r=Object.values(t).reduce((function(e,t){var n=t.value;return e+JSON.stringify(n)}),"");this.uuid=(null==e||null==e.cacheKey?void 0:e.cacheKey())||yv()([n,i,r,this._instanceID]),this.generateMaterial({fragmentShader:n,vertexShader:i,uniforms:t})}},{key:"clone",value:function(){var e=new this.constructor({baseMaterial:this._base,fragmentShader:this._fs,vertexShader:this._vs,patchMap:this._customPatchMap,uniforms:this.uniforms,cacheKey:this._cacheKey});for(var t in this)"uuid"!==t&&(e[t]=this[t]);return e}},{key:"generateMaterial",value:function(e){var t=this,n=e.fragmentShader,i=e.vertexShader,r=e.uniforms,a=this.parseShader(n),o=this.parseShader(i);this.uniforms=r||{},this.customProgramCacheKey=function(){return t.uuid},this.onBeforeCompile=function(e){if(a){var n=t.patchShader(a,e.fragmentShader);e.fragmentShader=t.getMaterialDefine()+n}if(o){var i=t.patchShader(o,e.vertexShader);e.vertexShader="#define IS_VERTEX;\n"+i,e.vertexShader=t.getMaterialDefine()+e.vertexShader}e.uniforms=T(T({},e.uniforms),t.uniforms),t.uniforms=e.uniforms},this.needsUpdate=!0}},{key:"getMaterialDefine",value:function(){return"#define IS_".concat(this._type.toUpperCase(),";\n")}},{key:"getPatchMapForMaterial",value:function(){return"ShaderMaterial"===this._type?Xv:kv}},{key:"patchShader",value:function(e,t){var n=t,i=T(T({},this.getPatchMapForMaterial()),this._customPatchMap);return Object.keys(i).forEach((function(t){Object.keys(i[t]).forEach((function(r){var a;a=e.main,new RegExp("\\b".concat(function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}(t),"\\b")).test(a)&&(n=function(e,t,n){return e.split(t).join(n)}(n,r,i[t][r]))}))})),n=n.replace("void main() {","\n          ".concat(e.header,"\n          void main() {\n            ").concat("\n\n#ifdef IS_VERTEX\n    vec3 csm_Position = position;\n    vec4 csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n    vec3 csm_Normal = normal;\n#else\n    #if defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL\n        vec4 csm_DiffuseColor = vec4(1., 0., 1., 1.);\n        vec4 csm_FragColor = vec4(1., 0., 1., 1.);\n    #else\n        #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL\n            vec3 csm_Emissive = emissive;\n            float csm_Roughness = roughness;\n            float csm_Metalness = metalness;\n        #endif\n        \n        #ifdef USE_MAP\n            vec4 _csm_sampledDiffuseColor = texture2D(map, vUv);\n\n            #ifdef DECODE_VIDEO_TEXTURE\n            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)\n            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);\n            #endif\n\n            vec4 csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n            vec4 csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;\n        #else\n            vec4 csm_DiffuseColor = vec4(diffuse, opacity);\n            vec4 csm_FragColor = vec4(diffuse, opacity);\n        #endif\n    #endif\n#endif\n","\n            ").concat(e.main,"\n          ")),n=e.defines+n}},{key:"parseShader",value:function(e){if(e){var t=e.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,""),n=Cv()(t),i=vv()(n),r=i.map((function(e){return e.name})).indexOf("main");return{defines:"",header:mv()(n.slice(0,r>=0?i[r].outer[0]:void 0)),main:r>=0?this.getShaderFromIndex(n,i[r].body):""}}}},{key:"getShaderFromIndex",value:function(e,t){return mv()(e.slice(t[0],t[1]))}}]),n}(qa);function Nv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.forEach((function(t){return function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(t,e)}))}}function Kv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.useCallback(Nv.apply(void 0,t),t)}var Hv=["children"],zv=["children"],Mv=i.forwardRef((function(e,t){var n=e.children,r=j(e,Hv);return i.Children.toArray(n).some(_v)?i.createElement(i.Fragment,null,i.Children.map(n,(function(e){return _v(e)?i.createElement(Fv,u({},r,{ref:t}),e.props.children):e}))):i.createElement(Fv,u({},r,{ref:t}),n)}));Mv.displayName="Slot";var Fv=i.forwardRef((function(e,t){var n=e.children,r=j(e,zv);return i.isValidElement(n)?i.cloneElement(n,T(T({},function(e,t){var n=T({},t),i=function(i){var r=e[i],a=t[i];/^on[A-Z]/.test(i)?n[i]=function(){null==a||a.apply(void 0,arguments),null==r||r.apply(void 0,arguments)}:"style"===i?n[i]=T(T({},r),a):"className"===i&&(n[i]=[r,a].filter(Boolean).join(" "))};for(var r in t)i(r);return T(T({},e),n)}(r,n.props)),{},{ref:Nv(t,n.ref)})):i.Children.count(n)>1?i.Children.only(null):null}));Fv.displayName="SlotClone";var Lv=function(e){var t=e.children;return i.createElement(i.Fragment,null,t)};function _v(e){return i.isValidElement(e)&&e.type===Lv}var Tv=["asChild"],Ev=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce((function(e,t){return T(T({},e),{},L({},t,i.forwardRef((function(e,n){var r=e.asChild,a=j(e,Tv),o=r?Mv:t;return i.useEffect((function(){window[Symbol.for("radix-ui")]=!0}),[]),i.createElement(o,u({},a,{ref:n}))}))))}),{}),Jv=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?i.useLayoutEffect:function(){},Uv=n(4164),Dv=["containerRef","style"],Pv=i.forwardRef((function(e,t){var n,r,a=e.containerRef,o=e.style,l=j(e,Dv),g=null!==(n=null==a?void 0:a.current)&&void 0!==n?n:null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body,s=c(i.useState({}),2)[1];return Jv((function(){s({})}),[]),g?Uv.createPortal(i.createElement(Ev.div,u({"data-radix-portal":""},l,{ref:t,style:g===document.body?T({position:"absolute",top:0,left:0,zIndex:2147483647},o):void 0})),g):null})),Ov=Pv,Qv=Object.prototype.hasOwnProperty;function jv(e,t){var n,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((i=e.length)===t.length)for(;i--&&jv(e[i],t[i]););return-1===i}if(!n||"object"===typeof e){for(n in i=0,e){if(Qv.call(e,n)&&++i&&!Qv.call(t,n))return!1;if(!(n in t)||!jv(e[n],t[n]))return!1}return Object.keys(t).length===i}}return e!==e&&t!==t}function $v(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!Object.is(e[n[i]],t[n[i]]))return!1;return!0}var eb=function(e,t,n,i){this.name=e,this.fn=t,this.args=n,this.modifiers=i};function tb(e,t){return void 0===t&&(t="simple"),"object"===typeof e?e[t]:e}function nb(e,t,n){if(e.length){var i=e.shift(),r=nb(e,t,n);return i.perform(r,n)}return tb(t)}function ib(e,t,n){if(e.length){var i=e.shift(),r=ib(e,t,n);return i.performAsync(r,n)}return function(e){return Promise.resolve(tb(t,"async")(e))}}eb.prototype._test=function(e){var t=this.fn;try{nb(this.modifiers.slice(),t,this)(e)}catch(n){t=function(){return!1}}try{return nb(this.modifiers.slice(),t,this)(e)}catch(i){return!1}},eb.prototype._check=function(e){try{nb(this.modifiers.slice(),this.fn,this)(e)}catch(t){if(nb(this.modifiers.slice(),(function(e){return e}),this)(!1))return}if(!nb(this.modifiers.slice(),this.fn,this)(e))throw null},eb.prototype._testAsync=function(e){var t=this;return new Promise((function(n,i){ib(t.modifiers.slice(),t.fn,t)(e).then((function(t){t?n(e):i(null)})).catch((function(e){return i(e)}))}))};var rb=function(e,t,n){this.name=e,this.perform=t,this.performAsync=n},ab=function(e){function t(n,i,r,a){for(var o=[],l=arguments.length-4;l-- >0;)o[l]=arguments[l+4];e.call(this,o),e.captureStackTrace&&e.captureStackTrace(this,t),this.rule=n,this.value=i,this.cause=r,this.target=a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error),ob=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.chain=e,this.nextRuleModifiers=t};function lb(e,t,n,i){if(t.length){var r=t.shift();r._testAsync(e).then((function(){lb(e,t,n,i)}),(function(t){i(new ab(r,e,t))}))}else n(e)}ob.prototype._applyRule=function(e,t){var n=this;return function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];return n.chain.push(new eb(t,e.apply(n,i),i,n.nextRuleModifiers)),n.nextRuleModifiers=[],n}},ob.prototype._applyModifier=function(e,t){return this.nextRuleModifiers.push(new rb(t,e.simple,e.async)),this},ob.prototype._clone=function(){return new ob(this.chain.slice(),this.nextRuleModifiers.slice())},ob.prototype.test=function(e){return this.chain.every((function(t){return t._test(e)}))},ob.prototype.testAll=function(e){var t=[];return this.chain.forEach((function(n){try{n._check(e)}catch(i){t.push(new ab(n,e,i))}})),t},ob.prototype.check=function(e){this.chain.forEach((function(t){try{t._check(e)}catch(n){throw new ab(t,e,n)}}))},ob.prototype.testAsync=function(e){var t=this;return new Promise((function(n,i){lb(e,t.chain.slice(),n,i)}))};var gb=function(e,t){return!(!t||"string"!==typeof e||0!==e.trim().length)||(void 0===e||null===e)};function sb(){return"undefined"!==typeof Proxy?ub(new ob):Ib(new ob)}var cb={};function ub(e){return new Proxy(e,{get:function(t,n){if(n in t)return t[n];var i=ub(e._clone());return n in db?i._applyModifier(db[n],n):n in cb?i._applyRule(cb[n],n):n in Ab?i._applyRule(Ab[n],n):void 0}})}function Ib(e){var t=function(e,t){return Object.keys(e).forEach((function(n){t[n]=function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];var a=Ib(t._clone()),o=a._applyRule(e[n],n).apply(void 0,i);return o}})),t},n=t(Ab,e),i=t(cb,n);return Object.keys(db).forEach((function(e){Object.defineProperty(i,e,{get:function(){return Ib(i._clone())._applyModifier(db[e],e)}})})),i}sb.extend=function(e){Object.assign(cb,e)},sb.clearCustomRules=function(){cb={}};var db={not:{simple:function(e){return function(t){return!e(t)}},async:function(e){return function(t){return Promise.resolve(e(t)).then((function(e){return!e})).catch((function(){return!0}))}}},some:{simple:function(e){return function(t){return hb(t).some((function(t){try{return e(t)}catch(n){return!1}}))}},async:function(e){return function(t){return Promise.all(hb(t).map((function(t){try{return e(t).catch((function(){return!1}))}catch(n){return!1}}))).then((function(e){return e.some(Boolean)}))}}},every:{simple:function(e){return function(t){return!1!==t&&hb(t).every(e)}},async:function(e){return function(t){return Promise.all(hb(t).map(e)).then((function(e){return e.every(Boolean)}))}}},strict:{simple:function(e,t){return function(n){return Cb(t)&&n&&"object"===typeof n?Object.keys(t.args[0]).length===Object.keys(n).length&&e(n):e(n)}},async:function(e,t){return function(n){return Promise.resolve(e(n)).then((function(e){return Cb(t)&&n&&"object"===typeof n?Object.keys(t.args[0]).length===Object.keys(n).length&&e:e})).catch((function(){return!1}))}}}};function Cb(e){return e&&"schema"===e.name&&e.args.length>0&&"object"===typeof e.args[0]}function hb(e){return"string"===typeof e?e.split(""):e}var Ab={equal:function(e){return function(t){return t==e}},exact:function(e){return function(t){return t===e}},number:function(e){return void 0===e&&(e=!0),function(t){return"number"===typeof t&&(e||isFinite(t))}},integer:function(){return function(e){return(Number.isInteger||mb)(e)}},numeric:function(){return function(e){return!isNaN(parseFloat(e))&&isFinite(e)}},string:function(){return pb("string")},boolean:function(){return pb("boolean")},undefined:function(){return pb("undefined")},null:function(){return pb("null")},array:function(){return pb("array")},object:function(){return pb("object")},instanceOf:function(e){return function(t){return t instanceof e}},pattern:function(e){return function(t){return e.test(t)}},lowercase:function(){return function(e){return"boolean"===typeof e||e===e.toLowerCase()&&""!==e.trim()}},uppercase:function(){return function(e){return e===e.toUpperCase()&&""!==e.trim()}},vowel:function(){return function(e){return/^[aeiou]+$/i.test(e)}},consonant:function(){return function(e){return/^(?=[^aeiou])([a-z]+)$/i.test(e)}},first:function(e){return function(t){return t[0]==e}},last:function(e){return function(t){return t[t.length-1]==e}},empty:function(){return function(e){return 0===e.length}},length:function(e,t){return function(n){return n.length>=e&&n.length<=(t||e)}},minLength:function(e){return function(t){return t.length>=e}},maxLength:function(e){return function(t){return t.length<=e}},negative:function(){return function(e){return e<0}},positive:function(){return function(e){return e>=0}},between:function(e,t){return function(n){return n>=e&&n<=t}},range:function(e,t){return function(n){return n>=e&&n<=t}},lessThan:function(e){return function(t){return t<e}},lessThanOrEqual:function(e){return function(t){return t<=e}},greaterThan:function(e){return function(t){return t>e}},greaterThanOrEqual:function(e){return function(t){return t>=e}},even:function(){return function(e){return e%2===0}},odd:function(){return function(e){return e%2!==0}},includes:function(e){return function(t){return~t.indexOf(e)}},schema:function(e){return function(e){return{simple:function(t){var n=[];if(Object.keys(e).forEach((function(i){var r=e[i];try{r.check((t||{})[i])}catch(a){a.target=i,n.push(a)}})),n.length>0)throw n;return!0},async:function(t){var n=[],i=Object.keys(e).map((function(i){return e[i].testAsync((t||{})[i]).catch((function(e){e.target=i,n.push(e)}))}));return Promise.all(i).then((function(){if(n.length>0)throw n;return!0}))}}}(e)},passesAnyOf:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t){return e.some((function(e){return e.test(t)}))}},optional:function(e,t){return void 0===t&&(t=!1),{simple:function(n){return gb(n,t)||void 0===e.check(n)},async:function(n){return gb(n,t)||e.testAsync(n)}}}};function pb(e){return function(t){return Array.isArray(t)&&"array"===e||null===t&&"null"===e||typeof t===e}}function mb(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e}var fb=sb,vb=["variants","compoundVariants","defaultVariants"],bb=["css"],yb=["css"],Gb="colors",Bb="sizes",Zb="space",wb={gap:Zb,gridGap:Zb,columnGap:Zb,gridColumnGap:Zb,rowGap:Zb,gridRowGap:Zb,inset:Zb,insetBlock:Zb,insetBlockEnd:Zb,insetBlockStart:Zb,insetInline:Zb,insetInlineEnd:Zb,insetInlineStart:Zb,margin:Zb,marginTop:Zb,marginRight:Zb,marginBottom:Zb,marginLeft:Zb,marginBlock:Zb,marginBlockEnd:Zb,marginBlockStart:Zb,marginInline:Zb,marginInlineEnd:Zb,marginInlineStart:Zb,padding:Zb,paddingTop:Zb,paddingRight:Zb,paddingBottom:Zb,paddingLeft:Zb,paddingBlock:Zb,paddingBlockEnd:Zb,paddingBlockStart:Zb,paddingInline:Zb,paddingInlineEnd:Zb,paddingInlineStart:Zb,top:Zb,right:Zb,bottom:Zb,left:Zb,scrollMargin:Zb,scrollMarginTop:Zb,scrollMarginRight:Zb,scrollMarginBottom:Zb,scrollMarginLeft:Zb,scrollMarginX:Zb,scrollMarginY:Zb,scrollMarginBlock:Zb,scrollMarginBlockEnd:Zb,scrollMarginBlockStart:Zb,scrollMarginInline:Zb,scrollMarginInlineEnd:Zb,scrollMarginInlineStart:Zb,scrollPadding:Zb,scrollPaddingTop:Zb,scrollPaddingRight:Zb,scrollPaddingBottom:Zb,scrollPaddingLeft:Zb,scrollPaddingX:Zb,scrollPaddingY:Zb,scrollPaddingBlock:Zb,scrollPaddingBlockEnd:Zb,scrollPaddingBlockStart:Zb,scrollPaddingInline:Zb,scrollPaddingInlineEnd:Zb,scrollPaddingInlineStart:Zb,fontSize:"fontSizes",background:Gb,backgroundColor:Gb,backgroundImage:Gb,borderImage:Gb,border:Gb,borderBlock:Gb,borderBlockEnd:Gb,borderBlockStart:Gb,borderBottom:Gb,borderBottomColor:Gb,borderColor:Gb,borderInline:Gb,borderInlineEnd:Gb,borderInlineStart:Gb,borderLeft:Gb,borderLeftColor:Gb,borderRight:Gb,borderRightColor:Gb,borderTop:Gb,borderTopColor:Gb,caretColor:Gb,color:Gb,columnRuleColor:Gb,fill:Gb,outline:Gb,outlineColor:Gb,stroke:Gb,textDecorationColor:Gb,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Bb,minBlockSize:Bb,maxBlockSize:Bb,inlineSize:Bb,minInlineSize:Bb,maxInlineSize:Bb,width:Bb,minWidth:Bb,maxWidth:Bb,height:Bb,minHeight:Bb,maxHeight:Bb,flexBasis:Bb,gridTemplateColumns:Bb,gridTemplateRows:Bb,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},xb=function(e,t){return"function"==typeof t?{"()":Function.prototype.toString.call(t)}:t},Sb=function(){var e=Object.create(null);return function(t,n){for(var i=function(e){return JSON.stringify(e,xb)}(t),r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];return i in e?e[i]:e[i]=n.apply(void 0,[t].concat(a))}},Wb=Symbol.for("sxs.internal"),Vb=function(e,t){return Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))},Rb=function(e){for(var t in e)return!0;return!1},qb=Object.prototype.hasOwnProperty,kb=function(e){return e.includes("-")?e:e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}))},Xb=/\s+(?![^()]*\))/,Yb=function(e){return function(t){return e.apply(void 0,O("string"==typeof t?String(t).split(Xb):[t]))}},Nb={appearance:function(e){return{WebkitAppearance:e,appearance:e}},backfaceVisibility:function(e){return{WebkitBackfaceVisibility:e,backfaceVisibility:e}},backdropFilter:function(e){return{WebkitBackdropFilter:e,backdropFilter:e}},backgroundClip:function(e){return{WebkitBackgroundClip:e,backgroundClip:e}},boxDecorationBreak:function(e){return{WebkitBoxDecorationBreak:e,boxDecorationBreak:e}},clipPath:function(e){return{WebkitClipPath:e,clipPath:e}},content:function(e){return{content:e.includes('"')||e.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(e)?e:'"'.concat(e,'"')}},hyphens:function(e){return{WebkitHyphens:e,hyphens:e}},maskImage:function(e){return{WebkitMaskImage:e,maskImage:e}},maskSize:function(e){return{WebkitMaskSize:e,maskSize:e}},tabSize:function(e){return{MozTabSize:e,tabSize:e}},textSizeAdjust:function(e){return{WebkitTextSizeAdjust:e,textSizeAdjust:e}},userSelect:function(e){return{WebkitUserSelect:e,userSelect:e}},marginBlock:Yb((function(e,t){return{marginBlockStart:e,marginBlockEnd:t||e}})),marginInline:Yb((function(e,t){return{marginInlineStart:e,marginInlineEnd:t||e}})),maxSize:Yb((function(e,t){return{maxBlockSize:e,maxInlineSize:t||e}})),minSize:Yb((function(e,t){return{minBlockSize:e,minInlineSize:t||e}})),paddingBlock:Yb((function(e,t){return{paddingBlockStart:e,paddingBlockEnd:t||e}})),paddingInline:Yb((function(e,t){return{paddingInlineStart:e,paddingInlineEnd:t||e}}))},Kb=/([\d.]+)([^]*)/,Hb=function(e,t){return e.length?e.reduce((function(e,n){return e.push.apply(e,O(t.map((function(e){return e.includes("&")?e.replace(/&/g,/[ +>|~]/.test(n)&&/&.*&/.test(e)?":is(".concat(n,")"):n):n+" "+e})))),e}),[]):t},zb=function(e,t){return e in Mb&&"string"==typeof t?t.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(function(t,n,i,r){return n+("stretch"===i?"-moz-available".concat(r,";").concat(kb(e),":").concat(n,"-webkit-fill-available"):"-moz-fit-content".concat(r,";").concat(kb(e),":").concat(n,"fit-content"))+r})):String(t)},Mb={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},Fb=function(e){return e?e+"-":""},Lb=function(e,t,n){return e.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(function(e,i,r,a,o){return"$"==a==!!r?e:(i||"--"==a?"calc(":"")+"var(--"+("$"===a?Fb(t)+(o.includes("$")?"":Fb(n))+o.replace(/\$/g,"-"):o)+")"+(i||"--"==a?"*"+(i||"")+(r||"1")+")":"")}))},_b=/\s*,\s*(?![^()]*\))/,Tb=Object.prototype.toString,Eb=function(e,t,n,i,r){var a,o,l;!function e(t,n,g){var s,u;(function t(I){for(s in I){var d,C=64===s.charCodeAt(0),h=E(C&&Array.isArray(I[s])?I[s]:[I[s]]);try{for(h.s();!(d=h.n()).done;){u=d.value;var A=/[A-Z]/.test(G=s)?G:G.replace(/-[^]/g,(function(e){return e[1].toUpperCase()})),p="object"==typeof u&&u&&u.toString===Tb&&(!i.utils[A]||!n.length);if(A in i.utils&&!p){var m=i.utils[A];if(m!==o){o=m,t(m(u)),o=null;continue}}else if(A in Nb){var f=Nb[A];if(f!==l){l=f,t(f(u)),l=null;continue}}if(C&&(y=s.slice(1)in i.media?"@media "+i.media[s.slice(1)]:s,s=y.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(function(e,t,n,i,r,a){var o=Kb.test(t),l=.0625*(o?-1:1),g=c(o?[i,t]:[t,i],2),s=g[0],u=g[1];return"("+("="===n[0]?"":">"===n[0]===o?"max-":"min-")+s+":"+("="!==n[0]&&1===n.length?u.replace(Kb,(function(e,t,i){return Number(t)+l*(">"===n?1:-1)+i})):u)+(r?") and ("+(">"===r[0]?"min-":"max-")+s+":"+(1===r.length?a.replace(Kb,(function(e,t,n){return Number(t)+l*(">"===r?-1:1)+n})):a):"")+")"}))),p){var v=C?g.concat(s):O(g),b=C?O(n):Hb(n,s.split(_b));void 0!==a&&r(Jb.apply(void 0,O(a))),a=void 0,e(u,b,v)}else void 0===a&&(a=[[],n,g]),s=C||36!==s.charCodeAt(0)?s:"--".concat(Fb(i.prefix)).concat(s.slice(1).replace(/\$/g,"-")),u=p?u:"number"==typeof u?u&&A in Ub?String(u)+"px":String(u):Lb(zb(A,null==u?"":u),i.prefix,i.themeMap[A]),a[0].push("".concat(C?"".concat(s," "):"".concat(kb(s),":")).concat(u))}}catch(B){h.e(B)}finally{h.f()}}var y,G})(t),void 0!==a&&r(Jb.apply(void 0,O(a))),a=void 0}(e,t,n)},Jb=function(e,t,n){return"".concat(n.map((function(e){return"".concat(e,"{")})).join("")).concat(t.length?"".concat(t.join(","),"{"):"").concat(e.join(";")).concat(t.length?"}":"").concat(Array(n.length?n.length+1:0).join("}"))},Ub={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},Db=function(e){return String.fromCharCode(e+(e>25?39:97))},Pb=function(e){return function(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=Db(t%52)+n;return Db(t%52)+n}(function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e}(5381,JSON.stringify(e))>>>0)},Ob=["themed","global","styled","onevar","resonevar","allvar","inline"],Qb=function(e){if(e.href&&!e.href.startsWith(location.origin))return!1;try{return!!e.cssRules}catch(e){return!1}},jb=function(e){var t=e.group,n=t.cssRules.length;e.apply=function(e){try{t.insertRule(e,n),++n}catch(e){}}},$b=Symbol(),ey=Sb(),ty=function(e,t){return ey(e,(function(){return function(){for(var n={type:null,composers:new Set},i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];for(var o=0,l=r;o<l.length;o++){var g=l[o];if(null!=g)if(g[Wb]){null==n.type&&(n.type=g[Wb].type);var s,c=E(g[Wb].composers);try{for(c.s();!(s=c.n()).done;){var u=s.value;n.composers.add(u)}}catch(I){c.e(I)}finally{c.f()}}else g.constructor!==Object||g.$$typeof?null==n.type&&(n.type=g):n.composers.add(ny(g,e))}return null==n.type&&(n.type="span"),n.composers.size||n.composers.add(["PJLV",{},[],[],{},[]]),iy(e,n,t)}}))},ny=function(e,t){var n,i,r=e.variants,a=e.compoundVariants,o=e.defaultVariants,l=j(e,vb),g="".concat(Fb(t.prefix),"c-").concat(Pb(l)),s=[],c=[],u=Object.create(null),I=[];for(var d in o)u[d]=String(o[d]);if("object"==typeof r&&r)for(var C in r){n=u,i=C,qb.call(n,i)||(u[C]="undefined");var h=r[C];for(var A in h){var p=L({},C,String(A));"undefined"===String(A)&&I.push(C);var m=h[A],f=[p,m,!Rb(m)];s.push(f)}}if("object"==typeof a&&a){var v,b=E(a);try{for(b.s();!(v=b.n()).done;){var y=v.value,G=y.css,B=j(y,bb);for(var Z in G="object"==typeof G&&G||{},B)B[Z]=String(B[Z]);var w=[B,G,!Rb(G)];c.push(w)}}catch(x){b.e(x)}finally{b.f()}}return[g,l,s,c,u,I]},iy=function(e,t,n){var i,r=c(ry(t.composers),4),a=r[0],o=r[1],l=r[2],g=r[3],s="function"==typeof t.type||t.type.$$typeof?function(e){function t(){for(var n=0;n<t[$b].length;n++){var i=c(t[$b][n],2),r=i[0],a=i[1];e.rules[r].apply(a)}return t[$b]=[],null}return t[$b]=[],t.rules={},Ob.forEach((function(e){return t.rules[e]={apply:function(n){return t[$b].push([e,n])}}})),t}(n):null,u=(s||n).rules,I=".".concat(a).concat(o.length>1?":where(.".concat(o.slice(1).join("."),")"):""),d=function(i){var r=i="object"==typeof i&&i||oy,d=r.css,C=j(r,yb),h={};for(var A in l)if(delete C[A],A in i){var p=i[A];"object"==typeof p&&p?h[A]=T({"@initial":l[A]},p):(p=String(p),h[A]="undefined"!==p||g.has(A)?p:l[A])}else h[A]=l[A];var m,f=new Set(O(o)),v=E(t.composers);try{for(v.s();!(m=v.n()).done;){var b=c(m.value,4),y=b[0],G=b[1],B=b[2],Z=b[3];n.rules.styled.cache.has(y)||(n.rules.styled.cache.add(y),Eb(G,[".".concat(y)],[],e,(function(e){u.styled.apply(e)})));var w,x=ay(B,h,e.media),S=ay(Z,h,e.media,!0),W=E(x);try{for(W.s();!(w=W.n()).done;){var V=w.value;if(void 0!==V){var R,q=E(V);try{var k=function(){var t=c(R.value,3),i=t[0],r=t[1],a=t[2],o="".concat(y,"-").concat(Pb(r),"-").concat(i);f.add(o);var l=(a?n.rules.resonevar:n.rules.onevar).cache,g=a?u.resonevar:u.onevar;l.has(o)||(l.add(o),Eb(r,[".".concat(o)],[],e,(function(e){g.apply(e)})))};for(q.s();!(R=q.n()).done;)k()}catch(Q){q.e(Q)}finally{q.f()}}}}catch(Q){W.e(Q)}finally{W.f()}var X,Y=E(S);try{for(Y.s();!(X=Y.n()).done;){var N=X.value;if(void 0!==N){var K,H=E(N);try{for(H.s();!(K=H.n()).done;){var z=c(K.value,2),M=z[0],F=z[1],L="".concat(y,"-").concat(Pb(F),"-").concat(M);f.add(L),n.rules.allvar.cache.has(L)||(n.rules.allvar.cache.add(L),Eb(F,[".".concat(L)],[],e,(function(e){u.allvar.apply(e)})))}}catch(Q){H.e(Q)}finally{H.f()}}}}catch(Q){Y.e(Q)}finally{Y.f()}}}catch(Q){v.e(Q)}finally{v.f()}if("object"==typeof d&&d){var _="".concat(a,"-i").concat(Pb(d),"-css");f.add(_),n.rules.inline.cache.has(_)||(n.rules.inline.cache.add(_),Eb(d,[".".concat(_)],[],e,(function(e){u.inline.apply(e)})))}var J,U=E(String(i.className||"").trim().split(/\s+/));try{for(U.s();!(J=U.n()).done;){var D=J.value;D&&f.add(D)}}catch(Q){U.e(Q)}finally{U.f()}var P=C.className=O(f).join(" ");return{type:t.type,className:P,selector:I,props:C,toString:function(){return P},deferredInjector:s}};return Vb(d,(L(i={className:a,selector:I},Wb,t),L(i,"toString",(function(){return n.rules.styled.cache.has(a)||d(),a})),i))},ry=function(e){var t,n="",i=[],r={},a=[],o=E(e);try{for(o.s();!(t=o.n()).done;){var l=c(t.value,6),g=l[0],s=l[4],u=l[5];for(var I in""===n&&(n=g),i.push(g),a.push.apply(a,O(u)),s){var d=s[I];(void 0===r[I]||"undefined"!==d||u.includes(d))&&(r[I]=d)}}}catch(C){o.e(C)}finally{o.f()}return[n,i,r,new Set(a)]},ay=function(e,t,n,i){var r,a=[],o=E(e);try{e:for(o.s();!(r=o.n()).done;){var l=c(r.value,3),g=l[0],s=l[1];if(!l[2]){var u=void 0,I=0,d=!1;for(u in g){var C=g[u],h=t[u];if(h!==C){if("object"!=typeof h||!h)continue e;var A=void 0,p=void 0,m=0;for(var f in h){if(C===String(h[f])){if("@initial"!==f){var v=f.slice(1);(p=p||[]).push(v in n?n[v]:f.replace(/^@media ?/,"")),d=!0}I+=m,A=!0}++m}if(p&&p.length&&(s=L({},"@media "+p.join(", "),s)),!A)continue e}}(a[I]=a[I]||[]).push([i?"cv":"".concat(u,"-").concat(g[u]),s,d])}}}catch(b){o.e(b)}finally{o.f()}return a},oy={},ly=Sb(),gy=function(e,t){return ly(e,(function(){return function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=function(){var n,r=E(i);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=Pb(a="object"==typeof a&&a||{});if(!t.rules.global.cache.has(o)){if(t.rules.global.cache.add(o),"@import"in a){var l,g=[].indexOf.call(t.sheet.cssRules,t.rules.themed.group)-1,s=E([].concat(a["@import"]));try{for(s.s();!(l=s.n()).done;){var c=l.value;c=c.includes('"')||c.includes("'")?c:'"'.concat(c,'"'),t.sheet.insertRule("@import ".concat(c,";"),g++)}}catch(u){s.e(u)}finally{s.f()}delete a["@import"]}Eb(a,[],[],e,(function(e){t.rules.global.apply(e)}))}}}catch(u){r.e(u)}finally{r.f()}return""};return Vb(a,{toString:a})}}))},sy=Sb(),cy=function(e,t){return sy(e,(function(){return function(n){var i="".concat(Fb(e.prefix),"k-").concat(Pb(n)),r=function(){if(!t.rules.global.cache.has(i)){t.rules.global.cache.add(i);var r=[];Eb(n,[],[],e,(function(e){return r.push(e)}));var a="@keyframes ".concat(i,"{").concat(r.join(""),"}");t.rules.global.apply(a)}return i};return Vb(r,{get name(){return r()},toString:r})}}))},uy=function(){function e(t,n,i,r){$(this,e),this.token=null==t?"":String(t),this.value=null==n?"":String(n),this.scale=null==i?"":String(i),this.prefix=null==r?"":String(r)}return te(e,[{key:"computedValue",get:function(){return"var("+this.variable+")"}},{key:"variable",get:function(){return"--"+Fb(this.prefix)+Fb(this.scale)+this.token}},{key:"toString",value:function(){return this.computedValue}}]),e}(),Iy=Sb(),dy=function(e,t){return Iy(e,(function(){return function(n,i){i="object"==typeof n&&n||Object(i);var r=".".concat(n=(n="string"==typeof n?n:"")||"".concat(Fb(e.prefix),"t-").concat(Pb(i))),a={},o=[];for(var l in i)for(var g in a[l]={},i[l]){var s="--".concat(Fb(e.prefix)).concat(l,"-").concat(g),c=Lb(String(i[l][g]),e.prefix,l);a[l][g]=new uy(g,c,l,e.prefix),o.push("".concat(s,":").concat(c))}var u=function(){if(o.length&&!t.rules.themed.cache.has(n)){t.rules.themed.cache.add(n);var r="".concat(i===e.theme?":root,":"",".").concat(n,"{").concat(o.join(";"),"}");t.rules.themed.apply(r)}return n};return T(T({},a),{},{get className(){return u()},selector:r,toString:u})}}))},Cy=Sb(),hy=Sb(),Ay=function(e){var t=function(e){var t=!1,n=Cy(e,(function(e){t=!0;var n="prefix"in(e="object"==typeof e&&e||{})?String(e.prefix):"",i="object"==typeof e.media&&e.media||{},r="object"==typeof e.root?e.root||null:globalThis.document||null,a="object"==typeof e.theme&&e.theme||{},o={prefix:n,media:i,theme:a,themeMap:"object"==typeof e.themeMap&&e.themeMap||T({},wb),utils:"object"==typeof e.utils&&e.utils||{}},l=function(e){var t,n=function(){var e=t.sheet.cssRules;return[].map.call(e,(function(n,i){var r=n.cssText,a="";if(r.startsWith("--sxs"))return"";if(e[i-1]&&(a=e[i-1].cssText).startsWith("--sxs")){if(!n.cssRules.length)return"";for(var o in t.rules)if(t.rules[o].group===n)return"--sxs{--sxs:".concat(O(t.rules[o].cache).join(" "),"}").concat(r);return n.cssRules.length?"".concat(a).concat(r):""}return r})).join("")};return function i(){if(t){var r=t,a=r.rules,o=r.sheet;if(!o.deleteRule){for(;3===Object(Object(o.cssRules)[0]).type;)o.cssRules.splice(0,1);o.cssRules=[]}for(var l in a)delete a[l]}var g,s=E(Object(e).styleSheets||[]);try{for(s.s();!(g=s.n()).done;){var c=g.value;if(Qb(c)){for(var u=0,I=c.cssRules;I[u];++u){var d=Object(I[u]);if(1===d.type){var C=Object(I[u+1]);if(4===C.type){++u;var h=d.cssText;if(h.startsWith("--sxs")){var A=h.slice(14,-3).trim().split(/\s+/),p=Ob[A[0]];p&&(t||(t={sheet:c,reset:i,rules:{},toString:n}),t.rules[p]={group:C,index:u,cache:new Set(A)})}}}}if(t)break}}}catch(Z){s.e(Z)}finally{s.f()}t||(t={sheet:e?(e.head||e).appendChild(document.createElement("style")).sheet:function e(t,n){return{type:n,cssRules:[],insertRule:function(t,n){this.cssRules.splice(n,0,e(t,{import:3,undefined:1}[(t.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return"@media{}"===t?"@media{".concat([].map.call(this.cssRules,(function(e){return e.cssText})).join(""),"}"):t}}}("","text/css"),rules:{},reset:i,toString:n});for(var m=t,f=m.sheet,v=m.rules,b=Ob.length-1;b>=0;--b){var y=Ob[b];if(!v[y]){var G=Ob[b+1],B=v[G]?v[G].index:f.cssRules.length;f.insertRule("@media{}",B),f.insertRule("--sxs{--sxs:".concat(b,"}"),B),v[y]={group:f.cssRules[B+1],index:B,cache:new Set([b])}}jb(v[y])}}(),t}(r),g={css:ty(o,l),globalCss:gy(o,l),keyframes:cy(o,l),createTheme:dy(o,l),reset:function(){l.reset(),g.theme.toString()},theme:{},sheet:l,config:o,prefix:n,getCssText:l.toString,toString:l.toString};return String(g.theme=g.createTheme(a)),g}));return t||n.reset(),n}(e);return t.styled=function(e){var t=e.config,n=e.sheet;return hy(t,(function(){var e=ty(t,n);return function(){var t=e.apply(void 0,arguments),n=t[Wb].type,r=i.forwardRef((function(e,r){var a=e&&e.as||n,o=t(e),l=o.props,g=o.deferredInjector;return delete l.as,l.ref=r,g?i.createElement(i.Fragment,null,i.createElement(a,l),i.createElement(g,null)):i.createElement(a,l)}));return r.className=t.className,r.displayName="Styled.".concat(n.displayName||n.name||n),r.selector=t.selector,r.toString=function(){return t.selector},r[Wb]=t[Wb],r}}))}(t),t};function py(e,t,n){return Math.max(t,Math.min(e,n))}var my=function(e,t){return void 0===e&&(e=t),Array.isArray(e)?e:[e,e]},fy=function(e,t){return[e[0]+t[0],e[1]+t[1]]},vy=function(e,t){return[e[0]-t[0],e[1]-t[1]]},by=function(e,t){e[0]+=t[0],e[1]+=t[1]};function yy(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function Gy(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.15;return 0===i?py(e,t,n):e<t?-yy(t-e,n-t,i)+t:e>n?+yy(e-n,n-t,i)+n:e}function By(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function wy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zy(Object(n),!0).forEach((function(t){By(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zy(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xy={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Sy(e){return e?e[0].toUpperCase()+e.slice(1):""}var Wy=["enter","leave"];function Vy(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return e&&!Wy.includes(t)}function Ry(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=xy[e],r=i&&i[t]||t;return"on"+Sy(e)+Sy(r)+(Vy(n,r)?"Capture":"")}var qy=["gotpointercapture","lostpointercapture"];function ky(e){var t=e.substring(2).toLowerCase(),n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));var i=qy.includes(t)?"capturecapture":"capture",r=!!~t.indexOf(i);return r&&(t=t.replace("capture","")),{device:t,capture:r,passive:n}}function Xy(e){return"touches"in e}function Yy(e){return Xy(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function Ny(e){return Xy(e)?function(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function Ky(e){return function(e){return Array.from(e.touches).filter((function(t){var n,i;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(i=n.contains)||void 0===i?void 0:i.call(n,t.target))}))}(e).map((function(e){return e.identifier}))}function Hy(e){var t=Ny(e);return Xy(e)?t.identifier:t.pointerId}function zy(e){var t=Ny(e);return[t.clientX,t.clientY]}function My(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return e.apply(void 0,n)}return e}function Fy(){}function Ly(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?Fy:1===t.length?t[0]:function(){var e,n,i=E(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;e=r.apply(this,arguments)||e}}catch(a){i.e(a)}finally{i.f()}return e}}function _y(e,t){return Object.assign({},t,e||{})}var Ty=function(){function e(t,n,i){$(this,e),this.ctrl=t,this.args=n,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}return te(e,[{key:"state",get:function(){return this.ctrl.state[this.key]},set:function(e){this.ctrl.state[this.key]=e}},{key:"shared",get:function(){return this.ctrl.state.shared}},{key:"eventStore",get:function(){return this.ctrl.gestureEventStores[this.key]}},{key:"timeoutStore",get:function(){return this.ctrl.gestureTimeoutStores[this.key]}},{key:"config",get:function(){return this.ctrl.config[this.key]}},{key:"sharedConfig",get:function(){return this.ctrl.config.shared}},{key:"handler",get:function(){return this.ctrl.handlers[this.key]}},{key:"reset",value:function(){var e=this.state,t=this.shared,n=this.ingKey,i=this.args;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}},{key:"start",value:function(e){var t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?My(n.from,t):t.offset,t.offset=t.lastOffset),t.startTime=t.timeStamp=e.timeStamp}},{key:"computeValues",value:function(e){var t=this.state;t._values=e,t.values=this.config.transform(e)}},{key:"computeInitial",value:function(){var e=this.state;e._initial=e._values,e.initial=e.values}},{key:"compute",value:function(e){var t=this.state,n=this.config,i=this.shared;t.args=this.args;var r=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,function(e){var t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){var n=e.shiftKey,i=e.altKey,r=e.metaKey,a=e.ctrlKey;Object.assign(t,{shiftKey:n,altKey:i,metaKey:r,ctrlKey:a})}return t}(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,r=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){var a=t._delta.map(Math.abs);by(t._distance,a)}this.axisIntent&&this.axisIntent(e);var o=c(t._movement,2),l=o[0],g=o[1],s=c(n.threshold,2),u=s[0],I=s[1],d=t._step,C=t.values;if(n.hasCustomTransform?(!1===d[0]&&(d[0]=Math.abs(l)>=u&&C[0]),!1===d[1]&&(d[1]=Math.abs(g)>=I&&C[1])):(!1===d[0]&&(d[0]=Math.abs(l)>=u&&Math.sign(l)*u),!1===d[1]&&(d[1]=Math.abs(g)>=I&&Math.sign(g)*I)),t.intentional=!1!==d[0]||!1!==d[1],t.intentional){var h=[0,0];if(n.hasCustomTransform){var A=c(C,2),p=A[0],m=A[1];h[0]=!1!==d[0]?p-d[0]:0,h[1]=!1!==d[1]?m-d[1]:0}else h[0]=!1!==d[0]?l-d[0]:0,h[1]=!1!==d[1]?g-d[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(h);var f=t.offset,v=t._active&&!t._blocked||t.active;v&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=i[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=My(n.bounds,t)),this.setup&&this.setup()),t.movement=h,this.computeOffset()));var b=c(t.offset,2),y=b[0],G=b[1],B=c(t._bounds,2),Z=c(B[0],2),w=Z[0],x=Z[1],S=c(B[1],2),W=S[0],V=S[1];t.overflow=[y<w?-1:y>x?1:0,G<W?-1:G>V?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);var R=t._active&&n.rubberband||[0,0];if(t.offset=function(e,t,n){var i=c(t,2),r=i[0],a=i[1],o=c(n,2),l=o[0],g=o[1],s=c(e,2),u=c(s[0],2),I=u[0],d=u[1],C=c(s[1],2),h=C[0],A=C[1];return[Gy(r,I,d,l),Gy(a,h,A,g)]}(t._bounds,t.offset,R),t.delta=vy(t.offset,f),this.computeMovement(),v&&(!t.last||r>32)){t.delta=vy(t.offset,f);var q=t.delta.map(Math.abs);by(t.distance,q),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&r>0&&(t.velocity=[q[0]/r,q[1]/r])}}}},{key:"emit",value:function(){var e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),!e._blocked&&e.intentional||e._force||n.triggerAllEvents){var i=this.handler(wy(wy(wy({},t),e),{},L({},this.aliasKey,e.values)));void 0!==i&&(e.memo=i)}}},{key:"clean",value:function(){this.eventStore.clean(),this.timeoutStore.clean()}}]),e}();var Ey=function(e){ne(n,e);var t=le(n);function n(){var e;$(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return By(ae(e=t.call.apply(t,[this].concat(r))),"aliasKey","xy"),e}return te(n,[{key:"reset",value:function(){Ie(ie(n.prototype),"reset",this).call(this),this.state.axis=void 0}},{key:"init",value:function(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}},{key:"computeOffset",value:function(){this.state.offset=fy(this.state.lastOffset,this.state.movement)}},{key:"computeMovement",value:function(){this.state.movement=vy(this.state.offset,this.state.lastOffset)}},{key:"axisIntent",value:function(e){var t=this.state,n=this.config;if(!t.axis&&e){var i="object"===typeof n.axisThreshold?n.axisThreshold[Yy(e)]:n.axisThreshold;t.axis=function(e,t){var n=c(e,2),i=n[0],r=n[1],a=Math.abs(i),o=Math.abs(r);return a>o&&a>t?"x":o>a&&o>t?"y":void 0}(t._movement,i)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}},{key:"restrictToAxis",value:function(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}]),n}(Ty),Jy=function(e){return e},Uy=.15,Dy={enabled:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e},eventOptions:function(e,t,n){return wy(wy({},n.shared.eventOptions),e)},preventDefault:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e},triggerAllEvents:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e},rubberband:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return[Uy,Uy];case!1:return[0,0];default:return my(e)}},from:function(e){return"function"===typeof e?e:null!=e?my(e):void 0},transform:function(e,t,n){var i=e||n.shared.transform;return this.hasCustomTransform=!!i,i||Jy},threshold:function(e){return my(e,0)}};var Py=wy(wy({},Dy),{},{axis:function(e,t,n){var i=n.axis;if(this.lockDirection="lock"===i,!this.lockDirection)return i},axisThreshold:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e},bounds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"===typeof e)return function(t){return Py.bounds(e(t))};if("current"in e)return function(){return e.current};if("function"===typeof HTMLElement&&e instanceof HTMLElement)return e;var t=e.left,n=void 0===t?-1/0:t,i=e.right,r=void 0===i?1/0:i,a=e.top,o=void 0===a?-1/0:a,l=e.bottom,g=void 0===l?1/0:l;return[[n,r],[o,g]]}}),Oy=10,Qy={ArrowRight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return[Oy*e,0]},ArrowLeft:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return[-10*e,0]},ArrowUp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return[0,-10*e]},ArrowDown:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return[0,Oy*e]}},jy=function(e){ne(n,e);var t=le(n);function n(){var e;$(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return By(ae(e=t.call.apply(t,[this].concat(r))),"ingKey","dragging"),e}return te(n,[{key:"reset",value:function(){Ie(ie(n.prototype),"reset",this).call(this);var e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}},{key:"setup",value:function(){var e=this.state;if(e._bounds instanceof HTMLElement){var t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),i={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=Py.bounds(i)}}},{key:"cancel",value:function(){var e=this,t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout((function(){e.compute(),e.emit()}),0))}},{key:"setActive",value:function(){this.state._active=this.state._pointerActive||this.state._keyboardActive}},{key:"clean",value:function(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,Ie(ie(n.prototype),"clean",this).call(this)}},{key:"pointerDown",value:function(e){var t=this.config,n=this.state;if(null==e.buttons||(Array.isArray(t.pointerButtons)?t.pointerButtons.includes(e.buttons):-1===t.pointerButtons||t.pointerButtons===e.buttons)){var i=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),i&&i.size>1&&n._pointerActive||(this.start(e),this.setupPointer(e),n._pointerId=Hy(e),n._pointerActive=!0,this.computeValues(zy(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==Yy(e)?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}}},{key:"startPointerDrag",value:function(e){var t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}},{key:"pointerMove",value:function(e){var t=this.state,n=this.config;if(t._pointerActive&&(t.type!==e.type||e.timeStamp!==t.timeStamp)){var i=Hy(e);if(void 0===t._pointerId||i===t._pointerId){var r=zy(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=vy(r,t._values),this.computeValues(r)),by(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):n.preventScrollAxis&&!t._preventScroll?t.axis?t.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}}}},{key:"pointerUp",value:function(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(B){0}var t=this.state,n=this.config;if(t._active&&t._pointerActive){var i=Hy(e);if(void 0===t._pointerId||i===t._pointerId){this.state._pointerActive=!1,this.setActive(),this.compute(e);var r=c(t._distance,2),a=r[0],o=r[1];if(t.tap=a<=n.tapsThreshold&&o<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{var l=c(t.direction,2),g=l[0],s=l[1],u=c(t.velocity,2),I=u[0],d=u[1],C=c(t.movement,2),h=C[0],A=C[1],p=c(n.swipe.velocity,2),m=p[0],f=p[1],v=c(n.swipe.distance,2),b=v[0],y=v[1],G=n.swipe.duration;t.elapsedTime<G&&(Math.abs(I)>m&&Math.abs(h)>b&&(t.swipe[0]=g),Math.abs(d)>f&&Math.abs(A)>y&&(t.swipe[1]=s))}this.emit()}}}},{key:"pointerClick",value:function(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}},{key:"setupPointer",value:function(e){var t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}},{key:"pointerClean",value:function(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}},{key:"preventScroll",value:function(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}},{key:"setupScrollPrevention",value:function(e){this.state._preventScroll=!1,function(e){"persist"in e&&"function"===typeof e.persist&&e.persist()}(e);var t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}},{key:"setupDelayTrigger",value:function(e){var t=this;this.state._delayed=!0,this.timeoutStore.add("dragDelay",(function(){t.state._step=[0,0],t.startPointerDrag(e)}),this.config.delay)}},{key:"keyDown",value:function(e){var t=Qy[e.key];if(t){var n=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(i),n._keyboardActive=!0,by(n._movement,n._delta),this.compute(e),this.emit()}}},{key:"keyUp",value:function(e){e.key in Qy&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}},{key:"bind",value:function(e){var t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}]),n}(Ey);var $y="undefined"!==typeof window&&window.document&&window.document.createElement;function eG(){return $y&&"ontouchstart"in window||$y&&window.navigator.maxTouchPoints>1}var tG={isBrowser:$y,gesture:function(){try{return"constructor"in GestureEvent}catch(e){return!1}}(),touch:eG(),touchscreen:eG(),pointer:$y&&"onpointerdown"in window,pointerLock:$y&&"exitPointerLock"in window.document},nG={mouse:0,touch:0,pen:8},iG=wy(wy({},Py),{},{device:function(e,t,n){var i=n.pointer,r=(i=void 0===i?{}:i).touch,a=void 0!==r&&r,o=i.lock,l=void 0!==o&&o,g=i.mouse,s=void 0!==g&&g;return this.pointerLock=l&&tG.pointerLock,tG.touch&&a?"touch":this.pointerLock?"mouse":tG.pointer&&!s?"pointer":tG.touch?"touch":"mouse"},preventScrollAxis:function(e,t,n){var i=n.preventScroll;if(this.preventScrollDelay="number"===typeof i?i:i||void 0===i&&e?250:void 0,tG.touchscreen&&!1!==i)return e||(void 0!==i?"y":void 0)},pointerCapture:function(e,t,n){var i=n.pointer,r=(i=void 0===i?{}:i).capture,a=void 0===r||r,o=i.buttons,l=void 0===o?1:o;return this.pointerButtons=l,!this.pointerLock&&"pointer"===this.device&&a},keys:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e},threshold:function(e,t,n){var i=n.filterTaps,r=void 0!==i&&i,a=n.tapsThreshold,o=void 0===a?3:a,l=n.axis,g=my(e,r?o:(void 0===l?void 0:l)?1:0);return this.filterTaps=r,this.tapsThreshold=o,g},swipe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.velocity,n=void 0===t?.5:t,i=e.distance,r=void 0===i?50:i,a=e.duration,o=void 0===a?250:a;return{velocity:this.transform(my(n)),distance:this.transform(my(r)),duration:o}},delay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:function(e){return e?wy(wy({},nG),e):nG}});wy(wy({},Dy),{},{device:function(e,t,n){var i=n.shared,r=n.pointer,a=(r=void 0===r?{}:r).touch,o=void 0!==a&&a;if(i.target&&!tG.touch&&tG.gesture)return"gesture";if(tG.touch&&o)return"touch";if(tG.touchscreen){if(tG.pointer)return"pointer";if(tG.touch)return"touch"}},bounds:function(e,t,n){var i=n.scaleBounds,r=void 0===i?{}:i,a=n.angleBounds,o=void 0===a?{}:a,l=function(e){var t=_y(My(r,e),{min:-1/0,max:1/0});return[t.min,t.max]},g=function(e){var t=_y(My(o,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!==typeof r&&"function"!==typeof o?[l(),g()]:function(e){return[l(e),g(e)]}},threshold:function(e,t,n){this.lockDirection="lock"===n.axis;var i=my(e,this.lockDirection?[.1,3]:0);return i},modifierKey:function(e){return void 0===e?"ctrlKey":e}}),wy(wy({},Py),{},{mouseOnly:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e}}),wy(wy({},Py),{},{mouseOnly:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e}});var rG=new Map,aG=new Map;var oG={key:"drag",engine:jy,resolver:iG};function lG(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var gG={target:function(e){if(e)return function(){return"current"in e?e.current:e}},enabled:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e},window:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tG.isBrowser?window:void 0;return e})),eventOptions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.passive,n=void 0===t||t,i=e.capture,r=void 0!==i&&i;return{passive:n,capture:r}},transform:function(e){return e}},sG=["target","eventOptions","window","enabled","transform"];function cG(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={},i=0,r=Object.entries(t);i<r.length;i++){var a=c(r[i],2),o=a[0],l=a[1];switch(typeof l){case"function":n[o]=l.call(n,e[o],o,e);break;case"object":n[o]=cG(e[o],l);break;case"boolean":l&&(n[o]=e[o])}}return n}var uG=function(){function e(t,n){$(this,e),By(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}return te(e,[{key:"add",value:function(e,t,n,i,r){var a=this._listeners,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=xy[e],i=n&&n[t]||t;return e+i}(t,n),l=wy(wy({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),r);e.addEventListener(o,i,l);var g=function t(){e.removeEventListener(o,i,l),a.delete(t)};return a.add(g),g}},{key:"clean",value:function(){this._listeners.forEach((function(e){return e()})),this._listeners.clear()}}]),e}(),IG=function(){function e(){$(this,e),By(this,"_timeouts",new Map)}return te(e,[{key:"add",value:function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:140;this.remove(e);for(var r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];this._timeouts.set(e,(n=window).setTimeout.apply(n,[t,i].concat(a)))}},{key:"remove",value:function(e){var t=this._timeouts.get(e);t&&window.clearTimeout(t)}},{key:"clean",value:function(){this._timeouts.forEach((function(e){window.clearTimeout(e)})),this._timeouts.clear()}}]),e}(),dG=function(){function e(t){$(this,e),By(this,"gestures",new Set),By(this,"_targetEventStore",new uG(this)),By(this,"gestureEventStores",{}),By(this,"gestureTimeoutStores",{}),By(this,"handlers",{}),By(this,"config",{}),By(this,"pointerIds",new Set),By(this,"touchIds",new Set),By(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&CG(e,"drag");t.wheel&&CG(e,"wheel");t.scroll&&CG(e,"scroll");t.move&&CG(e,"move");t.pinch&&CG(e,"pinch");t.hover&&CG(e,"hover")}(this,t)}return te(e,[{key:"setEventIds",value:function(e){return Xy(e)?(this.touchIds=new Set(Ky(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}},{key:"applyHandlers",value:function(e,t){this.handlers=e,this.nativeHandlers=t}},{key:"applyConfig",value:function(e,t){this.config=function(e,t){var n=e,i=n.target,r=n.eventOptions,a=n.window,o=n.enabled,l=n.transform,g=lG(n,sG),s={shared:cG({target:i,eventOptions:r,window:a,enabled:o,transform:l},gG)};if(t){var c=aG.get(t);s[t]=cG(wy({shared:s.shared},g),c)}else for(var u in g){var I=aG.get(u);I&&(s[u]=cG(wy({shared:s.shared},g[u]),I))}return s}(e,t)}},{key:"clean",value:function(){this._targetEventStore.clean();var e,t=E(this.gestures);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.gestureEventStores[n].clean(),this.gestureTimeoutStores[n].clean()}}catch(i){t.e(i)}finally{t.f()}}},{key:"effect",value:function(){var e=this;return this.config.shared.target&&this.bind(),function(){return e._targetEventStore.clean()}}},{key:"bind",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r,a=this.config.shared,o={};if(!a.target||(r=a.target())){if(a.enabled){var l,g=E(this.gestures);try{for(g.s();!(l=g.n()).done;){var s=l.value,c=this.config[s],u=hG(o,c.eventOptions,!!r);if(c.enabled){var I=rG.get(s);new I(this,n,s).bind(u)}}}catch(y){g.e(y)}finally{g.f()}var d=hG(o,a.eventOptions,!!r),C=function(t){d(t,"",(function(i){return e.nativeHandlers[t](wy(wy({},e.state.shared),{},{event:i,args:n}))}),void 0,!0)};for(var h in this.nativeHandlers)C(h)}for(var A in o)o[A]=Ly.apply(void 0,O(o[A]));if(!r)return o;for(var p in o){var m=ky(p),f=m.device,v=m.capture,b=m.passive;this._targetEventStore.add(r,f,"",o[p],{capture:v,passive:b})}}}}]),e}();function CG(e,t){e.gestures.add(t),e.gestureEventStores[t]=new uG(e,t),e.gestureTimeoutStores[t]=new IG}var hG=function(e,t,n){return function(i,r,a){var o,l,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=null!==(o=g.capture)&&void 0!==o?o:t.capture,u=null!==(l=g.passive)&&void 0!==l?l:t.passive,I=s?i:Ry(i,r,c);n&&u&&(I+="Passive"),e[I]=e[I]||[],e[I].push(a)}};function AG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=i.useMemo((function(){return new dG(e)}),[]);if(a.applyHandlers(e,r),a.applyConfig(t,n),i.useEffect(a.effect.bind(a)),i.useEffect((function(){return a.clean.bind(a)}),[]),void 0===t.target)return a.bind.bind(a)}function pG(e,t){var n;return n=oG,rG.set(n.key,n.engine),aG.set(n.key,n.resolver),AG({drag:e},t||{},"drag")}var mG=r["useId".toString()]||function(){},fG=0;var vG,bG=["asChild"],yG=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce((function(e,t){return T(T({},e),{},L({},t,i.forwardRef((function(e,n){var r=e.asChild,a=j(e,bG),o=r?Mv:t;return i.useEffect((function(){window[Symbol.for("radix-ui")]=!0}),[]),e.as&&console.error(GG),i.createElement(o,u({},a,{ref:n}))}))))}),{}),GG="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element",BG=i.forwardRef((function(e,t){return i.createElement(yG.span,u({},e,{ref:t,style:T(T({},e.style),{},{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"})}))})),ZG=BG,wG=["asChild"],xG=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce((function(e,t){return T(T({},e),{},L({},t,i.forwardRef((function(e,n){var r=e.asChild,a=j(e,wG),o=r?Mv:t;return i.useEffect((function(){window[Symbol.for("radix-ui")]=!0}),[]),e.as&&console.error(SG),i.createElement(o,u({},a,{ref:n}))}))))}),{}),SG="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element",WG=["containerRef","style"],VG=i.forwardRef((function(e,t){var n,r,a=e.containerRef,o=e.style,l=j(e,WG),g=null!==(n=null==a?void 0:a.current)&&void 0!==n?n:null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body,s=c(i.useState({}),2)[1];return Jv((function(){s({})}),[]),g?Uv.createPortal(i.createElement(xG.div,u({"data-radix-portal":""},l,{ref:t,style:g===document.body?T({position:"absolute",top:0,left:0,zIndex:2147483647},o):void 0})),g):null})),RG=["asChild"],qG=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce((function(e,t){return T(T({},e),{},L({},t,i.forwardRef((function(e,n){var r=e.asChild,a=j(e,RG),o=r?Mv:t;return i.useEffect((function(){window[Symbol.for("radix-ui")]=!0}),[]),e.as&&console.error(kG),i.createElement(o,u({},a,{ref:n}))}))))}),{}),kG="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element",XG=["children","width","height"],YG=i.forwardRef((function(e,t){var n=e.children,r=e.width,a=void 0===r?10:r,o=e.height,l=void 0===o?5:o,g=j(e,XG);return i.createElement(qG.svg,u({},g,{ref:t,width:a,height:l,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),e.asChild?n:i.createElement("polygon",{points:"0,0 30,0 15,10"}))})),NG=YG,KG=["asChild"],HG=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce((function(e,t){return T(T({},e),{},L({},t,i.forwardRef((function(e,n){var r=e.asChild,a=j(e,KG),o=r?Mv:t;return i.useEffect((function(){window[Symbol.for("radix-ui")]=!0}),[]),e.as&&console.error(zG),i.createElement(o,u({},a,{ref:n}))}))))}),{}),zG="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element";function MG(e){var t=c(i.useState(void 0),2),n=t[0],r=t[1];return i.useEffect((function(){if(e){var t=new ResizeObserver((function(t){if(Array.isArray(t)&&t.length){var n,i,a=t[0];if("borderBoxSize"in a){var o=a.borderBoxSize,l=Array.isArray(o)?o[0]:o;n=l.inlineSize,i=l.blockSize}else{var g=e.getBoundingClientRect();n=g.width,i=g.height}r({width:n,height:i})}}));return t.observe(e,{box:"border-box"}),function(){r(void 0),t.unobserve(e)}}}),[e]),n}var FG=new Map;function LG(){var e=[];FG.forEach((function(t,n){var i,r,a=n.getBoundingClientRect();r=a,((i=t.rect).width!==r.width||i.height!==r.height||i.top!==r.top||i.right!==r.right||i.bottom!==r.bottom||i.left!==r.left)&&(t.rect=a,e.push(t))})),e.forEach((function(e){e.callbacks.forEach((function(t){return t(e.rect)}))})),vG=requestAnimationFrame(LG)}function _G(e){var t=c(i.useState(),2),n=t[0],r=t[1];return i.useEffect((function(){if(e){var t=function(e,t){var n=FG.get(e);return void 0===n?(FG.set(e,{rect:{},callbacks:[t]}),1===FG.size&&(vG=requestAnimationFrame(LG))):(n.callbacks.push(t),t(e.getBoundingClientRect())),function(){var n=FG.get(e);if(void 0!==n){var i=n.callbacks.indexOf(t);i>-1&&n.callbacks.splice(i,1),0===n.callbacks.length&&(FG.delete(e),0===FG.size&&cancelAnimationFrame(vG))}}}(e,r);return function(){r(void 0),t()}}}),[e]),n}var TG=["scope","children"];function EG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=function(){var t=n.map((function(e){return i.createContext(e)}));return function(n){var r=(null==n?void 0:n[e])||t;return i.useMemo((function(){return L({},"__scope".concat(e),T(T({},n),{},L({},e,r)))}),[n,r])}};return r.scopeName=e,[function(t,r){var a=i.createContext(r),o=n.length;function l(t){var n=t.scope,r=t.children,l=j(t,TG),g=(null==n?void 0:n[e][o])||a,s=i.useMemo((function(){return l}),Object.values(l));return i.createElement(g.Provider,{value:s},r)}return n=[].concat(O(n),[r]),l.displayName=t+"Provider",[l,function(n,l){var g=(null==l?void 0:l[e][o])||a,s=i.useContext(g);if(s)return s;if(void 0!==r)return r;throw new Error("`".concat(n,"` must be used within `").concat(t,"`"))}]},JG.apply(void 0,[r].concat(O(t)))]}function JG(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if(1===t.length)return r;var a=function(){var e=t.map((function(e){return{useScope:e(),scopeName:e.scopeName}}));return function(t){var n=e.reduce((function(e,n){var i=n.useScope,r=n.scopeName;return T(T({},e),i(t)["__scope".concat(r)])}),{});return i.useMemo((function(){return L({},"__scope".concat(r.scopeName),n)}),[n])}};return a.scopeName=r.scopeName,a}function UG(e,t,n){var i=e["x"===n?"left":"top"],r="x"===n?"width":"height",a=e[r],o=t[r];return{before:i-o,start:i,center:i+(a-o)/2,end:i+a-o,after:i+a}}function DG(e){return{position:"absolute",top:0,left:0,minWidth:"max-content",willChange:"transform",transform:"translate3d(".concat(Math.round(e.x+window.scrollX),"px, ").concat(Math.round(e.y+window.scrollY),"px, 0)")}}function PG(e,t,n,i,r){var a="top"===t||"bottom"===t,o=r?r.width:0,l=r?r.height:0,g=o/2+i,s="",c="";return a?(s={start:"".concat(g,"px"),center:"center",end:e.width-g+"px"}[n],c="top"===t?"".concat(e.height+l,"px"):-l+"px"):(s="left"===t?"".concat(e.width+l,"px"):-l+"px",c={start:"".concat(g,"px"),center:"center",end:e.height-g+"px"}[n]),"".concat(s," ").concat(c)}var OG={position:"fixed",top:0,left:0,opacity:0,transform:"translate3d(0, -200%, 0)"},QG={position:"absolute",opacity:0};function jG(e){var t,n=e.popperSize,i=e.arrowSize,r=e.arrowOffset,a=e.side,o=e.align,l=(n.width-i.width)/2,g=(n.height-i.width)/2,s={top:0,right:90,bottom:180,left:-90}[a],c=Math.max(i.width,i.height),u=(L(t={width:"".concat(c,"px"),height:"".concat(c,"px"),transform:"rotate(".concat(s,"deg)"),willChange:"transform",position:"absolute"},a,"100%"),L(t,"direction",function(e,t){return("top"!==e&&"right"!==e||"end"!==t)&&("bottom"!==e&&"left"!==e||"end"===t)?"ltr":"rtl"}(a,o)),t);return"top"!==a&&"bottom"!==a||("start"===o&&(u.left="".concat(r,"px")),"center"===o&&(u.left="".concat(l,"px")),"end"===o&&(u.right="".concat(r,"px"))),"left"!==a&&"right"!==a||("start"===o&&(u.top="".concat(r,"px")),"center"===o&&(u.top="".concat(g,"px")),"end"===o&&(u.bottom="".concat(r,"px"))),u}function $G(e){return{top:"bottom",right:"left",bottom:"top",left:"right"}[e]}function eB(e,t){return{top:e.top<t.top,right:e.right>t.right,bottom:e.bottom>t.bottom,left:e.left<t.left}}var tB=["__scopePopper","virtualRef"],nB=["__scopePopper","side","sideOffset","align","alignOffset","collisionTolerance","avoidCollisions"],iB=["__scopePopper","offset"],rB=c(EG("Popper"),2),aB=rB[0],oB=rB[1],lB=c(aB("Popper"),2),gB=lB[0],sB=lB[1],cB=i.forwardRef((function(e,t){var n=e.__scopePopper,r=e.virtualRef,a=j(e,tB),o=sB("PopperAnchor",n),l=i.useRef(null),g=Kv(t,l);return i.useEffect((function(){o.onAnchorChange((null==r?void 0:r.current)||l.current)})),r?null:i.createElement(HG.div,u({},a,{ref:g}))})),uB=c(aB("PopperContent"),2),IB=uB[0],dB=uB[1],CB=i.forwardRef((function(e,t){var n=e.__scopePopper,r=e.side,a=void 0===r?"bottom":r,o=e.sideOffset,l=e.align,g=void 0===l?"center":l,s=e.alignOffset,I=e.collisionTolerance,d=e.avoidCollisions,C=void 0===d||d,h=j(e,nB),A=sB("PopperContent",n),p=c(i.useState(),2),m=p[0],f=p[1],v=_G(A.anchor),b=c(i.useState(null),2),y=b[0],G=b[1],B=MG(y),Z=c(i.useState(null),2),w=Z[0],x=Z[1],S=MG(w),W=Kv(t,(function(e){return G(e)})),V=function(){var e=c(i.useState(void 0),2),t=e[0],n=e[1];return i.useEffect((function(){var e;function t(){n({width:window.innerWidth,height:window.innerHeight})}function i(){window.clearTimeout(e),e=window.setTimeout(t,100)}return t(),window.addEventListener("resize",i),function(){return window.removeEventListener("resize",i)}}),[]),t}(),R=function(e){var t=e.anchorRect,n=e.popperSize,i=e.arrowSize,r=e.arrowOffset,a=void 0===r?0:r,o=e.side,l=e.sideOffset,g=void 0===l?0:l,s=e.align,c=e.alignOffset,u=void 0===c?0:c,I=e.shouldAvoidCollisions,d=void 0===I||I,C=e.collisionBoundariesRect,h=e.collisionTolerance,A=void 0===h?0:h;if(!t||!n||!C)return{popperStyles:OG,arrowStyles:QG};var p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0,a=r?r.height:0,o=UG(t,e,"x"),l=UG(t,e,"y"),g=l.before-n-a,s=l.after+n+a,c=o.before-n-a,u=o.after+n+a;return{top:{start:{x:o.start+i,y:g},center:{x:o.center,y:g},end:{x:o.end-i,y:g}},right:{start:{x:u,y:l.start+i},center:{x:u,y:l.center},end:{x:u,y:l.end-i}},bottom:{start:{x:o.start+i,y:s},center:{x:o.center,y:s},end:{x:o.end-i,y:s}},left:{start:{x:c,y:l.start+i},center:{x:c,y:l.center},end:{x:c,y:l.end-i}}}}(n,t,g,u,i),m=p[o][s];if(!1===d){var f=DG(m),v=QG;return i&&(v=jG({popperSize:n,arrowSize:i,arrowOffset:a,side:o,align:s})),{popperStyles:T(T({},f),{},{"--radix-popper-transform-origin":PG(n,o,s,a,i)}),arrowStyles:v,placedSide:o,placedAlign:s}}var b,y,G=DOMRect.fromRect(T(T({},n),m)),B=(b=C,y=A,DOMRect.fromRect({width:b.width-2*y,height:b.height-2*y,x:b.left+y,y:b.top+y})),Z=eB(G,B),w=p[$G(o)][s],x=function(e,t,n){var i=$G(e);return t[e]&&!n[i]?i:e}(o,Z,eB(DOMRect.fromRect(T(T({},n),w)),B)),S=function(e,t,n,i,r){var a="top"===n||"bottom"===n,o=a?"left":"top",l=a?"right":"bottom",g=a?"width":"height",s=t[g]>e[g];return"start"!==i&&"center"!==i||!(r[o]&&s||r[l]&&!s)?"end"!==i&&"center"!==i||!(r[l]&&s||r[o]&&!s)?i:"start":"end"}(n,t,o,s,Z),W=DG(p[x][S]),V=QG;return i&&(V=jG({popperSize:n,arrowSize:i,arrowOffset:a,side:x,align:S})),{popperStyles:T(T({},W),{},{"--radix-popper-transform-origin":PG(n,x,S,a,i)}),arrowStyles:V,placedSide:x,placedAlign:S}}({anchorRect:v,popperSize:B,arrowSize:S,arrowOffset:m,side:a,sideOffset:o,align:g,alignOffset:s,shouldAvoidCollisions:C,collisionBoundariesRect:V?DOMRect.fromRect(T(T({},V),{},{x:0,y:0})):void 0,collisionTolerance:I}),q=R.popperStyles,k=R.arrowStyles,X=R.placedSide,Y=R.placedAlign,N=void 0!==X;return i.createElement("div",{style:q,"data-radix-popper-content-wrapper":""},i.createElement(IB,{scope:n,arrowStyles:k,onArrowChange:x,onArrowOffsetChange:f},i.createElement(HG.div,u({"data-side":X,"data-align":Y},h,{style:T(T({},h.style),{},{animation:N?void 0:"none"}),ref:W}))))})),hB=i.forwardRef((function(e,t){var n=e.__scopePopper,r=e.offset,a=j(e,iB),o=dB("PopperArrow",n),l=o.onArrowOffsetChange;return i.useEffect((function(){return l(r)}),[l,r]),i.createElement("span",{style:T(T({},o.arrowStyles),{},{pointerEvents:"none"})},i.createElement("span",{ref:o.onArrowChange,style:{display:"inline-block",verticalAlign:"top",pointerEvents:"auto"}},i.createElement(NG,u({},a,{ref:t,style:T(T({},a.style),{},{display:"block"})}))))})),AB=function(e){var t=e.__scopePopper,n=e.children,r=c(i.useState(null),2),a=r[0],o=r[1];return i.createElement(gB,{scope:t,anchor:a,onAnchorChange:o},n)},pB=cB,mB=CB,fB=hB,vB=function(e){var t=e.present,n=e.children,r=function(e){var t=c(i.useState(),2),n=t[0],r=t[1],a=i.useRef({}),o=i.useRef(e),l=i.useRef("none"),g=function(e,t){return i.useReducer((function(e,n){var i=t[e][n];return null!=i?i:e}),e)}(e?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),s=c(g,2),u=s[0],I=s[1];return i.useEffect((function(){var e=bB(a.current);l.current="mounted"===u?e:"none"}),[u]),Jv((function(){var t=a.current,n=o.current;if(n!==e){var i=l.current,r=bB(t);if(e)I("MOUNT");else if("none"===r||"none"===(null==t?void 0:t.display))I("UNMOUNT");else{I(n&&i!==r?"ANIMATION_OUT":"UNMOUNT")}o.current=e}}),[e,I]),Jv((function(){if(n){var e=function(e){var t=bB(a.current).includes(e.animationName);e.target===n&&t&&I("ANIMATION_END")},t=function(e){e.target===n&&(l.current=bB(a.current))};return n.addEventListener("animationstart",t),n.addEventListener("animationcancel",e),n.addEventListener("animationend",e),function(){n.removeEventListener("animationstart",t),n.removeEventListener("animationcancel",e),n.removeEventListener("animationend",e)}}}),[n,I]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:i.useCallback((function(e){e&&(a.current=getComputedStyle(e)),r(e)}),[])}}(t),a="function"==typeof n?n({present:r.isPresent}):i.Children.only(n),o=Kv(r.ref,a.ref);return"function"==typeof n||r.isPresent?i.cloneElement(a,{ref:o}):null};function bB(e){return(null==e?void 0:e.animationName)||"none"}function yB(e){var t=i.useRef(e);return i.useEffect((function(){t.current=e}),[e]),t.current}function GB(e){var t=i.useRef(e);return i.useEffect((function(){t.current=e})),i.useMemo((function(){return function(){for(var e,n,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return null===(n=t.current)||void 0===n?void 0:(e=n).call.apply(e,[t].concat(r))}}),[])}function BB(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.checkForDefaultPrevented,r=void 0===i||i;return function(n){if(null==e||e(n),!1===r||!n.defaultPrevented)return null==t?void 0:t(n)}}vB.displayName="Presence";var ZB=["__scopeTooltip"],wB=["forceMount"],xB=["__scopeTooltip","children","aria-label","portalled"],SB=["__scopeTooltip"],WB=c(EG("Tooltip",[oB]),2),VB=WB[0],RB=(WB[1],oB()),qB=c(VB("TooltipProvider",{isOpenDelayed:!0,delayDuration:700,onOpen:function(){},onClose:function(){}}),2),kB=(qB[0],qB[1]),XB=c(VB("Tooltip"),2),YB=XB[0],NB=XB[1],KB=i.forwardRef((function(e,t){var n=e.__scopeTooltip,r=j(e,ZB),a=NB("TooltipTrigger",n),o=RB(n),l=Kv(t,a.onTriggerChange),g=i.useRef(!1),s=i.useCallback((function(){return g.current=!1}),[]);return i.useEffect((function(){return function(){return document.removeEventListener("mouseup",s)}}),[s]),i.createElement(pB,u({asChild:!0},o),i.createElement(xG.button,u({"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute},r,{ref:l,onMouseEnter:BB(e.onMouseEnter,a.onTriggerEnter),onMouseLeave:BB(e.onMouseLeave,a.onClose),onMouseDown:BB(e.onMouseDown,(function(){a.onClose(),g.current=!0,document.addEventListener("mouseup",s,{once:!0})})),onFocus:BB(e.onFocus,(function(){g.current||a.onOpen()})),onBlur:BB(e.onBlur,a.onClose),onClick:BB(e.onClick,a.onClose)})))})),HB=i.forwardRef((function(e,t){var n=e.forceMount,r=j(e,wB),a=NB("TooltipContent",e.__scopeTooltip);return i.createElement(vB,{present:n||a.open},i.createElement(zB,u({ref:t},r)))})),zB=i.forwardRef((function(e,t){var n=e.__scopeTooltip,r=e.children,a=e["aria-label"],o=e.portalled,l=void 0===o||o,g=j(e,xB),s=NB("TooltipContent",n),c=RB(n),I=l?VG:i.Fragment,d=s.onClose;return function(e){var t=GB(e);i.useEffect((function(){var e=function(e){"Escape"===e.key&&t(e)};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[t])}((function(){return d()})),i.useEffect((function(){return document.addEventListener("tooltip.open",d),function(){return document.removeEventListener("tooltip.open",d)}}),[d]),i.createElement(I,null,i.createElement(FB,{__scopeTooltip:n}),i.createElement(mB,u({"data-state":s.stateAttribute},c,g,{ref:t,style:T(T({},g.style),{},{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)"})}),i.createElement(Lv,null,r),i.createElement(ZG,{id:s.contentId,role:"tooltip"},a||r)))})),MB=i.forwardRef((function(e,t){var n=e.__scopeTooltip,r=j(e,SB),a=RB(n);return i.createElement(fB,u({},a,r,{ref:t}))}));function FB(e){var t=e.__scopeTooltip,n=NB("CheckTriggerMoved",t),r=_G(n.trigger),a=null==r?void 0:r.left,o=yB(a),l=null==r?void 0:r.top,g=yB(l),s=n.onClose;return i.useEffect((function(){(void 0!==o&&o!==a||void 0!==g&&g!==l)&&s()}),[s,o,g,a,l]),null}var LB,_B,TB,EB,JB,UB=function(e){var t=e.__scopeTooltip,n=e.children,r=e.open,a=e.defaultOpen,o=void 0!==a&&a,l=e.onOpenChange,g=e.delayDuration,s=kB("Tooltip",t),u=RB(t),I=c(i.useState(null),2),d=I[0],C=I[1],h=function(e){var t=c(i.useState(mG()),2),n=t[0],r=t[1];return Jv((function(){e||r((function(e){return null!=e?e:String(fG++)}))}),[e]),e||(n?"radix-".concat(n):"")}(),A=i.useRef(0),p=null!=g?g:s.delayDuration,m=i.useRef(!1),f=s.onOpen,v=s.onClose,b=function(e){var t=e.prop,n=e.defaultProp,r=e.onChange,a=void 0===r?function(){}:r,o=function(e){var t=e.defaultProp,n=e.onChange,r=i.useState(t),a=c(r,1)[0],o=i.useRef(a),l=GB(n);return i.useEffect((function(){o.current!==a&&(l(a),o.current=a)}),[a,o,l]),r}({defaultProp:n,onChange:a}),l=c(o,2),g=l[0],s=l[1],u=void 0!==t,I=u?t:g,d=GB(a);return[I,i.useCallback((function(e){if(u){var n="function"==typeof e?e(t):e;n!==t&&d(n)}else s(e)}),[u,t,s,d])]}({prop:r,defaultProp:o,onChange:function(e){e&&(document.dispatchEvent(new CustomEvent("tooltip.open")),f()),null==l||l(e)}}),y=c(b,2),G=y[0],B=void 0!==G&&G,Z=y[1],w=i.useMemo((function(){return B?m.current?"delayed-open":"instant-open":"closed"}),[B]),x=i.useCallback((function(){window.clearTimeout(A.current),m.current=!1,Z(!0)}),[Z]),S=i.useCallback((function(){window.clearTimeout(A.current),A.current=window.setTimeout((function(){m.current=!0,Z(!0)}),p)}),[p,Z]);return i.useEffect((function(){return function(){return window.clearTimeout(A.current)}}),[]),i.createElement(AB,u,i.createElement(YB,{scope:t,contentId:h,open:B,stateAttribute:w,trigger:d,onTriggerChange:C,onTriggerEnter:i.useCallback((function(){s.isOpenDelayed?S():x()}),[s.isOpenDelayed,S,x]),onOpen:i.useCallback(x,[x]),onClose:i.useCallback((function(){window.clearTimeout(A.current),Z(!1),v()}),[Z,v])},n))},DB=KB,PB=HB,OB=MB;function QB(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}!function(e){e[e.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",e[e.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",e[e.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",e[e.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",e[e.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",e[e.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",e[e.THEME_ERROR=6]="THEME_ERROR",e[e.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",e[e.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",e[e.EMPTY_KEY=9]="EMPTY_KEY"}(JB||(JB={}));var jB=(L(LB={},JB.UNSUPPORTED_INPUT,(function(e,t){return["An input with type `".concat(e,"` input was found at path `").concat(t,"` but it's not supported yet.")]})),L(LB,JB.NO_COMPONENT_FOR_TYPE,(function(e,t){return["Type `".concat(e,"` found at path `").concat(t,"` can't be displayed in panel because no component supports it yet.")]})),L(LB,JB.UNKNOWN_INPUT,(function(e,t){return["input at path `".concat(e,"` is not recognized."),t]})),L(LB,JB.DUPLICATE_KEYS,(function(e,t,n){return["Key `".concat(e,"` of path `").concat(t,"` already exists at path `").concat(n,"`. Even nested keys need to be unique. Rename one of the keys.")]})),L(LB,JB.ALREADY_REGISTERED_TYPE,(function(e){return["Type ".concat(e," has already been registered. You can't register a component with the same type.")]})),L(LB,JB.CLIPBOARD_ERROR,(function(e){return["Error copying the value",e]})),L(LB,JB.THEME_ERROR,(function(e,t){return["Error accessing the theme `".concat(e,".").concat(t,"` value.")]})),L(LB,JB.PATH_DOESNT_EXIST,(function(e){return["Error getting the value at path `".concat(e,"`. There is probably an error in your `render` function.")]})),L(LB,JB.PATH_DOESNT_EXIST,(function(e){return["Error accessing the value at path `".concat(e,"`")]})),L(LB,JB.INPUT_TYPE_OVERRIDE,(function(e,t,n){return["Input at path `".concat(e,"` already exists with type: `").concat(t,"`. Its type cannot be overridden with type `").concat(n,"`.")]})),L(LB,JB.EMPTY_KEY,(function(){return["Keys can not be empty, if you want to hide a label use whitespace."]})),LB);function $B(e,t){for(var n,i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];var o=jB[t].apply(jB,r),l=Q(o),g=l[0],s=l.slice(1);(n=console)[e].apply(n,["LEVA: "+g].concat(O(s)))}var eZ=$B.bind(null,"warn"),tZ=$B.bind(null,"log"),nZ=["value"],iZ=["schema"],rZ=["value"],aZ=[],oZ={};function lZ(e){var t,n=e.value,i=QB(e,nZ),r=E(aZ);try{for(r.s();!(t=r.n()).done;){var a=(0,t.value)(n,i);if(a)return a}}catch(o){r.e(o)}finally{r.f()}}function gZ(e,t){var n=t.schema,i=QB(t,iZ);e in oZ?eZ(JB.ALREADY_REGISTERED_TYPE,e):(aZ.push((function(t,i){return n(t,i)&&e})),oZ[e]=i)}function sZ(e,t,n,i){var r=oZ[e].normalize;return r?r(t,n,i):"object"===typeof t&&"value"in t?{value:t.value,settings:QB(t,rZ)}:{value:t}}function cZ(e,t,n){var i=oZ[e].format;return i?i(t,n):t}function uZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IZ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function dZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?IZ(Object(n),!0).forEach((function(t){uZ(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IZ(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var CZ=function(e,t,n){return e>n?n:e<t?t:e},hZ=function(e){if(""===e||"number"===typeof e)return e;try{var t=wZ(e);if(!isNaN(t))return t}catch(n){}return parseFloat(e)},AZ=Math.log(10);function pZ(e){var t=Math.abs(+String(e).replace(".",""));if(0===t)return.01;for(;0!==t&&t%10===0;)t/=10;var n=Math.floor(Math.log(t)/AZ)+1,i=Math.floor(Math.log10(Math.abs(e))),r=Math.pow(10,i-n);return Math.max(r,.001)}var mZ=function(e,t,n){return n===t?0:(CZ(e,t,n)-t)/(n-t)},fZ=function(e,t,n){return e*(n-t)+t},vZ=/\(([0-9+\-*/^ .]+)\)/,bZ=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,yZ=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,GZ=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,BZ=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,ZZ=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function wZ(e){if(isNaN(Number(e))){if(vZ.test(e)){var t=e.replace(vZ,(function(e,t){return String(wZ(t))}));return wZ(t)}if(bZ.test(e))return wZ(e.replace(bZ,(function(e,t,n){return String(Math.pow(Number(t),Number(n)))})));if(yZ.test(e)){var n=e.replace(yZ,(function(e,t,n){return String(Number(t)*Number(n))}));return wZ(n)}if(GZ.test(e)){var i=e.replace(GZ,(function(e,t,n){if(0!=n)return String(Number(t)/Number(n));throw new Error("Division by zero")}));return wZ(i)}if(BZ.test(e)){var r=e.replace(BZ,(function(e,t,n){return String(Number(t)+Number(n))}));return wZ(r)}if(ZZ.test(e)){var a=e.replace(ZZ,(function(e,t,n){return String(Number(t)-Number(n))}));return wZ(a)}return Number(e)}return Number(e)}function xZ(e){return"[object Object]"===Object.prototype.toString.call(e)}var SZ,WZ,VZ=function(e){return xZ(e)&&0===Object.keys(e).length};!function(e){e.BUTTON="BUTTON",e.BUTTON_GROUP="BUTTON_GROUP",e.MONITOR="MONITOR",e.FOLDER="FOLDER"}(SZ||(SZ={})),function(e){e.SELECT="SELECT",e.IMAGE="IMAGE",e.NUMBER="NUMBER",e.COLOR="COLOR",e.STRING="STRING",e.BOOLEAN="BOOLEAN",e.INTERVAL="INTERVAL",e.VECTOR3D="VECTOR3D",e.VECTOR2D="VECTOR2D"}(WZ||(WZ={}));var RZ=["type","__customInput"],qZ=["render","label","optional","disabled","hint","onChange","onEditStart","onEditEnd","transient"],kZ=["type"];function XZ(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;if("object"!==typeof e||Array.isArray(e))return{type:a,input:e,options:dZ({key:t,label:t,optional:!1,disabled:!1},r)};if("__customInput"in e){var o=e.type,l=e.__customInput,g=QB(e,RZ);return XZ(l,t,g,o)}var s=e.render,c=e.label,u=e.optional,I=e.disabled,d=e.hint,C=e.onChange,h=e.onEditStart,A=e.onEditEnd,p=e.transient,m=QB(e,qZ),f=dZ({render:s,key:t,label:null!==c&&void 0!==c?c:t,hint:d,transient:null!==p&&void 0!==p?p:!!C,onEditStart:h,onEditEnd:A,disabled:I,optional:u},r),v=m.type,b=QB(m,kZ);return(v=null!==a&&void 0!==a?a:v)in SZ?{type:v,input:b,options:f}:{type:v,input:a&&xZ(b)&&"value"in b?b.value:VZ(b)?void 0:b,options:dZ(dZ({},f),{},{onChange:C,optional:null!==(n=f.optional)&&void 0!==n&&n,disabled:null!==(i=f.disabled)&&void 0!==i&&i})}}function YZ(e,t,n,i){var r=XZ(e,t),a=r.type,o=r.input,l=r.options;if(a)return a in SZ?r:{type:a,input:sZ(a,o,n,i),options:l};var g=lZ(o);return g?{type:g,input:sZ(g,o,n,i),options:l}:!!(g=lZ({value:o}))&&{type:g,input:sZ(g,{value:o},n,i),options:l}}function NZ(e,t,n,i,r){var a=e.value,o=e.type,l=e.settings;e.value=HZ({type:o,value:a,settings:l},t,n,i),e.fromPanel=r}var KZ=function(e,t,n){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=t,this.error=n};function HZ(e,t,n,i){var r,a=e.type,o=e.value,l=e.settings,g="SELECT"!==a&&"function"===typeof t?t(o):t;try{r=function(e,t,n,i,r,a){var o=oZ[e].sanitize;return o?o(t,n,i,r,a):t}(a,g,l,o,n,i)}catch(s){throw new KZ("The value `".concat(t,"` did not result in a correct value."),o,s)}if(jv(r,o))throw new KZ("The value `".concat(t,"` did not result in a value update, which remained the same: `").concat(o,"`.\n        You can ignore this warning if this is the intended behavior."),o);return r}var zZ=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=0;return function(){var r=this,a=arguments,o=n&&!i,l=function(){return e.apply(r,a)};window.clearTimeout(i),i=window.setTimeout(l,t),o&&l()}},MZ=function(e){return e.shiftKey?5:e.altKey?.2:1},FZ=["value"],LZ=["min","max"],_Z=function(e,t){var n=t.min,i=void 0===n?-1/0:n,r=t.max,a=void 0===r?1/0:r,o=t.suffix,l=parseFloat(e);if(""===e||isNaN(l))throw Error("Invalid number");var g=CZ(l,i,a);return o?g+o:g},TZ=function(e){var t=e.value,n=QB(e,FZ),i=n.min,r=void 0===i?-1/0:i,a=n.max,o=void 0===a?1/0:a,l=QB(n,LZ),g=parseFloat(t),s="string"===typeof t?t.substring((""+g).length):void 0;g=CZ(g,r,o);var c=n.step;c||(Number.isFinite(r)?c=Number.isFinite(o)?+(Math.abs(o-r)/100).toPrecision(1):+(Math.abs(g-r)/100).toPrecision(1):Number.isFinite(o)&&(c=+(Math.abs(o-g)/100).toPrecision(1)));var u=c?10*pZ(c):pZ(g);return{value:s?g+s:g,settings:dZ({initialValue:g,step:c=c||u/10,pad:Math.round(CZ(Math.log10(1/u),0,2)),min:r,max:o,suffix:s},l)}},EZ=function(e,t){var n=t.step,i=t.initialValue;return i+Math.round((e-i)/n)*n},JZ=Object.freeze({__proto__:null,schema:function(e){if("number"===typeof e)return!0;if("string"===typeof e){var t=parseFloat(e);return!isNaN(t)&&e.substring((""+t).length).trim().length<4}return!1},sanitize:_Z,format:function(e,t){var n=t.pad,i=void 0===n?0:n,r=t.suffix,a=parseFloat(e).toFixed(i);return r?a+r:a},normalize:TZ,sanitizeStep:EZ});function UZ(){return UZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},UZ.apply(this,arguments)}var DZ=(0,i.createContext)({});function PZ(){return(0,i.useContext)(DZ)}var OZ=(0,i.createContext)(null),QZ=(0,i.createContext)(null),jZ=(0,i.createContext)(null);function $Z(){return(0,i.useContext)(QZ)}function ew(e,t){var n=c(e.split(" "),2),i=n[0],r=n[1],a={};return"none"!==i&&(a.boxShadow="".concat(t.inset?"inset ":"","0 0 0 $borderWidths").concat([t.key]," $colors").concat("default"!==i&&i||t.borderColor)),r&&(a.backgroundColor=r),a}var tw={$inputStyle:function(){return function(e){return ew(e,{key:"$input",borderColor:"$highlight1",inset:!0})}},$focusStyle:function(){return function(e){return ew(e,{key:"$focus",borderColor:"$accent2"})}},$hoverStyle:function(){return function(e){return ew(e,{key:"$hover",borderColor:"$accent1",inset:!0})}},$activeStyle:function(){return function(e){return ew(e,{key:"$active",borderColor:"$accent1",inset:!0})}}},nw=Ay({prefix:"leva",theme:{colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}},utils:dZ(dZ({},tw),{},{$flex:function(){return{display:"flex",alignItems:"center"}},$flexCenter:function(){return{display:"flex",alignItems:"center",justifyContent:"center"}},$reset:function(){return{outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}},$draggable:function(){return{touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}},$focus:function(e){return{"&:focus":tw.$focusStyle()(e)}},$focusWithin:function(e){return{"&:focus-within":tw.$focusStyle()(e)}},$hover:function(e){return{"&:hover":tw.$hoverStyle()(e)}},$active:function(e){return{"&:active":tw.$activeStyle()(e)}}})}),iw=nw.styled,rw=(nw.css,nw.createTheme,nw.globalCss),aw=(nw.keyframes,rw({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}}));function ow(e,t){var n=(0,i.useContext)(OZ).theme;if(!(e in n)||!(t in n[e]))return eZ(JB.THEME_ERROR,e,t),"";for(var r=t;;){var a=n[e][r];if("string"!==typeof a||"$"!==a.charAt(0))return a;r=a.substr(1)}}var lw=iw("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),gw=iw("div",L({$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none"},"& + ".concat(lw),{paddingLeft:0})),sw=iw(gw,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),cw=iw("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),uw=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],Iw=["onUpdate"];function dw(e){var t=e.innerLabel,n=e.value,r=e.onUpdate,a=e.onChange,o=e.onKeyDown,l=e.type,g=e.id,s=e.inputType,c=void 0===s?"text":s,u=e.rows,I=void 0===u?0:u,d=QB(e,uw),C=PZ(),h=C.id,A=C.emitOnEditStart,p=C.emitOnEditEnd,m=C.disabled,f=g||h,v=(0,i.useRef)(null),b=I>0,y=b?"textarea":"input",G=(0,i.useCallback)((function(e){return function(t){var n=t.currentTarget.value;e(n)}}),[]);i.useEffect((function(){var e=v.current,t=G((function(e){r(e),p()}));return null===e||void 0===e||e.addEventListener("blur",t),function(){return null===e||void 0===e?void 0:e.removeEventListener("blur",t)}}),[G,r,p]);var B=(0,i.useCallback)((function(e){"Enter"===e.key&&G(r)(e)}),[G,r]),Z=Object.assign({as:y},b?{rows:I}:{},d);return i.createElement(cw,{textArea:b},t&&"string"===typeof t?i.createElement(gw,null,t):t,i.createElement(lw,UZ({levaType:l,ref:v,id:f,type:c,autoComplete:"off",spellCheck:"false",value:n,onChange:G(a),onFocus:function(){return A()},onKeyPress:B,onKeyDown:o,disabled:m},Z)))}function Cw(e){var t=e.onUpdate,n=QB(e,Iw),r=(0,i.useCallback)((function(e){return t(hZ(e))}),[t]),a=(0,i.useCallback)((function(e){var n="ArrowUp"===e.key?1:"ArrowDown"===e.key?-1:0;if(n){e.preventDefault();var i=e.altKey?.1:e.shiftKey?10:1;t((function(e){return parseFloat(e)+n*i}))}}),[t]);return i.createElement(dw,UZ({},n,{onUpdate:r,onKeyDown:a,type:"number"}))}var hw=iw("div",{}),Aw=iw("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),pw=iw("div",(L(_B={$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"}},"&:hover + ".concat(Aw,"::after"),{opacity:.6}),L(_B,"".concat(hw,":hover > & + ").concat(Aw,"::after"),{opacity:.6}),L(_B,"".concat(hw,":hover > & > svg"),{opacity:1}),_B)),mw=iw("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:L({"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"}},"> ".concat(hw,":not(:first-of-type)"),{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"})}}}),fw=iw("div",(L(TB={position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2"},"".concat(mw," > &"),{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}}),L(TB,"variants",{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}),TB)),vw=iw(fw,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),bw=iw("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),yw=iw("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),Gw=iw("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),Bw=iw("div",{opacity:1,variants:{disabled:{true:L({opacity:.6,pointerEvents:"none"},"& ".concat(Gw),{pointerEvents:"auto"})}}}),Zw=iw("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),ww=iw("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),xw=iw(OB,{fill:"$toolTipBackground"});function Sw(e){var t=e.children,n=(0,i.useContext)(OZ).className;return i.createElement(Ov,{className:n},t)}var Ww=["align"];function Vw(){var e=PZ(),t=e.id,n=e.disable,r=e.disabled;return i.createElement(i.Fragment,null,i.createElement(yw,{id:t+"__disable",type:"checkbox",checked:!r,onChange:function(){return n(!r)}}),i.createElement("label",{htmlFor:t+"__disable"}))}function Rw(e){var t=PZ(),n=t.id,r=t.optional,a=t.hint,o=e.htmlFor||(n?{htmlFor:n}:null),l=a||"string"!==typeof e.children?null:{title:e.children};return i.createElement(i.Fragment,null,r&&i.createElement(Vw,null),void 0!==a?i.createElement(UB,null,i.createElement(DB,{asChild:!0},i.createElement(Gw,UZ({},o,e))),i.createElement(PB,{side:"top",sideOffset:2},i.createElement(ww,null,a,i.createElement(xw,null)))):i.createElement(Gw,UZ({},o,l,e)))}function qw(e){var t=e.align,n=QB(e,Ww),r=PZ(),a=r.value,o=r.label,l=r.key,g=r.disabled,s=!(0,i.useContext)(jZ).hideCopyButton&&void 0!==l,u=c((0,i.useState)(!1),2),I=u[0],d=u[1],C=function(){var e=ce(de().mark((function e(){return de().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(JSON.stringify(L({},l,null!==a&&void 0!==a?a:"")));case 3:d(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),eZ(JB.CLIPBOARD_ERROR,L({},l,a));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return i.createElement(bw,{align:t,onPointerLeave:function(){return d(!1)}},i.createElement(Rw,n),s&&!g&&i.createElement("div",{title:"Click to copy ".concat("string"===typeof o?o:l," value")},I?i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},i.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),i.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):i.createElement("svg",{onClick:C,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},i.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),i.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}var kw=["toggled"],Xw=iw("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function Yw(e){var t=e.toggled,n=QB(e,kw);return i.createElement(Xw,UZ({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:"rotate(".concat(t?0:-90,"deg)")}},n),i.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}var Nw=["input"];function Kw(e){var t=e.input,n=QB(e,Nw);return t?i.createElement(vw,n):i.createElement(fw,n)}function Hw(e){var t=e.value,n=e.type,r=e.settings,a=e.setValue,o=c((0,i.useState)(cZ(n,t,r)),2),l=o[0],g=o[1],s=(0,i.useRef)(t),u=(0,i.useRef)(r);u.current=r;var I=(0,i.useCallback)((function(e){return g(cZ(n,e,u.current))}),[n]),d=(0,i.useCallback)((function(e){try{a(e)}catch(i){var t=i.type,n=i.previousValue;if("LEVA_ERROR"!==t)throw i;I(n)}}),[I,a]);return(0,i.useEffect)((function(){jv(t,s.current)||I(t),s.current=t}),[t,I]),{displayValue:l,onChange:g,onUpdate:d}}function zw(e,t){var n=PZ(),i=n.emitOnEditStart,r=n.emitOnEditEnd;return pG((function(t){t.first&&(document.body.classList.add("leva__panel__dragged"),null===i||void 0===i||i());var n=e(t);return t.last&&(document.body.classList.remove("leva__panel__dragged"),null===r||void 0===r||r()),n}),t)}function Mw(){var e=(0,i.useRef)(null),t=(0,i.useRef)({x:0,y:0}),n=(0,i.useCallback)((function(n){Object.assign(t.current,n),e.current&&(e.current.style.transform="translate3d(".concat(t.current.x,"px, ").concat(t.current.y,"px, 0)"))}),[]);return[e,n]}var Fw=["__refCount"],Lw=function(e,t){return e[t]?QB(e[t],Fw):null};var _w=iw("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),Tw=iw("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),Ew=iw("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),Jw=iw("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),Uw=iw("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function Dw(e){var t=e.value,n=e.min,r=e.max,a=e.onDrag,o=e.step,l=e.initialValue,g=(0,i.useRef)(null),s=(0,i.useRef)(null),u=(0,i.useRef)(0),I=ow("sizes","scrubberWidth"),d=zw((function(e){var i=e.event,d=e.first,C=c(e.xy,1)[0],h=c(e.movement,1)[0],A=e.memo;if(d){var p=g.current.getBoundingClientRect(),m=p.width,f=p.left;u.current=m-parseFloat(I),A=(null===i||void 0===i?void 0:i.target)===s.current?t:fZ((C-f)/m,n,r)}var v=A+fZ(h/u.current,0,r-n);return a(EZ(v,{step:o,initialValue:l})),A})),C=mZ(t,n,r);return i.createElement(Jw,UZ({ref:g},d()),i.createElement(Tw,null,i.createElement(Uw,{style:{left:0,right:"".concat(100*(1-C),"%")}})),i.createElement(Ew,{ref:s,style:{left:"calc(".concat(C," * (100% - ").concat(I,"))")}}))}var Pw=i.memo((function(e){var t=e.label,n=e.onUpdate,r=e.step,a=e.innerLabelTrim,o=c((0,i.useState)(!1),2),l=o[0],g=o[1],s=zw((function(e){var t=e.active,i=c(e.delta,1)[0],a=e.event,o=e.memo,l=void 0===o?0:o;return g(t),l+=i/2,Math.abs(l)>=1&&(n((function(e){return parseFloat(e)+Math.floor(l)*r*MZ(a)})),l=0),l}));return i.createElement(sw,UZ({dragging:l,title:t.length>1?t:""},s()),t.slice(0,a))}));function Ow(e){var t=e.label,n=e.id,r=e.displayValue,a=e.onUpdate,o=e.onChange,l=e.settings,g=e.innerLabelTrim,s=void 0===g?1:g,c=s>0&&i.createElement(Pw,{label:t,step:l.step,onUpdate:a,innerLabelTrim:s});return i.createElement(Cw,{id:n,value:String(r),onUpdate:a,onChange:o,innerLabel:c})}var Qw=JZ.sanitizeStep,jw=dZ({component:function(){var e=PZ(),t=e.label,n=e.value,r=e.onUpdate,a=e.settings,o=e.id,l=a.min,g=a.max!==1/0&&l!==-1/0;return i.createElement(Kw,{input:!0},i.createElement(qw,null,t),i.createElement(_w,{hasRange:g},g&&i.createElement(Dw,UZ({value:parseFloat(n),onDrag:r},a)),i.createElement(Ow,UZ({},e,{id:o,label:"value",innerLabelTrim:g?0:1}))))}},QB(JZ,["sanitizeStep"])),$w=Object.freeze({__proto__:null,schema:function(e,t){return fb().schema({options:fb().passesAnyOf(fb().object(),fb().array())}).test(t)},sanitize:function(e,t){if(t.values.indexOf(e)<0)throw Error("Selected value doesn't match Select options");return e},format:function(e,t){return t.values.indexOf(e)},normalize:function(e){var t,n,i=e.value,r=e.options;return Array.isArray(r)?(n=r,t=r.map((function(e){return String(e)}))):(n=Object.values(r),t=Object.keys(r)),"value"in e?n.includes(i)||(t.unshift(String(i)),n.unshift(i)):i=n[0],Object.values(r).includes(i)||(r[String(i)]=i),{value:i,settings:{keys:t,values:n}}}}),ex=iw("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),tx=iw("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),nx=iw("div",(L(EB={display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer"},"".concat(tx,":focus + &"),{$focusStyle:""}),L(EB,"".concat(tx,":hover + &"),{$hoverStyle:""}),EB));function ix(e){var t=e.displayValue,n=e.value,r=e.onUpdate,a=e.id,o=e.settings,l=e.disabled,g=o.keys,s=o.values,c=(0,i.useRef)();return n===s[t]&&(c.current=g[t]),i.createElement(ex,null,i.createElement(tx,{id:a,value:t,onChange:function(e){return r(s[Number(e.currentTarget.value)])},disabled:l},g.map((function(e,t){return i.createElement("option",{key:e,value:t},e)}))),i.createElement(nx,null,c.current),i.createElement(Yw,{toggled:!0}))}var rx=dZ({component:function(){var e=PZ(),t=e.label,n=e.value,r=e.displayValue,a=e.onUpdate,o=e.id,l=e.disabled,g=e.settings;return i.createElement(Kw,{input:!0},i.createElement(qw,null,t),i.createElement(ix,{id:o,value:n,displayValue:r,onUpdate:a,settings:g,disabled:l}))}},$w),ax=Object.freeze({__proto__:null,schema:function(e){return fb().string().test(e)},sanitize:function(e){if("string"!==typeof e)throw Error("Invalid string");return e},normalize:function(e){var t=e.value,n=e.editable,i=void 0===n||n,r=e.rows,a=void 0!==r&&r;return{value:t,settings:{editable:i,rows:"number"===typeof a?a:a?5:0}}}}),ox=["displayValue","onUpdate","onChange","editable"],lx=iw("div",{whiteSpace:"pre-wrap"});function gx(e){var t=e.displayValue,n=e.onUpdate,r=e.onChange,a=e.editable,o=void 0===a||a,l=QB(e,ox);return o?i.createElement(dw,UZ({value:t,onUpdate:n,onChange:r},l)):i.createElement(lx,null,t)}var sx=dZ({component:function(){var e=PZ(),t=e.label,n=e.settings,r=e.displayValue,a=e.onUpdate,o=e.onChange;return i.createElement(Kw,{input:!0},i.createElement(qw,null,t),i.createElement(gx,UZ({displayValue:r,onUpdate:a,onChange:o},n)))}},ax),cx=Object.freeze({__proto__:null,schema:function(e){return fb().boolean().test(e)},sanitize:function(e){if("boolean"!==typeof e)throw Error("Invalid boolean");return e}}),ux=iw("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function Ix(e){var t=e.value,n=e.onUpdate,r=e.id,a=e.disabled;return i.createElement(ux,null,i.createElement("input",{id:r,type:"checkbox",checked:t,onChange:function(e){return n(e.currentTarget.checked)},disabled:a}),i.createElement("label",{htmlFor:r},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}var dx=dZ({component:function(){var e=PZ(),t=e.label,n=e.value,r=e.onUpdate,a=e.disabled,o=e.id;return i.createElement(Kw,{input:!0},i.createElement(qw,null,t),i.createElement(Ix,{value:n,onUpdate:r,id:o,disabled:a}))}},cx),Cx=["locked"];function hx(e){var t=e.value,n=e.id,r=e.valueKey,a=e.settings,o=e.onUpdate,l=e.innerLabelTrim,g=(0,i.useRef)(t[r]);g.current=t[r];var s=(0,i.useCallback)((function(e){return o(L({},r,HZ({type:"NUMBER",value:g.current,settings:a},e)))}),[o,a,r]),c=Hw({type:"NUMBER",value:t[r],settings:a,setValue:s});return i.createElement(Ow,{id:n,label:r,value:t[r],displayValue:c.displayValue,onUpdate:c.onUpdate,onChange:c.onChange,settings:a,innerLabelTrim:l})}var Ax=iw("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function px(e){var t=e.locked,n=QB(e,Cx);return i.createElement("svg",UZ({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),t?i.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):i.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function mx(e){var t=e.value,n=e.onUpdate,r=e.settings,a=e.innerLabelTrim,o=PZ(),l=o.id,g=o.setSettings,s=r.lock,c=r.locked;return i.createElement(Ax,{withLock:s},s&&i.createElement(px,{locked:c,onClick:function(){return g({locked:!c})}}),Object.keys(t).map((function(e,o){return i.createElement(hx,{id:0===o?l:"".concat(l,".").concat(e),key:e,valueKey:e,value:t,settings:r[e],onUpdate:n,innerLabelTrim:a})})))}var fx=function(e,t){var n={},i=0,r=1/0;for(var a in Object.entries(e).forEach((function(e){var a=c(e,2),o=a[0],l=a[1];n[o]=TZ(dZ({value:l},t[o])).settings,i=Math.max(i,n[o].step),r=Math.min(r,n[o].pad)})),n){var o=t[a]||{},l=o.step,g=o.min,s=o.max;isFinite(l)||isFinite(g)&&isFinite(s)||(n[a].step=i,n[a].pad=r)}return n},vx=["lock"],bx=["value"];function yx(e){var t=fb().array().length(e).every.number();return function(n){return t.test(n)||function(t){if(!t||"object"!==typeof t)return!1;var n=Object.values(t);return n.length===e&&n.every((function(e){return isFinite(e)}))}(n)}}function Gx(e,t,n){return function(e){return Array.isArray(e)?"array":"object"}(e)===t?e:"array"===t?Object.values(e):function(e,t){return e.reduce((function(e,n,i){return Object.assign(e,L({},t[i],n))}),{})}(e,n)}var Bx=function(e){return!!e&&("step"in e||"min"in e||"max"in e)};function Zx(e){return{schema:yx(e.length),normalize:function(t){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=t.lock,r=void 0!==i&&i,a=QB(t,vx),o=Array.isArray(e)?"array":"object",l="object"===o?Object.keys(e):n,g=Gx(e,"object",l),s=Bx(a)?l.reduce((function(e,t){return Object.assign(e,L({},t,a))}),{}):a,c=fx(g,s);return{value:"array"===o?e:g,settings:dZ(dZ({},c),{},{format:o,keys:l,lock:r,locked:!1})}}(t.value,QB(t,bx),e)},format:function(e,t){return function(e,t){return Gx(e,"object",t.keys)}(e,t)},sanitize:function(e,t,n){return function(e,t,n){var i=Gx(e,"object",t.keys);for(var r in i)i[r]=_Z(i[r],t[r]);var a=Object.keys(i),o={};if(a.length===t.keys.length)o=i;else{var l=Gx(n,"object",t.keys);if(1===a.length&&t.locked){var g=a[0],s=i[g],c=l[g],u=0!==c?s/c:1;for(var I in l)I===g?o[g]=s:o[I]=l[I]*u}else o=dZ(dZ({},l),i)}return Gx(o,t.format,t.keys)}(e,t,n)}}}var wx={grad:.9,turn:360,rad:360/(2*Math.PI)},xx=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},Sx=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},Wx=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},Vx=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Rx=function(e){return{r:Wx(e.r,0,255),g:Wx(e.g,0,255),b:Wx(e.b,0,255),a:Wx(e.a)}},qx=function(e){return{r:Sx(e.r),g:Sx(e.g),b:Sx(e.b),a:Sx(e.a,3)}},kx=/^#([0-9a-f]{3,8})$/i,Xx=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Yx=function(e){var t=e.r,n=e.g,i=e.b,r=e.a,a=Math.max(t,n,i),o=a-Math.min(t,n,i),l=o?a===t?(n-i)/o:a===n?2+(i-t)/o:4+(t-n)/o:0;return{h:60*(l<0?l+6:l),s:a?o/a*100:0,v:a/255*100,a:r}},Nx=function(e){var t=e.h,n=e.s,i=e.v,r=e.a;t=t/360*6,n/=100,i/=100;var a=Math.floor(t),o=i*(1-n),l=i*(1-(t-a)*n),g=i*(1-(1-t+a)*n),s=a%6;return{r:255*[i,l,o,o,g,i][s],g:255*[g,i,i,l,o,o][s],b:255*[o,o,g,i,i,l][s],a:r}},Kx=function(e){return{h:Vx(e.h),s:Wx(e.s,0,100),l:Wx(e.l,0,100),a:Wx(e.a)}},Hx=function(e){return{h:Sx(e.h),s:Sx(e.s),l:Sx(e.l),a:Sx(e.a,3)}},zx=function(e){return Nx((n=(t=e).s,{h:t.h,s:(n*=((i=t.l)<50?i:100-i)/100)>0?2*n/(i+n)*100:0,v:i+n,a:t.a}));var t,n,i},Mx=function(e){return{h:(t=Yx(e)).h,s:(r=(200-(n=t.s))*(i=t.v)/100)>0&&r<200?n*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a};var t,n,i,r},Fx=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Lx=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_x=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Tx=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ex={string:[[function(e){var t=kx.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?Sx(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?Sx(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=_x.exec(e)||Tx.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Rx({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=Fx.exec(e)||Lx.exec(e);if(!t)return null;var n,i,r=Kx({h:(n=t[1],i=t[2],void 0===i&&(i="deg"),Number(n)*(wx[i]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return zx(r)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,i=e.b,r=e.a,a=void 0===r?1:r;return xx(t)&&xx(n)&&xx(i)?Rx({r:Number(t),g:Number(n),b:Number(i),a:Number(a)}):null},"rgb"],[function(e){var t=e.h,n=e.s,i=e.l,r=e.a,a=void 0===r?1:r;if(!xx(t)||!xx(n)||!xx(i))return null;var o=Kx({h:Number(t),s:Number(n),l:Number(i),a:Number(a)});return zx(o)},"hsl"],[function(e){var t=e.h,n=e.s,i=e.v,r=e.a,a=void 0===r?1:r;if(!xx(t)||!xx(n)||!xx(i))return null;var o=function(e){return{h:Vx(e.h),s:Wx(e.s,0,100),v:Wx(e.v,0,100),a:Wx(e.a)}}({h:Number(t),s:Number(n),v:Number(i),a:Number(a)});return Nx(o)},"hsv"]]},Jx=function(e,t){for(var n=0;n<t.length;n++){var i=t[n][0](e);if(i)return[i,t[n][1]]}return[null,void 0]},Ux=function(e){return"string"==typeof e?Jx(e.trim(),Ex.string):"object"==typeof e&&null!==e?Jx(e,Ex.object):[null,void 0]},Dx=function(e,t){var n=Mx(e);return{h:n.h,s:Wx(n.s+100*t,0,100),l:n.l,a:n.a}},Px=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},Ox=function(e,t){var n=Mx(e);return{h:n.h,s:n.s,l:Wx(n.l+100*t,0,100),a:n.a}},Qx=function(){function e(e){this.parsed=Ux(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return Sx(Px(this.rgba),2)},e.prototype.isDark=function(){return Px(this.rgba)<.5},e.prototype.isLight=function(){return Px(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=qx(this.rgba)).r,n=e.g,i=e.b,a=(r=e.a)<1?Xx(Sx(255*r)):"","#"+Xx(t)+Xx(n)+Xx(i)+a;var e,t,n,i,r,a},e.prototype.toRgb=function(){return qx(this.rgba)},e.prototype.toRgbString=function(){return t=(e=qx(this.rgba)).r,n=e.g,i=e.b,(r=e.a)<1?"rgba("+t+", "+n+", "+i+", "+r+")":"rgb("+t+", "+n+", "+i+")";var e,t,n,i,r},e.prototype.toHsl=function(){return Hx(Mx(this.rgba))},e.prototype.toHslString=function(){return t=(e=Hx(Mx(this.rgba))).h,n=e.s,i=e.l,(r=e.a)<1?"hsla("+t+", "+n+"%, "+i+"%, "+r+")":"hsl("+t+", "+n+"%, "+i+"%)";var e,t,n,i,r},e.prototype.toHsv=function(){return e=Yx(this.rgba),{h:Sx(e.h),s:Sx(e.s),v:Sx(e.v),a:Sx(e.a,3)};var e},e.prototype.invert=function(){return jx({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),jx(Dx(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),jx(Dx(this.rgba,-e))},e.prototype.grayscale=function(){return jx(Dx(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),jx(Ox(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),jx(Ox(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?jx({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Sx(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=Mx(this.rgba);return"number"==typeof e?jx({h:e,s:t.s,l:t.l,a:t.a}):Sx(t.h)},e.prototype.isEqual=function(e){return this.toHex()===jx(e).toHex()},e}(),jx=function(e){return e instanceof Qx?e:new Qx(e)},$x=[];function eS(){return(eS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function tS(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)t.indexOf(n=a[i])>=0||(r[n]=e[n]);return r}function nS(e){var t=(0,i.useRef)(e),n=(0,i.useRef)((function(e){t.current&&t.current(e)}));return t.current=e,n.current}var iS=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e<t?t:e},rS=function(e){return"touches"in e},aS=function(e){return e&&e.ownerDocument.defaultView||self},oS=function(e,t,n){var i=e.getBoundingClientRect(),r=rS(t)?function(e,t){for(var n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return e[0]}(t.touches,n):t;return{left:iS((r.pageX-(i.left+aS(e).pageXOffset))/i.width),top:iS((r.pageY-(i.top+aS(e).pageYOffset))/i.height)}},lS=function(e){!rS(e)&&e.preventDefault()},gS=i.memo((function(e){var t=e.onMove,n=e.onKey,r=tS(e,["onMove","onKey"]),a=(0,i.useRef)(null),o=nS(t),l=nS(n),g=(0,i.useRef)(null),s=(0,i.useRef)(!1),c=(0,i.useMemo)((function(){var e=function(e){lS(e),(rS(e)?e.touches.length>0:e.buttons>0)&&a.current?o(oS(a.current,e,g.current)):n(!1)},t=function(){return n(!1)};function n(n){var i=s.current,r=aS(a.current),o=n?r.addEventListener:r.removeEventListener;o(i?"touchmove":"mousemove",e),o(i?"touchend":"mouseup",t)}return[function(e){var t=e.nativeEvent,i=a.current;if(i&&(lS(t),!function(e,t){return t&&!rS(e)}(t,s.current)&&i)){if(rS(t)){s.current=!0;var r=t.changedTouches||[];r.length&&(g.current=r[0].identifier)}i.focus(),o(oS(i,t,g.current)),n(!0)}},function(e){var t=e.which||e.keyCode;t<37||t>40||(e.preventDefault(),l({left:39===t?.05:37===t?-.05:0,top:40===t?.05:38===t?-.05:0}))},n]}),[l,o]),u=c[0],I=c[1],d=c[2];return(0,i.useEffect)((function(){return d}),[d]),i.createElement("div",eS({},r,{onTouchStart:u,onMouseDown:u,className:"react-colorful__interactive",ref:a,onKeyDown:I,tabIndex:0,role:"slider"}))})),sS=function(e){return e.filter(Boolean).join(" ")},cS=function(e){var t=e.color,n=e.left,r=e.top,a=void 0===r?.5:r,o=sS(["react-colorful__pointer",e.className]);return i.createElement("div",{className:o,style:{top:100*a+"%",left:100*n+"%"}},i.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},uS=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n},IS=(Math.PI,function(e){var t=e.s,n=e.v,i=e.a,r=(200-t)*n/100;return{h:uS(e.h),s:uS(r>0&&r<200?t*n/100/(r<=100?r:200-r)*100:0),l:uS(r/2),a:uS(i,2)}}),dS=function(e){var t=IS(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},CS=function(e){var t=IS(e);return"hsla("+t.h+", "+t.s+"%, "+t.l+"%, "+t.a+")"},hS=function(e){var t=e.h,n=e.s,i=e.v,r=e.a;t=t/360*6,n/=100,i/=100;var a=Math.floor(t),o=i*(1-n),l=i*(1-(t-a)*n),g=i*(1-(1-t+a)*n),s=a%6;return{r:uS(255*[i,l,o,o,g,i][s]),g:uS(255*[g,i,i,l,o,o][s]),b:uS(255*[o,o,g,i,i,l][s]),a:uS(r,2)}},AS=function(e){var t=e.r,n=e.g,i=e.b,r=e.a,a=Math.max(t,n,i),o=a-Math.min(t,n,i),l=o?a===t?(n-i)/o:a===n?2+(i-t)/o:4+(t-n)/o:0;return{h:uS(60*(l<0?l+6:l)),s:uS(a?o/a*100:0),v:uS(a/255*100),a:r}},pS=i.memo((function(e){var t=e.hue,n=e.onChange,r=sS(["react-colorful__hue",e.className]);return i.createElement("div",{className:r},i.createElement(gS,{onMove:function(e){n({h:360*e.left})},onKey:function(e){n({h:iS(t+360*e.left,0,360)})},"aria-label":"Hue","aria-valuenow":uS(t),"aria-valuemax":"360","aria-valuemin":"0"},i.createElement(cS,{className:"react-colorful__hue-pointer",left:t/360,color:dS({h:t,s:100,v:100,a:1})})))})),mS=i.memo((function(e){var t=e.hsva,n=e.onChange,r={backgroundColor:dS({h:t.h,s:100,v:100,a:1})};return i.createElement("div",{className:"react-colorful__saturation",style:r},i.createElement(gS,{onMove:function(e){n({s:100*e.left,v:100-100*e.top})},onKey:function(e){n({s:iS(t.s+100*e.left,0,100),v:iS(t.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+uS(t.s)+"%, Brightness "+uS(t.v)+"%"},i.createElement(cS,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:dS(t)})))})),fS=function(e,t){if(e===t)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0};function vS(e,t,n){var r=nS(n),a=(0,i.useState)((function(){return e.toHsva(t)})),o=a[0],l=a[1],g=(0,i.useRef)({color:t,hsva:o});(0,i.useEffect)((function(){if(!e.equal(t,g.current.color)){var n=e.toHsva(t);g.current={hsva:n,color:t},l(n)}}),[t,e]),(0,i.useEffect)((function(){var t;fS(o,g.current.hsva)||e.equal(t=e.fromHsva(o),g.current.color)||(g.current={hsva:o,color:t},r(t))}),[o,e,r]);var s=(0,i.useCallback)((function(e){l((function(t){return Object.assign({},t,e)}))}),[]);return[o,s]}var bS,yS="undefined"!=typeof window?i.useLayoutEffect:i.useEffect,GS=new Map,BS=function(e){yS((function(){var t=e.current?e.current.ownerDocument:document;if(void 0!==t&&!GS.has(t)){var i=t.createElement("style");i.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',GS.set(t,i);var r=bS||n.nc;r&&i.setAttribute("nonce",r),t.head.appendChild(i)}}),[])},ZS=function(e){var t=e.className,n=e.colorModel,r=e.color,a=void 0===r?n.defaultColor:r,o=e.onChange,l=tS(e,["className","colorModel","color","onChange"]),g=(0,i.useRef)(null);BS(g);var s=vS(n,a,o),c=s[0],u=s[1],I=sS(["react-colorful",t]);return i.createElement("div",eS({},l,{ref:g,className:I}),i.createElement(mS,{hsva:c,onChange:u}),i.createElement(pS,{hue:c.h,onChange:u,className:"react-colorful__last-control"}))},wS=function(e){var t=e.className,n=e.hsva,r=e.onChange,a={backgroundImage:"linear-gradient(90deg, "+CS(Object.assign({},n,{a:0}))+", "+CS(Object.assign({},n,{a:1}))+")"},o=sS(["react-colorful__alpha",t]),l=uS(100*n.a);return i.createElement("div",{className:o},i.createElement("div",{className:"react-colorful__alpha-gradient",style:a}),i.createElement(gS,{onMove:function(e){r({a:e.left})},onKey:function(e){r({a:iS(n.a+e.left)})},"aria-label":"Alpha","aria-valuetext":l+"%","aria-valuenow":l,"aria-valuemin":"0","aria-valuemax":"100"},i.createElement(cS,{className:"react-colorful__alpha-pointer",left:n.a,color:CS(n)})))},xS=function(e){var t=e.className,n=e.colorModel,r=e.color,a=void 0===r?n.defaultColor:r,o=e.onChange,l=tS(e,["className","colorModel","color","onChange"]),g=(0,i.useRef)(null);BS(g);var s=vS(n,a,o),c=s[0],u=s[1],I=sS(["react-colorful",t]);return i.createElement("div",eS({},l,{ref:g,className:I}),i.createElement(mS,{hsva:c,onChange:u}),i.createElement(pS,{hue:c.h,onChange:u}),i.createElement(wS,{hsva:c,onChange:u,className:"react-colorful__last-control"}))},SS={defaultColor:{r:0,g:0,b:0,a:1},toHsva:AS,fromHsva:hS,equal:fS},WS=function(e){return i.createElement(xS,eS({},e,{colorModel:SS}))},VS={defaultColor:{r:0,g:0,b:0},toHsva:function(e){return AS({r:e.r,g:e.g,b:e.b,a:1})},fromHsva:function(e){return{r:(t=hS(e)).r,g:t.g,b:t.b};var t},equal:fS},RS=function(e){return i.createElement(ZS,eS({},e,{colorModel:VS}))},qS=n(2007),kS=n.n(qS);function XS(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{g(i.next(e))}catch(t){a(t)}}function l(e){try{g(i.throw(e))}catch(t){a(t)}}function g(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(o,l)}g((i=i.apply(e,t||[])).next())}))}function YS(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(l){a=[6,l],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}Object.create;function NS(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(l){r={error:l}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}Object.create;var KS=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function HS(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),i=KS.get(n);i&&Object.defineProperty(e,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!==typeof n.path){var i=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"===typeof t?t:"string"===typeof i&&i.length>0?i:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var zS=[".DS_Store","Thumbs.db"];function MS(e){return"object"===typeof e&&null!==e}function FS(e){return ES(e.target.files).map((function(e){return HS(e)}))}function LS(e){return XS(this,void 0,void 0,(function(){return YS(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return e.getFile()})))];case 1:return[2,t.sent().map((function(e){return HS(e)}))]}}))}))}function _S(e,t){return XS(this,void 0,void 0,(function(){var n;return YS(this,(function(i){switch(i.label){case 0:return null===e?[2,[]]:e.items?(n=ES(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(JS))]):[3,2];case 1:return[2,TS(US(i.sent()))];case 2:return[2,TS(ES(e.files).map((function(e){return HS(e)})))]}}))}))}function TS(e){return e.filter((function(e){return-1===zS.indexOf(e.name)}))}function ES(e){if(null===e)return[];for(var t=[],n=0;n<e.length;n++){var i=e[n];t.push(i)}return t}function JS(e){if("function"!==typeof e.webkitGetAsEntry)return DS(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?OS(t):DS(e)}function US(e){return e.reduce((function(e,t){return function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(NS(arguments[t]));return e}(e,Array.isArray(t)?US(t):[t])}),[])}function DS(e){var t=e.getAsFile();if(!t)return Promise.reject(e+" is not a File");var n=HS(t);return Promise.resolve(n)}function PS(e){return XS(this,void 0,void 0,(function(){return YS(this,(function(t){return[2,e.isDirectory?OS(e):QS(e)]}))}))}function OS(e){var t=e.createReader();return new Promise((function(e,n){var i=[];!function r(){var a=this;t.readEntries((function(t){return XS(a,void 0,void 0,(function(){var a,o,l;return YS(this,(function(g){switch(g.label){case 0:if(t.length)return[3,5];g.label=1;case 1:return g.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return a=g.sent(),e(a),[3,4];case 3:return o=g.sent(),n(o),[3,4];case 4:return[3,6];case 5:l=Promise.all(t.map(PS)),i.push(l),r(),g.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function QS(e){return XS(this,void 0,void 0,(function(){return YS(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var i=HS(n,e.fullPath);t(i)}),(function(e){n(e)}))}))]}))}))}var jS=n(9998);function $S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function eW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$S(Object(n),!0).forEach((function(t){tW(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nW(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(g){l=!0,r=g}finally{try{o||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return iW(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iW(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iW(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var rW="file-invalid-type",aW="file-too-large",oW="file-too-small",lW="too-many-files",gW=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:rW,message:"File type must be ".concat(t)}},sW=function(e){return{code:aW,message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},cW=function(e){return{code:oW,message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},uW={code:lW,message:"Too many files"};function IW(e,t){var n="application/x-moz-file"===e.type||(0,jS.Z)(e,t);return[n,n?null:gW(t)]}function dW(e,t,n){if(CW(e.size))if(CW(t)&&CW(n)){if(e.size>n)return[!1,sW(n)];if(e.size<t)return[!1,cW(t)]}else{if(CW(t)&&e.size<t)return[!1,cW(t)];if(CW(n)&&e.size>n)return[!1,sW(n)]}return[!0,null]}function CW(e){return void 0!==e&&null!==e}function hW(e){var t=e.files,n=e.accept,i=e.minSize,r=e.maxSize,a=e.multiple,o=e.maxFiles;return!(!a&&t.length>1||a&&o>=1&&t.length>o)&&t.every((function(e){var t=nW(IW(e,n),1)[0],a=nW(dW(e,i,r),1)[0];return t&&a}))}function AW(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function pW(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function mW(e){e.preventDefault()}function fW(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}function vW(e){return-1!==e.indexOf("Edge/")}function bW(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return fW(e)||vW(e)}function yW(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.some((function(t){return!AW(e)&&t&&t.apply(void 0,[e].concat(i)),AW(e)}))}}function GW(){return"showOpenFilePicker"in window}function BW(e){return e="string"===typeof e?e.split(","):e,[{description:"everything",accept:Array.isArray(e)?e.filter((function(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)})).reduce((function(e,t){return eW(eW({},e),{},tW({},t,[]))}),{}):{}}]}function ZW(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}function wW(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}var xW=["children"],SW=["open"],WW=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],VW=["refKey","onChange","onClick"];function RW(e){return function(e){if(Array.isArray(e))return XW(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||kW(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qW(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(g){l=!0,r=g}finally{try{o||null==n.return||n.return()}finally{if(l)throw r}}return a}(e,t)||kW(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kW(e,t){if(e){if("string"===typeof e)return XW(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?XW(e,t):void 0}}function XW(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function YW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function NW(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?YW(Object(n),!0).forEach((function(t){KW(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YW(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function KW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HW(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var zW=(0,i.forwardRef)((function(e,t){var n=e.children,r=LW(HW(e,xW)),a=r.open,o=HW(r,SW);return(0,i.useImperativeHandle)(t,(function(){return{open:a}}),[a]),i.createElement(i.Fragment,null,n(NW(NW({},o),{},{open:a})))}));zW.displayName="Dropzone";var MW={disabled:!1,getFilesFromEvent:function(e){return XS(this,void 0,void 0,(function(){return YS(this,(function(t){return MS(e)&&function(e){return MS(e.dataTransfer)}(e)?[2,_S(e.dataTransfer,e.type)]:function(e){return MS(e)&&MS(e.target)}(e)?[2,FS(e)]:Array.isArray(e)&&e.every((function(e){return"getFile"in e&&"function"===typeof e.getFile}))?[2,LS(e)]:[2,[]]}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};zW.defaultProps=MW,zW.propTypes={children:kS().func,accept:kS().oneOfType([kS().string,kS().arrayOf(kS().string)]),multiple:kS().bool,preventDropOnDocument:kS().bool,noClick:kS().bool,noKeyboard:kS().bool,noDrag:kS().bool,noDragEventsBubbling:kS().bool,minSize:kS().number,maxSize:kS().number,maxFiles:kS().number,disabled:kS().bool,getFilesFromEvent:kS().func,onFileDialogCancel:kS().func,onFileDialogOpen:kS().func,useFsAccessApi:kS().bool,onDragEnter:kS().func,onDragLeave:kS().func,onDragOver:kS().func,onDrop:kS().func,onDropAccepted:kS().func,onDropRejected:kS().func,validator:kS().func};var FW={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function LW(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=NW(NW({},MW),e),n=t.accept,r=t.disabled,a=t.getFilesFromEvent,o=t.maxSize,l=t.minSize,g=t.multiple,s=t.maxFiles,c=t.onDragEnter,u=t.onDragLeave,I=t.onDragOver,d=t.onDrop,C=t.onDropAccepted,h=t.onDropRejected,A=t.onFileDialogCancel,p=t.onFileDialogOpen,m=t.useFsAccessApi,f=t.preventDropOnDocument,v=t.noClick,b=t.noKeyboard,y=t.noDrag,G=t.noDragEventsBubbling,B=t.validator,Z=(0,i.useMemo)((function(){return"function"===typeof p?p:TW}),[p]),w=(0,i.useMemo)((function(){return"function"===typeof A?A:TW}),[A]),x=(0,i.useRef)(null),S=(0,i.useRef)(null),W=(0,i.useReducer)(_W,FW),V=qW(W,2),R=V[0],q=V[1],k=R.isFocused,X=R.isFileDialogActive,Y=R.draggedFiles,N=(0,i.useRef)("undefined"!==typeof window&&window.isSecureContext&&m&&GW()),K=function(){!N.current&&X&&setTimeout((function(){S.current&&(S.current.files.length||(q({type:"closeDialog"}),w()))}),300)};(0,i.useEffect)((function(){return window.addEventListener("focus",K,!1),function(){window.removeEventListener("focus",K,!1)}}),[S,X,w,N]);var H=(0,i.useRef)([]),z=function(e){x.current&&x.current.contains(e.target)||(e.preventDefault(),H.current=[])};(0,i.useEffect)((function(){return f&&(document.addEventListener("dragover",mW,!1),document.addEventListener("drop",z,!1)),function(){f&&(document.removeEventListener("dragover",mW),document.removeEventListener("drop",z))}}),[x,f]);var M=(0,i.useCallback)((function(e){e.preventDefault(),e.persist(),$(e),H.current=[].concat(RW(H.current),[e.target]),pW(e)&&Promise.resolve(a(e)).then((function(t){AW(e)&&!G||(q({draggedFiles:t,isDragActive:!0,type:"setDraggedFiles"}),c&&c(e))}))}),[a,c,G]),F=(0,i.useCallback)((function(e){e.preventDefault(),e.persist(),$(e);var t=pW(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&I&&I(e),!1}),[I,G]),L=(0,i.useCallback)((function(e){e.preventDefault(),e.persist(),$(e);var t=H.current.filter((function(e){return x.current&&x.current.contains(e)})),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),H.current=t,t.length>0||(q({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),pW(e)&&u&&u(e))}),[x,u,G]),_=(0,i.useCallback)((function(e,t){var i=[],r=[];e.forEach((function(e){var t=qW(IW(e,n),2),a=t[0],g=t[1],s=qW(dW(e,l,o),2),c=s[0],u=s[1],I=B?B(e):null;if(a&&c&&!I)i.push(e);else{var d=[g,u];I&&(d=d.concat(I)),r.push({file:e,errors:d.filter((function(e){return e}))})}})),(!g&&i.length>1||g&&s>=1&&i.length>s)&&(i.forEach((function(e){r.push({file:e,errors:[uW]})})),i.splice(0)),q({acceptedFiles:i,fileRejections:r,type:"setFiles"}),d&&d(i,r,t),r.length>0&&h&&h(r,t),i.length>0&&C&&C(i,t)}),[q,g,n,l,o,s,d,C,h,B]),T=(0,i.useCallback)((function(e){e.preventDefault(),e.persist(),$(e),H.current=[],pW(e)&&Promise.resolve(a(e)).then((function(t){AW(e)&&!G||_(t,e)})),q({type:"reset"})}),[a,_,G]),E=(0,i.useCallback)((function(){if(N.current){q({type:"openDialog"}),Z();var e={multiple:g,types:BW(n)};window.showOpenFilePicker(e).then((function(e){return a(e)})).then((function(e){_(e,null),q({type:"closeDialog"})})).catch((function(e){ZW(e)?(w(e),q({type:"closeDialog"})):wW(e)&&(N.current=!1,S.current&&(S.current.value=null,S.current.click()))}))}else S.current&&(q({type:"openDialog"}),Z(),S.current.value=null,S.current.click())}),[q,Z,w,m,_,n,g]),J=(0,i.useCallback)((function(e){x.current&&x.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),E()))}),[x,E]),U=(0,i.useCallback)((function(){q({type:"focus"})}),[]),D=(0,i.useCallback)((function(){q({type:"blur"})}),[]),P=(0,i.useCallback)((function(){v||(bW()?setTimeout(E,0):E())}),[v,E]),O=function(e){return r?null:e},Q=function(e){return b?null:O(e)},j=function(e){return y?null:O(e)},$=function(e){G&&e.stopPropagation()},ee=(0,i.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,i=e.role,a=e.onKeyDown,o=e.onFocus,l=e.onBlur,g=e.onClick,s=e.onDragEnter,c=e.onDragOver,u=e.onDragLeave,I=e.onDrop,d=HW(e,WW);return NW(NW(KW({onKeyDown:Q(yW(a,J)),onFocus:Q(yW(o,U)),onBlur:Q(yW(l,D)),onClick:O(yW(g,P)),onDragEnter:j(yW(s,M)),onDragOver:j(yW(c,F)),onDragLeave:j(yW(u,L)),onDrop:j(yW(I,T)),role:"string"===typeof i&&""!==i?i:"button"},n,x),r||b?{}:{tabIndex:0}),d)}}),[x,J,U,D,P,M,F,L,T,b,y,r]),te=(0,i.useCallback)((function(e){e.stopPropagation()}),[]),ne=(0,i.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,i=void 0===t?"ref":t,r=e.onChange,a=e.onClick,o=HW(e,VW),l=KW({accept:n,multiple:g,type:"file",style:{display:"none"},onChange:O(yW(r,T)),onClick:O(yW(a,te)),tabIndex:-1},i,S);return NW(NW({},l),o)}}),[S,n,g,T,r]),ie=Y.length,re=ie>0&&hW({files:Y,accept:n,minSize:l,maxSize:o,multiple:g,maxFiles:s}),ae=ie>0&&!re;return NW(NW({},R),{},{isDragAccept:re,isDragReject:ae,isFocused:k&&!r,getRootProps:ee,getInputProps:ne,rootRef:x,inputRef:S,open:O(E)})}function _W(e,t){switch(t.type){case"focus":return NW(NW({},e),{},{isFocused:!0});case"blur":return NW(NW({},e),{},{isFocused:!1});case"openDialog":return NW(NW({},FW),{},{isFileDialogActive:!0});case"closeDialog":return NW(NW({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=t.isDragActive,i=t.draggedFiles;return NW(NW({},e),{},{draggedFiles:i,isDragActive:n});case"setFiles":return NW(NW({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return NW({},FW);default:return e}}function TW(){}Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;var EW,JW,UW=n(8089),DW=n.n(UW),PW=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(".")};function OW(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=(0,i.useRef)(null),n=(0,i.useRef)(null),r=(0,i.useState)(!1),a=c(r,2),o=a[0],l=a[1],g=(0,i.useCallback)((function(){return l(!0)}),[]),s=(0,i.useCallback)((function(){return l(!1)}),[]);return(0,i.useLayoutEffect)((function(){if(o){var i=t.current.getBoundingClientRect(),r=i.bottom,a=i.top,l=i.left,g=r+n.current.getBoundingClientRect().height>window.innerHeight-40?"up":"down";n.current.style.position="fixed",n.current.style.zIndex="10000",n.current.style.left=l+"px","down"===g?n.current.style.top=r+e+"px":n.current.style.bottom=window.innerHeight-a+e+"px"}}),[e,o]),{popinRef:t,wrapperRef:n,shown:o,show:g,hide:s}}!function(e){e.forEach((function(e){$x.indexOf(e)<0&&(e(Qx,Ex),$x.push(e))}))}([function(e,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in n)i[n[r]]=r;var a={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var r,o,l=i[this.toHex()];if(l)return l;if(null==t?void 0:t.closest){var g=this.toRgb(),s=1/0,c="black";if(!a.length)for(var u in n)a[u]=new e(n[u]).toRgb();for(var I in n){var d=(r=g,o=a[I],Math.pow(r.r-o.r,2)+Math.pow(r.g-o.g,2)+Math.pow(r.b-o.b,2));d<s&&(s=d,c=I)}return c}},t.string.push([function(t){var i=t.toLowerCase(),r="transparent"===i?"#0000":n[i];return r?new e(r).toRgb():null},"name"])}]);var QW={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};fb.extend({color:function(){return function(e){return jx(e).isValid()}}});function jW(e,t){var n=t.format,i=t.hasAlpha,r=t.isString,a=e[QW[n]+(r&&"hex"!==n?"String":"")]();return"object"!==typeof a||i?a:function(e,t){var n=dZ({},e);return t.forEach((function(t){return t in e&&delete n[t]})),n}(a,["a"])}var $W=function(e,t){var n=jx(e);if(!n.isValid())throw Error("Invalid color");return jW(n,t)},eV=Object.freeze({__proto__:null,schema:function(e){return fb().color().test(e)},sanitize:$W,format:function(e,t){return jW(jx(e),dZ(dZ({},t),{},{isString:!0,format:"hex"}))},normalize:function(e){var t=e.value,n=function(e){return Ux(e)[1]}(t),i={format:"name"===n?"hex":n,hasAlpha:"object"===typeof t?"a"in t:"hex"===n&&8===t.length||/^(rgba)|(hsla)|(hsva)/.test(t),isString:"string"===typeof t};return{value:$W(t,i),settings:i}}}),tV=iw("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:'url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')',$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),nV=iw("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),iV=iw("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function rV(e,t){return"rgb"!==t?jx(e).toRgb():e}function aV(e){var t=e.value,n=e.displayValue,r=e.settings,a=e.onUpdate,o=PZ(),l=o.emitOnEditStart,g=o.emitOnEditEnd,s=r.format,u=r.hasAlpha,I=OW(),d=I.popinRef,C=I.wrapperRef,h=I.shown,A=I.show,p=I.hide,m=(0,i.useRef)(0),f=c((0,i.useState)((function(){return rV(t,s)})),2),v=f[0],b=f[1],y=u?WS:RS,G=function(){p(),g(),window.clearTimeout(m.current)};return(0,i.useEffect)((function(){return function(){return window.clearTimeout(m.current)}}),[]),i.createElement(i.Fragment,null,i.createElement(tV,{ref:d,active:h,onClick:function(){return b(rV(t,s)),A(),void l()},style:{color:n}}),h&&i.createElement(Sw,null,i.createElement(Zw,{onPointerUp:G}),i.createElement(iV,{ref:C,onMouseEnter:function(){return window.clearTimeout(m.current)},onMouseLeave:function(e){return 0===e.buttons&&void(m.current=window.setTimeout(G,500))}},i.createElement(y,{color:v,onChange:a}))))}var oV=dZ({component:function(){var e=PZ(),t=e.value,n=e.displayValue,r=e.label,a=e.onChange,o=e.onUpdate,l=e.settings;return i.createElement(Kw,{input:!0},i.createElement(qw,null,r),i.createElement(nV,null,i.createElement(aV,{value:t,displayValue:n,onChange:a,onUpdate:o,settings:l}),i.createElement(dw,{value:n,onChange:a,onUpdate:o})))}},eV);var lV=dZ({component:function(){var e=PZ(),t=e.label,n=e.displayValue,r=e.onUpdate,a=e.settings;return i.createElement(Kw,{input:!0},i.createElement(qw,null,t),i.createElement(mx,{value:n,settings:a,onUpdate:r}))}},Zx(["x","y","z"])),gV=iw("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),sV=iw("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function cV(e){var t=e.value,n=e.settings,r=e.onUpdate,a=(0,i.useRef)(),o=(0,i.useRef)(0),l=(0,i.useRef)(0),g=(0,i.useRef)(1),s=c((0,i.useState)(!1),2),u=s[0],I=s[1],d=c((0,i.useState)(!1),2),C=d[0],h=d[1],A=c(Mw(),2),p=A[0],m=A[1],f=(0,i.useRef)(null),v=(0,i.useRef)(null);(0,i.useLayoutEffect)((function(){if(u){var e=f.current.getBoundingClientRect(),t=e.top,n=e.left,i=e.width,r=e.height;v.current.style.left=n+i/2+"px",v.current.style.top=t+r/2+"px"}}),[u]);var b=c(n.keys,2),y=b[0],G=b[1],B="invertY"===n.joystick?1:-1,Z=n[y].step,w=n[G].step,x=ow("sizes","joystickWidth"),S=ow("sizes","joystickHeight"),W=.8*parseFloat(x)/2,V=.8*parseFloat(S)/2,R=(0,i.useCallback)((function(){a.current||(h(!0),o.current&&m({x:o.current*W}),l.current&&m({y:l.current*-V}),a.current=window.setInterval((function(){r((function(e){var t,n,i=Z*o.current*g.current,r=B*w*l.current*g.current;return Array.isArray(e)?(L(t={},y,e[0]+i),L(t,G,e[1]+r),t):(L(n={},y,e[y]+i),L(n,G,e[G]+r),n)}))}),16))}),[W,V,r,m,Z,w,y,G,B]),q=(0,i.useCallback)((function(){window.clearTimeout(a.current),a.current=void 0,h(!1)}),[]);(0,i.useEffect)((function(){function e(e){g.current=MZ(e)}return window.addEventListener("keydown",e),window.addEventListener("keyup",e),function(){window.clearTimeout(a.current),window.removeEventListener("keydown",e),window.removeEventListener("keyup",e)}}),[]);var k=zw((function(e){var n=e.first,i=e.active,a=c(e.delta,2),s=a[0],u=a[1],d=c(e.movement,2),C=d[0],h=d[1];n&&I(!0);var A=CZ(C,-W,W),p=CZ(h,-V,V);o.current=Math.abs(C)>Math.abs(A)?Math.sign(C-A):0,l.current=Math.abs(h)>Math.abs(p)?Math.sign(p-h):0;var f,v=t[y],b=t[G];i?(o.current||(v+=s*Z*g.current,m({x:A})),l.current||(b-=B*u*w*g.current,m({y:p})),o.current||l.current?R():q(),r((L(f={},y,v),L(f,G,b),f))):(I(!1),o.current=0,l.current=0,m({x:0,y:0}),q())}));return i.createElement(gV,UZ({ref:f},k()),u&&i.createElement(Sw,null,i.createElement(sV,{ref:v,isOutOfBounds:C},i.createElement("div",null),i.createElement("span",{ref:p}))))}var uV=iw("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});var IV=["joystick"],dV=Zx(["x","y"]),CV=dZ(dZ({component:function(){var e=PZ(),t=e.label,n=e.displayValue,r=e.onUpdate,a=e.settings;return i.createElement(Kw,{input:!0},i.createElement(qw,null,t),i.createElement(uV,{withJoystick:!!a.joystick},a.joystick&&i.createElement(cV,{value:n,settings:a,onUpdate:r}),i.createElement(mx,{value:n,settings:a,onUpdate:r})))}},dV),{},{normalize:function(e){var t=e.joystick,n=void 0===t||t,i=QB(e,IV),r=dV.normalize(i);return{value:r.value,settings:dZ(dZ({},r.settings),{},{joystick:n})}}}),hV=Object.freeze({__proto__:null,sanitize:function(e){if(void 0!==e){if(e instanceof File)try{return URL.createObjectURL(e)}catch(t){return}if("string"===typeof e&&0===e.indexOf("blob:"))return e;throw Error("Invalid image format [undefined | blob |\xa0File].")}},schema:function(e,t){return"object"===typeof t&&"image"in t},normalize:function(e){return{value:e.image}}}),AV=iw("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),pV=iw("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),mV=iw("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),fV=iw("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),vV=iw("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),bV=iw("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});var yV=dZ({component:function(){var e=PZ(),t=e.label,n=e.value,r=e.onUpdate,a=e.disabled,o=OW(),l=o.popinRef,g=o.wrapperRef,s=o.shown,c=o.show,u=o.hide,I=(0,i.useCallback)((function(e){e.length&&r(e[0])}),[r]),d=(0,i.useCallback)((function(e){e.stopPropagation(),r(void 0)}),[r]),C=LW({maxFiles:1,accept:"image/*",onDrop:I,disabled:a}),h=C.getRootProps,A=C.getInputProps,p=C.isDragAccept;return i.createElement(Kw,{input:!0},i.createElement(qw,null,t),i.createElement(AV,null,i.createElement(mV,{ref:l,hasImage:!!n,onPointerDown:function(){return!!n&&c()},onPointerUp:u,style:{backgroundImage:n?"url(".concat(n,")"):"none"}}),s&&!!n&&i.createElement(Sw,null,i.createElement(Zw,{onPointerUp:u,style:{cursor:"pointer"}}),i.createElement(fV,{ref:g,style:{backgroundImage:"url(".concat(n,")")}})),i.createElement(pV,h({isDragAccept:p}),i.createElement("input",A()),i.createElement(vV,null,p?"drop image":"click or drop")),i.createElement(bV,{onClick:d,disabled:!n})))}},hV),GV=fb().number(),BV=function(e){return{min:e[0],max:e[1]}},ZV=function(e,t,n){var i=c(t.bounds,2),r=i[0],a=i[1],o=Array.isArray(e)?BV(e):e,l=dZ(dZ({},{min:n[0],max:n[1]}),o),g=l.min,s=l.max;return[CZ(Number(g),r,Math.max(r,s)),CZ(Number(s),Math.min(a,g),a)]},wV=Object.freeze({__proto__:null,schema:function(e,t){return fb().array().length(2).every.number().test(e)&&fb().schema({min:GV,max:GV}).test(t)},format:BV,sanitize:ZV,normalize:function(e){var t=e.value,n=e.min,i=e.max,r={min:n,max:i},a=[n,i],o=dZ(dZ({},fx(BV(t),{min:r,max:r})),{},{bounds:a});return{value:ZV(BV(t),o,t),settings:o}}}),xV=["value","bounds","onDrag"],SV=["bounds"],WV=iw("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function VV(e){var t=e.value,n=c(e.bounds,2),r=n[0],a=n[1],o=e.onDrag,l=QB(e,xV),g=(0,i.useRef)(null),s=(0,i.useRef)(null),u=(0,i.useRef)(null),I=(0,i.useRef)(0),d=ow("sizes","scrubberWidth"),C=zw((function(e){var n=e.event,i=e.first,C=c(e.xy,1)[0],h=c(e.movement,1)[0],A=e.memo,p=void 0===A?{}:A;if(i){var m=g.current.getBoundingClientRect(),f=m.width,v=m.left;I.current=f-parseFloat(d);var b=(null===n||void 0===n?void 0:n.target)===s.current||(null===n||void 0===n?void 0:n.target)===u.current;p.pos=fZ((C-v)/f,r,a);var y=Math.abs(p.pos-t.min)-Math.abs(p.pos-t.max);p.key=y<0||0===y&&p.pos<=t.min?"min":"max",b&&(p.pos=t[p.key])}var G=p.pos+fZ(h/I.current,0,a-r);return o(L({},p.key,Qw(G,l[p.key]))),p})),h="calc(".concat(mZ(t.min,r,a)," * (100% - ").concat(d," - 8px) + 4px)"),A="calc(".concat(1-mZ(t.max,r,a)," * (100% - ").concat(d," - 8px) + 4px)");return i.createElement(Jw,UZ({ref:g},C()),i.createElement(Tw,null,i.createElement(Uw,{style:{left:h,right:A}})),i.createElement(Ew,{position:"left",ref:s,style:{left:h}}),i.createElement(Ew,{position:"right",ref:u,style:{right:A}}))}var RV=dZ({component:function(){var e=PZ(),t=e.label,n=e.displayValue,r=e.onUpdate,a=e.settings,o=QB(a,SV);return i.createElement(i.Fragment,null,i.createElement(Kw,{input:!0},i.createElement(qw,null,t),i.createElement(WV,null,i.createElement(VV,UZ({value:n},a,{onDrag:r})),i.createElement(mx,{value:n,settings:o,onUpdate:r,innerLabelTrim:0}))))}},wV),qV=["type","value"],kV=["onChange","transient","onEditStart","onEditEnd"],XV=function(){var e,t=this,n=vh((e=function(){return{data:{}}},function(t,n,i){var r=i.subscribe;return i.subscribe=function(e,t,n){var a=e;if(t){var o=(null==n?void 0:n.equalityFn)||Object.is,l=e(i.getState());a=function(n){var i=e(n);if(!o(l,i)){var r=l;t(l=i,r)}},(null==n?void 0:n.fireImmediately)&&t(l,l)}return r(a)},e(t,n,i)})),i=function(){var e=new Map;return{on:function(t,n){var i=e.get(t);void 0===i&&(i=new Set,e.set(t,i)),i.add(n)},off:function(t,n){var i=e.get(t);void 0!==i&&(i.delete(n),0===i.size&&e.delete(t))},emit:function(t){var n=e.get(t);if(void 0!==n){for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];var o,l=E(n);try{for(l.s();!(o=l.n()).done;){o.value.apply(void 0,r)}}catch(g){l.e(g)}finally{l.f()}}}}}();this.storeId="_"+Math.random().toString(36).substr(2,9),this.useStore=n;var r={},a=new Set;this.getVisiblePaths=function(){var e=t.getData(),n=Object.keys(e),i=[];Object.entries(r).forEach((function(e){var r=c(e,2),a=r[0],o=r[1];o.render&&n.some((function(e){return 0===e.indexOf(a)}))&&!o.render(t.get)&&i.push(a+".")}));var o=[];return a.forEach((function(n){n in e&&e[n].__refCount>0&&i.every((function(e){return-1===n.indexOf(e)}))&&(!e[n].render||e[n].render(t.get))&&o.push(n)})),o},this.setOrderedPaths=function(e){e.forEach((function(e){return a.add(e)}))},this.orderPaths=function(e){return t.setOrderedPaths(e),e},this.disposePaths=function(e){n.setState((function(t){var n=t.data;return e.forEach((function(e){if(e in n){var t=n[e];t.__refCount--,0===t.__refCount&&t.type in SZ&&delete n[e]}})),{data:n}}))},this.dispose=function(){n.setState((function(){return{data:{}}}))},this.getFolderSettings=function(e){return r[e]||{}},this.getData=function(){return n.getState().data},this.addData=function(e,t){n.setState((function(n){var i=n.data;return Object.entries(e).forEach((function(e){var n=c(e,2),r=n[0],a=n[1],o=i[r];if(o){var l=a.type,g=(a.value,QB(a,qV));l!==o.type?eZ(JB.INPUT_TYPE_OVERRIDE,l):((0===o.__refCount||t)&&Object.assign(o,g),o.__refCount++)}else i[r]=dZ(dZ({},a),{},{__refCount:1})})),{data:i}}))},this.setValueAtPath=function(e,i,r){n.setState((function(n){var a=n.data;return NZ(a[e],i,e,t,r),{data:a}}))},this.setSettingsAtPath=function(e,t){n.setState((function(n){var i=n.data;return i[e].settings=dZ(dZ({},i[e].settings),t),{data:i}}))},this.disableInputAtPath=function(e,t){n.setState((function(n){var i=n.data;return i[e].disabled=t,{data:i}}))},this.set=function(e,t){n.setState((function(n){var i=n.data;return Object.entries(e).forEach((function(e){var n=c(e,2),r=n[0],a=n[1];try{NZ(i[r],a,void 0,void 0,t)}catch(o){0}})),{data:i}}))},this.getInput=function(e){try{return t.getData()[e]}catch(n){eZ(JB.PATH_DOESNT_EXIST,e)}},this.get=function(e){var n;return null===(n=t.getInput(e))||void 0===n?void 0:n.value},this.emitOnEditStart=function(e){i.emit("onEditStart:".concat(e),t.get(e),e,dZ(dZ({},t.getInput(e)),{},{get:t.get}))},this.emitOnEditEnd=function(e){i.emit("onEditEnd:".concat(e),t.get(e),e,dZ(dZ({},t.getInput(e)),{},{get:t.get}))},this.subscribeToEditStart=function(e,t){var n="onEditStart:".concat(e);return i.on(n,t),function(){return i.off(n,t)}},this.subscribeToEditEnd=function(e,t){var n="onEditEnd:".concat(e);return i.on(n,t),function(){return i.off(n,t)}};var o=function e(t,n,i){var a={};return Object.entries(t).forEach((function(t){var o=c(t,2),l=o[0],g=o[1];if(""===l)return eZ(JB.EMPTY_KEY);var s=PW(n,l);if(g.type===SZ.FOLDER){var u=e(g.schema,s,i);Object.assign(a,u),s in r||(r[s]=g.settings)}else if(l in i)eZ(JB.DUPLICATE_KEYS,l,s,i[l].path);else{var I=YZ(g,l,s,a);if(I){var d=I.type,C=I.options,h=I.input,A=C.onChange,p=C.transient,m=C.onEditStart,f=C.onEditEnd,v=QB(C,kV);a[s]=dZ(dZ(dZ({type:d},v),h),{},{fromPanel:!0}),i[l]={path:s,onChange:A,transient:p,onEditStart:m,onEditEnd:f}}else eZ(JB.UNKNOWN_INPUT,s,g)}})),a};this.getDataFromSchema=function(e){var t={};return[o(e,"",t),t]}};new XV;function YV(e){var t=e.toggle,n=e.toggled,r=e.name;return i.createElement(pw,{onClick:function(){return t()}},i.createElement(Yw,{toggled:n}),i.createElement("div",null,r))}var NV=["type","label","path","valueKey","value","settings","setValue","disabled"];function KV(e){var t=e.type,n=e.label,r=e.path,a=e.valueKey,o=e.value,l=e.settings,g=e.setValue,s=e.disabled,c=QB(e,NV),u=Hw({type:t,value:o,settings:l,setValue:g}),I=u.displayValue,d=u.onChange,C=u.onUpdate,h=oZ[t].component;return h?i.createElement(DZ.Provider,{value:dZ({key:a,path:r,id:""+r,label:n,displayValue:I,value:o,onChange:d,onUpdate:C,settings:l,setValue:g,disabled:s},c)},i.createElement(Bw,{disabled:s},i.createElement(h,null))):(eZ(JB.NO_COMPONENT_FOR_TYPE,t,r),null)}var HV=iw("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});var zV=iw("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),MV=iw("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}});var FV=iw("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"});var LV=(0,i.forwardRef)((function(e,t){var n=e.initialValue,r=ow("colors","highlight3"),a=ow("colors","elevation2"),o=ow("colors","highlight1"),l=c((0,i.useMemo)((function(){return[jx(o).alpha(.4).toRgbString(),jx(o).alpha(.1).toRgbString()]}),[o]),2),g=l[0],s=l[1],u=(0,i.useRef)([n]),I=(0,i.useRef)(n),d=(0,i.useRef)(n),C=(0,i.useRef)(),h=(0,i.useCallback)((function(e,t){if(e){for(var n=e.width,i=e.height,o=new Path2D,l=n/100,c=.05*i,C=0;C<u.current.length;C++){var h=l*C,A=i-mZ(u.current[C],I.current,d.current)*(i-2*c)-c;o.lineTo(h,A)}t.clearRect(0,0,n,i);var p=new Path2D(o);p.lineTo(l*(u.current.length+1),i),p.lineTo(0,i),p.lineTo(0,0);var m=t.createLinearGradient(0,0,0,i);m.addColorStop(0,g),m.addColorStop(1,s),t.fillStyle=m,t.fill(p),t.strokeStyle=a,t.lineJoin="round",t.lineWidth=14,t.stroke(o),t.strokeStyle=r,t.lineWidth=2,t.stroke(o)}}),[r,a,g,s]),A=function(e){var t=(0,i.useRef)(null),n=(0,i.useRef)(null),r=(0,i.useRef)(!1);return(0,i.useEffect)((function(){var i=zZ((function(){t.current.width=t.current.offsetWidth*window.devicePixelRatio,t.current.height=t.current.offsetHeight*window.devicePixelRatio,e(t.current,n.current)}),250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),function(){return window.removeEventListener("resize",i)}}),[e]),(0,i.useEffect)((function(){n.current=t.current.getContext("2d")}),[]),[t,n]}(h),p=c(A,2),m=p[0],f=p[1];return(0,i.useImperativeHandle)(t,(function(){return{frame:function(e){(void 0===I.current||e<I.current)&&(I.current=e),(void 0===d.current||e>d.current)&&(d.current=e),function(e,t){e.push(t),e.length>100&&e.shift()}(u.current,e),C.current=requestAnimationFrame((function(){return h(m.current,f.current)}))}}}),[m,f,h]),(0,i.useEffect)((function(){return function(){return cancelAnimationFrame(C.current)}}),[]),i.createElement(FV,{ref:m})})),_V=function(e){return Number.isFinite(e)?e.toPrecision(2):e.toString()},TV=(0,i.forwardRef)((function(e,t){var n=e.initialValue,r=c((0,i.useState)(_V(n)),2),a=r[0],o=r[1];return(0,i.useImperativeHandle)(t,(function(){return{frame:function(e){return o(_V(e))}}}),[]),i.createElement("div",null,a)}));function EV(e){return"function"===typeof e?e():e.current}var JV=["type","label","key"],UV=(L(EW={},SZ.BUTTON,(function(e){var t=e.onClick,n=e.settings,r=e.label,a=$Z();return i.createElement(Kw,null,i.createElement(HV,{disabled:n.disabled,onClick:function(){return t(a.get)}},r))})),L(EW,SZ.BUTTON_GROUP,(function(e){var t=function(e){var t=e.label,n=e.opts,i="string"===typeof t&&""===t.trim()?null:t,r=n;return"object"===typeof n.opts&&(void 0!==r.label&&(i=n.label),r=n.opts),{label:i,opts:r}}(e),n=t.label,r=t.opts,a=$Z();return i.createElement(Kw,{input:!!n},n&&i.createElement(qw,null,n),i.createElement(zV,null,Object.entries(r).map((function(e){var t=c(e,2),n=t[0],r=t[1];return i.createElement(MV,{key:n,onClick:function(){return r(a.get)}},n)}))))})),L(EW,SZ.MONITOR,(function(e){var t=e.label,n=e.objectOrFn,r=e.settings,a=(0,i.useRef)(),o=(0,i.useRef)(EV(n));return(0,i.useEffect)((function(){var e=window.setInterval((function(){var e;document.hidden||null===(e=a.current)||void 0===e||e.frame(EV(n))}),r.interval);return function(){return window.clearInterval(e)}}),[n,r.interval]),i.createElement(Kw,{input:!0},i.createElement(qw,{align:"top"},t),r.graph?i.createElement(LV,{ref:a,initialValue:o.current}):i.createElement(TV,{ref:a,initialValue:o.current}))})),EW),DV=i.memo((function(e){var t=e.path,n=function(e){var t=$Z(),n=c((0,i.useState)(Lw(t.getData(),e)),2),r=n[0],a=n[1],o=(0,i.useCallback)((function(n){return t.setValueAtPath(e,n,!0)}),[e,t]),l=(0,i.useCallback)((function(n){return t.setSettingsAtPath(e,n)}),[e,t]),g=(0,i.useCallback)((function(n){return t.disableInputAtPath(e,n)}),[e,t]),s=(0,i.useCallback)((function(){return t.emitOnEditStart(e)}),[e,t]),u=(0,i.useCallback)((function(){return t.emitOnEditEnd(e)}),[e,t]);return(0,i.useEffect)((function(){a(Lw(t.getData(),e));var n=t.useStore.subscribe((function(t){return Lw(t.data,e)}),a,{equalityFn:$v});return function(){return n()}}),[t,e]),[r,{set:o,setSettings:l,disable:g,storeId:t.storeId,emitOnEditStart:s,emitOnEditEnd:u}]}(t),r=c(n,2),a=r[0],o=r[1],l=o.set,g=o.setSettings,s=o.disable,u=o.storeId,I=o.emitOnEditStart,d=o.emitOnEditEnd;if(!a)return null;var C=a.type,h=a.label,A=a.key,p=QB(a,JV);if(C in SZ){var m=UV[C];return i.createElement(m,UZ({label:h,path:t},p))}return C in oZ?i.createElement(KV,UZ({key:u+t,type:C,label:h,storeId:u,path:t,valueKey:A,setValue:l,setSettings:g,disable:s,emitOnEditStart:I,emitOnEditEnd:d},p)):(tZ(JB.UNSUPPORTED_INPUT,C,t),null)})),PV=function(e){var t=e.name,n=e.path,r=e.tree,a=$Z(),o=PW(n,t),l=a.getFolderSettings(o),g=l.collapsed,s=l.color,u=c((0,i.useState)(!g),2),I=u[0],d=u[1],C=(0,i.useRef)(null),h=ow("colors","folderWidgetColor"),A=ow("colors","folderTextColor");return(0,i.useLayoutEffect)((function(){C.current.style.setProperty("--leva-colors-folderWidgetColor",s||h),C.current.style.setProperty("--leva-colors-folderTextColor",s||A)}),[s,h,A]),i.createElement(hw,{ref:C},i.createElement(YV,{name:t,toggled:I,toggle:function(){return d((function(e){return!e}))}}),i.createElement(OV,{parent:o,tree:r,toggled:I}))},OV=i.memo((function(e){var t=e.isRoot,n=void 0!==t&&t,r=e.fill,a=void 0!==r&&r,o=e.flat,l=void 0!==o&&o,g=e.parent,s=e.tree,u=e.toggled,I=function(e){var t=(0,i.useRef)(null),n=(0,i.useRef)(null),r=(0,i.useRef)(!0);return(0,i.useLayoutEffect)((function(){e||(t.current.style.height="0px",t.current.style.overflow="hidden")}),[]),(0,i.useEffect)((function(){if(!r.current){var i,a=t.current,o=function(){e&&(a.style.removeProperty("height"),a.style.removeProperty("overflow"),n.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};a.addEventListener("transitionend",o,{once:!0});var l=n.current.getBoundingClientRect().height;return a.style.height=l+"px",e||(a.style.overflow="hidden",i=window.setTimeout((function(){return a.style.height="0px"}),50)),function(){a.removeEventListener("transitionend",o),clearTimeout(i)}}r.current=!1}),[e]),{wrapperRef:t,contentRef:n}}(u),d=I.wrapperRef,C=I.contentRef;return i.createElement(Aw,{ref:d,isRoot:n,fill:a,flat:l},i.createElement(mw,{ref:C,isRoot:n,toggled:u},Object.entries(s).map((function(e){var t=c(e,2),n=t[0],r=t[1];return function(e){return"__levaInput"in e}(r)?i.createElement(DV,{key:r.path,valueKey:r.valueKey,path:r.path}):i.createElement(PV,{key:n,name:n,path:g,tree:r})}))))})),QV=iw("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:L({},"".concat(vw),{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"})},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),jV=iw("i",{$flexCenter:"",width:40,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),$V=iw("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),eR=iw("div",(L(JW={$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md"},"> ".concat(jV),{height:30}),L(JW,"variants",{toggled:{true:{height:30},false:{height:0}}}),JW)),tR=iw("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),nR=iw("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:40}}}}),iR=i.forwardRef((function(e,t){var n=e.setFilter,r=e.toggle,a=c((0,i.useState)(""),2),o=a[0],l=a[1],g=(0,i.useMemo)((function(){return zZ(n,250)}),[n]);return(0,i.useEffect)((function(){g(o)}),[o,g]),i.createElement(i.Fragment,null,i.createElement(tR,{ref:t,value:o,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:function(e){return e.stopPropagation()},onChange:function(e){var t=e.currentTarget.value;r(!0),l(t)}}),i.createElement(jV,{onClick:function(){return n(""),void l("")},style:{visibility:o?"visible":"hidden"}},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},i.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))}));function rR(e){var t=e.setFilter,n=e.onDrag,r=e.onDragStart,a=e.onDragEnd,o=e.toggle,l=e.toggled,g=e.title,s=e.drag,u=e.filterEnabled,I=e.from,d=c((0,i.useState)(!1),2),C=d[0],h=d[1],A=(0,i.useRef)(null);(0,i.useEffect)((function(){var e,t;C?null===(e=A.current)||void 0===e||e.focus():null===(t=A.current)||void 0===t||t.blur()}),[C]);var p=zw((function(e){var t=c(e.offset,2),i=t[0],o=t[1],l=e.first,g=e.last;n({x:i,y:o}),l&&r({x:i,y:o}),g&&a({x:i,y:o})}),{filterTaps:!0,from:function(e){var t=c(e.offset,2),n=t[0],i=t[1];return[(null===I||void 0===I?void 0:I.x)||n,(null===I||void 0===I?void 0:I.y)||i]}});return(0,i.useEffect)((function(){var e=function(e){"L"===e.key&&e.shiftKey&&e.metaKey&&h((function(e){return!e}))};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[]),i.createElement(i.Fragment,null,i.createElement($V,{mode:s?"drag":void 0},i.createElement(jV,{active:!l,onClick:function(){return o()}},i.createElement(Yw,{toggled:l,width:12,height:8})),i.createElement(nR,UZ({},s?p():{},{drag:s,filterEnabled:u}),void 0===g&&s?i.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},i.createElement("circle",{cx:"2",cy:"2",r:"2"}),i.createElement("circle",{cx:"14",cy:"2",r:"2"}),i.createElement("circle",{cx:"26",cy:"2",r:"2"}),i.createElement("circle",{cx:"2",cy:"12",r:"2"}),i.createElement("circle",{cx:"14",cy:"12",r:"2"}),i.createElement("circle",{cx:"26",cy:"12",r:"2"})):g),u&&i.createElement(jV,{active:C,onClick:function(){return h((function(e){return!e}))}},i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},i.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),i.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),i.createElement(eR,{toggled:C},i.createElement(iR,{ref:A,setFilter:t,toggle:o})))}i.memo((function(e){var t,n,r=e.store,a=e.rootClass,o=e.fill,l=void 0!==o&&o,g=e.flat,s=void 0!==g&&g,u=e.neverHide,I=void 0!==u&&u,d=e.oneLineLabels,C=void 0!==d&&d,h=e.titleBar,A=void 0===h?{title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0}:h,p=e.hideCopyButton,m=void 0!==p&&p,f=e.toggled,v=e.setToggle,b=function(e){var t=c((0,i.useState)(e.getVisiblePaths()),2),n=t[0],r=t[1];return(0,i.useEffect)((function(){r(e.getVisiblePaths());var t=e.useStore.subscribe(e.getVisiblePaths,r,{equalityFn:$v});return function(){return t()}}),[e]),n}(r),y=c((0,i.useState)(""),2),G=y[0],B=y[1],Z=(0,i.useMemo)((function(){return function(e,t){var n={},i=t?t.toLowerCase():null;return e.forEach((function(e){var t=function(e){var t=e.split(".");return[t.pop(),t.join(".")||void 0]}(e),r=c(t,2),a=r[0],o=r[1];(!i||a.toLowerCase().indexOf(i)>-1)&&DW()(n,o,L({},a,{__levaInput:!0,path:e}))})),n}(b,G)}),[b,G]),w=c(Mw(),2),x=w[0],S=w[1],W=I||b.length>0,V="object"===typeof A&&A.title||void 0,R="object"!==typeof A||(null===(t=A.drag)||void 0===t||t),q="object"!==typeof A||(null===(n=A.filter)||void 0===n||n),k="object"===typeof A&&A.position||void 0,X="object"===typeof A&&A.onDrag||void 0,Y="object"===typeof A&&A.onDragStart||void 0,N="object"===typeof A&&A.onDragEnd||void 0;return i.useEffect((function(){S({x:null===k||void 0===k?void 0:k.x,y:null===k||void 0===k?void 0:k.y})}),[k,S]),aw(),i.createElement(jZ.Provider,{value:{hideCopyButton:m}},i.createElement(QV,{ref:x,className:a,fill:l,flat:s,oneLineLabels:C,hideTitleBar:!A,style:{display:W?"block":"none"}},A&&i.createElement(rR,{onDrag:function(e){S(e),null===X||void 0===X||X(e)},onDragStart:function(e){return null===Y||void 0===Y?void 0:Y(e)},onDragEnd:function(e){return null===N||void 0===N?void 0:N(e)},setFilter:B,toggle:function(e){return v((function(t){return null!==e&&void 0!==e?e:!t}))},toggled:f,title:V,drag:R,filterEnabled:q,from:k}),W&&i.createElement(QZ.Provider,{value:r},i.createElement(OV,{isRoot:!0,fill:l,flat:s,tree:Z,toggled:f}))))}));gZ(WZ.SELECT,rx),gZ(WZ.IMAGE,yV),gZ(WZ.NUMBER,jw),gZ(WZ.COLOR,oV),gZ(WZ.STRING,sx),gZ(WZ.BOOLEAN,dx),gZ(WZ.INTERVAL,RV),gZ(WZ.VECTOR3D,lV),gZ(WZ.VECTOR2D,CV);var aR=["color","alpha","lighting","name"],oR=["label","options"],lR=["color","alpha","lighting","layers","name"],gR=["children"];function sR(e){return"string"===typeof e?new ir(e).convertLinearToSRGB():e}function cR(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=e.alpha,i=e.lighting,r=e.name,a=j(e,aR);return[{color:t,alpha:n,lighting:i,name:r},a]}function uR(e){return e instanceof pr||e instanceof Mi||e instanceof sr||e instanceof Fi||e instanceof Dr}function IR(e){return uR(e)?e.toArray():e instanceof ir?"#"+e.clone().convertLinearToSRGB().getHexString():e instanceof gr?e.image.src:e}var dR={normal:"normal",add:"add",subtract:"subtract",multiply:"multiply",lighten:"lighten",darken:"darken",divide:"divide",overlay:"overlay",screen:"screen",softlight:"softlight",negation:"negation",reflect:"reflect"},CR={perlin:"perlin",simplex:"simplex",cell:"cell",curl:"curl",white:"white"},hR={local:"local",world:"world",uv:"uv"},AR={phong:nI,physical:tI,toon:iI,basic:ka,lambert:aI,standard:eI},pR=function(){function e(t,n,i){var r=this;$(this,e),this.uuid=zi.generateUUID().replace(/-/g,"_"),this.name="LayerMaterial",this.mode="normal",this.visible=!0;var a=Object.getOwnPropertyNames(t).filter((function(e){return e.startsWith("u_")})).reduce((function(e,n){var i,r=null==(i=Object.getOwnPropertyDescriptor(t,n))?void 0:i.value;return(uR(r)||r instanceof ir)&&(r=r.clone()),T(T({},e),{},L({},n.slice(1),r))}),{});for(var o in a){var l=o.split("_")[1];void 0!==(null==n?void 0:n[l])&&(a[o]=n[l])}n&&Object.keys(n).map((function(e){void 0!==n[e]&&(r[e]=n[e])})),this.uniforms={},this.schema=[];var g={};Object.keys(a).map((function(e){var t=e.split("_")[1];r.uniforms["u_".concat(r.uuid,"_").concat(t)]={value:sR(a[e])},r.schema.push({value:a[e],label:t}),g[t]={set:function(e){r.uniforms["u_".concat(r.uuid,"_").concat(t)].value=sR(e)},get:function(){return r.uniforms["u_".concat(r.uuid,"_").concat(t)].value}}})),null!=n&&n.name&&(this.name=n.name),null!=n&&n.mode&&(this.mode=n.mode),null!=n&&n.visible&&(this.visible=n.visible),Object.defineProperties(this,g),this.vertexShader="",this.fragmentShader="",this.vertexVariables="",this.fragmentVariables="",this.onParse=i,this.buildShaders(t),this.schema.push({value:this.mode,label:"mode",options:Object.values(dR)}),this.schema.push({value:this.visible,label:"visible"})}return te(e,[{key:"buildShaders",value:function(e){var t,n=this,i=Object.getOwnPropertyNames(e).filter((function(e){return"fragmentShader"===e||"vertexShader"===e})).reduce((function(t,n){var i;return T(T({},t),{},L({},n,null==(i=Object.getOwnPropertyDescriptor(e,n))?void 0:i.value))}),{}),r={vert:Cv()(i.vertexShader||""),frag:Cv()(i.fragmentShader||"")},a={vert:Av()(r.vert,this.renameTokens.bind(this)),frag:Av()(r.frag,this.renameTokens.bind(this))},o={vert:vv()(a.vert),frag:vv()(a.frag)},l=o.vert.map((function(e){return e.name})).indexOf("main"),g=o.frag.map((function(e){return e.name})).indexOf("main"),s={vert:l>=0?mv()(a.vert.slice(0,o.vert[l].outer[0])):"",frag:g>=0?mv()(a.frag.slice(0,o.frag[g].outer[0])):""},c={vert:l>=0?this.getShaderFromIndex(a.vert,o.vert[l].body):"",frag:g>=0?this.getShaderFromIndex(a.frag,o.frag[g].body):""};this.vertexShader=this.processFinal(c.vert,!0),this.fragmentShader=this.processFinal(c.frag),this.vertexVariables=s.vert,this.fragmentVariables=s.frag,null==(t=this.onParse)||t.call(this,this),this.schema=this.schema.filter((function(e,t){var i=e.label;return t===n.schema.findIndex((function(e){return e.label===i}))}))}},{key:"renameTokens",value:function(e){if(e.startsWith("u_")){var t=e.slice(2);return"u_".concat(this.uuid,"_").concat(t)}if(e.startsWith("v_")){var n=e.slice(2);return"v_".concat(this.uuid,"_").concat(n)}if(e.startsWith("f_")){var i=e.slice(2);return"f_".concat(this.uuid,"_").concat(i)}return e}},{key:"processFinal",value:function(e,t){var n=e.replace(/\sf_/gm," f_".concat(this.uuid,"_")).replace(/\(f_/gm,"(f_".concat(this.uuid,"_")),i=n.match(/^.*return.*$/gm),r=n.replace(/^.*return.*$/gm,"");if(null!=i&&i[0]){var a=i[0].replace("return","").trim().replace(";",""),o=this.getBlendMode(a,"lamina_finalColor");r+=t?"lamina_finalPosition = ".concat(a,";"):"lamina_finalColor = ".concat(o,";")}return r}},{key:"getShaderFromIndex",value:function(e,t){return mv()(e.slice(t[0],t[1]))}},{key:"getBlendMode",value:function(e,t){switch(this.mode){default:case"normal":return"lamina_blend_alpha(".concat(t,", ").concat(e,", ").concat(e,".a)");case"add":return"lamina_blend_add(".concat(t,", ").concat(e,", ").concat(e,".a)");case"subtract":return"lamina_blend_subtract(".concat(t,", ").concat(e,", ").concat(e,".a)");case"multiply":return"lamina_blend_multiply(".concat(t,", ").concat(e,", ").concat(e,".a)");case"lighten":return"lamina_blend_lighten(".concat(t,", ").concat(e,", ").concat(e,".a)");case"darken":return"lamina_blend_darken(".concat(t,", ").concat(e,", ").concat(e,".a)");case"divide":return"lamina_blend_divide(".concat(t,", ").concat(e,", ").concat(e,".a)");case"overlay":return"lamina_blend_overlay(".concat(t,", ").concat(e,", ").concat(e,".a)");case"screen":return"lamina_blend_screen(".concat(t,", ").concat(e,", ").concat(e,".a)");case"softlight":return"lamina_blend_softlight(".concat(t,", ").concat(e,", ").concat(e,".a)");case"reflect":return"lamina_blend_reflect(".concat(t,", ").concat(e,", ").concat(e,".a)");case"negation":return"lamina_blend_negation(".concat(t,", ").concat(e,", ").concat(e,".a)")}}},{key:"getSchema",value:function(){var e=this,t=this.schema.map((function(t){var n=t.label,i=t.options,r=j(t,oR);return T(T(T({label:n,options:i},function(e){switch(e){case"alpha":return{min:0,max:1};case"scale":return{min:0};case"map":return{image:void 0};default:return{}}}(n)),r),{},{value:IR(e[n])})}));return t}},{key:"serialize",value:function(){var e=this,t=this.constructor.name.split("$")[0],n=Object.keys(this);n=n.filter((function(e){return!["uuid","uniforms","schema","fragmentShader","vertexShader","fragmentVariables","vertexVariables","attribs","events","__r3f","onParse"].includes(e)}));var i={};n.forEach((function(t){i[t]=e[t]}));var r={};for(var a in this.uniforms){r[a.replace("u_".concat(this.uuid,"_"),"")]=IR(this.uniforms[a].value)}return{constructor:t,properties:T(T({},r),i)}}}]),e}(),mR=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this,n,T({name:"Depth"},e),(function(e){e.schema.push({value:e.mapping,label:"mapping",options:["vector","world","camera"]});var t=n.getMapping(e.uuid,e.mapping);e.fragmentShader=e.fragmentShader.replace("lamina_mapping_template",t)}))).mapping="vector",i}return te(n,null,[{key:"getMapping",value:function(e,t){switch(t){default:case"vector":return"length(v_".concat(e,"_worldPosition - u_").concat(e,"_origin)");case"world":return"length(v_".concat(e,"_position - vec3(0.))");case"camera":return"length(v_".concat(e,"_worldPosition - cameraPosition)")}}}]),n}(pR);mR.u_near=2,mR.u_far=10,mR.u_origin=new pr(0,0,0),mR.u_colorA="white",mR.u_colorB="black",mR.u_alpha=1,mR.vertexShader="\n  varying vec3 v_worldPosition;\n  varying vec3 v_position;\n\n  void main() {\n    v_worldPosition = (vec4(position, 1.0) * modelMatrix).xyz;\n    v_position = position;\n  }\n  ",mR.fragmentShader="   \n    uniform float u_alpha;\n    uniform float u_near;\n    uniform float u_far;\n    uniform float u_isVector;\n    uniform vec3 u_origin;\n    uniform vec3 u_colorA;\n    uniform vec3 u_colorB;\n\n    varying vec3 v_worldPosition;\n    varying vec3 v_position;\n\n    void main() {\n      float f_dist = lamina_mapping_template;\n      float f_depth = (f_dist - u_near) / (u_far - u_near);\n\t\t\tvec3 f_depthColor =  mix(u_colorB, u_colorA, 1.0 - clamp(f_depth, 0., 1.));\n  \n  \n      return vec4(f_depthColor, u_alpha);\n    }\n  ";var fR=function(e){ne(n,e);var t=le(n);function n(e){return $(this,n),t.call(this,n,T({name:"Color"},e))}return te(n)}(pR);fR.u_color="red",fR.u_alpha=1,fR.fragmentShader="   \n    uniform vec3 u_color;\n    uniform float u_alpha;\n\n    void main() {\n      return vec4(u_color, u_alpha);\n    }\n  ";var vR=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this,n,T({name:"noise"},e),(function(e){e.schema.push({value:e.type,label:"type",options:Object.values(CR)}),e.schema.push({value:e.mapping,label:"mapping",options:Object.values(hR)});var t=n.getNoiseFunction(e.type),i=n.getMapping(e.mapping);e.vertexShader=e.vertexShader.replace("lamina_mapping_template",i),e.fragmentShader=e.fragmentShader.replace("lamina_noise_template",t)}))).type="perlin",i.mapping="local",i}return te(n,null,[{key:"getNoiseFunction",value:function(e){switch(e){default:case"perlin":return"lamina_noise_perlin";case"simplex":return"lamina_noise_simplex";case"cell":return"lamina_noise_worley";case"white":return"lamina_noise_white";case"curl":return"lamina_noise_swirl"}}},{key:"getMapping",value:function(e){switch(e){default:case"local":return"position";case"world":return"(modelMatrix * vec4(position,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}]),n}(pR);vR.u_colorA="#666666",vR.u_colorB="#666666",vR.u_colorC="#FFFFFF",vR.u_colorD="#FFFFFF",vR.u_alpha=1,vR.u_scale=1,vR.u_offset=new pr(0,0,0),vR.vertexShader="\n    varying vec3 v_position;\n\n    void main() {\n        v_position = lamina_mapping_template;\n    }\n  ",vR.fragmentShader="   \n    uniform vec3 u_colorA;\n    uniform vec3 u_colorB;\n    uniform vec3 u_colorC;\n    uniform vec3 u_colorD;\n    uniform vec3 u_offset;\n\n    uniform float u_alpha;\n    uniform float u_scale;\n\n    varying vec3 v_position;\n\n\n    void main() {\n        float f_n = lamina_noise_template((v_position + u_offset) * u_scale);\n\n        float f_step1 = 0.;\n        float f_step2 = 0.2;\n        float f_step3 = 0.6;\n        float f_step4 = 1.;\n\n        vec3 f_color = mix(u_colorA, u_colorB, smoothstep(f_step1, f_step2, f_n));\n        f_color = mix(f_color, u_colorC, smoothstep(f_step2, f_step3, f_n));\n        f_color = mix(f_color, u_colorD, smoothstep(f_step3, f_step4, f_n));\n\n        return vec4(f_color, u_alpha);\n    }\n  ";var bR=function(e){ne(n,e);var t=le(n);function n(e){return $(this,n),t.call(this,n,T({name:"Fresnel"},e))}return te(n)}(pR);bR.u_color="white",bR.u_alpha=1,bR.u_bias=0,bR.u_intensity=1,bR.u_power=2,bR.u_factor=1,bR.vertexShader="\n    varying vec3 v_worldPosition;\n    varying vec3 v_worldNormal;\n\n    void main() {\n        v_worldPosition = vec3(-viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2]);\n        v_worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );\n        \n    }\n  ",bR.fragmentShader="   \n    uniform vec3 u_color;\n    uniform float u_alpha;\n    uniform float u_bias;\n    uniform float u_intensity;\n    uniform float u_power;\n    uniform float u_factor;\n\n    varying vec3 v_worldPosition;\n    varying vec3 v_worldNormal;\n\n    void main() {\n        float f_a = (u_factor  + dot(v_worldPosition, v_worldNormal));\n        float f_fresnel = u_bias + u_intensity * pow(abs(f_a), u_power);\n\n        f_fresnel = clamp(f_fresnel, 0.0, 1.0);\n        return vec4(f_fresnel * u_color, u_alpha);\n    }\n  ";var yR=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this,n,T({name:"Gradient"},e),(function(e){e.schema.push({value:e.axes,label:"axes",options:["x","y","z"]}),e.schema.push({value:e.mapping,label:"mapping",options:Object.values(hR)});var t=n.getMapping(e.mapping);e.vertexShader=e.vertexShader.replace("lamina_mapping_template",t||"local"),e.fragmentShader=e.fragmentShader.replace("axes_template",e.axes||"x")}))).axes="x",i.mapping="local",i}return te(n,null,[{key:"getMapping",value:function(e){switch(e){default:case"local":return"position";case"world":return"(modelMatrix * vec4(position,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}]),n}(pR);yR.u_colorA="white",yR.u_colorB="black",yR.u_alpha=1,yR.u_start=1,yR.u_end=-1,yR.u_contrast=1,yR.vertexShader="\n\t\tvarying vec3 v_position;\n\n\t\tvod main() {\n      v_position = lamina_mapping_template;\n\t\t}\n  ",yR.fragmentShader="   \n    uniform vec3 u_colorA;\n    uniform vec3 u_colorB;\n    uniform vec3 u_axis;\n    uniform float u_alpha;\n    uniform float u_start;\n    uniform float u_end;\n    uniform float u_contrast;\n\n\t\tvarying vec3 v_position;\n\n    void main() {\n\n      float f_step = smoothstep(u_start, u_end, v_position.axes_template * u_contrast);\n      vec3 f_color = mix(u_colorA, u_colorB, f_step);\n\n      return vec4(f_color, u_alpha);\n    }\n  ";var GR=function(e){ne(n,e);var t=le(n);function n(e){return $(this,n),t.call(this,n,T({name:"Matcap"},e))}return te(n)}(pR);GR.u_alpha=1,GR.u_map=void 0,GR.vertexShader="\n    varying vec3 v_position;\n    varying vec3 v_normal;\n    \n    void main() {\n      v_position = normalize( vec3( modelViewMatrix * vec4( position, 1.0 ) ) );\n      v_normal = normalize( normalMatrix * normal );\n    }\n    ",GR.fragmentShader=" \n\t\tuniform sampler2D u_map;  \n\t\tuniform float u_alpha;  \n\t\tvarying vec3 v_position;\n\t\tvarying vec3 v_normal;\n\n\t\t\n    void main() {\n\t\t\tvec3 f_r = reflect( v_position, v_normal );\n\t\t\tfloat f_m = 2. * sqrt( pow( f_r.x, 2. ) + pow( f_r.y, 2. ) + pow( f_r.z + 1., 2. ) );\n\t\t\tvec2 f_vN = f_r.xy / f_m + .5;\n\n\t\t\tvec3 f_base = texture2D(u_map, f_vN).rgb;\n\n      return vec4(f_base, u_alpha);\n    }\n  ";var BR=function(e){ne(n,e);var t=le(n);function n(e){return $(this,n),t.call(this,n,T({name:"Texture"},e))}return te(n)}(pR);BR.u_alpha=1,BR.u_map=void 0,BR.vertexShader="\n    varying vec2 v_uv;\n    \n    void main() {\n        v_uv = uv;\n    }\n    ",BR.fragmentShader=" \n\t\tuniform sampler2D u_map;  \n\t\tuniform float u_alpha;  \n\t\tvarying vec2 v_uv;\n\n    void main() {\n\t\t\tvec4 f_color = texture2D(u_map, v_uv);\n      return vec4(f_color.rgb, f_color.a * u_alpha);\n    }\n  ";var ZR=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),(i=t.call(this,n,T({name:"Displace"},e),(function(e){e.schema.push({value:e.type,label:"type",options:Object.values(CR)}),e.schema.push({value:e.mapping,label:"mapping",options:Object.values(hR)});var t=n.getNoiseFunction(e.type),i=n.getMapping(e.mapping);e.vertexVariables=e.vertexVariables.replace("lamina_mapping_template",i),e.vertexVariables=e.vertexVariables.replace("lamina_noise_template",t)}))).type="perlin",i.mapping="local",i}return te(n,null,[{key:"getNoiseFunction",value:function(e){switch(e){default:case"perlin":return"lamina_noise_perlin";case"simplex":return"lamina_noise_simplex";case"cell":return"lamina_noise_worley";case"white":return"lamina_noise_white";case"curl":return"lamina_noise_swirl"}}},{key:"getMapping",value:function(e){switch(e){default:case"local":return"p";case"world":return"(modelMatrix * vec4(p,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}]),n}(pR);ZR.u_strength=1,ZR.u_scale=1,ZR.u_offset=new pr(0,0,0),ZR.vertexShader="\n       \n      uniform float u_strength;\n      uniform float u_scale;\n      uniform vec3 u_offset;\n\n      vec3 displace(vec3 p) {\n\t\t\t\tvec3 f_position = lamina_mapping_template;\n        float f_n = lamina_noise_template((f_position + u_offset) * u_scale) * u_strength;\n        vec3 f_newPosition = p + (f_n * normal);\n\n\t\t\t\treturn f_newPosition;\n      }\n\n      \n\t\t\tvec3 orthogonal(vec3 v) {\n  \t\t  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)\n  \t\t  : vec3(0.0, -v.z, v.y));\n  \t\t}\n  \t\tvec3 recalcNormals(vec3 newPos) {\n  \t\t  float offset = 0.001;\n  \t\t  vec3 tangent = orthogonal(normal);\n  \t\t  vec3 bitangent = normalize(cross(normal, tangent));\n  \t\t  vec3 neighbour1 = position + tangent * offset;\n  \t\t  vec3 neighbour2 = position + bitangent * offset;\n  \t\t  vec3 displacedNeighbour1 = displace(neighbour1);\n  \t\t  vec3 displacedNeighbour2 = displace(neighbour2);\n  \t\t  vec3 displacedTangent = displacedNeighbour1 - newPos;\n  \t\t  vec3 displacedBitangent = displacedNeighbour2 - newPos;\n  \t\t  return normalize(cross(displacedTangent, displacedBitangent));\n  \t\t}\n  \n  \n      void main() {\n       \n\t\t\t\tvec3 f_newPosition = displace(position);\n        lamina_finalNormal = recalcNormals(f_newPosition);\n\n        return f_newPosition;\n      }\n    ";var wR=function(e){ne(n,e);var t=le(n);function n(e){return $(this,n),t.call(this,n,T({name:"Normal"},e))}return te(n)}(pR);wR.u_alpha=1,wR.u_direction=new pr(1,1,1),wR.vertexShader="   \n  varying vec3 v_normals; \n\n  void main() {\n    v_normals = normal;\n  }\n",wR.fragmentShader="   \n  \tuniform float u_alpha;\n  \tuniform vec3 u_color;\n  \tuniform vec3 u_direction;\n\n\t\tvarying vec3 v_normals;\n\n    void main() {\n\t\t\tvec3 f_normalColor = vec3(1.);\n      f_normalColor.x = v_normals.x * u_direction.x;\n      f_normalColor.y = v_normals.y * u_direction.y;\n      f_normalColor.z = v_normals.z * u_direction.z;\n\n      return vec4(f_normalColor, u_alpha);\n    }\n  ";var xR="\n\n// From: https://gist.github.com/patriciogonzalezvivo/670c22f3966e662d2f83\n// Huge thanks to the creators of these algorithms\n\nfloat lamina_noise_mod289(float x){return x - floor(x * (1.0 / 289.0)) * 289.0;}\nvec4 lamina_noise_mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}\nvec4 lamina_noise_perm(vec4 x){return lamina_noise_mod289(((x * 34.0) + 1.0) * x);}\nvec4 lamina_noise_permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }\nvec4 lamina_noise_taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }\n\n\nfloat lamina_noise_white(vec2 p) {\n  return fract(1e4 * sin(17.0 * p.x + p.y * 0.1) *\n               (0.1 + abs(sin(p.y * 13.0 + p.x))));\n}\n\nfloat lamina_noise_white(vec3 p) {\n  return lamina_noise_white(p.xy);\n}\n\n\nvec3 lamina_noise_fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }\n\nfloat lamina_noise_perlin(vec3 P) {\n  vec3 Pi0 = floor(P);        // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P);        // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = lamina_noise_permute(lamina_noise_permute(ix) + iy);\n  vec4 ixy0 = lamina_noise_permute(ixy + iz0);\n  vec4 ixy1 = lamina_noise_permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n\n  vec4 norm0 = lamina_noise_taylorInvSqrt(\n      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = lamina_noise_taylorInvSqrt(\n      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = lamina_noise_fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),\n                 fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return lamina_normalize(2.2 * n_xyz);\n}\n\nfloat lamina_noise_simplex(vec3 v) {\n  const vec2 C = vec2(1.0 / 6.0, 1.0 / 3.0);\n  const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);\n\n  // First corner\n  vec3 i = floor(v + dot(v, C.yyy));\n  vec3 x0 = v - i + dot(i, C.xxx);\n\n  // Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min(g.xyz, l.zxy);\n  vec3 i2 = max(g.xyz, l.zxy);\n\n  //  x0 = x0 - 0. + 0.0 * C\n  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n  // Permutations\n  i = mod(i, 289.0);\n  vec4 p = lamina_noise_permute(lamina_noise_permute(lamina_noise_permute(i.z + vec4(0.0, i1.z, i2.z, 1.0)) + i.y +\n                             vec4(0.0, i1.y, i2.y, 1.0)) +\n                    i.x + vec4(0.0, i1.x, i2.x, 1.0));\n\n  // Gradients\n  // ( N*N points uniformly over a square, mapped onto an octahedron.)\n  float n_ = 1.0 / 7.0; // N=7\n  vec3 ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z); //  mod(p,N*N)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_); // mod(j,N)\n\n  vec4 x = x_ * ns.x + ns.yyyy;\n  vec4 y = y_ * ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4(x.xy, y.xy);\n  vec4 b1 = vec4(x.zw, y.zw);\n\n  vec4 s0 = floor(b0) * 2.0 + 1.0;\n  vec4 s1 = floor(b1) * 2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy;\n  vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww;\n\n  vec3 p0 = vec3(a0.xy, h.x);\n  vec3 p1 = vec3(a0.zw, h.y);\n  vec3 p2 = vec3(a1.xy, h.z);\n  vec3 p3 = vec3(a1.zw, h.w);\n\n  // Normalise gradients\n  vec4 norm =\n      lamina_noise_taylorInvSqrt(vec4(dot(p0, p0), dot(p1, p1), dot(p2, p2), dot(p3, p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n  // Mix final noise value\n  vec4 m =\n      max(0.6 - vec4(dot(x0, x0), dot(x1, x1), dot(x2, x2), dot(x3, x3)), 0.0);\n  m = m * m;\n  return lamina_normalize(42.0 *\n         dot(m * m, vec4(dot(p0, x0), dot(p1, x1), dot(p2, x2), dot(p3, x3))));\n}\n\nvec3 lamina_noise_simplex3(vec3 x) {\n  float s = lamina_noise_simplex(vec3(x));\n  float s1 = lamina_noise_simplex(vec3(x.y - 19.1, x.z + 33.4, x.x + 47.2));\n  float s2 = lamina_noise_simplex(vec3(x.z + 74.2, x.x - 124.5, x.y + 99.4));\n  vec3 c = vec3(s, s1, s2);\n  return c;\n}\n\nvec3 lamina_noise_curl(vec3 p) {\n  const float e = .1;\n  vec3 dx = vec3(e, 0.0, 0.0);\n  vec3 dy = vec3(0.0, e, 0.0);\n  vec3 dz = vec3(0.0, 0.0, e);\n\n  vec3 p_x0 = lamina_noise_simplex3(p - dx);\n  vec3 p_x1 = lamina_noise_simplex3(p + dx);\n  vec3 p_y0 = lamina_noise_simplex3(p - dy);\n  vec3 p_y1 = lamina_noise_simplex3(p + dy);\n  vec3 p_z0 = lamina_noise_simplex3(p - dz);\n  vec3 p_z1 = lamina_noise_simplex3(p + dz);\n\n  float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;\n  float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;\n  float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;\n\n  const float divisor = 1.0 / (2.0 * e);\n  return normalize(vec3(x, y, z) * divisor);\n}\n\nvec3 lamina_permute(vec3 x) {\n  return mod((34.0 * x + 1.0) * x, 289.0);\n}\n\nvec3 lamina_dist(vec3 x, vec3 y, vec3 z,  bool manhattanDistance) {\n  return manhattanDistance ?  abs(x) + abs(y) + abs(z) :  (x * x + y * y + z * z);\n}\n\n// From: https://github.com/Erkaman/glsl-worley\nfloat lamina_noise_worley(vec3 P) {\n  float jitter = 1.;\n  bool manhattanDistance = false; \n\n  float K = 0.142857142857; // 1/7\n  float Ko = 0.428571428571; // 1/2-K/2\n  float  K2 = 0.020408163265306; // 1/(7*7)\n  float Kz = 0.166666666667; // 1/6\n  float Kzo = 0.416666666667; // 1/2-1/6*2\n\n\tvec3 Pi = mod(floor(P), 289.0);\n \tvec3 Pf = fract(P) - 0.5;\n\n\tvec3 Pfx = Pf.x + vec3(1.0, 0.0, -1.0);\n\tvec3 Pfy = Pf.y + vec3(1.0, 0.0, -1.0);\n\tvec3 Pfz = Pf.z + vec3(1.0, 0.0, -1.0);\n\n\tvec3 p = lamina_permute(Pi.x + vec3(-1.0, 0.0, 1.0));\n\tvec3 p1 = lamina_permute(p + Pi.y - 1.0);\n\tvec3 p2 = lamina_permute(p + Pi.y);\n\tvec3 p3 = lamina_permute(p + Pi.y + 1.0);\n\n\tvec3 p11 = lamina_permute(p1 + Pi.z - 1.0);\n\tvec3 p12 = lamina_permute(p1 + Pi.z);\n\tvec3 p13 = lamina_permute(p1 + Pi.z + 1.0);\n\n\tvec3 p21 = lamina_permute(p2 + Pi.z - 1.0);\n\tvec3 p22 = lamina_permute(p2 + Pi.z);\n\tvec3 p23 = lamina_permute(p2 + Pi.z + 1.0);\n\n\tvec3 p31 = lamina_permute(p3 + Pi.z - 1.0);\n\tvec3 p32 = lamina_permute(p3 + Pi.z);\n\tvec3 p33 = lamina_permute(p3 + Pi.z + 1.0);\n\n\tvec3 ox11 = fract(p11*K) - Ko;\n\tvec3 oy11 = mod(floor(p11*K), 7.0)*K - Ko;\n\tvec3 oz11 = floor(p11*K2)*Kz - Kzo; // p11 < 289 guaranteed\n\n\tvec3 ox12 = fract(p12*K) - Ko;\n\tvec3 oy12 = mod(floor(p12*K), 7.0)*K - Ko;\n\tvec3 oz12 = floor(p12*K2)*Kz - Kzo;\n\n\tvec3 ox13 = fract(p13*K) - Ko;\n\tvec3 oy13 = mod(floor(p13*K), 7.0)*K - Ko;\n\tvec3 oz13 = floor(p13*K2)*Kz - Kzo;\n\n\tvec3 ox21 = fract(p21*K) - Ko;\n\tvec3 oy21 = mod(floor(p21*K), 7.0)*K - Ko;\n\tvec3 oz21 = floor(p21*K2)*Kz - Kzo;\n\n\tvec3 ox22 = fract(p22*K) - Ko;\n\tvec3 oy22 = mod(floor(p22*K), 7.0)*K - Ko;\n\tvec3 oz22 = floor(p22*K2)*Kz - Kzo;\n\n\tvec3 ox23 = fract(p23*K) - Ko;\n\tvec3 oy23 = mod(floor(p23*K), 7.0)*K - Ko;\n\tvec3 oz23 = floor(p23*K2)*Kz - Kzo;\n\n\tvec3 ox31 = fract(p31*K) - Ko;\n\tvec3 oy31 = mod(floor(p31*K), 7.0)*K - Ko;\n\tvec3 oz31 = floor(p31*K2)*Kz - Kzo;\n\n\tvec3 ox32 = fract(p32*K) - Ko;\n\tvec3 oy32 = mod(floor(p32*K), 7.0)*K - Ko;\n\tvec3 oz32 = floor(p32*K2)*Kz - Kzo;\n\n\tvec3 ox33 = fract(p33*K) - Ko;\n\tvec3 oy33 = mod(floor(p33*K), 7.0)*K - Ko;\n\tvec3 oz33 = floor(p33*K2)*Kz - Kzo;\n\n\tvec3 dx11 = Pfx + jitter*ox11;\n\tvec3 dy11 = Pfy.x + jitter*oy11;\n\tvec3 dz11 = Pfz.x + jitter*oz11;\n\n\tvec3 dx12 = Pfx + jitter*ox12;\n\tvec3 dy12 = Pfy.x + jitter*oy12;\n\tvec3 dz12 = Pfz.y + jitter*oz12;\n\n\tvec3 dx13 = Pfx + jitter*ox13;\n\tvec3 dy13 = Pfy.x + jitter*oy13;\n\tvec3 dz13 = Pfz.z + jitter*oz13;\n\n\tvec3 dx21 = Pfx + jitter*ox21;\n\tvec3 dy21 = Pfy.y + jitter*oy21;\n\tvec3 dz21 = Pfz.x + jitter*oz21;\n\n\tvec3 dx22 = Pfx + jitter*ox22;\n\tvec3 dy22 = Pfy.y + jitter*oy22;\n\tvec3 dz22 = Pfz.y + jitter*oz22;\n\n\tvec3 dx23 = Pfx + jitter*ox23;\n\tvec3 dy23 = Pfy.y + jitter*oy23;\n\tvec3 dz23 = Pfz.z + jitter*oz23;\n\n\tvec3 dx31 = Pfx + jitter*ox31;\n\tvec3 dy31 = Pfy.z + jitter*oy31;\n\tvec3 dz31 = Pfz.x + jitter*oz31;\n\n\tvec3 dx32 = Pfx + jitter*ox32;\n\tvec3 dy32 = Pfy.z + jitter*oy32;\n\tvec3 dz32 = Pfz.y + jitter*oz32;\n\n\tvec3 dx33 = Pfx + jitter*ox33;\n\tvec3 dy33 = Pfy.z + jitter*oy33;\n\tvec3 dz33 = Pfz.z + jitter*oz33;\n\n\tvec3 d11 = lamina_dist(dx11, dy11, dz11, manhattanDistance);\n\tvec3 d12 = lamina_dist(dx12, dy12, dz12, manhattanDistance);\n\tvec3 d13 = lamina_dist(dx13, dy13, dz13, manhattanDistance);\n\tvec3 d21 = lamina_dist(dx21, dy21, dz21, manhattanDistance);\n\tvec3 d22 = lamina_dist(dx22, dy22, dz22, manhattanDistance);\n\tvec3 d23 = lamina_dist(dx23, dy23, dz23, manhattanDistance);\n\tvec3 d31 = lamina_dist(dx31, dy31, dz31, manhattanDistance);\n\tvec3 d32 = lamina_dist(dx32, dy32, dz32, manhattanDistance);\n\tvec3 d33 = lamina_dist(dx33, dy33, dz33, manhattanDistance);\n\n\tvec3 d1a = min(d11, d12);\n\td12 = max(d11, d12);\n\td11 = min(d1a, d13); // Smallest now not in d12 or d13\n\td13 = max(d1a, d13);\n\td12 = min(d12, d13); // 2nd smallest now not in d13\n\tvec3 d2a = min(d21, d22);\n\td22 = max(d21, d22);\n\td21 = min(d2a, d23); // Smallest now not in d22 or d23\n\td23 = max(d2a, d23);\n\td22 = min(d22, d23); // 2nd smallest now not in d23\n\tvec3 d3a = min(d31, d32);\n\td32 = max(d31, d32);\n\td31 = min(d3a, d33); // Smallest now not in d32 or d33\n\td33 = max(d3a, d33);\n\td32 = min(d32, d33); // 2nd smallest now not in d33\n\tvec3 da = min(d11, d21);\n\td21 = max(d11, d21);\n\td11 = min(da, d31); // Smallest now in d11\n\td31 = max(da, d31); // 2nd smallest now not in d31\n\td11.xy = (d11.x < d11.y) ? d11.xy : d11.yx;\n\td11.xz = (d11.x < d11.z) ? d11.xz : d11.zx; // d11.x now smallest\n\td12 = min(d12, d21); // 2nd smallest now not in d21\n\td12 = min(d12, d22); // nor in d22\n\td12 = min(d12, d31); // nor in d31\n\td12 = min(d12, d32); // nor in d32\n\td11.yz = min(d11.yz,d12.xy); // nor in d12.yz\n\td11.y = min(d11.y,d12.z); // Only two more to go\n\td11.y = min(d11.y,d11.z); // Done! (Phew!)\n\n  vec2 F = sqrt(d11.xy);\n\treturn F.x; // F1, F2\n\n}\n\nfloat lamina_noise_swirl(vec3 position) {\n    float scale = 0.1;\n    float freq = 4. * scale;\n    float t = 1.;\n\n    vec3 pos = (position * scale) + lamina_noise_curl(position * 7. * scale);\n\n    float worley1 = 1. - lamina_noise_worley((pos * (freq * 2.)) +  (t * 2.));\n    float worley2 = 1. - lamina_noise_worley((pos * (freq * 4.)) +  (t * 4.));\n    float worley3 = 1. - lamina_noise_worley((pos * (freq * 8.)) +  (t * 8.));\n    float worley4 = 1. - lamina_noise_worley((pos * (freq * 16.)) +  (t * 16.));\n    \n    float fbm1 = worley1 * .625 + worley2 * .25 + worley3 * .125;\n    float fbm2 = worley2 * .625 + worley3 * .25 + worley4 * .125;\n    float fbm3 = worley3 * .75 + worley4 * .25;\n\n    vec3 curlWorleyFbm = vec3(fbm1, fbm2, fbm3);\n    float curlWorley = curlWorleyFbm.r * .625 + curlWorleyFbm.g * .25 + \n        curlWorleyFbm.b * .125;\n\n    return curlWorley;\n}\n  \n  \n",SR="\n\nfloat lamina_map(float value, float min1, float max1, float min2, float max2) {\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\n\nfloat lamina_normalize(float v) { return lamina_map(v, -1.0, 1.0, 0.0, 1.0); }\n",WR=function(e){ne(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.color,a=i.alpha,o=i.lighting,l=i.layers,g=i.name,s=j(i,lR);$(this,n),(e=t.call(this,T({baseMaterial:AR[o||"basic"]},s))).name="LayerMaterial",e.layers=[],e.lighting="basic";var c=r||"white",u=null!=a?a:1;return e.uniforms={u_lamina_color:{value:"string"===typeof c?new ir(c).convertSRGBToLinear():c},u_lamina_alpha:{value:u}},e.layers=l||e.layers,e.lighting=o||e.lighting,e.name=g||e.name,e.refresh(),e}return te(n,[{key:"genShaders",value:function(){var e="",t="",n="",i="",r={};return this.layers.filter((function(e){return e.visible})).forEach((function(a){e+=a.vertexVariables+"\n",t+=a.fragmentVariables+"\n",n+=a.vertexShader+"\n",i+=a.fragmentShader+"\n",r=T(T({},r),a.uniforms)})),{uniforms:r=T(T({},r),this.uniforms),vertexShader:"\n        ".concat(SR,"\n        ").concat(xR,"\n        ").concat(e,"\n\n        void main() {\n          vec3 lamina_finalPosition = position;\n          vec3 lamina_finalNormal = normal;\n\n          ").concat(n,"\n\n          csm_Position = lamina_finalPosition;\n          csm_Normal = lamina_finalNormal;\n        }\n        "),fragmentShader:"\n        ".concat(SR,"\n        ").concat(xR,"\n        ").concat("\nvec4 lamina_blend_add(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(min(x.xyz + y.xyz, 1.0) * opacity + x.xyz * (1.0 - opacity), x.a);\n\n}\nvec3 lamina_blend_alpha(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn y * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 lamina_blend_alpha(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\tfloat a = min(y.a, opacity);\n\n\treturn vec4(lamina_blend_alpha(x.rgb, y.rgb, a), x.a);\n\n}\nvec4 lamina_blend_average(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4((x.xyz + y.xyz) * 0.5 * opacity + x.xyz * (1.0 - opacity), x.a);\n\n}\nfloat lamina_blend_color_burn(const in float x, const in float y) {\n\n\treturn (y == 0.0) ? y : max(1.0 - (1.0 - x) / y, 0.0);\n\n}\n\nvec4 lamina_blend_color_burn(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\tvec4 z = vec4(\n\t\tlamina_blend_color_burn(x.r, y.r),\n\t\tlamina_blend_color_burn(x.g, y.g),\n\t\tlamina_blend_color_burn(x.b, y.b),\n\t\tlamina_blend_color_burn(x.a, y.a)\n\t);\n\n\treturn vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);\n\n}\nfloat lamina_blend_color_dodge(const in float x, const in float y) {\n\n\treturn (y == 1.0) ? y : min(x / (1.0 - y), 1.0);\n\n}\n\nvec4 lamina_blend_color_dodge(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\tvec4 z = vec4(\n\t\tlamina_blend_color_dodge(x.r, y.r),\n\t\tlamina_blend_color_dodge(x.g, y.g),\n\t\tlamina_blend_color_dodge(x.b, y.b),\n\t\tlamina_blend_color_dodge(x.a, y.a)\n\t);\n\n\treturn vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);\n\n}\nvec4 lamina_blend_darken(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(min(x.xyz, y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);\n\n}\nvec4 lamina_blend_difference(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(abs(x.xyz - y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);\n\n}\nfloat lamina_blend_divide(const in float x, const in float y) {\n\n\treturn (y > 0.0) ? min(x / y, 1.0) : 1.0;\n\n}\n\nvec4 lamina_blend_divide(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\tvec4 z = vec4(\n\t\tlamina_blend_divide(x.r, y.r),\n\t\tlamina_blend_divide(x.g, y.g),\n\t\tlamina_blend_divide(x.b, y.b),\n\t\tlamina_blend_divide(x.a, y.a)\n\t);\n\n\treturn vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);\n\n}\nvec4 lamina_blend_exclusion(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4((x.xyz + y.xyz - 2.0 * x.xyz * y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);\n\n}\nvec4 lamina_blend_lighten(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(max(x.xyz, y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);\n\n}\nvec4 lamina_blend_multiply(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4( x.xyz * y.xyz * opacity + x.xyz * (1.0 - opacity), x.a);\n\n}\nvec4 lamina_blend_negation(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4((1.0 - abs(1.0 - x.xyz - y.xyz)) * opacity + x.xyz * (1.0 - opacity), x.a);\n\n}\nvec4 lamina_blend_normal(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(y.xyz * opacity + x.xyz * (1.0 - opacity), x.a);\n\n}\nfloat lamina_blend_overlay(const in float x, const in float y) {\n\n\treturn (x < 0.5) ? (2.0 * x * y) : (1.0 - 2.0 * (1.0 - x) * (1.0 - y));\n\n}\n\nvec4 lamina_blend_overlay(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\tvec4 z = vec4(\n\t\tlamina_blend_overlay(x.r, y.r),\n\t\tlamina_blend_overlay(x.g, y.g),\n\t\tlamina_blend_overlay(x.b, y.b),\n\t\tlamina_blend_overlay(x.a, y.a)\n\t);\n\n\treturn vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);\n\n}\nfloat lamina_blend_reflect(const in float x, const in float y) {\n\n\treturn (y == 1.0) ? y : min(x * x / (1.0 - y), 1.0);\n\n}\n\nvec4 lamina_blend_reflect(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\tvec4 z = vec4(\n\t\tlamina_blend_reflect(x.r, y.r),\n\t\tlamina_blend_reflect(x.g, y.g),\n\t\tlamina_blend_reflect(x.b, y.b),\n\t\tlamina_blend_reflect(x.a, y.a)\n\t);\n\n\treturn vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);\n\n}\nvec4 lamina_blend_screen(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4((1.0 - (1.0 - x.xyz) * (1.0 - y.xyz)) * opacity + x.xyz * (1.0 - opacity), x.a);\n\n}\nfloat lamina_blend_softlight(const in float x, const in float y) {\n\n\treturn (y < 0.5) ?\n\t\t(2.0 * x * y + x * x * (1.0 - 2.0 * y)) :\n\t\t(sqrt(x) * (2.0 * y - 1.0) + 2.0 * x * (1.0 - y));\n\n}\n\nvec4 lamina_blend_softlight(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\tvec4 z = vec4(\n\t\tlamina_blend_softlight(x.r, y.r),\n\t\tlamina_blend_softlight(x.g, y.g),\n\t\tlamina_blend_softlight(x.b, y.b),\n\t\tlamina_blend_softlight(x.a, y.a)\n\t);\n\n\treturn vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);\n\n}\nvec4 lamina_blend_subtract(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(max(x.xyz + y.xyz - 1.0, 0.0) * opacity + x.xyz * (1.0 - opacity), x.a);\n\n}\n\n","\n        ").concat(t,"\n\n        uniform vec3 u_lamina_color;\n        uniform float u_lamina_alpha;\n\n        void main() {\n          vec4 lamina_finalColor = vec4(u_lamina_color, u_lamina_alpha);\n\n          ").concat(i,"\n\n          csm_DiffuseColor = lamina_finalColor;\n         \n        }\n        ")}}},{key:"refresh",value:function(){var e=this.genShaders(),t=e.uniforms,i=e.fragmentShader,r=e.vertexShader;Ie(ie(n.prototype),"update",this).call(this,{fragmentShader:i,vertexShader:r,uniforms:t})}},{key:"serialize",value:function(){return{constructor:"LayerMaterial",properties:{color:this.color,alpha:this.alpha,name:this.name,lighting:this.lighting}}}},{key:"color",get:function(){var e,t;return null==(e=this.uniforms)||null==(t=e.u_lamina_color)?void 0:t.value},set:function(e){var t,n;null!=(t=this.uniforms)&&null!=(n=t.u_lamina_color)&&n.value&&(this.uniforms.u_lamina_color.value="string"===typeof e?new ir(e).convertSRGBToLinear():e)}},{key:"alpha",get:function(){return this.uniforms.u_lamina_alpha.value},set:function(e){this.uniforms.u_lamina_alpha.value=e}}]),n}(Yv);oA({LayerMaterial:WR});oA({LayerMaterial:WR,Depth_:mR,Color_:fR,Noise_:vR,Fresnel_:bR,Gradient_:yR,Matcap_:GR,Texture_:BR,Displace_:ZR,Normal_:wR});var VR=i.forwardRef((function(e,t){var n=e.children,r=j(e,gR),a=i.useRef(null);(0,i.useImperativeHandle)(t,(function(){return a.current})),i.useLayoutEffect((function(){a.current.layers=a.current.__r3f.objects,a.current.refresh()}),[n]);var o=c((0,i.useMemo)((function(){return cR(r)}),[r]),2),l=o[0],g=o[1];return i.createElement("layerMaterial",u({args:[l],ref:a},g),n)}));function RR(e){return[{mode:null==e?void 0:e.mode,visible:null==e?void 0:e.visible,type:null==e?void 0:e.type,mapping:null==e?void 0:e.mapping,map:null==e?void 0:e.map,axes:null==e?void 0:e.axes}]}var qR=i.forwardRef((function(e,t){return i.createElement("depth_",u({args:RR(e),ref:t},e))}));function kR(){var e=(0,i.useRef)();return vA((function(t,n){e.current.rotation.x=e.current.rotation.y=e.current.rotation.z+=n})),(0,OA.jsxs)("mesh",{ref:e,scale:100,children:[(0,OA.jsx)("sphereGeometry",{args:[1,64,64]}),(0,OA.jsxs)(VR,{color:"purple",attach:"material",side:we,children:[(0,OA.jsx)(qR,{colorA:"purple",colorB:"red",alpha:.5,mode:"multiply",near:0,far:300,origin:[10,10,10]}),(0,OA.jsx)(qR,{colorA:"blue",colorB:"blue",alpha:.5,mode:"multiply",near:0,far:300,origin:[100,100,100]})]})]})}function XR(){return(0,OA.jsx)("div",{className:"h-screen w-screen cursor-pointer",children:(0,OA.jsxs)(JA,{width:"100%",style:{maxWidth:"100% !important"},camera:{fov:35,zoom:1.2,near:1,far:1e4,angle:1,position:[0,100,20]},children:[(0,OA.jsx)(Iv,{}),(0,OA.jsx)(kR,T({},{base:"#ff4eb8",colorA:"#00ffff",colorB:"#ff00e3"})),(0,OA.jsx)(PA,{depth:15,radius:40,count:1e4,factor:5,saturation:0,fade:!0,speed:1}),(0,OA.jsx)("ambientLight",{intensity:.5}),(0,OA.jsx)("spotLight",{position:[15,30,20],angle:.8}),(0,OA.jsxs)(Pf,{children:[(0,OA.jsx)(gv,{name:"NebulosaInnova",position:[17.118,5.562,2],texturePath:"/nebulosaInnova.jpg",positionTexto:[14.118,3.562,10]}),(0,OA.jsx)(gv,{"cursor-pointer":!0,name:"Supernova",position:[10.58,-14.56,-12],texturePath:"/supernova.jpg",positionTexto:[7.58,-14.56,-4]}),(0,OA.jsx)(gv,{name:"Ideaverso",position:[-10.58,-14.56,-12],texturePath:"/Ideaverso.jpg",positionTexto:[-13.58,-14.56,-4]}),(0,OA.jsx)(gv,{name:"LibreriaOrion",position:[-17.18,5.56,1],texturePath:"/libreriaOrion.jpg",positionTexto:[-20.118,5.562,9]}),(0,OA.jsx)(gv,{name:"MeteoroGame",position:[0,18,12],texturePath:"/meteoroGame.jpg",positionTexto:[-3,18,20]})]})]})})}var YR={"planeta-1":{titulo:"Nebulosa Innova"},"planeta-2":{titulo:"SUPERNOVA"},"planeta-3":{titulo:"Ideaverso"},"planeta-4":{titulo:"nosecomosellama"},"planeta-5":{titulo:"nosecomosellama2"}};function NR(){var e=function(){var e=(0,i.useContext)(y).matches,t=e[e.length-1];return t?t.params:{}}().plantetId,t=YR[e];return(0,OA.jsxs)("div",{children:[" Detalles de planeta:",t.titulo]})}var KR=["history"],HR=function(e){var t=e.history,n=j(e,KR),r=c((0,i.useState)({action:t.action,location:t.location}),2),a=r[0],o=r[1];return(0,i.useLayoutEffect)((function(){return t.listen(o)}),[t]),(0,OA.jsx)(z,T(T({},n),{},{location:a.location,navigationType:a.action,navigator:t}))};var zR=function(e){e.fixed;var t=c(i.useState(!1),2);return t[0],t[1],(0,OA.jsx)("nav",{className:"  px-2 sm:px-4 py-4 rounded bg-inherit",children:(0,OA.jsx)("div",{className:"flex justify-center",children:(0,OA.jsx)("a",{href:"",className:"flex items-center",children:(0,OA.jsx)("img",{onClick:function(){jf.push("/Home")},src:"https://i.ibb.co/Ltdcnqz/LOGO-SPACE-BANG.png",className:" h-6 sm:h-9",alt:"Space Bang logo"})})})})},MR=n.p+"static/media/Logo_master.bdf226c5bcfc920be979.png",FR=n.p+"static/media/Logo_intraemprendedor.39e2d94bde70e5829983.png",LR=n.p+"static/media/Logo_trainer.b5ca75a323125b0d49e0.png";function _R(){return(0,OA.jsxs)("div",{className:"h-screen bg-[url('https://i.ibb.co/vZNfxqF/FONDO-1.png')]",children:[(0,OA.jsx)(zR,{}),(0,OA.jsxs)("div",{className:"grid overflow-hidden grid-cols-12 grid-rows-6 gap-2 py-8 ",children:[(0,OA.jsx)("div",{className:"flex justify-center box row-start-1 col-start-4 col-end-10",children:(0,OA.jsx)("div",{className:"py-4 font-Delius text-2xl sm:text-7xl text-yellow-500 hover:text-sky-400",children:"Nebulosa Innova"})}),(0,OA.jsx)("div",{className:""}),(0,OA.jsx)("div",{className:"pt-4 box row-start-2 row-end-5 col-start-3 col-end-5",children:(0,OA.jsx)("img",{className:" pt-4 hover:scale-125 cursor-pointer",src:MR,alt:"Logo"})}),(0,OA.jsx)("div",{className:"pt-4 box row-start-2 row-end-5 col-start-6 col-end-8",children:(0,OA.jsx)("img",{className:"pt-4 hover:scale-125 cursor-pointer",src:FR,alt:"Logo"})}),(0,OA.jsx)("div",{className:"pt-4 box row-start-2 row-end-5 col-start-9 col-end-11",children:(0,OA.jsx)("img",{className:"pt-4 hover:scale-125 cursor-pointer",src:LR,alt:"Logo"})}),(0,OA.jsx)("div",{className:""})]})]})}function TR(){return(0,OA.jsx)("div",{children:" Supernova"})}n(7948);function ER(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}ER(".img {\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n}\n\n.modal_wrap {\n  display: flex;\n  align-items: center;\n  height: 90%;\n  width: 100%;\n  padding: 0.5rem 0;\n}\n\n.layout {\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n}\n\n.close_icon {\n  align-self: flex-end;\n}\n\n.icon {\n  cursor: pointer;\n  font-size: 1.5rem;\n}\n\n.left_arrow {\n  transform: rotate(180deg);\n}\n");ER(".sub_grid_wrapper {\n  width: 100%;\n  height: 100%;\n}\n\n.sub_grid_wrapper_first_row {\n  display: grid;\n  grid-auto-flow: row;\n  width: 100%;\n  height: 66.66%;\n  gap: 0.25rem;\n}\n.sub_grid_wrapper_second_row {\n  display: grid;\n  grid-auto-flow: row;\n  width: 100%;\n  height: 33.33%;\n  gap: 0.25rem;\n}\n\n.grid_wrapper {\n  display: grid;\n  grid-auto-flow: row;\n  width: 100%;\n  height: 100%;\n  gap: 0.25rem;\n}\n\n.grid_wrapper_1_img {\n  grid-template-columns: repeat(1, 1fr);\n}\n\n.grid_wrapper_2_img {\n  grid-template-columns: repeat(2, 1fr);\n}\n.grid_wrapper_3_img {\n  grid-template-columns: repeat(2, 1fr);\n}\n.grid_wrapper_4_img {\n  grid-template-columns: repeat(3, 1fr);\n}\n.grid_wrapper_5_img {\n  grid-template-columns: repeat(2, 1fr 1fr);\n}\n\n.img {\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n  cursor: pointer;\n}\n\n.show_more_img {\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n  opacity: 0.5;\n  position: relative;\n}\n\n.show_more_text {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-size: 1.5rem;\n  color: white;\n}\n\n.img_1_1 {\n  grid-column: 1;\n  grid-row: 1;\n}\n\n.img_2_1 {\n  grid-column: 1/2;\n  grid-row: 1;\n}\n.img_2_2 {\n  grid-column: 2;\n  grid-row: 1;\n}\n\n.img_3_1 {\n  grid-column: 1 / 3;\n  grid-row: 1 / 3;\n}\n\n.img_3_2 {\n  grid-row: 3;\n  grid-column: 1 / 2;\n}\n.img_3_3 {\n  grid-row: 3;\n  grid-column: 2 / 3;\n}\n\n.img_4_1 {\n  grid-column: 1 / 4;\n  grid-row: 1 / 3;\n}\n\n.img_4_2 {\n  grid-row: 3;\n  grid-column: 1 / 2;\n}\n.img_4_3 {\n  grid-row: 3;\n  grid-column: 2 / 3;\n}\n.img_4_4 {\n  grid-row: 3;\n  grid-column: 3;\n}\n\n.img_5_1 {\n  grid-column: 1 / 3;\n  grid-row: 1/3;\n}\n\n.img_5_2 {\n  grid-row: 1;\n  grid-column: 3/5;\n}\n\n.img_5_3 {\n  grid-row: 3;\n  grid-column: 1 / 2;\n}\n.img_5_4 {\n  grid-row: 3;\n  grid-column: 2/3;\n}\n.img_5_5 {\n  grid-row: 3;\n  grid-column: 3/5;\n}\n\n/* sub-grid-second-row */\n\n.sub_grid_wrapper_3_img {\n  grid-template-columns: repeat(3, 1fr);\n}\n\n.sub_img_3_1 {\n  grid-column: 1 / 2;\n  grid-row: 2;\n}\n\n.sub_img_3_2 {\n  grid-column: 2 / 3;\n  grid-row: 2;\n}\n.sub_img_3_3 {\n  grid-column: 3;\n  grid-row: 2;\n}\n");function JR(){return(0,OA.jsxs)("div",{className:"min-h-screen bg-ideaverso",children:[(0,OA.jsx)(zR,{}),(0,OA.jsxs)("div",{className:"grid overflow-hidden grid-cols-12 grid-rows-6 gap-2",children:[(0,OA.jsx)("div",{className:"flex justify-center pt-5 box row-start-1 col-start-4 col-end-10",children:(0,OA.jsx)("div",{className:"font-Delius text-2xl sm:text-5xl text-white hover:text-sky-400",children:"IDEAVERSO"})}),(0,OA.jsx)("div",{className:"flex justify-center box row-start-3 row-end-5 col-start-3 col-end-11",children:(0,OA.jsx)("div",{className:"box-content h-32 w-32 bg-[url('https://i.ibb.co/vZNfxqF/FONDO-1.png')]"})})]})]})}function UR(e){return null!==e&&"object"===typeof e&&"constructor"in e&&e.constructor===Object}function DR(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.keys(t).forEach((function(n){"undefined"===typeof e[n]?e[n]=t[n]:UR(t[n])&&UR(e[n])&&Object.keys(t[n]).length>0&&DR(e[n],t[n])}))}var PR={body:{},addEventListener:function(){},removeEventListener:function(){},activeElement:{blur:function(){},nodeName:""},querySelector:function(){return null},querySelectorAll:function(){return[]},getElementById:function(){return null},createEvent:function(){return{initEvent:function(){}}},createElement:function(){return{children:[],childNodes:[],style:{},setAttribute:function(){},getElementsByTagName:function(){return[]}}},createElementNS:function(){return{}},importNode:function(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function OR(){var e="undefined"!==typeof document?document:{};return DR(e,PR),e}var QR={document:PR,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState:function(){},pushState:function(){},go:function(){},back:function(){}},CustomEvent:function(){return this},addEventListener:function(){},removeEventListener:function(){},getComputedStyle:function(){return{getPropertyValue:function(){return""}}},Image:function(){},Date:function(){},screen:{},setTimeout:function(){},clearTimeout:function(){},matchMedia:function(){return{}},requestAnimationFrame:function(e){return"undefined"===typeof setTimeout?(e(),null):setTimeout(e,0)},cancelAnimationFrame:function(e){"undefined"!==typeof setTimeout&&clearTimeout(e)}};function jR(){var e="undefined"!==typeof window?window:{};return DR(e,QR),e}var $R=function(e){ne(n,e);var t=le(n);function n(e){var i;return $(this,n),"number"===typeof e?i=t.call(this,e):function(e){var t=e.__proto__;Object.defineProperty(e,"__proto__",{get:function(){return t},set:function(e){t.__proto__=e}})}(ae(i=t.call.apply(t,[this].concat(O(e||[]))))),oe(i)}return te(n)}(ge(Array));function eq(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.forEach((function(e){Array.isArray(e)?t.push.apply(t,O(eq(e))):t.push(e)})),t}function tq(e,t){return Array.prototype.filter.call(e,t)}function nq(e,t){var n=jR(),i=OR(),r=[];if(!t&&e instanceof $R)return e;if(!e)return new $R(r);if("string"===typeof e){var a=e.trim();if(a.indexOf("<")>=0&&a.indexOf(">")>=0){var o="div";0===a.indexOf("<li")&&(o="ul"),0===a.indexOf("<tr")&&(o="tbody"),0!==a.indexOf("<td")&&0!==a.indexOf("<th")||(o="tr"),0===a.indexOf("<tbody")&&(o="table"),0===a.indexOf("<option")&&(o="select");var l=i.createElement(o);l.innerHTML=a;for(var g=0;g<l.childNodes.length;g+=1)r.push(l.childNodes[g])}else r=function(e,t){if("string"!==typeof e)return[e];for(var n=[],i=t.querySelectorAll(e),r=0;r<i.length;r+=1)n.push(i[r]);return n}(e.trim(),t||i)}else if(e.nodeType||e===n||e===i)r.push(e);else if(Array.isArray(e)){if(e instanceof $R)return e;r=e}return new $R(function(e){for(var t=[],n=0;n<e.length;n+=1)-1===t.indexOf(e[n])&&t.push(e[n]);return t}(r))}nq.fn=$R.prototype;var iq="resize scroll".split(" ");function rq(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if("undefined"===typeof n[0]){for(var r=0;r<this.length;r+=1)iq.indexOf(e)<0&&(e in this[r]?this[r][e]():nq(this[r]).trigger(e));return this}return this.on.apply(this,[e].concat(n))}}rq("click"),rq("blur"),rq("focus"),rq("focusin"),rq("focusout"),rq("keyup"),rq("keydown"),rq("keypress"),rq("submit"),rq("change"),rq("mousedown"),rq("mousemove"),rq("mouseup"),rq("mouseenter"),rq("mouseleave"),rq("mouseout"),rq("mouseover"),rq("touchstart"),rq("touchend"),rq("touchmove"),rq("resize"),rq("scroll");var aq={addClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=eq(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).add.apply(t,O(i))})),this},removeClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=eq(t.map((function(e){return e.split(" ")})));return this.forEach((function(e){var t;(t=e.classList).remove.apply(t,O(i))})),this},hasClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=eq(t.map((function(e){return e.split(" ")})));return tq(this,(function(e){return i.filter((function(t){return e.classList.contains(t)})).length>0})).length>0},toggleClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=eq(t.map((function(e){return e.split(" ")})));this.forEach((function(e){i.forEach((function(t){e.classList.toggle(t)}))}))},attr:function(e,t){if(1===arguments.length&&"string"===typeof e)return this[0]?this[0].getAttribute(e):void 0;for(var n=0;n<this.length;n+=1)if(2===arguments.length)this[n].setAttribute(e,t);else for(var i in e)this[n][i]=e[i],this[n].setAttribute(i,e[i]);return this},removeAttr:function(e){for(var t=0;t<this.length;t+=1)this[t].removeAttribute(e);return this},transform:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transform=e;return this},transition:function(e){for(var t=0;t<this.length;t+=1)this[t].style.transitionDuration="string"!==typeof e?"".concat(e,"ms"):e;return this},on:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0],r=t[1],a=t[2],o=t[3];function l(e){var t=e.target;if(t){var n=e.target.dom7EventData||[];if(n.indexOf(e)<0&&n.unshift(e),nq(t).is(r))a.apply(t,n);else for(var i=nq(t).parents(),o=0;o<i.length;o+=1)nq(i[o]).is(r)&&a.apply(i[o],n)}}function g(e){var t=e&&e.target&&e.target.dom7EventData||[];t.indexOf(e)<0&&t.unshift(e),a.apply(this,t)}"function"===typeof t[1]&&(i=t[0],a=t[1],o=t[2],r=void 0),o||(o=!1);for(var s,c=i.split(" "),u=0;u<this.length;u+=1){var I=this[u];if(r)for(s=0;s<c.length;s+=1){var d=c[s];I.dom7LiveListeners||(I.dom7LiveListeners={}),I.dom7LiveListeners[d]||(I.dom7LiveListeners[d]=[]),I.dom7LiveListeners[d].push({listener:a,proxyListener:l}),I.addEventListener(d,l,o)}else for(s=0;s<c.length;s+=1){var C=c[s];I.dom7Listeners||(I.dom7Listeners={}),I.dom7Listeners[C]||(I.dom7Listeners[C]=[]),I.dom7Listeners[C].push({listener:a,proxyListener:g}),I.addEventListener(C,g,o)}}return this},off:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0],r=t[1],a=t[2],o=t[3];"function"===typeof t[1]&&(i=t[0],a=t[1],o=t[2],r=void 0),o||(o=!1);for(var l=i.split(" "),g=0;g<l.length;g+=1)for(var s=l[g],c=0;c<this.length;c+=1){var u=this[c],I=void 0;if(!r&&u.dom7Listeners?I=u.dom7Listeners[s]:r&&u.dom7LiveListeners&&(I=u.dom7LiveListeners[s]),I&&I.length)for(var d=I.length-1;d>=0;d-=1){var C=I[d];a&&C.listener===a||a&&C.listener&&C.listener.dom7proxy&&C.listener.dom7proxy===a?(u.removeEventListener(s,C.proxyListener,o),I.splice(d,1)):a||(u.removeEventListener(s,C.proxyListener,o),I.splice(d,1))}}return this},trigger:function(){for(var e=jR(),t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var r=n[0].split(" "),a=n[1],o=0;o<r.length;o+=1)for(var l=r[o],g=0;g<this.length;g+=1){var s=this[g];if(e.CustomEvent){var c=new e.CustomEvent(l,{detail:a,bubbles:!0,cancelable:!0});s.dom7EventData=n.filter((function(e,t){return t>0})),s.dispatchEvent(c),s.dom7EventData=[],delete s.dom7EventData}}return this},transitionEnd:function(e){var t=this;return e&&t.on("transitionend",(function n(i){i.target===this&&(e.call(this,i),t.off("transitionend",n))})),this},outerWidth:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetWidth+parseFloat(t.getPropertyValue("margin-right"))+parseFloat(t.getPropertyValue("margin-left"))}return this[0].offsetWidth}return null},outerHeight:function(e){if(this.length>0){if(e){var t=this.styles();return this[0].offsetHeight+parseFloat(t.getPropertyValue("margin-top"))+parseFloat(t.getPropertyValue("margin-bottom"))}return this[0].offsetHeight}return null},styles:function(){var e=jR();return this[0]?e.getComputedStyle(this[0],null):{}},offset:function(){if(this.length>0){var e=jR(),t=OR(),n=this[0],i=n.getBoundingClientRect(),r=t.body,a=n.clientTop||r.clientTop||0,o=n.clientLeft||r.clientLeft||0,l=n===e?e.scrollY:n.scrollTop,g=n===e?e.scrollX:n.scrollLeft;return{top:i.top+l-a,left:i.left+g-o}}return null},css:function(e,t){var n,i=jR();if(1===arguments.length){if("string"!==typeof e){for(n=0;n<this.length;n+=1)for(var r in e)this[n].style[r]=e[r];return this}if(this[0])return i.getComputedStyle(this[0],null).getPropertyValue(e)}if(2===arguments.length&&"string"===typeof e){for(n=0;n<this.length;n+=1)this[n].style[e]=t;return this}return this},each:function(e){return e?(this.forEach((function(t,n){e.apply(t,[t,n])})),this):this},html:function(e){if("undefined"===typeof e)return this[0]?this[0].innerHTML:null;for(var t=0;t<this.length;t+=1)this[t].innerHTML=e;return this},text:function(e){if("undefined"===typeof e)return this[0]?this[0].textContent.trim():null;for(var t=0;t<this.length;t+=1)this[t].textContent=e;return this},is:function(e){var t,n,i=jR(),r=OR(),a=this[0];if(!a||"undefined"===typeof e)return!1;if("string"===typeof e){if(a.matches)return a.matches(e);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(e);if(a.msMatchesSelector)return a.msMatchesSelector(e);for(t=nq(e),n=0;n<t.length;n+=1)if(t[n]===a)return!0;return!1}if(e===r)return a===r;if(e===i)return a===i;if(e.nodeType||e instanceof $R){for(t=e.nodeType?[e]:e,n=0;n<t.length;n+=1)if(t[n]===a)return!0;return!1}return!1},index:function(){var e,t=this[0];if(t){for(e=0;null!==(t=t.previousSibling);)1===t.nodeType&&(e+=1);return e}},eq:function(e){if("undefined"===typeof e)return this;var t=this.length;if(e>t-1)return nq([]);if(e<0){var n=t+e;return nq(n<0?[]:[this[n]])}return nq([this[e]])},append:function(){for(var e,t=OR(),n=0;n<arguments.length;n+=1){e=n<0||arguments.length<=n?void 0:arguments[n];for(var i=0;i<this.length;i+=1)if("string"===typeof e){var r=t.createElement("div");for(r.innerHTML=e;r.firstChild;)this[i].appendChild(r.firstChild)}else if(e instanceof $R)for(var a=0;a<e.length;a+=1)this[i].appendChild(e[a]);else this[i].appendChild(e)}return this},prepend:function(e){var t,n,i=OR();for(t=0;t<this.length;t+=1)if("string"===typeof e){var r=i.createElement("div");for(r.innerHTML=e,n=r.childNodes.length-1;n>=0;n-=1)this[t].insertBefore(r.childNodes[n],this[t].childNodes[0])}else if(e instanceof $R)for(n=0;n<e.length;n+=1)this[t].insertBefore(e[n],this[t].childNodes[0]);else this[t].insertBefore(e,this[t].childNodes[0]);return this},next:function(e){return this.length>0?e?this[0].nextElementSibling&&nq(this[0].nextElementSibling).is(e)?nq([this[0].nextElementSibling]):nq([]):this[0].nextElementSibling?nq([this[0].nextElementSibling]):nq([]):nq([])},nextAll:function(e){var t=[],n=this[0];if(!n)return nq([]);for(;n.nextElementSibling;){var i=n.nextElementSibling;e?nq(i).is(e)&&t.push(i):t.push(i),n=i}return nq(t)},prev:function(e){if(this.length>0){var t=this[0];return e?t.previousElementSibling&&nq(t.previousElementSibling).is(e)?nq([t.previousElementSibling]):nq([]):t.previousElementSibling?nq([t.previousElementSibling]):nq([])}return nq([])},prevAll:function(e){var t=[],n=this[0];if(!n)return nq([]);for(;n.previousElementSibling;){var i=n.previousElementSibling;e?nq(i).is(e)&&t.push(i):t.push(i),n=i}return nq(t)},parent:function(e){for(var t=[],n=0;n<this.length;n+=1)null!==this[n].parentNode&&(e?nq(this[n].parentNode).is(e)&&t.push(this[n].parentNode):t.push(this[n].parentNode));return nq(t)},parents:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var i=this[n].parentNode;i;)e?nq(i).is(e)&&t.push(i):t.push(i),i=i.parentNode;return nq(t)},closest:function(e){var t=this;return"undefined"===typeof e?nq([]):(t.is(e)||(t=t.parents(e).eq(0)),t)},find:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var i=this[n].querySelectorAll(e),r=0;r<i.length;r+=1)t.push(i[r]);return nq(t)},children:function(e){for(var t=[],n=0;n<this.length;n+=1)for(var i=this[n].children,r=0;r<i.length;r+=1)e&&!nq(i[r]).is(e)||t.push(i[r]);return nq(t)},filter:function(e){return nq(tq(this,e))},remove:function(){for(var e=0;e<this.length;e+=1)this[e].parentNode&&this[e].parentNode.removeChild(this[e]);return this}};Object.keys(aq).forEach((function(e){Object.defineProperty(nq.fn,e,{value:aq[e],writable:!0})}));var oq,lq,gq,sq=nq;function cq(e){var t=e;Object.keys(t).forEach((function(e){try{t[e]=null}catch(n){}try{delete t[e]}catch(n){}}))}function uq(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return setTimeout(e,t)}function Iq(){return Date.now()}function dq(e){var t,n=jR();return n.getComputedStyle&&(t=n.getComputedStyle(e,null)),!t&&e.currentStyle&&(t=e.currentStyle),t||(t=e.style),t}function Cq(e){var t,n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",a=jR(),o=dq(e);return a.WebKitCSSMatrix?((n=o.transform||o.webkitTransform).split(",").length>6&&(n=n.split(", ").map((function(e){return e.replace(",",".")})).join(", ")),i=new a.WebKitCSSMatrix("none"===n?"":n)):t=(i=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,")).toString().split(","),"x"===r&&(n=a.WebKitCSSMatrix?i.m41:16===t.length?parseFloat(t[12]):parseFloat(t[4])),"y"===r&&(n=a.WebKitCSSMatrix?i.m42:16===t.length?parseFloat(t[13]):parseFloat(t[5])),n||0}function hq(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function Aq(e){return"undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType)}function pq(){for(var e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"],n=1;n<arguments.length;n+=1){var i=n<0||arguments.length<=n?void 0:arguments[n];if(void 0!==i&&null!==i&&!Aq(i))for(var r=Object.keys(Object(i)).filter((function(e){return t.indexOf(e)<0})),a=0,o=r.length;a<o;a+=1){var l=r[a],g=Object.getOwnPropertyDescriptor(i,l);void 0!==g&&g.enumerable&&(hq(e[l])&&hq(i[l])?i[l].__swiper__?e[l]=i[l]:pq(e[l],i[l]):!hq(e[l])&&hq(i[l])?(e[l]={},i[l].__swiper__?e[l]=i[l]:pq(e[l],i[l])):e[l]=i[l])}}return e}function mq(e,t,n){e.style.setProperty(t,n)}function fq(e){var t,n=e.swiper,i=e.targetPosition,r=e.side,a=jR(),o=-n.translate,l=null,g=n.params.speed;n.wrapperEl.style.scrollSnapType="none",a.cancelAnimationFrame(n.cssModeFrameID);var s=i>o?"next":"prev",c=function(e,t){return"next"===s&&e>=t||"prev"===s&&e<=t};!function e(){t=(new Date).getTime(),null===l&&(l=t);var s=Math.max(Math.min((t-l)/g,1),0),u=.5-Math.cos(s*Math.PI)/2,I=o+u*(i-o);if(c(I,i)&&(I=i),n.wrapperEl.scrollTo(L({},r,I)),c(I,i))return n.wrapperEl.style.overflow="hidden",n.wrapperEl.style.scrollSnapType="",setTimeout((function(){n.wrapperEl.style.overflow="",n.wrapperEl.scrollTo(L({},r,I))})),void a.cancelAnimationFrame(n.cssModeFrameID);n.cssModeFrameID=a.requestAnimationFrame(e)}()}function vq(){return oq||(oq=function(){var e=jR(),t=OR();return{smoothScroll:t.documentElement&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch),passiveListener:function(){var t=!1;try{var n=Object.defineProperty({},"passive",{get:function(){t=!0}});e.addEventListener("testPassiveListener",null,n)}catch(i){}return t}(),gestures:"ongesturestart"in e}}()),oq}function bq(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.userAgent,n=vq(),i=jR(),r=i.navigator.platform,a=t||i.navigator.userAgent,o={ios:!1,android:!1},l=i.screen.width,g=i.screen.height,s=a.match(/(Android);?[\s\/]+([\d.]+)?/),c=a.match(/(iPad).*OS\s([\d_]+)/),u=a.match(/(iPod)(.*OS\s([\d_]+))?/),I=!c&&a.match(/(iPhone\sOS|iOS)\s([\d_]+)/),d="Win32"===r,C="MacIntel"===r,h=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&C&&n.touch&&h.indexOf("".concat(l,"x").concat(g))>=0&&((c=a.match(/(Version)\/([\d.]+)/))||(c=[0,1,"13_0_0"]),C=!1),s&&!d&&(o.os="android",o.android=!0),(c||I||u)&&(o.os="ios",o.ios=!0),o}function yq(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return lq||(lq=bq(e)),lq}function Gq(){return gq||(gq=function(){var e=jR();return{isSafari:function(){var t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}(),isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}()),gq}var Bq={on:function(e,t,n){var i=this;if(!i.eventsListeners||i.destroyed)return i;if("function"!==typeof t)return i;var r=n?"unshift":"push";return e.split(" ").forEach((function(e){i.eventsListeners[e]||(i.eventsListeners[e]=[]),i.eventsListeners[e][r](t)})),i},once:function(e,t,n){var i=this;if(!i.eventsListeners||i.destroyed)return i;if("function"!==typeof t)return i;function r(){i.off(e,r),r.__emitterProxy&&delete r.__emitterProxy;for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];t.apply(i,a)}return r.__emitterProxy=t,i.on(e,r,n)},onAny:function(e,t){var n=this;if(!n.eventsListeners||n.destroyed)return n;if("function"!==typeof e)return n;var i=t?"unshift":"push";return n.eventsAnyListeners.indexOf(e)<0&&n.eventsAnyListeners[i](e),n},offAny:function(e){var t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;var n=t.eventsAnyListeners.indexOf(e);return n>=0&&t.eventsAnyListeners.splice(n,1),t},off:function(e,t){var n=this;return!n.eventsListeners||n.destroyed?n:n.eventsListeners?(e.split(" ").forEach((function(e){"undefined"===typeof t?n.eventsListeners[e]=[]:n.eventsListeners[e]&&n.eventsListeners[e].forEach((function(i,r){(i===t||i.__emitterProxy&&i.__emitterProxy===t)&&n.eventsListeners[e].splice(r,1)}))})),n):n},emit:function(){var e,t,n,i=this;if(!i.eventsListeners||i.destroyed)return i;if(!i.eventsListeners)return i;for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];"string"===typeof a[0]||Array.isArray(a[0])?(e=a[0],t=a.slice(1,a.length),n=i):(e=a[0].events,t=a[0].data,n=a[0].context||i),t.unshift(n);var l=Array.isArray(e)?e:e.split(" ");return l.forEach((function(e){i.eventsAnyListeners&&i.eventsAnyListeners.length&&i.eventsAnyListeners.forEach((function(i){i.apply(n,[e].concat(O(t)))})),i.eventsListeners&&i.eventsListeners[e]&&i.eventsListeners[e].forEach((function(e){e.apply(n,t)}))})),i}};var Zq={updateSize:function(){var e,t,n=this,i=n.$el;e="undefined"!==typeof n.params.width&&null!==n.params.width?n.params.width:i[0].clientWidth,t="undefined"!==typeof n.params.height&&null!==n.params.height?n.params.height:i[0].clientHeight,0===e&&n.isHorizontal()||0===t&&n.isVertical()||(e=e-parseInt(i.css("padding-left")||0,10)-parseInt(i.css("padding-right")||0,10),t=t-parseInt(i.css("padding-top")||0,10)-parseInt(i.css("padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))},updateSlides:function(){var e=this;function t(t){return e.isHorizontal()?t:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[t]}function n(e,n){return parseFloat(e.getPropertyValue(t(n))||0)}var i=e.params,r=e.$wrapperEl,a=e.size,o=e.rtlTranslate,l=e.wrongRTL,g=e.virtual&&i.virtual.enabled,s=g?e.virtual.slides.length:e.slides.length,c=r.children(".".concat(e.params.slideClass)),u=g?e.virtual.slides.length:c.length,I=[],d=[],C=[],h=i.slidesOffsetBefore;"function"===typeof h&&(h=i.slidesOffsetBefore.call(e));var A=i.slidesOffsetAfter;"function"===typeof A&&(A=i.slidesOffsetAfter.call(e));var p=e.snapGrid.length,m=e.slidesGrid.length,f=i.spaceBetween,v=-h,b=0,y=0;if("undefined"!==typeof a){"string"===typeof f&&f.indexOf("%")>=0&&(f=parseFloat(f.replace("%",""))/100*a),e.virtualSize=-f,o?c.css({marginLeft:"",marginBottom:"",marginTop:""}):c.css({marginRight:"",marginBottom:"",marginTop:""}),i.centeredSlides&&i.cssMode&&(mq(e.wrapperEl,"--swiper-centered-offset-before",""),mq(e.wrapperEl,"--swiper-centered-offset-after",""));var G,B=i.grid&&i.grid.rows>1&&e.grid;B&&e.grid.initSlides(u);for(var Z="auto"===i.slidesPerView&&i.breakpoints&&Object.keys(i.breakpoints).filter((function(e){return"undefined"!==typeof i.breakpoints[e].slidesPerView})).length>0,w=0;w<u;w+=1){G=0;var x=c.eq(w);if(B&&e.grid.updateSlide(w,x,u,t),"none"!==x.css("display")){if("auto"===i.slidesPerView){Z&&(c[w].style[t("width")]="");var S=getComputedStyle(x[0]),W=x[0].style.transform,V=x[0].style.webkitTransform;if(W&&(x[0].style.transform="none"),V&&(x[0].style.webkitTransform="none"),i.roundLengths)G=e.isHorizontal()?x.outerWidth(!0):x.outerHeight(!0);else{var R=n(S,"width"),q=n(S,"padding-left"),k=n(S,"padding-right"),X=n(S,"margin-left"),Y=n(S,"margin-right"),N=S.getPropertyValue("box-sizing");if(N&&"border-box"===N)G=R+X+Y;else{var K=x[0],H=K.clientWidth;G=R+q+k+X+Y+(K.offsetWidth-H)}}W&&(x[0].style.transform=W),V&&(x[0].style.webkitTransform=V),i.roundLengths&&(G=Math.floor(G))}else G=(a-(i.slidesPerView-1)*f)/i.slidesPerView,i.roundLengths&&(G=Math.floor(G)),c[w]&&(c[w].style[t("width")]="".concat(G,"px"));c[w]&&(c[w].swiperSlideSize=G),C.push(G),i.centeredSlides?(v=v+G/2+b/2+f,0===b&&0!==w&&(v=v-a/2-f),0===w&&(v=v-a/2-f),Math.abs(v)<.001&&(v=0),i.roundLengths&&(v=Math.floor(v)),y%i.slidesPerGroup===0&&I.push(v),d.push(v)):(i.roundLengths&&(v=Math.floor(v)),(y-Math.min(e.params.slidesPerGroupSkip,y))%e.params.slidesPerGroup===0&&I.push(v),d.push(v),v=v+G+f),e.virtualSize+=G+f,b=G,y+=1}}if(e.virtualSize=Math.max(e.virtualSize,a)+A,o&&l&&("slide"===i.effect||"coverflow"===i.effect)&&r.css({width:"".concat(e.virtualSize+i.spaceBetween,"px")}),i.setWrapperSize&&r.css(L({},t("width"),"".concat(e.virtualSize+i.spaceBetween,"px"))),B&&e.grid.updateWrapperSize(G,I,t),!i.centeredSlides){for(var z=[],M=0;M<I.length;M+=1){var F=I[M];i.roundLengths&&(F=Math.floor(F)),I[M]<=e.virtualSize-a&&z.push(F)}I=z,Math.floor(e.virtualSize-a)-Math.floor(I[I.length-1])>1&&I.push(e.virtualSize-a)}if(0===I.length&&(I=[0]),0!==i.spaceBetween){var _=e.isHorizontal()&&o?"marginLeft":t("marginRight");c.filter((function(e,t){return!i.cssMode||t!==c.length-1})).css(L({},_,"".concat(f,"px")))}if(i.centeredSlides&&i.centeredSlidesBounds){var T=0;C.forEach((function(e){T+=e+(i.spaceBetween?i.spaceBetween:0)}));var E=(T-=i.spaceBetween)-a;I=I.map((function(e){return e<0?-h:e>E?E+A:e}))}if(i.centerInsufficientSlides){var J=0;if(C.forEach((function(e){J+=e+(i.spaceBetween?i.spaceBetween:0)})),(J-=i.spaceBetween)<a){var U=(a-J)/2;I.forEach((function(e,t){I[t]=e-U})),d.forEach((function(e,t){d[t]=e+U}))}}if(Object.assign(e,{slides:c,snapGrid:I,slidesGrid:d,slidesSizesGrid:C}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){mq(e.wrapperEl,"--swiper-centered-offset-before","".concat(-I[0],"px")),mq(e.wrapperEl,"--swiper-centered-offset-after","".concat(e.size/2-C[C.length-1]/2,"px"));var D=-e.snapGrid[0],P=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map((function(e){return e+D})),e.slidesGrid=e.slidesGrid.map((function(e){return e+P}))}if(u!==s&&e.emit("slidesLengthChange"),I.length!==p&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),d.length!==m&&e.emit("slidesGridLengthChange"),i.watchSlidesProgress&&e.updateSlidesOffset(),!g&&!i.cssMode&&("slide"===i.effect||"fade"===i.effect)){var O="".concat(i.containerModifierClass,"backface-hidden"),Q=e.$el.hasClass(O);u<=i.maxBackfaceHiddenSlides?Q||e.$el.addClass(O):Q&&e.$el.removeClass(O)}}},updateAutoHeight:function(e){var t,n=this,i=[],r=n.virtual&&n.params.virtual.enabled,a=0;"number"===typeof e?n.setTransition(e):!0===e&&n.setTransition(n.params.speed);var o=function(e){return r?n.slides.filter((function(t){return parseInt(t.getAttribute("data-swiper-slide-index"),10)===e}))[0]:n.slides.eq(e)[0]};if("auto"!==n.params.slidesPerView&&n.params.slidesPerView>1)if(n.params.centeredSlides)(n.visibleSlides||sq([])).each((function(e){i.push(e)}));else for(t=0;t<Math.ceil(n.params.slidesPerView);t+=1){var l=n.activeIndex+t;if(l>n.slides.length&&!r)break;i.push(o(l))}else i.push(o(n.activeIndex));for(t=0;t<i.length;t+=1)if("undefined"!==typeof i[t]){var g=i[t].offsetHeight;a=g>a?g:a}(a||0===a)&&n.$wrapperEl.css("height","".concat(a,"px"))},updateSlidesOffset:function(){for(var e=this.slides,t=0;t<e.length;t+=1)e[t].swiperSlideOffset=this.isHorizontal()?e[t].offsetLeft:e[t].offsetTop},updateSlidesProgress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this&&this.translate||0,t=this,n=t.params,i=t.slides,r=t.rtlTranslate,a=t.snapGrid;if(0!==i.length){"undefined"===typeof i[0].swiperSlideOffset&&t.updateSlidesOffset();var o=-e;r&&(o=e),i.removeClass(n.slideVisibleClass),t.visibleSlidesIndexes=[],t.visibleSlides=[];for(var l=0;l<i.length;l+=1){var g=i[l],s=g.swiperSlideOffset;n.cssMode&&n.centeredSlides&&(s-=i[0].swiperSlideOffset);var c=(o+(n.centeredSlides?t.minTranslate():0)-s)/(g.swiperSlideSize+n.spaceBetween),u=(o-a[0]+(n.centeredSlides?t.minTranslate():0)-s)/(g.swiperSlideSize+n.spaceBetween),I=-(o-s),d=I+t.slidesSizesGrid[l],C=I>=0&&I<t.size-1||d>1&&d<=t.size||I<=0&&d>=t.size;C&&(t.visibleSlides.push(g),t.visibleSlidesIndexes.push(l),i.eq(l).addClass(n.slideVisibleClass)),g.progress=r?-c:c,g.originalProgress=r?-u:u}t.visibleSlides=sq(t.visibleSlides)}},updateProgress:function(e){var t=this;if("undefined"===typeof e){var n=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*n||0}var i=t.params,r=t.maxTranslate()-t.minTranslate(),a=t.progress,o=t.isBeginning,l=t.isEnd,g=o,s=l;0===r?(a=0,o=!0,l=!0):(o=(a=(e-t.minTranslate())/r)<=0,l=a>=1),Object.assign(t,{progress:a,isBeginning:o,isEnd:l}),(i.watchSlidesProgress||i.centeredSlides&&i.autoHeight)&&t.updateSlidesProgress(e),o&&!g&&t.emit("reachBeginning toEdge"),l&&!s&&t.emit("reachEnd toEdge"),(g&&!o||s&&!l)&&t.emit("fromEdge"),t.emit("progress",a)},updateSlidesClasses:function(){var e,t=this,n=t.slides,i=t.params,r=t.$wrapperEl,a=t.activeIndex,o=t.realIndex,l=t.virtual&&i.virtual.enabled;n.removeClass("".concat(i.slideActiveClass," ").concat(i.slideNextClass," ").concat(i.slidePrevClass," ").concat(i.slideDuplicateActiveClass," ").concat(i.slideDuplicateNextClass," ").concat(i.slideDuplicatePrevClass)),(e=l?t.$wrapperEl.find(".".concat(i.slideClass,'[data-swiper-slide-index="').concat(a,'"]')):n.eq(a)).addClass(i.slideActiveClass),i.loop&&(e.hasClass(i.slideDuplicateClass)?r.children(".".concat(i.slideClass,":not(.").concat(i.slideDuplicateClass,')[data-swiper-slide-index="').concat(o,'"]')).addClass(i.slideDuplicateActiveClass):r.children(".".concat(i.slideClass,".").concat(i.slideDuplicateClass,'[data-swiper-slide-index="').concat(o,'"]')).addClass(i.slideDuplicateActiveClass));var g=e.nextAll(".".concat(i.slideClass)).eq(0).addClass(i.slideNextClass);i.loop&&0===g.length&&(g=n.eq(0)).addClass(i.slideNextClass);var s=e.prevAll(".".concat(i.slideClass)).eq(0).addClass(i.slidePrevClass);i.loop&&0===s.length&&(s=n.eq(-1)).addClass(i.slidePrevClass),i.loop&&(g.hasClass(i.slideDuplicateClass)?r.children(".".concat(i.slideClass,":not(.").concat(i.slideDuplicateClass,')[data-swiper-slide-index="').concat(g.attr("data-swiper-slide-index"),'"]')).addClass(i.slideDuplicateNextClass):r.children(".".concat(i.slideClass,".").concat(i.slideDuplicateClass,'[data-swiper-slide-index="').concat(g.attr("data-swiper-slide-index"),'"]')).addClass(i.slideDuplicateNextClass),s.hasClass(i.slideDuplicateClass)?r.children(".".concat(i.slideClass,":not(.").concat(i.slideDuplicateClass,')[data-swiper-slide-index="').concat(s.attr("data-swiper-slide-index"),'"]')).addClass(i.slideDuplicatePrevClass):r.children(".".concat(i.slideClass,".").concat(i.slideDuplicateClass,'[data-swiper-slide-index="').concat(s.attr("data-swiper-slide-index"),'"]')).addClass(i.slideDuplicatePrevClass)),t.emitSlidesClasses()},updateActiveIndex:function(e){var t,n=this,i=n.rtlTranslate?n.translate:-n.translate,r=n.slidesGrid,a=n.snapGrid,o=n.params,l=n.activeIndex,g=n.realIndex,s=n.snapIndex,c=e;if("undefined"===typeof c){for(var u=0;u<r.length;u+=1)"undefined"!==typeof r[u+1]?i>=r[u]&&i<r[u+1]-(r[u+1]-r[u])/2?c=u:i>=r[u]&&i<r[u+1]&&(c=u+1):i>=r[u]&&(c=u);o.normalizeSlideIndex&&(c<0||"undefined"===typeof c)&&(c=0)}if(a.indexOf(i)>=0)t=a.indexOf(i);else{var I=Math.min(o.slidesPerGroupSkip,c);t=I+Math.floor((c-I)/o.slidesPerGroup)}if(t>=a.length&&(t=a.length-1),c!==l){var d=parseInt(n.slides.eq(c).attr("data-swiper-slide-index")||c,10);Object.assign(n,{snapIndex:t,realIndex:d,previousIndex:l,activeIndex:c}),n.emit("activeIndexChange"),n.emit("snapIndexChange"),g!==d&&n.emit("realIndexChange"),(n.initialized||n.params.runCallbacksOnInit)&&n.emit("slideChange")}else t!==s&&(n.snapIndex=t,n.emit("snapIndexChange"))},updateClickedSlide:function(e){var t,n=this,i=n.params,r=sq(e).closest(".".concat(i.slideClass))[0],a=!1;if(r)for(var o=0;o<n.slides.length;o+=1)if(n.slides[o]===r){a=!0,t=o;break}if(!r||!a)return n.clickedSlide=void 0,void(n.clickedIndex=void 0);n.clickedSlide=r,n.virtual&&n.params.virtual.enabled?n.clickedIndex=parseInt(sq(r).attr("data-swiper-slide-index"),10):n.clickedIndex=t,i.slideToClickedSlide&&void 0!==n.clickedIndex&&n.clickedIndex!==n.activeIndex&&n.slideToClickedSlide()}};var wq={getTranslate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.isHorizontal()?"x":"y",t=this,n=t.params,i=t.rtlTranslate,r=t.translate,a=t.$wrapperEl;if(n.virtualTranslate)return i?-r:r;if(n.cssMode)return r;var o=Cq(a[0],e);return i&&(o=-o),o||0},setTranslate:function(e,t){var n=this,i=n.rtlTranslate,r=n.params,a=n.$wrapperEl,o=n.wrapperEl,l=n.progress,g=0,s=0;n.isHorizontal()?g=i?-e:e:s=e,r.roundLengths&&(g=Math.floor(g),s=Math.floor(s)),r.cssMode?o[n.isHorizontal()?"scrollLeft":"scrollTop"]=n.isHorizontal()?-g:-s:r.virtualTranslate||a.transform("translate3d(".concat(g,"px, ").concat(s,"px, ").concat(0,"px)")),n.previousTranslate=n.translate,n.translate=n.isHorizontal()?g:s;var c=n.maxTranslate()-n.minTranslate();(0===c?0:(e-n.minTranslate())/c)!==l&&n.updateProgress(e),n.emit("setTranslate",n.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.speed,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4?arguments[4]:void 0,a=this,o=a.params,l=a.wrapperEl;if(a.animating&&o.preventInteractionOnTransition)return!1;var g,s=a.minTranslate(),c=a.maxTranslate();if(g=i&&e>s?s:i&&e<c?c:e,a.updateProgress(g),o.cssMode){var u=a.isHorizontal();if(0===t)l[u?"scrollLeft":"scrollTop"]=-g;else{var I;if(!a.support.smoothScroll)return fq({swiper:a,targetPosition:-g,side:u?"left":"top"}),!0;l.scrollTo((L(I={},u?"left":"top",-g),L(I,"behavior","smooth"),I))}return!0}return 0===t?(a.setTransition(0),a.setTranslate(g),n&&(a.emit("beforeTransitionStart",t,r),a.emit("transitionEnd"))):(a.setTransition(t),a.setTranslate(g),n&&(a.emit("beforeTransitionStart",t,r),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(e){a&&!a.destroyed&&e.target===this&&(a.$wrapperEl[0].removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].removeEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,n&&a.emit("transitionEnd"))}),a.$wrapperEl[0].addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.$wrapperEl[0].addEventListener("webkitTransitionEnd",a.onTranslateToWrapperTransitionEnd))),!0}};function xq(e){var t=e.swiper,n=e.runCallbacks,i=e.direction,r=e.step,a=t.activeIndex,o=t.previousIndex,l=i;if(l||(l=a>o?"next":a<o?"prev":"reset"),t.emit("transition".concat(r)),n&&a!==o){if("reset"===l)return void t.emit("slideResetTransition".concat(r));t.emit("slideChangeTransition".concat(r)),"next"===l?t.emit("slideNextTransition".concat(r)):t.emit("slidePrevTransition".concat(r))}}var Sq={setTransition:function(e,t){var n=this;n.params.cssMode||n.$wrapperEl.transition(e),n.emit("setTransition",e,t)},transitionStart:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=this,i=n.params;i.cssMode||(i.autoHeight&&n.updateAutoHeight(),xq({swiper:n,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=this,i=n.params;n.animating=!1,i.cssMode||(n.setTransition(0),xq({swiper:n,runCallbacks:e,direction:t,step:"End"}))}};var Wq={slideTo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.speed,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if("number"!==typeof e&&"string"!==typeof e)throw new Error("The 'index' argument cannot have type other than 'number' or 'string'. [".concat(typeof e,"] given."));if("string"===typeof e){var a=parseInt(e,10),o=isFinite(a);if(!o)throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. [".concat(e,"] given."));e=a}var l=this,g=e;g<0&&(g=0);var s=l.params,c=l.snapGrid,u=l.slidesGrid,I=l.previousIndex,d=l.activeIndex,C=l.rtlTranslate,h=l.wrapperEl,A=l.enabled;if(l.animating&&s.preventInteractionOnTransition||!A&&!i&&!r)return!1;var p=Math.min(l.params.slidesPerGroupSkip,g),m=p+Math.floor((g-p)/l.params.slidesPerGroup);m>=c.length&&(m=c.length-1);var f,v=-c[m];if(s.normalizeSlideIndex)for(var b=0;b<u.length;b+=1){var y=-Math.floor(100*v),G=Math.floor(100*u[b]),B=Math.floor(100*u[b+1]);"undefined"!==typeof u[b+1]?y>=G&&y<B-(B-G)/2?g=b:y>=G&&y<B&&(g=b+1):y>=G&&(g=b)}if(l.initialized&&g!==d){if(!l.allowSlideNext&&v<l.translate&&v<l.minTranslate())return!1;if(!l.allowSlidePrev&&v>l.translate&&v>l.maxTranslate()&&(d||0)!==g)return!1}if(g!==(I||0)&&n&&l.emit("beforeSlideChangeStart"),l.updateProgress(v),f=g>d?"next":g<d?"prev":"reset",C&&-v===l.translate||!C&&v===l.translate)return l.updateActiveIndex(g),s.autoHeight&&l.updateAutoHeight(),l.updateSlidesClasses(),"slide"!==s.effect&&l.setTranslate(v),"reset"!==f&&(l.transitionStart(n,f),l.transitionEnd(n,f)),!1;if(s.cssMode){var Z=l.isHorizontal(),w=C?v:-v;if(0===t){var x=l.virtual&&l.params.virtual.enabled;x&&(l.wrapperEl.style.scrollSnapType="none",l._immediateVirtual=!0),h[Z?"scrollLeft":"scrollTop"]=w,x&&requestAnimationFrame((function(){l.wrapperEl.style.scrollSnapType="",l._swiperImmediateVirtual=!1}))}else{var S;if(!l.support.smoothScroll)return fq({swiper:l,targetPosition:w,side:Z?"left":"top"}),!0;h.scrollTo((L(S={},Z?"left":"top",w),L(S,"behavior","smooth"),S))}return!0}return l.setTransition(t),l.setTranslate(v),l.updateActiveIndex(g),l.updateSlidesClasses(),l.emit("beforeTransitionStart",t,i),l.transitionStart(n,f),0===t?l.transitionEnd(n,f):l.animating||(l.animating=!0,l.onSlideToWrapperTransitionEnd||(l.onSlideToWrapperTransitionEnd=function(e){l&&!l.destroyed&&e.target===this&&(l.$wrapperEl[0].removeEventListener("transitionend",l.onSlideToWrapperTransitionEnd),l.$wrapperEl[0].removeEventListener("webkitTransitionEnd",l.onSlideToWrapperTransitionEnd),l.onSlideToWrapperTransitionEnd=null,delete l.onSlideToWrapperTransitionEnd,l.transitionEnd(n,f))}),l.$wrapperEl[0].addEventListener("transitionend",l.onSlideToWrapperTransitionEnd),l.$wrapperEl[0].addEventListener("webkitTransitionEnd",l.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.speed,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;if("string"===typeof e){var r=parseInt(e,10),a=isFinite(r);if(!a)throw new Error("The passed-in 'index' (string) couldn't be converted to 'number'. [".concat(e,"] given."));e=r}var o=this,l=e;return o.params.loop&&(l+=o.loopedSlides),o.slideTo(l,t,n,i)},slideNext:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=this,r=i.animating,a=i.enabled,o=i.params;if(!a)return i;var l=o.slidesPerGroup;"auto"===o.slidesPerView&&1===o.slidesPerGroup&&o.slidesPerGroupAuto&&(l=Math.max(i.slidesPerViewDynamic("current",!0),1));var g=i.activeIndex<o.slidesPerGroupSkip?1:l;if(o.loop){if(r&&o.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}return o.rewind&&i.isEnd?i.slideTo(0,e,t,n):i.slideTo(i.activeIndex+g,e,t,n)},slidePrev:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=this,r=i.params,a=i.animating,o=i.snapGrid,l=i.slidesGrid,g=i.rtlTranslate,s=i.enabled;if(!s)return i;if(r.loop){if(a&&r.loopPreventsSlide)return!1;i.loopFix(),i._clientLeft=i.$wrapperEl[0].clientLeft}var c=g?i.translate:-i.translate;function u(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}var I,d=u(c),C=o.map((function(e){return u(e)})),h=o[C.indexOf(d)-1];"undefined"===typeof h&&r.cssMode&&(o.forEach((function(e,t){d>=e&&(I=t)})),"undefined"!==typeof I&&(h=o[I>0?I-1:I]));var A=0;if("undefined"!==typeof h&&((A=l.indexOf(h))<0&&(A=i.activeIndex-1),"auto"===r.slidesPerView&&1===r.slidesPerGroup&&r.slidesPerGroupAuto&&(A=A-i.slidesPerViewDynamic("previous",!0)+1,A=Math.max(A,0))),r.rewind&&i.isBeginning){var p=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(p,e,t,n)}return i.slideTo(A,e,t,n)},slideReset:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=this;return i.slideTo(i.activeIndex,e,t,n)},slideToClosest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.speed,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=this,a=r.activeIndex,o=Math.min(r.params.slidesPerGroupSkip,a),l=o+Math.floor((a-o)/r.params.slidesPerGroup),g=r.rtlTranslate?r.translate:-r.translate;if(g>=r.snapGrid[l]){var s=r.snapGrid[l],c=r.snapGrid[l+1];g-s>(c-s)*i&&(a+=r.params.slidesPerGroup)}else{var u=r.snapGrid[l-1],I=r.snapGrid[l];g-u<=(I-u)*i&&(a-=r.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,r.slidesGrid.length-1),r.slideTo(a,e,t,n)},slideToClickedSlide:function(){var e,t=this,n=t.params,i=t.$wrapperEl,r="auto"===n.slidesPerView?t.slidesPerViewDynamic():n.slidesPerView,a=t.clickedIndex;if(n.loop){if(t.animating)return;e=parseInt(sq(t.clickedSlide).attr("data-swiper-slide-index"),10),n.centeredSlides?a<t.loopedSlides-r/2||a>t.slides.length-t.loopedSlides+r/2?(t.loopFix(),a=i.children(".".concat(n.slideClass,'[data-swiper-slide-index="').concat(e,'"]:not(.').concat(n.slideDuplicateClass,")")).eq(0).index(),uq((function(){t.slideTo(a)}))):t.slideTo(a):a>t.slides.length-r?(t.loopFix(),a=i.children(".".concat(n.slideClass,'[data-swiper-slide-index="').concat(e,'"]:not(.').concat(n.slideDuplicateClass,")")).eq(0).index(),uq((function(){t.slideTo(a)}))):t.slideTo(a)}else t.slideTo(a)}};var Vq={loopCreate:function(){var e=this,t=OR(),n=e.params,i=e.$wrapperEl,r=i.children().length>0?sq(i.children()[0].parentNode):i;r.children(".".concat(n.slideClass,".").concat(n.slideDuplicateClass)).remove();var a=r.children(".".concat(n.slideClass));if(n.loopFillGroupWithBlank){var o=n.slidesPerGroup-a.length%n.slidesPerGroup;if(o!==n.slidesPerGroup){for(var l=0;l<o;l+=1){var g=sq(t.createElement("div")).addClass("".concat(n.slideClass," ").concat(n.slideBlankClass));r.append(g)}a=r.children(".".concat(n.slideClass))}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=a.length),e.loopedSlides=Math.ceil(parseFloat(n.loopedSlides||n.slidesPerView,10)),e.loopedSlides+=n.loopAdditionalSlides,e.loopedSlides>a.length&&e.params.loopedSlidesLimit&&(e.loopedSlides=a.length);var s=[],c=[];a.each((function(e,t){sq(e).attr("data-swiper-slide-index",t)}));for(var u=0;u<e.loopedSlides;u+=1){var I=u-Math.floor(u/a.length)*a.length;c.push(a.eq(I)[0]),s.unshift(a.eq(a.length-I-1)[0])}for(var d=0;d<c.length;d+=1)r.append(sq(c[d].cloneNode(!0)).addClass(n.slideDuplicateClass));for(var C=s.length-1;C>=0;C-=1)r.prepend(sq(s[C].cloneNode(!0)).addClass(n.slideDuplicateClass))},loopFix:function(){var e=this;e.emit("beforeLoopFix");var t,n=e.activeIndex,i=e.slides,r=e.loopedSlides,a=e.allowSlidePrev,o=e.allowSlideNext,l=e.snapGrid,g=e.rtlTranslate;e.allowSlidePrev=!0,e.allowSlideNext=!0;var s=-l[n]-e.getTranslate();if(n<r)t=i.length-3*r+n,t+=r,e.slideTo(t,0,!1,!0)&&0!==s&&e.setTranslate((g?-e.translate:e.translate)-s);else if(n>=i.length-r){t=-i.length+n+r,t+=r,e.slideTo(t,0,!1,!0)&&0!==s&&e.setTranslate((g?-e.translate:e.translate)-s)}e.allowSlidePrev=a,e.allowSlideNext=o,e.emit("loopFix")},loopDestroy:function(){var e=this,t=e.$wrapperEl,n=e.params,i=e.slides;t.children(".".concat(n.slideClass,".").concat(n.slideDuplicateClass,",.").concat(n.slideClass,".").concat(n.slideBlankClass)).remove(),i.removeAttr("data-swiper-slide-index")}};function Rq(e){var t=this,n=OR(),i=jR(),r=t.touchEventsData,a=t.params,o=t.touches;if(t.enabled&&(!t.animating||!a.preventInteractionOnTransition)){!t.animating&&a.cssMode&&a.loop&&t.loopFix();var l=e;l.originalEvent&&(l=l.originalEvent);var g=sq(l.target);if(("wrapper"!==a.touchEventsTarget||g.closest(t.wrapperEl).length)&&(r.isTouchEvent="touchstart"===l.type,(r.isTouchEvent||!("which"in l)||3!==l.which)&&!(!r.isTouchEvent&&"button"in l&&l.button>0)&&(!r.isTouched||!r.isMoved))){var s=!!a.noSwipingClass&&""!==a.noSwipingClass,c=e.composedPath?e.composedPath():e.path;s&&l.target&&l.target.shadowRoot&&c&&(g=sq(c[0]));var u=a.noSwipingSelector?a.noSwipingSelector:".".concat(a.noSwipingClass),I=!(!l.target||!l.target.shadowRoot);if(a.noSwiping&&(I?function(e){function t(n){if(!n||n===OR()||n===jR())return null;n.assignedSlot&&(n=n.assignedSlot);var i=n.closest(e);return i||n.getRootNode?i||t(n.getRootNode().host):null}return t(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this)}(u,g[0]):g.closest(u)[0]))t.allowClick=!0;else if(!a.swipeHandler||g.closest(a.swipeHandler)[0]){o.currentX="touchstart"===l.type?l.targetTouches[0].pageX:l.pageX,o.currentY="touchstart"===l.type?l.targetTouches[0].pageY:l.pageY;var d=o.currentX,C=o.currentY,h=a.edgeSwipeDetection||a.iOSEdgeSwipeDetection,A=a.edgeSwipeThreshold||a.iOSEdgeSwipeThreshold;if(h&&(d<=A||d>=i.innerWidth-A)){if("prevent"!==h)return;e.preventDefault()}if(Object.assign(r,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=d,o.startY=C,r.touchStartTime=Iq(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,a.threshold>0&&(r.allowThresholdMove=!1),"touchstart"!==l.type){var p=!0;g.is(r.focusableElements)&&(p=!1,"SELECT"===g[0].nodeName&&(r.isTouched=!1)),n.activeElement&&sq(n.activeElement).is(r.focusableElements)&&n.activeElement!==g[0]&&n.activeElement.blur();var m=p&&t.allowTouchMove&&a.touchStartPreventDefault;!a.touchStartForcePreventDefault&&!m||g[0].isContentEditable||l.preventDefault()}t.params.freeMode&&t.params.freeMode.enabled&&t.freeMode&&t.animating&&!a.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",l)}}}}function qq(e){var t=OR(),n=this,i=n.touchEventsData,r=n.params,a=n.touches,o=n.rtlTranslate;if(n.enabled){var l=e;if(l.originalEvent&&(l=l.originalEvent),i.isTouched){if(!i.isTouchEvent||"touchmove"===l.type){var g="touchmove"===l.type&&l.targetTouches&&(l.targetTouches[0]||l.changedTouches[0]),s="touchmove"===l.type?g.pageX:l.pageX,c="touchmove"===l.type?g.pageY:l.pageY;if(l.preventedByNestedSwiper)return a.startX=s,void(a.startY=c);if(!n.allowTouchMove)return sq(l.target).is(i.focusableElements)||(n.allowClick=!1),void(i.isTouched&&(Object.assign(a,{startX:s,startY:c,currentX:s,currentY:c}),i.touchStartTime=Iq()));if(i.isTouchEvent&&r.touchReleaseOnEdges&&!r.loop)if(n.isVertical()){if(c<a.startY&&n.translate<=n.maxTranslate()||c>a.startY&&n.translate>=n.minTranslate())return i.isTouched=!1,void(i.isMoved=!1)}else if(s<a.startX&&n.translate<=n.maxTranslate()||s>a.startX&&n.translate>=n.minTranslate())return;if(i.isTouchEvent&&t.activeElement&&l.target===t.activeElement&&sq(l.target).is(i.focusableElements))return i.isMoved=!0,void(n.allowClick=!1);if(i.allowTouchCallbacks&&n.emit("touchMove",l),!(l.targetTouches&&l.targetTouches.length>1)){a.currentX=s,a.currentY=c;var u=a.currentX-a.startX,I=a.currentY-a.startY;if(!(n.params.threshold&&Math.sqrt(Math.pow(u,2)+Math.pow(I,2))<n.params.threshold)){var d;if("undefined"===typeof i.isScrolling)n.isHorizontal()&&a.currentY===a.startY||n.isVertical()&&a.currentX===a.startX?i.isScrolling=!1:u*u+I*I>=25&&(d=180*Math.atan2(Math.abs(I),Math.abs(u))/Math.PI,i.isScrolling=n.isHorizontal()?d>r.touchAngle:90-d>r.touchAngle);if(i.isScrolling&&n.emit("touchMoveOpposite",l),"undefined"===typeof i.startMoving&&(a.currentX===a.startX&&a.currentY===a.startY||(i.startMoving=!0)),i.isScrolling)i.isTouched=!1;else if(i.startMoving){n.allowClick=!1,!r.cssMode&&l.cancelable&&l.preventDefault(),r.touchMoveStopPropagation&&!r.nested&&l.stopPropagation(),i.isMoved||(r.loop&&!r.cssMode&&n.loopFix(),i.startTranslate=n.getTranslate(),n.setTransition(0),n.animating&&n.$wrapperEl.trigger("webkitTransitionEnd transitionend"),i.allowMomentumBounce=!1,!r.grabCursor||!0!==n.allowSlideNext&&!0!==n.allowSlidePrev||n.setGrabCursor(!0),n.emit("sliderFirstMove",l)),n.emit("sliderMove",l),i.isMoved=!0;var C=n.isHorizontal()?u:I;a.diff=C,C*=r.touchRatio,o&&(C=-C),n.swipeDirection=C>0?"prev":"next",i.currentTranslate=C+i.startTranslate;var h=!0,A=r.resistanceRatio;if(r.touchReleaseOnEdges&&(A=0),C>0&&i.currentTranslate>n.minTranslate()?(h=!1,r.resistance&&(i.currentTranslate=n.minTranslate()-1+Math.pow(-n.minTranslate()+i.startTranslate+C,A))):C<0&&i.currentTranslate<n.maxTranslate()&&(h=!1,r.resistance&&(i.currentTranslate=n.maxTranslate()+1-Math.pow(n.maxTranslate()-i.startTranslate-C,A))),h&&(l.preventedByNestedSwiper=!0),!n.allowSlideNext&&"next"===n.swipeDirection&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!n.allowSlidePrev&&"prev"===n.swipeDirection&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),n.allowSlidePrev||n.allowSlideNext||(i.currentTranslate=i.startTranslate),r.threshold>0){if(!(Math.abs(C)>r.threshold||i.allowThresholdMove))return void(i.currentTranslate=i.startTranslate);if(!i.allowThresholdMove)return i.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,i.currentTranslate=i.startTranslate,void(a.diff=n.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY)}r.followFinger&&!r.cssMode&&((r.freeMode&&r.freeMode.enabled&&n.freeMode||r.watchSlidesProgress)&&(n.updateActiveIndex(),n.updateSlidesClasses()),n.params.freeMode&&r.freeMode.enabled&&n.freeMode&&n.freeMode.onTouchMove(),n.updateProgress(i.currentTranslate),n.setTranslate(i.currentTranslate))}}}}}else i.startMoving&&i.isScrolling&&n.emit("touchMoveOpposite",l)}}function kq(e){var t=this,n=t.touchEventsData,i=t.params,r=t.touches,a=t.rtlTranslate,o=t.slidesGrid;if(t.enabled){var l=e;if(l.originalEvent&&(l=l.originalEvent),n.allowTouchCallbacks&&t.emit("touchEnd",l),n.allowTouchCallbacks=!1,!n.isTouched)return n.isMoved&&i.grabCursor&&t.setGrabCursor(!1),n.isMoved=!1,void(n.startMoving=!1);i.grabCursor&&n.isMoved&&n.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);var g,s=Iq(),c=s-n.touchStartTime;if(t.allowClick){var u=l.path||l.composedPath&&l.composedPath();t.updateClickedSlide(u&&u[0]||l.target),t.emit("tap click",l),c<300&&s-n.lastClickTime<300&&t.emit("doubleTap doubleClick",l)}if(n.lastClickTime=Iq(),uq((function(){t.destroyed||(t.allowClick=!0)})),!n.isTouched||!n.isMoved||!t.swipeDirection||0===r.diff||n.currentTranslate===n.startTranslate)return n.isTouched=!1,n.isMoved=!1,void(n.startMoving=!1);if(n.isTouched=!1,n.isMoved=!1,n.startMoving=!1,g=i.followFinger?a?t.translate:-t.translate:-n.currentTranslate,!i.cssMode)if(t.params.freeMode&&i.freeMode.enabled)t.freeMode.onTouchEnd({currentPos:g});else{for(var I=0,d=t.slidesSizesGrid[0],C=0;C<o.length;C+=C<i.slidesPerGroupSkip?1:i.slidesPerGroup){var h=C<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;"undefined"!==typeof o[C+h]?g>=o[C]&&g<o[C+h]&&(I=C,d=o[C+h]-o[C]):g>=o[C]&&(I=C,d=o[o.length-1]-o[o.length-2])}var A=null,p=null;i.rewind&&(t.isBeginning?p=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(A=0));var m=(g-o[I])/d,f=I<i.slidesPerGroupSkip-1?1:i.slidesPerGroup;if(c>i.longSwipesMs){if(!i.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(m>=i.longSwipesRatio?t.slideTo(i.rewind&&t.isEnd?A:I+f):t.slideTo(I)),"prev"===t.swipeDirection&&(m>1-i.longSwipesRatio?t.slideTo(I+f):null!==p&&m<0&&Math.abs(m)>i.longSwipesRatio?t.slideTo(p):t.slideTo(I))}else{if(!i.shortSwipes)return void t.slideTo(t.activeIndex);t.navigation&&(l.target===t.navigation.nextEl||l.target===t.navigation.prevEl)?l.target===t.navigation.nextEl?t.slideTo(I+f):t.slideTo(I):("next"===t.swipeDirection&&t.slideTo(null!==A?A:I+f),"prev"===t.swipeDirection&&t.slideTo(null!==p?p:I))}}}}function Xq(){var e=this,t=e.params,n=e.el;if(!n||0!==n.offsetWidth){t.breakpoints&&e.setBreakpoint();var i=e.allowSlideNext,r=e.allowSlidePrev,a=e.snapGrid;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses(),("auto"===t.slidesPerView||t.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.run(),e.allowSlidePrev=r,e.allowSlideNext=i,e.params.watchOverflow&&a!==e.snapGrid&&e.checkOverflow()}}function Yq(e){var t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function Nq(){var e=this,t=e.wrapperEl,n=e.rtlTranslate;if(e.enabled){e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();var i=e.maxTranslate()-e.minTranslate();(0===i?0:(e.translate-e.minTranslate())/i)!==e.progress&&e.updateProgress(n?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}}var Kq=!1;function Hq(){}var zq=function(e,t){var n=OR(),i=e.params,r=e.touchEvents,a=e.el,o=e.wrapperEl,l=e.device,g=e.support,s=!!i.nested,c="on"===t?"addEventListener":"removeEventListener",u=t;if(g.touch){var I=!("touchstart"!==r.start||!g.passiveListener||!i.passiveListeners)&&{passive:!0,capture:!1};a[c](r.start,e.onTouchStart,I),a[c](r.move,e.onTouchMove,g.passiveListener?{passive:!1,capture:s}:s),a[c](r.end,e.onTouchEnd,I),r.cancel&&a[c](r.cancel,e.onTouchEnd,I)}else a[c](r.start,e.onTouchStart,!1),n[c](r.move,e.onTouchMove,s),n[c](r.end,e.onTouchEnd,!1);(i.preventClicks||i.preventClicksPropagation)&&a[c]("click",e.onClick,!0),i.cssMode&&o[c]("scroll",e.onScroll),i.updateOnWindowResize?e[u](l.ios||l.android?"resize orientationchange observerUpdate":"resize observerUpdate",Xq,!0):e[u]("observerUpdate",Xq,!0)};var Mq={attachEvents:function(){var e=this,t=OR(),n=e.params,i=e.support;e.onTouchStart=Rq.bind(e),e.onTouchMove=qq.bind(e),e.onTouchEnd=kq.bind(e),n.cssMode&&(e.onScroll=Nq.bind(e)),e.onClick=Yq.bind(e),i.touch&&!Kq&&(t.addEventListener("touchstart",Hq),Kq=!0),zq(e,"on")},detachEvents:function(){zq(this,"off")}},Fq=function(e,t){return e.grid&&t.grid&&t.grid.rows>1};var Lq={setBreakpoint:function(){var e=this,t=e.activeIndex,n=e.initialized,i=e.loopedSlides,r=void 0===i?0:i,a=e.params,o=e.$el,l=a.breakpoints;if(l&&(!l||0!==Object.keys(l).length)){var g=e.getBreakpoint(l,e.params.breakpointsBase,e.el);if(g&&e.currentBreakpoint!==g){var s=(g in l?l[g]:void 0)||e.originalParams,c=Fq(e,a),u=Fq(e,s),I=a.enabled;c&&!u?(o.removeClass("".concat(a.containerModifierClass,"grid ").concat(a.containerModifierClass,"grid-column")),e.emitContainerClasses()):!c&&u&&(o.addClass("".concat(a.containerModifierClass,"grid")),(s.grid.fill&&"column"===s.grid.fill||!s.grid.fill&&"column"===a.grid.fill)&&o.addClass("".concat(a.containerModifierClass,"grid-column")),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach((function(t){var n=a[t]&&a[t].enabled,i=s[t]&&s[t].enabled;n&&!i&&e[t].disable(),!n&&i&&e[t].enable()}));var d=s.direction&&s.direction!==a.direction,C=a.loop&&(s.slidesPerView!==a.slidesPerView||d);d&&n&&e.changeDirection(),pq(e.params,s);var h=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),I&&!h?e.disable():!I&&h&&e.enable(),e.currentBreakpoint=g,e.emit("_beforeBreakpoint",s),C&&n&&(e.loopDestroy(),e.loopCreate(),e.updateSlides(),e.slideTo(t-r+e.loopedSlides,0,!1)),e.emit("breakpoint",s)}}},getBreakpoint:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"window",n=arguments.length>2?arguments[2]:void 0;if(e&&("container"!==t||n)){var i=!1,r=jR(),a="window"===t?r.innerHeight:n.clientHeight,o=Object.keys(e).map((function(e){if("string"===typeof e&&0===e.indexOf("@")){var t=parseFloat(e.substr(1));return{value:a*t,point:e}}return{value:e,point:e}}));o.sort((function(e,t){return parseInt(e.value,10)-parseInt(t.value,10)}));for(var l=0;l<o.length;l+=1){var g=o[l],s=g.point,c=g.value;"window"===t?r.matchMedia("(min-width: ".concat(c,"px)")).matches&&(i=s):c<=n.clientWidth&&(i=s)}return i||"max"}}};var _q={addClasses:function(){var e=this,t=e.classNames,n=e.params,i=e.rtl,r=e.$el,a=e.device,o=e.support,l=function(e,t){var n=[];return e.forEach((function(e){"object"===typeof e?Object.keys(e).forEach((function(i){e[i]&&n.push(t+i)})):"string"===typeof e&&n.push(t+e)})),n}(["initialized",n.direction,{"pointer-events":!o.touch},{"free-mode":e.params.freeMode&&n.freeMode.enabled},{autoheight:n.autoHeight},{rtl:i},{grid:n.grid&&n.grid.rows>1},{"grid-column":n.grid&&n.grid.rows>1&&"column"===n.grid.fill},{android:a.android},{ios:a.ios},{"css-mode":n.cssMode},{centered:n.cssMode&&n.centeredSlides},{"watch-progress":n.watchSlidesProgress}],n.containerModifierClass);t.push.apply(t,O(l)),r.addClass(O(t).join(" ")),e.emitContainerClasses()},removeClasses:function(){var e=this,t=e.$el,n=e.classNames;t.removeClass(n.join(" ")),e.emitContainerClasses()}};var Tq={loadImage:function(e,t,n,i,r,a){var o,l=jR();function g(){a&&a()}sq(e).parent("picture")[0]||e.complete&&r?g():t?((o=new l.Image).onload=g,o.onerror=g,i&&(o.sizes=i),n&&(o.srcset=n),t&&(o.src=t)):g()},preloadImages:function(){var e=this;function t(){"undefined"!==typeof e&&null!==e&&e&&!e.destroyed&&(void 0!==e.imagesLoaded&&(e.imagesLoaded+=1),e.imagesLoaded===e.imagesToLoad.length&&(e.params.updateOnImagesReady&&e.update(),e.emit("imagesReady")))}e.imagesToLoad=e.$el.find("img");for(var n=0;n<e.imagesToLoad.length;n+=1){var i=e.imagesToLoad[n];e.loadImage(i,i.currentSrc||i.getAttribute("src"),i.srcset||i.getAttribute("srcset"),i.sizes||i.getAttribute("sizes"),!0,t)}}};var Eq={init:!0,direction:"horizontal",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:0,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,preloadImages:!0,updateOnImagesReady:!0,loop:!1,loopAdditionalSlides:0,loopedSlides:null,loopedSlidesLimit:!0,loopFillGroupWithBlank:!1,loopPreventsSlide:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-invisible-blank",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",runCallbacksOnInit:!0,_emitClasses:!1};function Jq(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=Object.keys(n)[0],r=n[i];"object"===typeof r&&null!==r?(["navigation","pagination","scrollbar"].indexOf(i)>=0&&!0===e[i]&&(e[i]={auto:!0}),i in e&&"enabled"in r?(!0===e[i]&&(e[i]={enabled:!0}),"object"!==typeof e[i]||"enabled"in e[i]||(e[i].enabled=!0),e[i]||(e[i]={enabled:!1}),pq(t,n)):pq(t,n)):pq(t,n)}}var Uq={eventsEmitter:Bq,update:Zq,translate:wq,transition:Sq,slide:Wq,loop:Vq,grabCursor:{setGrabCursor:function(e){var t=this;if(!(t.support.touch||!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)){var n="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;n.style.cursor="move",n.style.cursor=e?"grabbing":"grab"}},unsetGrabCursor:function(){var e=this;e.support.touch||e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="")}},events:Mq,breakpoints:Lq,checkOverflow:{checkOverflow:function(){var e=this,t=e.isLocked,n=e.params,i=n.slidesOffsetBefore;if(i){var r=e.slides.length-1,a=e.slidesGrid[r]+e.slidesSizesGrid[r]+2*i;e.isLocked=e.size>a}else e.isLocked=1===e.snapGrid.length;!0===n.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===n.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},classes:_q,images:Tq},Dq={},Pq=function(){function e(){var t,n;$(this,e);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];if(1===r.length&&r[0].constructor&&"Object"===Object.prototype.toString.call(r[0]).slice(8,-1)?n=r[0]:(t=r[0],n=r[1]),n||(n={}),n=pq({},n),t&&!n.el&&(n.el=t),n.el&&sq(n.el).length>1){var o=[];return sq(n.el).each((function(t){var i=pq({},n,{el:t});o.push(new e(i))})),o}var l,g=this;(g.__swiper__=!0,g.support=vq(),g.device=yq({userAgent:n.userAgent}),g.browser=Gq(),g.eventsListeners={},g.eventsAnyListeners=[],g.modules=O(g.__modules__),n.modules&&Array.isArray(n.modules))&&(l=g.modules).push.apply(l,O(n.modules));var s={};g.modules.forEach((function(e){e({swiper:g,extendParams:Jq(n,s),on:g.on.bind(g),once:g.once.bind(g),off:g.off.bind(g),emit:g.emit.bind(g)})}));var c=pq({},Eq,s);return g.params=pq({},c,Dq,n),g.originalParams=pq({},g.params),g.passedParams=pq({},n),g.params&&g.params.on&&Object.keys(g.params.on).forEach((function(e){g.on(e,g.params.on[e])})),g.params&&g.params.onAny&&g.onAny(g.params.onAny),g.$=sq,Object.assign(g,{enabled:g.params.enabled,el:t,classNames:[],slides:sq(),slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:function(){return"horizontal"===g.params.direction},isVertical:function(){return"vertical"===g.params.direction},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,allowSlideNext:g.params.allowSlideNext,allowSlidePrev:g.params.allowSlidePrev,touchEvents:function(){var e=["touchstart","touchmove","touchend","touchcancel"],t=["pointerdown","pointermove","pointerup"];return g.touchEventsTouch={start:e[0],move:e[1],end:e[2],cancel:e[3]},g.touchEventsDesktop={start:t[0],move:t[1],end:t[2]},g.support.touch||!g.params.simulateTouch?g.touchEventsTouch:g.touchEventsDesktop}(),touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:g.params.focusableElements,lastClickTime:Iq(),clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,isTouchEvent:void 0,startMoving:void 0},allowClick:!0,allowTouchMove:g.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),g.emit("_swiper"),g.params.init&&g.init(),g}return te(e,[{key:"enable",value:function(){var e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}},{key:"disable",value:function(){var e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}},{key:"setProgress",value:function(e,t){var n=this;e=Math.min(Math.max(e,0),1);var i=n.minTranslate(),r=(n.maxTranslate()-i)*e+i;n.translateTo(r,"undefined"===typeof t?0:t),n.updateActiveIndex(),n.updateSlidesClasses()}},{key:"emitContainerClasses",value:function(){var e=this;if(e.params._emitClasses&&e.el){var t=e.el.className.split(" ").filter((function(t){return 0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass)}));e.emit("_containerClasses",t.join(" "))}}},{key:"getSlideClasses",value:function(e){var t=this;return t.destroyed?"":e.className.split(" ").filter((function(e){return 0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)})).join(" ")}},{key:"emitSlidesClasses",value:function(){var e=this;if(e.params._emitClasses&&e.el){var t=[];e.slides.each((function(n){var i=e.getSlideClasses(n);t.push({slideEl:n,classNames:i}),e.emit("_slideClass",n,i)})),e.emit("_slideClasses",t)}}},{key:"slidesPerViewDynamic",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"current",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this,i=n.params,r=n.slides,a=n.slidesGrid,o=n.slidesSizesGrid,l=n.size,g=n.activeIndex,s=1;if(i.centeredSlides){for(var c,u=r[g].swiperSlideSize,I=g+1;I<r.length;I+=1)r[I]&&!c&&(s+=1,(u+=r[I].swiperSlideSize)>l&&(c=!0));for(var d=g-1;d>=0;d-=1)r[d]&&!c&&(s+=1,(u+=r[d].swiperSlideSize)>l&&(c=!0))}else if("current"===e)for(var C=g+1;C<r.length;C+=1){var h=t?a[C]+o[C]-a[g]<l:a[C]-a[g]<l;h&&(s+=1)}else for(var A=g-1;A>=0;A-=1){var p=a[g]-a[A]<l;p&&(s+=1)}return s}},{key:"update",value:function(){var e=this;if(e&&!e.destroyed){var t=e.snapGrid,n=e.params;n.breakpoints&&e.setBreakpoint(),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.params.freeMode&&e.params.freeMode.enabled?(i(),e.params.autoHeight&&e.updateAutoHeight()):(("auto"===e.params.slidesPerView||e.params.slidesPerView>1)&&e.isEnd&&!e.params.centeredSlides?e.slideTo(e.slides.length-1,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0))||i(),n.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}function i(){var t=e.rtlTranslate?-1*e.translate:e.translate,n=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(n),e.updateActiveIndex(),e.updateSlidesClasses()}}},{key:"changeDirection",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,i=n.params.direction;return e||(e="horizontal"===i?"vertical":"horizontal"),e===i||"horizontal"!==e&&"vertical"!==e||(n.$el.removeClass("".concat(n.params.containerModifierClass).concat(i)).addClass("".concat(n.params.containerModifierClass).concat(e)),n.emitContainerClasses(),n.params.direction=e,n.slides.each((function(t){"vertical"===e?t.style.width="":t.style.height=""})),n.emit("changeDirection"),t&&n.update()),n}},{key:"changeLanguageDirection",value:function(e){var t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.$el.addClass("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="rtl"):(t.$el.removeClass("".concat(t.params.containerModifierClass,"rtl")),t.el.dir="ltr"),t.update())}},{key:"mount",value:function(e){var t=this;if(t.mounted)return!0;var n=sq(e||t.params.el);if(!(e=n[0]))return!1;e.swiper=t;var i=function(){return".".concat((t.params.wrapperClass||"").trim().split(" ").join("."))},r=function(){if(e&&e.shadowRoot&&e.shadowRoot.querySelector){var t=sq(e.shadowRoot.querySelector(i()));return t.children=function(e){return n.children(e)},t}return n.children?n.children(i()):sq(n).children(i())}();if(0===r.length&&t.params.createElements){var a=OR().createElement("div");r=sq(a),a.className=t.params.wrapperClass,n.append(a),n.children(".".concat(t.params.slideClass)).each((function(e){r.append(e)}))}return Object.assign(t,{$el:n,el:e,$wrapperEl:r,wrapperEl:r[0],mounted:!0,rtl:"rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===e.dir.toLowerCase()||"rtl"===n.css("direction")),wrongRTL:"-webkit-box"===r.css("display")}),!0}},{key:"init",value:function(e){var t=this;return t.initialized||!1===t.mount(e)||(t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.params.loop&&t.loopCreate(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.preloadImages&&t.preloadImages(),t.params.loop?t.slideTo(t.params.initialSlide+t.loopedSlides,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.attachEvents(),t.initialized=!0,t.emit("init"),t.emit("afterInit")),t}},{key:"destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this,i=n.params,r=n.$el,a=n.$wrapperEl,o=n.slides;return"undefined"===typeof n.params||n.destroyed||(n.emit("beforeDestroy"),n.initialized=!1,n.detachEvents(),i.loop&&n.loopDestroy(),t&&(n.removeClasses(),r.removeAttr("style"),a.removeAttr("style"),o&&o.length&&o.removeClass([i.slideVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-slide-index")),n.emit("destroy"),Object.keys(n.eventsListeners).forEach((function(e){n.off(e)})),!1!==e&&(n.$el[0].swiper=null,cq(n)),n.destroyed=!0),null}}],[{key:"extendDefaults",value:function(e){pq(Dq,e)}},{key:"extendedDefaults",get:function(){return Dq}},{key:"defaults",get:function(){return Eq}},{key:"installModule",value:function(t){e.prototype.__modules__||(e.prototype.__modules__=[]);var n=e.prototype.__modules__;"function"===typeof t&&n.indexOf(t)<0&&n.push(t)}},{key:"use",value:function(t){return Array.isArray(t)?(t.forEach((function(t){return e.installModule(t)})),e):(e.installModule(t),e)}}]),e}();Object.keys(Uq).forEach((function(e){Object.keys(Uq[e]).forEach((function(t){Pq.prototype[t]=Uq[e][t]}))})),Pq.use([function(e){var t=e.swiper,n=e.on,i=e.emit,r=jR(),a=null,o=null,l=function(){t&&!t.destroyed&&t.initialized&&(i("beforeResize"),i("resize"))},g=function(){t&&!t.destroyed&&t.initialized&&i("orientationchange")};n("init",(function(){t.params.resizeObserver&&"undefined"!==typeof r.ResizeObserver?t&&!t.destroyed&&t.initialized&&(a=new ResizeObserver((function(e){o=r.requestAnimationFrame((function(){var n=t.width,i=t.height,r=n,a=i;e.forEach((function(e){var n=e.contentBoxSize,i=e.contentRect,o=e.target;o&&o!==t.el||(r=i?i.width:(n[0]||n).inlineSize,a=i?i.height:(n[0]||n).blockSize)})),r===n&&a===i||l()}))})),a.observe(t.el)):(r.addEventListener("resize",l),r.addEventListener("orientationchange",g))})),n("destroy",(function(){o&&r.cancelAnimationFrame(o),a&&a.unobserve&&t.el&&(a.unobserve(t.el),a=null),r.removeEventListener("resize",l),r.removeEventListener("orientationchange",g)}))},function(e){var t=e.swiper,n=e.extendParams,i=e.on,r=e.emit,a=[],o=jR(),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.MutationObserver||o.WebkitMutationObserver,i=new n((function(e){if(1!==e.length){var t=function(){r("observerUpdate",e[0])};o.requestAnimationFrame?o.requestAnimationFrame(t):o.setTimeout(t,0)}else r("observerUpdate",e[0])}));i.observe(e,{attributes:"undefined"===typeof t.attributes||t.attributes,childList:"undefined"===typeof t.childList||t.childList,characterData:"undefined"===typeof t.characterData||t.characterData}),a.push(i)};n({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",(function(){if(t.params.observer){if(t.params.observeParents)for(var e=t.$el.parents(),n=0;n<e.length;n+=1)l(e[n]);l(t.$el[0],{childList:t.params.observeSlideChildren}),l(t.$wrapperEl[0],{attributes:!1})}})),i("destroy",(function(){a.forEach((function(e){e.disconnect()})),a.splice(0,a.length)}))}]);var Oq=Pq;function Qq(e,t,n,i){var r=OR();return e.params.createElements&&Object.keys(i).forEach((function(a){if(!n[a]&&!0===n.auto){var o=e.$el.children(".".concat(i[a]))[0];o||((o=r.createElement("div")).className=i[a],e.$el.append(o)),n[a]=o,t[a]=o}})),n}function jq(e){var t=e.swiper,n=e.extendParams,i=e.on,r=e.emit;function a(e){var n;return e&&(n=sq(e),t.params.uniqueNavElements&&"string"===typeof e&&n.length>1&&1===t.$el.find(e).length&&(n=t.$el.find(e))),n}function o(e,n){var i=t.params.navigation;e&&e.length>0&&(e[n?"addClass":"removeClass"](i.disabledClass),e[0]&&"BUTTON"===e[0].tagName&&(e[0].disabled=n),t.params.watchOverflow&&t.enabled&&e[t.isLocked?"addClass":"removeClass"](i.lockClass))}function l(){if(!t.params.loop){var e=t.navigation,n=e.$nextEl;o(e.$prevEl,t.isBeginning&&!t.params.rewind),o(n,t.isEnd&&!t.params.rewind)}}function g(e){e.preventDefault(),(!t.isBeginning||t.params.loop||t.params.rewind)&&(t.slidePrev(),r("navigationPrev"))}function s(e){e.preventDefault(),(!t.isEnd||t.params.loop||t.params.rewind)&&(t.slideNext(),r("navigationNext"))}function c(){var e=t.params.navigation;if(t.params.navigation=Qq(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),e.nextEl||e.prevEl){var n=a(e.nextEl),i=a(e.prevEl);n&&n.length>0&&n.on("click",s),i&&i.length>0&&i.on("click",g),Object.assign(t.navigation,{$nextEl:n,nextEl:n&&n[0],$prevEl:i,prevEl:i&&i[0]}),t.enabled||(n&&n.addClass(e.lockClass),i&&i.addClass(e.lockClass))}}function u(){var e=t.navigation,n=e.$nextEl,i=e.$prevEl;n&&n.length&&(n.off("click",s),n.removeClass(t.params.navigation.disabledClass)),i&&i.length&&(i.off("click",g),i.removeClass(t.params.navigation.disabledClass))}n({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,$nextEl:null,prevEl:null,$prevEl:null},i("init",(function(){!1===t.params.navigation.enabled?I():(c(),l())})),i("toEdge fromEdge lock unlock",(function(){l()})),i("destroy",(function(){u()})),i("enable disable",(function(){var e=t.navigation,n=e.$nextEl,i=e.$prevEl;n&&n[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass),i&&i[t.enabled?"removeClass":"addClass"](t.params.navigation.lockClass)})),i("click",(function(e,n){var i=t.navigation,a=i.$nextEl,o=i.$prevEl,l=n.target;if(t.params.navigation.hideOnClick&&!sq(l).is(o)&&!sq(l).is(a)){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===l||t.pagination.el.contains(l)))return;var g;a?g=a.hasClass(t.params.navigation.hiddenClass):o&&(g=o.hasClass(t.params.navigation.hiddenClass)),r(!0===g?"navigationShow":"navigationHide"),a&&a.toggleClass(t.params.navigation.hiddenClass),o&&o.toggleClass(t.params.navigation.hiddenClass)}}));var I=function(){t.$el.addClass(t.params.navigation.navigationDisabledClass),u()};Object.assign(t.navigation,{enable:function(){t.$el.removeClass(t.params.navigation.navigationDisabledClass),c(),l()},disable:I,update:l,init:c,destroy:u})}function $q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return".".concat(e.trim().replace(/([\.:!\/])/g,"\\$1").replace(/ /g,"."))}function ek(e){var t,n=e.swiper,i=e.extendParams,r=e.on,a=e.emit,o="swiper-pagination";i({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:function(e){return e},formatFractionTotal:function(e){return e},bulletClass:"".concat(o,"-bullet"),bulletActiveClass:"".concat(o,"-bullet-active"),modifierClass:"".concat(o,"-"),currentClass:"".concat(o,"-current"),totalClass:"".concat(o,"-total"),hiddenClass:"".concat(o,"-hidden"),progressbarFillClass:"".concat(o,"-progressbar-fill"),progressbarOppositeClass:"".concat(o,"-progressbar-opposite"),clickableClass:"".concat(o,"-clickable"),lockClass:"".concat(o,"-lock"),horizontalClass:"".concat(o,"-horizontal"),verticalClass:"".concat(o,"-vertical"),paginationDisabledClass:"".concat(o,"-disabled")}}),n.pagination={el:null,$el:null,bullets:[]};var l=0;function g(){return!n.params.pagination.el||!n.pagination.el||!n.pagination.$el||0===n.pagination.$el.length}function s(e,t){var i=n.params.pagination.bulletActiveClass;e[t]().addClass("".concat(i,"-").concat(t))[t]().addClass("".concat(i,"-").concat(t,"-").concat(t))}function c(){var e=n.rtl,i=n.params.pagination;if(!g()){var r,o=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:n.slides.length,c=n.pagination.$el,u=n.params.loop?Math.ceil((o-2*n.loopedSlides)/n.params.slidesPerGroup):n.snapGrid.length;if(n.params.loop?((r=Math.ceil((n.activeIndex-n.loopedSlides)/n.params.slidesPerGroup))>o-1-2*n.loopedSlides&&(r-=o-2*n.loopedSlides),r>u-1&&(r-=u),r<0&&"bullets"!==n.params.paginationType&&(r=u+r)):r="undefined"!==typeof n.snapIndex?n.snapIndex:n.activeIndex||0,"bullets"===i.type&&n.pagination.bullets&&n.pagination.bullets.length>0){var I,d,C,h=n.pagination.bullets;if(i.dynamicBullets&&(t=h.eq(0)[n.isHorizontal()?"outerWidth":"outerHeight"](!0),c.css(n.isHorizontal()?"width":"height","".concat(t*(i.dynamicMainBullets+4),"px")),i.dynamicMainBullets>1&&void 0!==n.previousIndex&&((l+=r-(n.previousIndex-n.loopedSlides||0))>i.dynamicMainBullets-1?l=i.dynamicMainBullets-1:l<0&&(l=0)),I=Math.max(r-l,0),C=((d=I+(Math.min(h.length,i.dynamicMainBullets)-1))+I)/2),h.removeClass(["","-next","-next-next","-prev","-prev-prev","-main"].map((function(e){return"".concat(i.bulletActiveClass).concat(e)})).join(" ")),c.length>1)h.each((function(e){var t=sq(e),n=t.index();n===r&&t.addClass(i.bulletActiveClass),i.dynamicBullets&&(n>=I&&n<=d&&t.addClass("".concat(i.bulletActiveClass,"-main")),n===I&&s(t,"prev"),n===d&&s(t,"next"))}));else{var A=h.eq(r),p=A.index();if(A.addClass(i.bulletActiveClass),i.dynamicBullets){for(var m=h.eq(I),f=h.eq(d),v=I;v<=d;v+=1)h.eq(v).addClass("".concat(i.bulletActiveClass,"-main"));if(n.params.loop)if(p>=h.length){for(var b=i.dynamicMainBullets;b>=0;b-=1)h.eq(h.length-b).addClass("".concat(i.bulletActiveClass,"-main"));h.eq(h.length-i.dynamicMainBullets-1).addClass("".concat(i.bulletActiveClass,"-prev"))}else s(m,"prev"),s(f,"next");else s(m,"prev"),s(f,"next")}}if(i.dynamicBullets){var y=Math.min(h.length,i.dynamicMainBullets+4),G=(t*y-t)/2-C*t,B=e?"right":"left";h.css(n.isHorizontal()?B:"top","".concat(G,"px"))}}if("fraction"===i.type&&(c.find($q(i.currentClass)).text(i.formatFractionCurrent(r+1)),c.find($q(i.totalClass)).text(i.formatFractionTotal(u))),"progressbar"===i.type){var Z;Z=i.progressbarOpposite?n.isHorizontal()?"vertical":"horizontal":n.isHorizontal()?"horizontal":"vertical";var w=(r+1)/u,x=1,S=1;"horizontal"===Z?x=w:S=w,c.find($q(i.progressbarFillClass)).transform("translate3d(0,0,0) scaleX(".concat(x,") scaleY(").concat(S,")")).transition(n.params.speed)}"custom"===i.type&&i.renderCustom?(c.html(i.renderCustom(n,r+1,u)),a("paginationRender",c[0])):a("paginationUpdate",c[0]),n.params.watchOverflow&&n.enabled&&c[n.isLocked?"addClass":"removeClass"](i.lockClass)}}function u(){var e=n.params.pagination;if(!g()){var t=n.virtual&&n.params.virtual.enabled?n.virtual.slides.length:n.slides.length,i=n.pagination.$el,r="";if("bullets"===e.type){var o=n.params.loop?Math.ceil((t-2*n.loopedSlides)/n.params.slidesPerGroup):n.snapGrid.length;n.params.freeMode&&n.params.freeMode.enabled&&!n.params.loop&&o>t&&(o=t);for(var l=0;l<o;l+=1)e.renderBullet?r+=e.renderBullet.call(n,l,e.bulletClass):r+="<".concat(e.bulletElement,' class="').concat(e.bulletClass,'"></').concat(e.bulletElement,">");i.html(r),n.pagination.bullets=i.find($q(e.bulletClass))}"fraction"===e.type&&(r=e.renderFraction?e.renderFraction.call(n,e.currentClass,e.totalClass):'<span class="'.concat(e.currentClass,'"></span>')+" / "+'<span class="'.concat(e.totalClass,'"></span>'),i.html(r)),"progressbar"===e.type&&(r=e.renderProgressbar?e.renderProgressbar.call(n,e.progressbarFillClass):'<span class="'.concat(e.progressbarFillClass,'"></span>'),i.html(r)),"custom"!==e.type&&a("paginationRender",n.pagination.$el[0])}}function I(){n.params.pagination=Qq(n,n.originalParams.pagination,n.params.pagination,{el:"swiper-pagination"});var e=n.params.pagination;if(e.el){var t=sq(e.el);0!==t.length&&(n.params.uniqueNavElements&&"string"===typeof e.el&&t.length>1&&(t=n.$el.find(e.el)).length>1&&(t=t.filter((function(e){return sq(e).parents(".swiper")[0]===n.el}))),"bullets"===e.type&&e.clickable&&t.addClass(e.clickableClass),t.addClass(e.modifierClass+e.type),t.addClass(n.isHorizontal()?e.horizontalClass:e.verticalClass),"bullets"===e.type&&e.dynamicBullets&&(t.addClass("".concat(e.modifierClass).concat(e.type,"-dynamic")),l=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&t.addClass(e.progressbarOppositeClass),e.clickable&&t.on("click",$q(e.bulletClass),(function(e){e.preventDefault();var t=sq(this).index()*n.params.slidesPerGroup;n.params.loop&&(t+=n.loopedSlides),n.slideTo(t)})),Object.assign(n.pagination,{$el:t,el:t[0]}),n.enabled||t.addClass(e.lockClass))}}function d(){var e=n.params.pagination;if(!g()){var t=n.pagination.$el;t.removeClass(e.hiddenClass),t.removeClass(e.modifierClass+e.type),t.removeClass(n.isHorizontal()?e.horizontalClass:e.verticalClass),n.pagination.bullets&&n.pagination.bullets.removeClass&&n.pagination.bullets.removeClass(e.bulletActiveClass),e.clickable&&t.off("click",$q(e.bulletClass))}}r("init",(function(){!1===n.params.pagination.enabled?C():(I(),u(),c())})),r("activeIndexChange",(function(){(n.params.loop||"undefined"===typeof n.snapIndex)&&c()})),r("snapIndexChange",(function(){n.params.loop||c()})),r("slidesLengthChange",(function(){n.params.loop&&(u(),c())})),r("snapGridLengthChange",(function(){n.params.loop||(u(),c())})),r("destroy",(function(){d()})),r("enable disable",(function(){var e=n.pagination.$el;e&&e[n.enabled?"removeClass":"addClass"](n.params.pagination.lockClass)})),r("lock unlock",(function(){c()})),r("click",(function(e,t){var i=t.target,r=n.pagination.$el;if(n.params.pagination.el&&n.params.pagination.hideOnClick&&r&&r.length>0&&!sq(i).hasClass(n.params.pagination.bulletClass)){if(n.navigation&&(n.navigation.nextEl&&i===n.navigation.nextEl||n.navigation.prevEl&&i===n.navigation.prevEl))return;var o=r.hasClass(n.params.pagination.hiddenClass);a(!0===o?"paginationShow":"paginationHide"),r.toggleClass(n.params.pagination.hiddenClass)}}));var C=function(){n.$el.addClass(n.params.pagination.paginationDisabledClass),n.pagination.$el&&n.pagination.$el.addClass(n.params.pagination.paginationDisabledClass),d()};Object.assign(n.pagination,{enable:function(){n.$el.removeClass(n.params.pagination.paginationDisabledClass),n.pagination.$el&&n.pagination.$el.removeClass(n.params.pagination.paginationDisabledClass),I(),u(),c()},disable:C,render:u,update:c,init:I,destroy:d})}function tk(e){var t,n=e.swiper,i=e.extendParams,r=e.on,a=e.emit;function o(){if(!n.size)return n.autoplay.running=!1,void(n.autoplay.paused=!1);var e=n.slides.eq(n.activeIndex),i=n.params.autoplay.delay;e.attr("data-swiper-autoplay")&&(i=e.attr("data-swiper-autoplay")||n.params.autoplay.delay),clearTimeout(t),t=uq((function(){var e;n.params.autoplay.reverseDirection?n.params.loop?(n.loopFix(),e=n.slidePrev(n.params.speed,!0,!0),a("autoplay")):n.isBeginning?n.params.autoplay.stopOnLastSlide?g():(e=n.slideTo(n.slides.length-1,n.params.speed,!0,!0),a("autoplay")):(e=n.slidePrev(n.params.speed,!0,!0),a("autoplay")):n.params.loop?(n.loopFix(),e=n.slideNext(n.params.speed,!0,!0),a("autoplay")):n.isEnd?n.params.autoplay.stopOnLastSlide?g():(e=n.slideTo(0,n.params.speed,!0,!0),a("autoplay")):(e=n.slideNext(n.params.speed,!0,!0),a("autoplay")),(n.params.cssMode&&n.autoplay.running||!1===e)&&o()}),i)}function l(){return"undefined"===typeof t&&(!n.autoplay.running&&(n.autoplay.running=!0,a("autoplayStart"),o(),!0))}function g(){return!!n.autoplay.running&&("undefined"!==typeof t&&(t&&(clearTimeout(t),t=void 0),n.autoplay.running=!1,a("autoplayStop"),!0))}function s(e){n.autoplay.running&&(n.autoplay.paused||(t&&clearTimeout(t),n.autoplay.paused=!0,0!==e&&n.params.autoplay.waitForTransition?["transitionend","webkitTransitionEnd"].forEach((function(e){n.$wrapperEl[0].addEventListener(e,u)})):(n.autoplay.paused=!1,o())))}function c(){var e=OR();"hidden"===e.visibilityState&&n.autoplay.running&&s(),"visible"===e.visibilityState&&n.autoplay.paused&&(o(),n.autoplay.paused=!1)}function u(e){n&&!n.destroyed&&n.$wrapperEl&&e.target===n.$wrapperEl[0]&&(["transitionend","webkitTransitionEnd"].forEach((function(e){n.$wrapperEl[0].removeEventListener(e,u)})),n.autoplay.paused=!1,n.autoplay.running?o():g())}function I(){n.params.autoplay.disableOnInteraction?g():(a("autoplayPause"),s()),["transitionend","webkitTransitionEnd"].forEach((function(e){n.$wrapperEl[0].removeEventListener(e,u)}))}function d(){n.params.autoplay.disableOnInteraction||(n.autoplay.paused=!1,a("autoplayResume"),o())}n.autoplay={running:!1,paused:!1},i({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!0,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}}),r("init",(function(){n.params.autoplay.enabled&&(l(),OR().addEventListener("visibilitychange",c),n.params.autoplay.pauseOnMouseEnter&&(n.$el.on("mouseenter",I),n.$el.on("mouseleave",d)))})),r("beforeTransitionStart",(function(e,t,i){n.autoplay.running&&(i||!n.params.autoplay.disableOnInteraction?n.autoplay.pause(t):g())})),r("sliderFirstMove",(function(){n.autoplay.running&&(n.params.autoplay.disableOnInteraction?g():s())})),r("touchEnd",(function(){n.params.cssMode&&n.autoplay.paused&&!n.params.autoplay.disableOnInteraction&&o()})),r("destroy",(function(){n.$el.off("mouseenter",I),n.$el.off("mouseleave",d),n.autoplay.running&&g(),OR().removeEventListener("visibilitychange",c)})),Object.assign(n.autoplay,{pause:s,run:o,start:l,stop:g})}function nk(e){return"object"===typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function ik(e,t){var n=["__proto__","constructor","prototype"];Object.keys(t).filter((function(e){return n.indexOf(e)<0})).forEach((function(n){"undefined"===typeof e[n]?e[n]=t[n]:nk(t[n])&&nk(e[n])&&Object.keys(t[n]).length>0?t[n].__swiper__?e[n]=t[n]:ik(e[n],t[n]):e[n]=t[n]}))}function rk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.navigation&&"undefined"===typeof e.navigation.nextEl&&"undefined"===typeof e.navigation.prevEl}function ak(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.pagination&&"undefined"===typeof e.pagination.el}function ok(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.scrollbar&&"undefined"===typeof e.scrollbar.el}function lk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split(" ").map((function(e){return e.trim()})).filter((function(e){return!!e})),n=[];return t.forEach((function(e){n.indexOf(e)<0&&n.push(e)})),n.join(" ")}var gk=["modules","init","_direction","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_preloadImages","updateOnImagesReady","_loop","_loopAdditionalSlides","_loopedSlides","_loopedSlidesLimit","_loopFillGroupWithBlank","loopPreventsSlide","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideBlankClass","slideActiveClass","slideDuplicateActiveClass","slideVisibleClass","slideDuplicateClass","slideNextClass","slideDuplicateNextClass","slidePrevClass","slideDuplicatePrevClass","wrapperClass","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","lazy","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom"];var sk=function(e,t){var n=t.slidesPerView;if(t.breakpoints){var i=Oq.prototype.getBreakpoint(t.breakpoints),r=i in t.breakpoints?t.breakpoints[i]:void 0;r&&r.slidesPerView&&(n=r.slidesPerView)}var a=Math.ceil(parseFloat(t.loopedSlides||n,10));return(a+=t.loopAdditionalSlides)>e.length&&t.loopedSlidesLimit&&(a=e.length),a};function ck(e){return e.type&&e.type.displayName&&e.type.displayName.includes("SwiperSlide")}function uk(e){var t=[];return i.Children.toArray(e).forEach((function(e){ck(e)?t.push(e):e.props&&e.props.children&&uk(e.props.children).forEach((function(e){return t.push(e)}))})),t}function Ik(e){var t=[],n={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return i.Children.toArray(e).forEach((function(e){if(ck(e))t.push(e);else if(e.props&&e.props.slot&&n[e.props.slot])n[e.props.slot].push(e);else if(e.props&&e.props.children){var i=uk(e.props.children);i.length>0?i.forEach((function(e){return t.push(e)})):n["container-end"].push(e)}else n["container-end"].push(e)})),{slides:t,slots:n}}function dk(e){var t,n,i,r,a,o=e.swiper,l=e.slides,g=e.passedParams,s=e.changedParams,c=e.nextEl,u=e.prevEl,I=e.scrollbarEl,d=e.paginationEl,C=s.filter((function(e){return"children"!==e&&"direction"!==e})),h=o.params,A=o.pagination,p=o.navigation,m=o.scrollbar,f=o.virtual,v=o.thumbs;s.includes("thumbs")&&g.thumbs&&g.thumbs.swiper&&h.thumbs&&!h.thumbs.swiper&&(t=!0),s.includes("controller")&&g.controller&&g.controller.control&&h.controller&&!h.controller.control&&(n=!0),s.includes("pagination")&&g.pagination&&(g.pagination.el||d)&&(h.pagination||!1===h.pagination)&&A&&!A.el&&(i=!0),s.includes("scrollbar")&&g.scrollbar&&(g.scrollbar.el||I)&&(h.scrollbar||!1===h.scrollbar)&&m&&!m.el&&(r=!0),s.includes("navigation")&&g.navigation&&(g.navigation.prevEl||u)&&(g.navigation.nextEl||c)&&(h.navigation||!1===h.navigation)&&p&&!p.prevEl&&!p.nextEl&&(a=!0);(C.forEach((function(e){if(nk(h[e])&&nk(g[e]))ik(h[e],g[e]);else{var t=g[e];!0!==t&&!1!==t||"navigation"!==e&&"pagination"!==e&&"scrollbar"!==e?h[e]=g[e]:!1===t&&o[n=e]&&(o[n].destroy(),"navigation"===n?(h[n].prevEl=void 0,h[n].nextEl=void 0,o[n].prevEl=void 0,o[n].nextEl=void 0):(h[n].el=void 0,o[n].el=void 0))}var n})),C.includes("controller")&&!n&&o.controller&&o.controller.control&&h.controller&&h.controller.control&&(o.controller.control=h.controller.control),s.includes("children")&&l&&f&&h.virtual.enabled?(f.slides=l,f.update(!0)):s.includes("children")&&o.lazy&&o.params.lazy.enabled&&o.lazy.load(),t)&&(v.init()&&v.update(!0));n&&(o.controller.control=h.controller.control),i&&(d&&(h.pagination.el=d),A.init(),A.render(),A.update()),r&&(I&&(h.scrollbar.el=I),m.init(),m.updateSize(),m.setTranslate()),a&&(c&&(h.navigation.nextEl=c),u&&(h.navigation.prevEl=u),p.init(),p.update()),s.includes("allowSlideNext")&&(o.allowSlideNext=g.allowSlideNext),s.includes("allowSlidePrev")&&(o.allowSlidePrev=g.allowSlidePrev),s.includes("direction")&&o.changeDirection(g.direction,!1),o.update()}function Ck(e,t){return"undefined"===typeof window?(0,i.useEffect)(e,t):(0,i.useLayoutEffect)(e,t)}var hk=(0,i.createContext)(null),Ak=(0,i.createContext)(null),pk=["className","tag","wrapperTag","children","onSwiper"];function mk(){return mk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},mk.apply(this,arguments)}var fk=(0,i.forwardRef)((function(e,t){var n=void 0===e?{}:e,r=n.className,a=n.tag,o=void 0===a?"div":a,l=n.wrapperTag,g=void 0===l?"div":l,s=n.children,u=n.onSwiper,I=j(n,pk),d=!1,C=c((0,i.useState)("swiper"),2),h=C[0],A=C[1],p=c((0,i.useState)(null),2),m=p[0],f=p[1],v=c((0,i.useState)(!1),2),b=v[0],y=v[1],G=(0,i.useRef)(!1),B=(0,i.useRef)(null),Z=(0,i.useRef)(null),w=(0,i.useRef)(null),x=(0,i.useRef)(null),S=(0,i.useRef)(null),W=(0,i.useRef)(null),V=(0,i.useRef)(null),R=(0,i.useRef)(null),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={on:{}},i={},r={};ik(n,Oq.defaults),ik(n,Oq.extendedDefaults),n._emitClasses=!0,n.init=!1;var a={},o=gk.map((function(e){return e.replace(/_/,"")})),l=Object.assign({},e);return Object.keys(l).forEach((function(l){"undefined"!==typeof e[l]&&(o.indexOf(l)>=0?nk(e[l])?(n[l]={},r[l]={},ik(n[l],e[l]),ik(r[l],e[l])):(n[l]=e[l],r[l]=e[l]):0===l.search(/on[A-Z]/)&&"function"===typeof e[l]?t?i["".concat(l[2].toLowerCase()).concat(l.substr(3))]=e[l]:n.on["".concat(l[2].toLowerCase()).concat(l.substr(3))]=e[l]:a[l]=e[l])})),["navigation","pagination","scrollbar"].forEach((function(e){!0===n[e]&&(n[e]={}),!1===n[e]&&delete n[e]})),{params:n,passedParams:r,rest:a,events:i}}(I),k=q.params,X=q.passedParams,Y=q.rest,N=q.events,K=Ik(s),H=K.slides,z=K.slots,M=function(){y(!b)};Object.assign(k.on,{_containerClasses:function(e,t){A(t)}});var F=function(){if(Object.assign(k.on,N),d=!0,Z.current=new Oq(k),Z.current.loopCreate=function(){},Z.current.loopDestroy=function(){},k.loop&&(Z.current.loopedSlides=sk(H,k)),Z.current.virtual&&Z.current.params.virtual.enabled){Z.current.virtual.slides=H;var e={cache:!1,slides:H,renderExternal:f,renderExternalUpdate:!1};ik(Z.current.params.virtual,e),ik(Z.current.originalParams.virtual,e)}};B.current||F(),Z.current&&Z.current.on("_beforeBreakpoint",M);return(0,i.useEffect)((function(){return function(){Z.current&&Z.current.off("_beforeBreakpoint",M)}})),(0,i.useEffect)((function(){!G.current&&Z.current&&(Z.current.emitSlidesClasses(),G.current=!0)})),Ck((function(){if(t&&(t.current=B.current),B.current)return Z.current.destroyed&&F(),function(e,t){var n=e.el,i=e.nextEl,r=e.prevEl,a=e.paginationEl,o=e.scrollbarEl,l=e.swiper;rk(t)&&i&&r&&(l.params.navigation.nextEl=i,l.originalParams.navigation.nextEl=i,l.params.navigation.prevEl=r,l.originalParams.navigation.prevEl=r),ak(t)&&a&&(l.params.pagination.el=a,l.originalParams.pagination.el=a),ok(t)&&o&&(l.params.scrollbar.el=o,l.originalParams.scrollbar.el=o),l.init(n)}({el:B.current,nextEl:S.current,prevEl:W.current,paginationEl:V.current,scrollbarEl:R.current,swiper:Z.current},k),u&&u(Z.current),function(){Z.current&&!Z.current.destroyed&&Z.current.destroy(!0,!1)}}),[]),Ck((function(){!d&&N&&Z.current&&Object.keys(N).forEach((function(e){Z.current.on(e,N[e])}));var e=function(e,t,n,i,r){var a=[];if(!t)return a;var o=function(e){a.indexOf(e)<0&&a.push(e)};if(n&&i){var l=i.map(r),g=n.map(r);l.join("")!==g.join("")&&o("children"),i.length!==n.length&&o("children")}return gk.filter((function(e){return"_"===e[0]})).map((function(e){return e.replace(/_/,"")})).forEach((function(n){if(n in e&&n in t)if(nk(e[n])&&nk(t[n])){var i=Object.keys(e[n]),r=Object.keys(t[n]);i.length!==r.length?o(n):(i.forEach((function(i){e[n][i]!==t[n][i]&&o(n)})),r.forEach((function(i){e[n][i]!==t[n][i]&&o(n)})))}else e[n]!==t[n]&&o(n)})),a}(X,w.current,H,x.current,(function(e){return e.key}));return w.current=X,x.current=H,e.length&&Z.current&&!Z.current.destroyed&&dk({swiper:Z.current,slides:H,passedParams:X,changedParams:e,nextEl:S.current,prevEl:W.current,scrollbarEl:R.current,paginationEl:V.current}),function(){N&&Z.current&&Object.keys(N).forEach((function(e){Z.current.off(e,N[e])}))}})),Ck((function(){var e;!(e=Z.current)||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.lazy&&e.params.lazy.enabled&&e.lazy.load(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())}),[m]),i.createElement(o,mk({ref:B,className:lk("".concat(h).concat(r?" ".concat(r):""))},Y),i.createElement(Ak.Provider,{value:Z.current},z["container-start"],i.createElement(g,{className:"swiper-wrapper"},z["wrapper-start"],k.virtual?function(e,t,n){if(!n)return null;var r=e.isHorizontal()?L({},e.rtlTranslate?"right":"left","".concat(n.offset,"px")):{top:"".concat(n.offset,"px")};return t.filter((function(e,t){return t>=n.from&&t<=n.to})).map((function(t){return i.cloneElement(t,{swiper:e,style:r})}))}(Z.current,H,m):!k.loop||Z.current&&Z.current.destroyed?H.map((function(e){return i.cloneElement(e,{swiper:Z.current})})):function(e,t,n){var r=t.map((function(t,n){return i.cloneElement(t,{swiper:e,"data-swiper-slide-index":n})}));function a(e,t,r){return i.cloneElement(e,{key:"".concat(e.key,"-duplicate-").concat(t,"-").concat(r),className:"".concat(e.props.className||""," ").concat(n.slideDuplicateClass)})}if(n.loopFillGroupWithBlank){var o=n.slidesPerGroup-r.length%n.slidesPerGroup;if(o!==n.slidesPerGroup)for(var l=0;l<o;l+=1){var g=i.createElement("div",{className:"".concat(n.slideClass," ").concat(n.slideBlankClass)});r.push(g)}}"auto"!==n.slidesPerView||n.loopedSlides||(n.loopedSlides=r.length);for(var s=sk(r,n),c=[],u=[],I=0;I<s;I+=1){var d=I-Math.floor(I/r.length)*r.length;u.push(a(r[d],I,"append")),c.unshift(a(r[r.length-d-1],I,"prepend"))}return e&&(e.loopedSlides=s),[].concat(c,O(r),u)}(Z.current,H,k),z["wrapper-end"]),rk(k)&&i.createElement(i.Fragment,null,i.createElement("div",{ref:W,className:"swiper-button-prev"}),i.createElement("div",{ref:S,className:"swiper-button-next"})),ok(k)&&i.createElement("div",{ref:R,className:"swiper-scrollbar"}),ak(k)&&i.createElement("div",{ref:V,className:"swiper-pagination"}),z["container-end"]))}));fk.displayName="Swiper";var vk=["tag","children","className","swiper","zoom","virtualIndex"];function bk(){return bk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},bk.apply(this,arguments)}var yk=(0,i.forwardRef)((function(e,t){var n=void 0===e?{}:e,r=n.tag,a=void 0===r?"div":r,o=n.children,l=n.className,g=void 0===l?"":l,s=n.swiper,u=n.zoom,I=n.virtualIndex,d=j(n,vk),C=(0,i.useRef)(null),h=c((0,i.useState)("swiper-slide"),2),A=h[0],p=h[1];function m(e,t,n){t===C.current&&p(n)}Ck((function(){if(t&&(t.current=C.current),C.current&&s){if(!s.destroyed)return s.on("_slideClass",m),function(){s&&s.off("_slideClass",m)};"swiper-slide"!==A&&p("swiper-slide")}})),Ck((function(){s&&C.current&&!s.destroyed&&p(s.getSlideClasses(C.current))}),[s]);var f={isActive:A.indexOf("swiper-slide-active")>=0||A.indexOf("swiper-slide-duplicate-active")>=0,isVisible:A.indexOf("swiper-slide-visible")>=0,isDuplicate:A.indexOf("swiper-slide-duplicate")>=0,isPrev:A.indexOf("swiper-slide-prev")>=0||A.indexOf("swiper-slide-duplicate-prev")>=0,isNext:A.indexOf("swiper-slide-next")>=0||A.indexOf("swiper-slide-duplicate-next")>=0},v=function(){return"function"===typeof o?o(f):o};return i.createElement(a,bk({ref:C,className:lk("".concat(A).concat(g?" ".concat(g):"")),"data-swiper-slide-index":I},d),i.createElement(hk.Provider,{value:f},u?i.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":"number"===typeof u?u:void 0},v()):v()))}));yk.displayName="SwiperSlide";var Gk=n.p+"static/media/Libreria2.37a0aadb9138f7e1ebbc.png",Bk=n.p+"static/media/Libreria3.00806171e75418ff22ec.png",Zk=n.p+"static/media/Libreria4.d2ff3f4e1e0447c101ab.png",wk=n.p+"static/media/Libreria5.892eeffa13e7d2d3413f.png",xk=n.p+"static/media/Libreria6.2da0660fceca84843677.png",Sk=n.p+"static/media/Libreria6A.6d2dbd93c2441a65c8cf.png",Wk=n.p+"static/media/Libreria11.c6192cc55cd22b34fdeb.png",Vk=n.p+"static/media/Libreria11A.cec2de7242df857d1533.png",Rk=n.p+"static/media/Libreria12.8759b5faf22e153cab37.png",qk=n.p+"static/media/Libreria13.91177941a8fab47773de.png",kk=n.p+"static/media/Libreria14.e4b88e2a7fadaf83a1b5.png",Xk=function(e){var t=e.numeroSlide;return(0,OA.jsx)(OA.Fragment,{children:(0,OA.jsx)("div",{style:{width:"90%",height:"90%",overflow:"hidden",marginTop:"5vw",marginLeft:"5vw",position:"relative"},children:(0,OA.jsxs)(fk,{style:{"--swiper-navigation-color":"black","--swiper-navigation-size":"1.3rem"},centeredSlides:!0,autoplay:{delay:10500,disableOnInteraction:!1},navigation:!0,modules:[tk,ek,jq],initialSlide:t,children:[(0,OA.jsx)(yk,{children:(0,OA.jsx)("img",{src:Gk,alt:"image1",style:{width:"100%"}})}),(0,OA.jsx)(yk,{children:(0,OA.jsx)("img",{src:Bk,alt:"image2",style:{width:"100%"}})}),(0,OA.jsx)(yk,{children:(0,OA.jsx)("img",{src:Zk,alt:"image3",style:{width:"100%"}})}),(0,OA.jsx)(yk,{children:(0,OA.jsx)("img",{src:wk,alt:"image4",style:{width:"100%"}})}),(0,OA.jsx)(yk,{children:(0,OA.jsx)("img",{src:xk,alt:"image5",style:{width:"100%"}})}),(0,OA.jsx)(yk,{children:(0,OA.jsx)("img",{src:Sk,alt:"image6",style:{width:"100%"}})}),(0,OA.jsx)(yk,{children:(0,OA.jsx)("img",{src:Wk,alt:"image7",style:{width:"100%"}})}),(0,OA.jsx)(yk,{children:(0,OA.jsx)("img",{src:Vk,alt:"image8",style:{width:"100%"}})}),(0,OA.jsx)(yk,{children:(0,OA.jsx)("img",{src:Rk,alt:"image9",style:{width:"100%"}})}),(0,OA.jsx)(yk,{children:(0,OA.jsx)("img",{src:qk,alt:"image10",style:{width:"100%"}})}),(0,OA.jsx)(yk,{children:(0,OA.jsx)("img",{src:kk,alt:"image11",style:{width:"100%"}})})]})})})},Yk=function(e){var t=e.setModalOn,n=e.setChoice,i=e.numeroSlide,r=e.descripcionSlide;return(0,OA.jsx)("div",{className:"   bg-zinc-200 opacity-80 fixed inset-0 z-50   ",children:(0,OA.jsxs)("div",{className:"relative h-screen justify-center items-center bg-white border-4 border-sky-500 ",children:[(0,OA.jsxs)("div",{className:"flex justify-between items-start p-4 rounded-t  border-b dark:border-gray-600",children:[(0,OA.jsx)("h3",{className:"text-xl font-semibold text-gray-900 dark:text-black",children:r}),(0,OA.jsxs)("button",{onClick:function(){n(!0),t(!1)},type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-toggle":"defaultModal",children:[(0,OA.jsx)("svg",{"aria-hidden":"true",className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,OA.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),(0,OA.jsx)("span",{className:"sr-only",children:"Close modal"})]})]}),(0,OA.jsx)(Xk,{numeroSlide:i})]})})};function Nk(){var e=c((0,i.useState)(!1),2),t=e[0],n=e[1],r=c((0,i.useState)(!1),2),a=r[0],o=r[1],l=c((0,i.useState)(0),2),g=l[0],s=l[1],u=c((0,i.useState)(0),2),I=u[0],d=u[1],C=function(e,t){s(e),n(!0),d(t)};return(0,OA.jsxs)("div",{className:"constelation h-screen",children:[a&&(0,OA.jsx)("div",{className:"flex justify-center"}),t&&(0,OA.jsx)(Yk,{setModalOn:n,setChoice:o,numeroSlide:g,descripcionSlide:I}),(0,OA.jsx)(zR,{}),(0,OA.jsxs)("div",{className:"galaxy",children:[(0,OA.jsxs)("div",{className:"estrella",children:[(0,OA.jsx)("div",{className:"event"}),(0,OA.jsx)("button",{id:0,onClick:function(){return C(0,"Slide 1")},children:(0,OA.jsx)("div",{className:"dot",children:(0,OA.jsx)("div",{className:"theev",children:"evento 1 - Fecha "})})}),(0,OA.jsx)("div",{className:"event",children:(0,OA.jsx)("button",{id:1,onClick:function(){return C(1,"Slide 2")},children:(0,OA.jsx)("div",{className:"dot",children:(0,OA.jsx)("div",{className:"theev",children:"evento 2 - Fecha "})})})}),(0,OA.jsx)("div",{className:"event",children:(0,OA.jsx)("button",{id:2,onClick:function(){return C(2,"Slide 3")},children:(0,OA.jsx)("div",{className:"dot",children:(0,OA.jsx)("div",{className:"theev",children:"evento 3 - Fecha "})})})})]}),(0,OA.jsxs)("div",{className:"estrella",children:[(0,OA.jsx)("div",{className:"event",children:(0,OA.jsx)("button",{id:3,onClick:function(){return C(3,"Slide 4")},children:(0,OA.jsx)("div",{className:"dot",children:(0,OA.jsx)("div",{className:"theev",children:"evento 4 - Fecha "})})})}),(0,OA.jsx)("button",{id:4,onClick:function(){return C(4,"Slide 5")},children:(0,OA.jsx)("div",{className:"dot",children:(0,OA.jsx)("div",{className:"theev",children:"evento 5 - Fecha "})})}),(0,OA.jsx)("div",{className:"event"}),(0,OA.jsx)("button",{id:5,onClick:function(){return C(5,"Slide 6")},children:(0,OA.jsx)("div",{className:"dot",children:(0,OA.jsx)("div",{className:"theev",children:"Nombre del evento - Fecha "})})}),(0,OA.jsx)("div",{className:"event"}),(0,OA.jsx)("button",{id:6,onClick:function(){return C(6,"Slide 7")},children:(0,OA.jsx)("div",{className:"dot",children:(0,OA.jsx)("div",{className:"theev",children:"Nombre del evento - Fecha "})})})]}),(0,OA.jsxs)("div",{className:"estrella",children:[(0,OA.jsx)("div",{className:"event",children:(0,OA.jsx)("button",{id:7,onClick:function(){return C(7,"Slide 8")},children:(0,OA.jsx)("div",{className:"dot",children:(0,OA.jsx)("div",{className:"theev",children:"Nombre del evento - Fecha "})})})}),(0,OA.jsx)("button",{id:8,onClick:function(){return C(8,"Slide 9")},children:(0,OA.jsx)("div",{className:"dot",children:(0,OA.jsx)("div",{className:"theev",children:"Nombre del evento - Fecha "})})}),(0,OA.jsx)("div",{className:"event"}),(0,OA.jsx)("button",{id:9,onClick:function(){return C(9,"Slide 10")},children:(0,OA.jsx)("div",{className:"dot",children:(0,OA.jsx)("div",{className:"theev",children:"Nombre del evento - Fecha "})})}),(0,OA.jsx)("div",{className:"event"}),(0,OA.jsx)("button",{id:10,onClick:function(){return C(10,"Slide 11")},children:(0,OA.jsx)("div",{className:"dot",children:(0,OA.jsx)("div",{className:"theev",children:"Nombre del evento - Fecha "})})})]})]})]})}function Kk(){return(0,OA.jsx)("div",{children:" MeteoroGame"})}var Hk=n.p+"static/media/Logoinicio.b43da708b6f9e1dbf07c.png";function zk(){return(0,OA.jsx)("section",{className:"grid place-items-center min-h-screen bg-gradient-to-r from-indigo-900 via-fuchsia-900 to-indigo-900",children:(0,OA.jsxs)("div",{className:"text-center sm:text-left p-4 max-w-5xl grid gap-4 sm:grid-cols-2",children:[(0,OA.jsxs)("div",{className:"sm: self-center",children:[(0,OA.jsxs)("h1",{className:"text-4xl sm:text-5xl font-semibold sm:col-span-2 ",children:["\xbfEst\xe1s listo para ",(0,OA.jsx)("br",{})," vivir esta aventura?"]}),(0,OA.jsx)("p",{className:"pt-4 pb-4",children:"Bienvenido a nuestra fant\xe1stica galaxia. Aqu\xed vas a despertar tu potencial creativo y formular incre\xedbles proyectos de innovaci\xf3n."}),(0,OA.jsx)("button",{class:" border border-white text-white  py-1.5 px-2 rounded-full inline-flex items-center",children:(0,OA.jsx)("a",{className:"font-['Montserrat'] border-none rounded-full py-1.5 px-8 font-semibold bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-pink-500 hover:to-yellow-500",href:"/Home",children:"Ingresar"})})]}),(0,OA.jsx)("div",{className:"grid  place-items-center",children:(0,OA.jsx)("img",{className:"h-[300px] sm:h-[450px]",src:Hk})})]})})}var Mk=n.p+"static/media/planetaModal.2569ffe6e344f7903923.png",Fk=function(e){e.setModalOn,e.setChoice;return(0,OA.jsxs)("section",{className:"grid place-items-center min-h-screen bg-gradient-to-r from-indigo-900 via-fuchsia-900 to-indigo-900",children:[(0,OA.jsx)("div",{className:"absolute top-10 left-10",children:(0,OA.jsx)("button",{children:(0,OA.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAACXBIWXMAAAsSAAALEgHS3X78AAAbHklEQVR4nOVdCXQUVbr+bnVnYwlBcCGAhlEI0EGiCIiOEBaHWRQS3xlnXIAg782Mw+p7844GUMQBl3nzDK6MnqeAo86ZGTWgzDiL7Awqa5QkJOiwOAmIgoQskHTSue/8XbfSlUpVd93q6tiJ3zl9Oumurrp1v/qX+9///pehi4JzniNxZ8WMsequ2BOdmmDOeQaAbPGaACBN/O0Ux8SrGMBxQfzWr/cuo0OnIphzTuTlCDJzBKEdga2C9A2djfC4J1io2ukAcgFkxEGTCOuJbHqPd9UelwQL1bswSlI1dRsJ0ar1tUKy10dxjpghrgjmnOcKYmUcpK16m0mkMsbsEGt2/RzxQGUIM5AtYQbomk8R4V3VYXMMznk+5/wot4cDnPOHJb3kaNqWzTlfxDkv4pyftdHCs6J9HeUfxC8kiC0Sx37tnUZahnO+xgbZ31yiSfo451sidNBRITnx4li1g3joIt0HEb0ozpoeG9DTLJ7+cNgibHFnuq8MG/d1QAzzuiaEagun1rZ0lF2NFQTRD0cgurBLqW0htUURnuxOTawRNiS6a0iz8ECtnCiS5vw4aGbMIO4/nI3uvLZZOCBWKPomeZfCWbQyT2s6XV+EUU9nO5sD5RaE2raS5gOxItnVSJZo5BoRYjSCIk55HRnledrHr2ZAmiJuVHtnAFfE//eUsh0d1R6offQwgGUmX1G/TGSMFbt5PdcIFuRusYjrLmeMPezWtYz4lY+PZMB4BlyhAEQq/d9LAbiOWG5GsO7zjxlwXAEOKsCOO2JIvHAqi0zCoK6T7ArBYcilBs92OxC/0sfTGDCNAbcSsQqQxtqTSATKENz6m9bPGXYqwEYG7Pi3EnbQzXsQAZwiiz5zjeSoCY5ArqtP4yM+PlMQO00jwUz1ukiw/hiS7NcY8Pq0EnbOjfsJY9Jc67uoCA5DbrGQ3KgbuEyV1gUMmE9qV0dERxMMJXTO1xVg9fddkmpySgEYh4yukBwtwQcsyJ0YrTP1oC/48CxQVGJbVXA8EKxz2nYw4ImpJWxnNPeKGJLsmGCLBrlC7hIff0hIbS9958chwdrfJNFPTC5hn0Vz3xZ9SvPM1zjtU0cEiwhMoeFjasCgaMgt8PEJDHiZvGEzwuKYYPq7WgF+M7GEPeH0/hFGcBhj1zg5nzTBwsXfYvg4KlVyv2pnNaltQ2gnIlg75iADZoyPQpopIGKS1UKZIrNlz6VIXlhz7Y3Ii4LckQA2i1SdroAsCurszOJ3RHEvecLc6ZHvJHYvRbBw6Y2D89lOU0n/28enc5XckU5+H68Q3v6zu7L4s06aKMzcbKEZ9SiUTYCwTbAIsZmpjbUyF9TwCx8niX2rA3ObOxwM+PEHWXzDh1m8l+y1hUY0quQ0Cw1qCVsEi7lLY/yUGnCfk077hY+/DOBJJ7/thLiRAev3OCOZIoCrDB9nC2Gzdw47B1kY/Wuc2N3/8gW9xJkGZ6qdE9WJnSxjUAQ65yt3lIMomEm8oVr0f8T04IgSLAy7kdzlTsj9T5XcWbK/6yLIIkk+4ECSLVT1Gjs/DEuwCEUax7vFTmaG7vPxwm8wuRqI5KKPJEkWwrTc8HGOnbn1sCraYu5yoqzXfJ+PE7FrWOiCRlUcExV9+RiwpFSwS4aql9Wf56tytDTVAl8dQqC5ps15Y6Wi9d/vurqESSc+UPqTYSkPreIYFO43lgQLd/yAwcuVHmwv8gUdtP164mJF8JApYANHQxlwHZSLM+0HcepPgp/ai8AXexCofA/NgvBYEkzvL2aVsKUyfWkRZJodbiQTjmBjyMy2YdewUI1QHUFossB1gtP6g42eASVrOjxJPdu3ofYEOL3o75N70UK/TR+tmqYe/cB6pLfvg2PvoPnYevi/3I1ADAmm383ylbB37fYnzB3esFJsSrCQ3qOGj6WzMhb6eBFTl37CbYJ79wcbPxdK1rS2fkTlXrQc2YyW0+VoqdqtEhrJi04fC8/lk+EZOBHe7v1CfXJ6HwJlq9F4+kM0x4hgil9PHlbC/mW3T2Wl2Ipgo+2VnkhYqAYyCrULuEVwSk9g7Ex4bro3RGzNCfB9r6KlbD2a/TXRDZP6jYVyZS4SMm6FVzv/59vQvH8xLpDqdpNg8f2uYSUsz26/wly7WkpxO4KF53zUYHulpHeBqprpHL3cJLjfUGDaSnguFfb13Anwf6xGoLRIlVSzMe34AiSMvAueg6+heddjaIpEsEZAzwFgY1ciue8oeOhaTbXgxctw4dTf0eQmweL3CzJL2O/t9q8IPB0wfJxnlhplNkzKNQkfyoYjC7nLIciRuVBmrIGXyG2sBXauRsvq76DpYBFatGMGjoEy9VF4730fSePmqcT0FQ9DTxNbGw51lWjZko/zH9yHC0RuQk+w0U+iW9ZiJLt5XwK//ERi6CSGTcaRjOlkjdfkM+OBa2UcqwW+oI1wdcVCzlwoE4RKPlUBvnEJAl+Uq9JByMqDcuO98KTqSOybqR6/aQmahufB8/EraHZy7ar30Hx6N+rGPY1ufUbBk3EHkojsjwtwwaXbo0anAvgPAL+W+NlTBmeLxsUZRq7aPNUWzpVUSHK+j29h4sKaykUUKvq2lfBkT1d/9vEGtPztcQRIgonty4YCP1gJ7yW6IdE/t6hOVllR0AN2NVQ5cjGSB92BRLrOiY3wHyzAeTMVnTocnoRU0M95UyUC/kq0hFPRumuOvlLO4TKOi9uZUqMEG6X3mCS5OZLlF8LimlwoGrkfbQB/ewkCGhE3zYXn2zpHq/RttLz/HJprq0IPids4+CgaasoRGLkcKem3IDElHcrZvWjulg6lRyY8PQarZsEKNdvh/6wANbxGHbaZ4BeS8+LrDM4wBZTaEGyUYOMTcR9jzDibYQmSXiJYJ7WOJXj4ZLA7n1IJJHI3qOQGvejbn4H38uvUU31RAf7uUjR/eUgEJwzS6KYE06vHALDslUi56FpT8xYRlQ+j9uybaLCQYHrPHFTCauycy47G9eoOzjapaGM7YX2+L3gxV6S3d3/gthUqueWbwdcLyU3uCTZjbciL3vsqApsebw1GxBQJqWCDZyJxyE+RpL9O3WEEqvehueEEAoFa8MyH0T1cOxL7h5dyAD+xa4vJ3nLOiw0zTbP02SD6p9BITrFktRqz9TaOQOQm9wSqTwBELlRyMVNH7p+WInBwvUp8rJE2DJ7rViA5dYhKTnMd+PHX0VhVBH9jZWswJSiFGT9FSlI/+4kUJrhd0tlaZyC4DY/6hkw3+aEMXFk1eG0u2KDRKolFSxFoqFU/n/pAiNyNSxH4eH1oeBRLpA2DctNL6KaR+8mLaNw8FbWHn0Hjhcr2bTj1DhrDNSc5M7wEM2Dg8Sz+XYlbMmrZbH1aj55gowTbnjGa5+NmY2dHmPxztU3vvwp+dLfqjFw/E8pI4Wy9sxSBjzqI3N7DoIx/Cd1oWERj4W23o77iGTQ0WztJqFyHhsaT1u3z9LQl3T+y20ahZY2atpXL4MVMSihUS07oG6XfEUblgqWlAyS1W55TO4lUszYGpmFSR5FLGL0CKRq5/5iD8+cOqeYiHIj8skWoDdRZPwQ2ICPBMJHiCdof2tPkWHoFXFHPk3TSe0Go5u8+AI9mj//6eMeRO2I+knoNUduzcw7OVxvIHXAbEkc8hm7XrUOPoYuRctH1IX+mvgyB4h/iXO1+NBnP23Qi8kNC+Jecmv7I8H+rTdYaZUxbNf7AEvPUsW/U6nn4ZKB3uvr3rldUImnGSBsHb38eLQ21oWFXLNF9AJThP1UDGuUvwH/2kOqpQ3jTN6xB955DQra097XwDrgDSac2wl9RgDr6jJyv0lmo6TEc3kvykNTnFiR5eoD5T9h+SMcB+IvNY40C2UqwYvzA4gfh4MrQyDdJJfLAhpD0ThQSTdJb3IGqecRcldzzJ9Fy+BX49d+Nfgbd9OTqcektSMyYjxT9Z/VlaD6+EvUXDkuHSm+we6Cww21m+jSzqxFsHP/K2N8JNo6JiOGC4LLNqu0itTxUfLbt+Y4jNzEVrH+OSuDxt9HcpHOoeg2DJ1KAI/1O88mIHtcigd7rdrd9YKzAAF9VFk+VaLqRsyCnioWDJbOALOp6T98aDZYssjHKNqkdOmyy+hk5XB0pvUNnIUFzrIzS22tYZA/Y2wMs7XqVTA3dhock/nyZlCRnSRy7zfC/SrCJ/bQtvfPU6FXU9vdbo9X3o3tC0qKNhcs3R+WNSiExFci8UyXnxNZg8kCbaxPxTs6bOkY9p/8kWgJhhlhGMNUO24VRKIN+lddEAmWiV64UCk0fqr4f2atrxB5wCll+8NuOkV6KMec8jWSNxJLn2qvSc+X22lJnkNI+09TwZs228EEQEwyUONYomEHBM7MnxyVO6ko5vmTRqSfLQ0/3/vXgB9YHp9liEmcO2toxUPoMhXLRUCgDc0JqtPowWmjCXzFcmHKzag4jkGrhZBG+2IhGkdoTRNIAKN0Gq/18piimBBsRFD668BVRnMSV6JWmohtszaFEByL2xgeQMHiatbN0+NX241cNxQ/iwg0voTvZWuN39Z8g8OljOK//LKNAnXwg9Uz2VzJIPcDugZSrznkb7d9KsFHNygyRnCzDsIQ2PIoV+gyDMu1lJCZGsKWUG231XU0ZAhSLzipAMg2X6FX3CQKnt6CJwpQtOulNvR4JaePVIdfJF9oSbxPRSHAQjuY0dXC1YurJ8tgFMvraJLdKOFfhDiIV/FEBLlgk3QXRfTg8mYUIjg3q9qPptJgD7mh8HdfscJBa/u5TkcklVG62F0oMByI36yWkUuSKYtJHlqjRra8DcUUwec2xwJi58NrNqvxXGPVsB31vRuIIHbmH5qCm0WRaMUZoF82KVkW7it7pYNVV7o57U/uDXX1XxCyKIGiNkl9nQ2WQQvHrlejeS0S6iNyyOahx4FhFg2NGsxkXBJ+sAPplxubcPfu3l9yvDqsSddGQthqMlq2QOg8332sEEXvVXCRfdovqTGn49CHUUxy6IyZHdGhDLnnWcUHwBTE8GjQGTB/NcgO0PmnDPfBTQtuZcvCmmlByXjDFZgo8Y+5HorYmaVQBkj4sQEOkS192MxIy7kZib4vY9Jm/wx8P9i9agh3tMGbEkT3gFI+OlRSLRWjcLGhy/D00n9qNQPY8JAy9EwmDboWXAckfmiS297sZ3n6T4L0sBwn6cTANkypfQ0NKOjxX/ATJNB6OzZ3Iw2sSw8yWGAvLRL0sQSoa6tqjDtZoKsju7nkUfpLuET9DIi08S+yJlE9ehb/3UHguHg1PvwntheHkRviP/xaNdWVqkv2odeqw6HxFdI6aDraT4K3gFZP7+oyMDi9rdETNvWI04U8kf17ecRMMGq66DV4il8KUpK7Tc+Cll9Xxx3+HxvJHg2Ph1qdSc7Cq97pGcKXdA012cQkKrpmZkIlOubKXLkWwtHlgyqp045wyIHLHPYIkIve9fFzYuSiyDT61qS2Jl9wcmiIk++tS02Qk2HRWUDGZhZCJTrm2/0LZZvVdm/jvKFwzD4k3PIKks4fR8vd8XCB1fepDBL7cJ2dH+05SveivtsEv44VHgAzBpjN7iglJtqcAny11r5o7TfTT5D5lVdKyFbfOGw43PYrEkT9DApH7t3w0NOomO6o2h1ezZz4MfU9DJW2YdGqDa9JLT0mpxOFG3oIJAGYSLDvH65qa1qYLx90dW4Kp8s4P1iH5qmnwErl/zUeDcXK/Oszc7xfb2s42peep5FI+9JfuqWeCDMHG1CnVBov0HNOELZtwRYopTKllcdB7rKSYZpRuWYOky0ZB+fRtNG+4TVXLMuc4+tsQiSS9A+9UJ/SPveDemmFSz/0llpJa5dUp+n90kLHDxlwgR5jy87aEfu9+dX2Smxg0BZ5bX0biRZlQDvwGTTsWy0vbV/vRrFfPmQ8ghcbEDSfRcvJNV9Xz+7aPVctuhCXYSJJMed+oVTSl7Fwr8p9fWxjMfw7a4u8/YC+GbAffLkDCd1apM0rbH4R//7PWk/pQ85/bIVinY0lISin5/eIJqvdc/hDq3WqrwC6JY40a95iWOGklwbZV9LOlwRNFtS/SLfer7aAwJTlbby1V7R8lvWfnRjfjRZMNuWuROOIueP214G/9EI0VRZHHqRTg0P9P5O6ag/PnxcwQreLP/G81B/rzjfB/9YFrY18NdpPeYWJ/W4VOMX4gkCFZeHqDxLFtcOVoMC1lZ+MTqi0kkmn5Cv2duwKKU5K/NQWeH72BpPTroJypQMtrU9F4+pD81N2ZfQhsvR312tokbyrYtavQjVQzrQ+ueMxV20v4y0Cbi8AFjALZqpGDHSfE2SjFMuuNHEuwZnv3bwDXJ939+XG0HNur/j9dkuSkVGBCAbw/WIUEqn5X8TYCG2bDL+NM1Veh5dPX4d+3DA3b8lFfLySXlq6MW4PuKf2g0Drhkgdxvsm9ca8G29IrBNFyZYpi9qGA7RULQk1LV34nz1mT3veeb99Jr89H4PMK9fNpK6CMtEHyxcPA7noDidliDnjnr9C8aTGaGiVJOPIWmg48hsZjb4VsdbcBUMaJdUlE7p45qKstc3digQMkuTLlDc3sb+skkL7DjAu+cyW3PJVdMI6bZqjSe2QPcLaq/ffkbK3Nb0OyZ2oYx+uGufDe/UckUjklqsTz50VoKnZYPsmIi8fCO+EP6J4qyN09B/U1LpMr8O4VcurZuHS3jTZtJVisBzZGtWyr6WdKgyWGpcbE2oKzfRuspYtIXpePQIWIVY++G8q/vwnvpbqZp0uGgc16Ewnj7lXJ/7IC/K174P/ne+4QMHwekm78P3UhOJH7wRzUn4sNuYT/tXugEEAjR21GREaVZ7SlsgW8n7J7IFXL0ZaLauuRrEAk/34BAttXq3aQSjnc8wa8Ux6Ah16z/ogErXwwFSN9Yzb8XxyK3i5eMhae7/0N3YeKwiuU9L79h6iLkeQS/jBILrjRbis8YzlDYxklsxqIg2SKscz38aNMDLrDlVG6ajTYz9aAkXp+cXao1mS4WpX0P2V93LoCnl4mSXRlbyPw18Vqmkw0ZZQunwJv5gwkXDwqZA4qXkBjxbNodLsYaZSF0Ix7OaxijLXZKKXNfCepac75MUNUZKHM7ipM3V/AWO62Ha4UztXJCjlJ+/wQOJUzNCOYbK8vD55/bkLAL7lK4qJhUK7Kg3eAoaTwZ++g6dDzasGVWKbgcOD3V8mXFTZ6z+38ILMJ7acM+zTQjlvL7S4pfbqUbV3g41vtBksu2CSCwpbXz4RnzN2hECZVm/10M1oGT4JC5FKld3rhl/CergCv2osWqnx3plxN2WnVBEw9H61Lotelo6AYc6aPv4Om0ufhv1AZSveJFchzZnKlk2BiPovN6qqYEbzWQDAZ8kXGEnkRMNukApspUiIscSYixs2EMlZHLHnIO1YjsPcVtU7W5scRGDIZyuDJYFdOVCu/U5XZvhFKFhlRuRXNVZsRoAKkTTXq4rMOSpx7cbCc9GaY2F9T/8d0xkam4LQVFvo4FUZbZmWDx88Am3Y/GDlQZINPlrcvZUiT/7TKXz/psOdVtGx/DgF/beh4o22lssK0EQe9SLKTeoL10RUspbRZ+n1dFVrqT4Cf2oMATfLbKWUYg4LgJcNK2GSZvjXbboEx1tvsWCuCzWogStWthEoybcaRDROC+/QHFr0BJUWQR5mVWmO0aUMN9BDQMGn78wicq2rrOJkRHMtalTEgmEr6l9jtU9ntFiznXC025ZAt65/N1M0nTTfl6D8UmPU0FG24ZASt7qdXxSa0NNa2lfCuQDADlvpK2It2+9MJL+EIdmVjjkWGPZP0BGsvmnC4coxobRV4dZW6wr+LbW1n/P7drBImFWewGMaG5SRs1oTFbtRS42KoJNPmHAutCDYj0Goc3EUILmFA3gjJfQxNttSJqFUjOYnLTcKXtvbM02NVaXDwLR2r7qI4x4FZDshdZDL0vC+SyQxLsJBUo/ud42Qn6sLS4I5prmVhdlIQuXkj5cKRWsy53fa+dvZujjjME/rdqJKld6IWmPQNJpnIzb1GwmPWwWzndVvRRbvjeMfbm+rxpDpvPIm5lKjXiRAkd5QDcoVqNs4YrbK7QWhYJ8twoUIR0dJD2qvWQLuA09593wAnixyqeWOdkWvmNR8T+zLYGq7KROKWm6jXZZI51K34dSm7B8AjTn7bWcCBf9CEvENyrfbrny0Ti7BNsDip2dayRSYr22zhf0oZPTS3ubnGKV7Agd/cUMKmX+9gS3eBIpNc5+WyezdLxdLFbIWpPZZM72nFr0oZZWSOcmsJTByA7O20b5ewJU6bIuIP7Yq0OzGHtm2wSQOMQ6VisTu4Y2ks8PEFDHiIhUKbnc0G/44Bi3OcS63VrutSdlcPRwTDPJsAbpC8xBfUBE8yYGYnIvigAiyeXMJ2Or1v0af5JqOTatGnjoaX0RCcJjI3XCeZ8KCPU9rugwowIY4JPs6AJ6aWsNejuVdYkwvRl47Nl2OCYb3PP9wimbDMxycIaZ4ZLwQz4DMFePz7LhCL8OSG3Z/fDqIiGKGx2pZYkkxY7uNX6Ii+4msg+JwC/IkBr02LUhXrYeHPwA1y4QbBCE/yMbEztavhyRU+PlJRib5VR3YsCCZSNzJgJ73nReE8GSFMXGEsyYVbBCM8ydWiwVGtQLTCE6pkj2fASAZcrah/OyX4Y0W8GLDjx6XsYCzaLExbkcU6bNfIhZsEI7zjBbOc3Vih0MfTBNkQ72kmkqoRWk02Nb+UuVLzy0Yf5VpMHlSL6T/XyI0JiGSamObmOOA06tXZIfql0KJfzna6folwM44mKDorKF5Pm2+Heehd2dykw0HuvyDU6sZc2w4+Tu+fpHaNxf1z8V2HVxZ0FfR0CjLD3WTnfILDgLRUmIf7rLDFXQfihsPh4U7/NIe0lpU65sI/6XIPdBDkSIRxwDqtRAtVHInYs05y2TolIthmDUXxrsaE+Sm0cS+FXUE7SUE89eHslIajooPiYhghSF0Uwa/Q0HXVsV1IEM0F2aTCZeuHRNvGHNFGO6RyQWxcjBBcjWRFA0HYIrHu1e5TXyxeH2l/Rzu5ITRFtmjDBMkNsNeKtBpXtjpwA3FDsB7C9s6SrNWlhzZ/eszGtgNauahsh9XutcUBa92aOXMTcUmwBiHV+aJUUDwFRY6JgjXr3J4pcxtxTbAeupJBmtrsSOelWmgFSthfH08qOBI6DcFG6Er4ZQvSM1wivdpo2+NdSsOh0xJsBUG8RrQdtd5aAC6a3Ke4BID/B4xgzVAMvlw2AAAAAElFTkSuQmCC",onClick:function(){jf.push("/Home")},alt:"image1",className:"h-[60px]"})})}),(0,OA.jsxs)("div",{className:"text-center sm:text-left pt-8 max-w-5xl grid gap-4 sm:grid-cols-1 sm:grid-rows-2",children:[(0,OA.jsx)("div",{className:"grid place-items-center",children:(0,OA.jsx)("img",{src:Mk,className:"h-[300px] ",alt:"image1"})}),(0,OA.jsxs)("div",{className:"text-center ",children:[(0,OA.jsx)("h1",{className:"text-1xl sm:text-2xl font-['Montserrat'] sm:col-span-2 ",children:"Por millones de a\xf1os las constelaciones han ayudado a miles de civilizaciones entender el universo y comprender que todos estamos conectados."}),(0,OA.jsx)("h2",{className:"pt-8 text-1xl sm:text-2xl font-['Montserrat'] pb-4 font-semibold",children:"\xa1Con\xe9ctate con el conocimiento que tiene nuestra constelaci\xf3n!"}),(0,OA.jsx)("button",{class:" border border-white text-white  py-1.5 px-2 rounded-full inline-flex items-center",children:(0,OA.jsx)("a",{className:"font-['Montserrat'] border-none rounded-full py-1.5 px-8 font-semibold bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-pink-500 hover:to-yellow-500",onClick:function(){jf.push("/PostLibreriaOrion")},children:"Descubrir"})})]})]})]})};function Lk(){return(0,OA.jsx)("div",{className:" h-screen",children:(0,OA.jsx)(HR,{history:jf,children:(0,OA.jsxs)(M,{children:[(0,OA.jsx)(H,{exact:!0,path:"/",element:(0,OA.jsx)(zk,{})}),(0,OA.jsx)(H,{path:"/Home",element:(0,OA.jsx)(XR,{})}),(0,OA.jsx)(H,{path:"/detail/:plantetId",element:(0,OA.jsx)(NR,{})}),(0,OA.jsx)(H,{path:"/NebulosaInnova",element:(0,OA.jsx)(_R,{})}),(0,OA.jsx)(H,{path:"/Supernova",element:(0,OA.jsx)(TR,{})}),(0,OA.jsx)(H,{path:"/Ideaverso",element:(0,OA.jsx)(JR,{})}),(0,OA.jsx)(H,{path:"/MeteoroGame",element:(0,OA.jsx)(Kk,{})}),(0,OA.jsx)(H,{path:"/PostLibreriaOrion",element:(0,OA.jsx)(Nk,{})}),(0,OA.jsx)(H,{path:"LibreriaOrion",element:(0,OA.jsx)(Fk,{})})]})})})}a.createRoot(document.getElementById("root")).render((0,OA.jsx)(i.StrictMode,{children:(0,OA.jsx)(Lk,{})}))}()}();
//# sourceMappingURL=main.6f17336a.js.map